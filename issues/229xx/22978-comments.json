[
   {
      "author_association" : "MEMBER",
      "body" : "> The way I would like range checking to work in the future would be to rely more on C++ types and `std::numeric_limits`.\r\n\r\nConcept ACK.",
      "created_at" : "2021-09-25T12:32:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22978#issuecomment-927114728",
      "id" : 927114728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22978",
      "node_id" : "IC_kwDOABII5843QqXo",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-25T12:32:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927114728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Possibly related: https://github.com/bitcoin/bitcoin/issues/23843",
      "created_at" : "2022-01-03T14:38:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22978#issuecomment-1004136876",
      "id" : 1004136876,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22978",
      "node_id" : "IC_kwDOABII58472ems",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1004136876/reactions"
      },
      "updated_at" : "2022-01-03T14:38:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1004136876",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Had a go at revisiting this with #26177 in mind. Here's a branch, https://github.com/ajtowns/bitcoin/commits/202209-chainstate-argsman-types and here's [an example](https://github.com/ajtowns/bitcoin/blob/08ebff304747ff9386cd4c6048fc4fc9a9301877/src/chainparams.cpp#L94) of what it might look like:\r\n\r\n```c++\r\nclass SigNetOptionsRegistration\r\n{\r\npublic:\r\n    using T = CChainParams::SigNetOptions;\r\n\r\n    static inline void GetChallenge(std::vector<uint8_t>& challenge, const std::string& hex)\r\n    {\r\n        challenge = ParseHex(hex);\r\n    }\r\n\r\n    template<typename C, typename Op>\r\n    static inline void Register(Op& op)\r\n    {\r\n        return C::Do(op,\r\n            C::Defn(&T::challenge, GetChallenge, \"-signetchallenge\", \"\", \"Blocks must satisfy the given script to be considered valid (only for signet networks; defaults to the global default signet test network challenge)\", ArgsManager::ALLOW_ANY | ArgsManager::DISALLOW_NEGATION, OptionsCategory::CHAINPARAMS),\r\n            C::Defn(&T::seeds, \"-signetseednode\", \"\", \"Specify a seed node for the signet network, in the hostname[:port] format, e.g. sig.net:1234 (may be used multiple times to specify multiple seed nodes; defaults to the global default signet test network seed node(s))\", ArgsManager::ALLOW_ANY | ArgsManager::DISALLOW_NEGATION, OptionsCategory::CHAINPARAMS)\r\n        );\r\n    }\r\n};\r\n...\r\nvoid RegisterChainParamsOptions(ArgsManager& args)\r\n{\r\n    SettingsRegister<SigNetOptionsRegistration>::Register(args);\r\n    SettingsRegister<RegTestOptionsRegistration>::Register(args);\r\n}\r\n\r\nCChainParams::SigNetOptions GetSigNetOptions(const ArgsManager& args)\r\n{\r\n    return SettingsRegister<SigNetOptionsRegistration>::Get(args);\r\n}\r\n```\r\n\r\nIdea is you make a container for the options (`T = SigNetOptions`), provide a `Register` function that associates the options with the field in that structure (and a conversion function like `GetChallenge` if needed), then use `SettingsRegister<>::Register(args)` to register the args, then parse them, then get the results with `SettingsRegister<>::Get(args)`, and you're done.\r\n",
      "created_at" : "2022-09-28T02:33:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22978#issuecomment-1260310040",
      "id" : 1260310040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22978",
      "node_id" : "IC_kwDOABII585LHs4Y",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1260310040/reactions"
      },
      "updated_at" : "2022-09-28T02:33:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1260310040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   }
]
