[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Shouldn't you be using \"-connect=<ip>\" option (which can be specified multiple times)?\r\n\r\nCurrently, since you do not specify that option, it could connect to other nodes on the testnet as well.\r\n\r\nYour log says:\r\n\r\n2019-10-29T16:41:49Z Loaded 7 addresses from peers.dat  0ms\r\n\r\nWhich means it discovered some testnet peers earlier and connects to them. If you want to limit, you could use the option that I mentioned above.",
      "created_at" : "2019-11-05T04:17:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17321#issuecomment-549656211",
      "id" : 549656211,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17321",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTY1NjIxMQ==",
      "updated_at" : "2019-11-05T04:17:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549656211",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/198132?v=4",
         "events_url" : "https://api.github.com/users/nixbox/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nixbox/followers",
         "following_url" : "https://api.github.com/users/nixbox/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nixbox/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nixbox",
         "id" : 198132,
         "login" : "nixbox",
         "node_id" : "MDQ6VXNlcjE5ODEzMg==",
         "organizations_url" : "https://api.github.com/users/nixbox/orgs",
         "received_events_url" : "https://api.github.com/users/nixbox/received_events",
         "repos_url" : "https://api.github.com/users/nixbox/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nixbox/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nixbox/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nixbox"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "The documentation says :\r\n```\r\n-connect=<ip>\r\n       Connect only to the specified node\r\n-listen\r\n       Accept connections from outside (default: 1 if no -proxy or -connect)\r\n```\r\nThis means that it will block incoming connection if I use -connect, right ?\r\nThis is why I used -addnode. \r\n\r\n3 hosts could successfully connect to a fourth one (manual -addnode). The fourth one sent the ADDR messages to the other nodes and then they do not connect to each other as expected.\r\n\r\n```\r\n               +----------------+                                                  \r\n               |                |                                                  \r\n               |       1        |                                                  \r\n               +----------------+                                                  \r\n                  -    |   --                                                      \r\n                -/     |     \\-                                                    \r\n              -/       |       \\-                                                  \r\n            -/         |         \\--                                               \r\n          -/           |            \\-                                             \r\n        -/             |              \\-                                           \r\n      -/               |                \\-                                         \r\n+----------+      +----------+     +----------+                                    \r\n|          |  ?   |          |  ?  |          |                                    \r\n|    2     |------|     3    |-----|     4    |                                    \r\n+----------+      +----------+     +----------+                                    \r\n       --                              /--                                         \r\n         \\---                      /---                                            \r\n             \\---             /----                                                \r\n                 \\---  ?  /---                                                     \r\n                     \\----                                                         \r\n```\r\n\r\nnodes 2,3,4 are connected to node 1 (with a manual `bitcoin-cli -addnode ip_addr_of_1 add`\r\nnode 1 sends ADDR messages to 2,3,4\r\nnode 2 doesn't connect to node 3 or node 4, node 3 doesn't connect to node 4, etc ...\r\n\r\n\r\nYou said that my nodes discovered some testnet peers and connect to them but this is not true.\r\nWhen I do `bitcoin-cli getconnectioncount` on 2,3,4, it says `1`\r\nAnd when I do `bitcoin-cli getconnectioncount` on 1, it says `3`\r\nI checked with `bitcoin-cli getpeerinfo` on 2,3,4, it is indeed the node 1\r\nand for node 1, it is nodes 2,3,4.",
      "created_at" : "2019-11-05T10:00:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17321#issuecomment-549751978",
      "id" : 549751978,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17321",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTc1MTk3OA==",
      "updated_at" : "2019-11-05T10:02:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549751978",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6040039?v=4",
         "events_url" : "https://api.github.com/users/jpeisenbarth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jpeisenbarth/followers",
         "following_url" : "https://api.github.com/users/jpeisenbarth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jpeisenbarth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jpeisenbarth",
         "id" : 6040039,
         "login" : "jpeisenbarth",
         "node_id" : "MDQ6VXNlcjYwNDAwMzk=",
         "organizations_url" : "https://api.github.com/users/jpeisenbarth/orgs",
         "received_events_url" : "https://api.github.com/users/jpeisenbarth/received_events",
         "repos_url" : "https://api.github.com/users/jpeisenbarth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jpeisenbarth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jpeisenbarth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jpeisenbarth"
      }
   }
]
