[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28649).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/28649#pullrequestreview-1707129039), [pinheadmz](https://github.com/bitcoin/bitcoin/pull/28649#pullrequestreview-1709180046), [achow101](https://github.com/bitcoin/bitcoin/pull/28649#issuecomment-1799645189) |\n| Concept ACK | [laanwj](https://github.com/bitcoin/bitcoin/pull/28649#issuecomment-1787362292) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28690](https://github.com/bitcoin/bitcoin/pull/28690) (build: Introduce internal kernel library by TheCharlatan)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-10-13T14:35:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28649#issuecomment-1761627822",
      "id" : 1761627822,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28649",
      "node_id" : "IC_kwDOABII585pAE6u",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1761627822/reactions"
      },
      "updated_at" : "2023-11-07T19:11:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1761627822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "concept ACK 608f8aa1c472da81f0c2b0db37be7dbcc932582a\r\n\r\nReviewed all code changes and built locally. I don't see anything wrong with this simple update, it makes a lot of sense and is implemented cleanly. Later this week I'll try to test it if I can, I know its covering a sort of intermittent failure but there might be a way to see it work in action, maybe in combination with #27375 ",
      "created_at" : "2023-10-16T20:12:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28649#issuecomment-1765198991",
      "id" : 1765198991,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28649",
      "node_id" : "IC_kwDOABII585pNsyP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1765198991/reactions"
      },
      "updated_at" : "2023-10-16T20:12:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1765198991",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK. In 70917bdb18035530b would it make sense to use `Span`?",
      "created_at" : "2023-10-16T20:34:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28649#issuecomment-1765229184",
      "id" : 1765229184,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28649",
      "node_id" : "IC_kwDOABII585pN0KA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1765229184/reactions"
      },
      "updated_at" : "2023-10-16T20:34:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1765229184",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28649#discussion_r1361841492"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28649"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361841492"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "_moving a [discussion](https://github.com/bitcoin/bitcoin/pull/28649#issuecomment-1765229184) from the main thread here_\r\n\r\n> would it make sense to use `Span`?\r\n\r\nMaybe. What would be the purpose? To unite the two `SendComplete(const std::string&` and `SendComplete(const std::vector<uint8_t>&` into one method?",
      "commit_id" : "608f8aa1c472da81f0c2b0db37be7dbcc932582a",
      "created_at" : "2023-10-17T09:53:22Z",
      "diff_hunk" : "@@ -223,15 +223,31 @@ class Sock\n     /**\n      * Send the given data, retrying on transient errors.\n      * @param[in] data Data to send.\n+     * @param[in] len Length of the data in bytes.\n      * @param[in] timeout Timeout for the entire operation.\n      * @param[in] interrupt If this is signaled then the operation is canceled.\n      * @throws std::runtime_error if the operation cannot be completed. In this case only some of\n      * the data will be written to the socket.\n      */\n+    virtual void SendComplete(const void* data,\n+                              size_t len,\n+                              std::chrono::milliseconds timeout,\n+                              CThreadInterrupt& interrupt) const;\n+\n+    /**\n+     * Convenience method, equivalent to `SendComplete(data.data(), data.size(), timeout, interrupt)`.\n+     */\n     virtual void SendComplete(const std::string& data,\n                               std::chrono::milliseconds timeout,\n                               CThreadInterrupt& interrupt) const;\n \n+    /**\n+     * Convenience method, equivalent to `SendComplete(data.data(), data.size(), timeout, interrupt)`.\n+     */\n+    virtual void SendComplete(const std::vector<uint8_t>& data,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28649#discussion_r1361841492",
      "id" : 1361841492,
      "line" : 247,
      "node_id" : "PRRC_kwDOABII585RLA1U",
      "original_commit_id" : "608f8aa1c472da81f0c2b0db37be7dbcc932582a",
      "original_line" : 247,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/util/sock.h",
      "position" : 25,
      "pull_request_review_id" : 1681882982,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28649",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361841492/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-17T09:53:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361841492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28649#discussion_r1371097619"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28649"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371097619"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, possibly, when I see range-like objects with data and size attributes, it reminds me of `Span` and this section from `src/span.h`:\r\n\r\n```cpp\r\n * - Due to Span's automatic creation from range-like objects (arrays, and data\r\n *   types that expose a data() and size() member function), functions that\r\n *   accept a Span as input parameter can be called with any compatible\r\n *   range-like object. For example, this works:\r\n```\r\n\r\nFeel free to ignore that and the following:\r\n\r\n<details><summary>could update the headers a little</summary><p>\r\n\r\n```diff\r\n--- a/src/test/fuzz/socks5.cpp\r\n+++ b/src/test/fuzz/socks5.cpp\r\n@@ -2,13 +2,12 @@\r\n // Distributed under the MIT software license, see the accompanying\r\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\r\n \r\n-#include <netaddress.h>\r\n #include <netbase.h>\r\n #include <test/fuzz/FuzzedDataProvider.h>\r\n #include <test/fuzz/fuzz.h>\r\n-#include <test/fuzz/util.h>\r\n #include <test/fuzz/util/net.h>\r\n #include <test/util/setup_common.h>\r\n+#include <util/threadinterrupt.h>\r\n\r\n--- a/src/util/sock.cpp\r\n+++ b/src/util/sock.cpp\r\n@@ -2,7 +2,6 @@\r\n \r\n-#include <common/system.h>\r\n #include <compat/compat.h>\r\n\r\n--- a/src/util/sock.h\r\n+++ b/src/util/sock.h\r\n@@ -6,7 +6,6 @@\r\n \r\n #include <compat/compat.h>\r\n-#include <util/threadinterrupt.h>\r\n #include <util/time.h>\r\n \r\n @ -14,6 +13,8 @@\r\n #include <unordered_map>\r\n \r\n+class CThreadInterrupt;\r\n+\r\n```\r\n</p></details>\r\n",
      "commit_id" : "af0fca530e4d8311bcb24a14c416e5ad7c30ff78",
      "created_at" : "2023-10-25T03:31:36Z",
      "diff_hunk" : "@@ -223,15 +223,31 @@ class Sock\n     /**\n      * Send the given data, retrying on transient errors.\n      * @param[in] data Data to send.\n+     * @param[in] len Length of the data in bytes.\n      * @param[in] timeout Timeout for the entire operation.\n      * @param[in] interrupt If this is signaled then the operation is canceled.\n      * @throws std::runtime_error if the operation cannot be completed. In this case only some of\n      * the data will be written to the socket.\n      */\n+    virtual void SendComplete(const void* data,\n+                              size_t len,\n+                              std::chrono::milliseconds timeout,\n+                              CThreadInterrupt& interrupt) const;\n+\n+    /**\n+     * Convenience method, equivalent to `SendComplete(data.data(), data.size(), timeout, interrupt)`.\n+     */\n     virtual void SendComplete(const std::string& data,\n                               std::chrono::milliseconds timeout,\n                               CThreadInterrupt& interrupt) const;\n \n+    /**\n+     * Convenience method, equivalent to `SendComplete(data.data(), data.size(), timeout, interrupt)`.\n+     */\n+    virtual void SendComplete(const std::vector<uint8_t>& data,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28649#discussion_r1371097619",
      "id" : 1371097619,
      "in_reply_to_id" : 1361841492,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585RuUoT",
      "original_commit_id" : "608f8aa1c472da81f0c2b0db37be7dbcc932582a",
      "original_line" : 247,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/util/sock.h",
      "position" : null,
      "pull_request_review_id" : 1696298376,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28649",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371097619/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-25T03:48:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371097619",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. Good catch!",
      "created_at" : "2023-10-31T14:43:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28649#issuecomment-1787362292",
      "id" : 1787362292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28649",
      "node_id" : "IC_kwDOABII585qiPv0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1787362292/reactions"
      },
      "updated_at" : "2023-10-31T14:43:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1787362292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`608f8aa1c4...af0fca530e`: use a `Span` for `Sock::SendComplete()`, looks better, thanks for the [suggestion](https://github.com/bitcoin/bitcoin/pull/28649#issuecomment-1765229184).",
      "created_at" : "2023-10-31T17:27:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28649#issuecomment-1787664526",
      "id" : 1787664526,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28649",
      "node_id" : "IC_kwDOABII585qjZiO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1787664526/reactions"
      },
      "updated_at" : "2023-10-31T17:27:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1787664526",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28649#discussion_r1378097032"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28649"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378097032"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "<details><summary>The first commit could be smaller and simpler/clearer (feel free to ignore).</summary><p>\r\n\r\n```diff\r\n@@ -283,13 +283,6 @@ void Sock::SendComplete(Span<const unsigned char> data,\r\n     }\r\n }\r\n \r\n-void Sock::SendComplete(Span<const char> data,\r\n-                        std::chrono::milliseconds timeout,\r\n-                        CThreadInterrupt& interrupt) const\r\n-{\r\n-    SendComplete(MakeUCharSpan(data), timeout, interrupt);\r\n-}\r\n-\r\n std::string Sock::RecvUntilTerminator(uint8_t terminator,\r\n                                       std::chrono::milliseconds timeout,\r\n                                       CThreadInterrupt& interrupt,\r\ndiff --git a/src/util/sock.h b/src/util/sock.h\r\nindex 65e7ffc1650..17bab33feaa 100644\r\n--- a/src/util/sock.h\r\n+++ b/src/util/sock.h\r\n@@ -228,16 +228,11 @@ public:\r\n      * @throws std::runtime_error if the operation cannot be completed. In this case only some of\r\n      * the data will be written to the socket.\r\n      */\r\n-    virtual void SendComplete(Span<const unsigned char> data,\r\n-                              std::chrono::milliseconds timeout,\r\n-                              CThreadInterrupt& interrupt) const;\r\n-\r\n-    /**\r\n-     * Convenience method, equivalent to `SendComplete(MakeUCharSpan(data), timeout, interrupt)`.\r\n-     */\r\n-    virtual void SendComplete(Span<const char> data,\r\n-                              std::chrono::milliseconds timeout,\r\n-                              CThreadInterrupt& interrupt) const;\r\n+    virtual void SendComplete(Span<const unsigned char> data, std::chrono::milliseconds timeout, CThreadInterrupt& interrupt) const;\r\n+    virtual void SendComplete(Span<const char> data, std::chrono::milliseconds timeout, CThreadInterrupt& interrupt) const\r\n+    {\r\n+        SendComplete(MakeUCharSpan(data), timeout, interrupt);\r\n+    }\r\n```\r\n</p></details>",
      "commit_id" : "af0fca530e4d8311bcb24a14c416e5ad7c30ff78",
      "created_at" : "2023-10-31T19:48:49Z",
      "diff_hunk" : "@@ -228,7 +228,14 @@ class Sock\n      * @throws std::runtime_error if the operation cannot be completed. In this case only some of\n      * the data will be written to the socket.\n      */\n-    virtual void SendComplete(const std::string& data,\n+    virtual void SendComplete(Span<const unsigned char> data,\n+                              std::chrono::milliseconds timeout,\n+                              CThreadInterrupt& interrupt) const;\n+\n+    /**\n+     * Convenience method, equivalent to `SendComplete(MakeUCharSpan(data), timeout, interrupt)`.\n+     */\n+    virtual void SendComplete(Span<const char> data,\n                               std::chrono::milliseconds timeout,\n                               CThreadInterrupt& interrupt) const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28649#discussion_r1378097032",
      "id" : 1378097032,
      "line" : 240,
      "node_id" : "PRRC_kwDOABII585SJBeI",
      "original_commit_id" : "af0fca530e4d8311bcb24a14c416e5ad7c30ff78",
      "original_line" : 240,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/util/sock.h",
      "position" : 14,
      "pull_request_review_id" : 1707129039,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28649",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378097032/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-31T19:50:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378097032",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28649#discussion_r1378708089"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28649"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378708089"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I prefer to keep all implementation in one place and to keep the interface separate from the implementation.",
      "commit_id" : "af0fca530e4d8311bcb24a14c416e5ad7c30ff78",
      "created_at" : "2023-11-01T11:59:24Z",
      "diff_hunk" : "@@ -228,7 +228,14 @@ class Sock\n      * @throws std::runtime_error if the operation cannot be completed. In this case only some of\n      * the data will be written to the socket.\n      */\n-    virtual void SendComplete(const std::string& data,\n+    virtual void SendComplete(Span<const unsigned char> data,\n+                              std::chrono::milliseconds timeout,\n+                              CThreadInterrupt& interrupt) const;\n+\n+    /**\n+     * Convenience method, equivalent to `SendComplete(MakeUCharSpan(data), timeout, interrupt)`.\n+     */\n+    virtual void SendComplete(Span<const char> data,\n                               std::chrono::milliseconds timeout,\n                               CThreadInterrupt& interrupt) const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28649#discussion_r1378708089",
      "id" : 1378708089,
      "in_reply_to_id" : 1378097032,
      "line" : 240,
      "node_id" : "PRRC_kwDOABII585SLWp5",
      "original_commit_id" : "af0fca530e4d8311bcb24a14c416e5ad7c30ff78",
      "original_line" : 240,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/util/sock.h",
      "position" : 14,
      "pull_request_review_id" : 1708066400,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28649",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378708089/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-01T11:59:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378708089",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK af0fca530e4d8311bcb24a14c416e5ad7c30ff78",
      "created_at" : "2023-11-07T19:11:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28649#issuecomment-1799645189",
      "id" : 1799645189,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28649",
      "node_id" : "IC_kwDOABII585rRGgF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1799645189/reactions"
      },
      "updated_at" : "2023-11-07T19:11:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1799645189",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
