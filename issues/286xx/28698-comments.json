[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28698).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [theStack](https://github.com/bitcoin/bitcoin/pull/28698#pullrequestreview-1698178157) |\n| Stale ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/28698#issuecomment-1778724056), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/28698#pullrequestreview-1697295633), [fjahr](https://github.com/bitcoin/bitcoin/pull/28698#issuecomment-1779333751) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2023-10-20T22:41:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#issuecomment-1773477037",
      "id" : 1773477037,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28698",
      "node_id" : "IC_kwDOABII585ptRyt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1773477037/reactions"
      },
      "updated_at" : "2023-10-25T20:15:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1773477037",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nI think in practice the most likely scenario for triggering this condition is that a user first successfully loads an UTXO snapshot with AssumeUTXO hash H in release version Y, and at some later point runs an earlier release version X on that same datadir (i.e. X < Y and Y includes H in the AssumeUTXO parameters, but X doesn't yet). This will probably not happen too often, but nevertheless the crash should be fixed.",
      "created_at" : "2023-10-21T21:07:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#issuecomment-1773921417",
      "id" : 1773921417,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28698",
      "node_id" : "IC_kwDOABII585pu-SJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1773921417/reactions"
      },
      "updated_at" : "2023-10-21T21:07:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1773921417",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1368149554"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1368149554"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`std::optional<AssumeutxoData> maybe_au_data`\r\n\r\nThe code below relies on the fact that this an `std::optional`, so it seems safer to not use `auto`, in light of future refactors.",
      "commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "created_at" : "2023-10-23T05:36:15Z",
      "diff_hunk" : "@@ -387,7 +387,13 @@ bool BlockManager::LoadBlockIndex(const std::optional<uint256>& snapshot_blockha\n     }\n \n     if (snapshot_blockhash) {\n-        const AssumeutxoData au_data = *Assert(GetParams().AssumeutxoForBlockhash(*snapshot_blockhash));\n+        const auto& maybe_au_data = GetParams().AssumeutxoForBlockhash(*snapshot_blockhash);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1368149554",
      "id" : 1368149554,
      "line" : 390,
      "node_id" : "PRRC_kwDOABII585RjE4y",
      "original_commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "original_line" : 390,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : 5,
      "pull_request_review_id" : 1691737437,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1368149554/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-23T05:40:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1368149554",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1368149862"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1368149862"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could keep the assert: `= *Assert(maybe_au_data)`",
      "commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "created_at" : "2023-10-23T05:36:58Z",
      "diff_hunk" : "@@ -387,7 +387,13 @@ bool BlockManager::LoadBlockIndex(const std::optional<uint256>& snapshot_blockha\n     }\n \n     if (snapshot_blockhash) {\n-        const AssumeutxoData au_data = *Assert(GetParams().AssumeutxoForBlockhash(*snapshot_blockhash));\n+        const auto& maybe_au_data = GetParams().AssumeutxoForBlockhash(*snapshot_blockhash);\n+        if (!maybe_au_data) {\n+            BlockValidationState state_dummy;\n+            const std::string au_data_error = strprintf(\"Assumeutxo data not found for the given blockhash '%s'.\", snapshot_blockhash->ToString());\n+            return FatalError(m_opts.notifications, state_dummy, au_data_error, _(au_data_error.c_str()));\n+        }\n+        const AssumeutxoData& au_data = *maybe_au_data;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1368149862",
      "id" : 1368149862,
      "line" : 396,
      "node_id" : "PRRC_kwDOABII585RjE9m",
      "original_commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "original_line" : 396,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : 11,
      "pull_request_review_id" : 1691737437,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1368149862/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-23T05:39:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1368149862",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1368635965"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1368635965"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"assumeutxo, blockstorage: prevent core dump on invalid hash\" (caae1c935e3ee8541fe065da43bfb2c3c8e57554)\r\n\r\nWould be good to drop the `state_dummy` variable and  `_(au_data_error.c_str())` translation which doesn't really make sense, and just call m_opts.notifications->fatalError() instead of FatalError",
      "commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "created_at" : "2023-10-23T13:09:23Z",
      "diff_hunk" : "@@ -387,7 +387,13 @@ bool BlockManager::LoadBlockIndex(const std::optional<uint256>& snapshot_blockha\n     }\n \n     if (snapshot_blockhash) {\n-        const AssumeutxoData au_data = *Assert(GetParams().AssumeutxoForBlockhash(*snapshot_blockhash));\n+        const auto& maybe_au_data = GetParams().AssumeutxoForBlockhash(*snapshot_blockhash);\n+        if (!maybe_au_data) {\n+            BlockValidationState state_dummy;\n+            const std::string au_data_error = strprintf(\"Assumeutxo data not found for the given blockhash '%s'.\", snapshot_blockhash->ToString());\n+            return FatalError(m_opts.notifications, state_dummy, au_data_error, _(au_data_error.c_str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1368635965",
      "id" : 1368635965,
      "line" : 394,
      "node_id" : "PRRC_kwDOABII585Rk7o9",
      "original_commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "original_line" : 394,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : 9,
      "pull_request_review_id" : 1692495976,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1368635965/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-23T13:23:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1368635965",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Nice catch. It would be good to have a python test for this. A test can trigger the crash / error by just creating a `chainstate_snapshot/base_blockhash` file in the datadir with a random block hash.\r\n\r\nI've written a test using this idea, based on this PR on commit https://github.com/theStack/bitcoin/commit/fb4eb165958448b9a7bc5aba100b2c5e2ee1ed86 (branch https://github.com/theStack/bitcoin/commits/pr28698_test_followup), feel free to include it here @pablomartin4btc.",
      "created_at" : "2023-10-24T12:07:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#issuecomment-1777080336",
      "id" : 1777080336,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28698",
      "node_id" : "IC_kwDOABII585p7BgQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1777080336/reactions"
      },
      "updated_at" : "2023-10-24T12:07:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1777080336",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1370903873"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370903873"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ok",
      "commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "created_at" : "2023-10-24T22:50:29Z",
      "diff_hunk" : "@@ -387,7 +387,13 @@ bool BlockManager::LoadBlockIndex(const std::optional<uint256>& snapshot_blockha\n     }\n \n     if (snapshot_blockhash) {\n-        const AssumeutxoData au_data = *Assert(GetParams().AssumeutxoForBlockhash(*snapshot_blockhash));\n+        const auto& maybe_au_data = GetParams().AssumeutxoForBlockhash(*snapshot_blockhash);\n+        if (!maybe_au_data) {\n+            BlockValidationState state_dummy;\n+            const std::string au_data_error = strprintf(\"Assumeutxo data not found for the given blockhash '%s'.\", snapshot_blockhash->ToString());\n+            return FatalError(m_opts.notifications, state_dummy, au_data_error, _(au_data_error.c_str()));\n+        }\n+        const AssumeutxoData& au_data = *maybe_au_data;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1370903873",
      "id" : 1370903873,
      "in_reply_to_id" : 1368149862,
      "line" : 396,
      "node_id" : "PRRC_kwDOABII585RtlVB",
      "original_commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "original_line" : 396,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : 11,
      "pull_request_review_id" : 1696033114,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370903873/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-24T22:50:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370903873",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1370904247"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370904247"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ok, let me change it, I solved it that way because I saw how it's managed in `src/validation.cpp`:\r\nhttps://github.com/bitcoin/bitcoin/blob/d53400e75e2a4573229dba7f1a0da88eb936811c/src/validation.cpp#L5359-L5368",
      "commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "created_at" : "2023-10-24T22:51:15Z",
      "diff_hunk" : "@@ -387,7 +387,13 @@ bool BlockManager::LoadBlockIndex(const std::optional<uint256>& snapshot_blockha\n     }\n \n     if (snapshot_blockhash) {\n-        const AssumeutxoData au_data = *Assert(GetParams().AssumeutxoForBlockhash(*snapshot_blockhash));\n+        const auto& maybe_au_data = GetParams().AssumeutxoForBlockhash(*snapshot_blockhash);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1370904247",
      "id" : 1370904247,
      "in_reply_to_id" : 1368149554,
      "line" : 390,
      "node_id" : "PRRC_kwDOABII585Rtla3",
      "original_commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "original_line" : 390,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : 5,
      "pull_request_review_id" : 1696033724,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370904247/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-24T22:51:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370904247",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> From the command line this is also easy to test by running:\r\n\r\n<details>\r\n<summary>True, tested it, thanks @ryanofsky!</summary>\r\n\r\n\r\n```\r\ndd bs=32 count=1 if=/dev/urandom of=${AU_DATADIR}/regtest/chainstate_snapshot/base_blockhash\r\n1+0 records in\r\n1+0 records out\r\n32 bytes copied, 7,6874e-05 s, 416 kB/s\r\n```\r\n\r\n\r\n```\r\n./src/bitcoind -datadir=${AU_DATADIR} -regtest\r\n2023-10-24T23:13:19Z [init] Using obfuscation key for /home/pablo/.test_utxo_2/regtest/blocks/index: 0000000000000000\r\n2023-10-24T23:13:19Z [init] *** Assumeutxo data not found for the given blockhash 'f09b5835f3f8b39481f2af3257bbc2e82845552d4d2d6d31cf520fc24263ed5b'.\r\n2023-10-24T23:13:19Z [init] Error: Assumeutxo data not found for the given blockhash 'f09b5835f3f8b39481f2af3257bbc2e82845552d4d2d6d31cf520fc24263ed5b'.\r\nError: Assumeutxo data not found for the given blockhash 'f09b5835f3f8b39481f2af3257bbc2e82845552d4d2d6d31cf520fc24263ed5b'.\r\n2023-10-24T23:13:19Z [init] Shutdown requested. Exiting.\r\n2023-10-24T23:13:19Z [init] Shutdown: In progress...\r\n2023-10-24T23:13:19Z [scheduler] scheduler thread exit\r\n2023-10-24T23:13:19Z [shutoff] Flushed fee estimates to fee_estimates.dat.\r\n2023-10-24T23:13:19Z [shutoff] Shutdown: done\r\n```\r\n\r\n</details>",
      "created_at" : "2023-10-24T23:17:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#issuecomment-1778204448",
      "id" : 1778204448,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28698",
      "node_id" : "IC_kwDOABII585p_T8g",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1778204448/reactions"
      },
      "updated_at" : "2023-10-24T23:17:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1778204448",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371083699"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371083699"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If i remove the translation string (the second parameter of the `fatalError()` function) the propagated error would be \"`Error: A fatal internal error occured...`\":\r\n\r\n```\r\n2023-10-25T02:29:57Z [init] Using obfuscation key for /home/pablo/.test_utxo_2/regtest/blocks/index: 0000000000000000\r\n2023-10-25T02:29:57Z [init] *** Assumeutxo data not found for the given blockhash 'f09b5835f3f8b39481f2af3257bbc2e82845552d4d2d6d31cf520fc24263ed5b'.\r\n2023-10-25T02:29:57Z [init] Error: A fatal internal error occurred, see debug.log for details\r\nError: A fatal internal error occurred, see debug.log for details\r\n2023-10-25T02:29:57Z [init] Shutdown requested. Exiting.\r\n2023-10-25T02:29:57Z [init] Shutdown: In progress...\r\n2023-10-25T02:29:57Z [scheduler] scheduler thread exit\r\n2023-10-25T02:29:57Z [shutoff] Flushed fee estimates to fee_estimates.dat.\r\n2023-10-25T02:29:57Z [shutoff] Shutdown: done\r\n\r\n```\r\n\r\nSo I have to update also the `expected_error` value in the new test `test_invalid_chainstate_scenarios` added by @theStack.",
      "commit_id" : "3d7c103930f5625e83fbbf7e4311f7389e399003",
      "created_at" : "2023-10-25T03:06:00Z",
      "diff_hunk" : "@@ -387,7 +387,13 @@ bool BlockManager::LoadBlockIndex(const std::optional<uint256>& snapshot_blockha\n     }\n \n     if (snapshot_blockhash) {\n-        const AssumeutxoData au_data = *Assert(GetParams().AssumeutxoForBlockhash(*snapshot_blockhash));\n+        const auto& maybe_au_data = GetParams().AssumeutxoForBlockhash(*snapshot_blockhash);\n+        if (!maybe_au_data) {\n+            BlockValidationState state_dummy;\n+            const std::string au_data_error = strprintf(\"Assumeutxo data not found for the given blockhash '%s'.\", snapshot_blockhash->ToString());\n+            return FatalError(m_opts.notifications, state_dummy, au_data_error, _(au_data_error.c_str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371083699",
      "id" : 1371083699,
      "in_reply_to_id" : 1368635965,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585RuROz",
      "original_commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "original_line" : 394,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1696277745,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371083699/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-25T03:06:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371083699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371085539"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371085539"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done!",
      "commit_id" : "3d7c103930f5625e83fbbf7e4311f7389e399003",
      "created_at" : "2023-10-25T03:10:13Z",
      "diff_hunk" : "@@ -387,7 +387,13 @@ bool BlockManager::LoadBlockIndex(const std::optional<uint256>& snapshot_blockha\n     }\n \n     if (snapshot_blockhash) {\n-        const AssumeutxoData au_data = *Assert(GetParams().AssumeutxoForBlockhash(*snapshot_blockhash));\n+        const auto& maybe_au_data = GetParams().AssumeutxoForBlockhash(*snapshot_blockhash);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371085539",
      "id" : 1371085539,
      "in_reply_to_id" : 1368149554,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585RuRrj",
      "original_commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "original_line" : 390,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1696280301,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371085539/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-25T03:10:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371085539",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371085658"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371085658"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done!",
      "commit_id" : "3d7c103930f5625e83fbbf7e4311f7389e399003",
      "created_at" : "2023-10-25T03:10:27Z",
      "diff_hunk" : "@@ -387,7 +387,13 @@ bool BlockManager::LoadBlockIndex(const std::optional<uint256>& snapshot_blockha\n     }\n \n     if (snapshot_blockhash) {\n-        const AssumeutxoData au_data = *Assert(GetParams().AssumeutxoForBlockhash(*snapshot_blockhash));\n+        const auto& maybe_au_data = GetParams().AssumeutxoForBlockhash(*snapshot_blockhash);\n+        if (!maybe_au_data) {\n+            BlockValidationState state_dummy;\n+            const std::string au_data_error = strprintf(\"Assumeutxo data not found for the given blockhash '%s'.\", snapshot_blockhash->ToString());\n+            return FatalError(m_opts.notifications, state_dummy, au_data_error, _(au_data_error.c_str()));\n+        }\n+        const AssumeutxoData& au_data = *maybe_au_data;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371085658",
      "id" : 1371085658,
      "in_reply_to_id" : 1368149862,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585RuRta",
      "original_commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "original_line" : 396,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1696280450,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371085658/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-25T03:10:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371085658",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371085979"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371085979"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Updated it.",
      "commit_id" : "3d7c103930f5625e83fbbf7e4311f7389e399003",
      "created_at" : "2023-10-25T03:11:07Z",
      "diff_hunk" : "@@ -387,7 +387,13 @@ bool BlockManager::LoadBlockIndex(const std::optional<uint256>& snapshot_blockha\n     }\n \n     if (snapshot_blockhash) {\n-        const AssumeutxoData au_data = *Assert(GetParams().AssumeutxoForBlockhash(*snapshot_blockhash));\n+        const auto& maybe_au_data = GetParams().AssumeutxoForBlockhash(*snapshot_blockhash);\n+        if (!maybe_au_data) {\n+            BlockValidationState state_dummy;\n+            const std::string au_data_error = strprintf(\"Assumeutxo data not found for the given blockhash '%s'.\", snapshot_blockhash->ToString());\n+            return FatalError(m_opts.notifications, state_dummy, au_data_error, _(au_data_error.c_str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371085979",
      "id" : 1371085979,
      "in_reply_to_id" : 1368635965,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585RuRyb",
      "original_commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "original_line" : 394,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1696280836,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371085979/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-25T03:11:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371085979",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased.\r\n\r\nI've also included suggestions from @Sjors, @ryanofsky and functional test from @theStack. Thanks to all for reviewing!",
      "created_at" : "2023-10-25T03:13:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#issuecomment-1778437448",
      "id" : 1778437448,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28698",
      "node_id" : "IC_kwDOABII585qAM1I",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1778437448/reactions"
      },
      "updated_at" : "2023-10-25T03:13:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1778437448",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 3d7c103930f5625e83fbbf7e4311f7389e399003\r\n\r\nI tested that reverting 4a5be10b928d4ed33d223972537c1cb79163e79c breaks the new test, and shows the original `Assertion`. ",
      "created_at" : "2023-10-25T08:01:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#issuecomment-1778724056",
      "id" : 1778724056,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28698",
      "node_id" : "IC_kwDOABII585qBSzY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1778724056/reactions"
      },
      "updated_at" : "2023-10-25T08:01:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1778724056",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371731363"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371731363"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"test: add coverage for snapshot chainstate not matching AssumeUTXO parameters\" (3d7c103930f5625e83fbbf7e4311f7389e399003)\r\n\r\nCan just say bytes(range(32)) without the list constructor\r\n\r\nAlso technically no need to reverse the hash with [::-1] below, but maybe that's kept intentionally to follow a convention",
      "commit_id" : "3d7c103930f5625e83fbbf7e4311f7389e399003",
      "created_at" : "2023-10-25T13:05:13Z",
      "diff_hunk" : "@@ -107,6 +109,23 @@ def expected_error(log_msg=\"\", rpc_details=\"\"):\n                 f.write(valid_snapshot_contents[(32 + 8 + offset + len(content)):])\n             expected_error(log_msg=f\"[snapshot] bad snapshot content hash: expected 61d9c2b29a2571a5fe285fe2d8554f91f93309666fc9b8223ee96338de25ff53, got {wrong_hash}\")\n \n+    def test_invalid_chainstate_scenarios(self):\n+        self.log.info(\"Test different scenarios of invalid snapshot chainstate in datadir\")\n+\n+        self.log.info(\"  - snapshot chainstate refering to a block that is not in the assumeutxo parameters\")\n+        self.stop_node(0)\n+        chainstate_snapshot_path = self.nodes[0].chain_path / \"chainstate_snapshot\"\n+        chainstate_snapshot_path.mkdir()\n+        invalid_hash = bytes(list(range(32)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371731363",
      "id" : 1371731363,
      "line" : 119,
      "node_id" : "PRRC_kwDOABII585RwvWj",
      "original_commit_id" : "3d7c103930f5625e83fbbf7e4311f7389e399003",
      "original_line" : 119,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_assumeutxo.py",
      "position" : 20,
      "pull_request_review_id" : 1697295633,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371731363/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-25T13:05:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371731363",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371741833"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371741833"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think if you re-touch, this symbol name can be removed completely and you can just use `f.write(b'z' * 32)  # invalid hash` (or similar) to achieve the same without `bytes`, `list`, `range`, and reverse.",
      "commit_id" : "3d7c103930f5625e83fbbf7e4311f7389e399003",
      "created_at" : "2023-10-25T13:13:03Z",
      "diff_hunk" : "@@ -107,6 +109,23 @@ def expected_error(log_msg=\"\", rpc_details=\"\"):\n                 f.write(valid_snapshot_contents[(32 + 8 + offset + len(content)):])\n             expected_error(log_msg=f\"[snapshot] bad snapshot content hash: expected 61d9c2b29a2571a5fe285fe2d8554f91f93309666fc9b8223ee96338de25ff53, got {wrong_hash}\")\n \n+    def test_invalid_chainstate_scenarios(self):\n+        self.log.info(\"Test different scenarios of invalid snapshot chainstate in datadir\")\n+\n+        self.log.info(\"  - snapshot chainstate refering to a block that is not in the assumeutxo parameters\")\n+        self.stop_node(0)\n+        chainstate_snapshot_path = self.nodes[0].chain_path / \"chainstate_snapshot\"\n+        chainstate_snapshot_path.mkdir()\n+        invalid_hash = bytes(list(range(32)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371741833",
      "id" : 1371741833,
      "in_reply_to_id" : 1371731363,
      "line" : 119,
      "node_id" : "PRRC_kwDOABII585Rwx6J",
      "original_commit_id" : "3d7c103930f5625e83fbbf7e4311f7389e399003",
      "original_line" : 119,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_assumeutxo.py",
      "position" : 20,
      "pull_request_review_id" : 1697313246,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371741833/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-25T13:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371741833",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371804720"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371804720"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ok, I'll do, thanks!",
      "commit_id" : "3d7c103930f5625e83fbbf7e4311f7389e399003",
      "created_at" : "2023-10-25T13:53:35Z",
      "diff_hunk" : "@@ -107,6 +109,23 @@ def expected_error(log_msg=\"\", rpc_details=\"\"):\n                 f.write(valid_snapshot_contents[(32 + 8 + offset + len(content)):])\n             expected_error(log_msg=f\"[snapshot] bad snapshot content hash: expected 61d9c2b29a2571a5fe285fe2d8554f91f93309666fc9b8223ee96338de25ff53, got {wrong_hash}\")\n \n+    def test_invalid_chainstate_scenarios(self):\n+        self.log.info(\"Test different scenarios of invalid snapshot chainstate in datadir\")\n+\n+        self.log.info(\"  - snapshot chainstate refering to a block that is not in the assumeutxo parameters\")\n+        self.stop_node(0)\n+        chainstate_snapshot_path = self.nodes[0].chain_path / \"chainstate_snapshot\"\n+        chainstate_snapshot_path.mkdir()\n+        invalid_hash = bytes(list(range(32)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371804720",
      "id" : 1371804720,
      "in_reply_to_id" : 1371731363,
      "line" : 119,
      "node_id" : "PRRC_kwDOABII585RxBQw",
      "original_commit_id" : "3d7c103930f5625e83fbbf7e4311f7389e399003",
      "original_line" : 119,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_assumeutxo.py",
      "position" : 20,
      "pull_request_review_id" : 1697417166,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371804720/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-25T13:53:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371804720",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Code review ACK 3d7c103930f5625e83fbbf7e4311f7389e399003",
      "created_at" : "2023-10-25T13:56:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#issuecomment-1779333751",
      "id" : 1779333751,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28698",
      "node_id" : "IC_kwDOABII585qDnp3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1779333751/reactions"
      },
      "updated_at" : "2023-10-25T13:56:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1779333751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371847288"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371847288"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It may be best to leave this as-is, unless there is another reason to touch. Otherwise the reviewers will have to come around again.",
      "commit_id" : "811067ca1cbbd4a697791cbe3ecd4bee19fe6193",
      "created_at" : "2023-10-25T14:14:33Z",
      "diff_hunk" : "@@ -107,6 +109,23 @@ def expected_error(log_msg=\"\", rpc_details=\"\"):\n                 f.write(valid_snapshot_contents[(32 + 8 + offset + len(content)):])\n             expected_error(log_msg=f\"[snapshot] bad snapshot content hash: expected 61d9c2b29a2571a5fe285fe2d8554f91f93309666fc9b8223ee96338de25ff53, got {wrong_hash}\")\n \n+    def test_invalid_chainstate_scenarios(self):\n+        self.log.info(\"Test different scenarios of invalid snapshot chainstate in datadir\")\n+\n+        self.log.info(\"  - snapshot chainstate refering to a block that is not in the assumeutxo parameters\")\n+        self.stop_node(0)\n+        chainstate_snapshot_path = self.nodes[0].chain_path / \"chainstate_snapshot\"\n+        chainstate_snapshot_path.mkdir()\n+        invalid_hash = bytes(list(range(32)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371847288",
      "id" : 1371847288,
      "in_reply_to_id" : 1371731363,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585RxLp4",
      "original_commit_id" : "3d7c103930f5625e83fbbf7e4311f7389e399003",
      "original_line" : 119,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_assumeutxo.py",
      "position" : null,
      "pull_request_review_id" : 1697490842,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371847288/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-25T14:14:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371847288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371852198"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371852198"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Already done, next time I'll keep that in mind.",
      "commit_id" : "811067ca1cbbd4a697791cbe3ecd4bee19fe6193",
      "created_at" : "2023-10-25T14:17:54Z",
      "diff_hunk" : "@@ -107,6 +109,23 @@ def expected_error(log_msg=\"\", rpc_details=\"\"):\n                 f.write(valid_snapshot_contents[(32 + 8 + offset + len(content)):])\n             expected_error(log_msg=f\"[snapshot] bad snapshot content hash: expected 61d9c2b29a2571a5fe285fe2d8554f91f93309666fc9b8223ee96338de25ff53, got {wrong_hash}\")\n \n+    def test_invalid_chainstate_scenarios(self):\n+        self.log.info(\"Test different scenarios of invalid snapshot chainstate in datadir\")\n+\n+        self.log.info(\"  - snapshot chainstate refering to a block that is not in the assumeutxo parameters\")\n+        self.stop_node(0)\n+        chainstate_snapshot_path = self.nodes[0].chain_path / \"chainstate_snapshot\"\n+        chainstate_snapshot_path.mkdir()\n+        invalid_hash = bytes(list(range(32)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1371852198",
      "id" : 1371852198,
      "in_reply_to_id" : 1371731363,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585RxM2m",
      "original_commit_id" : "3d7c103930f5625e83fbbf7e4311f7389e399003",
      "original_line" : 119,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_assumeutxo.py",
      "position" : null,
      "pull_request_review_id" : 1697498743,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371852198/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-25T14:17:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1371852198",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1372439335"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1372439335"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah... I'd need to do what @theStack [mentioned below](https://github.com/bitcoin/bitcoin/pull/28698#pullrequestreview-1698178157).",
      "commit_id" : "811067ca1cbbd4a697791cbe3ecd4bee19fe6193",
      "created_at" : "2023-10-26T00:21:08Z",
      "diff_hunk" : "@@ -387,7 +387,13 @@ bool BlockManager::LoadBlockIndex(const std::optional<uint256>& snapshot_blockha\n     }\n \n     if (snapshot_blockhash) {\n-        const AssumeutxoData au_data = *Assert(GetParams().AssumeutxoForBlockhash(*snapshot_blockhash));\n+        const auto& maybe_au_data = GetParams().AssumeutxoForBlockhash(*snapshot_blockhash);\n+        if (!maybe_au_data) {\n+            BlockValidationState state_dummy;\n+            const std::string au_data_error = strprintf(\"Assumeutxo data not found for the given blockhash '%s'.\", snapshot_blockhash->ToString());\n+            return FatalError(m_opts.notifications, state_dummy, au_data_error, _(au_data_error.c_str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#discussion_r1372439335",
      "id" : 1372439335,
      "in_reply_to_id" : 1368635965,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585RzcMn",
      "original_commit_id" : "caae1c935e3ee8541fe065da43bfb2c3c8e57554",
      "original_line" : 394,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1698507251,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28698",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1372439335/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-26T00:21:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1372439335",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Agree with @theStack's suggestion, forgot to say that yesterday.",
      "created_at" : "2023-10-26T06:31:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28698#issuecomment-1780493567",
      "id" : 1780493567,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28698",
      "node_id" : "IC_kwDOABII585qICz_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1780493567/reactions"
      },
      "updated_at" : "2023-10-26T06:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1780493567",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
