[
   {
      "author_association" : "MEMBER",
      "body" : "Is `m_private_key` accessed by more than one thread? Which threads are running in the target? What happens if the target is run in tsan?",
      "created_at" : "2023-10-17T14:23:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/28665#issuecomment-1766525758",
      "id" : 1766525758,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28665",
      "node_id" : "IC_kwDOABII585pSws-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1766525758/reactions"
      },
      "updated_at" : "2023-10-17T14:23:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1766525758",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "As far as I can tell, the merging process was the only thing running that touched this data. Iâm not sure how I would be running the target in tsan.",
      "created_at" : "2023-10-17T14:51:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/28665#issuecomment-1766581313",
      "id" : 1766581313,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28665",
      "node_id" : "IC_kwDOABII585pS-RB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1766581313/reactions"
      },
      "updated_at" : "2023-10-17T14:51:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1766581313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Iâm not sure how I would be running the target in tsan.\r\n\r\nSee the `--with-sanitizers` configure option. Available sanitizers are listed [here](https://clang.llvm.org/docs/UsersManual.html#controlling-code-generation).\r\n\r\nSo if you are using `./configure --with-sanitizers=fuzzer` right now, you want to compile using `./configure --with-sanitizers=fuzzer,thread` for tsan.",
      "created_at" : "2023-10-17T15:07:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/28665#issuecomment-1766615411",
      "id" : 1766615411,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28665",
      "node_id" : "IC_kwDOABII585pTGlz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1766615411/reactions"
      },
      "updated_at" : "2023-10-17T15:09:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1766615411",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm also not able to reproduce. Running with tsan also doesn't yield anything so far (I'm not even sure there are any threads involved?).",
      "created_at" : "2023-10-17T15:10:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/28665#issuecomment-1766620163",
      "id" : 1766620163,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28665",
      "node_id" : "IC_kwDOABII585pTHwD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1766620163/reactions"
      },
      "updated_at" : "2023-10-17T15:10:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1766620163",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Jup, could be a single thread, and given that tsan doesn't complain, seems good to close this for now.",
      "created_at" : "2023-10-17T17:28:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/28665#issuecomment-1766861111",
      "id" : 1766861111,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28665",
      "node_id" : "IC_kwDOABII585pUCk3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1766861111/reactions"
      },
      "updated_at" : "2023-10-17T17:28:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1766861111",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Steps to reproduce:\r\n\r\n```\r\ncd qa-assets\r\ngit fetch origin 00c956e4a9c555da5640946ec28cdd5e501c0554\r\ngit checkout 00c956e4a9c555da5640946ec28cdd5e501c0554\r\n\r\nFUZZ=i2p ../bitcoin-core/src/test/fuzz/fuzz -runs=1 ./fuzz_seed_corpus/i2p/",
      "created_at" : "2023-10-19T11:00:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/28665#issuecomment-1770574906",
      "id" : 1770574906,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28665",
      "node_id" : "IC_kwDOABII585piNQ6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1770574906/reactions"
      },
      "updated_at" : "2023-10-19T11:00:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1770574906",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "cc @vasild ",
      "created_at" : "2023-10-19T11:00:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/28665#issuecomment-1770575430",
      "id" : 1770575430,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28665",
      "node_id" : "IC_kwDOABII585piNZG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1770575430/reactions"
      },
      "updated_at" : "2023-10-19T11:00:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1770575430",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "```\r\n549c82ad3a34a885ecca37a5f04c36dfbaa95d17 is the first bad commit\r\ncommit 549c82ad3a34a885ecca37a5f04c36dfbaa95d17\r\nAuthor: Vasil Dimov <vd@FreeBSD.org>\r\nDate:   Wed Apr 7 11:40:59 2021 +0200\r\n\r\n    fuzz: use ConsumeBool() instead of !ConsumeBool()\r\n    \r\n    The former is shorter and ends up with a \"random\" bool anyway.\r\n\r\n src/test/fuzz/util.cpp | 2 +-\r\n 1 file changed, 1 insertion(+), 1 deletion(-)\r\n",
      "created_at" : "2023-10-19T15:21:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/28665#issuecomment-1771209461",
      "id" : 1771209461,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28665",
      "node_id" : "IC_kwDOABII585pkoL1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1771209461/reactions"
      },
      "updated_at" : "2023-10-19T15:21:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1771209461",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tried a bisect, but I guess that didn't work, because the fuzz input format was changed at some point in 2021, so likely the fuzz inputs trigger something else when going back further than 549c82ad3a34a885ecca37a5f04c36dfbaa95d17",
      "created_at" : "2023-10-19T15:22:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/28665#issuecomment-1771211427",
      "id" : 1771211427,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28665",
      "node_id" : "IC_kwDOABII585pkoqj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1771211427/reactions"
      },
      "updated_at" : "2023-10-19T15:22:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1771211427",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This cannot be reproduced by running a single seed, only by a combination of two seeds from the qa-assets mentioned in https://github.com/bitcoin/bitcoin/issues/28665#issuecomment-1770574906:\r\n`FUZZ=i2p ./src/test/fuzz/fuzz -runs=1 ~/qa-assets/fuzz_seed_corpus/i2p/41717eadbc1239897d9a03b261a2590aff0474cf ~/qa-assets/fuzz_seed_corpus/i2p/56b13c4cfdbc0d48b8b03d0c5c235a499d1eca59`\r\n\r\nI think the problem is that one seed (`41717eadbc1239897d9a03b261a2590aff0474cf`) attempts to create a i2p privkey, which will be empty because i2p is not running within the fuzz environment (within normal usage of bitcoind, this should be impossible because init would abort).\r\nThis empty file is saved into the datadir, and then picked up by another seed (`56b13c4cfdbc0d48b8b03d0c5c235a499d1eca59`), leading to the error.\r\nSo I think that there are two things to fix:\r\n1. Have the fuzz test clean up after itself (removing any private key it may write into the data directory) so that fuzz seeds don't depend on each other\r\n2. Implement better checks in` i2p.cpp` to prevent parsing of empty private keys.\r\n",
      "created_at" : "2023-10-19T18:14:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/28665#issuecomment-1771486163",
      "id" : 1771486163,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28665",
      "node_id" : "IC_kwDOABII585plrvT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1771486163/reactions"
      },
      "updated_at" : "2023-10-19T18:23:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1771486163",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   }
]
