[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK. It would be good know more about specific use-cases for this, if you can provide some links or more description. But the implementation seems very simple, so I don't think adding this would be a maintenance burden.",
      "created_at" : "2022-03-11T21:24:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065541156",
      "id" : 1065541156,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII584_gt4k",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065541156/reactions"
      },
      "updated_at" : "2022-03-11T21:24:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065541156",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ ryan, I think the idea is that there is one coin that is owned by more than one entity. There may be several (conflicting) pre-signed txs spending it and as soon as it is spent, all entities with ownership in it want to check which pre-signed tx spent the coin.\r\nIf they use Bitcoin Core to monitor the coin, they may use:\r\n* A watch-only wallet (which requires a file on disk and BDB/Sqlite)\r\n* Walk the raw chain and raw mempool themselves (According to https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1059188351 this is doable for the chain, but may not be for the mempool)\r\n* Use an index. A blockfilterindex might speed up scanning the chain, whereas this index directly gives the answer.",
      "created_at" : "2022-03-12T08:01:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065836894",
      "id" : 1065836894,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII584_h2Fe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065836894/reactions"
      },
      "updated_at" : "2022-03-12T08:01:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065836894",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Lightning channels are basically trees of unpublished transactions:\r\n- a commit tx that spends a shared onchain \"funding\" UTXO\r\n- HTLC txs that spend the commit tx (there can be competing HTLC txs that spend the same commit tx output: one for successful payments, one for timed out payments)\r\n\r\nThere is also a penalty scheme built into these txs: if you cheat, you need to wait before you can spend your outputs but your channel peer can spend them immediately.\r\n\r\nAnd LN is also transitioning to a model where these txs pay minimum fees and can be \"bumped\" with RBF/CPFP.\r\n\r\n=> it's very useful for LN nodes to detect when transactions have been spent, but also how they've been spent and react accordingly (by extracting info from the spending txs for example), and walk up chains of txs that spend each other.\r\n\r\nAs described above, there are tools in bitcoin core that we could use and would help a bit, and Lightning nodes could also create their own indexes independently or use electrum servers, block explorers, but this would make running LN nodes connected to your own bitcoin node much easier.\r\n",
      "created_at" : "2022-03-12T11:46:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065868465",
      "id" : 1065868465,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII584_h9yx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065868465/reactions"
      },
      "updated_at" : "2022-03-12T11:46:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065868465",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nI think the use case is clear and if others think the maintenance burden is reasonable there doesn't seem to be an obvious downside.\r\n\r\n> This PR can be viewed as an \"extension\" to #24408\r\n\r\nSeems like review should be focused on #24408 first but assuming that gets merged, Concept ACK for this.",
      "created_at" : "2022-03-12T15:13:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065899900",
      "id" : 1065899900,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII584_iFd8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065899900/reactions"
      },
      "updated_at" : "2022-03-12T15:13:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065899900",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25487](https://github.com/bitcoin/bitcoin/pull/25487) ([kernel 3b/n] Decouple `{Dump,Load}Mempool` from `ArgsManager` by dongcarl)\n* [#24897](https://github.com/bitcoin/bitcoin/pull/24897) ([Draft / POC] Silent Payments by w0xlt)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-03-12T21:25:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065965240",
      "id" : 1065965240,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII584_iVa4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065965240/reactions"
      },
      "updated_at" : "2022-07-16T06:50:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065965240",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825489966"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825489966"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should use DEFAULT_TXOSPENDERINDEX",
      "commit_id" : "1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at" : "2022-03-13T18:58:24Z",
      "diff_hunk" : "@@ -857,6 +866,8 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n     if (args.GetIntArg(\"-prune\", 0)) {\n         if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX))\n             return InitError(_(\"Prune mode is incompatible with -txindex.\"));\n+        if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXINDEX))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825489966",
      "id" : 825489966,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584xM_ou",
      "original_commit_id" : "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "original_line" : 869,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 908174478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825489966/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-13T21:25:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825489966",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825490023"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825490023"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "DEFAULT_TXOSPENDERINDEX here as well",
      "commit_id" : "1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at" : "2022-03-13T18:59:04Z",
      "diff_hunk" : "@@ -1397,6 +1408,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n         LogPrintf(\"* Using %.1f MiB for transaction index database\\n\", cache_sizes.tx_index * (1.0 / 1024 / 1024));\n     }\n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXINDEX)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825490023",
      "id" : 825490023,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584xM_pn",
      "original_commit_id" : "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "original_line" : 1411,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 908174478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825490023/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-13T21:25:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825490023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825494247"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494247"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "spends",
      "commit_id" : "1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at" : "2022-03-13T19:38:19Z",
      "diff_hunk" : "@@ -268,6 +269,43 @@ static RPCHelpMan getrawtransaction()\n     };\n }\n \n+static RPCHelpMan gettxospender()\n+{\n+    return RPCHelpMan{\"gettxospender\",\n+                \"\\nReturns the id of the transaction that spend the provided outpoint.\\n\",\n+                {\n+                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The outpoint transaction id\"},\n+                    {\"index\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The outpoint output index\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::STR_HEX, \"\", \"The id of the transaction that spend the provided outpoint\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825494247",
      "id" : 825494247,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584xNArn",
      "original_commit_id" : "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "original_line" : 281,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 908174478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494247/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-13T21:25:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494247",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825494466"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494466"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "update comment",
      "commit_id" : "1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at" : "2022-03-13T19:39:48Z",
      "diff_hunk" : "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txindex database (indexes/txindex/) */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825494466",
      "id" : 825494466,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584xNAvC",
      "original_commit_id" : "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "original_line" : 12,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/index/txospenderindex.cpp",
      "position" : null,
      "pull_request_review_id" : 908174478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494466/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-13T21:25:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494466",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825494504"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494504"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "update comment",
      "commit_id" : "1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at" : "2022-03-13T19:40:00Z",
      "diff_hunk" : "@@ -0,0 +1,44 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+/**\n+ * TxIndex is used to look up transactions included in the blockchain by hash.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825494504",
      "id" : 825494504,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584xNAvo",
      "original_commit_id" : "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/index/txospenderindex.h",
      "position" : null,
      "pull_request_review_id" : 908174478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494504/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-13T21:25:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494504",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797435"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797435"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "commit_id" : "1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at" : "2022-03-14T10:28:47Z",
      "diff_hunk" : "@@ -857,6 +866,8 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n     if (args.GetIntArg(\"-prune\", 0)) {\n         if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX))\n             return InitError(_(\"Prune mode is incompatible with -txindex.\"));\n+        if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXINDEX))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797435",
      "id" : 825797435,
      "in_reply_to_id" : 825489966,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584xOKs7",
      "original_commit_id" : "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "original_line" : 869,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 908575857,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797435/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-14T10:28:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797435",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797563"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797563"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "commit_id" : "1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at" : "2022-03-14T10:28:57Z",
      "diff_hunk" : "@@ -1397,6 +1408,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n         LogPrintf(\"* Using %.1f MiB for transaction index database\\n\", cache_sizes.tx_index * (1.0 / 1024 / 1024));\n     }\n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXINDEX)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797563",
      "id" : 825797563,
      "in_reply_to_id" : 825490023,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584xOKu7",
      "original_commit_id" : "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "original_line" : 1411,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 908576025,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797563/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-14T10:28:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797563",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797688"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797688"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "commit_id" : "1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at" : "2022-03-14T10:29:06Z",
      "diff_hunk" : "@@ -268,6 +269,43 @@ static RPCHelpMan getrawtransaction()\n     };\n }\n \n+static RPCHelpMan gettxospender()\n+{\n+    return RPCHelpMan{\"gettxospender\",\n+                \"\\nReturns the id of the transaction that spend the provided outpoint.\\n\",\n+                {\n+                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The outpoint transaction id\"},\n+                    {\"index\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The outpoint output index\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::STR_HEX, \"\", \"The id of the transaction that spend the provided outpoint\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797688",
      "id" : 825797688,
      "in_reply_to_id" : 825494247,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584xOKw4",
      "original_commit_id" : "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "original_line" : 281,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 908576192,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797688/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-14T10:29:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797688",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797820"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797820"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "commit_id" : "1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at" : "2022-03-14T10:29:15Z",
      "diff_hunk" : "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txindex database (indexes/txindex/) */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797820",
      "id" : 825797820,
      "in_reply_to_id" : 825494466,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584xOKy8",
      "original_commit_id" : "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "original_line" : 12,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/index/txospenderindex.cpp",
      "position" : null,
      "pull_request_review_id" : 908576381,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797820/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-14T10:29:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797820",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797928"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797928"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "commit_id" : "1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at" : "2022-03-14T10:29:23Z",
      "diff_hunk" : "@@ -0,0 +1,44 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+/**\n+ * TxIndex is used to look up transactions included in the blockchain by hash.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797928",
      "id" : 825797928,
      "in_reply_to_id" : 825494504,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584xOK0o",
      "original_commit_id" : "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/index/txospenderindex.h",
      "position" : null,
      "pull_request_review_id" : 908576548,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797928/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-14T10:29:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797928",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : ">     * `getmempooltxspendingprevout` in #24408 takes a list of outpoints, `gettxospender` takes a single outpoint. Would it make sense to have the same format here (I'd guess a common use case would be to check both RPCs with the same outpoint(s)?)\r\n\r\nBitcoin supports batched RPC request so from a functional p.o.v it's equivalent to passing a list of outpoints but it's a bit easier to reason about imho. \r\nI think that the use case for  `getmempooltxspendingprevout` is a bit different: you want to bump fees for a set of txs that are related to the same channel and want to understand who is spending what. You may also have txs with multiple inputs, and would pass them all together to `getmempooltxspendingprevout`.\r\n\r\nFor `gettxospender` the use case is trying to understand why channels have been closed and react if needed, if we could pass in multiple outpoints they would likely be unrelated.\r\n \r\n>     * Taking this one step further, `getrawtransaction` queries transaction data from the mempool or from blocks (if txindex is enabled) in one RPC. Would it make sense to have something similar for outpoints, instead of two separate RPCs?\r\n\r\nMaybe, let's see where the discussion in https://github.com/bitcoin/bitcoin/pull/24408 but to me it feels cleaner to have separate calls.\r\n\r\n>     * I think that the indexed data will not be deleted in case of a reorg (but possibly overwritten if an outpoint would be spent in a different tx as a result of a reorg). That means that a result from `gettxospender` could be stale. Would it make sense to delete entries or should we at least mention this possibility in the rpc doc?\r\n> \r\n>     * What's the reason for the dependency on -txindex? As far as I can see it's not technical, so would knowing the fact that an outpoint was used in a tx (even if we can't lookup the details of that tx further) be sufficient for some use cases?\r\n\r\nWe would almost always want to get the actual tx that spends our outpoint. My reasoning was that relying on `-txindex` makes `gettxospender` robust and consistent in the case of reorgs and is also simpler and easier to understand that storing block positions instead of txids. ",
      "created_at" : "2022-03-14T10:47:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1066633467",
      "id" : 1066633467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII584_k4j7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066633467/reactions"
      },
      "updated_at" : "2022-03-14T10:47:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066633467",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\n This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-03-23T20:55:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1076811228",
      "id" : 1076811228,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII585ALtXc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1076811228/reactions"
      },
      "updated_at" : "2022-03-23T20:55:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1076811228",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, nice",
      "created_at" : "2022-04-01T18:41:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1086218571",
      "id" : 1086218571,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII585AvmFL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1086218571/reactions"
      },
      "updated_at" : "2022-04-01T18:41:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1086218571",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r856687862"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856687862"
         }
      },
      "author_association" : "MEMBER",
      "body" : "RPC tests shouldn't require wallet, please use `MiniWallet`",
      "commit_id" : "e021b6bc77315bc0c148b21c301882fa5dd68c05",
      "created_at" : "2022-04-23T00:40:54Z",
      "diff_hunk" : "@@ -0,0 +1,66 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the gettxospender RPC call.\n+\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+    find_vout_for_address,\n+)\n+\n+class GetTxoSpenderTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-txindex\", \"-txospenderindex\"],\n+            [\"-txindex\"],\n+        ]\n+        # whitelist all peers to speed up tx relay / mempool sync\n+        for args in self.extra_args:\n+            args.append(\"-whitelist=noban@127.0.0.1\")\n+\n+        self.supports_cli = False\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r856687862",
      "id" : 856687862,
      "line" : 31,
      "node_id" : "PRRC_kwDOABII584zEAT2",
      "original_commit_id" : "e021b6bc77315bc0c148b21c301882fa5dd68c05",
      "original_line" : 31,
      "original_position" : 31,
      "original_start_line" : 30,
      "path" : "test/functional/rpc_txospender.py",
      "position" : 31,
      "pull_request_review_id" : 950732877,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856687862/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 30,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-23T00:41:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856687862",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r857127463"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857127463"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I've translated the test to MiniWallet. If you take it, make sure to rebase on current master first, as it is using new MiniWallet functions.\r\n\r\nAlso, I am removing not needed stuff. Let me know if you have any questions. And no need to mention me in the commit as author.\r\n\r\n```diff\r\ndiff --git a/test/functional/rpc_txospender.py b/test/functional/rpc_txospender.py\r\nindex 1d7157e9bf..c063b4e502 100755\r\n--- a/test/functional/rpc_txospender.py\r\n+++ b/test/functional/rpc_txospender.py\r\n@@ -10,57 +10,36 @@ from test_framework.test_framework import BitcoinTestFramework\r\n from test_framework.util import (\r\n     assert_equal,\r\n     assert_raises_rpc_error,\r\n-    find_vout_for_address,\r\n )\r\n+from test_framework.wallet import MiniWallet\r\n+\r\n \r\n class GetTxoSpenderTest(BitcoinTestFramework):\r\n     def set_test_params(self):\r\n-        self.setup_clean_chain = True\r\n         self.num_nodes = 2\r\n         self.extra_args = [\r\n             [\"-txindex\", \"-txospenderindex\"],\r\n             [\"-txindex\"],\r\n         ]\r\n-        # whitelist all peers to speed up tx relay / mempool sync\r\n-        for args in self.extra_args:\r\n-            args.append(\"-whitelist=noban@127.0.0.1\")\r\n-\r\n         self.supports_cli = False\r\n \r\n-    def skip_test_if_missing_module(self):\r\n-        self.skip_if_no_wallet()\r\n-\r\n-    def setup_network(self):\r\n-        super().setup_network()\r\n-        self.connect_nodes(0, 1)\r\n-\r\n     def run_test(self):\r\n-        self.log.info(\"Prepare some coins for multiple *rawtransaction commands\")\r\n-        self.generate(self.nodes[1], 1)\r\n-        self.generate(self.nodes[0], COINBASE_MATURITY + 1)\r\n-        self.sync_all()\r\n-        self.generate(self.nodes[0], 5)\r\n+        self.wallet = MiniWallet(self.nodes[1])\r\n+        self.wallet.rescan_utxos()\r\n \r\n         self.gettxospender_tests()\r\n \r\n     def gettxospender_tests(self):\r\n-        addr = self.nodes[1].getnewaddress()\r\n-        txid = self.nodes[0].sendtoaddress(addr, 10)\r\n-        self.generate(self.nodes[0], 1)\r\n-        vout = find_vout_for_address(self.nodes[1], txid, addr)\r\n-        rawTx = self.nodes[1].createrawtransaction([{'txid': txid, 'vout': vout}], {self.nodes[1].getnewaddress(): 9.999})\r\n-        rawTxSigned = self.nodes[1].signrawtransactionwithwallet(rawTx)\r\n-        txId = self.nodes[1].sendrawtransaction(rawTxSigned['hex'])\r\n-        self.generateblock(self.nodes[0], output=self.nodes[0].getnewaddress(), transactions=[rawTxSigned['hex']])\r\n+        partially_spent_tx = self.wallet.send_self_transfer_multi(from_node=self.nodes[1], num_outputs=2)\r\n+        num_out = 1\r\n+        spending_txid = self.wallet.send_self_transfer(from_node=self.nodes[1], utxo_to_spend=partially_spent_tx[\"new_utxos\"][num_out])[\"txid\"]\r\n+        self.generate(self.wallet, 1)\r\n \r\n-        for n in [0, 1]:\r\n-            self.log.info(f\"Test gettxospender {'with' if n == 0 else 'without'} -txospenderindex\")\r\n+        self.log.info(f\"Test gettxospender with -txospenderindex\")\r\n+        assert_equal(self.nodes[0].gettxospender(partially_spent_tx[\"txid\"], num_out), spending_txid)\r\n+        self.log.info(f\"Test gettxospender without -txospenderindex\")\r\n+        assert_raises_rpc_error(-8, \"This RPC call requires -txospenderindex to be enabled.\", self.nodes[1].gettxospender, partially_spent_tx[\"txid\"], num_out)\r\n \r\n-            if n == 0:\r\n-                assert_equal(self.nodes[n].gettxospender(txid, vout), txId)\r\n-            else:\r\n-                # Without -txospenderindex, expect to raise.\r\n-                assert_raises_rpc_error(-8, \"This RPC call requires -txospenderindex to be enabled.\", self.nodes[n].gettxospender, txid, vout)\r\n \r\n-if __name__ == '__main__':\r\n+if __name__ == \"__main__\":\r\n     GetTxoSpenderTest().main()\r\n",
      "commit_id" : "e021b6bc77315bc0c148b21c301882fa5dd68c05",
      "created_at" : "2022-04-24T13:34:15Z",
      "diff_hunk" : "@@ -0,0 +1,66 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the gettxospender RPC call.\n+\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+    find_vout_for_address,\n+)\n+\n+class GetTxoSpenderTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-txindex\", \"-txospenderindex\"],\n+            [\"-txindex\"],\n+        ]\n+        # whitelist all peers to speed up tx relay / mempool sync\n+        for args in self.extra_args:\n+            args.append(\"-whitelist=noban@127.0.0.1\")\n+\n+        self.supports_cli = False\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r857127463",
      "id" : 857127463,
      "in_reply_to_id" : 856687862,
      "line" : 31,
      "node_id" : "PRRC_kwDOABII584zFron",
      "original_commit_id" : "e021b6bc77315bc0c148b21c301882fa5dd68c05",
      "original_line" : 31,
      "original_position" : 31,
      "original_start_line" : 30,
      "path" : "test/functional/rpc_txospender.py",
      "position" : 31,
      "pull_request_review_id" : 951206356,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857127463/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 30,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-24T13:34:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857127463",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased on https://github.com/bitcoin/bitcoin/pull/24408",
      "created_at" : "2022-04-25T17:14:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1108832699",
      "id" : 1108832699,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII585CF3G7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108832699/reactions"
      },
      "updated_at" : "2022-04-25T17:14:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108832699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r857855347"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857855347"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks! I've rebased on https://github.com/bitcoin/bitcoin/pull/24408 and used your code to extend its RPC test",
      "commit_id" : "a6cb2c661cfe8208acbe50f75b67f3612b7af396",
      "created_at" : "2022-04-25T17:16:43Z",
      "diff_hunk" : "@@ -0,0 +1,66 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the gettxospender RPC call.\n+\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+    find_vout_for_address,\n+)\n+\n+class GetTxoSpenderTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-txindex\", \"-txospenderindex\"],\n+            [\"-txindex\"],\n+        ]\n+        # whitelist all peers to speed up tx relay / mempool sync\n+        for args in self.extra_args:\n+            args.append(\"-whitelist=noban@127.0.0.1\")\n+\n+        self.supports_cli = False\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r857855347",
      "id" : 857855347,
      "in_reply_to_id" : 856687862,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zIdVz",
      "original_commit_id" : "e021b6bc77315bc0c148b21c301882fa5dd68c05",
      "original_line" : 31,
      "original_position" : 31,
      "original_start_line" : 30,
      "path" : "test/functional/rpc_txospender.py",
      "position" : null,
      "pull_request_review_id" : 952206496,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857855347/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-25T17:16:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857855347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\n This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-04-26T20:48:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1110235196",
      "id" : 1110235196,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII585CLNg8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110235196/reactions"
      },
      "updated_at" : "2022-04-26T20:48:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110235196",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Looks like the test somehow went away? If #https://github.com/bitcoin/bitcoin/pull/24408 is merged soon, you can fix everything on the next rebase.",
      "created_at" : "2022-04-27T12:37:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1110949442",
      "id" : 1110949442,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII585CN75C",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110949442/reactions"
      },
      "updated_at" : "2022-04-27T12:37:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110949442",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Looks like the test somehow went away? If ##24408 is merged soon, you can fix everything on the next rebase.\r\n\r\nYes sorry about that, I've brought it back. I will also add another commit to move `gettxspendingprevout` out of `rpc/mempool.cpp`.",
      "created_at" : "2022-04-27T15:23:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1111137054",
      "id" : 1111137054,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII585COpse",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111137054/reactions"
      },
      "updated_at" : "2022-04-27T15:23:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111137054",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "As with #24408, unless there's a need for looking up an unpredictable outpoint after its spend is mined (why?), I think a watch-only wallet is the correct approach for this use case, and expecting users to build infinitely-growing indexes isn't a good solution.",
      "created_at" : "2022-04-29T20:52:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1113716662",
      "id" : 1113716662,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII585CYfe2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113716662/reactions"
      },
      "updated_at" : "2022-04-29T20:52:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113716662",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862144297"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862144297"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Missing copyright/license header",
      "commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "created_at" : "2022-04-29T20:54:08Z",
      "diff_hunk" : "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862144297",
      "id" : 862144297,
      "line" : 1,
      "node_id" : "PRRC_kwDOABII584zY0cp",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 1,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/index/txospenderindex.cpp",
      "position" : 1,
      "pull_request_review_id" : 958241302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862144297/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T22:47:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862144297",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862146611"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862146611"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe(?) should SoftSetArg in param interaction",
      "commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "created_at" : "2022-04-29T20:56:36Z",
      "diff_hunk" : "@@ -1574,6 +1588,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX)) {\n+        if (!args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n+            return InitError(_(\"-txospenderindex requires -txindex.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862146611",
      "id" : 862146611,
      "line" : 1593,
      "node_id" : "PRRC_kwDOABII584zY1Az",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 1593,
      "original_position" : 62,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 62,
      "pull_request_review_id" : 958241302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862146611/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T22:47:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862146611",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862149848"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862149848"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Suggest moving this below where it's actually needed/used.\r\n\r\nNote this is non-trivial: we shouldn't re-\"block\" for each outpoint, and lock order might matter.",
      "commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "created_at" : "2022-04-29T21:01:26Z",
      "diff_hunk" : "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862149848",
      "id" : 862149848,
      "line" : 651,
      "node_id" : "PRRC_kwDOABII584zY1zY",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 651,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 72,
      "pull_request_review_id" : 958241302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862149848/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T22:47:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862149848",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862150115"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862150115"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Block indented 1 space too many",
      "commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "created_at" : "2022-04-29T21:01:51Z",
      "diff_hunk" : "@@ -0,0 +1,121 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+         self.num_nodes = 3\n+         self.extra_args = [\n+             [\"-txindex\", \"-txospenderindex\"],\n+             [\"-txindex\", \"-txospenderindex\"],\n+             [\"-txindex\"],\n+         ]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862150115",
      "id" : 862150115,
      "line" : 23,
      "node_id" : "PRRC_kwDOABII584zY13j",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 23,
      "original_position" : 23,
      "original_start_line" : 18,
      "path" : "test/functional/rpc_mempool_info.py",
      "position" : 23,
      "pull_request_review_id" : 958241302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862150115/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 18,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-29T22:47:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862150115",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862152877"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862152877"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Wrong year range",
      "commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "created_at" : "2022-04-29T21:05:34Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862152877",
      "id" : 862152877,
      "line" : 1,
      "node_id" : "PRRC_kwDOABII584zY2it",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 1,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/index/txospenderindex.h",
      "position" : 1,
      "pull_request_review_id" : 958241302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862152877/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T22:47:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862152877",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862156731"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862156731"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Space at the end instead of punctuation",
      "commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "created_at" : "2022-04-29T21:13:19Z",
      "diff_hunk" : "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862156731",
      "id" : 862156731,
      "line" : 672,
      "node_id" : "PRRC_kwDOABII584zY3e7",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 672,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 93,
      "pull_request_review_id" : 958241302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862156731/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T22:47:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862156731",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862157126"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862157126"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Doesn't say *which* output triggers it, and blocks partial results.\r\n\r\nSuggest something like a \"warnings\" key on the output result.",
      "commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "created_at" : "2022-04-29T21:14:09Z",
      "diff_hunk" : "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862157126",
      "id" : 862157126,
      "line" : 672,
      "node_id" : "PRRC_kwDOABII584zY3lG",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 672,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 93,
      "pull_request_review_id" : 958241302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862157126/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T22:47:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862157126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862187808"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862187808"
         }
      },
      "author_association" : "MEMBER",
      "body" : "RPC_INVALID_ADDRESS_OR_KEY seems like the wrong code to use",
      "commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "created_at" : "2022-04-29T21:46:18Z",
      "diff_hunk" : "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862187808",
      "id" : 862187808,
      "line" : 672,
      "node_id" : "PRRC_kwDOABII584zY_Eg",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 672,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 93,
      "pull_request_review_id" : 958241302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862187808/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T22:47:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862187808",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862487923"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862487923"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Perhaps a new field could be added to the response indicating whether the transaction is in the mempool or not?\r\nSomething like:\r\n```c++\r\no.pushKV(\"in_mempool\", true); // or false\r\n```",
      "commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "created_at" : "2022-05-01T15:15:10Z",
      "diff_hunk" : "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862487923",
      "id" : 862487923,
      "line" : 667,
      "node_id" : "PRRC_kwDOABII584zaIVz",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 667,
      "original_position" : 88,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 88,
      "pull_request_review_id" : 958601762,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862487923/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-01T15:16:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862487923",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862938062"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862938062"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Is there any reason to use `std::make_pair(DB_TXOSPENDERINDEX, tuple.first)`  as the key instead of just  `tuple.first` ?\r\n\r\n`DB_TXOSPENDERINDEX` seems redundant.",
      "commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "created_at" : "2022-05-02T15:18:20Z",
      "diff_hunk" : "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862938062",
      "id" : 862938062,
      "line" : 35,
      "node_id" : "PRRC_kwDOABII584zb2PO",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 35,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/index/txospenderindex.cpp",
      "position" : 35,
      "pull_request_review_id" : 959202584,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862938062/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-02T15:18:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862938062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r863085647"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863085647"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This message needs to be changed, as the transaction may not be in the mempool, but in the blocks.\r\nThis field is no longer optional in this PR.\r\n\r\n```suggestion\r\n                    {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the id of the transaction that spends the output\"},\r\n```",
      "commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "created_at" : "2022-05-02T18:34:59Z",
      "diff_hunk" : "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r863085647",
      "id" : 863085647,
      "line" : 614,
      "node_id" : "PRRC_kwDOABII584zcaRP",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 614,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 35,
      "pull_request_review_id" : 959413555,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863085647/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-02T18:49:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863085647",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sstone I created a branch that modifies this PR to include the `in_mempool` and `block_height` of the transaction that spends the output.\r\nThe result is like this:\r\n\r\n```\r\n[\r\n  {\r\n    \"txid\": \"c8de5b22e7dac049cd6a2628580876d74c16a58a886be2b4b1c744901f8e953e\",\r\n    \"vout\": 0,\r\n    \"spendingtxid\": \"117dd0df58201d4ac6c49472dc59208487caa7d79079a4bb32d85c16f4174e72\",\r\n    \"in_mempool\": false,\r\n    \"block_height\": 88551\r\n  }\r\n]\r\n```\r\n\r\nIf you agree with this approach, feel free to use the code of that branch.\r\nhttps://github.com/w0xlt/bitcoin/tree/add_txospender_index_2",
      "created_at" : "2022-05-02T18:42:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1115235423",
      "id" : 1115235423,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII585CeSRf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1115235423/reactions"
      },
      "updated_at" : "2022-05-02T18:42:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1115235423",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864062496"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864062496"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks! I've applied your patch and updated python tests",
      "commit_id" : "94e82f5750c7b29719a6f2cbb2fe257a4d284c5f",
      "created_at" : "2022-05-03T18:14:52Z",
      "diff_hunk" : "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864062496",
      "id" : 864062496,
      "in_reply_to_id" : 862144297,
      "line" : 5,
      "node_id" : "PRRC_kwDOABII584zgIwg",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 1,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/index/txospenderindex.cpp",
      "position" : 5,
      "pull_request_review_id" : 960797515,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864062496/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-03T18:14:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864062496",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864075572"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864075572"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "That what I tried at first but could not get it to work without triggering a deadlock:\r\n```\r\nPOTENTIAL DEADLOCK DETECTED\r\nPrevious lock order was:\r\n(2) 'cs_main' in node/chainstate.cpp:30 (in thread 'qt-init')\r\n(1) 'cs' in txmempool.cpp:709 (in thread 'qt-init')\r\nCurrent lock order is:\r\n(1) 'mempool.cs' in rpc/mempool.cpp:676 (in thread 'qt-rpcconsole')\r\n(2) 'cs_main' in index/base.cpp:331 (in thread 'qt-rpcconsole')\r\n```",
      "commit_id" : "94e82f5750c7b29719a6f2cbb2fe257a4d284c5f",
      "created_at" : "2022-05-03T18:32:54Z",
      "diff_hunk" : "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864075572",
      "id" : 864075572,
      "in_reply_to_id" : 862149848,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zgL80",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 651,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 960826186,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864075572/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-03T18:32:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864075572",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076176"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076176"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "commit_id" : "94e82f5750c7b29719a6f2cbb2fe257a4d284c5f",
      "created_at" : "2022-05-03T18:33:46Z",
      "diff_hunk" : "@@ -0,0 +1,121 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+         self.num_nodes = 3\n+         self.extra_args = [\n+             [\"-txindex\", \"-txospenderindex\"],\n+             [\"-txindex\", \"-txospenderindex\"],\n+             [\"-txindex\"],\n+         ]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076176",
      "id" : 864076176,
      "in_reply_to_id" : 862150115,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zgMGQ",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 23,
      "original_position" : 23,
      "original_start_line" : 18,
      "path" : "test/functional/rpc_mempool_info.py",
      "position" : null,
      "pull_request_review_id" : 960829245,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076176/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-03T18:33:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076237"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076237"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "commit_id" : "94e82f5750c7b29719a6f2cbb2fe257a4d284c5f",
      "created_at" : "2022-05-03T18:33:53Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076237",
      "id" : 864076237,
      "in_reply_to_id" : 862152877,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zgMHN",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 1,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/index/txospenderindex.h",
      "position" : null,
      "pull_request_review_id" : 960829715,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076237/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-03T18:33:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076237",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076338"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076338"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "commit_id" : "94e82f5750c7b29719a6f2cbb2fe257a4d284c5f",
      "created_at" : "2022-05-03T18:34:01Z",
      "diff_hunk" : "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076338",
      "id" : 864076338,
      "in_reply_to_id" : 862156731,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zgMIy",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 672,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 960830357,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076338/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-03T18:34:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076338",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076573"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076573"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "commit_id" : "94e82f5750c7b29719a6f2cbb2fe257a4d284c5f",
      "created_at" : "2022-05-03T18:34:14Z",
      "diff_hunk" : "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076573",
      "id" : 864076573,
      "in_reply_to_id" : 862157126,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zgMMd",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 672,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 960831256,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076573/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-03T18:34:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076573",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076726"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076726"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "commit_id" : "94e82f5750c7b29719a6f2cbb2fe257a4d284c5f",
      "created_at" : "2022-05-03T18:34:22Z",
      "diff_hunk" : "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076726",
      "id" : 864076726,
      "in_reply_to_id" : 862187808,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zgMO2",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 672,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 960831665,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076726/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-03T18:34:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076726",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864078378"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864078378"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm not sure it is needed: caller will receive a list of tx ids and will call `getrawtransaction` which will include number of confirmations etc....",
      "commit_id" : "94e82f5750c7b29719a6f2cbb2fe257a4d284c5f",
      "created_at" : "2022-05-03T18:35:53Z",
      "diff_hunk" : "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864078378",
      "id" : 864078378,
      "in_reply_to_id" : 862487923,
      "line" : 694,
      "node_id" : "PRRC_kwDOABII584zgMoq",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 667,
      "original_position" : 88,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 115,
      "pull_request_review_id" : 960835258,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864078378/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-03T18:35:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864078378",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864081172"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864081172"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is how all other indexes work even when there is just one possible key. Maybe because it makes it easier to add new record type later with a new key prefix ?",
      "commit_id" : "94e82f5750c7b29719a6f2cbb2fe257a4d284c5f",
      "created_at" : "2022-05-03T18:37:45Z",
      "diff_hunk" : "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864081172",
      "id" : 864081172,
      "in_reply_to_id" : 862938062,
      "line" : 39,
      "node_id" : "PRRC_kwDOABII584zgNUU",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 35,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/index/txospenderindex.cpp",
      "position" : 39,
      "pull_request_review_id" : 960838860,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864081172/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-03T18:37:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864081172",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864083637"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864083637"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done in https://github.com/bitcoin/bitcoin/commit/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "commit_id" : "94e82f5750c7b29719a6f2cbb2fe257a4d284c5f",
      "created_at" : "2022-05-03T18:39:10Z",
      "diff_hunk" : "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864083637",
      "id" : 864083637,
      "in_reply_to_id" : 863085647,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zgN61",
      "original_commit_id" : "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "original_line" : 614,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 960840371,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864083637/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-03T18:39:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864083637",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "There is no need for a new commit to address review comments.\r\nThe last commit can be squashed.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits",
      "created_at" : "2022-05-03T19:00:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1116455957",
      "id" : 1116455957,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII585Ci8QV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1116455957/reactions"
      },
      "updated_at" : "2022-05-03T19:00:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1116455957",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The `static RPCHelpMan getindexinfo()` RPC should also be updated.\r\n\r\n```diff\r\nstatic RPCHelpMan getindexinfo()\r\n{\r\n    // ...\r\n    if (g_txindex) {\r\n        result.pushKVs(SummaryToJSON(g_txindex->GetSummary(), index_name));\r\n    }\r\n\r\n    if (g_coin_stats_index) {\r\n        result.pushKVs(SummaryToJSON(g_coin_stats_index->GetSummary(), index_name));\r\n    }\r\n\r\n+    if (g_txospenderindex) {\r\n+        result.pushKVs(SummaryToJSON(g_txospenderindex->GetSummary(), index_name));\r\n+    }\r\n\r\n    ForEachBlockFilterIndex([&result, &index_name](const BlockFilterIndex& index) {\r\n        result.pushKVs(SummaryToJSON(index.GetSummary(), index_name));\r\n    });\r\n    // ...\r\n}\r\n```\r\n\r\n",
      "created_at" : "2022-05-04T21:18:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1117947117",
      "id" : 1117947117,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII585CooTt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1117947117/reactions"
      },
      "updated_at" : "2022-05-04T21:18:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1117947117",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> The `static RPCHelpMan getindexinfo()` RPC should also be updated.\r\n> \r\n> ```diff\r\n> static RPCHelpMan getindexinfo()\r\n> {\r\n>     // ...\r\n>     if (g_txindex) {\r\n>         result.pushKVs(SummaryToJSON(g_txindex->GetSummary(), index_name));\r\n>     }\r\n> \r\n>     if (g_coin_stats_index) {\r\n>         result.pushKVs(SummaryToJSON(g_coin_stats_index->GetSummary(), index_name));\r\n>     }\r\n> \r\n> +    if (g_txospenderindex) {\r\n> +        result.pushKVs(SummaryToJSON(g_txospenderindex->GetSummary(), index_name));\r\n> +    }\r\n> \r\n>     ForEachBlockFilterIndex([&result, &index_name](const BlockFilterIndex& index) {\r\n>         result.pushKVs(SummaryToJSON(index.GetSummary(), index_name));\r\n>     });\r\n>     // ...\r\n> }\r\n> ```\r\n\r\nThanks! done in https://github.com/bitcoin/bitcoin/pull/24539/commits/d9d96f8b5dab7a617efb95c7a4c53114a7815abe",
      "created_at" : "2022-05-05T20:21:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1119010703",
      "id" : 1119010703,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII585Csr-P",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1119010703/reactions"
      },
      "updated_at" : "2022-05-05T20:21:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1119010703",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1573866?v=4",
         "events_url" : "https://api.github.com/users/sstone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sstone/followers",
         "following_url" : "https://api.github.com/users/sstone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sstone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sstone",
         "id" : 1573866,
         "login" : "sstone",
         "node_id" : "MDQ6VXNlcjE1NzM4NjY=",
         "organizations_url" : "https://api.github.com/users/sstone/orgs",
         "received_events_url" : "https://api.github.com/users/sstone/received_events",
         "repos_url" : "https://api.github.com/users/sstone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sstone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sstone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sstone"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\n This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-07-18T15:53:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1187671199",
      "id" : 1187671199,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
      "node_id" : "IC_kwDOABII585Gymyf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1187671199/reactions"
      },
      "updated_at" : "2022-07-18T15:53:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1187671199",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
