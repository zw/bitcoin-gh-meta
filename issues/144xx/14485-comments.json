[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, would be good to hear from @eklitzke why the original was closed though",
      "created_at" : "2018-10-15T12:33:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-429835730",
      "id" : 429835730,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTgzNTczMA==",
      "updated_at" : "2018-10-15T12:33:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429835730",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r226248490"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226248490"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"discard\" sounds to me as if writes to the file will be discarded, too\r\nmaybe `CloseAndUncache`?",
      "commit_id" : "b2c2917889e8dfc4d5e0b14b7278e79bee39874e",
      "created_at" : "2018-10-18T10:15:23Z",
      "diff_hunk" : "@@ -79,6 +79,15 @@ bool RenameOver(fs::path src, fs::path dest);\n bool LockDirectory(const fs::path& directory, const std::string lockfile_name, bool probe_only=false);\n bool DirIsWritable(const fs::path& directory);\n \n+//! Return the original FILE* unchanged. On POSIX systems that support it,\n+//! also advise the kernel that the file will be accessed sequentially.\n+FILE* AdviseSequential(FILE *file);\n+\n+//! Close a file and return the result of fclose(). On POSIX systems that\n+//! support it, advise the kernel to remove the file contents from the page\n+//! cache (which can help on memory-constrained systems).\n+int CloseAndDiscard(FILE *file);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r226248490",
      "id" : 226248490,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNjI0ODQ5MA==",
      "original_commit_id" : "5ff402f58a38827276c14889d68c81754707fc88",
      "original_position" : 11,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 166021412,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485",
      "updated_at" : "2019-10-13T17:17:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226248490",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK though I'd really like to see benchmarks for changes like this, to know if this has any impact in practice worth making the risk/complication of the change.",
      "created_at" : "2018-10-18T10:16:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-430954777",
      "id" : 430954777,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMDk1NDc3Nw==",
      "updated_at" : "2018-10-18T10:16:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/430954777",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Probably worthing having -- rough concept ACK -- however:\r\n\r\n* The double-lseek will be slower than fstat() on some networked or detachable filesystems.\r\n\r\n* If close-and-uncache is used on just-written-to files, this action is a no-op unless a sync (fdatasync etc.) preceded it.\r\n\r\n* Definitely worth benchmarking on multiple filesystems to see the positive or negative value of this change.",
      "created_at" : "2018-10-18T13:37:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-431011401",
      "id" : 431011401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMTAxMTQwMQ==",
      "updated_at" : "2018-10-18T13:37:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/431011401",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/494411?v=4",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "node_id" : "MDQ6VXNlcjQ5NDQxMQ==",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2018-10-23T22:17:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-432442148",
      "id" : 432442148,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMjQ0MjE0OA==",
      "updated_at" : "2018-11-02T14:57:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/432442148",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2018-11-05T11:16:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-435839510",
      "id" : 435839510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNTgzOTUxMA==",
      "updated_at" : "2018-11-05T11:16:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/435839510",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased and addressed @laanwj's function rename request.",
      "created_at" : "2019-02-11T15:33:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-462371380",
      "id" : 462371380,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MjM3MTM4MA==",
      "updated_at" : "2019-02-11T15:33:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/462371380",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r256344052"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/256344052"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Move `close:` inside `#if â¦ #endif`?",
      "commit_id" : "b2c2917889e8dfc4d5e0b14b7278e79bee39874e",
      "created_at" : "2019-02-13T10:57:47Z",
      "diff_hunk" : "@@ -1118,6 +1109,49 @@ void AllocateFileRange(FILE *file, unsigned int offset, unsigned int length) {\n #endif\n }\n \n+FILE* AdviseSequential(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Since this whole thing is advisory anyway, we can ignore any errors\n+    // encountered up to and including the posix_fadvise call. However, we must\n+    // rewind the file to the appropriate position if we've changed the seek\n+    // offset.\n+    if (file == nullptr)\n+        return nullptr;\n+    int fd = fileno(file);\n+    if (fd == -1)\n+        return file;\n+    off_t start = lseek(fd, 0, SEEK_CUR);\n+    if (start == -1)\n+        return file;\n+    off_t end = lseek(fd, 0, SEEK_END);\n+    if (end != -1) {\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_WILLNEED);\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_SEQUENTIAL);\n+    }\n+    lseek(fd, start, SEEK_SET);\n+#endif\n+    return file;\n+}\n+\n+int CloseAndUncache(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Ignore any errors up to and including the posix_fadvise call since it's\n+    // advisory.\n+    if (file != nullptr) {\n+        off_t end;\n+        int fd = fileno(file);\n+        if (fd == -1)\n+            goto close;\n+        end = lseek(fd, 0, SEEK_END);\n+        if (end == -1)\n+            goto close;\n+        posix_fadvise(fd, 0, end, POSIX_FADV_DONTNEED);\n+    }\n+#endif\n+ close:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r256344052",
      "id" : 256344052,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1NjM0NDA1Mg==",
      "original_commit_id" : "f2041fe9f5911fec898d96c7b73188148886220f",
      "original_position" : 72,
      "path" : "src/util/system.cpp",
      "position" : null,
      "pull_request_review_id" : 203145578,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485",
      "updated_at" : "2019-10-13T17:17:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/256344052",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2019-03-23T07:11:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-475846565",
      "id" : 475846565,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3NTg0NjU2NQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/475846565/reactions"
      },
      "updated_at" : "2022-10-24T19:23:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/475846565",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-05-02T13:44:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-488678999",
      "id" : 488678999,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4ODY3ODk5OQ==",
      "updated_at" : "2019-05-02T13:44:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/488678999",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--5fd3d806e98f4a0ca80977bb178665a0-->There hasn't been much activity lately and the patch still needs rebase, so I am closing this for now. Please let me know when you want to continue working on this, so the pull request can be re-opened.",
      "created_at" : "2019-09-30T12:54:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-536547749",
      "id" : 536547749,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjU0Nzc0OQ==",
      "updated_at" : "2019-09-30T12:54:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536547749",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r334286955"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334286955"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Replaced goto with nested ifs.",
      "commit_id" : "b2c2917889e8dfc4d5e0b14b7278e79bee39874e",
      "created_at" : "2019-10-13T17:17:15Z",
      "diff_hunk" : "@@ -1118,6 +1109,49 @@ void AllocateFileRange(FILE *file, unsigned int offset, unsigned int length) {\n #endif\n }\n \n+FILE* AdviseSequential(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Since this whole thing is advisory anyway, we can ignore any errors\n+    // encountered up to and including the posix_fadvise call. However, we must\n+    // rewind the file to the appropriate position if we've changed the seek\n+    // offset.\n+    if (file == nullptr)\n+        return nullptr;\n+    int fd = fileno(file);\n+    if (fd == -1)\n+        return file;\n+    off_t start = lseek(fd, 0, SEEK_CUR);\n+    if (start == -1)\n+        return file;\n+    off_t end = lseek(fd, 0, SEEK_END);\n+    if (end != -1) {\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_WILLNEED);\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_SEQUENTIAL);\n+    }\n+    lseek(fd, start, SEEK_SET);\n+#endif\n+    return file;\n+}\n+\n+int CloseAndUncache(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Ignore any errors up to and including the posix_fadvise call since it's\n+    // advisory.\n+    if (file != nullptr) {\n+        off_t end;\n+        int fd = fileno(file);\n+        if (fd == -1)\n+            goto close;\n+        end = lseek(fd, 0, SEEK_END);\n+        if (end == -1)\n+            goto close;\n+        posix_fadvise(fd, 0, end, POSIX_FADV_DONTNEED);\n+    }\n+#endif\n+ close:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r334286955",
      "id" : 334286955,
      "in_reply_to_id" : 256344052,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNDI4Njk1NQ==",
      "original_commit_id" : "f2041fe9f5911fec898d96c7b73188148886220f",
      "original_position" : 72,
      "path" : "src/util/system.cpp",
      "position" : null,
      "pull_request_review_id" : 301057363,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485",
      "updated_at" : "2019-10-13T17:17:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334286955",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased",
      "created_at" : "2019-10-13T22:24:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-541465570",
      "id" : 541465570,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MTQ2NTU3MA==",
      "updated_at" : "2019-10-13T22:24:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/541465570",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-04-23T02:48:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-618145101",
      "id" : 618145101,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxODE0NTEwMQ==",
      "updated_at" : "2020-04-23T02:48:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/618145101",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased & comments addressed",
      "created_at" : "2020-05-07T21:09:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-625498985",
      "id" : 625498985,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNTQ5ODk4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-05-07T21:09:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/625498985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-02-01T15:17:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-770931891",
      "id" : 770931891,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3MDkzMTg5MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-01T15:17:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/770931891",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Adding to the three previous requests for benchmarks:\r\n\r\nDo we have any benchmarks showing the practical gains in swiftness? :)",
      "created_at" : "2021-02-01T15:22:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-770935958",
      "id" : 770935958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3MDkzNTk1OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-01T15:22:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/770935958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--13523179cfe9479db18ec6c5d236f789-->There hasn't been much activity lately and the patch still needs rebase. What is the status here?\n\n* Is it still relevant? â¡ï¸ Please solve the conflicts to make it ready for review and to ensure the CI passes.\n* Is it no longer relevant? â¡ï¸ Please close.\n* Did the author lose interest or time to work on this? â¡ï¸ Please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\n",
      "created_at" : "2021-12-15T11:22:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-994695753",
      "id" : 994695753,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "IC_kwDOABII5847SdpJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/994695753/reactions"
      },
      "updated_at" : "2021-12-15T11:22:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/994695753",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-02-21T08:23:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-1046590867",
      "id" : 1046590867,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "IC_kwDOABII584-YbWT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046590867/reactions"
      },
      "updated_at" : "2022-02-21T08:23:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046590867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This change seems to slow down IBD.\r\nI benchmarked by syncing a fresh node both on master and this PR (rebased on master) until block height=495000 with `-prune=550` and `-connect=localhost` (syncing from existing local full node).\r\nMaster took 5h27mins and this PR took 5h40mins.",
      "created_at" : "2022-11-04T18:33:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-1303985283",
      "id" : 1303985283,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "IC_kwDOABII585NuTyD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1303985283/reactions"
      },
      "updated_at" : "2022-11-05T10:19:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1303985283",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This is about 4% difference. Could it be within noise/variance? I mean if you run 3 times `master` and it takes e.g. 5h27min, 5h03min, 5h42min then you know the result from the PR is within noise. I think that if this makes some impact (positive or negative) it should be observable on smaller tests too, e.g. something that runs 5 or 10 minutes. Then you can repeat a few times and see how much is the variance for both `master` and the PR.\r\n\r\nIs such a workload disk bound? If it is, then does the full node (the source of the sync) compete for disk resources too (that would slow down the syncing node and bring noise)? Was the full node also running the PR?",
      "created_at" : "2022-11-07T10:04:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-1305371161",
      "id" : 1305371161,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "IC_kwDOABII585NzmIZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1305371161/reactions"
      },
      "updated_at" : "2022-11-07T10:04:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1305371161",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild you're right, sorry about my last benchmark. I didn't lock the CPU frequency which probably caused a lot of noise.\r\n\r\nI re-ran some benchmarks with CPU frequency locked. I rebased the PR locally on master.\r\nThe local node used to sync the benchmarked nodes runs on this PR.\r\n\r\n<details>\r\n<summary>PR: -prune=10000 -stopatheight=100000</summary>\r\n\r\n```\r\nCommand being timed: \"./src/bitcoind -datadir=/tmp/btc -prune=10000 -stopatheight=100000 -connect=localhost -server=0\"\r\n        User time (seconds): 42.94\r\n        System time (seconds): 13.05\r\n        Percent of CPU this job got: 113%\r\n        Elapsed (wall clock) time (h:mm:ss or m:ss): 0:49.29\r\n        Average shared text size (kbytes): 0\r\n        Average unshared data size (kbytes): 0\r\n        Average stack size (kbytes): 0\r\n        Average total size (kbytes): 0\r\n        Maximum resident set size (kbytes): 489628\r\n        Average resident set size (kbytes): 0\r\n        Major (requiring I/O) page faults: 10\r\n        Minor (reclaiming a frame) page faults: 157231\r\n        Voluntary context switches: 551434\r\n        Involuntary context switches: 732\r\n        Swaps: 0\r\n        File system inputs: 1512\r\n        File system outputs: 582728\r\n        Socket messages sent: 0\r\n        Socket messages received: 0\r\n        Signals delivered: 0\r\n        Page size (bytes): 4096\r\n        Exit status: 0\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>master: -prune=10000 -stopatheight=100000</summary>\r\n\r\n```\r\nCommand being timed: \"./bitcoin/src/bitcoind -datadir=/tmp/btc -prune=10000 -stopatheight=100000 -connect=localhost -server=0\"\r\n        User time (seconds): 43.54\r\n        System time (seconds): 13.47\r\n        Percent of CPU this job got: 114%\r\n        Elapsed (wall clock) time (h:mm:ss or m:ss): 0:49.74\r\n        Average shared text size (kbytes): 0\r\n        Average unshared data size (kbytes): 0\r\n        Average stack size (kbytes): 0\r\n        Average total size (kbytes): 0\r\n        Maximum resident set size (kbytes): 489436\r\n        Average resident set size (kbytes): 0\r\n        Major (requiring I/O) page faults: 0\r\n        Minor (reclaiming a frame) page faults: 157198\r\n        Voluntary context switches: 559451\r\n        Involuntary context switches: 1026\r\n        Swaps: 0\r\n        File system inputs: 80\r\n        File system outputs: 582712\r\n        Socket messages sent: 0\r\n        Socket messages received: 0\r\n        Signals delivered: 0\r\n        Page size (bytes): 4096\r\n        Exit status: 0\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>PR: -prune=10000 -stopatheight=200000</summary>\r\n\r\n```\r\nCommand being timed: \"./src/bitcoind -datadir=/tmp/btc -prune=10000 -stopatheight=200000 -connect=localhost -server=0 -printtoconsole=0\"\r\n        User time (seconds): 266.81\r\n        System time (seconds): 38.87\r\n        Percent of CPU this job got: 120%\r\n        Elapsed (wall clock) time (h:mm:ss or m:ss): 4:13.04\r\n        Average shared text size (kbytes): 0\r\n        Average unshared data size (kbytes): 0\r\n        Average stack size (kbytes): 0\r\n        Average total size (kbytes): 0\r\n        Maximum resident set size (kbytes): 815832\r\n        Average resident set size (kbytes): 0\r\n        Major (requiring I/O) page faults: 1\r\n        Minor (reclaiming a frame) page faults: 245274\r\n        Voluntary context switches: 1974226\r\n        Involuntary context switches: 2469\r\n        Swaps: 0\r\n        File system inputs: 704\r\n        File system outputs: 8404056\r\n        Socket messages sent: 0\r\n        Socket messages received: 0\r\n        Signals delivered: 0\r\n        Page size (bytes): 4096\r\n        Exit status: 0\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>master: -prune=10000 -stopatheight=200000</summary>\r\n\r\n```\r\nCommand being timed: \"./src/bitcoind -datadir=/tmp/btc -prune=10000 -stopatheight=200000 -connect=localhost -server=0 -printtoconsole=0\"\r\n        User time (seconds): 268.12\r\n        System time (seconds): 41.59\r\n        Percent of CPU this job got: 120%\r\n        Elapsed (wall clock) time (h:mm:ss or m:ss): 4:15.96\r\n        Average shared text size (kbytes): 0\r\n        Average unshared data size (kbytes): 0\r\n        Average stack size (kbytes): 0\r\n        Average total size (kbytes): 0\r\n        Maximum resident set size (kbytes): 814496\r\n        Average resident set size (kbytes): 0\r\n        Major (requiring I/O) page faults: 1\r\n        Minor (reclaiming a frame) page faults: 245239\r\n        Voluntary context switches: 1990059\r\n        Involuntary context switches: 2580\r\n        Swaps: 0\r\n        File system inputs: 624\r\n        File system outputs: 8376800\r\n        Socket messages sent: 0\r\n        Socket messages received: 0\r\n        Signals delivered: 0\r\n        Page size (bytes): 4096\r\n        Exit status: 0\r\n```\r\n\r\n</details>\r\n\r\nThe results seem to be similar, so ACK 3f2c08b8202e6a98cc55ff101e274281b54c64f1.",
      "created_at" : "2022-11-07T12:15:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-1305521711",
      "id" : 1305521711,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
      "node_id" : "IC_kwDOABII585N0K4v",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1305521711/reactions"
      },
      "updated_at" : "2022-11-07T12:15:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1305521711",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   }
]
