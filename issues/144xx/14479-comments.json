[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2018-10-14T11:04:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#issuecomment-429617346",
      "id" : 429617346,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14479",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTYxNzM0Ng==",
      "updated_at" : "2018-10-14T11:04:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429617346",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "node_id" : "MDQ6VXNlcjExMTU0MTE4",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Please combine this into #14475 or vice-versa, as they are similar changes, in the same file and look like they share some of the same code?",
      "created_at" : "2018-10-14T11:26:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#issuecomment-429618624",
      "id" : 429618624,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14479",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTYxODYyNA==",
      "updated_at" : "2018-10-14T11:26:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429618624",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@fanquake Good point! Now updated to make non-overlapping. Thanks! :-)",
      "created_at" : "2018-10-14T11:35:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#issuecomment-429619107",
      "id" : 429619107,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14479",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTYxOTEwNw==",
      "updated_at" : "2018-10-14T11:35:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429619107",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This 'serialization' is pretty severely unportable.\r\n\r\nCasting through a union its a almost universally used idiom, and in some cases the only way to deserialize without either violating aliasing or demolishing performance with superfluous copies. (And in C it's unambiguously not undefined behaviour, making be somewhat dubious of the claim that it is in C++)  Here, I doubt the performance matter-- but the question I see is: why the heck are we using a completely non-portable serialization of a floating point number in any case? That just sounds like a bug in and of itself.\r\n",
      "created_at" : "2018-10-14T18:23:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#issuecomment-429649599",
      "id" : 429649599,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14479",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTY0OTU5OQ==",
      "updated_at" : "2018-10-14T18:23:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429649599",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK\r\n\r\n@gmaxwell I'm pretty sure the generated code is identical or of similar performance with this change. Perhaps someone needs to look at the generated code, but the very similar constructions on https://github.com/bitcoin/bitcoin/blob/v0.17.0/src/crypto/common.h#L17L54 compile to essentially no-ops.  \r\n\r\nAs far as UB goes, https://en.cppreference.com/w/cpp/language/union claims \"The details of that allocation are implementation-defined, and it's undefined behavior to read from the member of the union that wasn't most recently written. Many compilers implement, as a non-standard language extension, the ability to read inactive members of a union.\", which I believe to be true for gcc and clang. \r\n\r\nFinally, indeed it's weird that we rely on the exact memory representation of floating point numbers for serialization. However, it seems that the only place it's used (outside of tests) is for the `TxConfirmStats::decay` field, when saving/loading fee estimates to/from disk. That doesn't seem too hard to first convert to an integer or so as an independent change.",
      "created_at" : "2018-10-14T20:13:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#issuecomment-429658465",
      "id" : 429658465,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14479",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTY1ODQ2NQ==",
      "updated_at" : "2018-10-14T20:17:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429658465",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@gmaxwell \r\n\r\n> (And in C it's unambiguously not undefined behaviour, making be somewhat dubious of the claim that it is in C++)\r\n\r\nThe C++ Core Guidelines Ã¢ÂÂ with editors Bjarne Stroustrup and Herb Sutter Ã¢ÂÂ [has this to say](https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#c183-dont-use-a-union-for-type-punning): \"It is undefined behavior to read a union member with a different type from the one with which it was written.\"\r\n\r\n> Casting through a union its a almost universally used idiom, [Ã¢ÂÂ¦]\r\n\r\nThe C++ Core Guidelines [has this to say](https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#c183-dont-use-a-union-for-type-punning): \"Unfortunately, unions are commonly used for type punning. We donÃ¢ÂÂt consider Ã¢ÂÂsometimes, it works as expectedÃ¢ÂÂ a strong argument.\"\r\n\r\n> [Ã¢ÂÂ¦] and in some cases the only way to deserialize without either violating aliasing or demolishing performance with superfluous copies.\r\n\r\nProfessor John Regehr [has this to say](https://blog.regehr.org/archives/959): \"Again, although we might expect that adding a function call would make the code harder to optimize, both compilers understand memcpy deeply enough that we get the desired object code [Ã¢ÂÂ¦] In my opinion c5 is the easiest code to understand out of this little batch of functions because it doesnÃ¢ÂÂt do the messy shifting and also it is totally, completely, obviously free of complications that might arise from the confusing rules for unions and strict aliasing. It became my preferred idiom for type punning a few years ago when I discovered that compilers could see through the memcpy and generate the right code.\"",
      "created_at" : "2018-10-14T20:14:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#issuecomment-429658568",
      "id" : 429658568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14479",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTY1ODU2OA==",
      "updated_at" : "2018-10-14T20:55:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429658568",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "NAK. Eliminate the float serialization and just remove this code.  This is always going to be non-portable (e.g. can't move data between different architectures without it being silently corrupted)",
      "created_at" : "2018-10-15T01:46:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#issuecomment-429684230",
      "id" : 429684230,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14479",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTY4NDIzMA==",
      "updated_at" : "2018-10-15T01:48:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429684230",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift In case it isn't clear, I think @gmaxwell means we could get rid of the float-to-int conversion functions, and directly write the bytes of the float (which would be less code, and work when transferring a data direction between an little endian and big endian system which the current code does not)",
      "created_at" : "2018-10-15T02:01:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#issuecomment-429686111",
      "id" : 429686111,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14479",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTY4NjExMQ==",
      "updated_at" : "2018-10-15T02:03:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429686111",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@gmaxwell @sipa Yes, getting rid of this code would be nice. As I understand it the suggestion is to change from:\r\n\r\n```\r\nser_writedata{32,64}(s, ser_{float,double}_to_uint{32,64}(a));\r\n```\r\n\r\nTo:\r\n\r\n```\r\nser_writedata{32,64}(s, a);\r\n```\r\n\r\nIs that correct?\r\n\r\nThat change would mean that we change the file format of `fee_estimates.dat`, right? Perhaps that is not a problem?",
      "created_at" : "2018-10-15T09:37:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#issuecomment-429775729",
      "id" : 429775729,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14479",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTc3NTcyOQ==",
      "updated_at" : "2018-10-15T09:38:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429775729",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "No, you'd need to add a ser_writedata_float and ser_writedata_double, mimicking the existing integer write functions, which write the data directly.\n\nThat shouldn't break anything, as right now that is essentially what is happening already, except the data is first being reinterpreted as an integer, and then written as an integer.\n\nThe issue is that on big-endian systems, the float data is reinterpreted as native (big endian) integers, which are then serialized as little endian. The overall effect of that is that on BE systems, floats and doubles are byteswapped when reading/writing, which makes it incompatible across systems.\n\nThe code you suggest would not work, as it'd cast the floating point numbers semantically to integers (rounding them) rather than reinterpreting.",
      "created_at" : "2018-10-15T10:40:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#issuecomment-429798920",
      "id" : 429798920,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14479",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTc5ODkyMA==",
      "updated_at" : "2018-10-15T10:40:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429798920",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa Oh, yes of course. I misunderstood the suggestion and didn't look at the signature of `ser_writedata{32,64}(Ã¢ÂÂ¦)` before responding. Thanks for the clarification. Rounding them is obviously not what we want :-)",
      "created_at" : "2018-10-15T11:07:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#issuecomment-429807710",
      "id" : 429807710,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14479",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTgwNzcxMA==",
      "updated_at" : "2018-10-15T11:07:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429807710",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Sigh, no.\n\nThe whole point is not to have the byte swap operations in there.\n\nDrop the htole32 etc.",
      "created_at" : "2018-10-15T12:27:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#issuecomment-429833457",
      "id" : 429833457,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14479",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTgzMzQ1Nw==",
      "updated_at" : "2018-10-15T12:27:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429833457",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa Please review d928115718d3b3df69f7188c7344ab814523a1d7 :-)\r\n\r\nLet me know if it looks good and I'll squash.",
      "created_at" : "2018-10-15T12:45:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#issuecomment-429839036",
      "id" : 429839036,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14479",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTgzOTAzNg==",
      "updated_at" : "2018-10-15T12:47:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429839036",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK.\r\n\r\nWould be nice if someone with a big endian system could test that the resulting fee_estimates.dat files are actually portable across systems.",
      "created_at" : "2018-10-15T20:09:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#issuecomment-429995370",
      "id" : 429995370,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14479",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTk5NTM3MA==",
      "updated_at" : "2018-10-15T20:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429995370",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14479#discussion_r225676552"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14479"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225676552"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Will this not read a corrupted value on files saved (before this change) on big endian systems (ie: previously saved using little endian but now interpreted using big endian?) - I'm not overly familiar with the code so maybe it's okay - but just something that jumps out.",
      "commit_id" : "d928115718d3b3df69f7188c7344ab814523a1d7",
      "created_at" : "2018-10-16T19:23:25Z",
      "diff_hunk" : "@@ -124,33 +134,19 @@ template<typename Stream> inline uint64_t ser_readdata64(Stream &s)\n     s.read((char*)&obj, 8);\n     return le64toh(obj);\n }\n-inline uint64_t ser_double_to_uint64(double x)\n-{\n-    static_assert(sizeof(uint64_t) == sizeof(double), \"Floating-point width assumption\");\n-    uint64_t y;\n-    memcpy(&y, &x, sizeof(y));\n-    return y;\n-}\n-inline uint32_t ser_float_to_uint32(float x)\n-{\n-    static_assert(sizeof(uint32_t) == sizeof(float), \"Floating-point width assumption\");\n-    uint32_t y;\n-    memcpy(&y, &x, sizeof(y));\n-    return y;\n-}\n-inline double ser_uint64_to_double(uint64_t y)\n+template<typename Stream> inline float ser_readdata_float(Stream &s)\n {\n-    static_assert(sizeof(double) == sizeof(uint64_t), \"Floating-point width assumption\");\n-    double x;\n-    memcpy(&x, &y, sizeof(x));\n-    return x;\n+    static_assert(sizeof(float) == 4, \"Floating-point width assumption\");\n+    float obj;\n+    s.read((char*)&obj, 4);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#discussion_r225676552",
      "id" : 225676552,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNTY3NjU1Mg==",
      "original_commit_id" : "d928115718d3b3df69f7188c7344ab814523a1d7",
      "original_position" : 44,
      "path" : "src/serialize.h",
      "position" : 41,
      "pull_request_review_id" : 165327579,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14479",
      "updated_at" : "2018-10-16T19:23:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225676552",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6394033?v=4",
         "events_url" : "https://api.github.com/users/donaloconnor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/donaloconnor/followers",
         "following_url" : "https://api.github.com/users/donaloconnor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/donaloconnor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/donaloconnor",
         "id" : 6394033,
         "login" : "donaloconnor",
         "node_id" : "MDQ6VXNlcjYzOTQwMzM=",
         "organizations_url" : "https://api.github.com/users/donaloconnor/orgs",
         "received_events_url" : "https://api.github.com/users/donaloconnor/received_events",
         "repos_url" : "https://api.github.com/users/donaloconnor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/donaloconnor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/donaloconnor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/donaloconnor"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14479#discussion_r225682173"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14479"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225682173"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@donaloconnor Floating point number serialization in memory is specified by IEEE 754, IIRC, and not subject to the endianness under which integers are encoded.",
      "commit_id" : "d928115718d3b3df69f7188c7344ab814523a1d7",
      "created_at" : "2018-10-16T19:42:57Z",
      "diff_hunk" : "@@ -124,33 +134,19 @@ template<typename Stream> inline uint64_t ser_readdata64(Stream &s)\n     s.read((char*)&obj, 8);\n     return le64toh(obj);\n }\n-inline uint64_t ser_double_to_uint64(double x)\n-{\n-    static_assert(sizeof(uint64_t) == sizeof(double), \"Floating-point width assumption\");\n-    uint64_t y;\n-    memcpy(&y, &x, sizeof(y));\n-    return y;\n-}\n-inline uint32_t ser_float_to_uint32(float x)\n-{\n-    static_assert(sizeof(uint32_t) == sizeof(float), \"Floating-point width assumption\");\n-    uint32_t y;\n-    memcpy(&y, &x, sizeof(y));\n-    return y;\n-}\n-inline double ser_uint64_to_double(uint64_t y)\n+template<typename Stream> inline float ser_readdata_float(Stream &s)\n {\n-    static_assert(sizeof(double) == sizeof(uint64_t), \"Floating-point width assumption\");\n-    double x;\n-    memcpy(&x, &y, sizeof(x));\n-    return x;\n+    static_assert(sizeof(float) == 4, \"Floating-point width assumption\");\n+    float obj;\n+    s.read((char*)&obj, 4);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#discussion_r225682173",
      "id" : 225682173,
      "in_reply_to_id" : 225676552,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNTY4MjE3Mw==",
      "original_commit_id" : "d928115718d3b3df69f7188c7344ab814523a1d7",
      "original_position" : 44,
      "path" : "src/serialize.h",
      "position" : 41,
      "pull_request_review_id" : 165335012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14479",
      "updated_at" : "2018-10-16T19:42:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225682173",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14479#discussion_r225722007"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14479"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225722007"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa - I was under the impression that endianess is not specified in IEEE 754 - but subject to it as it's implementation dependant. This is probably not an issue in practice as BE archs are pretty rare now. My point was that the byte ordering might be switched when loading the file on a BE float arch. I've read that even some systems have half endianess where integer are LE while 754 are BE. Anyway that is a rabbit hole and maybe out of scope here. Thanks for the response.",
      "commit_id" : "d928115718d3b3df69f7188c7344ab814523a1d7",
      "created_at" : "2018-10-16T21:57:24Z",
      "diff_hunk" : "@@ -124,33 +134,19 @@ template<typename Stream> inline uint64_t ser_readdata64(Stream &s)\n     s.read((char*)&obj, 8);\n     return le64toh(obj);\n }\n-inline uint64_t ser_double_to_uint64(double x)\n-{\n-    static_assert(sizeof(uint64_t) == sizeof(double), \"Floating-point width assumption\");\n-    uint64_t y;\n-    memcpy(&y, &x, sizeof(y));\n-    return y;\n-}\n-inline uint32_t ser_float_to_uint32(float x)\n-{\n-    static_assert(sizeof(uint32_t) == sizeof(float), \"Floating-point width assumption\");\n-    uint32_t y;\n-    memcpy(&y, &x, sizeof(y));\n-    return y;\n-}\n-inline double ser_uint64_to_double(uint64_t y)\n+template<typename Stream> inline float ser_readdata_float(Stream &s)\n {\n-    static_assert(sizeof(double) == sizeof(uint64_t), \"Floating-point width assumption\");\n-    double x;\n-    memcpy(&x, &y, sizeof(x));\n-    return x;\n+    static_assert(sizeof(float) == 4, \"Floating-point width assumption\");\n+    float obj;\n+    s.read((char*)&obj, 4);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#discussion_r225722007",
      "id" : 225722007,
      "in_reply_to_id" : 225676552,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNTcyMjAwNw==",
      "original_commit_id" : "d928115718d3b3df69f7188c7344ab814523a1d7",
      "original_position" : 44,
      "path" : "src/serialize.h",
      "position" : 41,
      "pull_request_review_id" : 165385273,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14479",
      "updated_at" : "2018-10-16T21:57:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225722007",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6394033?v=4",
         "events_url" : "https://api.github.com/users/donaloconnor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/donaloconnor/followers",
         "following_url" : "https://api.github.com/users/donaloconnor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/donaloconnor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/donaloconnor",
         "id" : 6394033,
         "login" : "donaloconnor",
         "node_id" : "MDQ6VXNlcjYzOTQwMzM=",
         "organizations_url" : "https://api.github.com/users/donaloconnor/orgs",
         "received_events_url" : "https://api.github.com/users/donaloconnor/received_events",
         "repos_url" : "https://api.github.com/users/donaloconnor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/donaloconnor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/donaloconnor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/donaloconnor"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14479#discussion_r225723001"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14479"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225723001"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah, that's good to know in any case. If true, that means this PR really worsens things!",
      "commit_id" : "d928115718d3b3df69f7188c7344ab814523a1d7",
      "created_at" : "2018-10-16T22:01:26Z",
      "diff_hunk" : "@@ -124,33 +134,19 @@ template<typename Stream> inline uint64_t ser_readdata64(Stream &s)\n     s.read((char*)&obj, 8);\n     return le64toh(obj);\n }\n-inline uint64_t ser_double_to_uint64(double x)\n-{\n-    static_assert(sizeof(uint64_t) == sizeof(double), \"Floating-point width assumption\");\n-    uint64_t y;\n-    memcpy(&y, &x, sizeof(y));\n-    return y;\n-}\n-inline uint32_t ser_float_to_uint32(float x)\n-{\n-    static_assert(sizeof(uint32_t) == sizeof(float), \"Floating-point width assumption\");\n-    uint32_t y;\n-    memcpy(&y, &x, sizeof(y));\n-    return y;\n-}\n-inline double ser_uint64_to_double(uint64_t y)\n+template<typename Stream> inline float ser_readdata_float(Stream &s)\n {\n-    static_assert(sizeof(double) == sizeof(uint64_t), \"Floating-point width assumption\");\n-    double x;\n-    memcpy(&x, &y, sizeof(x));\n-    return x;\n+    static_assert(sizeof(float) == 4, \"Floating-point width assumption\");\n+    float obj;\n+    s.read((char*)&obj, 4);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#discussion_r225723001",
      "id" : 225723001,
      "in_reply_to_id" : 225676552,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNTcyMzAwMQ==",
      "original_commit_id" : "d928115718d3b3df69f7188c7344ab814523a1d7",
      "original_position" : 44,
      "path" : "src/serialize.h",
      "position" : 41,
      "pull_request_review_id" : 165386471,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14479",
      "updated_at" : "2018-10-16T22:03:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225723001",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14479#discussion_r225726637"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14479"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225726637"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@sipa Should I revert to the version I originally submitted that solves the UB part and the UB part only? :-)",
      "commit_id" : "d928115718d3b3df69f7188c7344ab814523a1d7",
      "created_at" : "2018-10-16T22:17:23Z",
      "diff_hunk" : "@@ -124,33 +134,19 @@ template<typename Stream> inline uint64_t ser_readdata64(Stream &s)\n     s.read((char*)&obj, 8);\n     return le64toh(obj);\n }\n-inline uint64_t ser_double_to_uint64(double x)\n-{\n-    static_assert(sizeof(uint64_t) == sizeof(double), \"Floating-point width assumption\");\n-    uint64_t y;\n-    memcpy(&y, &x, sizeof(y));\n-    return y;\n-}\n-inline uint32_t ser_float_to_uint32(float x)\n-{\n-    static_assert(sizeof(uint32_t) == sizeof(float), \"Floating-point width assumption\");\n-    uint32_t y;\n-    memcpy(&y, &x, sizeof(y));\n-    return y;\n-}\n-inline double ser_uint64_to_double(uint64_t y)\n+template<typename Stream> inline float ser_readdata_float(Stream &s)\n {\n-    static_assert(sizeof(double) == sizeof(uint64_t), \"Floating-point width assumption\");\n-    double x;\n-    memcpy(&x, &y, sizeof(x));\n-    return x;\n+    static_assert(sizeof(float) == 4, \"Floating-point width assumption\");\n+    float obj;\n+    s.read((char*)&obj, 4);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#discussion_r225726637",
      "id" : 225726637,
      "in_reply_to_id" : 225676552,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNTcyNjYzNw==",
      "original_commit_id" : "d928115718d3b3df69f7188c7344ab814523a1d7",
      "original_position" : 44,
      "path" : "src/serialize.h",
      "position" : 41,
      "pull_request_review_id" : 165390973,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14479",
      "updated_at" : "2018-10-16T22:17:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225726637",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14479#discussion_r225802065"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14479"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225802065"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@practicalswift Yes, that makes sense. I wasn't aware that IEEE encoding was still subject to BE/LE serialization.\r\n\r\nIdeally we actually test this on some BE hardware, though...",
      "commit_id" : "d928115718d3b3df69f7188c7344ab814523a1d7",
      "created_at" : "2018-10-17T07:10:38Z",
      "diff_hunk" : "@@ -124,33 +134,19 @@ template<typename Stream> inline uint64_t ser_readdata64(Stream &s)\n     s.read((char*)&obj, 8);\n     return le64toh(obj);\n }\n-inline uint64_t ser_double_to_uint64(double x)\n-{\n-    static_assert(sizeof(uint64_t) == sizeof(double), \"Floating-point width assumption\");\n-    uint64_t y;\n-    memcpy(&y, &x, sizeof(y));\n-    return y;\n-}\n-inline uint32_t ser_float_to_uint32(float x)\n-{\n-    static_assert(sizeof(uint32_t) == sizeof(float), \"Floating-point width assumption\");\n-    uint32_t y;\n-    memcpy(&y, &x, sizeof(y));\n-    return y;\n-}\n-inline double ser_uint64_to_double(uint64_t y)\n+template<typename Stream> inline float ser_readdata_float(Stream &s)\n {\n-    static_assert(sizeof(double) == sizeof(uint64_t), \"Floating-point width assumption\");\n-    double x;\n-    memcpy(&x, &y, sizeof(x));\n-    return x;\n+    static_assert(sizeof(float) == 4, \"Floating-point width assumption\");\n+    float obj;\n+    s.read((char*)&obj, 4);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14479#discussion_r225802065",
      "id" : 225802065,
      "in_reply_to_id" : 225676552,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNTgwMjA2NQ==",
      "original_commit_id" : "d928115718d3b3df69f7188c7344ab814523a1d7",
      "original_position" : 44,
      "path" : "src/serialize.h",
      "position" : 41,
      "pull_request_review_id" : 165481277,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14479",
      "updated_at" : "2018-10-17T07:10:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225802065",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
