{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "<!-- This issue tracker is only for technical issues related to Bitcoin Core.\r\n\r\nGeneral bitcoin questions and/or support requests are best directed to the Bitcoin StackExchange at https://bitcoin.stackexchange.com.\r\n\r\nFor reporting security issues, please read instructions at https://bitcoincore.org/en/contact/.\r\n\r\nIf the node is \"stuck\" during sync or giving \"block checksum mismatch\" errors, please ensure your hardware is stable by running memtest and observe CPU temperature with a load-test tool such as linpack before creating an issue! -->\r\n\r\nDescribe the issue \r\n\r\nFor example, you unlock a wallet with \"walletpassphrase\" command for next 10 seconds, but for some reason unload wallet command is called before the wallet is locked again, it causes RPC server to crash and I didn't find any relevant help from debug.log file\r\n\r\nThis is important because whole idea of dynamically loading/unloading wallet is to help build applications that can work with multiple wallets more effectively, while its easy for an application to load all and every wallet but in our case we want to unload wallet right after necessary commands have passed (i.e. in PHP OOP I have registered a shutdown function for all wallets instances to automatically unload)\r\n\r\n What behavior did you expect?\r\n\r\nunload command to return an error message in such circumstances\r\n\r\n<!--- What was the actual behavior (provide screenshots if the issue is GUI-related)? -->\r\n\r\nHow reliably can you reproduce the issue, what are the steps to do so? \r\n\r\n1. Call \"walletpassphrase\" to unlock wallet for next N seconds\r\n2. Issue \"unloadwallet\" command before those N seconds have passed\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\n\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\n\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\n<!--- This is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred. -->\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14452/comments",
   "created_at" : "2018-10-09T22:31:27Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14452/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/14452",
   "id" : 368424161,
   "labels" : [
      {
         "color" : "0052cc",
         "default" : false,
         "id" : 98279177,
         "name" : "RPC/REST/ZMQ",
         "node_id" : "MDU6TGFiZWw5ODI3OTE3Nw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14452/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUzNjg0MjQxNjE=",
   "number" : 14452,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Unloading a wallet with in timeframe that is unlocked for crashes RPC server without any log/trace",
   "updated_at" : "2018-10-10T01:26:54Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14452",
   "user" : {
      "avatar_url" : "https://avatars1.githubusercontent.com/u/11485189?v=4",
      "events_url" : "https://api.github.com/users/furqansiddiqui/events{/privacy}",
      "followers_url" : "https://api.github.com/users/furqansiddiqui/followers",
      "following_url" : "https://api.github.com/users/furqansiddiqui/following{/other_user}",
      "gists_url" : "https://api.github.com/users/furqansiddiqui/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/furqansiddiqui",
      "id" : 11485189,
      "login" : "furqansiddiqui",
      "node_id" : "MDQ6VXNlcjExNDg1MTg5",
      "organizations_url" : "https://api.github.com/users/furqansiddiqui/orgs",
      "received_events_url" : "https://api.github.com/users/furqansiddiqui/received_events",
      "repos_url" : "https://api.github.com/users/furqansiddiqui/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/furqansiddiqui/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/furqansiddiqui/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/furqansiddiqui"
   }
}
