[
   {
      "author_association" : "MEMBER",
      "body" : "IRC discussion:\r\n```ÃÂRC\r\n[12:06:00]  <jonasschnelli>\tThe only way how to import a watch only multisig is by importing the outer script, the readme-script and all it's pubkeys (via importpubkey)\r\n[12:06:30]  <sipa>\tyou don't need the pubkeys for multisig\r\n[12:06:34]  <sipa>\tonly for p2pkh\r\n[12:06:51]  <jonasschnelli>\tsipa:If you don't import the pubkey they are non-solvable and not useable in fundraw\r\n[12:07:06]  <jonasschnelli>\tSo you need to import via importpubkey (and import all possible scripts!)\r\n[12:07:28]  <sipa>\tjonasschnelli: that makes no sense\r\n[12:07:31]  <jonasschnelli>\tGetScriptForRawPubKey will then lead to extract the pubKey and place them mapWatchKeys\r\n[12:07:43]  <jonasschnelli>\tAgree it makes no sense...\r\n[12:07:55]  <sipa>\timporting a pubkey is so that the signing code can find the pubkey based on the hash of the key\r\n[12:08:03]  <sipa>\tin a multisig there are no key hashes involved\r\n[12:08:13]  <sipa>\tjust the redeemscript should be enough for multisig\r\n[12:08:39]  <sipa>\tplus importaddress of the toplevel thing\r\n[12:08:43]  <jonasschnelli>\tYes. But following isSolvable, it will require to find the pubkey in oder to flag it solveable\r\n[12:09:00]  <sipa>\tit has the pubkey; it's in the redeemscript\r\n[12:09:06]  <sipa>\ti'm very skeptical :)\r\n[12:09:11]  <jonasschnelli>\tbut it won't find it...\r\n[12:09:19]  <sipa>\thave you tried this?\r\n[12:09:29]  <jonasschnelli>\tYes\r\n[12:09:32]  <sipa>\ti find this very hard to believe\r\n[12:09:37]  <jonasschnelli>\tmapWatchKeys gets only touched by AddWatchOnly\r\n[12:09:44]  <jonasschnelli>\tTry yourself... with the following steps:\r\n[12:09:49]  <jonasschnelli>\t1. createwallet \"dummy\" true\r\n[12:09:53]  <sipa>\twhat do you need mapWatchKeys for in multisig?\r\n[12:09:54] \tescrivner (~user@cpe-76-175-74-114.socal.res.rr.com) left IRC (Ping timeout: 252 seconds)\r\n[12:10:37]  <jonasschnelli>\tsipa: pure watching no,.. but if you want to use them for watchOnly coinselection via fundraw, yes, you need it with the corrent code\r\n[12:10:47]  <sipa>\tthat makes no sense :)\r\n[12:10:55]  <sipa>\tif you say so, i believe you\r\n[12:11:01]  <sipa>\tbit i don't know what that is the case\r\n[12:11:03]  <jonasschnelli>\tTry it youself. :)\r\n[12:11:09]  <sipa>\ti can't right now\r\n[12:11:16]  <jonasschnelli>\tSure. No hurry...\r\n[12:11:24]  <jonasschnelli>\tthe use case: decouple the keys from the wallet\r\n[12:11:44]  <jonasschnelli>\t(via importing scripts and using fundrawtransaction)\r\n[12:11:44]  <sipa>\tyes not claiming this isn't important!\r\n[12:11:57]  <sipa>\ti'm just not understanding why you need to import the pubkeys\r\n[12:12:06]  <sipa>\tthey are in the redeemscript\r\n[12:12:28]  <sipa>\tthe signing code doesn't need to look up any pubkeys\r\n[12:12:45]  <jonasschnelli>\tBecause: fundraw takes only solvable imputs. isSolveable requires to find the pubKey in the keystore.\r\n[12:12:53]  <jonasschnelli>\tBut it's fixable IMO\r\n[12:12:54]  <sipa>\twhy?\r\n[12:13:23]  <jonasschnelli>\tisSolveable _currently_ requires to find the pubKey... its just coded that way...\r\n[12:13:50]  <sipa>\tcan you point me to the code?\r\n[12:14:01]  <jonasschnelli>\t1s..\r\n[12:14:49]  <jonasschnelli>\tcode part 1: https://github.com/bitcoin/bitcoin/blob/master/src/script/sign.cpp#L141\r\n[12:15:36]  <sipa>\tsure, but that doesn't need the pubkey imported, only the redeemscript\r\n[12:16:25]  <jonasschnelli>\tcode part 2: https://github.com/bitcoin/bitcoin/blob/aa39ca764578a9017e03796b554955796022eb0d/src/script/sign.cpp#L84\r\n[12:16:31]  <jonasschnelli>\t(GetPubKey(provider, sigdata, keyid, pubkey);)\r\n[12:16:46]  <jonasschnelli>\tGoes into: bool CCryptoKeyStore::GetPubKey(const CKeyID &address, CPubKey& vchPubKeyOut) const\r\n[12:16:51]  <sipa>\toh\r\n[12:16:55]  <sipa>\tyou're right\r\n[12:16:56] \tphwalkr (~phwalkr@194.210.91.110) left IRC (Remote host closed the connection)\r\n[12:17:03]  <sipa>\tthat's stupid :)\r\n[12:17:08]  <jonasschnelli>\tyes... it's a mess\r\n[12:17:30] sipa\tquietly mentions descriptors again\r\n[12:17:44]  <jonasschnelli>\tIndeed!\r\n[12:17:47] \tescrivner (~user@cpe-76-175-74-114.socal.res.rr.com) joined the channel\r\n[12:18:23]  <jonasschnelli>\tYou can bypass that problem by importpubkey all the multisigs pubkeys because it will generate a RawPubKeyScript where the pubkeys gets extracted and added to the keystore. :/\r\n[12:18:36]  <jonasschnelli>\t(with an overhead of a couple of unused scripts)\r\n[12:18:48]  <sipa>\tyeah\r\n[12:18:56]  <sipa>\tbut that's pretty ridiculous\r\n```",
      "created_at" : "2018-10-06T10:28:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14415#issuecomment-427563189",
      "id" : 427563189,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14415",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzU2MzE4OQ==",
      "updated_at" : "2018-10-06T10:28:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427563189",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Seems to be a 0.17 regression (just tested on 0.16.3 and seems that the inputs there are marked as solvable).",
      "created_at" : "2018-10-06T10:51:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14415#issuecomment-427564516",
      "id" : 427564516,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14415",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzU2NDUxNg==",
      "updated_at" : "2018-10-06T10:51:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427564516",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   }
]
