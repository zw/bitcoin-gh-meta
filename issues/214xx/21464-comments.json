[
   {
      "author_association" : "MEMBER",
      "body" : "Interesting on first look, will review.",
      "created_at" : "2021-03-18T19:26:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-802225625",
      "id" : 802225625,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwMjIyNTYyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-18T19:26:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/802225625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "pushed an update to simplify setRemove to hold txids instead of tx reference_wrappers, which eliminated the confusing ownership thing. should make review simpler.",
      "created_at" : "2021-04-07T00:20:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-814514448",
      "id" : 814514448,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxNDUxNDQ0OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-07T00:20:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/814514448",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r610216193"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/610216193"
         }
      },
      "author_association" : "MEMBER",
      "body" : "brackets",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-09T00:03:32Z",
      "diff_hunk" : "@@ -146,7 +153,16 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n                 }\n             }\n         } // release epoch guard for UpdateForDescendants\n-        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded);\n+        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded, setRemove, ancestor_size_limit, ancestor_limit);\n+    }\n+\n+    for (auto& txid : setRemove) {\n+        // this guard is safe because we know that all to_remove *were* in the mempool before we\n+        // began iterating here, so this only serves to de-duplicate calls to removeRecursive.\n+        // Otherwise, removeRecursive should be called whether or not the hash is in the mempool.\n+        const std::optional<txiter> txiter_opt = GetIter(txid);\n+        if (txiter_opt)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r610216193",
      "id" : 610216193,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMDIxNjE5Mw==",
      "original_commit_id" : "590fb3ef432a14ca8801c3e2f6d79e7707117e40",
      "original_line" : 163,
      "original_position" : 52,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 631926982,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-12T02:00:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/610216193",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r610216318"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/610216318"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: snake_case for new vars",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-09T00:03:47Z",
      "diff_hunk" : "@@ -117,6 +122,8 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n     // accounted for in the state of their ancestors)\n     std::set<uint256> setAlreadyIncluded(vHashesToUpdate.begin(), vHashesToUpdate.end());\n \n+    std::set<uint256> setRemove;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r610216318",
      "id" : 610216318,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMDIxNjMxOA==",
      "original_commit_id" : "590fb3ef432a14ca8801c3e2f6d79e7707117e40",
      "original_line" : 125,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 631926982,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-12T02:00:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/610216318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r610231049"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/610231049"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This probably warrants a comment since it's an opportunistic check that is not about updating the descendant map",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-09T00:28:12Z",
      "diff_hunk" : "@@ -95,6 +96,10 @@ void CTxMemPool::UpdateForDescendants(txiter updateIt, cacheMap &cachedDescendan\n             cachedDescendants[updateIt].insert(mapTx.iterator_to(descendant));\n             // Update ancestor state for each descendant\n             mapTx.modify(mapTx.iterator_to(descendant), update_ancestor_state(updateIt->GetTxSize(), updateIt->GetModifiedFee(), 1, updateIt->GetSigOpCost()));\n+\n+            if (descendant.GetCountWithAncestors() > ancestor_limit || descendant.GetSizeWithAncestors() > ancestor_size_limit) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r610231049",
      "id" : 610231049,
      "line" : 102,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMDIzMTA0OQ==",
      "original_commit_id" : "590fb3ef432a14ca8801c3e2f6d79e7707117e40",
      "original_line" : 102,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 17,
      "pull_request_review_id" : 631926982,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-12T02:00:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/610231049",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r610231499"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/610231499"
         }
      },
      "author_association" : "MEMBER",
      "body" : "what's `to_remove`?",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-09T00:28:59Z",
      "diff_hunk" : "@@ -146,7 +153,16 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n                 }\n             }\n         } // release epoch guard for UpdateForDescendants\n-        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded);\n+        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded, setRemove, ancestor_size_limit, ancestor_limit);\n+    }\n+\n+    for (auto& txid : setRemove) {\n+        // this guard is safe because we know that all to_remove *were* in the mempool before we",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r610231499",
      "id" : 610231499,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMDIzMTQ5OQ==",
      "original_commit_id" : "590fb3ef432a14ca8801c3e2f6d79e7707117e40",
      "original_line" : 160,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 631926982,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-12T02:00:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/610231499",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r610233276"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/610233276"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Also I don't really understand the comment block in general",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-09T00:32:04Z",
      "diff_hunk" : "@@ -146,7 +153,16 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n                 }\n             }\n         } // release epoch guard for UpdateForDescendants\n-        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded);\n+        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded, setRemove, ancestor_size_limit, ancestor_limit);\n+    }\n+\n+    for (auto& txid : setRemove) {\n+        // this guard is safe because we know that all to_remove *were* in the mempool before we",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r610233276",
      "id" : 610233276,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMDIzMzI3Ng==",
      "original_commit_id" : "590fb3ef432a14ca8801c3e2f6d79e7707117e40",
      "original_line" : 160,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 631926982,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-12T02:00:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/610233276",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r611279803"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611279803"
         }
      },
      "author_association" : "MEMBER",
      "body" : "overall I wish we could be much more compartmentalized about these limit checks. \r\n\r\nno good suggestion; just a complaint",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-12T01:31:44Z",
      "diff_hunk" : "@@ -95,6 +96,10 @@ void CTxMemPool::UpdateForDescendants(txiter updateIt, cacheMap &cachedDescendan\n             cachedDescendants[updateIt].insert(mapTx.iterator_to(descendant));\n             // Update ancestor state for each descendant\n             mapTx.modify(mapTx.iterator_to(descendant), update_ancestor_state(updateIt->GetTxSize(), updateIt->GetModifiedFee(), 1, updateIt->GetSigOpCost()));\n+\n+            if (descendant.GetCountWithAncestors() > ancestor_limit || descendant.GetSizeWithAncestors() > ancestor_size_limit) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r611279803",
      "id" : 611279803,
      "in_reply_to_id" : 610231049,
      "line" : 102,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTI3OTgwMw==",
      "original_commit_id" : "590fb3ef432a14ca8801c3e2f6d79e7707117e40",
      "original_line" : 102,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 17,
      "pull_request_review_id" : 631926982,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-12T02:00:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611279803",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r611280586"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611280586"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "right; stale comment on the prior version. Before i was using txiters + CTransactionRefs and had to use a second vec before removing (otherwise you'd have use after free on the txiters).\r\n\r\nFixed the comment.",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-12T01:36:01Z",
      "diff_hunk" : "@@ -146,7 +153,16 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n                 }\n             }\n         } // release epoch guard for UpdateForDescendants\n-        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded);\n+        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded, setRemove, ancestor_size_limit, ancestor_limit);\n+    }\n+\n+    for (auto& txid : setRemove) {\n+        // this guard is safe because we know that all to_remove *were* in the mempool before we",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r611280586",
      "id" : 611280586,
      "in_reply_to_id" : 610231499,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTI4MDU4Ng==",
      "original_commit_id" : "590fb3ef432a14ca8801c3e2f6d79e7707117e40",
      "original_line" : 160,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 633085129,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-12T02:00:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611280586",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r611280629"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611280629"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ibid",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-12T01:36:08Z",
      "diff_hunk" : "@@ -146,7 +153,16 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n                 }\n             }\n         } // release epoch guard for UpdateForDescendants\n-        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded);\n+        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded, setRemove, ancestor_size_limit, ancestor_limit);\n+    }\n+\n+    for (auto& txid : setRemove) {\n+        // this guard is safe because we know that all to_remove *were* in the mempool before we",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r611280629",
      "id" : 611280629,
      "in_reply_to_id" : 610233276,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTI4MDYyOQ==",
      "original_commit_id" : "590fb3ef432a14ca8801c3e2f6d79e7707117e40",
      "original_line" : 160,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 633085162,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-12T02:00:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611280629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r611285428"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611285428"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "renamed",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-12T01:58:00Z",
      "diff_hunk" : "@@ -117,6 +122,8 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n     // accounted for in the state of their ancestors)\n     std::set<uint256> setAlreadyIncluded(vHashesToUpdate.begin(), vHashesToUpdate.end());\n \n+    std::set<uint256> setRemove;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r611285428",
      "id" : 611285428,
      "in_reply_to_id" : 610216318,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTI4NTQyOA==",
      "original_commit_id" : "590fb3ef432a14ca8801c3e2f6d79e7707117e40",
      "original_line" : 125,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 633090496,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-12T02:00:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611285428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r611285528"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611285528"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "will clarify why doing it here makes sense; good point.",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-12T01:58:25Z",
      "diff_hunk" : "@@ -95,6 +96,10 @@ void CTxMemPool::UpdateForDescendants(txiter updateIt, cacheMap &cachedDescendan\n             cachedDescendants[updateIt].insert(mapTx.iterator_to(descendant));\n             // Update ancestor state for each descendant\n             mapTx.modify(mapTx.iterator_to(descendant), update_ancestor_state(updateIt->GetTxSize(), updateIt->GetModifiedFee(), 1, updateIt->GetSigOpCost()));\n+\n+            if (descendant.GetCountWithAncestors() > ancestor_limit || descendant.GetSizeWithAncestors() > ancestor_size_limit) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r611285528",
      "id" : 611285528,
      "in_reply_to_id" : 610231049,
      "line" : 102,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTI4NTUyOA==",
      "original_commit_id" : "590fb3ef432a14ca8801c3e2f6d79e7707117e40",
      "original_line" : 102,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 17,
      "pull_request_review_id" : 633090599,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-12T02:00:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611285528",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/21464/commits/e8dafeb7004e4b0ed896ef08383bb22d9087a749\r\n\r\ngoing to dive into tests next to upgrade to tACK",
      "created_at" : "2021-04-12T06:58:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-817540843",
      "id" : 817540843,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxNzU0MDg0Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-12T06:58:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/817540843",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r613563758"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613563758"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should update the doxygen comments, something like\r\n\r\n```c++\r\n* @param[out]    set_should_remove          Populated with the txids of entries that exceed ancestor limits. It's the responsibility of the caller to removeRecursive them.\r\n```",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-14T20:25:54Z",
      "diff_hunk" : "@@ -667,7 +667,8 @@ class CTxMemPool\n      *  for).  Note: vHashesToUpdate should be the set of transactions from the\n      *  disconnected block that have been accepted back into the mempool.\n      */\n-    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n+    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate,\n+            uint64_t ancestor_size_limit, uint64_t ancestor_limit) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r613563758",
      "id" : 613563758,
      "line" : 671,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzU2Mzc1OA==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 671,
      "original_position" : 6,
      "original_start_line" : 669,
      "path" : "src/txmempool.h",
      "position" : 6,
      "pull_request_review_id" : 636049781,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : 669,
      "start_side" : "RIGHT",
      "updated_at" : "2021-04-14T21:48:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613563758",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r613565697"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613565697"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Small naming suggestion; \"count\" removes any ambiguity about which limit this is.\r\n```suggestion\r\n            const std::set<uint256> &setExclude, std::set<uint256>& set_should_remove, uint64_t ancestor_size_limit, uint64_t ancestor_count_limit) EXCLUSIVE_LOCKS_REQUIRED(cs);\r\n```",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-14T20:29:09Z",
      "diff_hunk" : "@@ -806,7 +807,7 @@ class CTxMemPool\n      */\n     void UpdateForDescendants(txiter updateIt,\n             cacheMap &cachedDescendants,\n-            const std::set<uint256> &setExclude) EXCLUSIVE_LOCKS_REQUIRED(cs);\n+            const std::set<uint256> &setExclude, std::set<uint256>& set_should_remove, uint64_t ancestor_size_limit, uint64_t ancestor_limit) EXCLUSIVE_LOCKS_REQUIRED(cs);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r613565697",
      "id" : 613565697,
      "line" : 810,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzU2NTY5Nw==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 810,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 15,
      "pull_request_review_id" : 636049781,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-14T21:48:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613565697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r613575751"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613575751"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Question: Would it be correct/better to also add children to `mapMemPoolDescendantsToUpdate` in the code block above?",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-14T20:46:47Z",
      "diff_hunk" : "@@ -146,7 +155,16 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n                 }\n             }\n         } // release epoch guard for UpdateForDescendants\n-        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r613575751",
      "id" : 613575751,
      "line" : 149,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzU3NTc1MQ==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 149,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 45,
      "pull_request_review_id" : 636049781,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-14T22:00:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613575751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r613700241"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613700241"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "will clean this up if I touch it.",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-15T01:42:47Z",
      "diff_hunk" : "@@ -806,7 +807,7 @@ class CTxMemPool\n      */\n     void UpdateForDescendants(txiter updateIt,\n             cacheMap &cachedDescendants,\n-            const std::set<uint256> &setExclude) EXCLUSIVE_LOCKS_REQUIRED(cs);\n+            const std::set<uint256> &setExclude, std::set<uint256>& set_should_remove, uint64_t ancestor_size_limit, uint64_t ancestor_limit) EXCLUSIVE_LOCKS_REQUIRED(cs);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r613700241",
      "id" : 613700241,
      "in_reply_to_id" : 613565697,
      "line" : 810,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzcwMDI0MQ==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 810,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 15,
      "pull_request_review_id" : 636205098,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-15T01:42:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613700241",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r613700281"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613700281"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "will clean it up if I touch.",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-15T01:42:56Z",
      "diff_hunk" : "@@ -667,7 +667,8 @@ class CTxMemPool\n      *  for).  Note: vHashesToUpdate should be the set of transactions from the\n      *  disconnected block that have been accepted back into the mempool.\n      */\n-    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n+    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate,\n+            uint64_t ancestor_size_limit, uint64_t ancestor_limit) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r613700281",
      "id" : 613700281,
      "in_reply_to_id" : 613563758,
      "line" : 671,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzcwMDI4MQ==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 671,
      "original_position" : 6,
      "original_start_line" : 669,
      "path" : "src/txmempool.h",
      "position" : 6,
      "pull_request_review_id" : 636205154,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : 669,
      "start_side" : "RIGHT",
      "updated_at" : "2021-04-15T01:42:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613700281",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r613700816"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613700816"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nah; mapMemPoolDescendantsToUpdate is a cache for UpdateForDescendants where each line in the cache is all the desc, not just children, so if you added it prematurely it would uncache incorrectly in UpdateForDescednants",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-15T01:44:48Z",
      "diff_hunk" : "@@ -146,7 +155,16 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n                 }\n             }\n         } // release epoch guard for UpdateForDescendants\n-        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r613700816",
      "id" : 613700816,
      "in_reply_to_id" : 613575751,
      "line" : 149,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzcwMDgxNg==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 149,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 45,
      "pull_request_review_id" : 636205801,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-15T01:44:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/613700816",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@JeremyRubin could you explain what this does in more layman's terms please? Is this pull anything to do with helping to fill the mempool in a way that reduces filling it with TXs that will get deleted later (due to mempool becoming full)?",
      "created_at" : "2021-04-16T11:06:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-821099740",
      "id" : 821099740,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMTA5OTc0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-16T11:06:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821099740",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=4",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "node_id" : "MDQ6VXNlcjE1MzAyODM=",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This is an optimization for the case where a reorg puts an ancestor transaction(package) back into the mempool, thus temporarily busting the transaction chain limits of the mempool.",
      "created_at" : "2021-04-16T11:09:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-821101091",
      "id" : 821101091,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMTEwMTA5MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-16T11:09:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821101091",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622022051"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622022051"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Definitely agree that changes to signature functions should be documented in the doxygen comments.",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-28T10:00:22Z",
      "diff_hunk" : "@@ -667,7 +667,8 @@ class CTxMemPool\n      *  for).  Note: vHashesToUpdate should be the set of transactions from the\n      *  disconnected block that have been accepted back into the mempool.\n      */\n-    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n+    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate,\n+            uint64_t ancestor_size_limit, uint64_t ancestor_limit) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622022051",
      "id" : 622022051,
      "in_reply_to_id" : 613563758,
      "line" : 671,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMjAyMjA1MQ==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 671,
      "original_position" : 6,
      "original_start_line" : 669,
      "path" : "src/txmempool.h",
      "position" : 6,
      "pull_request_review_id" : 646866817,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : 669,
      "start_side" : "RIGHT",
      "updated_at" : "2021-04-28T10:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622022051",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622149124"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622149124"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This function only ever gets called in one place, with ancestor_size_limit set to `-limitancestorsize` and ancestor_limit set to `-limitancestorcount`.\r\n\r\nWhat do you think about parameterizing the `CTxMemPool` constructor with those values? They don't change during runtime and it'd mean you'd be making no changes to validation.\r\n\r\nSee the last two commits in https://github.com/jnewbery/bitcoin/tree/pr21464.1.",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-28T12:53:35Z",
      "diff_hunk" : "@@ -667,7 +667,8 @@ class CTxMemPool\n      *  for).  Note: vHashesToUpdate should be the set of transactions from the\n      *  disconnected block that have been accepted back into the mempool.\n      */\n-    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n+    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate,\n+            uint64_t ancestor_size_limit, uint64_t ancestor_limit) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622149124",
      "id" : 622149124,
      "line" : 671,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMjE0OTEyNA==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 671,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 6,
      "pull_request_review_id" : 647023794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-28T16:46:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622149124",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622151298"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622151298"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This style seems like the worst of all worlds. Including linebreaks, but making the last line too long for side-by-side diff tools. How about:\r\n\r\n```c++\r\n    void UpdateForDescendants(txiter updateIt, cacheMap &cachedDescendants, const std::set<uint256> &setExclude,\r\n                              std::set<uint256>& set_should_remove, uint64_t ancestor_size_limit,\r\n                              uint64_t ancestor_limit) EXCLUSIVE_LOCKS_REQUIRED(cs);\r\n```",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-28T12:56:17Z",
      "diff_hunk" : "@@ -806,7 +807,7 @@ class CTxMemPool\n      */\n     void UpdateForDescendants(txiter updateIt,\n             cacheMap &cachedDescendants,\n-            const std::set<uint256> &setExclude) EXCLUSIVE_LOCKS_REQUIRED(cs);\n+            const std::set<uint256> &setExclude, std::set<uint256>& set_should_remove, uint64_t ancestor_size_limit, uint64_t ancestor_limit) EXCLUSIVE_LOCKS_REQUIRED(cs);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622151298",
      "id" : 622151298,
      "line" : 810,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMjE1MTI5OA==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 810,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 15,
      "pull_request_review_id" : 647023794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-28T16:46:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622151298",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622223859"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622223859"
         }
      },
      "author_association" : "MEMBER",
      "body" : "current style is to not include the type in the variable name. Consider:\r\n\r\n```suggestion\r\n    std::set<uint256> txs_to_remove;\r\n```",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-28T14:16:13Z",
      "diff_hunk" : "@@ -117,6 +124,8 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n     // accounted for in the state of their ancestors)\n     std::set<uint256> setAlreadyIncluded(vHashesToUpdate.begin(), vHashesToUpdate.end());\n \n+    std::set<uint256> set_should_remove;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622223859",
      "id" : 622223859,
      "line" : 127,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMjIyMzg1OQ==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 127,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 36,
      "pull_request_review_id" : 647023794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-28T16:46:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622223859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622233487"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622233487"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Consider using c++17 if statement initializer:\r\n\r\n```suggestion\r\n        if (const auto txiter_opt = GetIter(txid)) {\r\n            removeRecursive((*txiter_opt)->GetTx(), MemPoolRemovalReason::SIZELIMIT);\r\n```\r\n\r\nof if you want to be a bit more explicit:\r\n\r\n```suggestion\r\n        if (const auto txiter_opt = GetIter(txid); txiter_opt) {\r\n            removeRecursive((*txiter_opt)->GetTx(), MemPoolRemovalReason::SIZELIMIT);\r\n\r\n```\r\n\r\nalso, perhaps remove `opt` from the variable name - project style is to not include types in variable names.",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-28T14:26:04Z",
      "diff_hunk" : "@@ -146,7 +155,16 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n                 }\n             }\n         } // release epoch guard for UpdateForDescendants\n-        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded);\n+        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded, set_should_remove, ancestor_size_limit, ancestor_limit);\n+    }\n+\n+    for (auto& txid : set_should_remove) {\n+        // This txid may have been removed already in a prior call to removeRecursive.\n+        // Therefore we ensure it is not yet removed already.\n+        const std::optional<txiter> txiter_opt = GetIter(txid);\n+        if (txiter_opt) {\n+            removeRecursive((*txiter_opt)->GetTx(), MemPoolRemovalReason::SIZELIMIT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622233487",
      "id" : 622233487,
      "line" : 166,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMjIzMzQ4Nw==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 166,
      "original_position" : 54,
      "original_start_line" : 164,
      "path" : "src/txmempool.cpp",
      "position" : 54,
      "pull_request_review_id" : 647023794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : 164,
      "start_side" : "RIGHT",
      "updated_at" : "2021-04-28T16:46:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622233487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622237291"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622237291"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n            // Don't directly remove the transaction here -- doing so would invalidate iterators in\r\n```",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-28T14:29:51Z",
      "diff_hunk" : "@@ -95,6 +96,12 @@ void CTxMemPool::UpdateForDescendants(txiter updateIt, cacheMap &cachedDescendan\n             cachedDescendants[updateIt].insert(mapTx.iterator_to(descendant));\n             // Update ancestor state for each descendant\n             mapTx.modify(mapTx.iterator_to(descendant), update_ancestor_state(updateIt->GetTxSize(), updateIt->GetModifiedFee(), 1, updateIt->GetSigOpCost()));\n+            // don't directly remove the transaction here -- doing so would invalidate iterators in",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622237291",
      "id" : 622237291,
      "line" : 99,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMjIzNzI5MQ==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 99,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 14,
      "pull_request_review_id" : 647023794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-28T16:46:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622237291",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622237977"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622237977"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n            // cachedDescendants. Mark it for removal by inserting into set_should_remove.\r\n```",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-28T14:30:29Z",
      "diff_hunk" : "@@ -95,6 +96,12 @@ void CTxMemPool::UpdateForDescendants(txiter updateIt, cacheMap &cachedDescendan\n             cachedDescendants[updateIt].insert(mapTx.iterator_to(descendant));\n             // Update ancestor state for each descendant\n             mapTx.modify(mapTx.iterator_to(descendant), update_ancestor_state(updateIt->GetTxSize(), updateIt->GetModifiedFee(), 1, updateIt->GetSigOpCost()));\n+            // don't directly remove the transaction here -- doing so would invalidate iterators in\n+            // cachedDescendants. Mark it for removal by inserting into set_should_remove here as an\n+            // optimization so we don't have to scan for its removal later.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622237977",
      "id" : 622237977,
      "line" : 101,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMjIzNzk3Nw==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 101,
      "original_position" : 16,
      "original_start_line" : 100,
      "path" : "src/txmempool.cpp",
      "position" : 16,
      "pull_request_review_id" : 647023794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : 100,
      "start_side" : "RIGHT",
      "updated_at" : "2021-04-28T16:46:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622237977",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622238142"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622238142"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        std::set<uint256>& set_should_remove, uint64_t ancestor_size_limit, uint64_t ancestor_limit)\r\n```",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-28T14:30:37Z",
      "diff_hunk" : "@@ -58,7 +58,8 @@ size_t CTxMemPoolEntry::GetTxSize() const\n // Update the given tx for any in-mempool descendants.\n // Assumes that CTxMemPool::m_children is correct for the given tx and all\n // descendants.\n-void CTxMemPool::UpdateForDescendants(txiter updateIt, cacheMap &cachedDescendants, const std::set<uint256> &setExclude)\n+void CTxMemPool::UpdateForDescendants(txiter updateIt, cacheMap &cachedDescendants, const std::set<uint256> &setExclude,\n+        std::set<uint256> &set_should_remove, uint64_t ancestor_size_limit, uint64_t ancestor_limit)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622238142",
      "id" : 622238142,
      "line" : 62,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMjIzODE0Mg==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 62,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 6,
      "pull_request_review_id" : 647023794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-28T16:46:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622238142",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622464539"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622464539"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "mmmm maybe. In general in the mempool I think the functions accept parameters with limits as opposed to being static in the mempool, and I think it would be confusing to be inconsistent. I like that passing in limits makes it explicit what the code will do, and forces any caller to consider what limit they should use.\r\n\r\nWhere these limits get enforced later they are set by reading configuration parameter at the time of transaction acceptance rather than on startup, so altering this behavior could lead to an inconsistency down the line if someone at runtime increased the setting.",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-28T19:11:07Z",
      "diff_hunk" : "@@ -667,7 +667,8 @@ class CTxMemPool\n      *  for).  Note: vHashesToUpdate should be the set of transactions from the\n      *  disconnected block that have been accepted back into the mempool.\n      */\n-    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n+    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate,\n+            uint64_t ancestor_size_limit, uint64_t ancestor_limit) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622464539",
      "id" : 622464539,
      "in_reply_to_id" : 622149124,
      "line" : 671,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMjQ2NDUzOQ==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 671,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 6,
      "pull_request_review_id" : 647426146,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-28T19:11:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622464539",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622465499"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622465499"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Saying as this function doesn't have doxygen comments is this a request to doxygen comment it?\r\n\r\nIf I set default values for these params would that be better so as not to disrupt the fsig?",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-28T19:12:34Z",
      "diff_hunk" : "@@ -667,7 +667,8 @@ class CTxMemPool\n      *  for).  Note: vHashesToUpdate should be the set of transactions from the\n      *  disconnected block that have been accepted back into the mempool.\n      */\n-    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n+    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate,\n+            uint64_t ancestor_size_limit, uint64_t ancestor_limit) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622465499",
      "id" : 622465499,
      "in_reply_to_id" : 613563758,
      "line" : 671,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMjQ2NTQ5OQ==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 671,
      "original_position" : 6,
      "original_start_line" : 669,
      "path" : "src/txmempool.h",
      "position" : 6,
      "pull_request_review_id" : 647427272,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : 669,
      "start_side" : "RIGHT",
      "updated_at" : "2021-04-28T19:12:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622465499",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622788810"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622788810"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> In general in the mempool I think the functions accept parameters with limits\r\n\r\nI think that's more a historical artifact that until #19556, the mempool was a global that was constructed before `main()`. If we were building this from scratch, I think we'd make any mempool parameters that can't be changed at runtime const and set in the ctor, rather than using globals.\r\n\r\n> lead to an inconsistency down the line if someone at runtime increased the setting.\r\n\r\nChanging these limits during runtime seems like a terrible idea! There would be all kinds of edge-cases where it'd be difficult to ensure that invariants aren't being invalidated.\r\n\r\nAnyway, your choice. This is just a suggestion and could be done after this PR. Whenever I see function arguments where the same value is always passed (eg `UpdateTransactionsFromBlock()` in this PR), then it suggests to me that the interface can be simplified.",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-29T07:12:36Z",
      "diff_hunk" : "@@ -667,7 +667,8 @@ class CTxMemPool\n      *  for).  Note: vHashesToUpdate should be the set of transactions from the\n      *  disconnected block that have been accepted back into the mempool.\n      */\n-    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n+    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate,\n+            uint64_t ancestor_size_limit, uint64_t ancestor_limit) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622788810",
      "id" : 622788810,
      "in_reply_to_id" : 622149124,
      "line" : 671,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMjc4ODgxMA==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 671,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 6,
      "pull_request_review_id" : 647875983,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T07:12:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622788810",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622791296"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622791296"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Changing these limits during runtime seems like a terrible idea!\r\n\r\nAgree. Though, the tx_pool fuzz targets do this and they haven't (yet) crashed :grimacing: ",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-04-29T07:16:49Z",
      "diff_hunk" : "@@ -667,7 +667,8 @@ class CTxMemPool\n      *  for).  Note: vHashesToUpdate should be the set of transactions from the\n      *  disconnected block that have been accepted back into the mempool.\n      */\n-    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\n+    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate,\n+            uint64_t ancestor_size_limit, uint64_t ancestor_limit) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r622791296",
      "id" : 622791296,
      "in_reply_to_id" : 622149124,
      "line" : 671,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMjc5MTI5Ng==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 671,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 6,
      "pull_request_review_id" : 647879109,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-29T07:16:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/622791296",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--4a62be1de6b64f3ed646cdc7932c8cf5-->\n @hebasto @sipa have been requested to review this pull request as specified in the REVIEWERS file.",
      "created_at" : "2021-05-03T09:33:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-831142326",
      "id" : 831142326,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMTE0MjMyNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-03T09:33:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/831142326",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r641895223"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/641895223"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Even more speaking `descendants_to_remove`",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-05-29T05:53:48Z",
      "diff_hunk" : "@@ -117,6 +124,8 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n     // accounted for in the state of their ancestors)\n     std::set<uint256> setAlreadyIncluded(vHashesToUpdate.begin(), vHashesToUpdate.end());\n \n+    std::set<uint256> set_should_remove;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r641895223",
      "id" : 641895223,
      "in_reply_to_id" : 622223859,
      "line" : 127,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MTg5NTIyMw==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 127,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 36,
      "pull_request_review_id" : 671717995,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-29T06:05:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/641895223",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r641895417"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/641895417"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You could even introduce a new `MemPoolRemovalReason::ANCESTORLIMIT`. This check is different than the one applied by `TrimToSize` on absolute mempool size.\r\n\r\nIt would be a clearer message for listeners of validation interface.",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-05-29T05:55:55Z",
      "diff_hunk" : "@@ -146,7 +155,16 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n                 }\n             }\n         } // release epoch guard for UpdateForDescendants\n-        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded);\n+        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded, set_should_remove, ancestor_size_limit, ancestor_limit);\n+    }\n+\n+    for (auto& txid : set_should_remove) {\n+        // This txid may have been removed already in a prior call to removeRecursive.\n+        // Therefore we ensure it is not yet removed already.\n+        const std::optional<txiter> txiter_opt = GetIter(txid);\n+        if (txiter_opt) {\n+            removeRecursive((*txiter_opt)->GetTx(), MemPoolRemovalReason::SIZELIMIT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r641895417",
      "id" : 641895417,
      "line" : 166,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MTg5NTQxNw==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 166,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 54,
      "pull_request_review_id" : 671717995,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-29T06:05:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/641895417",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r641895672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/641895672"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What do you think about hardcoded ancestor_limit/ancestor_limit_size, instead of relying on node operators settings ?\r\n\r\nAs it's a performance optimization it might be easier to get predictable improvements with invariants.",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-05-29T05:59:37Z",
      "diff_hunk" : "@@ -414,7 +414,9 @@ static void UpdateMempoolForReorg(CChainState& active_chainstate, CTxMemPool& me\n     // previously-confirmed transactions back to the mempool.\n     // UpdateTransactionsFromBlock finds descendants of any transactions in\n     // the disconnectpool that were added back and cleans up the mempool state.\n-    mempool.UpdateTransactionsFromBlock(vHashUpdate);\n+    uint64_t ancestor_limit = gArgs.GetArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT);\n+    uint64_t ancestor_limit_size = gArgs.GetArg(\"-limitancestorsize\", DEFAULT_ANCESTOR_SIZE_LIMIT) * 1000;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r641895672",
      "id" : 641895672,
      "line" : 418,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MTg5NTY3Mg==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 418,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 6,
      "pull_request_review_id" : 671717995,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-29T06:05:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/641895672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r647504001"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/647504001"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think that would lead to miners to custom compiling to configure rather than running releases -- maybe we need a survey of what settings mining node operators are using?",
      "commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "created_at" : "2021-06-08T14:34:26Z",
      "diff_hunk" : "@@ -414,7 +414,9 @@ static void UpdateMempoolForReorg(CChainState& active_chainstate, CTxMemPool& me\n     // previously-confirmed transactions back to the mempool.\n     // UpdateTransactionsFromBlock finds descendants of any transactions in\n     // the disconnectpool that were added back and cleans up the mempool state.\n-    mempool.UpdateTransactionsFromBlock(vHashUpdate);\n+    uint64_t ancestor_limit = gArgs.GetArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT);\n+    uint64_t ancestor_limit_size = gArgs.GetArg(\"-limitancestorsize\", DEFAULT_ANCESTOR_SIZE_LIMIT) * 1000;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r647504001",
      "id" : 647504001,
      "in_reply_to_id" : 641895672,
      "line" : 418,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NzUwNDAwMQ==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 418,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 6,
      "pull_request_review_id" : 678604304,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-06-08T14:34:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/647504001",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#21436](https://github.com/bitcoin/bitcoin/pull/21436) (doc: Fix several references in txmempool comments by kiminuo)\n* [#17786](https://github.com/bitcoin/bitcoin/pull/17786) (refactor: Nuke policy/fees->mempool circular dependencies by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-07-10T14:49:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-877649701",
      "id" : 877649701,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3NzY0OTcwMQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877649701/reactions"
      },
      "updated_at" : "2022-01-21T02:04:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877649701",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed style/doc stuff in a separate commit to preserve ACKs (squashable)\r\n\r\nI also introcuded a new removal reason in a separate commit, this should not be squashed as it is ortho to the main change.\r\n\r\n@laanwj anything else you'd like to see here?",
      "created_at" : "2021-07-10T21:09:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-877704718",
      "id" : 877704718,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3NzcwNDcxOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-10T21:09:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877704718",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r667385626"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/667385626"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "f0d8236a0a959f92b42b5ff22a106098ce272b91",
      "created_at" : "2021-07-10T21:09:30Z",
      "diff_hunk" : "@@ -146,7 +155,16 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n                 }\n             }\n         } // release epoch guard for UpdateForDescendants\n-        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded);\n+        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded, set_should_remove, ancestor_size_limit, ancestor_limit);\n+    }\n+\n+    for (auto& txid : set_should_remove) {\n+        // This txid may have been removed already in a prior call to removeRecursive.\n+        // Therefore we ensure it is not yet removed already.\n+        const std::optional<txiter> txiter_opt = GetIter(txid);\n+        if (txiter_opt) {\n+            removeRecursive((*txiter_opt)->GetTx(), MemPoolRemovalReason::SIZELIMIT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r667385626",
      "id" : 667385626,
      "in_reply_to_id" : 641895417,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NzM4NTYyNg==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 166,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 703529830,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-10T21:09:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/667385626",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r667858736"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/667858736"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think this change is necessary for this PR. Unless there's a validation interface client that uses the new `MemPoolRemovalReason::ANCESTORLIMIT`, then it's just broadening that interface for no benefit. If we find that a client needs to use this in future, it'll be easy to add it at that point.",
      "commit_id" : "f0d8236a0a959f92b42b5ff22a106098ce272b91",
      "created_at" : "2021-07-12T11:44:55Z",
      "diff_hunk" : "@@ -146,7 +155,16 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n                 }\n             }\n         } // release epoch guard for UpdateForDescendants\n-        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded);\n+        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded, set_should_remove, ancestor_size_limit, ancestor_limit);\n+    }\n+\n+    for (auto& txid : set_should_remove) {\n+        // This txid may have been removed already in a prior call to removeRecursive.\n+        // Therefore we ensure it is not yet removed already.\n+        const std::optional<txiter> txiter_opt = GetIter(txid);\n+        if (txiter_opt) {\n+            removeRecursive((*txiter_opt)->GetTx(), MemPoolRemovalReason::SIZELIMIT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r667858736",
      "id" : 667858736,
      "in_reply_to_id" : 641895417,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Nzg1ODczNg==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 166,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 704016126,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-12T11:44:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/667858736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Addressed style/doc stuff in a separate commit to preserve ACKs (squashable)\r\n\r\nI don't understand this. The head commit is what needs ACKs, and that's changed now that there are new commits. I'm very happy to re-review once you've squashed commits and rebased on master.",
      "created_at" : "2021-07-12T11:47:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-878212035",
      "id" : 878212035,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3ODIxMjAzNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-12T11:47:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/878212035",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\n This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-07-15T11:51:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-880631271",
      "id" : 880631271,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg4MDYzMTI3MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-15T11:51:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/880631271",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r670856144"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670856144"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I will drop this commit and open a new PR with it for @ariard.",
      "commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "created_at" : "2021-07-15T22:56:09Z",
      "diff_hunk" : "@@ -146,7 +155,16 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n                 }\n             }\n         } // release epoch guard for UpdateForDescendants\n-        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded);\n+        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded, set_should_remove, ancestor_size_limit, ancestor_limit);\n+    }\n+\n+    for (auto& txid : set_should_remove) {\n+        // This txid may have been removed already in a prior call to removeRecursive.\n+        // Therefore we ensure it is not yet removed already.\n+        const std::optional<txiter> txiter_opt = GetIter(txid);\n+        if (txiter_opt) {\n+            removeRecursive((*txiter_opt)->GetTx(), MemPoolRemovalReason::SIZELIMIT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r670856144",
      "id" : 670856144,
      "in_reply_to_id" : 641895417,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDg1NjE0NA==",
      "original_commit_id" : "e8dafeb7004e4b0ed896ef08383bb22d9087a749",
      "original_line" : 166,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 707881561,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-15T22:56:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670856144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ok, made changes requested by @jnewbery and squashed. Will open a followup PR with the validation interface after as requested by @ariard. Thanks.",
      "created_at" : "2021-07-15T23:02:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-881063252",
      "id" : 881063252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg4MTA2MzI1Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-15T23:02:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/881063252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r671306152"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671306152"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Limits are inclusive and apply to all entries\r\n\r\n```suggestion\r\n     * @param[in] ancestor_size_limit      The maximum allowed size in virtual bytes of an entry and its ancestors\r\n     * @param[in] ancestor_count_limit     The maximum allowed number of transactions including the entry and its ancestors.\r\n\r\n```",
      "commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "created_at" : "2021-07-16T14:37:29Z",
      "diff_hunk" : "@@ -794,19 +802,28 @@ class CTxMemPool\n     /** UpdateForDescendants is used by UpdateTransactionsFromBlock to update\n      *  the descendants for a single transaction that has been added to the\n      *  mempool but may have child transactions in the mempool, eg during a\n-     *  chain reorg.  setExclude is the set of descendant transactions in the\n-     *  mempool that must not be accounted for (because any descendants in\n-     *  setExclude were added to the mempool after the transaction being\n-     *  updated and hence their state is already reflected in the parent\n-     *  state).\n+     *  chain reorg.\n      *\n-     *  cachedDescendants will be updated with the descendants of the transaction\n-     *  being updated, so that future invocations don't need to walk the\n-     *  same transaction again, if encountered in another transaction chain.\n+     * @param[in] updateIt the entry to update for it's descendants\n+     * @param[in] cachedDescendants a cache where each line corresponds to all\n+     *     descendants. It will be updated with the descendants of the transaction\n+     *     being updated, so that future invocations don't need to walk the same\n+     *     transaction again, if encountered in another transaction chain.\n+     * @param[in] setExclude the set of descendant transactions in the mempool\n+     *     that must not be accounted for (because any descendants in setExclude\n+     *     were added to the mempool after the transaction being updated and hence\n+     *     their state is already reflected in the parent state).\n+     * @param[out] descendants_to_remove Populated with the txids of entries that\n+     *     exceed ancestor limits. It's the responsibility of the caller to\n+     *     removeRecursive them.\n+     * @param[in] ancestor_size_limit the max number of ancestral bytes allowed\n+     *     for any descendant\n+     * @param[in] ancestor_count_limit the max number of ancestor transactions\n+     *     allowed for any descendant",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r671306152",
      "id" : 671306152,
      "line" : 822,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTMwNjE1Mg==",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 822,
      "original_position" : 51,
      "original_start_line" : 819,
      "path" : "src/txmempool.h",
      "position" : 51,
      "pull_request_review_id" : 708453240,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : 819,
      "start_side" : "RIGHT",
      "updated_at" : "2021-07-16T14:42:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671306152",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r676474898"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/676474898"
         }
      },
      "author_association" : "MEMBER",
      "body" : "(also much prefer this formatting style with a visual gap between the parameter name and the documentation).",
      "commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "created_at" : "2021-07-26T10:17:51Z",
      "diff_hunk" : "@@ -794,19 +802,28 @@ class CTxMemPool\n     /** UpdateForDescendants is used by UpdateTransactionsFromBlock to update\n      *  the descendants for a single transaction that has been added to the\n      *  mempool but may have child transactions in the mempool, eg during a\n-     *  chain reorg.  setExclude is the set of descendant transactions in the\n-     *  mempool that must not be accounted for (because any descendants in\n-     *  setExclude were added to the mempool after the transaction being\n-     *  updated and hence their state is already reflected in the parent\n-     *  state).\n+     *  chain reorg.\n      *\n-     *  cachedDescendants will be updated with the descendants of the transaction\n-     *  being updated, so that future invocations don't need to walk the\n-     *  same transaction again, if encountered in another transaction chain.\n+     * @param[in] updateIt the entry to update for it's descendants\n+     * @param[in] cachedDescendants a cache where each line corresponds to all\n+     *     descendants. It will be updated with the descendants of the transaction\n+     *     being updated, so that future invocations don't need to walk the same\n+     *     transaction again, if encountered in another transaction chain.\n+     * @param[in] setExclude the set of descendant transactions in the mempool\n+     *     that must not be accounted for (because any descendants in setExclude\n+     *     were added to the mempool after the transaction being updated and hence\n+     *     their state is already reflected in the parent state).\n+     * @param[out] descendants_to_remove Populated with the txids of entries that\n+     *     exceed ancestor limits. It's the responsibility of the caller to\n+     *     removeRecursive them.\n+     * @param[in] ancestor_size_limit the max number of ancestral bytes allowed\n+     *     for any descendant\n+     * @param[in] ancestor_count_limit the max number of ancestor transactions\n+     *     allowed for any descendant",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r676474898",
      "id" : 676474898,
      "in_reply_to_id" : 671306152,
      "line" : 822,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NjQ3NDg5OA==",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 822,
      "original_position" : 51,
      "original_start_line" : 819,
      "path" : "src/txmempool.h",
      "position" : 51,
      "pull_request_review_id" : 714677390,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : 819,
      "start_side" : "RIGHT",
      "updated_at" : "2021-07-26T11:31:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/676474898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r676475637"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/676475637"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"should be\" implies that this function could be called with a different set of transactions. In fact, `vHashesToUpdate` is always the set of transactions from the disconnected block that have been added back to the mempool:\r\n\r\n```suggestion\r\n     * @param[in] vHashesToUpdate   the set of txids from\r\n```",
      "commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "created_at" : "2021-07-26T10:19:01Z",
      "diff_hunk" : "@@ -664,10 +664,18 @@ class CTxMemPool\n      *  UpdateTransactionsFromBlock() will find child transactions and update the\n      *  descendant state for each transaction in vHashesToUpdate (excluding any\n      *  child transactions present in vHashesToUpdate, which are already accounted\n-     *  for).  Note: vHashesToUpdate should be the set of transactions from the\n-     *  disconnected block that have been accepted back into the mempool.\n+     *  for).\n+     *\n+     * @param[in] vHashesToUpdate should be the set of transactions IDs from",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r676475637",
      "id" : 676475637,
      "line" : 669,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NjQ3NTYzNw==",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 669,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 8,
      "pull_request_review_id" : 714677390,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-26T11:31:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/676475637",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r676476269"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/676476269"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n     * @param[in] updateIt the entry to update for its descendants\r\n```",
      "commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "created_at" : "2021-07-26T10:20:01Z",
      "diff_hunk" : "@@ -794,19 +802,28 @@ class CTxMemPool\n     /** UpdateForDescendants is used by UpdateTransactionsFromBlock to update\n      *  the descendants for a single transaction that has been added to the\n      *  mempool but may have child transactions in the mempool, eg during a\n-     *  chain reorg.  setExclude is the set of descendant transactions in the\n-     *  mempool that must not be accounted for (because any descendants in\n-     *  setExclude were added to the mempool after the transaction being\n-     *  updated and hence their state is already reflected in the parent\n-     *  state).\n+     *  chain reorg.\n      *\n-     *  cachedDescendants will be updated with the descendants of the transaction\n-     *  being updated, so that future invocations don't need to walk the\n-     *  same transaction again, if encountered in another transaction chain.\n+     * @param[in] updateIt the entry to update for it's descendants",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r676476269",
      "id" : 676476269,
      "line" : 807,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NjQ3NjI2OQ==",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 807,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 36,
      "pull_request_review_id" : 714677390,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-26T11:31:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/676476269",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r676478069"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/676478069"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Perhaps remove the comment above this function definition (it's redundant with the doxygen comment above the declaration)",
      "commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "created_at" : "2021-07-26T10:22:49Z",
      "diff_hunk" : "@@ -106,7 +114,7 @@ void CTxMemPool::UpdateForDescendants(txiter updateIt, cacheMap &cachedDescendan\n // for each entry, look for descendants that are outside vHashesToUpdate, and\n // add fee/size information for such descendants to the parent.\n // for each such descendant, also update the ancestor state to include the parent.\n-void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashesToUpdate)\n+void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashesToUpdate, uint64_t ancestor_size_limit, uint64_t ancestor_count_limit)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r676478069",
      "id" : 676478069,
      "line" : 117,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NjQ3ODA2OQ==",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 117,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 29,
      "pull_request_review_id" : 714677390,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-26T11:31:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/676478069",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r676479733"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/676479733"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n     * @param[in/out] cachedDescendants a cache where each line corresponds to all\r\n```",
      "commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "created_at" : "2021-07-26T10:25:19Z",
      "diff_hunk" : "@@ -794,19 +802,28 @@ class CTxMemPool\n     /** UpdateForDescendants is used by UpdateTransactionsFromBlock to update\n      *  the descendants for a single transaction that has been added to the\n      *  mempool but may have child transactions in the mempool, eg during a\n-     *  chain reorg.  setExclude is the set of descendant transactions in the\n-     *  mempool that must not be accounted for (because any descendants in\n-     *  setExclude were added to the mempool after the transaction being\n-     *  updated and hence their state is already reflected in the parent\n-     *  state).\n+     *  chain reorg.\n      *\n-     *  cachedDescendants will be updated with the descendants of the transaction\n-     *  being updated, so that future invocations don't need to walk the\n-     *  same transaction again, if encountered in another transaction chain.\n+     * @param[in] updateIt the entry to update for it's descendants\n+     * @param[in] cachedDescendants a cache where each line corresponds to all",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r676479733",
      "id" : 676479733,
      "line" : 808,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NjQ3OTczMw==",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 808,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 37,
      "pull_request_review_id" : 714677390,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-26T11:31:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/676479733",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r677825052"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/677825052"
         }
      },
      "author_association" : "NONE",
      "body" : "Is this change necessary? I'm currently updating the functional test for MiniWallet compatibility",
      "commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "created_at" : "2021-07-27T21:50:26Z",
      "diff_hunk" : "@@ -17,7 +17,7 @@\n class MempoolUpdateFromBlockTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 1\n-        self.extra_args = [['-limitdescendantsize=1000', '-limitancestorsize=1000']]\n+        self.extra_args = [['-limitdescendantsize=1000', '-limitancestorsize=1000', '-limitancestorcount=100']]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r677825052",
      "id" : 677825052,
      "line" : 20,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NzgyNTA1Mg==",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 20,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/mempool_updatefromblock.py",
      "position" : 5,
      "pull_request_review_id" : 716409057,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-27T21:57:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/677825052",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13033037?v=4",
         "events_url" : "https://api.github.com/users/reemuru/events{/privacy}",
         "followers_url" : "https://api.github.com/users/reemuru/followers",
         "following_url" : "https://api.github.com/users/reemuru/following{/other_user}",
         "gists_url" : "https://api.github.com/users/reemuru/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/reemuru",
         "id" : 13033037,
         "login" : "reemuru",
         "node_id" : "MDQ6VXNlcjEzMDMzMDM3",
         "organizations_url" : "https://api.github.com/users/reemuru/orgs",
         "received_events_url" : "https://api.github.com/users/reemuru/received_events",
         "repos_url" : "https://api.github.com/users/reemuru/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/reemuru/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/reemuru/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/reemuru"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r680418371"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/680418371"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "yes",
      "commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "created_at" : "2021-07-31T22:41:26Z",
      "diff_hunk" : "@@ -17,7 +17,7 @@\n class MempoolUpdateFromBlockTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 1\n-        self.extra_args = [['-limitdescendantsize=1000', '-limitancestorsize=1000']]\n+        self.extra_args = [['-limitdescendantsize=1000', '-limitancestorsize=1000', '-limitancestorcount=100']]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r680418371",
      "id" : 680418371,
      "in_reply_to_id" : 677825052,
      "line" : 20,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MDQxODM3MQ==",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 20,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/mempool_updatefromblock.py",
      "position" : 5,
      "pull_request_review_id" : 719607659,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-31T22:41:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/680418371",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r690304785"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/690304785"
         }
      },
      "author_association" : "NONE",
      "body" : "Maybe worth renaming `ancestor_limit` into `ancestor_limit_count`, to be more symmetrical with `ancestor_limit_size`/`limitancestorsize` pair?\r\n\r\nAlso, `UpdateTransactionsFromBlock` and `UpdateForDescendants` has these parameters phrased a bit differently with `ancestor_size_limit` and `ancestor_count_limit` (\"limit\" goes last). Maybe worth unifying all these new names?",
      "commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "created_at" : "2021-08-17T12:04:56Z",
      "diff_hunk" : "@@ -365,7 +365,9 @@ void CChainState::MaybeUpdateMempoolForReorg(\n     // previously-confirmed transactions back to the mempool.\n     // UpdateTransactionsFromBlock finds descendants of any transactions in\n     // the disconnectpool that were added back and cleans up the mempool state.\n-    m_mempool->UpdateTransactionsFromBlock(vHashUpdate);\n+    uint64_t ancestor_limit = gArgs.GetArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r690304785",
      "id" : 690304785,
      "line" : 368,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MDMwNDc4NQ==",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 368,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 5,
      "pull_request_review_id" : 731677906,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-17T12:15:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/690304785",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/292191?v=4",
         "events_url" : "https://api.github.com/users/Talkless/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Talkless/followers",
         "following_url" : "https://api.github.com/users/Talkless/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Talkless/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Talkless",
         "id" : 292191,
         "login" : "Talkless",
         "node_id" : "MDQ6VXNlcjI5MjE5MQ==",
         "organizations_url" : "https://api.github.com/users/Talkless/orgs",
         "received_events_url" : "https://api.github.com/users/Talkless/received_events",
         "repos_url" : "https://api.github.com/users/Talkless/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Talkless/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Talkless/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Talkless"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r690305089"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/690305089"
         }
      },
      "author_association" : "NONE",
      "body" : "Also, `ancestor_limit` and `ancestor_limit_size` could be `const`.",
      "commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "created_at" : "2021-08-17T12:05:24Z",
      "diff_hunk" : "@@ -365,7 +365,9 @@ void CChainState::MaybeUpdateMempoolForReorg(\n     // previously-confirmed transactions back to the mempool.\n     // UpdateTransactionsFromBlock finds descendants of any transactions in\n     // the disconnectpool that were added back and cleans up the mempool state.\n-    m_mempool->UpdateTransactionsFromBlock(vHashUpdate);\n+    uint64_t ancestor_limit = gArgs.GetArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r690305089",
      "id" : 690305089,
      "in_reply_to_id" : 690304785,
      "line" : 368,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MDMwNTA4OQ==",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 368,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 5,
      "pull_request_review_id" : 731677906,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-17T12:15:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/690305089",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/292191?v=4",
         "events_url" : "https://api.github.com/users/Talkless/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Talkless/followers",
         "following_url" : "https://api.github.com/users/Talkless/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Talkless/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Talkless",
         "id" : 292191,
         "login" : "Talkless",
         "node_id" : "MDQ6VXNlcjI5MjE5MQ==",
         "organizations_url" : "https://api.github.com/users/Talkless/orgs",
         "received_events_url" : "https://api.github.com/users/Talkless/received_events",
         "repos_url" : "https://api.github.com/users/Talkless/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Talkless/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Talkless/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Talkless"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r690305816"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/690305816"
         }
      },
      "author_association" : "NONE",
      "body" : "could be `const auto& txid`.",
      "commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "created_at" : "2021-08-17T12:06:35Z",
      "diff_hunk" : "@@ -147,7 +157,15 @@ void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashes\n                 }\n             }\n         } // release epoch guard for UpdateForDescendants\n-        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded);\n+        UpdateForDescendants(it, mapMemPoolDescendantsToUpdate, setAlreadyIncluded, descendants_to_remove, ancestor_size_limit, ancestor_count_limit);\n+    }\n+\n+    for (auto& txid : descendants_to_remove) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r690305816",
      "id" : 690305816,
      "line" : 163,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MDMwNTgxNg==",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 163,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 50,
      "pull_request_review_id" : 731677906,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-17T12:15:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/690305816",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/292191?v=4",
         "events_url" : "https://api.github.com/users/Talkless/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Talkless/followers",
         "following_url" : "https://api.github.com/users/Talkless/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Talkless/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Talkless",
         "id" : 292191,
         "login" : "Talkless",
         "node_id" : "MDQ6VXNlcjI5MjE5MQ==",
         "organizations_url" : "https://api.github.com/users/Talkless/orgs",
         "received_events_url" : "https://api.github.com/users/Talkless/received_events",
         "repos_url" : "https://api.github.com/users/Talkless/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Talkless/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Talkless/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Talkless"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r706874757"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706874757"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fwiw if you use a text editor which understands doxygen you get something which looks fine without a visual gap.\r\n<img width=\"588\" alt=\"image\" src=\"https://user-images.githubusercontent.com/886523/132998517-30b6dee2-137e-46c6-8a26-307a5cdea93c.png\">\r\n",
      "commit_id" : "81efedb60e1e88f806adb010c926b4edd04393b8",
      "created_at" : "2021-09-12T18:21:54Z",
      "diff_hunk" : "@@ -794,19 +802,28 @@ class CTxMemPool\n     /** UpdateForDescendants is used by UpdateTransactionsFromBlock to update\n      *  the descendants for a single transaction that has been added to the\n      *  mempool but may have child transactions in the mempool, eg during a\n-     *  chain reorg.  setExclude is the set of descendant transactions in the\n-     *  mempool that must not be accounted for (because any descendants in\n-     *  setExclude were added to the mempool after the transaction being\n-     *  updated and hence their state is already reflected in the parent\n-     *  state).\n+     *  chain reorg.\n      *\n-     *  cachedDescendants will be updated with the descendants of the transaction\n-     *  being updated, so that future invocations don't need to walk the\n-     *  same transaction again, if encountered in another transaction chain.\n+     * @param[in] updateIt the entry to update for it's descendants\n+     * @param[in] cachedDescendants a cache where each line corresponds to all\n+     *     descendants. It will be updated with the descendants of the transaction\n+     *     being updated, so that future invocations don't need to walk the same\n+     *     transaction again, if encountered in another transaction chain.\n+     * @param[in] setExclude the set of descendant transactions in the mempool\n+     *     that must not be accounted for (because any descendants in setExclude\n+     *     were added to the mempool after the transaction being updated and hence\n+     *     their state is already reflected in the parent state).\n+     * @param[out] descendants_to_remove Populated with the txids of entries that\n+     *     exceed ancestor limits. It's the responsibility of the caller to\n+     *     removeRecursive them.\n+     * @param[in] ancestor_size_limit the max number of ancestral bytes allowed\n+     *     for any descendant\n+     * @param[in] ancestor_count_limit the max number of ancestor transactions\n+     *     allowed for any descendant",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r706874757",
      "id" : 706874757,
      "in_reply_to_id" : 671306152,
      "line" : 833,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjg3NDc1Nw==",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 833,
      "original_position" : 51,
      "original_start_line" : 819,
      "path" : "src/txmempool.h",
      "position" : 74,
      "pull_request_review_id" : 752185040,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : 830,
      "start_side" : "RIGHT",
      "updated_at" : "2021-09-12T18:21:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706874757",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r706876738"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706876738"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Is proper syntax is comma not slash?",
      "commit_id" : "81efedb60e1e88f806adb010c926b4edd04393b8",
      "created_at" : "2021-09-12T18:39:15Z",
      "diff_hunk" : "@@ -794,19 +802,28 @@ class CTxMemPool\n     /** UpdateForDescendants is used by UpdateTransactionsFromBlock to update\n      *  the descendants for a single transaction that has been added to the\n      *  mempool but may have child transactions in the mempool, eg during a\n-     *  chain reorg.  setExclude is the set of descendant transactions in the\n-     *  mempool that must not be accounted for (because any descendants in\n-     *  setExclude were added to the mempool after the transaction being\n-     *  updated and hence their state is already reflected in the parent\n-     *  state).\n+     *  chain reorg.\n      *\n-     *  cachedDescendants will be updated with the descendants of the transaction\n-     *  being updated, so that future invocations don't need to walk the\n-     *  same transaction again, if encountered in another transaction chain.\n+     * @param[in] updateIt the entry to update for it's descendants\n+     * @param[in] cachedDescendants a cache where each line corresponds to all",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r706876738",
      "id" : 706876738,
      "in_reply_to_id" : 676479733,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjg3NjczOA==",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 808,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : null,
      "pull_request_review_id" : 752186267,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-12T18:39:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706876738",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r706878222"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706878222"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, per https://www.doxygen.nl/manual/commands.html#cmdparam\r\n\r\n\"Possible values are \"[in]\", \"[in,out]\", and \"[out]\", note the [square] brackets in this description. When a parameter is both input and output, [in,out] is used as attribute.\"\r\n",
      "commit_id" : "81efedb60e1e88f806adb010c926b4edd04393b8",
      "created_at" : "2021-09-12T18:52:40Z",
      "diff_hunk" : "@@ -794,19 +802,28 @@ class CTxMemPool\n     /** UpdateForDescendants is used by UpdateTransactionsFromBlock to update\n      *  the descendants for a single transaction that has been added to the\n      *  mempool but may have child transactions in the mempool, eg during a\n-     *  chain reorg.  setExclude is the set of descendant transactions in the\n-     *  mempool that must not be accounted for (because any descendants in\n-     *  setExclude were added to the mempool after the transaction being\n-     *  updated and hence their state is already reflected in the parent\n-     *  state).\n+     *  chain reorg.\n      *\n-     *  cachedDescendants will be updated with the descendants of the transaction\n-     *  being updated, so that future invocations don't need to walk the\n-     *  same transaction again, if encountered in another transaction chain.\n+     * @param[in] updateIt the entry to update for it's descendants\n+     * @param[in] cachedDescendants a cache where each line corresponds to all",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r706878222",
      "id" : 706878222,
      "in_reply_to_id" : 676479733,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjg3ODIyMg==",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 808,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : null,
      "pull_request_review_id" : 752187245,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-12T18:52:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706878222",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed all feedback; keeping tests separate from changes for easier A/B comparison. However, I have reordered them so Tests come first which is more practical.",
      "created_at" : "2021-09-12T20:44:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-917707120",
      "id" : 917707120,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "IC_kwDOABII5842sxlw",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-12T20:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917707120",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Weak ACK 81efedb60e1e88f806adb010c926b4edd04393b8. Weak because of my limited mempool knowledge, though code looks OK, and I successfully ran unit and extended functional tests.",
      "created_at" : "2021-11-06T20:39:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-962507007",
      "id" : 962507007,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "IC_kwDOABII5845XrD_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/962507007/reactions"
      },
      "updated_at" : "2021-11-06T20:39:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/962507007",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/292191?v=4",
         "events_url" : "https://api.github.com/users/Talkless/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Talkless/followers",
         "following_url" : "https://api.github.com/users/Talkless/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Talkless/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Talkless",
         "id" : 292191,
         "login" : "Talkless",
         "node_id" : "MDQ6VXNlcjI5MjE5MQ==",
         "organizations_url" : "https://api.github.com/users/Talkless/orgs",
         "received_events_url" : "https://api.github.com/users/Talkless/received_events",
         "repos_url" : "https://api.github.com/users/Talkless/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Talkless/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Talkless/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Talkless"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r749526368"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749526368"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I see that you are increasing the node's allowed `limitancestorcount` here, but I don't think it's being utilized? Bc the test params are hard-coded at L119 `self.transaction_graph_test(size=100, n_tx_to_mine=[25, 50, 75])`, and don't make use of the increased limit here. So you'd need to update that as well, right?",
      "commit_id" : "81efedb60e1e88f806adb010c926b4edd04393b8",
      "created_at" : "2021-11-15T17:11:42Z",
      "diff_hunk" : "@@ -17,7 +17,7 @@\n class MempoolUpdateFromBlockTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 1\n-        self.extra_args = [['-limitdescendantsize=1000', '-limitancestorsize=1000']]\n+        self.extra_args = [['-limitdescendantsize=1000', '-limitancestorsize=1000', '-limitancestorcount=100']]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r749526368",
      "id" : 749526368,
      "in_reply_to_id" : 677825052,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII584srN1g",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 20,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/mempool_updatefromblock.py",
      "position" : 5,
      "pull_request_review_id" : 806341029,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749526368/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-15T17:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749526368",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "When I read the commit:\r\n> Often when we're updating mempool entries we update entries that we\r\nultimately end up removing the updated entries shortly thereafter. This\r\npatch makes it so that we filter for such entries a bit earlier in\r\nprocessing\r\n\r\nbased on the wording, I assumed that we were \"filtering\" these entries out _before_ adding them to the mempool. However, after reviewing the PR it seems that these entries are still added to the mempool, state is still calculated/updated and cached, it's just that we are now (pre-emptively) removing `descendants_to_remove` right away at the end of `UpdateTransactionsFromBlock`\r\n\r\nIs my understanding correct? If so, it makes me wonder where the performance improvement is coming from. To me it seems all the same work is done before/after this PR, just earlier.\r\n\r\n---\r\n\r\nRe: my [review comment](https://github.com/bitcoin/bitcoin/pull/21464/commits/92647669428bdaca44813b958e33513958644227#r749526368) 92647669428bdaca44813b958e33513958644227, `mempool_updatefromblock.py` (which I agree is a great benchmark test for this optimization) is running in the ~same time before/after this PR. So I am curious if we are actually seeing any speedup from this optimization",
      "created_at" : "2021-11-15T17:15:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-969129360",
      "id" : 969129360,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "IC_kwDOABII5845w72Q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/969129360/reactions"
      },
      "updated_at" : "2021-11-15T17:19:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/969129360",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK 81efedb60e1e88f806adb010c926b4edd04393b8\r\nThanks for clarifying doc comments to `UpdateTransactionsFromBlock` and `UpdateForDescendants`.",
      "created_at" : "2021-12-02T15:39:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-984743847",
      "id" : 984743847,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "IC_kwDOABII5846sf-n",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/984743847/reactions"
      },
      "updated_at" : "2021-12-02T15:39:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/984743847",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Looks like there has been a silent merge conflict though. Local compilation results in:\r\n```\r\n//bitcoin/src/validation.cpp:351:79: error: reference to type 'const std::string' (aka 'const basic_string<char>') could not bind to an lvalue of type 'const unsigned int'\r\n    const uint64_t ancestor_count_limit = gArgs.GetArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT);\r\n                                                                              ^~~~~~~~~~~~~~~~~~~~~~\r\n//bitcoin/src/util/system.h:327:70: note: passing argument to parameter 'strDefault' here\r\n    std::string GetArg(const std::string& strArg, const std::string& strDefault) const;\r\n                                                                     ^\r\n//bitcoin/src/validation.cpp:351:20: error: no viable conversion from 'std::string' (aka 'basic_string<char>') to 'const uint64_t' (aka 'const unsigned long')\r\n    const uint64_t ancestor_count_limit = gArgs.GetArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT);\r\n                   ^                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n/usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/c++/9/bits/basic_string.h:816:7: note: candidate function\r\n      operator __sv_type() const noexcept\r\n      ^\r\n//bitcoin/src/validation.cpp:352:77: error: reference to type 'const std::string' (aka 'const basic_string<char>') could not bind to an lvalue of type 'const unsigned int'\r\n    const uint64_t ancestor_size_limit = gArgs.GetArg(\"-limitancestorsize\", DEFAULT_ANCESTOR_SIZE_LIMIT) * 1000;\r\n                                                                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n//bitcoin/src/util/system.h:327:70: note: passing argument to parameter 'strDefault' here\r\n    std::string GetArg(const std::string& strArg, const std::string& strDefault) const;\r\n                                                                     ^\r\n//bitcoin/src/validation.cpp:352:106: error: invalid operands to binary expression ('std::string' (aka 'basic_string<char>') and 'int')\r\n    const uint64_t ancestor_size_limit = gArgs.GetArg(\"-limitancestorsize\", DEFAULT_ANCESTOR_SIZE_LIMIT) * 1000;\r\n                                         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^ ~~~~\r\n/usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/c++/9/complex:391:5: note: candidate template ignored: could not match 'complex' against 'basic_string'\r\n    operator*(const complex<_Tp>& __x, const complex<_Tp>& __y)\r\n    ^\r\n/usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/c++/9/complex:400:5: note: candidate template ignored: could not match 'complex' against 'basic_string'\r\n    operator*(const complex<_Tp>& __x, const _Tp& __y)\r\n    ^\r\n/usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/c++/9/complex:409:5: note: candidate template ignored: could not match 'complex<type-parameter-0-0>' against 'int'\r\n    operator*(const _Tp& __x, const complex<_Tp>& __y)\r\n    ^\r\n```\r\nI think it's simply a matter of changing `GetArg` to `GetIntArg` for these.",
      "created_at" : "2021-12-02T15:43:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-984747331",
      "id" : 984747331,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "IC_kwDOABII5846sg1D",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/984747331/reactions"
      },
      "updated_at" : "2021-12-02T15:43:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/984747331",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "rebased, test failures are unrelated it looks like (this PR doesn't touch secp?)",
      "created_at" : "2021-12-10T23:41:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-991375907",
      "id" : 991375907,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "IC_kwDOABII5847FzIj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/991375907/reactions"
      },
      "updated_at" : "2021-12-10T23:41:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/991375907",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "reran ci (was unrelated failure)",
      "created_at" : "2022-01-03T16:00:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-1004188966",
      "id" : 1004188966,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "IC_kwDOABII58472rUm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1004188966/reactions"
      },
      "updated_at" : "2022-01-03T16:00:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1004188966",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "requesting re-acks from:\r\n\r\n@instagibbs \r\n@glozow \r\n@ariard \r\n@laanwj \r\n@Talkless",
      "created_at" : "2022-01-03T19:04:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-1004293771",
      "id" : 1004293771,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "IC_kwDOABII58473E6L",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1004293771/reactions"
      },
      "updated_at" : "2022-01-03T19:04:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1004293771",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r777784852"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777784852"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Did this get addressed?",
      "commit_id" : "c5b36b1c1b11f04e5da7fb44183f61d09a14e40d",
      "created_at" : "2022-01-04T01:52:45Z",
      "diff_hunk" : "@@ -17,7 +17,7 @@\n class MempoolUpdateFromBlockTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 1\n-        self.extra_args = [['-limitdescendantsize=1000', '-limitancestorsize=1000']]\n+        self.extra_args = [['-limitdescendantsize=1000', '-limitancestorsize=1000', '-limitancestorcount=100']]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r777784852",
      "id" : 777784852,
      "in_reply_to_id" : 677825052,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII584uXA4U",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 20,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/mempool_updatefromblock.py",
      "position" : 5,
      "pull_request_review_id" : 843148103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777784852/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-04T01:52:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777784852",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r777797111"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777797111"
         }
      },
      "author_association" : "MEMBER",
      "body" : "any reason we can't access these fields via `m_mempool->m_limit_ancestors` and `m_mempool->m_limit_ancestor_size`?",
      "commit_id" : "c5b36b1c1b11f04e5da7fb44183f61d09a14e40d",
      "created_at" : "2022-01-04T02:46:25Z",
      "diff_hunk" : "@@ -348,7 +348,9 @@ void CChainState::MaybeUpdateMempoolForReorg(\n     // previously-confirmed transactions back to the mempool.\n     // UpdateTransactionsFromBlock finds descendants of any transactions in\n     // the disconnectpool that were added back and cleans up the mempool state.\n-    m_mempool->UpdateTransactionsFromBlock(vHashUpdate);\n+    const uint64_t ancestor_count_limit = gArgs.GetIntArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r777797111",
      "id" : 777797111,
      "line" : 351,
      "node_id" : "PRRC_kwDOABII584uXD33",
      "original_commit_id" : "c5b36b1c1b11f04e5da7fb44183f61d09a14e40d",
      "original_line" : 351,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 5,
      "pull_request_review_id" : 843164450,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777797111/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-04T02:46:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777797111",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r777829123"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777829123"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "i think the main reason is that there is no such field on m_mempool?",
      "commit_id" : "c5b36b1c1b11f04e5da7fb44183f61d09a14e40d",
      "created_at" : "2022-01-04T05:12:00Z",
      "diff_hunk" : "@@ -348,7 +348,9 @@ void CChainState::MaybeUpdateMempoolForReorg(\n     // previously-confirmed transactions back to the mempool.\n     // UpdateTransactionsFromBlock finds descendants of any transactions in\n     // the disconnectpool that were added back and cleans up the mempool state.\n-    m_mempool->UpdateTransactionsFromBlock(vHashUpdate);\n+    const uint64_t ancestor_count_limit = gArgs.GetIntArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r777829123",
      "id" : 777829123,
      "in_reply_to_id" : 777797111,
      "line" : 351,
      "node_id" : "PRRC_kwDOABII584uXLsD",
      "original_commit_id" : "c5b36b1c1b11f04e5da7fb44183f61d09a14e40d",
      "original_line" : 351,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 5,
      "pull_request_review_id" : 843205045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777829123/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-04T05:12:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777829123",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r777829363"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777829363"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(it's a field on MemPoolAccept not on the mempool iteself)",
      "commit_id" : "c5b36b1c1b11f04e5da7fb44183f61d09a14e40d",
      "created_at" : "2022-01-04T05:13:09Z",
      "diff_hunk" : "@@ -348,7 +348,9 @@ void CChainState::MaybeUpdateMempoolForReorg(\n     // previously-confirmed transactions back to the mempool.\n     // UpdateTransactionsFromBlock finds descendants of any transactions in\n     // the disconnectpool that were added back and cleans up the mempool state.\n-    m_mempool->UpdateTransactionsFromBlock(vHashUpdate);\n+    const uint64_t ancestor_count_limit = gArgs.GetIntArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r777829363",
      "id" : 777829363,
      "in_reply_to_id" : 777797111,
      "line" : 351,
      "node_id" : "PRRC_kwDOABII584uXLvz",
      "original_commit_id" : "c5b36b1c1b11f04e5da7fb44183f61d09a14e40d",
      "original_line" : 351,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 5,
      "pull_request_review_id" : 843205372,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777829363/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-04T05:13:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777829363",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r777829913"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777829913"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, without this param the old limit wasn't being fully tested since it defaults to 25, with the new code we test the limit up until 75 -- the 100 was just a nice pow ten number.",
      "commit_id" : "c5b36b1c1b11f04e5da7fb44183f61d09a14e40d",
      "created_at" : "2022-01-04T05:15:27Z",
      "diff_hunk" : "@@ -17,7 +17,7 @@\n class MempoolUpdateFromBlockTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 1\n-        self.extra_args = [['-limitdescendantsize=1000', '-limitancestorsize=1000']]\n+        self.extra_args = [['-limitdescendantsize=1000', '-limitancestorsize=1000', '-limitancestorcount=100']]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r777829913",
      "id" : 777829913,
      "in_reply_to_id" : 677825052,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII584uXL4Z",
      "original_commit_id" : "2820b04797e3c9d58cd5d9ea4d4aec00c8b5f074",
      "original_line" : 20,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/mempool_updatefromblock.py",
      "position" : 5,
      "pull_request_review_id" : 843206123,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777829913/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-04T05:15:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777829913",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r777830459"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777830459"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ok that would do it  ",
      "commit_id" : "c5b36b1c1b11f04e5da7fb44183f61d09a14e40d",
      "created_at" : "2022-01-04T05:17:36Z",
      "diff_hunk" : "@@ -348,7 +348,9 @@ void CChainState::MaybeUpdateMempoolForReorg(\n     // previously-confirmed transactions back to the mempool.\n     // UpdateTransactionsFromBlock finds descendants of any transactions in\n     // the disconnectpool that were added back and cleans up the mempool state.\n-    m_mempool->UpdateTransactionsFromBlock(vHashUpdate);\n+    const uint64_t ancestor_count_limit = gArgs.GetIntArg(\"-limitancestorcount\", DEFAULT_ANCESTOR_LIMIT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#discussion_r777830459",
      "id" : 777830459,
      "in_reply_to_id" : 777797111,
      "line" : 351,
      "node_id" : "PRRC_kwDOABII584uXMA7",
      "original_commit_id" : "c5b36b1c1b11f04e5da7fb44183f61d09a14e40d",
      "original_line" : 351,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 5,
      "pull_request_review_id" : 843206827,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21464",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 1,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777830459/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-04T05:17:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/777830459",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "reACK c5b36b1",
      "created_at" : "2022-01-04T05:18:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-1004535544",
      "id" : 1004535544,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "IC_kwDOABII58473_74",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1004535544/reactions"
      },
      "updated_at" : "2022-01-04T05:18:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1004535544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK c5b36b1c1b11f04e5da7fb44183f61d09a14e40d",
      "created_at" : "2022-01-07T20:23:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-1007714664",
      "id" : 1007714664,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "IC_kwDOABII5848EIFo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1007714664/reactions"
      },
      "updated_at" : "2022-01-07T20:23:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1007714664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "RFM?",
      "created_at" : "2022-01-24T23:30:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21464#issuecomment-1020656583",
      "id" : 1020656583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21464",
      "node_id" : "IC_kwDOABII58481fvH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020656583/reactions"
      },
      "updated_at" : "2022-01-24T23:30:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020656583",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   }
]
