[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28155).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1787716146), [kashifs](https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1791691848), [mzumsande](https://github.com/bitcoin/bitcoin/pull/28155#pullrequestreview-1713240605) |\n| Stale ACK | [vasild](https://github.com/bitcoin/bitcoin/pull/28155#pullrequestreview-1667458414) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28690](https://github.com/bitcoin/bitcoin/pull/28690) (build: Introduce internal kernel library by TheCharlatan)\n* [#28248](https://github.com/bitcoin/bitcoin/pull/28248) (p2p: peer connection bug fixes by jonatack)\n* [#26812](https://github.com/bitcoin/bitcoin/pull/26812) (test: add end-to-end tests for CConnman and PeerManager by vasild)\n* [#23352](https://github.com/bitcoin/bitcoin/pull/23352) (test: Extend stale_tip_peer_management test by maflcko)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-07-25T20:47:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1650538288",
      "id" : 1650538288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585iYTcw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1650538288/reactions"
      },
      "updated_at" : "2023-11-03T17:50:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1650538288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I've purposely split this into three commits according to each of the fixes so they can be discussed, and considered independently. That way it'll be easier to remove any if the change does not reach enough consensus.",
      "created_at" : "2023-07-25T20:49:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1650541120",
      "id" : 1650541120,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585iYUJA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1650541120/reactions"
      },
      "updated_at" : "2023-07-25T20:49:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1650541120",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "would it make sense to add a functional test like the below under\r\n```\r\nip_port = \"localhost:[]\".format(p2p_port='add')\r\nself.nodes[0].addnode(node=ip_port, command='add')\r\n```\r\nin `test/functional/rpc_net.py` on line 212\r\nbecause we shortly after assert that there is only 1 added node added",
      "created_at" : "2023-07-26T21:29:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1652522093",
      "id" : 1652522093,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585if3xt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1652522093/reactions"
      },
      "updated_at" : "2023-07-26T21:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1652522093",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15950706?v=4",
         "events_url" : "https://api.github.com/users/kevkevinpal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kevkevinpal/followers",
         "following_url" : "https://api.github.com/users/kevkevinpal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kevkevinpal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kevkevinpal",
         "id" : 15950706,
         "login" : "kevkevinpal",
         "node_id" : "MDQ6VXNlcjE1OTUwNzA2",
         "organizations_url" : "https://api.github.com/users/kevkevinpal/orgs",
         "received_events_url" : "https://api.github.com/users/kevkevinpal/received_events",
         "repos_url" : "https://api.github.com/users/kevkevinpal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kevkevinpal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kevkevinpal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kevkevinpal"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> would it make sense to add a functional test like the below under\r\n> \r\n> ```\r\n> ip_port = \"localhost:[]\".format(p2p_port='add')\r\n> self.nodes[0].addnode(node=ip_port, command='add')\r\n> ```\r\n> \r\n> in `test/functional/rpc_net.py` on line 212 because we shortly after assert that there is only 1 added node added\r\n\r\nI don't think that'd work. You'll still be able to add two nodes that resolve to the same IP using `addnode` as long as they belong to different namespaces. Lookups are not performed. The difference though is that both connections won't be established. However, the connection is not being checked by the test. \r\n\r\nWhat could be added, however, is a check for `127.0.0.1` and `127.1`.\r\n\r\nPS: This actually made me realize that the check for whether to add something to `m_added_nodes` was not good enough.",
      "created_at" : "2023-07-28T16:45:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1655993325",
      "id" : 1655993325,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585itHPt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1655993325/reactions"
      },
      "updated_at" : "2023-07-28T16:45:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1655993325",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Added a test to `test/functional/rpc_net.py` and fixed the check on `CConnman::AddNode`",
      "created_at" : "2023-07-28T17:32:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1656076583",
      "id" : 1656076583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585itbkn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1656076583/reactions"
      },
      "updated_at" : "2023-07-28T17:32:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1656076583",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1277945499"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1277945499"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "might want to uncomment these other tests",
      "commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "created_at" : "2023-07-28T18:25:28Z",
      "diff_hunk" : "@@ -57,14 +57,14 @@ def run_test(self):\n         self.connect_nodes(0, 1)\n         self.sync_all()\n \n-        self.test_connection_count()\n-        self.test_getpeerinfo()\n-        self.test_getnettotals()\n-        self.test_getnetworkinfo()\n+        # self.test_connection_count()\n+        # self.test_getpeerinfo()\n+        # self.test_getnettotals()\n+        # self.test_getnetworkinfo()\n         self.test_getaddednodeinfo()\n-        self.test_service_flags()\n-        self.test_getnodeaddresses()\n-        self.test_addpeeraddress()\n+        # self.test_service_flags()\n+        # self.test_getnodeaddresses()\n+        # self.test_addpeeraddress()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1277945499",
      "id" : 1277945499,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585MK-ab",
      "original_commit_id" : "b5763bc83ee87fd9f2e9e370cead7558f95718b0",
      "original_line" : 67,
      "original_position" : 18,
      "original_start_line" : 60,
      "path" : "test/functional/rpc_net.py",
      "position" : null,
      "pull_request_review_id" : 1552702292,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1277945499/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-28T18:25:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1277945499",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15950706?v=4",
         "events_url" : "https://api.github.com/users/kevkevinpal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kevkevinpal/followers",
         "following_url" : "https://api.github.com/users/kevkevinpal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kevkevinpal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kevkevinpal",
         "id" : 15950706,
         "login" : "kevkevinpal",
         "node_id" : "MDQ6VXNlcjE1OTUwNzA2",
         "organizations_url" : "https://api.github.com/users/kevkevinpal/orgs",
         "received_events_url" : "https://api.github.com/users/kevkevinpal/received_events",
         "repos_url" : "https://api.github.com/users/kevkevinpal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kevkevinpal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kevkevinpal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kevkevinpal"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1277960418"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1277960418"
         }
      },
      "author_association" : "NONE",
      "body" : "Ups, my bad",
      "commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "created_at" : "2023-07-28T18:41:20Z",
      "diff_hunk" : "@@ -57,14 +57,14 @@ def run_test(self):\n         self.connect_nodes(0, 1)\n         self.sync_all()\n \n-        self.test_connection_count()\n-        self.test_getpeerinfo()\n-        self.test_getnettotals()\n-        self.test_getnetworkinfo()\n+        # self.test_connection_count()\n+        # self.test_getpeerinfo()\n+        # self.test_getnettotals()\n+        # self.test_getnetworkinfo()\n         self.test_getaddednodeinfo()\n-        self.test_service_flags()\n-        self.test_getnodeaddresses()\n-        self.test_addpeeraddress()\n+        # self.test_service_flags()\n+        # self.test_getnodeaddresses()\n+        # self.test_addpeeraddress()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1277960418",
      "id" : 1277960418,
      "in_reply_to_id" : 1277945499,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585MLCDi",
      "original_commit_id" : "b5763bc83ee87fd9f2e9e370cead7558f95718b0",
      "original_line" : 67,
      "original_position" : 18,
      "original_start_line" : 60,
      "path" : "test/functional/rpc_net.py",
      "position" : null,
      "pull_request_review_id" : 1552730733,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1277960418/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-28T18:41:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1277960418",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK. I've been looking at this code lately as well, e.g. bug fixes (https://github.com/bitcoin/bitcoin/pull/28248/commits/5ae9fe173549450ab1777460758be83e378f6956 / https://github.com/bitcoin/bitcoin/pull/28248/commits/c9dbf0b6536a9cafc9dda6ee72d78c12c1229d99), logic (https://github.com/bitcoin/bitcoin/pull/28248/commits/4820f7f671c005302003b641e46c46f4c28e4696) and logging (https://github.com/bitcoin/bitcoin/pull/28248/commits/d6b0da55d430480aacd8f432ce48f58348c82c29) improvements and agree with the issues you report. Will review soon.",
      "created_at" : "2023-08-12T15:23:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1675962127",
      "id" : 1675962127,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585j5ScP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1675962127/reactions"
      },
      "updated_at" : "2023-08-13T23:34:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1675962127",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1296821862"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296821862"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit, style (`const` and attach the `&` to `auto`):\r\n```suggestion\r\n            for (const auto& r : resolved) {\r\n```",
      "commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "created_at" : "2023-08-17T07:53:56Z",
      "diff_hunk" : "@@ -462,19 +462,22 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n     if (pszDest) {\n         const std::vector<CService> resolved{Lookup(pszDest, default_port, fNameLookup && !HaveNameProxy(), 256)};\n         if (!resolved.empty()) {\n-            const CService& rnd{resolved[GetRand(resolved.size())]};\n-            addrConnect = CAddress{MaybeFlipIPv6toCJDNS(rnd), NODE_NONE};\n-            if (!addrConnect.IsValid()) {\n-                LogPrint(BCLog::NET, \"Resolver returned invalid address %s for %s\\n\", addrConnect.ToStringAddrPort(), pszDest);\n-                return nullptr;\n-            }\n-            // It is possible that we already have a connection to the IP/port pszDest resolved to.\n-            // In that case, drop the connection that was just created.\n-            LOCK(m_nodes_mutex);\n-            CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-            if (pnode) {\n-                LogPrintf(\"Failed to open new connection, already connected\\n\");\n-                return nullptr;\n+            // If the connection is made by name, it can be the case that the name resolves to more than one address.\n+            // We don't want to connect any more of them if we are already connected to one\n+            for (auto &r : resolved) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1296821862",
      "id" : 1296821862,
      "line" : 467,
      "node_id" : "PRRC_kwDOABII585NS-5m",
      "original_commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "original_line" : 467,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 19,
      "pull_request_review_id" : 1582006631,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296821862/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-17T08:54:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296821862",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1296827360"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296827360"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This log can be improved to something like this:\r\n\r\n```\r\nNot opening a new connection to pool.bitcoinnodes.org, already connected to 1.2.3.4",
      "commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "created_at" : "2023-08-17T07:58:37Z",
      "diff_hunk" : "@@ -462,19 +462,22 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n     if (pszDest) {\n         const std::vector<CService> resolved{Lookup(pszDest, default_port, fNameLookup && !HaveNameProxy(), 256)};\n         if (!resolved.empty()) {\n-            const CService& rnd{resolved[GetRand(resolved.size())]};\n-            addrConnect = CAddress{MaybeFlipIPv6toCJDNS(rnd), NODE_NONE};\n-            if (!addrConnect.IsValid()) {\n-                LogPrint(BCLog::NET, \"Resolver returned invalid address %s for %s\\n\", addrConnect.ToStringAddrPort(), pszDest);\n-                return nullptr;\n-            }\n-            // It is possible that we already have a connection to the IP/port pszDest resolved to.\n-            // In that case, drop the connection that was just created.\n-            LOCK(m_nodes_mutex);\n-            CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-            if (pnode) {\n-                LogPrintf(\"Failed to open new connection, already connected\\n\");\n-                return nullptr;\n+            // If the connection is made by name, it can be the case that the name resolves to more than one address.\n+            // We don't want to connect any more of them if we are already connected to one\n+            for (auto &r : resolved) {\n+                addrConnect = CAddress{MaybeFlipIPv6toCJDNS(r), NODE_NONE};\n+                if (!addrConnect.IsValid()) {\n+                    LogPrint(BCLog::NET, \"Resolver returned invalid address %s for %s\\n\", addrConnect.ToStringAddrPort(), pszDest);\n+                    return nullptr;\n+                }\n+                // It is possible that we already have a connection to the IP/port pszDest resolved to.\n+                // In that case, drop the connection that was just created.\n+                LOCK(m_nodes_mutex);\n+                CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n+                if (pnode) {\n+                    LogPrintf(\"Failed to open new connection, already connected\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1296827360",
      "id" : 1296827360,
      "line" : 478,
      "node_id" : "PRRC_kwDOABII585NTAPg",
      "original_commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "original_line" : 478,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 30,
      "pull_request_review_id" : 1582006631,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296827360/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-17T08:54:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296827360",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1296832854"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296832854"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The old code would pick a random address from the list of resolved addresses. The new code would pick the last one. I think it is good to preserve the randomness. One way to achieve that would be to shuffle the result before iterating and picking the last one.\r\n\r\n```cpp\r\nif (!resolved.empty()) {\r\n    Shuffle(resolved.begin(), resolved.end(), FastRandomContext{});\r\n    for (const auto& r : resolved) {\r\n```\r\n\r\nor if the shuffle is perceived expensive for big lists, before the loop `auto to_pick = GetRand(resolved.size())` and inside the loop only assign `addrConnect` for the `to_pick`th element.",
      "commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "created_at" : "2023-08-17T08:03:34Z",
      "diff_hunk" : "@@ -462,19 +462,22 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n     if (pszDest) {\n         const std::vector<CService> resolved{Lookup(pszDest, default_port, fNameLookup && !HaveNameProxy(), 256)};\n         if (!resolved.empty()) {\n-            const CService& rnd{resolved[GetRand(resolved.size())]};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1296832854",
      "id" : 1296832854,
      "line" : 465,
      "node_id" : "PRRC_kwDOABII585NTBlW",
      "original_commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "original_line" : 465,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 4,
      "pull_request_review_id" : 1582006631,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296832854/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-17T08:54:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296832854",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1296841654"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296841654"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In the commit message of 12e601c33e `rpc: Prevents adding the same ip more than once when formatted differently`:\r\n\r\n> ... formatting IPs in aborts\r\n    different,\r\n\r\n",
      "commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "created_at" : "2023-08-17T08:11:30Z",
      "diff_hunk" : "@@ -2570,9 +2577,10 @@ std::vector<CAddress> CConnman::GetAddresses(CNode& requestor, size_t max_addres\n \n bool CConnman::AddNode(const std::string& strNode)\n {\n+    CService resolved(LookupNumeric(strNode, Params().GetDefaultPort(strNode)));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1296841654",
      "id" : 1296841654,
      "line" : 2580,
      "node_id" : "PRRC_kwDOABII585NTDu2",
      "original_commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "original_line" : 2580,
      "original_position" : 101,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 101,
      "pull_request_review_id" : 1582006631,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296841654/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-17T08:54:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296841654",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1296882332"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296882332"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: use `resolved.IsValid()` instead of `resolved != CService{}`.",
      "commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "created_at" : "2023-08-17T08:44:59Z",
      "diff_hunk" : "@@ -2570,9 +2577,10 @@ std::vector<CAddress> CConnman::GetAddresses(CNode& requestor, size_t max_addres\n \n bool CConnman::AddNode(const std::string& strNode)\n {\n+    CService resolved(LookupNumeric(strNode, Params().GetDefaultPort(strNode)));\n     LOCK(m_added_nodes_mutex);\n     for (const std::string& it : m_added_nodes) {\n-        if (strNode == it) return false;\n+        if (strNode == it || (resolved != CService{} && resolved == LookupNumeric(it, Params().GetDefaultPort(it)))) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1296882332",
      "id" : 1296882332,
      "line" : 2583,
      "node_id" : "PRRC_kwDOABII585NTNqc",
      "original_commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "original_line" : 2583,
      "original_position" : 105,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 105,
      "pull_request_review_id" : 1582006631,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296882332/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-17T08:54:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296882332",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1296885786"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296885786"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "style (same in the declaration):\r\n```suggestion\r\nstd::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo(bool include_connected) const\r\n```",
      "commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "created_at" : "2023-08-17T08:47:53Z",
      "diff_hunk" : "@@ -1919,7 +1922,7 @@ std::vector<CAddress> CConnman::GetCurrentBlockRelayOnlyConns() const\n     return ret;\n }\n \n-std::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo() const\n+std::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo(bool includeConnected) const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1296885786",
      "id" : 1296885786,
      "line" : 1925,
      "node_id" : "PRRC_kwDOABII585NTOga",
      "original_commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "original_line" : 1925,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 41,
      "pull_request_review_id" : 1582006631,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296885786/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-17T08:54:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296885786",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1296888861"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296888861"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        std::vector<AddedNodeInfo> vInfo = GetAddedNodeInfo(/*include_connected=*/false);\r\n```\r\nand in other call sites too",
      "commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "created_at" : "2023-08-17T08:50:30Z",
      "diff_hunk" : "@@ -1979,21 +1988,19 @@ void CConnman::ThreadOpenAddedConnections()\n     while (true)\n     {\n         CSemaphoreGrant grant(*semAddnode);\n-        std::vector<AddedNodeInfo> vInfo = GetAddedNodeInfo();\n+        std::vector<AddedNodeInfo> vInfo = GetAddedNodeInfo(false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1296888861",
      "id" : 1296888861,
      "line" : 1991,
      "node_id" : "PRRC_kwDOABII585NTPQd",
      "original_commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "original_line" : 1991,
      "original_position" : 70,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 70,
      "pull_request_review_id" : 1582006631,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296888861/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-17T08:54:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296888861",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1302640562"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302640562"
         }
      },
      "author_association" : "NONE",
      "body" : "I think `Shuffle` should do, given this picks on a list of resolved DNS lookups. Normally, that should be rather short, and if [this](https://tmblr.co/ZCK6wx1dJN3aZ) is still up to date, the max length should be 4095.",
      "commit_id" : "d0e7e181840a6c76f2a3a5cb39ccc5653c0e62e0",
      "created_at" : "2023-08-23T08:04:32Z",
      "diff_hunk" : "@@ -462,19 +462,22 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n     if (pszDest) {\n         const std::vector<CService> resolved{Lookup(pszDest, default_port, fNameLookup && !HaveNameProxy(), 256)};\n         if (!resolved.empty()) {\n-            const CService& rnd{resolved[GetRand(resolved.size())]};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1302640562",
      "id" : 1302640562,
      "in_reply_to_id" : 1296832854,
      "line" : 465,
      "node_id" : "PRRC_kwDOABII585NpLey",
      "original_commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "original_line" : 465,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 7,
      "pull_request_review_id" : 1590996662,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302640562/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-23T08:04:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302640562",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Addressed @vasild comments",
      "created_at" : "2023-08-23T08:40:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1689534790",
      "id" : 1689534790,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585ktEFG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1689534790/reactions"
      },
      "updated_at" : "2023-08-23T08:40:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1689534790",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1304482465"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304482465"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is now:\r\n\r\n```cpp\r\nLogPrintf(\"Not opening a connection to %d, already connected to %s\\n\", pnode->addr.ToStringAddrPort(), addrConnect.ToStringAddrPort());\r\n```\r\n\r\nIt will print two IP addresses, which are most likely equal. It would be more valuable to print the hostname: \"... pool.bitcoinnodes.org, already connected to 1.2.3.4\" which implies that 1.2.3.4 is the same as pool.bitcoinnodes.org.\r\n\r\n```cpp\r\nLogPrintf(\"Not opening a connection to %s, already connected to %s\\n\", pszDest, addrConnect.ToStringAddrPort());\r\n```",
      "commit_id" : "d0e7e181840a6c76f2a3a5cb39ccc5653c0e62e0",
      "created_at" : "2023-08-24T15:08:43Z",
      "diff_hunk" : "@@ -462,19 +462,22 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n     if (pszDest) {\n         const std::vector<CService> resolved{Lookup(pszDest, default_port, fNameLookup && !HaveNameProxy(), 256)};\n         if (!resolved.empty()) {\n-            const CService& rnd{resolved[GetRand(resolved.size())]};\n-            addrConnect = CAddress{MaybeFlipIPv6toCJDNS(rnd), NODE_NONE};\n-            if (!addrConnect.IsValid()) {\n-                LogPrint(BCLog::NET, \"Resolver returned invalid address %s for %s\\n\", addrConnect.ToStringAddrPort(), pszDest);\n-                return nullptr;\n-            }\n-            // It is possible that we already have a connection to the IP/port pszDest resolved to.\n-            // In that case, drop the connection that was just created.\n-            LOCK(m_nodes_mutex);\n-            CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-            if (pnode) {\n-                LogPrintf(\"Failed to open new connection, already connected\\n\");\n-                return nullptr;\n+            // If the connection is made by name, it can be the case that the name resolves to more than one address.\n+            // We don't want to connect any more of them if we are already connected to one\n+            for (auto &r : resolved) {\n+                addrConnect = CAddress{MaybeFlipIPv6toCJDNS(r), NODE_NONE};\n+                if (!addrConnect.IsValid()) {\n+                    LogPrint(BCLog::NET, \"Resolver returned invalid address %s for %s\\n\", addrConnect.ToStringAddrPort(), pszDest);\n+                    return nullptr;\n+                }\n+                // It is possible that we already have a connection to the IP/port pszDest resolved to.\n+                // In that case, drop the connection that was just created.\n+                LOCK(m_nodes_mutex);\n+                CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n+                if (pnode) {\n+                    LogPrintf(\"Failed to open new connection, already connected\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1304482465",
      "id" : 1304482465,
      "in_reply_to_id" : 1296827360,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585NwNKh",
      "original_commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "original_line" : 478,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1593845376,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304482465/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-24T15:10:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304482465",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1305686522"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305686522"
         }
      },
      "author_association" : "NONE",
      "body" : "Addressed in [079c56c](https://github.com/bitcoin/bitcoin/pull/28155/commits/079c56cfe7ed150a158b619f04e6d47edd01ca15)",
      "commit_id" : "fd8b1db9ca8fb5aa0678d36e79b76bd283cf8fed",
      "created_at" : "2023-08-25T13:48:23Z",
      "diff_hunk" : "@@ -462,19 +462,22 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n     if (pszDest) {\n         const std::vector<CService> resolved{Lookup(pszDest, default_port, fNameLookup && !HaveNameProxy(), 256)};\n         if (!resolved.empty()) {\n-            const CService& rnd{resolved[GetRand(resolved.size())]};\n-            addrConnect = CAddress{MaybeFlipIPv6toCJDNS(rnd), NODE_NONE};\n-            if (!addrConnect.IsValid()) {\n-                LogPrint(BCLog::NET, \"Resolver returned invalid address %s for %s\\n\", addrConnect.ToStringAddrPort(), pszDest);\n-                return nullptr;\n-            }\n-            // It is possible that we already have a connection to the IP/port pszDest resolved to.\n-            // In that case, drop the connection that was just created.\n-            LOCK(m_nodes_mutex);\n-            CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-            if (pnode) {\n-                LogPrintf(\"Failed to open new connection, already connected\\n\");\n-                return nullptr;\n+            // If the connection is made by name, it can be the case that the name resolves to more than one address.\n+            // We don't want to connect any more of them if we are already connected to one\n+            for (auto &r : resolved) {\n+                addrConnect = CAddress{MaybeFlipIPv6toCJDNS(r), NODE_NONE};\n+                if (!addrConnect.IsValid()) {\n+                    LogPrint(BCLog::NET, \"Resolver returned invalid address %s for %s\\n\", addrConnect.ToStringAddrPort(), pszDest);\n+                    return nullptr;\n+                }\n+                // It is possible that we already have a connection to the IP/port pszDest resolved to.\n+                // In that case, drop the connection that was just created.\n+                LOCK(m_nodes_mutex);\n+                CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n+                if (pnode) {\n+                    LogPrintf(\"Failed to open new connection, already connected\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1305686522",
      "id" : 1305686522,
      "in_reply_to_id" : 1296827360,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585N0zH6",
      "original_commit_id" : "a6fcf17f9dde56637bcfe824bb3def83e764b38c",
      "original_line" : 478,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1595772566,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305686522/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-25T13:48:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305686522",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-10-03T10:25:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1744676204",
      "id" : 1744676204,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585n_aVs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1744676204/reactions"
      },
      "updated_at" : "2023-10-03T10:25:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1744676204",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1362677038"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362677038"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "While the first commit solves the problem of now looking up all of the possible addresses to avoid duplicate connections, I think there is a related issue that could be improved (which I ran into recently):\r\n\r\nWe still choose one of the addresses at random to connect to (`addrConnect`). If that connection fails, we report failure and give up.\r\nThat means if I am in a network environment where I can't connect to IPv6 addresses, and try to connect to a valid node like `xyz.xyz` which resolves to both a IPv4 and IPv6 address with addnode `bitcoin-cli addnode \"xyz.xyz\" \"onetry\"`, the call will fail to connect 50% of the time.\r\n\r\nWouldn't it be better to try to open a connection to each of the addresses `pszDest` resolves to until one of them succeeds? Or at least to a few of them?\r\nI don't think that a fix for this issue needs to be included in this PR though.",
      "commit_id" : "afa15ed2c741593f49d608d75565daa5e55c6353",
      "created_at" : "2023-10-17T19:49:42Z",
      "diff_hunk" : "@@ -464,21 +464,25 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n     const uint16_t default_port{pszDest != nullptr ? GetDefaultPort(pszDest) :\n                                                      m_params.GetDefaultPort()};\n     if (pszDest) {\n-        const std::vector<CService> resolved{Lookup(pszDest, default_port, fNameLookup && !HaveNameProxy(), 256)};\n+        std::vector<CService> resolved{Lookup(pszDest, default_port, fNameLookup && !HaveNameProxy(), 256)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1362677038",
      "id" : 1362677038,
      "line" : 467,
      "node_id" : "PRRC_kwDOABII585ROM0u",
      "original_commit_id" : "b98e20e53a05f23be2432ddff6ccff4e0ba4c7db",
      "original_line" : 467,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 5,
      "pull_request_review_id" : 1683239158,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362677038/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-17T20:18:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362677038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1362692223"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362692223"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This should be `%s` not `%d` (not that it actually matters with `tinyformat`)",
      "commit_id" : "afa15ed2c741593f49d608d75565daa5e55c6353",
      "created_at" : "2023-10-17T20:00:54Z",
      "diff_hunk" : "@@ -464,21 +464,25 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n     const uint16_t default_port{pszDest != nullptr ? GetDefaultPort(pszDest) :\n                                                      m_params.GetDefaultPort()};\n     if (pszDest) {\n-        const std::vector<CService> resolved{Lookup(pszDest, default_port, fNameLookup && !HaveNameProxy(), 256)};\n+        std::vector<CService> resolved{Lookup(pszDest, default_port, fNameLookup && !HaveNameProxy(), 256)};\n         if (!resolved.empty()) {\n-            const CService& rnd{resolved[GetRand(resolved.size())]};\n-            addrConnect = CAddress{MaybeFlipIPv6toCJDNS(rnd), NODE_NONE};\n-            if (!addrConnect.IsValid()) {\n-                LogPrint(BCLog::NET, \"Resolver returned invalid address %s for %s\\n\", addrConnect.ToStringAddrPort(), pszDest);\n-                return nullptr;\n-            }\n-            // It is possible that we already have a connection to the IP/port pszDest resolved to.\n-            // In that case, drop the connection that was just created.\n-            LOCK(m_nodes_mutex);\n-            CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-            if (pnode) {\n-                LogPrintf(\"Failed to open new connection, already connected\\n\");\n-                return nullptr;\n+            Shuffle(resolved.begin(), resolved.end(), FastRandomContext());\n+            // If the connection is made by name, it can be the case that the name resolves to more than one address.\n+            // We don't want to connect any more of them if we are already connected to one\n+            for (const auto& r : resolved) {\n+                addrConnect = CAddress{MaybeFlipIPv6toCJDNS(r), NODE_NONE};\n+                if (!addrConnect.IsValid()) {\n+                    LogPrint(BCLog::NET, \"Resolver returned invalid address %s for %s\\n\", addrConnect.ToStringAddrPort(), pszDest);\n+                    return nullptr;\n+                }\n+                // It is possible that we already have a connection to the IP/port pszDest resolved to.\n+                // In that case, drop the connection that was just created.\n+                LOCK(m_nodes_mutex);\n+                CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n+                if (pnode) {\n+                    LogPrintf(\"Not opening a connection to %d, already connected to %s\\n\", pszDest, addrConnect.ToStringAddrPort());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1362692223",
      "id" : 1362692223,
      "line" : 483,
      "node_id" : "PRRC_kwDOABII585ROQh_",
      "original_commit_id" : "b98e20e53a05f23be2432ddff6ccff4e0ba4c7db",
      "original_line" : 483,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 34,
      "pull_request_review_id" : 1683239158,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362692223/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-17T20:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362692223",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1362701875"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362701875"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "could fuzz the added arg `(fuzzed_data_provider.ConsumeBool()`)",
      "commit_id" : "afa15ed2c741593f49d608d75565daa5e55c6353",
      "created_at" : "2023-10-17T20:06:23Z",
      "diff_hunk" : "@@ -121,7 +121,7 @@ FUZZ_TARGET(connman, .init = initialize_connman)\n                 connman.SetTryNewOutboundPeer(fuzzed_data_provider.ConsumeBool());\n             });\n     }\n-    (void)connman.GetAddedNodeInfo();\n+    (void)connman.GetAddedNodeInfo(/*include_connected=*/true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1362701875",
      "id" : 1362701875,
      "line" : 124,
      "node_id" : "PRRC_kwDOABII585ROS4z",
      "original_commit_id" : "afa15ed2c741593f49d608d75565daa5e55c6353",
      "original_line" : 124,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/fuzz/connman.cpp",
      "position" : 5,
      "pull_request_review_id" : 1683239158,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362701875/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-17T20:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362701875",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1364264385"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1364264385"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agreed. I'll add this as a follow-up if reviewers are OK with that",
      "commit_id" : "fc1e9e4780e72ed432afb5c0961511449147f1b0",
      "created_at" : "2023-10-18T17:24:53Z",
      "diff_hunk" : "@@ -464,21 +464,25 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n     const uint16_t default_port{pszDest != nullptr ? GetDefaultPort(pszDest) :\n                                                      m_params.GetDefaultPort()};\n     if (pszDest) {\n-        const std::vector<CService> resolved{Lookup(pszDest, default_port, fNameLookup && !HaveNameProxy(), 256)};\n+        std::vector<CService> resolved{Lookup(pszDest, default_port, fNameLookup && !HaveNameProxy(), 256)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1364264385",
      "id" : 1364264385,
      "in_reply_to_id" : 1362677038,
      "line" : 467,
      "node_id" : "PRRC_kwDOABII585RUQXB",
      "original_commit_id" : "b98e20e53a05f23be2432ddff6ccff4e0ba4c7db",
      "original_line" : 467,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 5,
      "pull_request_review_id" : 1685706873,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1364264385/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-18T17:24:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1364264385",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Addresses comments from @mzumsande ",
      "created_at" : "2023-10-18T17:27:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1769011384",
      "id" : 1769011384,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585pcPi4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1769011384/reactions"
      },
      "updated_at" : "2023-10-18T17:27:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1769011384",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've been revisiting the patch introduced by this PR to follow up based on https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1362677038, and I realized that the following piece of code (net.cpp L558-L569) may not be required anymore (and it should be removed here too if so):\r\n\r\n```cpp\r\nif (addrConnect.IsValid()) {\r\n    [...]\r\n} else if (pszDest && GetNameProxy(proxy)) {\r\n    sock = CreateSock(proxy.proxy);\r\n    if (!sock) {\r\n        return nullptr;\r\n    }\r\n    std::string host;\r\n    uint16_t port{default_port};\r\n    SplitHostPort(std::string(pszDest), port, host);\r\n    bool proxyConnectionFailed;\r\n    connected = ConnectThroughProxy(proxy, host, port, *sock, nConnectTimeout,\r\n                                    proxyConnectionFailed);\r\n}\r\n```\r\n\r\nTo my understanding, it cannot be the case that `!addrConnect.IsValid()` while `pszDest` is set, given we now check for its validity after re-assigning `addrConnect` in L474-L478. Therefore, any `addrConnect` is ensured to be valid provided `pszDest` is set.\r\n\r\nDoes this make sense @vasild @mzumsande?",
      "created_at" : "2023-10-18T18:47:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1769127508",
      "id" : 1769127508,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585pcr5U",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1769127508/reactions"
      },
      "updated_at" : "2023-10-18T18:47:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1769127508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> re-ACK [3d1854c](https://github.com/bitcoin/bitcoin/commit/3d1854cdf31a83f4daafd06a760e3355f3bcc547)\r\n> \r\n> > To my understanding, it cannot be the case that `!addrConnect.IsValid()` while `pszDest` is set, given we now check for its validity after re-assigning `addrConnect` in L474-L478. Therefore, any `addrConnect` is ensured to be valid provided `pszDest` is set.\r\n> > Does this make sense @vasild @mzumsande?\r\n> \r\n> I don't think that's correct. If we are connecting through a proxy, `Lookup()` could return no entries, `addrConnect` would be default-initialized (and therefore invalid) and we might need this code.\r\n\r\nYou're right!",
      "created_at" : "2023-10-23T19:41:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1775904605",
      "id" : 1775904605,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585p2idd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1775904605/reactions"
      },
      "updated_at" : "2023-10-23T19:41:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1775904605",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Reviewing this PR tomorrow (sorry for not getting to it earlier).",
      "created_at" : "2023-10-24T03:58:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1776501861",
      "id" : 1776501861,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585p40Rl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 1,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1776501861/reactions"
      },
      "updated_at" : "2023-10-24T03:58:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1776501861",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1374089763"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1374089763"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It may be good to hoist the `resolved.IsValid()` computation out of the loop here.\r\n\r\n```diff\r\n bool CConnman::AddNode(const AddedNodeParams& add)\r\n {\r\n-    CService resolved(LookupNumeric(add.m_added_node, GetDefaultPort(add.m_added_node)));\r\n+    const CService resolved{LookupNumeric(add.m_added_node, GetDefaultPort(add.m_added_node))};\r\n+    const bool resolved_is_valid{resolved.IsValid()};\r\n     LOCK(m_added_nodes_mutex);\r\n     for (const auto& it : m_added_node_params) {\r\n-        if (add.m_added_node == it.m_added_node || (resolved.IsValid() && resolved == LookupNumeric(it.m_added_node, GetDefaultPort(it.m_added_node)))) return false;\r\n+        if (add.m_added_node == it.m_added_node || (resolved_is_valid && resolved == LookupNumeric(it.m_added_node, GetDefaultPort(it.m_added_node)))) return false;\r\n     }\r\n```\r\n",
      "commit_id" : "fc1e9e4780e72ed432afb5c0961511449147f1b0",
      "created_at" : "2023-10-27T05:32:19Z",
      "diff_hunk" : "@@ -3467,9 +3475,10 @@ std::vector<CAddress> CConnman::GetAddresses(CNode& requestor, size_t max_addres\n \n bool CConnman::AddNode(const AddedNodeParams& add)\n {\n+    CService resolved(LookupNumeric(add.m_added_node, GetDefaultPort(add.m_added_node)));\n     LOCK(m_added_nodes_mutex);\n     for (const auto& it : m_added_node_params) {\n-        if (add.m_added_node == it.m_added_node) return false;\n+        if (add.m_added_node == it.m_added_node || (resolved.IsValid() && resolved == LookupNumeric(it.m_added_node, GetDefaultPort(it.m_added_node)))) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1374089763",
      "id" : 1374089763,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585R5vIj",
      "original_commit_id" : "3d1854cdf31a83f4daafd06a760e3355f3bcc547",
      "original_line" : 3481,
      "original_position" : 109,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1701023820,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1374089763/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-27T05:35:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1374089763",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Addresses review comments and add @jonatack's test commits",
      "created_at" : "2023-10-30T17:31:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1785722593",
      "id" : 1785722593,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585qb_bh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1785722593/reactions"
      },
      "updated_at" : "2023-10-30T17:31:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1785722593",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK fc1e9e4780e72ed432afb5c0961511449147f1b0\r\n\r\n94e8882d820969ddc83f24f4cbe1515a886da4ea, and maybe also 2574b7e177ef045, may be worth backporting.\r\n\r\n(If any review feedback related to the unit tests, happy to address them in test coverage follow-ups.)",
      "created_at" : "2023-10-30T20:38:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1785999512",
      "id" : 1785999512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585qdDCY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1785999512/reactions"
      },
      "updated_at" : "2023-10-30T20:45:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1785999512",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1377456646"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377456646"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This should be including `compat.h`, rather than introducing the same networking #ifdef here?",
      "commit_id" : "fc1e9e4780e72ed432afb5c0961511449147f1b0",
      "created_at" : "2023-10-31T11:44:09Z",
      "diff_hunk" : "@@ -0,0 +1,152 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <net.h>\n+#include <net_processing.h>\n+#include <netaddress.h>\n+#include <netbase.h>\n+#include <netgroup.h>\n+#include <node/connection_types.h>\n+#include <protocol.h>\n+#include <random.h>\n+#include <test/util/logging.h>\n+#include <test/util/net.h>\n+#include <test/util/random.h>\n+#include <test/util/setup_common.h>\n+#include <tinyformat.h>\n+#include <util/chaintype.h>\n+#include <version.h>\n+\n+#ifdef WIN32",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1377456646",
      "id" : 1377456646,
      "line" : 22,
      "node_id" : "PRRC_kwDOABII585SGlIG",
      "original_commit_id" : "fc1e9e4780e72ed432afb5c0961511449147f1b0",
      "original_line" : 22,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/net_peer_connection_tests.cpp",
      "position" : 22,
      "pull_request_review_id" : 1706093919,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377456646/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-31T11:44:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377456646",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1377718949"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377718949"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That works for me. @jonatack if you rebase it I'll cherry-pick it again.",
      "commit_id" : "0420f99f429ce2382057e101859067f40de47be0",
      "created_at" : "2023-10-31T14:51:50Z",
      "diff_hunk" : "@@ -0,0 +1,152 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <net.h>\n+#include <net_processing.h>\n+#include <netaddress.h>\n+#include <netbase.h>\n+#include <netgroup.h>\n+#include <node/connection_types.h>\n+#include <protocol.h>\n+#include <random.h>\n+#include <test/util/logging.h>\n+#include <test/util/net.h>\n+#include <test/util/random.h>\n+#include <test/util/setup_common.h>\n+#include <tinyformat.h>\n+#include <util/chaintype.h>\n+#include <version.h>\n+\n+#ifdef WIN32",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1377718949",
      "id" : 1377718949,
      "in_reply_to_id" : 1377456646,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585SHlKl",
      "original_commit_id" : "fc1e9e4780e72ed432afb5c0961511449147f1b0",
      "original_line" : 22,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/net_peer_connection_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 1706518765,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377718949/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-31T15:05:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377718949",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1377947935"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377947935"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, I've repushed #28749 with the update.",
      "commit_id" : "0420f99f429ce2382057e101859067f40de47be0",
      "created_at" : "2023-10-31T17:32:08Z",
      "diff_hunk" : "@@ -0,0 +1,152 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <net.h>\n+#include <net_processing.h>\n+#include <netaddress.h>\n+#include <netbase.h>\n+#include <netgroup.h>\n+#include <node/connection_types.h>\n+#include <protocol.h>\n+#include <random.h>\n+#include <test/util/logging.h>\n+#include <test/util/net.h>\n+#include <test/util/random.h>\n+#include <test/util/setup_common.h>\n+#include <tinyformat.h>\n+#include <util/chaintype.h>\n+#include <version.h>\n+\n+#ifdef WIN32",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1377947935",
      "id" : 1377947935,
      "in_reply_to_id" : 1377456646,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585SIdEf",
      "original_commit_id" : "fc1e9e4780e72ed432afb5c0961511449147f1b0",
      "original_line" : 22,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/net_peer_connection_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 1706889575,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377947935/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-31T17:32:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377947935",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1377955800"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377955800"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Rebased",
      "commit_id" : "0420f99f429ce2382057e101859067f40de47be0",
      "created_at" : "2023-10-31T17:38:06Z",
      "diff_hunk" : "@@ -0,0 +1,152 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <net.h>\n+#include <net_processing.h>\n+#include <netaddress.h>\n+#include <netbase.h>\n+#include <netgroup.h>\n+#include <node/connection_types.h>\n+#include <protocol.h>\n+#include <random.h>\n+#include <test/util/logging.h>\n+#include <test/util/net.h>\n+#include <test/util/random.h>\n+#include <test/util/setup_common.h>\n+#include <tinyformat.h>\n+#include <util/chaintype.h>\n+#include <version.h>\n+\n+#ifdef WIN32",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#discussion_r1377955800",
      "id" : 1377955800,
      "in_reply_to_id" : 1377456646,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585SIe_Y",
      "original_commit_id" : "fc1e9e4780e72ed432afb5c0961511449147f1b0",
      "original_line" : 22,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/net_peer_connection_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 1706902072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377955800/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-31T17:38:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377955800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re-ACK 0420f99f429ce2382057e101859067f40de47be0\r\n",
      "created_at" : "2023-10-31T17:59:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1787716146",
      "id" : 1787716146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585qjmIy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1787716146/reactions"
      },
      "updated_at" : "2023-10-31T17:59:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1787716146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "tACK [0420f9](https://github.com/bitcoin/bitcoin/commit/0420f99f429ce2382057e101859067f40de47be0)",
      "created_at" : "2023-11-02T23:16:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1791691848",
      "id" : 1791691848,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585qywxI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1791691848/reactions"
      },
      "updated_at" : "2023-11-02T23:16:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1791691848",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1489460?v=4",
         "events_url" : "https://api.github.com/users/kashifs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kashifs/followers",
         "following_url" : "https://api.github.com/users/kashifs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kashifs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kashifs",
         "id" : 1489460,
         "login" : "kashifs",
         "node_id" : "MDQ6VXNlcjE0ODk0NjA=",
         "organizations_url" : "https://api.github.com/users/kashifs/orgs",
         "received_events_url" : "https://api.github.com/users/kashifs/received_events",
         "repos_url" : "https://api.github.com/users/kashifs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kashifs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kashifs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kashifs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> tACK [0420f9](https://github.com/bitcoin/bitcoin/commit/0420f99f429ce2382057e101859067f40de47be0)\r\n\r\nThanks for reviewing! Would you mind sharing what did you test and how?\r\n\r\n@vasild would you mind re-acking this when you have some time?",
      "created_at" : "2023-11-03T19:22:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1792979468",
      "id" : 1792979468,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585q3rIM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1792979468/reactions"
      },
      "updated_at" : "2023-11-03T19:22:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1792979468",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> > tACK [0420f9](https://github.com/bitcoin/bitcoin/commit/0420f99f429ce2382057e101859067f40de47be0)\n> \n> \n> \n> Thanks for reviewing! Would you mind sharing what did you test and how?\n> \n> \n> \n> @vasild would you mind re-acking this when you have some time?\n\nI pulled the branch, compiled from source on my Mac, and ran:\n\n`./src/test/test_bitcoin -t net_peer_connection_tests -l message -- -printtoconsole=1`\n\nand\n\n`./src/test/test_bitcoin -t net_peer_connection_tests -l all -- -printtoconsole=1`\n\nI also pored over every line of modified code in order to better understand the design.\n\nIs there anything else that I should do that might be helpful?",
      "created_at" : "2023-11-04T18:12:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1793511504",
      "id" : 1793511504,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585q5tBQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1793511504/reactions"
      },
      "updated_at" : "2023-11-04T18:13:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1793511504",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1489460?v=4",
         "events_url" : "https://api.github.com/users/kashifs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kashifs/followers",
         "following_url" : "https://api.github.com/users/kashifs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kashifs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kashifs",
         "id" : 1489460,
         "login" : "kashifs",
         "node_id" : "MDQ6VXNlcjE0ODk0NjA=",
         "organizations_url" : "https://api.github.com/users/kashifs/orgs",
         "received_events_url" : "https://api.github.com/users/kashifs/received_events",
         "repos_url" : "https://api.github.com/users/kashifs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kashifs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kashifs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kashifs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > > tACK [0420f9](https://github.com/bitcoin/bitcoin/commit/0420f99f429ce2382057e101859067f40de47be0)\n> > \n> > \n> > \n> > Thanks for reviewing! Would you mind sharing what did you test and how?\n> > \n> > \n> > \n> > @vasild would you mind re-acking this when you have some time?\n> \n> I pulled the branch, compiled from source on my Mac, and ran:\n> \n> `./src/test/test_bitcoin -t net_peer_connection_tests -l message -- -printtoconsole=1`\n> \n> and\n> \n> `./src/test/test_bitcoin -t net_peer_connection_tests -l all -- -printtoconsole=1`\n> \n> I also pored over every line of modified code in order to better understand the design.\n> \n> Is there anything else that I should do that might be helpful?\n\nNope, that's good. Thanks again for reviewing and testing.",
      "created_at" : "2023-11-04T21:57:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28155#issuecomment-1793564549",
      "id" : 1793564549,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
      "node_id" : "IC_kwDOABII585q55-F",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1793564549/reactions"
      },
      "updated_at" : "2023-11-04T21:57:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1793564549",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   }
]
