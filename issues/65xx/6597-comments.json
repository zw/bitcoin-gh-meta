[
   {
      "body" : "> Apart from being a minimal optimization\r\n\r\nHow is this an optimization?  You are now comparing the blocks hash against the genesis block every time `ConnectBlock` is called?",
      "created_at" : "2015-08-29T01:28:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-135925165",
      "id" : 135925165,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2015-08-29T01:28:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/135925165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "> How is this an optimization? \r\n\r\nBy saving some checks for the genesis block.\r\n\r\n> You are now comparing the blocks hash against the genesis block every time ConnectBlock is called?\r\n\r\nThe check in ConnectBlock was already there, now ```CheckBlock``` is not called if the block being checked is the genesis block (ie the checks has just been moved below the genesis block check).",
      "created_at" : "2015-08-29T01:36:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-135925472",
      "id" : 135925472,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2015-08-29T01:37:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/135925472",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "In any case, benchmarking welcomed.",
      "created_at" : "2015-08-29T01:40:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-135925772",
      "id" : 135925772,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2015-08-29T01:40:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/135925772",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Rebased and simplified. Looking at it again, @dcousens was right that many of the changes would have affected performance negatively. Besides they were (or at least they currently seem to be) unnecessary for #6382 (or for facilitating the creating of testchains in general by not requiring tester to \"mine\" the genesis block of their testchains: the genesis block is correct by definition).\r\nNow it should be clear that we're just optimizing the genesis block case in ConnectBlock() without adding any work to the other cases, and we're only affecting negatively the performance of CBlockTreeDB::LoadBlockIndexGuts by comparing two hashes right before returning and error (only if CheckProofOfWork had previously failed), which I think is very acceptable.\r\nSo I don't think benchmarking this makes sense anymore.",
      "created_at" : "2015-11-11T22:59:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-155936477",
      "id" : 155936477,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2015-11-11T22:59:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155936477",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-11-11T23:13:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-155939066",
      "id" : 155939066,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2015-11-11T23:13:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155939066",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6597#discussion_r44671670"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6597"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44671670"
         }
      },
      "body" : "Is the genesis block expected to fail PoW?",
      "commit_id" : "b95a2f959f9f86b49391fcb68b4e3cfe6691b41a",
      "created_at" : "2015-11-12T15:40:24Z",
      "diff_hunk" : "@@ -203,7 +204,8 @@ bool CBlockTreeDB::LoadBlockIndexGuts()\n                 pindexNew->nStatus        = diskindex.nStatus;\n                 pindexNew->nTx            = diskindex.nTx;\n \n-                if (!CheckProofOfWork(pindexNew->GetBlockHash(), pindexNew->nBits, Params().GetConsensus()))\n+                if (!CheckProofOfWork(pindexNew->GetBlockHash(), pindexNew->nBits, consensusParams) &&\n+                    pindexNew->GetBlockHash() != consensusParams.hashGenesisBlock)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#discussion_r44671670",
      "id" : 44671670,
      "original_commit_id" : "b95a2f959f9f86b49391fcb68b4e3cfe6691b41a",
      "original_position" : 14,
      "path" : "src/txdb.cpp",
      "position" : 14,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6597",
      "updated_at" : "2015-11-12T15:40:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44671670",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6597#discussion_r44685822"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6597"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44685822"
         }
      },
      "body" : "Not usually, but this is useful for creating new testchains (whether those testchains are merged in master or not) without having to spend costly PoW to \"mine\" a genesis block to hardcode.\r\nFor example, #6382 introduces std::numeric_limits<uint64_t>::max() new testchains whose genesis blocks are created dynamically (but not mined dynamically in chainparams.cpp) and will therefore fail PoW.\r\nFor any production chain, mining the genesis block is a meaningless cost, but for a testnet (specially regtest-like testchains) it is utterly absurd. Even for mainchain, Satoshi didn't need to mine the genesis block because it is correct by definition (or more accurately, it is part of the definition of how valid chains must be). Just in the same way, he could have decided to make the genesis subsidy spendable but he didn't (but changing that now would be a hardfork). The creator of the system worked in mysterious ways...\r\n",
      "commit_id" : "b95a2f959f9f86b49391fcb68b4e3cfe6691b41a",
      "created_at" : "2015-11-12T17:19:13Z",
      "diff_hunk" : "@@ -203,7 +204,8 @@ bool CBlockTreeDB::LoadBlockIndexGuts()\n                 pindexNew->nStatus        = diskindex.nStatus;\n                 pindexNew->nTx            = diskindex.nTx;\n \n-                if (!CheckProofOfWork(pindexNew->GetBlockHash(), pindexNew->nBits, Params().GetConsensus()))\n+                if (!CheckProofOfWork(pindexNew->GetBlockHash(), pindexNew->nBits, consensusParams) &&\n+                    pindexNew->GetBlockHash() != consensusParams.hashGenesisBlock)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#discussion_r44685822",
      "id" : 44685822,
      "original_commit_id" : "b95a2f959f9f86b49391fcb68b4e3cfe6691b41a",
      "original_position" : 14,
      "path" : "src/txdb.cpp",
      "position" : 14,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6597",
      "updated_at" : "2015-11-12T17:19:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44685822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6597#discussion_r44730188"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6597"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44730188"
         }
      },
      "body" : "Fair enough.",
      "commit_id" : "b95a2f959f9f86b49391fcb68b4e3cfe6691b41a",
      "created_at" : "2015-11-12T23:18:56Z",
      "diff_hunk" : "@@ -203,7 +204,8 @@ bool CBlockTreeDB::LoadBlockIndexGuts()\n                 pindexNew->nStatus        = diskindex.nStatus;\n                 pindexNew->nTx            = diskindex.nTx;\n \n-                if (!CheckProofOfWork(pindexNew->GetBlockHash(), pindexNew->nBits, Params().GetConsensus()))\n+                if (!CheckProofOfWork(pindexNew->GetBlockHash(), pindexNew->nBits, consensusParams) &&\n+                    pindexNew->GetBlockHash() != consensusParams.hashGenesisBlock)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#discussion_r44730188",
      "id" : 44730188,
      "original_commit_id" : "b95a2f959f9f86b49391fcb68b4e3cfe6691b41a",
      "original_position" : 14,
      "path" : "src/txdb.cpp",
      "position" : 14,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6597",
      "updated_at" : "2015-11-12T23:18:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44730188",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "ACK",
      "created_at" : "2015-11-12T23:19:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-156268372",
      "id" : 156268372,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2015-11-12T23:19:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/156268372",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Care to pass in the params from above like #6986?",
      "created_at" : "2015-11-17T01:34:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-157232943",
      "id" : 157232943,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2015-11-17T01:34:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/157232943",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell you mean passing it explicitly to CBlockTreeDB::LoadBlockIndexGuts()?",
      "created_at" : "2015-11-17T03:06:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-157253509",
      "id" : 157253509,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2015-11-17T03:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/157253509",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@jtimon Right. Do you agree it would be the correct and consistent thing to do?",
      "created_at" : "2015-11-17T06:02:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-157279917",
      "id" : 157279917,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2015-11-17T06:02:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/157279917",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Sure, using the local variable is in preparation for that at some point later (see #5970), but I'm happy to do it here directly.",
      "created_at" : "2015-11-17T11:27:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-157342728",
      "id" : 157342728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2015-11-17T11:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/157342728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Updated with @gmaxwell 's nit solved.",
      "created_at" : "2015-11-17T13:54:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-157375686",
      "id" : 157375686,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2015-11-17T13:54:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/157375686",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Still ACK",
      "created_at" : "2015-11-28T13:08:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-160294721",
      "id" : 160294721,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2015-11-28T13:08:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/160294721",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "still ping, I've been thinking about closing this and reopen it whith a test that makes sure a new non-mined chain wold work (that means another chain in master),\r\n",
      "created_at" : "2015-12-18T05:18:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-165675646",
      "id" : 165675646,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2016-01-07T12:52:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/165675646",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "re-ACK e4037dd,  @jtimon test sounds good too :+1: ",
      "created_at" : "2015-12-18T23:30:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-165920244",
      "id" : 165920244,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2015-12-18T23:30:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/165920244",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "From experience elsewhere: if you introduce a new chain with an \"invalid\" genesis block and this change, it will fail to reindex, as the check is still done in that case.\r\n\r\nSuggested fix: see https://github.com/sipa/bitcoin/commit/f7a1a470634bdfeb52d961894e204fc1a1159e72",
      "created_at" : "2016-01-06T19:36:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-169435385",
      "id" : 169435385,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2016-01-06T19:36:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/169435385",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Mhmm, why #6382 seems to be working just fine with reindex then? Have you actually reproduced the error you claim would appear?\r\n\r\nThis shouldn't be necessary, certainly not in CheckBlockHeader(). In AcceptBlockHeader, it won't be called for the genesis block, see https://github.com/bitcoin/bitcoin/blob/master/src/main.cpp#L3071\r\nMaybe it is required on TestBlockValidity() or something else that calls CheckBlock() (which calls CheckBlockHeader()), but I would prefer to leave the genesis block check out of the consensus function CheckBlockHeader().\r\n\r\nProbably a good test for this would be to create a new regtest-like chain with a genesis block that doesn't satisfy the proof of work and run it for a few blocks both with and without reindex from the python tests. But without #6907 and something like https://github.com/jtimon/bitcoin/commit/98923c381eca9874f135f08297218f3f8fff5221 it seems like the testing would be much more than the change itself.",
      "created_at" : "2016-01-07T12:47:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-169654749",
      "id" : 169654749,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2016-01-07T12:54:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/169654749",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Let's try to get agreement here @sipa @jtimon",
      "created_at" : "2016-01-18T15:58:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-172569312",
      "id" : 172569312,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2016-01-18T15:58:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/172569312",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@jtimon Because Bitcoin's genesis block does actually pass PoW checks.\n\nWhat I mean is that this patch is effectively removing the invariant that\ngenesis blocks have to be valid. However, if you actually try with an\ninvalid genesis block, reindex fails.\n\nTechnically not a concern for Bitcoin at this point, so this is not a\nblocker for merge. Just some advice that if we'd actually want to start\ncreating invalid genesis blocks (which makes creating test chains much\neasier), this patch isn't enough.\n",
      "created_at" : "2016-01-18T16:10:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-172572987",
      "id" : 172572987,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2016-01-18T16:10:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/172572987",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Genesis blocks are valid by definition and should never be checked (whether they pass pow or not). \r\nIn any case, IIRC last time I tested #6382 it worked just fine even when reindexing the chain, therefore I disagree with sipa that this patch isn't enough. As said the very fact that we disagree on whether or not this is enough for its stated goal, means IMO that this should be introduced with  tests that verify this is enough and will keep being enough in the future (make sure nobody undoes this without noticing).\r\nI believe the best way to test this is through a new chain whose genesis block doesn't  pass pow (regtest2 ?) And test boh with and without reindex.\r\n\r\nDoes that make sense?\r\n\r\nAddionally, I don't  plan to create a new chain without #6907 (and generic selection with -chain, also part of #6382 ),and that's  why I'm  closing this for now.\r\nAnyone feel free to take over this if you can't  wait for the factory. I've  personally been wanting this factory for almost two years, I can wait more for #6907 to be merged (was supposed to happen before forking 0.12, I really hope it will happen before forking 0.13.",
      "created_at" : "2016-01-19T11:28:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-172822950",
      "id" : 172822950,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2016-01-19T11:32:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/172822950",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "I'm not against merging this! I was simply giving a suggestion for further work towards its stated goal.",
      "created_at" : "2016-01-21T12:26:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6597#issuecomment-173556142",
      "id" : 173556142,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6597",
      "updated_at" : "2016-01-21T12:26:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/173556142",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
