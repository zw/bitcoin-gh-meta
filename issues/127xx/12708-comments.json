[
   {
      "author_association" : "MEMBER",
      "body" : "Thanks. Concept ACK\n\nOn Mar 16, 2018 18:29, \"Pieter Wuille\" <notifications@github.com> wrote:\n\n> Unsure if we want this.\n>\n> This modifies verify-commits.sh to redo all merges along the leftmost\n> commit branch (so it should contain all PR merges), and verify whether the\n> match the result of the merge.\n>\n> The benefit is that it will detect a case where one of the maintainers\n> merges a PR, but makes an unrelated change inside the merge commit. This on\n> itself is not very strong, as unrelated changes can also be included in the\n> merged branch itself, but perhaps the merge commit is not something that\n> people are otherwise likely to look.\n> ------------------------------\n> You can view, comment on, or merge this pull request online at:\n>\n>   https://github.com/bitcoin/bitcoin/pull/12708\n> Commit Summary\n>\n>    - Make verify-commits.sh test that merges are clean\n>\n> File Changes\n>\n>    - *M* contrib/verify-commits/verify-commits.sh\n>    <https://github.com/bitcoin/bitcoin/pull/12708/files#diff-0> (32)\n>\n> Patch Links:\n>\n>    - https://github.com/bitcoin/bitcoin/pull/12708.patch\n>    - https://github.com/bitcoin/bitcoin/pull/12708.diff\n>\n> Ã¢ÂÂ\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/12708>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGGmv3mzklUc9NUFx-O3YjjuqTA6YX-Nks5te_aFgaJpZM4SuKjf>\n> .\n>\n",
      "created_at" : "2018-03-16T17:33:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12708#issuecomment-373788432",
      "id" : 373788432,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12708",
      "updated_at" : "2018-03-16T17:33:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/373788432",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept Ack",
      "created_at" : "2018-03-16T18:09:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12708#issuecomment-373798944",
      "id" : 373798944,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12708",
      "updated_at" : "2018-03-16T18:09:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/373798944",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6394033?v=4",
         "events_url" : "https://api.github.com/users/donaloconnor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/donaloconnor/followers",
         "following_url" : "https://api.github.com/users/donaloconnor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/donaloconnor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/donaloconnor",
         "id" : 6394033,
         "login" : "donaloconnor",
         "organizations_url" : "https://api.github.com/users/donaloconnor/orgs",
         "received_events_url" : "https://api.github.com/users/donaloconnor/received_events",
         "repos_url" : "https://api.github.com/users/donaloconnor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/donaloconnor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/donaloconnor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/donaloconnor"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Concept ACK, this makes sense because the merge script `github-merge.py` (that everyone is supposed to use) will only do clean merges.\r\n\r\n- How does this affect performance of the verify script? it's already very slow, so the difference might be negligible)\r\n- How deep should this check be done?",
      "created_at" : "2018-03-22T09:11:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12708#issuecomment-375227316",
      "id" : 375227316,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12708",
      "updated_at" : "2018-03-22T09:12:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375227316",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "The script becomes several times slower (I didn't measure; just my impression from waiting... maybe a few minutes). Perhaps we should restrict it to just one day of commits or so?",
      "created_at" : "2018-03-22T09:34:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12708#issuecomment-375233655",
      "id" : 375233655,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12708",
      "updated_at" : "2018-03-22T09:34:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375233655",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Similar to the SHA512 hash, we could only check it for HEAD. (Or maybe make that configurable to check all the way down to trusted_root if you have time)",
      "created_at" : "2018-03-22T09:58:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12708#issuecomment-375240713",
      "id" : 375240713,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12708",
      "updated_at" : "2018-03-22T09:58:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375240713",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Fixes #8089 ",
      "created_at" : "2018-03-22T19:00:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12708#issuecomment-375421481",
      "id" : 375421481,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12708",
      "updated_at" : "2018-03-22T19:00:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375421481",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "utACK 577f111",
      "created_at" : "2018-04-07T16:48:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12708#issuecomment-379483202",
      "id" : 379483202,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12708",
      "updated_at" : "2018-04-07T16:48:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379483202",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Let's observe how much this adds to Travis checks of master (it does not run on PR branches). If it's unacceptably slow, we can modify the script to only test merge cleanliness for the last few merges or days or so.",
      "created_at" : "2018-04-07T16:52:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12708#issuecomment-379483452",
      "id" : 379483452,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12708",
      "updated_at" : "2018-04-07T16:52:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379483452",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Yes, I had the same reasoning, it's good to have this check in, if it becomes too slow we can always tone that down.",
      "created_at" : "2018-04-07T17:20:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12708#issuecomment-379485321",
      "id" : 379485321,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12708",
      "updated_at" : "2018-04-07T17:20:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379485321",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12708#discussion_r180893824"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12708"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180893824"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Wouldn't a checkout also checkout the other files in `./contrib/verify-commit`, such as `trusted-git-root` or `trusted-keys` and thus change them under its own feet?",
      "commit_id" : "577f11141c5155345c68809aac8511b018cc4050",
      "created_at" : "2018-04-11T20:50:21Z",
      "diff_hunk" : "@@ -123,9 +125,29 @@ while true; do\n \tfi\n \n \tPARENTS=$(git show -s --format=format:%P \"$CURRENT_COMMIT\")\n-\tfor PARENT in $PARENTS; do\n-\t\tPREV_COMMIT=\"$CURRENT_COMMIT\"\n-\t\tCURRENT_COMMIT=\"$PARENT\"\n-\t\tbreak\n-\tdone\n+\tPARENT1=${PARENTS%% *}\n+\tPARENT2=\"\"\n+\tif [ \"x$PARENT1\" != \"x$PARENTS\" ]; then\n+\t\tPARENTX=${PARENTS#* }\n+\t\tPARENT2=${PARENTX%% *}\n+\t\tif [ \"x$PARENT2\" != \"x$PARENTX\" ]; then\n+\t\t\techo \"Commit $CURRENT_COMMIT is an octopus merge\" > /dev/stderr\n+\t\t\texit 1\n+\t\tfi\n+\tfi\n+\tif [ \"x$PARENT2\" != \"x\" ]; then\n+\t\tCURRENT_TREE=\"$(git show --format=\"%T\" \"$CURRENT_COMMIT\")\"\n+\t\tgit checkout --force --quiet \"$PARENT1\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12708#discussion_r180893824",
      "id" : 180893824,
      "original_commit_id" : "577f11141c5155345c68809aac8511b018cc4050",
      "original_position" : 30,
      "path" : "contrib/verify-commits/verify-commits.sh",
      "position" : 30,
      "pull_request_review_id" : 111397470,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12708",
      "updated_at" : "2018-04-11T20:50:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180893824",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
