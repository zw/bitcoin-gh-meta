[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29356).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [theStack](https://github.com/bitcoin/bitcoin/pull/29356#issuecomment-1919629659) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2024-01-31T14:48:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29356#issuecomment-1919255747",
      "id" : 1919255747,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29356",
      "node_id" : "IC_kwDOABII585yZYTD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919255747/reactions"
      },
      "updated_at" : "2024-01-31T18:01:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919255747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nAnother possible alternative for `addconnection`'s third parameter handling would be to take as default whatever is set by `-v2transport`, like we already do it for `addnode` (i.e. `bool use_v2transport = self.MaybeArg<bool>(2).value_or(node_v2transport);`).",
      "created_at" : "2024-01-31T18:01:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29356#issuecomment-1919629659",
      "id" : 1919629659,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29356",
      "node_id" : "IC_kwDOABII585yazlb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919629659/reactions"
      },
      "updated_at" : "2024-01-31T18:01:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919629659",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> * make `v2transport` argument in `addconnection` RPC mandatory.\r\n\r\nThis will break compatibility for third party software / scripts written against previous behaviour where there was no such mandatory argument. What are benefits?",
      "created_at" : "2024-01-31T19:38:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29356#issuecomment-1919804582",
      "id" : 1919804582,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29356",
      "node_id" : "IC_kwDOABII585ybeSm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919804582/reactions"
      },
      "updated_at" : "2024-01-31T19:38:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919804582",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> This will break compatibility for third party software / scripts written against previous behaviour where there was no such mandatory argument. What are benefits?\r\n\r\n`addconnection` is a debug-only command that is only used by our functional test framework (to make \"fake\" automatic outbound connections). It has never been announced to the public, is only enabled for regtest and I don't see why any third party would ever need to use it. Did you maybe confuse it with the widely used `addnode` rpc?",
      "created_at" : "2024-01-31T19:44:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29356#issuecomment-1919812989",
      "id" : 1919812989,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29356",
      "node_id" : "IC_kwDOABII585ybgV9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919812989/reactions"
      },
      "updated_at" : "2024-01-31T19:44:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919812989",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ok, didn't notice it is regtest only. Probably `help addconnection` should give error instead of usage information if not running against regtest.\r\n\r\nWith v26.0.0 you get this against mainnet:\r\n```\r\nbitcoin@odroid:~$ bitcoin-cli help | grep addconnection\r\nbitcoin@odroid:~$ bitcoin-cli help addconnection       \r\naddconnection \"address\" \"connection_type\"\r\n\r\nOpen an outbound connection to a specified node. This RPC is for testing only.\r\n\r\nArguments:\r\n1. address            (string, required) The IP address and port to attempt connecting to.\r\n2. connection_type    (string, required) Type of connection to open (\"outbound-full-relay\", \"block-relay-only\", \"addr-fetch\" or \"feeler\").\r\n\r\nResult:\r\n{                               (json object)\r\n  \"address\" : \"str\",            (string) Address of newly added connection.\r\n  \"connection_type\" : \"str\"     (string) Type of connection opened.\r\n}\r\n\r\nExamples:\r\n> bitcoin-cli addconnection \"192.168.0.6:8333\" \"outbound-full-relay\"\r\n> curl --user myusername --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"addconnection\", \"params\": [\"192.168.0.6:8333\" \"outbound-full-relay\"]}' -H 'content-type: text/plain;' http://127.0.0.1:8332/\r\n\r\nbitcoin@odroid:~$ bitcoin-cli addconnection \"192.168.0.6:8333\" \"outbound-full-relay\"\r\nerror code: -1\r\nerror message:\r\naddconnection is for regression testing (-regtest mode) only.\r\n```",
      "created_at" : "2024-01-31T19:49:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29356#issuecomment-1919821003",
      "id" : 1919821003,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29356",
      "node_id" : "IC_kwDOABII585ybiTL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919821003/reactions"
      },
      "updated_at" : "2024-01-31T19:49:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919821003",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Another possible alternative for addconnection's third parameter handling would be to take as default whatever is set by -v2transport, like we already do it for addnode (i.e. bool use_v2transport = self.MaybeArg<bool>(2).value_or(node_v2transport);).\r\n\r\n@theStack, i went with the mandatory third parameter approach because:\r\n1. this can be used only for interaction between python dummy peer(`P2PInterface`) and bitcoind(`TestNode`) on only regtest anyways.\r\n2. we're indirectly passing whatever is set by -v2transport (using `use_v2transport`) into addconnection RPC in \r\n[this commit](https://github.com/bitcoin/bitcoin/pull/29358/commits/d8165db8e889f423351ae35fd375c982e793d136) in #29358.\r\n\r\nopen to the optional-argument alternative if there are better reasons for doing that approach!\r\n\r\n> Ok, didn't notice it is regtest only. Probably help addconnection should give error instead of usage information if not running against regtest.\r\n\r\n@kristapsk, makes sense. it's mentioned in the help that it's for testing only though and there are other regtest-only RPCs too! So i feel it's out of scope for this PR.\r\n",
      "created_at" : "2024-02-02T08:00:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29356#issuecomment-1923275862",
      "id" : 1923275862,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29356",
      "node_id" : "IC_kwDOABII585yotxW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1923275862/reactions"
      },
      "updated_at" : "2024-02-02T08:00:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1923275862",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   }
]
