[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29367).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [delta1](https://github.com/bitcoin/bitcoin/pull/29367#pullrequestreview-1858823743), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/29367#pullrequestreview-1859682311), [epiccurious](https://github.com/bitcoin/bitcoin/pull/29367#issuecomment-1924263560), [murchandamus](https://github.com/bitcoin/bitcoin/pull/29367#pullrequestreview-1860014271) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2024-02-01T23:14:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29367#issuecomment-1922456901",
      "id" : 1922456901,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29367",
      "node_id" : "IC_kwDOABII585yll1F",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1922456901/reactions"
      },
      "updated_at" : "2024-02-02T18:08:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1922456901",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29367#discussion_r1476168453"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476168453"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Given that the PR describes the setting of the flag as a special case for blank wallets, Iâd be more comfortable if the setting of the flag were conditional on a wallet being blank instead of success being true here.\r\n\r\n```diff\r\n-        success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);\r\n+        if(local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET)) {\r\n+            local_wallet->SetWalletFlag(WALLET_FLAG_DESCRIPTORS);\r\n+            success = true;\r\n+        }\r\n+\r\n        if (!success) {\r\n            success = DoMigration(*local_wallet, context, error, res);\r\n-        } else {\r\n-            // Make sure that descriptors flag is actually set\r\n-            local_wallet->SetWalletFlag(WALLET_FLAG_DESCRIPTORS);\r\n```",
      "commit_id" : "3904123da954f9ebd905de4129aec9f9bab9efc7",
      "created_at" : "2024-02-02T14:59:10Z",
      "diff_hunk" : "@@ -4257,6 +4257,9 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(const std::string& walle\n         success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);\n         if (!success) {\n             success = DoMigration(*local_wallet, context, error, res);\n+        } else {\n+            // Make sure that descriptors flag is actually set\n+            local_wallet->SetWalletFlag(WALLET_FLAG_DESCRIPTORS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29367#discussion_r1476168453",
      "id" : 1476168453,
      "line" : 4262,
      "node_id" : "PRRC_kwDOABII585X_IsF",
      "original_commit_id" : "072d506240f6c39387b2edd4421818cc914c0912",
      "original_line" : 4262,
      "original_position" : 6,
      "original_start_line" : 4257,
      "path" : "src/wallet/wallet.cpp",
      "position" : 6,
      "pull_request_review_id" : 1859460255,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29367",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476168453/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 4257,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-02T14:59:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476168453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29367#discussion_r1476295451"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476295451"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Iâd be more comfortable if the setting of the flag were conditional on a wallet being blank instead of success being true\r\n\r\nJust to be clear, these two conditions should be exactly equivalent due to the `success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);` line so the suggestion is a style change, not a change in behavior. I agree the suggestion looks a little better, but the style of dealing with the `success` variable seems here to follow a particular pattern, so would leave it up to achow to decide which way fits better.",
      "commit_id" : "3904123da954f9ebd905de4129aec9f9bab9efc7",
      "created_at" : "2024-02-02T16:42:29Z",
      "diff_hunk" : "@@ -4257,6 +4257,9 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(const std::string& walle\n         success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);\n         if (!success) {\n             success = DoMigration(*local_wallet, context, error, res);\n+        } else {\n+            // Make sure that descriptors flag is actually set\n+            local_wallet->SetWalletFlag(WALLET_FLAG_DESCRIPTORS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29367#discussion_r1476295451",
      "id" : 1476295451,
      "in_reply_to_id" : 1476168453,
      "line" : 4262,
      "node_id" : "PRRC_kwDOABII585X_nsb",
      "original_commit_id" : "072d506240f6c39387b2edd4421818cc914c0912",
      "original_line" : 4262,
      "original_position" : 6,
      "original_start_line" : 4257,
      "path" : "src/wallet/wallet.cpp",
      "position" : 6,
      "pull_request_review_id" : 1859682311,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29367",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476295451/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 4257,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-02T16:46:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476295451",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Tested ACK 3904123da954f9ebd905de4129aec9f9bab9efc7.",
      "created_at" : "2024-02-02T16:52:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29367#issuecomment-1924263560",
      "id" : 1924263560,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29367",
      "node_id" : "IC_kwDOABII585yse6I",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1924263560/reactions"
      },
      "updated_at" : "2024-02-02T16:53:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1924263560",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/109078515?v=4",
         "events_url" : "https://api.github.com/users/epiccurious/events{/privacy}",
         "followers_url" : "https://api.github.com/users/epiccurious/followers",
         "following_url" : "https://api.github.com/users/epiccurious/following{/other_user}",
         "gists_url" : "https://api.github.com/users/epiccurious/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/epiccurious",
         "id" : 109078515,
         "login" : "epiccurious",
         "node_id" : "U_kgDOBoBn8w",
         "organizations_url" : "https://api.github.com/users/epiccurious/orgs",
         "received_events_url" : "https://api.github.com/users/epiccurious/received_events",
         "repos_url" : "https://api.github.com/users/epiccurious/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/epiccurious/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/epiccurious/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/epiccurious"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29367#discussion_r1476329208"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476329208"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think it should actually unconditionally set the flag, but I haven't fully thought through if that is safe yet. Intuitively, it should be safe since a failed migration would result in the wallet being deleted anyways, but I haven't considered all of the possibilities yet.",
      "commit_id" : "3904123da954f9ebd905de4129aec9f9bab9efc7",
      "created_at" : "2024-02-02T16:58:25Z",
      "diff_hunk" : "@@ -4257,6 +4257,9 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(const std::string& walle\n         success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);\n         if (!success) {\n             success = DoMigration(*local_wallet, context, error, res);\n+        } else {\n+            // Make sure that descriptors flag is actually set\n+            local_wallet->SetWalletFlag(WALLET_FLAG_DESCRIPTORS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29367#discussion_r1476329208",
      "id" : 1476329208,
      "in_reply_to_id" : 1476168453,
      "line" : 4262,
      "node_id" : "PRRC_kwDOABII585X_v74",
      "original_commit_id" : "072d506240f6c39387b2edd4421818cc914c0912",
      "original_line" : 4262,
      "original_position" : 6,
      "original_start_line" : 4257,
      "path" : "src/wallet/wallet.cpp",
      "position" : 6,
      "pull_request_review_id" : 1859737706,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29367",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476329208/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 4257,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-02T16:58:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476329208",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29367#discussion_r1476493286"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476493286"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@ryanofsky Yeah, I was not proposing a change in behavior. It just seems cleaner to tie the intended behavior directly to the relevant wallet property than to a generic boolean like `success` that is instantiated half a code block away and much more likely to change its meaning in the course of the project.\r\n\r\n@achow101: I would have expected that `DoMigration` sets `WALLET_FLAG_DESCRIPTOR`, but it doesnât seem to be the case. If you wanted to set it generally, perhaps you could just set it after the `if (!success) {â¦}` block here?",
      "commit_id" : "3904123da954f9ebd905de4129aec9f9bab9efc7",
      "created_at" : "2024-02-02T18:05:51Z",
      "diff_hunk" : "@@ -4257,6 +4257,9 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(const std::string& walle\n         success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);\n         if (!success) {\n             success = DoMigration(*local_wallet, context, error, res);\n+        } else {\n+            // Make sure that descriptors flag is actually set\n+            local_wallet->SetWalletFlag(WALLET_FLAG_DESCRIPTORS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29367#discussion_r1476493286",
      "id" : 1476493286,
      "in_reply_to_id" : 1476168453,
      "line" : 4262,
      "node_id" : "PRRC_kwDOABII585YAX_m",
      "original_commit_id" : "072d506240f6c39387b2edd4421818cc914c0912",
      "original_line" : 4262,
      "original_position" : 6,
      "original_start_line" : 4257,
      "path" : "src/wallet/wallet.cpp",
      "position" : 6,
      "pull_request_review_id" : 1860014271,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29367",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476493286/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 4257,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-02T18:08:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476493286",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29367#discussion_r1476516869"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476516869"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`DoMigration` does do that, that's why this is only a problem for blank wallets.\r\n\r\nAs currently implemented, this only sets it for blank wallets, but I do also think the correct behavior is to set it for all wallets, but as I said earlier, I have not analyzed that yet.",
      "commit_id" : "3904123da954f9ebd905de4129aec9f9bab9efc7",
      "created_at" : "2024-02-02T18:31:30Z",
      "diff_hunk" : "@@ -4257,6 +4257,9 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(const std::string& walle\n         success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);\n         if (!success) {\n             success = DoMigration(*local_wallet, context, error, res);\n+        } else {\n+            // Make sure that descriptors flag is actually set\n+            local_wallet->SetWalletFlag(WALLET_FLAG_DESCRIPTORS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29367#discussion_r1476516869",
      "id" : 1476516869,
      "in_reply_to_id" : 1476168453,
      "line" : 4262,
      "node_id" : "PRRC_kwDOABII585YAdwF",
      "original_commit_id" : "072d506240f6c39387b2edd4421818cc914c0912",
      "original_line" : 4262,
      "original_position" : 6,
      "original_start_line" : 4257,
      "path" : "src/wallet/wallet.cpp",
      "position" : 6,
      "pull_request_review_id" : 1860054473,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29367",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476516869/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 4257,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-02T18:31:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476516869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29367#discussion_r1476587099"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476587099"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29367#discussion_r1476516869\r\n\r\n> `DoMigration` does do that, that's why this is only a problem for blank wallets.\r\n\r\nSeems like in a followup it might be cleaner to do this inside DoMigration, so the flag is set in one place. In the meantime it could help to change the \"Make sure that descriptors flag is actually set\" comment to \"Make sure that descriptors flag is set if DoMigration is not called (otherwise DoMigration will set it)\"",
      "commit_id" : "3904123da954f9ebd905de4129aec9f9bab9efc7",
      "created_at" : "2024-02-02T19:29:30Z",
      "diff_hunk" : "@@ -4257,6 +4257,9 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(const std::string& walle\n         success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);\n         if (!success) {\n             success = DoMigration(*local_wallet, context, error, res);\n+        } else {\n+            // Make sure that descriptors flag is actually set\n+            local_wallet->SetWalletFlag(WALLET_FLAG_DESCRIPTORS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29367#discussion_r1476587099",
      "id" : 1476587099,
      "in_reply_to_id" : 1476168453,
      "line" : 4262,
      "node_id" : "PRRC_kwDOABII585YAu5b",
      "original_commit_id" : "072d506240f6c39387b2edd4421818cc914c0912",
      "original_line" : 4262,
      "original_position" : 6,
      "original_start_line" : 4257,
      "path" : "src/wallet/wallet.cpp",
      "position" : 6,
      "pull_request_review_id" : 1860173819,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29367",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476587099/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 4257,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-02T19:29:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476587099",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I went ahead and merged this in its current form since it is a minimal bugfix for a bug introduced yesterday in #28976. Without #28976, blank wallets would refuse to migrate. But with #28976 and without this fix, blank wallets would appear to successfully migrate but be in an unsupported legacy mode + sqlite backend state, so it seemed better to merge sooner rather than later.\r\n\r\nIt should be possible to followup on comments here and in the previous PR:\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/29367#discussion_r1476168453\r\n- https://github.com/bitcoin/bitcoin/pull/28976#discussion_r1473429116\r\n\r\nin future wallet migration PRs (maybe #28868)",
      "created_at" : "2024-02-02T19:53:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29367#issuecomment-1924582691",
      "id" : 1924582691,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29367",
      "node_id" : "IC_kwDOABII585yts0j",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1924582691/reactions"
      },
      "updated_at" : "2024-02-02T19:53:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1924582691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
