[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29371).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [scgbckbone](https://github.com/bitcoin/bitcoin/pull/29371#pullrequestreview-1864732480), [theStack](https://github.com/bitcoin/bitcoin/pull/29371#issuecomment-1992085047), [itornaza](https://github.com/bitcoin/bitcoin/pull/29371#issuecomment-2048105785) |\n| Stale ACK | [edilmedeiros](https://github.com/bitcoin/bitcoin/pull/29371#issuecomment-1927700389) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "created_at" : "2024-02-02T16:46:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29371#issuecomment-1924253430",
      "id" : 1924253430,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29371",
      "node_id" : "IC_kwDOABII585yscb2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1924253430/reactions"
      },
      "updated_at" : "2024-04-10T17:29:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1924253430",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Tested ACK fe53febee0288809184ef6f49131fa342ae86f7b\r\n\r\nI've run `test/functional/feature_taproot.py` and `test/functional/wallet_taproot.py`.\r\n\r\nThe changes make sense in preparation for future expansions, as said. \r\nThey don't alter current test logic.",
      "created_at" : "2024-02-05T18:19:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29371#issuecomment-1927700389",
      "id" : 1927700389,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29371",
      "node_id" : "IC_kwDOABII585y5l-l",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1927700389/reactions"
      },
      "updated_at" : "2024-02-05T21:16:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1927700389",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/78322931?v=4",
         "events_url" : "https://api.github.com/users/edilmedeiros/events{/privacy}",
         "followers_url" : "https://api.github.com/users/edilmedeiros/followers",
         "following_url" : "https://api.github.com/users/edilmedeiros/following{/other_user}",
         "gists_url" : "https://api.github.com/users/edilmedeiros/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/edilmedeiros",
         "id" : 78322931,
         "login" : "edilmedeiros",
         "node_id" : "MDQ6VXNlcjc4MzIyOTMx",
         "organizations_url" : "https://api.github.com/users/edilmedeiros/orgs",
         "received_events_url" : "https://api.github.com/users/edilmedeiros/received_events",
         "repos_url" : "https://api.github.com/users/edilmedeiros/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/edilmedeiros/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/edilmedeiros/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/edilmedeiros"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29371#discussion_r1478815788"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1478815788"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "here is where the previous hard coded value was that the parameter is replacing.",
      "commit_id" : "fe53febee0288809184ef6f49131fa342ae86f7b",
      "created_at" : "2024-02-05T19:44:03Z",
      "diff_hunk" : "@@ -843,17 +843,17 @@ def TaprootSignatureMsg(txTo, spent_utxos, hash_type, input_index = 0, scriptpat\n def TaprootSignatureHash(*args, **kwargs):\n     return TaggedHash(\"TapSighash\", TaprootSignatureMsg(*args, **kwargs))\n \n-def taproot_tree_helper(scripts):\n+def taproot_tree_helper(scripts, leaf_version):\n     if len(scripts) == 0:\n         return ([], bytes())\n     if len(scripts) == 1:\n         # One entry: treat as a leaf\n         script = scripts[0]\n         assert not callable(script)\n         if isinstance(script, list):\n-            return taproot_tree_helper(script)\n+            return taproot_tree_helper(script, leaf_version)\n         assert isinstance(script, tuple)\n-        version = LEAF_VERSION_TAPSCRIPT",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29371#discussion_r1478815788",
      "id" : 1478815788,
      "line" : 856,
      "node_id" : "PRRC_kwDOABII585YJPAs",
      "original_commit_id" : "fe53febee0288809184ef6f49131fa342ae86f7b",
      "original_line" : 856,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : 16,
      "pull_request_review_id" : 1863677532,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29371",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1478815788/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-05T19:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1478815788",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3514957?v=4",
         "events_url" : "https://api.github.com/users/Christewart/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Christewart/followers",
         "following_url" : "https://api.github.com/users/Christewart/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Christewart/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Christewart",
         "id" : 3514957,
         "login" : "Christewart",
         "node_id" : "MDQ6VXNlcjM1MTQ5NTc=",
         "organizations_url" : "https://api.github.com/users/Christewart/orgs",
         "received_events_url" : "https://api.github.com/users/Christewart/received_events",
         "repos_url" : "https://api.github.com/users/Christewart/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Christewart/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Christewart/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Christewart"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29371#discussion_r1478875833"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1478875833"
         }
      },
      "author_association" : "NONE",
      "body" : "I see that you don't change the hardcoded value `0xc0`, just pass it with function calls. \r\nIt does make sense to generalize `taproot_tree_helper` and `taproot_construct`.",
      "commit_id" : "fe53febee0288809184ef6f49131fa342ae86f7b",
      "created_at" : "2024-02-05T20:28:33Z",
      "diff_hunk" : "@@ -843,17 +843,17 @@ def TaprootSignatureMsg(txTo, spent_utxos, hash_type, input_index = 0, scriptpat\n def TaprootSignatureHash(*args, **kwargs):\n     return TaggedHash(\"TapSighash\", TaprootSignatureMsg(*args, **kwargs))\n \n-def taproot_tree_helper(scripts):\n+def taproot_tree_helper(scripts, leaf_version):\n     if len(scripts) == 0:\n         return ([], bytes())\n     if len(scripts) == 1:\n         # One entry: treat as a leaf\n         script = scripts[0]\n         assert not callable(script)\n         if isinstance(script, list):\n-            return taproot_tree_helper(script)\n+            return taproot_tree_helper(script, leaf_version)\n         assert isinstance(script, tuple)\n-        version = LEAF_VERSION_TAPSCRIPT",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29371#discussion_r1478875833",
      "id" : 1478875833,
      "in_reply_to_id" : 1478815788,
      "line" : 856,
      "node_id" : "PRRC_kwDOABII585YJdq5",
      "original_commit_id" : "fe53febee0288809184ef6f49131fa342ae86f7b",
      "original_line" : 856,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : 16,
      "pull_request_review_id" : 1863758393,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29371",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1478875833/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-05T20:28:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1478875833",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/78322931?v=4",
         "events_url" : "https://api.github.com/users/edilmedeiros/events{/privacy}",
         "followers_url" : "https://api.github.com/users/edilmedeiros/followers",
         "following_url" : "https://api.github.com/users/edilmedeiros/following{/other_user}",
         "gists_url" : "https://api.github.com/users/edilmedeiros/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/edilmedeiros",
         "id" : 78322931,
         "login" : "edilmedeiros",
         "node_id" : "MDQ6VXNlcjc4MzIyOTMx",
         "organizations_url" : "https://api.github.com/users/edilmedeiros/orgs",
         "received_events_url" : "https://api.github.com/users/edilmedeiros/received_events",
         "repos_url" : "https://api.github.com/users/edilmedeiros/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/edilmedeiros/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/edilmedeiros/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/edilmedeiros"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29371#discussion_r1478878383"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1478878383"
         }
      },
      "author_association" : "NONE",
      "body" : "I'm not familiar with taproot, but do you think it does make sense to add a test to check if someone is passing the correct version constants to the functions (maybe in a new PR, since this one is more like refactoring code)?",
      "commit_id" : "fe53febee0288809184ef6f49131fa342ae86f7b",
      "created_at" : "2024-02-05T20:31:20Z",
      "diff_hunk" : "@@ -843,17 +843,17 @@ def TaprootSignatureMsg(txTo, spent_utxos, hash_type, input_index = 0, scriptpat\n def TaprootSignatureHash(*args, **kwargs):\n     return TaggedHash(\"TapSighash\", TaprootSignatureMsg(*args, **kwargs))\n \n-def taproot_tree_helper(scripts):\n+def taproot_tree_helper(scripts, leaf_version):\n     if len(scripts) == 0:\n         return ([], bytes())\n     if len(scripts) == 1:\n         # One entry: treat as a leaf\n         script = scripts[0]\n         assert not callable(script)\n         if isinstance(script, list):\n-            return taproot_tree_helper(script)\n+            return taproot_tree_helper(script, leaf_version)\n         assert isinstance(script, tuple)\n-        version = LEAF_VERSION_TAPSCRIPT",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29371#discussion_r1478878383",
      "id" : 1478878383,
      "in_reply_to_id" : 1478815788,
      "line" : 856,
      "node_id" : "PRRC_kwDOABII585YJeSv",
      "original_commit_id" : "fe53febee0288809184ef6f49131fa342ae86f7b",
      "original_line" : 856,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : 16,
      "pull_request_review_id" : 1863762383,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29371",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1478878383/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-05T20:31:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1478878383",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/78322931?v=4",
         "events_url" : "https://api.github.com/users/edilmedeiros/events{/privacy}",
         "followers_url" : "https://api.github.com/users/edilmedeiros/followers",
         "following_url" : "https://api.github.com/users/edilmedeiros/following{/other_user}",
         "gists_url" : "https://api.github.com/users/edilmedeiros/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/edilmedeiros",
         "id" : 78322931,
         "login" : "edilmedeiros",
         "node_id" : "MDQ6VXNlcjc4MzIyOTMx",
         "organizations_url" : "https://api.github.com/users/edilmedeiros/orgs",
         "received_events_url" : "https://api.github.com/users/edilmedeiros/received_events",
         "repos_url" : "https://api.github.com/users/edilmedeiros/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/edilmedeiros/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/edilmedeiros/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/edilmedeiros"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29371#discussion_r1478936428"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1478936428"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think you probably need to understand Taproot at least a bit to understand why we aren't changing the hard coded constant `0xc0` for now. I would recommend taking a look at #29221 to understand what a new using a _new_ leaf version looks like.\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/29221/files#diff-0d2e316fe5f2581b35d1703cfebba67e58b06d12edcea7262eb98f41e50410efR64",
      "commit_id" : "fe53febee0288809184ef6f49131fa342ae86f7b",
      "created_at" : "2024-02-05T21:38:25Z",
      "diff_hunk" : "@@ -843,17 +843,17 @@ def TaprootSignatureMsg(txTo, spent_utxos, hash_type, input_index = 0, scriptpat\n def TaprootSignatureHash(*args, **kwargs):\n     return TaggedHash(\"TapSighash\", TaprootSignatureMsg(*args, **kwargs))\n \n-def taproot_tree_helper(scripts):\n+def taproot_tree_helper(scripts, leaf_version):\n     if len(scripts) == 0:\n         return ([], bytes())\n     if len(scripts) == 1:\n         # One entry: treat as a leaf\n         script = scripts[0]\n         assert not callable(script)\n         if isinstance(script, list):\n-            return taproot_tree_helper(script)\n+            return taproot_tree_helper(script, leaf_version)\n         assert isinstance(script, tuple)\n-        version = LEAF_VERSION_TAPSCRIPT",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29371#discussion_r1478936428",
      "id" : 1478936428,
      "in_reply_to_id" : 1478815788,
      "line" : 856,
      "node_id" : "PRRC_kwDOABII585YJsds",
      "original_commit_id" : "fe53febee0288809184ef6f49131fa342ae86f7b",
      "original_line" : 856,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : 16,
      "pull_request_review_id" : 1863855798,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29371",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1478936428/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-05T21:39:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1478936428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3514957?v=4",
         "events_url" : "https://api.github.com/users/Christewart/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Christewart/followers",
         "following_url" : "https://api.github.com/users/Christewart/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Christewart/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Christewart",
         "id" : 3514957,
         "login" : "Christewart",
         "node_id" : "MDQ6VXNlcjM1MTQ5NTc=",
         "organizations_url" : "https://api.github.com/users/Christewart/orgs",
         "received_events_url" : "https://api.github.com/users/Christewart/received_events",
         "repos_url" : "https://api.github.com/users/Christewart/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Christewart/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Christewart/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Christewart"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29371#discussion_r1479508835"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479508835"
         }
      },
      "author_association" : "NONE",
      "body" : "this line should be removed and only `leaf_version` function argument should be used in the function. Both `version` and `leaf_version` will point to the same object [anyways](https://github.com/python/cpython/blob/4830f581af57dd305c02c1fd72299ecb5b090eca/Objects/longobject.c#L18-L23). Same with all  possible future leaf versions  [even 0xc0..0xfe](https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki#cite_note-7)",
      "commit_id" : "fe53febee0288809184ef6f49131fa342ae86f7b",
      "created_at" : "2024-02-06T10:00:29Z",
      "diff_hunk" : "@@ -843,17 +843,17 @@ def TaprootSignatureMsg(txTo, spent_utxos, hash_type, input_index = 0, scriptpat\n def TaprootSignatureHash(*args, **kwargs):\n     return TaggedHash(\"TapSighash\", TaprootSignatureMsg(*args, **kwargs))\n \n-def taproot_tree_helper(scripts):\n+def taproot_tree_helper(scripts, leaf_version):\n     if len(scripts) == 0:\n         return ([], bytes())\n     if len(scripts) == 1:\n         # One entry: treat as a leaf\n         script = scripts[0]\n         assert not callable(script)\n         if isinstance(script, list):\n-            return taproot_tree_helper(script)\n+            return taproot_tree_helper(script, leaf_version)\n         assert isinstance(script, tuple)\n-        version = LEAF_VERSION_TAPSCRIPT\n+        version = leaf_version",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29371#discussion_r1479508835",
      "id" : 1479508835,
      "line" : 856,
      "node_id" : "PRRC_kwDOABII585YL4Nj",
      "original_commit_id" : "fe53febee0288809184ef6f49131fa342ae86f7b",
      "original_line" : 856,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : 17,
      "pull_request_review_id" : 1864732480,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29371",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479508835/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T10:01:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479508835",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25349625?v=4",
         "events_url" : "https://api.github.com/users/scgbckbone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/scgbckbone/followers",
         "following_url" : "https://api.github.com/users/scgbckbone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/scgbckbone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/scgbckbone",
         "id" : 25349625,
         "login" : "scgbckbone",
         "node_id" : "MDQ6VXNlcjI1MzQ5NjI1",
         "organizations_url" : "https://api.github.com/users/scgbckbone/orgs",
         "received_events_url" : "https://api.github.com/users/scgbckbone/received_events",
         "repos_url" : "https://api.github.com/users/scgbckbone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/scgbckbone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/scgbckbone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/scgbckbone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29371#discussion_r1479995161"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29371"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479995161"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in 25dc427e6c755b4c0d68599966caf95ada3565f7 , thank you for the review.",
      "commit_id" : "25dc427e6c755b4c0d68599966caf95ada3565f7",
      "created_at" : "2024-02-06T15:08:19Z",
      "diff_hunk" : "@@ -843,17 +843,17 @@ def TaprootSignatureMsg(txTo, spent_utxos, hash_type, input_index = 0, scriptpat\n def TaprootSignatureHash(*args, **kwargs):\n     return TaggedHash(\"TapSighash\", TaprootSignatureMsg(*args, **kwargs))\n \n-def taproot_tree_helper(scripts):\n+def taproot_tree_helper(scripts, leaf_version):\n     if len(scripts) == 0:\n         return ([], bytes())\n     if len(scripts) == 1:\n         # One entry: treat as a leaf\n         script = scripts[0]\n         assert not callable(script)\n         if isinstance(script, list):\n-            return taproot_tree_helper(script)\n+            return taproot_tree_helper(script, leaf_version)\n         assert isinstance(script, tuple)\n-        version = LEAF_VERSION_TAPSCRIPT\n+        version = leaf_version",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29371#discussion_r1479995161",
      "id" : 1479995161,
      "in_reply_to_id" : 1479508835,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YNu8Z",
      "original_commit_id" : "fe53febee0288809184ef6f49131fa342ae86f7b",
      "original_line" : 856,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : null,
      "pull_request_review_id" : 1865497874,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29371",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479995161/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T15:08:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479995161",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3514957?v=4",
         "events_url" : "https://api.github.com/users/Christewart/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Christewart/followers",
         "following_url" : "https://api.github.com/users/Christewart/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Christewart/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Christewart",
         "id" : 3514957,
         "login" : "Christewart",
         "node_id" : "MDQ6VXNlcjM1MTQ5NTc=",
         "organizations_url" : "https://api.github.com/users/Christewart/orgs",
         "received_events_url" : "https://api.github.com/users/Christewart/received_events",
         "repos_url" : "https://api.github.com/users/Christewart/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Christewart/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Christewart/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Christewart"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I believe this CI failure is spurious: https://github.com/bitcoin/bitcoin/pull/29371/checks?check_run_id=21277712706\r\n\r\nCould someone restart the job ( :pray: ) or I can push an empty commit to restart everything.",
      "created_at" : "2024-02-06T15:53:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29371#issuecomment-1930102867",
      "id" : 1930102867,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29371",
      "node_id" : "IC_kwDOABII585zCwhT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1930102867/reactions"
      },
      "updated_at" : "2024-02-06T15:53:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1930102867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3514957?v=4",
         "events_url" : "https://api.github.com/users/Christewart/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Christewart/followers",
         "following_url" : "https://api.github.com/users/Christewart/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Christewart/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Christewart",
         "id" : 3514957,
         "login" : "Christewart",
         "node_id" : "MDQ6VXNlcjM1MTQ5NTc=",
         "organizations_url" : "https://api.github.com/users/Christewart/orgs",
         "received_events_url" : "https://api.github.com/users/Christewart/received_events",
         "repos_url" : "https://api.github.com/users/Christewart/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Christewart/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Christewart/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Christewart"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nIn order to avoid changes in functional tests and keep the patch small and simple, it probably would makes sense to set `LEAF_VERSION_TAPSCRIPT` as default value for parameter `leaf_version` for `taproot_construct()`?",
      "created_at" : "2024-03-12T16:34:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29371#issuecomment-1992085047",
      "id" : 1992085047,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29371",
      "node_id" : "IC_kwDOABII5852vM43",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992085047/reactions"
      },
      "updated_at" : "2024-03-12T16:34:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992085047",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> In order to avoid changes in functional tests and keep the patch small and simple, it probably would makes sense to set `LEAF_VERSION_TAPSCRIPT` as default value for parameter `leaf_version` for `taproot_construct()`?\r\n\r\nThis is more philsophical, but I really prefer not to provide default parameters to critical test code like this. It is SO easy to just forget to pass a parameter and have your test cases not test all possible branches of code! In this case, when dealing with consensus critical test cases, I think it should be required that the developer of the unit test pass in the tapscript version they are intending to test rather than us just assuming they want to test `LEAF_VERSION_TAPSCRIPT`. \r\n\r\nPlease see #29221 for examples of this. For instance if I forgot to pass `LEAF_VERSION_TAPSCRIPT_64BIT` in a specific spot I believe my tests would trivially pass because it is a soft fork!\r\n\r\nReasonable minds can differ of course, for future readers of the PR leave a comment or give me a :-1: if you disagree and would like to see the default parameter used in this case. If it is clear that I'm in the minority, I will change it. \r\n",
      "created_at" : "2024-03-12T19:26:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29371#issuecomment-1992382973",
      "id" : 1992382973,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29371",
      "node_id" : "IC_kwDOABII5852wVn9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992382973/reactions"
      },
      "updated_at" : "2024-03-12T19:29:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992382973",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3514957?v=4",
         "events_url" : "https://api.github.com/users/Christewart/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Christewart/followers",
         "following_url" : "https://api.github.com/users/Christewart/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Christewart/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Christewart",
         "id" : 3514957,
         "login" : "Christewart",
         "node_id" : "MDQ6VXNlcjM1MTQ5NTc=",
         "organizations_url" : "https://api.github.com/users/Christewart/orgs",
         "received_events_url" : "https://api.github.com/users/Christewart/received_events",
         "repos_url" : "https://api.github.com/users/Christewart/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Christewart/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Christewart/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Christewart"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "concept ACK\r\n\r\n> Reasonable minds can differ of course, for future readers of the PR leave a comment or give me a ð if you disagree and would like to see the default parameter used in this case. If it is clear that I'm in the minority, I will change it.\r\n\r\nWho am I to say, but I philosophically agree with your reasoning on not passing default parameters in critical test code.",
      "created_at" : "2024-04-10T17:29:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29371#issuecomment-2048105785",
      "id" : 2048105785,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29371",
      "node_id" : "IC_kwDOABII5856E505",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2048105785/reactions"
      },
      "updated_at" : "2024-04-10T17:29:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2048105785",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/11520757?v=4",
         "events_url" : "https://api.github.com/users/itornaza/events{/privacy}",
         "followers_url" : "https://api.github.com/users/itornaza/followers",
         "following_url" : "https://api.github.com/users/itornaza/following{/other_user}",
         "gists_url" : "https://api.github.com/users/itornaza/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/itornaza",
         "id" : 11520757,
         "login" : "itornaza",
         "node_id" : "MDQ6VXNlcjExNTIwNzU3",
         "organizations_url" : "https://api.github.com/users/itornaza/orgs",
         "received_events_url" : "https://api.github.com/users/itornaza/received_events",
         "repos_url" : "https://api.github.com/users/itornaza/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/itornaza/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/itornaza/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/itornaza"
      }
   }
]
