{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "Parent PR #28983\r\n\r\nThis is the first part of the Stratum v2 Template Provider change that can be a standalone pull request.\r\n\r\nThe Noise Protocol Framework is defined here: https://noiseprotocol.org/noise.html\r\n\r\nIt's quite similar to BIP324. The main differences are explained here, including why Stratum v2 can't use BIP234 (yet): https://delvingbitcoin.org/t/stratum-v2-noise-protocol-bip324-nuggets/413\r\n\r\nThe implementation is based on revision 38, 2018-07-11 (most recent at the time of writing).\r\n\r\nThe Stratum v2 spec defines the specific choice of ciphers: https://github.com/stratum-mining/sv2-spec/blob/main/04-Protocol-Security.md\r\n\r\nI proposed a modification to the spec to use EllSwift (instead of regular x-only) for the encoding of public keys and ECDH: https://github.com/stratum-mining/sv2-spec/pull/66 (see remark below)\r\n\r\nThis protocol has been implemented (modulo a few minor bugs and the above issue) in the Stratum Reference Implementation (SRI, using [rust-bitcoin](https://github.com/rust-bitcoin/rust-bitcoin)). https://github.com/stratum-mining/stratum\r\n\r\nIt has also been (independently) implemented in BraiinsOS. This part is currently not open source, and it's behind on some recent changes.\r\n\r\nThe classes in `sv2_noise.h` attempt to stay close to the paper, whereas the test and fuzzer code borrow heavily from BIP324.\r\n\r\nIt's ready for review, but not for merge:\r\n\r\n1. There's a small chance the use of EllSwift won't be accepted into the Stratum v2 spec, or there could be an implementation compatibility issue. I'll update the description when that's done.\r\n2. The parent PR may need more conceptual review (and perhaps the entire spec, but that would really slow things down)\r\n3. We could decide to not support Noise encryption at all and require users to install separate software for that. Code review of this PR could help inform that decision.\r\n\r\nYou can see this code in action in #28983. However the parent PR is used in several Stratum v2 test projects, so I try not to change it too often. It also must be kept bug-for-bug compatible with SRI, where this PR attempts to not have bugs. So at the moment there are three differences (which should go away over time):\r\n\r\n1. the use of EllSwift\r\n2. the fuzzer\r\n4. Bugfix https://github.com/Sjors/bitcoin/pull/33 (implemented here, but not yet merged on the SRI side)\r\n5. Bugfix https://github.com/Sjors/bitcoin/pull/29 \r\n\r\nTODO:\r\n- [ ] improve the fuzzer and upload an initial corpus",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29346/comments",
   "created_at" : "2024-01-29T16:14:50Z",
   "draft" : true,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29346/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/29346",
   "id" : 2105856059,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29346/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII585lWGHe",
   "number" : 29346,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/29346.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29346",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/29346.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29346"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29346/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29346/timeline",
   "title" : "Stratum v2 Noise Protocol",
   "updated_at" : "2024-01-29T16:14:55Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29346",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
      "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Sjors/followers",
      "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Sjors",
      "id" : 10217,
      "login" : "Sjors",
      "node_id" : "MDQ6VXNlcjEwMjE3",
      "organizations_url" : "https://api.github.com/users/Sjors/orgs",
      "received_events_url" : "https://api.github.com/users/Sjors/received_events",
      "repos_url" : "https://api.github.com/users/Sjors/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Sjors"
   }
}
