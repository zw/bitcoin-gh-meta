[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29372).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [delta1](https://github.com/bitcoin/bitcoin/pull/29372#issuecomment-1925867216), [stratospher](https://github.com/bitcoin/bitcoin/pull/29372#pullrequestreview-1861953032), [achow101](https://github.com/bitcoin/bitcoin/pull/29372#issuecomment-1935056868) |\n| Concept ACK | [epiccurious](https://github.com/bitcoin/bitcoin/pull/29372#issuecomment-1931126349) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26863](https://github.com/bitcoin/bitcoin/pull/26863) (test: merge banning test from p2p_disconnect_ban to rpc_setban by brunoerg)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-02-02T18:23:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29372#issuecomment-1924449161",
      "id" : 1924449161,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29372",
      "node_id" : "IC_kwDOABII585ytMOJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1924449161/reactions"
      },
      "updated_at" : "2024-02-08T22:50:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1924449161",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "tested ACK cc87ee4c3934028e78a59de509951ff7226ec80d",
      "created_at" : "2024-02-04T18:05:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29372#issuecomment-1925867216",
      "id" : 1925867216,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29372",
      "node_id" : "IC_kwDOABII585yymbQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1925867216/reactions"
      },
      "updated_at" : "2024-02-04T18:05:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1925867216",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/351403?v=4",
         "events_url" : "https://api.github.com/users/delta1/events{/privacy}",
         "followers_url" : "https://api.github.com/users/delta1/followers",
         "following_url" : "https://api.github.com/users/delta1/following{/other_user}",
         "gists_url" : "https://api.github.com/users/delta1/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/delta1",
         "id" : 351403,
         "login" : "delta1",
         "node_id" : "MDQ6VXNlcjM1MTQwMw==",
         "organizations_url" : "https://api.github.com/users/delta1/orgs",
         "received_events_url" : "https://api.github.com/users/delta1/received_events",
         "repos_url" : "https://api.github.com/users/delta1/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/delta1/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/delta1/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/delta1"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I don't think this is something to stall a merge, but I could not make the test fail in master. I tried with different loads in my machine from other work.\r\n\r\nHow are you calling it?\r\n\r\n```\r\nâ¯ python test/functional/rpc_setban.py\r\n2024-02-05T17:48:04.516000Z TestFramework (INFO): PRNG seed is: 2620849867157253531\r\n2024-02-05T17:48:04.517000Z TestFramework (INFO): Initializing test directory /var/folders/pk/trlzyy614z11wn_y1t8vhsz80000gn/T/bitcoin_func_test_tqvcwu8u\r\n2024-02-05T17:48:06.209000Z TestFramework (INFO): Test that a non-IP address can be banned/unbanned\r\n2024-02-05T17:48:06.210000Z TestFramework (INFO): Test the ban list is preserved through restart\r\n2024-02-05T17:48:06.890000Z TestFramework (INFO): Test -bantime\r\n2024-02-05T17:48:07.369000Z TestFramework (INFO): Stopping nodes\r\n2024-02-05T17:48:07.477000Z TestFramework (INFO): Cleaning up /var/folders/pk/trlzyy614z11wn_y1t8vhsz80000gn/T/bitcoin_func_test_tqvcwu8u on exit\r\n2024-02-05T17:48:07.477000Z TestFramework (INFO): Tests successful\r\n```",
      "created_at" : "2024-02-05T17:53:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29372#issuecomment-1927616766",
      "id" : 1927616766,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29372",
      "node_id" : "IC_kwDOABII585y5Rj-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1927616766/reactions"
      },
      "updated_at" : "2024-02-05T17:54:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1927616766",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/78322931?v=4",
         "events_url" : "https://api.github.com/users/edilmedeiros/events{/privacy}",
         "followers_url" : "https://api.github.com/users/edilmedeiros/followers",
         "following_url" : "https://api.github.com/users/edilmedeiros/following{/other_user}",
         "gists_url" : "https://api.github.com/users/edilmedeiros/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/edilmedeiros",
         "id" : 78322931,
         "login" : "edilmedeiros",
         "node_id" : "MDQ6VXNlcjc4MzIyOTMx",
         "organizations_url" : "https://api.github.com/users/edilmedeiros/orgs",
         "received_events_url" : "https://api.github.com/users/edilmedeiros/received_events",
         "repos_url" : "https://api.github.com/users/edilmedeiros/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/edilmedeiros/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/edilmedeiros/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/edilmedeiros"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I could not make the test fail in master\r\n\r\n> â¯ python test/functional/rpc_setban.py\r\n\r\nYou have to call it with v2, see PR title: `rpc_setban.py --v2transport`.",
      "created_at" : "2024-02-05T17:59:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29372#issuecomment-1927633640",
      "id" : 1927633640,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29372",
      "node_id" : "IC_kwDOABII585y5Vro",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1927633640/reactions"
      },
      "updated_at" : "2024-02-05T17:59:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1927633640",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I'm sorry for not being clear in my comment. \r\nI tried that with your code, and it runs something that passes (see below). \r\n\r\nMy point is that running `rpc_setban.py` in 5b8c5970 does not seem to fail in any way in my box.\r\nThe mentioned commit passed the CI tests.\r\nI understand I'm a newcomer, and I'm trying to learn how the tests work by reproducing the error you found instead of just reading the code in the PR.\r\n\r\nYet, I don't see this as a problem to merge. \r\nIt might be an issue triggered by some specificity in your box, but not mine.\r\n\r\n\r\n```\r\nâ¯ python test/functional/rpc_setban.py\r\n2024-02-05T18:36:28.549000Z TestFramework (INFO): PRNG seed is: 7243494276342072324\r\n2024-02-05T18:36:28.550000Z TestFramework (INFO): Initializing test directory /var/folders/pk/trlzyy614z11wn_y1t8vhsz80000gn/T/bitcoin_func_test_w4vk2rv2\r\n2024-02-05T18:36:30.718000Z TestFramework (INFO): Test that a non-IP address can be banned/unbanned\r\n2024-02-05T18:36:30.719000Z TestFramework (INFO): Test the ban list is preserved through restart\r\n2024-02-05T18:36:31.403000Z TestFramework (INFO): Test -bantime\r\n2024-02-05T18:36:31.882000Z TestFramework (INFO): Stopping nodes\r\n2024-02-05T18:36:31.993000Z TestFramework (INFO): Cleaning up /var/folders/pk/trlzyy614z11wn_y1t8vhsz80000gn/T/bitcoin_func_test_w4vk2rv2 on exit\r\n2024-02-05T18:36:31.993000Z TestFramework (INFO): Tests successful\r\n```\r\n\r\n```\r\nâ¯ python test/functional/rpc_setban.py --v2transport\r\n2024-02-05T18:36:38.617000Z TestFramework (INFO): PRNG seed is: 3082398001401933771\r\n2024-02-05T18:36:38.618000Z TestFramework (INFO): Initializing test directory /var/folders/pk/trlzyy614z11wn_y1t8vhsz80000gn/T/bitcoin_func_test_lj9gxqtg\r\n2024-02-05T18:36:41.687000Z TestFramework (INFO): Test that a non-IP address can be banned/unbanned\r\n2024-02-05T18:36:41.688000Z TestFramework (INFO): Test the ban list is preserved through restart\r\n2024-02-05T18:36:42.371000Z TestFramework (INFO): Test -bantime\r\n2024-02-05T18:36:42.850000Z TestFramework (INFO): Stopping nodes\r\n2024-02-05T18:36:42.961000Z TestFramework (INFO): Cleaning up /var/folders/pk/trlzyy614z11wn_y1t8vhsz80000gn/T/bitcoin_func_test_lj9gxqtg on exit\r\n2024-02-05T18:36:42.961000Z TestFramework (INFO): Tests successful\r\n```",
      "created_at" : "2024-02-05T18:59:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29372#issuecomment-1927837780",
      "id" : 1927837780,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29372",
      "node_id" : "IC_kwDOABII585y6HhU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1927837780/reactions"
      },
      "updated_at" : "2024-02-05T19:00:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1927837780",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/78322931?v=4",
         "events_url" : "https://api.github.com/users/edilmedeiros/events{/privacy}",
         "followers_url" : "https://api.github.com/users/edilmedeiros/followers",
         "following_url" : "https://api.github.com/users/edilmedeiros/following{/other_user}",
         "gists_url" : "https://api.github.com/users/edilmedeiros/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/edilmedeiros",
         "id" : 78322931,
         "login" : "edilmedeiros",
         "node_id" : "MDQ6VXNlcjc4MzIyOTMx",
         "organizations_url" : "https://api.github.com/users/edilmedeiros/orgs",
         "received_events_url" : "https://api.github.com/users/edilmedeiros/received_events",
         "repos_url" : "https://api.github.com/users/edilmedeiros/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/edilmedeiros/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/edilmedeiros/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/edilmedeiros"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Concept ACK cc87ee4c3934028e78a59de509951ff7226ec80d.",
      "created_at" : "2024-02-07T02:13:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29372#issuecomment-1931126349",
      "id" : 1931126349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29372",
      "node_id" : "IC_kwDOABII585zGqZN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1931126349/reactions"
      },
      "updated_at" : "2024-02-07T02:13:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1931126349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/109078515?v=4",
         "events_url" : "https://api.github.com/users/epiccurious/events{/privacy}",
         "followers_url" : "https://api.github.com/users/epiccurious/followers",
         "following_url" : "https://api.github.com/users/epiccurious/following{/other_user}",
         "gists_url" : "https://api.github.com/users/epiccurious/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/epiccurious",
         "id" : 109078515,
         "login" : "epiccurious",
         "node_id" : "U_kgDOBoBn8w",
         "organizations_url" : "https://api.github.com/users/epiccurious/orgs",
         "received_events_url" : "https://api.github.com/users/epiccurious/received_events",
         "repos_url" : "https://api.github.com/users/epiccurious/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/epiccurious/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/epiccurious/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/epiccurious"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK cc87ee4c3934028e78a59de509951ff7226ec80d",
      "created_at" : "2024-02-08T22:50:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29372#issuecomment-1935056868",
      "id" : 1935056868,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29372",
      "node_id" : "IC_kwDOABII585zVp_k",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1935056868/reactions"
      },
      "updated_at" : "2024-02-08T22:50:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1935056868",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
