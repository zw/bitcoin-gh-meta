[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29358).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [vasild](https://github.com/bitcoin/bitcoin/pull/29358#pullrequestreview-1875604974), [stratospher](https://github.com/bitcoin/bitcoin/pull/29358#pullrequestreview-1875752974), [theStack](https://github.com/bitcoin/bitcoin/pull/29358#pullrequestreview-1880066965), [fjahr](https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1954281008) |\n| Stale ACK | [epiccurious](https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1923932584) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29431](https://github.com/bitcoin/bitcoin/pull/29431) (test/BIP324: disconnection scenarios during v2 handshake by stratospher)\n* [#29420](https://github.com/bitcoin/bitcoin/pull/29420) (test: extend the SOCKS5 Python proxy to actually connect to a destination by vasild)\n* [#29415](https://github.com/bitcoin/bitcoin/pull/29415) (Broadcast own transactions only via short-lived Tor or I2P connections by vasild)\n* [#29279](https://github.com/bitcoin/bitcoin/pull/29279) (test: p2p: check disconnect due to lack of desirable service flags by theStack)\n* [#28521](https://github.com/bitcoin/bitcoin/pull/28521) (net: additional disconnect logging by Sjors)\n* [#28463](https://github.com/bitcoin/bitcoin/pull/28463) (p2p: Increase inbound capacity for block-relay only connections by mzumsande)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-01-31T19:22:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1919777717",
      "id" : 1919777717,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29358",
      "node_id" : "IC_kwDOABII585ybXu1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919777717/reactions"
      },
      "updated_at" : "2024-02-20T14:02:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919777717",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hmm, \"test each commit fails\" The problem is that commit 606f4f32014f029a6999d7f94b7231fefafdf55f (which switches `P2PConnection` to v2 by default) is enabled last. It might be best to squash everything into one big commit (even if that might make review a bit harder) or I'd have to add some temporary workarounds. Opinions?",
      "created_at" : "2024-01-31T20:59:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1919948720",
      "id" : 1919948720,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29358",
      "node_id" : "IC_kwDOABII585ycBew",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919948720/reactions"
      },
      "updated_at" : "2024-01-31T20:59:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919948720",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2024-01-31T22:21:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1920078594",
      "id" : 1920078594,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29358",
      "node_id" : "IC_kwDOABII585ychMC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1920078594/reactions"
      },
      "updated_at" : "2024-01-31T22:21:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1920078594",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Hmm, \"test each commit fails\" The problem is that commit https://github.com/bitcoin/bitcoin/commit/606f4f32014f029a6999d7f94b7231fefafdf55f (which switches P2PConnection to v2 by default) is enabled last. It might be best to squash everything into one big commit (even if that might make review a bit harder) or I'd have to add some temporary workarounds. Opinions?\r\n\r\nwould reordering the commits to keep the last commit as first commit work? reviewing is definitely easier with separate commits.",
      "created_at" : "2024-02-01T05:50:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1920563086",
      "id" : 1920563086,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29358",
      "node_id" : "IC_kwDOABII585yeXeO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1920563086/reactions"
      },
      "updated_at" : "2024-02-01T05:50:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1920563086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Testing looks good so far:\r\n```\r\nTEST                              | STATUS    | DURATION\r\n\r\nfeature_block.py                  | â Passed  | 67 s\r\nfeature_maxuploadtarget.py        | â Passed  | 58 s\r\np2p_ibd_stalling.py               | â Passed  | 7 s\r\np2p_ibd_stalling.py --v2transport | â Passed  | 8 s\r\np2p_invalid_messages.py           | â Passed  | 15 s\r\np2p_timeouts.py                   | â Passed  | 1 s\r\np2p_timeouts.py --v2transport     | â Passed  | 1 s\r\np2p_v2_earlykeyresponse.py        | â Passed  | 5 s\r\nrpc_net.py                        | â Passed  | 14 s\r\nrpc_net.py --v2transport          | â Passed  | 10 s\r\n\r\nALL                               | â Passed  | 186 s (accumulated) \r\nRuntime: 67 s\r\n```\r\n\r\n(Noob question) I'm struggling to test the changes in `test_node.py`. Any Idea what I'm doing wrong here?\r\n```\r\nuser1@comp1:~/bitcoin-pull-29358$ python3 test/functional/test_framework/test_node.py\r\nTraceback (most recent call last):\r\n  File \"/home/user1/bitcoin-pull-29358/test/functional/test_framework/test_node.py\", line 25, in <module>\r\n    from .authproxy import (\r\nImportError: attempted relative import with no known parent package\r\nuser1@comp1:~/bitcoin-pull-29358$ python3 test/functional/test_runner.py test/functional/test_framework/test_node.py\r\nTemporary test directory at /tmp/test_runner_â¿_ð_20240201_101326\r\nWARNING! Test 'test/functional/test_framework/test_node.py' not found in full test list.\r\nNo valid test scripts specified. Check that your test is in one of the test lists in test_runner.py, or run test_runner.py with no arguments to run all tests\r\n```",
      "created_at" : "2024-02-01T15:14:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1921562521",
      "id" : 1921562521,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29358",
      "node_id" : "IC_kwDOABII585yiLeZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1921562521/reactions"
      },
      "updated_at" : "2024-02-01T15:14:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1921562521",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/109078515?v=4",
         "events_url" : "https://api.github.com/users/epiccurious/events{/privacy}",
         "followers_url" : "https://api.github.com/users/epiccurious/followers",
         "following_url" : "https://api.github.com/users/epiccurious/following{/other_user}",
         "gists_url" : "https://api.github.com/users/epiccurious/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/epiccurious",
         "id" : 109078515,
         "login" : "epiccurious",
         "node_id" : "U_kgDOBoBn8w",
         "organizations_url" : "https://api.github.com/users/epiccurious/orgs",
         "received_events_url" : "https://api.github.com/users/epiccurious/received_events",
         "repos_url" : "https://api.github.com/users/epiccurious/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/epiccurious/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/epiccurious/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/epiccurious"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> I added a commit disabling a few select subtests\r\n\r\nRather than disabling, would it make sense to keep these subtests enabled but just not use v2transport?",
      "created_at" : "2024-02-01T15:35:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1921607926",
      "id" : 1921607926,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29358",
      "node_id" : "IC_kwDOABII585yiWj2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1921607926/reactions"
      },
      "updated_at" : "2024-02-01T15:36:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1921607926",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/109078515?v=4",
         "events_url" : "https://api.github.com/users/epiccurious/events{/privacy}",
         "followers_url" : "https://api.github.com/users/epiccurious/followers",
         "following_url" : "https://api.github.com/users/epiccurious/following{/other_user}",
         "gists_url" : "https://api.github.com/users/epiccurious/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/epiccurious",
         "id" : 109078515,
         "login" : "epiccurious",
         "node_id" : "U_kgDOBoBn8w",
         "organizations_url" : "https://api.github.com/users/epiccurious/orgs",
         "received_events_url" : "https://api.github.com/users/epiccurious/received_events",
         "repos_url" : "https://api.github.com/users/epiccurious/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/epiccurious/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/epiccurious/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/epiccurious"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> would reordering the commits to keep the last commit as first commit work? reviewing is definitely easier with separate commits.\r\n\r\nThat wouldn't work either, because with that last commit we actually use v2 when using P2PConnection  (if `--v2transport` is chosen), so all of the tests that are fixed in this PR would fail. The problem is that we already list multiple the tests in the test runner with `--v2transport` but actually use `v1` with `P2PConnection`...\r\nI'll try to think of other solutions. Or maybe I'll just keep it as single commits for now and when it comes closer to merging I'll squash this branch and link to a second branch here that is unsquashed but otherwise identical.\r\n\r\n> (Noob question) I'm struggling to test the changes in test_node.py. Any Idea what I'm doing wrong here?\r\n\r\n`test_node.py` (and the other files in the `test/functional/test_framework` subfolder) are not actual tests that can be executed directly, only the actual tests inside the `test/functional` folder can.\r\n\r\n> Rather than disabling, would it make sense to keep these subtests enabled but just not use v2transport?\r\n\r\nYes, that makes sense I'll try that out!",
      "created_at" : "2024-02-01T19:09:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1922038851",
      "id" : 1922038851,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29358",
      "node_id" : "IC_kwDOABII585yj_xD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1922038851/reactions"
      },
      "updated_at" : "2024-02-01T19:10:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1922038851",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "rebased and always use v1 instead of disabling completely in the three slow (sub)tests.",
      "created_at" : "2024-02-01T20:36:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1922201347",
      "id" : 1922201347,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29358",
      "node_id" : "IC_kwDOABII585ykncD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1922201347/reactions"
      },
      "updated_at" : "2024-02-01T20:36:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1922201347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2024-02-02T12:45:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1923734576",
      "id" : 1923734576,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29358",
      "node_id" : "IC_kwDOABII585yqdww",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1923734576/reactions"
      },
      "updated_at" : "2024-02-02T12:45:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1923734576",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Tested ACK d8165db8e889f423351ae35fd375c982e793d136.\r\n\r\n>not actual tests that can be executed directly\r\n\r\nThanks for the clarification.\r\n\r\nCertain tests take longer to run, to be expected with the added sub-tests.\r\n```\r\nTEST                              | STATUS    | DURATION\r\n\r\nfeature_block.py                  | â Passed  | 197 s\r\nfeature_maxuploadtarget.py        | â Passed  | 59 s\r\np2p_ibd_stalling.py               | â Passed  | 59 s\r\np2p_ibd_stalling.py --v2transport | â Passed  | 58 s\r\np2p_invalid_messages.py           | â Passed  | 58 s\r\np2p_timeouts.py                   | â Passed  | 1 s\r\np2p_timeouts.py --v2transport     | â Passed  | 1 s\r\np2p_v2_earlykeyresponse.py        | â Passed  | 4 s\r\nrpc_net.py                        | â Passed  | 22 s\r\nrpc_net.py --v2transport          | â Passed  | 19 s\r\n\r\nALL                               | â Passed  | 478 s (accumulated) \r\nRuntime: 197 s\r\n```",
      "created_at" : "2024-02-02T14:08:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1923932584",
      "id" : 1923932584,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29358",
      "node_id" : "IC_kwDOABII585yrOGo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1923932584/reactions"
      },
      "updated_at" : "2024-02-02T14:14:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1923932584",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/109078515?v=4",
         "events_url" : "https://api.github.com/users/epiccurious/events{/privacy}",
         "followers_url" : "https://api.github.com/users/epiccurious/followers",
         "following_url" : "https://api.github.com/users/epiccurious/following{/other_user}",
         "gists_url" : "https://api.github.com/users/epiccurious/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/epiccurious",
         "id" : 109078515,
         "login" : "epiccurious",
         "node_id" : "U_kgDOBoBn8w",
         "organizations_url" : "https://api.github.com/users/epiccurious/orgs",
         "received_events_url" : "https://api.github.com/users/epiccurious/received_events",
         "repos_url" : "https://api.github.com/users/epiccurious/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/epiccurious/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/epiccurious/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/epiccurious"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1476295813"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476295813"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "d065b33: nit: ChaCha20 typo here and in feature_block.py",
      "commit_id" : "d8165db8e889f423351ae35fd375c982e793d136",
      "created_at" : "2024-02-02T16:42:50Z",
      "diff_hunk" : "@@ -67,7 +67,8 @@ def run_test(self):\n         p2p_conns = []\n \n         for _ in range(3):\n-            p2p_conns.append(self.nodes[0].add_p2p_connection(TestP2PConn()))\n+            # Don't use v2transport in this test (too slow with the unoptimized python ChCha20 implementation)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1476295813",
      "id" : 1476295813,
      "line" : 70,
      "node_id" : "PRRC_kwDOABII585X_nyF",
      "original_commit_id" : "d065b33b252d0bbe45404448cd032c10d291b348",
      "original_line" : 70,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/feature_maxuploadtarget.py",
      "position" : 5,
      "pull_request_review_id" : 1859682894,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476295813/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-02T17:36:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476295813",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1476463624"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476463624"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "d065b33: maybe say only for `LARGE_REORG_SIZE` tests? because the last 2 tests have v2 peers after [reconnection](https://github.com/bitcoin/bitcoin/blob/d8165db8e889f423351ae35fd375c982e793d136/test/functional/feature_block.py#L1312-L1320) due to block height mismatch/invalid block header version.",
      "commit_id" : "d8165db8e889f423351ae35fd375c982e793d136",
      "created_at" : "2024-02-02T17:35:02Z",
      "diff_hunk" : "@@ -1263,6 +1263,10 @@ def run_test(self):\n         b89a = self.update_block(\"89a\", [tx])\n         self.send_blocks([b89a], success=False, reject_reason='bad-txns-inputs-missingorspent', reconnect=True)\n \n+        # Don't use v2transport for the remaining tests, the large reorg is very slow with the unoptimized python ChCha20 implementation",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1476463624",
      "id" : 1476463624,
      "line" : 1266,
      "node_id" : "PRRC_kwDOABII585YAQwI",
      "original_commit_id" : "d065b33b252d0bbe45404448cd032c10d291b348",
      "original_line" : 1266,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/feature_block.py",
      "position" : 4,
      "pull_request_review_id" : 1859682894,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476463624/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-02T17:36:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476463624",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Will address feedback and https://github.com/bitcoin/bitcoin/pull/29356#discussion_r1478769478 after the merge of #29356",
      "created_at" : "2024-02-05T19:45:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1927937515",
      "id" : 1927937515,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29358",
      "node_id" : "IC_kwDOABII585y6f3r",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1927937515/reactions"
      },
      "updated_at" : "2024-02-05T19:45:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1927937515",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1481918788"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1481918788"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed",
      "commit_id" : "b9912e2df9767540ab7f53cb3ba37fd2e2491806",
      "created_at" : "2024-02-07T18:32:38Z",
      "diff_hunk" : "@@ -67,7 +67,8 @@ def run_test(self):\n         p2p_conns = []\n \n         for _ in range(3):\n-            p2p_conns.append(self.nodes[0].add_p2p_connection(TestP2PConn()))\n+            # Don't use v2transport in this test (too slow with the unoptimized python ChCha20 implementation)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1481918788",
      "id" : 1481918788,
      "in_reply_to_id" : 1476295813,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YVElE",
      "original_commit_id" : "d065b33b252d0bbe45404448cd032c10d291b348",
      "original_line" : 70,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/feature_maxuploadtarget.py",
      "position" : null,
      "pull_request_review_id" : 1868516671,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1481918788/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-07T18:32:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1481918788",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1481919762"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1481919762"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "good point, done something similar.",
      "commit_id" : "b9912e2df9767540ab7f53cb3ba37fd2e2491806",
      "created_at" : "2024-02-07T18:33:37Z",
      "diff_hunk" : "@@ -1263,6 +1263,10 @@ def run_test(self):\n         b89a = self.update_block(\"89a\", [tx])\n         self.send_blocks([b89a], success=False, reject_reason='bad-txns-inputs-missingorspent', reconnect=True)\n \n+        # Don't use v2transport for the remaining tests, the large reorg is very slow with the unoptimized python ChCha20 implementation",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1481919762",
      "id" : 1481919762,
      "in_reply_to_id" : 1476463624,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YVE0S",
      "original_commit_id" : "d065b33b252d0bbe45404448cd032c10d291b348",
      "original_line" : 1266,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/feature_block.py",
      "position" : null,
      "pull_request_review_id" : 1868518208,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1481919762/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-07T18:33:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1481919762",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I have addressed feedback and squashed several test fixes into the last commit, so that the \"test each commit\" CI is hopefully green now. I have an unsquashed version at https://github.com/mzumsande/bitcoin/tree/202401_bip324_alltests_unsquashed, in case that helps with review.",
      "created_at" : "2024-02-07T18:35:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1932645404",
      "id" : 1932645404,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29358",
      "node_id" : "IC_kwDOABII585zMdQc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1932645404/reactions"
      },
      "updated_at" : "2024-02-07T18:35:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1932645404",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1485622195"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1485622195"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: in commit message of b9912e2df9767540ab7f53cb3ba37fd2e2491806 `test: enable v2 for python p2p depending on global --v2transport flag`:\r\n\r\n* s/all connection/all connections/\r\n* \"before this test\" - should this be \"before this change\"?",
      "commit_id" : "bf5662c678455fb47c402f8520215726ddfe7a94",
      "created_at" : "2024-02-11T16:12:34Z",
      "diff_hunk" : "@@ -80,7 +80,8 @@ def run_test(self):\n \n         # Need to wait until 1023 blocks are received - the magic total bytes number is a workaround in lack of an rpc\n         # returning the number of downloaded (but not connected) blocks.\n-        self.wait_until(lambda: self.total_bytes_recv_for_blocks() == 172761)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1485622195",
      "id" : 1485622195,
      "line" : 83,
      "node_id" : "PRRC_kwDOABII585YjMuz",
      "original_commit_id" : "b9912e2df9767540ab7f53cb3ba37fd2e2491806",
      "original_line" : 83,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/p2p_ibd_stalling.py",
      "position" : 4,
      "pull_request_review_id" : 1874395839,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1485622195/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-11T17:27:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1485622195",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1485626063"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1485626063"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`test/functional/test_runner.py` contains:\r\n\r\n```py\r\n    'rpc_net.py',\r\n    'rpc_net.py --v2transport',\r\n```\r\n\r\nSo, on `master`, when I execute `test_runner.py` it will run this test two times, once in v1 mode and once in v2 mode. What about if I run, with this PR, `test_runner.py --v2transport`? Would that execute `rpc_net.py` two times and both in v2 mode? If yes, then what about adding `--v1transport` option as well? Or maybe just change the above to just:\r\n\r\n```py\r\n    'rpc_net.py',\r\n```\r\n\r\nand expect that callers will run `test_runner.py` and `test_runener.py --v2transport`?",
      "commit_id" : "bf5662c678455fb47c402f8520215726ddfe7a94",
      "created_at" : "2024-02-11T16:37:28Z",
      "diff_hunk" : "@@ -69,11 +69,8 @@ def run_test(self):\n         with self.nodes[0].assert_debug_log(['Unsupported message \"ping\" prior to verack from peer=0']):\n             no_verack_node.send_message(msg_ping())\n \n-        # With v2, non-version messages before the handshake would be interpreted as part of the key exchange.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1485626063",
      "id" : 1485626063,
      "line" : 72,
      "node_id" : "PRRC_kwDOABII585YjNrP",
      "original_commit_id" : "b9912e2df9767540ab7f53cb3ba37fd2e2491806",
      "original_line" : 72,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/p2p_timeouts.py",
      "position" : 4,
      "pull_request_review_id" : 1874395839,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1485626063/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-11T17:27:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1485626063",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1486367765"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486367765"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Would that execute `rpc_net.py` two times and both in v2 mode?\r\n\r\nYes, although it's not really related to this PR it's the same on master (just that `P2PConnection`s use v1 both times there).\r\nI had thought about this before and was thinking of addressing it in a follow-up PR, which would also add a CI job for `--v2transport`.\r\nThe downside of dropping the `--v2transport` specific jobs from `test_runner.py` is that these would be executed a lot less by individuals running the test suite (even if we have a `--v2transport` CI job for one specific platform). So I kind of tend to prefer something like `--v1transport`, especially since the test that run twice currently don't take a lot of time compared to the longest running jobs.",
      "commit_id" : "bf5662c678455fb47c402f8520215726ddfe7a94",
      "created_at" : "2024-02-12T15:43:24Z",
      "diff_hunk" : "@@ -69,11 +69,8 @@ def run_test(self):\n         with self.nodes[0].assert_debug_log(['Unsupported message \"ping\" prior to verack from peer=0']):\n             no_verack_node.send_message(msg_ping())\n \n-        # With v2, non-version messages before the handshake would be interpreted as part of the key exchange.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1486367765",
      "id" : 1486367765,
      "in_reply_to_id" : 1485626063,
      "line" : 72,
      "node_id" : "PRRC_kwDOABII585YmCwV",
      "original_commit_id" : "b9912e2df9767540ab7f53cb3ba37fd2e2491806",
      "original_line" : 72,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/p2p_timeouts.py",
      "position" : 4,
      "pull_request_review_id" : 1875538926,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486367765/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-12T15:43:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486367765",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1486374392"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486374392"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "yes. Fixed both.",
      "commit_id" : "bf5662c678455fb47c402f8520215726ddfe7a94",
      "created_at" : "2024-02-12T15:47:58Z",
      "diff_hunk" : "@@ -80,7 +80,8 @@ def run_test(self):\n \n         # Need to wait until 1023 blocks are received - the magic total bytes number is a workaround in lack of an rpc\n         # returning the number of downloaded (but not connected) blocks.\n-        self.wait_until(lambda: self.total_bytes_recv_for_blocks() == 172761)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1486374392",
      "id" : 1486374392,
      "in_reply_to_id" : 1485622195,
      "line" : 83,
      "node_id" : "PRRC_kwDOABII585YmEX4",
      "original_commit_id" : "b9912e2df9767540ab7f53cb3ba37fd2e2491806",
      "original_line" : 83,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/p2p_ibd_stalling.py",
      "position" : 4,
      "pull_request_review_id" : 1875549379,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486374392/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-12T15:47:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486374392",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "[b9912e2 ](https://github.com/bitcoin/bitcoin/commit/b9912e2df9767540ab7f53cb3ba37fd2e2491806)to [bf5662c](https://github.com/bitcoin/bitcoin/commit/bf5662c678455fb47c402f8520215726ddfe7a94): just small fixes to the last commit message.",
      "created_at" : "2024-02-12T15:49:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1938941846",
      "id" : 1938941846,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29358",
      "node_id" : "IC_kwDOABII585zkeeW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1938941846/reactions"
      },
      "updated_at" : "2024-02-12T15:49:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1938941846",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1486432039"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486432039"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Alright, \"it's the same on master\" that is a good point!\r\n\r\nSo, if we have `--v1transport` (for each individual test and for `test_runner.py`?) then what would happen if ran without either one of `--v1transport` or `--v2transport`?",
      "commit_id" : "bf5662c678455fb47c402f8520215726ddfe7a94",
      "created_at" : "2024-02-12T16:17:36Z",
      "diff_hunk" : "@@ -69,11 +69,8 @@ def run_test(self):\n         with self.nodes[0].assert_debug_log(['Unsupported message \"ping\" prior to verack from peer=0']):\n             no_verack_node.send_message(msg_ping())\n \n-        # With v2, non-version messages before the handshake would be interpreted as part of the key exchange.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1486432039",
      "id" : 1486432039,
      "in_reply_to_id" : 1485626063,
      "line" : 72,
      "node_id" : "PRRC_kwDOABII585YmScn",
      "original_commit_id" : "b9912e2df9767540ab7f53cb3ba37fd2e2491806",
      "original_line" : 72,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/p2p_timeouts.py",
      "position" : 4,
      "pull_request_review_id" : 1875639967,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486432039/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-12T16:17:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486432039",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1486473051"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486473051"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "We'd have to make some kind of decision what to default to - maybe v1 now and switch to v2 after a majority of the network has upgraded?\r\nMy idea for now was to only add `--v1transport` in `test_runner.py` to the few tests that are run twice, not everywhere.",
      "commit_id" : "bf5662c678455fb47c402f8520215726ddfe7a94",
      "created_at" : "2024-02-12T16:42:42Z",
      "diff_hunk" : "@@ -69,11 +69,8 @@ def run_test(self):\n         with self.nodes[0].assert_debug_log(['Unsupported message \"ping\" prior to verack from peer=0']):\n             no_verack_node.send_message(msg_ping())\n \n-        # With v2, non-version messages before the handshake would be interpreted as part of the key exchange.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1486473051",
      "id" : 1486473051,
      "in_reply_to_id" : 1485626063,
      "line" : 72,
      "node_id" : "PRRC_kwDOABII585Ymcdb",
      "original_commit_id" : "b9912e2df9767540ab7f53cb3ba37fd2e2491806",
      "original_line" : 72,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/p2p_timeouts.py",
      "position" : 4,
      "pull_request_review_id" : 1875703509,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486473051/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-12T16:43:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486473051",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1489336354"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489336354"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "in commit 5fc9db504b9ac784019e7e8c215c31abfccb62b6, method `add_outbound_p2p_connection`:\r\nIs this wait needed? IIUC, the wait in the line below should be sufficient, as it can only pass if a v2 handshake has already happened",
      "commit_id" : "bf5662c678455fb47c402f8520215726ddfe7a94",
      "created_at" : "2024-02-14T11:38:44Z",
      "diff_hunk" : "@@ -771,6 +773,8 @@ def addconnection_callback(address, port):\n             p2p_conn.wait_for_connect()\n             self.p2ps.append(p2p_conn)\n \n+            if supports_v2_p2p:\n+                p2p_conn.wait_until(lambda: p2p_conn.v2_state.tried_v2_handshake)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1489336354",
      "id" : 1489336354,
      "line" : 785,
      "node_id" : "PRRC_kwDOABII585YxXgi",
      "original_commit_id" : "5fc9db504b9ac784019e7e8c215c31abfccb62b6",
      "original_line" : 777,
      "original_position" : 23,
      "original_start_line" : 776,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : 54,
      "pull_request_review_id" : 1880066965,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489336354/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 784,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-14T11:40:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489336354",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1490088941"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490088941"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You are right, it's not strictly needed in `add_outbound_p2p_connection`, (though it is in `add_p2p_connection`, where the corresponding wait depends on the `send_version` option which may be unset).\r\nThough I still think it makes sense conceptually because it kind of decouples the v2 logic from the message logic. If we'd introduce a similar parameter `send_version`  also for `add_outbound_p2p_connection` (e.g. because we might want to craft a custom version message like `p2p_sendtxrcncl.py` does) we'd need it.",
      "commit_id" : "bf5662c678455fb47c402f8520215726ddfe7a94",
      "created_at" : "2024-02-14T21:28:14Z",
      "diff_hunk" : "@@ -771,6 +773,8 @@ def addconnection_callback(address, port):\n             p2p_conn.wait_for_connect()\n             self.p2ps.append(p2p_conn)\n \n+            if supports_v2_p2p:\n+                p2p_conn.wait_until(lambda: p2p_conn.v2_state.tried_v2_handshake)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1490088941",
      "id" : 1490088941,
      "in_reply_to_id" : 1489336354,
      "line" : 785,
      "node_id" : "PRRC_kwDOABII585Y0PPt",
      "original_commit_id" : "5fc9db504b9ac784019e7e8c215c31abfccb62b6",
      "original_line" : 777,
      "original_position" : 23,
      "original_start_line" : 776,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : 54,
      "pull_request_review_id" : 1881340414,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490088941/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 784,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-14T21:28:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490088941",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1490120993"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490120993"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for elaborating, that makes sense!",
      "commit_id" : "bf5662c678455fb47c402f8520215726ddfe7a94",
      "created_at" : "2024-02-14T22:03:37Z",
      "diff_hunk" : "@@ -771,6 +773,8 @@ def addconnection_callback(address, port):\n             p2p_conn.wait_for_connect()\n             self.p2ps.append(p2p_conn)\n \n+            if supports_v2_p2p:\n+                p2p_conn.wait_until(lambda: p2p_conn.v2_state.tried_v2_handshake)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1490120993",
      "id" : 1490120993,
      "in_reply_to_id" : 1489336354,
      "line" : 785,
      "node_id" : "PRRC_kwDOABII585Y0XEh",
      "original_commit_id" : "5fc9db504b9ac784019e7e8c215c31abfccb62b6",
      "original_line" : 777,
      "original_position" : 23,
      "original_start_line" : 776,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : 54,
      "pull_request_review_id" : 1881389392,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490120993/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 784,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-14T22:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490120993",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1495836330"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1495836330"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I would either expect that the internally set option can not be overridden outside because the developers have decided that this test has to run this setting to keep good coverage no matter what the user thinks or that the test is skipped when the internal option is not compatible with what is provided from outside. Depends a bit on how important v1 test coverage is for us in the short term I think.",
      "commit_id" : "bf5662c678455fb47c402f8520215726ddfe7a94",
      "created_at" : "2024-02-20T13:35:32Z",
      "diff_hunk" : "@@ -69,11 +69,8 @@ def run_test(self):\n         with self.nodes[0].assert_debug_log(['Unsupported message \"ping\" prior to verack from peer=0']):\n             no_verack_node.send_message(msg_ping())\n \n-        # With v2, non-version messages before the handshake would be interpreted as part of the key exchange.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1495836330",
      "id" : 1495836330,
      "in_reply_to_id" : 1485626063,
      "line" : 72,
      "node_id" : "PRRC_kwDOABII585ZKKaq",
      "original_commit_id" : "b9912e2df9767540ab7f53cb3ba37fd2e2491806",
      "original_line" : 72,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/p2p_timeouts.py",
      "position" : 4,
      "pull_request_review_id" : 1890448548,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1495836330/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-20T13:35:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1495836330",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "tACK bf5662c678455fb47c402f8520215726ddfe7a94",
      "created_at" : "2024-02-20T14:02:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#issuecomment-1954281008",
      "id" : 1954281008,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29358",
      "node_id" : "IC_kwDOABII5850e_Yw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1954281008/reactions"
      },
      "updated_at" : "2024-02-20T14:02:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1954281008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1503211480"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503211480"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I have opened the draft PR #29483 with a proposal / to continue this discussion about CI and test_runner.",
      "commit_id" : "bf5662c678455fb47c402f8520215726ddfe7a94",
      "created_at" : "2024-02-26T19:53:03Z",
      "diff_hunk" : "@@ -69,11 +69,8 @@ def run_test(self):\n         with self.nodes[0].assert_debug_log(['Unsupported message \"ping\" prior to verack from peer=0']):\n             no_verack_node.send_message(msg_ping())\n \n-        # With v2, non-version messages before the handshake would be interpreted as part of the key exchange.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29358#discussion_r1503211480",
      "id" : 1503211480,
      "in_reply_to_id" : 1485626063,
      "line" : 72,
      "node_id" : "PRRC_kwDOABII585ZmS_Y",
      "original_commit_id" : "b9912e2df9767540ab7f53cb3ba37fd2e2491806",
      "original_line" : 72,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/p2p_timeouts.py",
      "position" : 4,
      "pull_request_review_id" : 1901875288,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29358",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503211480/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-26T19:53:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1503211480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   }
]
