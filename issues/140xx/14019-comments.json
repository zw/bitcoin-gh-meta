[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r211959370"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/211959370"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Curious why we aren't calling `HaveKey` here and in similar locations?",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-08-22T13:45:20Z",
      "diff_hunk" : "@@ -917,6 +917,53 @@ static UniValue ProcessImport(CWallet * const pwallet, const UniValue& data, con\n                 pwallet->SetAddressBook(dest, label, \"receive\");\n             }\n \n+            // Import public keys\n+            for (size_t i = 0; i < pubKeys.size(); ++i) {\n+                const std::string& pubkey = pubKeys[i].get_str();\n+\n+                if (!IsHex(pubkey)) {\n+                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Pubkey must be a hex string\");\n+                }\n+\n+                std::vector<unsigned char> vData(ParseHex(pubkey));\n+                CPubKey pubKey(vData.begin(), vData.end());\n+\n+                if (!pubKey.IsFullyValid()) {\n+                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Pubkey is not a valid public key\");\n+                }\n+\n+                CTxDestination pubkey_dest = pubKey.GetID();\n+                CScript pubKeyScript = GetScriptForDestination(pubkey_dest);\n+\n+                if (::IsMine(*pwallet, pubKeyScript) == ISMINE_SPENDABLE) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet already contains the private key for this address or script\");\n+                }\n+\n+                pwallet->MarkDirty();\n+\n+                if (!pwallet->AddWatchOnly(pubKeyScript, timestamp)) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding address to wallet\");\n+                }\n+\n+                // add to address book or update label\n+                if (IsValidDestination(pubkey_dest)) {\n+                    pwallet->SetAddressBook(pubkey_dest, label, \"receive\");\n+                }\n+\n+                // TODO Is this necessary?\n+                CScript scriptRawPubKey = GetScriptForRawPubKey(pubKey);\n+\n+                if (::IsMine(*pwallet, scriptRawPubKey) == ISMINE_SPENDABLE) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r211959370",
      "id" : 211959370,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMTk1OTM3MA==",
      "original_commit_id" : "54ab69ce78a88f24c96ebcab09c63da27db2ee9d",
      "original_position" : 40,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 41,
      "pull_request_review_id" : 148487962,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/211959370",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r211960532"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/211960532"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why the MarkDirty here? Needs a comment imo.",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-08-22T13:48:39Z",
      "diff_hunk" : "@@ -917,6 +917,53 @@ static UniValue ProcessImport(CWallet * const pwallet, const UniValue& data, con\n                 pwallet->SetAddressBook(dest, label, \"receive\");\n             }\n \n+            // Import public keys\n+            for (size_t i = 0; i < pubKeys.size(); ++i) {\n+                const std::string& pubkey = pubKeys[i].get_str();\n+\n+                if (!IsHex(pubkey)) {\n+                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Pubkey must be a hex string\");\n+                }\n+\n+                std::vector<unsigned char> vData(ParseHex(pubkey));\n+                CPubKey pubKey(vData.begin(), vData.end());\n+\n+                if (!pubKey.IsFullyValid()) {\n+                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Pubkey is not a valid public key\");\n+                }\n+\n+                CTxDestination pubkey_dest = pubKey.GetID();\n+                CScript pubKeyScript = GetScriptForDestination(pubkey_dest);\n+\n+                if (::IsMine(*pwallet, pubKeyScript) == ISMINE_SPENDABLE) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet already contains the private key for this address or script\");\n+                }\n+\n+                pwallet->MarkDirty();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r211960532",
      "id" : 211960532,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMTk2MDUzMg==",
      "original_commit_id" : "54ab69ce78a88f24c96ebcab09c63da27db2ee9d",
      "original_position" : 26,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 27,
      "pull_request_review_id" : 148489461,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/211960532",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r211960610"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/211960610"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why the MarkDirty here? Needs a comment imo.",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-08-22T13:48:55Z",
      "diff_hunk" : "@@ -917,6 +917,53 @@ static UniValue ProcessImport(CWallet * const pwallet, const UniValue& data, con\n                 pwallet->SetAddressBook(dest, label, \"receive\");\n             }\n \n+            // Import public keys\n+            for (size_t i = 0; i < pubKeys.size(); ++i) {\n+                const std::string& pubkey = pubKeys[i].get_str();\n+\n+                if (!IsHex(pubkey)) {\n+                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Pubkey must be a hex string\");\n+                }\n+\n+                std::vector<unsigned char> vData(ParseHex(pubkey));\n+                CPubKey pubKey(vData.begin(), vData.end());\n+\n+                if (!pubKey.IsFullyValid()) {\n+                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Pubkey is not a valid public key\");\n+                }\n+\n+                CTxDestination pubkey_dest = pubKey.GetID();\n+                CScript pubKeyScript = GetScriptForDestination(pubkey_dest);\n+\n+                if (::IsMine(*pwallet, pubKeyScript) == ISMINE_SPENDABLE) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet already contains the private key for this address or script\");\n+                }\n+\n+                pwallet->MarkDirty();\n+\n+                if (!pwallet->AddWatchOnly(pubKeyScript, timestamp)) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding address to wallet\");\n+                }\n+\n+                // add to address book or update label\n+                if (IsValidDestination(pubkey_dest)) {\n+                    pwallet->SetAddressBook(pubkey_dest, label, \"receive\");\n+                }\n+\n+                // TODO Is this necessary?\n+                CScript scriptRawPubKey = GetScriptForRawPubKey(pubKey);\n+\n+                if (::IsMine(*pwallet, scriptRawPubKey) == ISMINE_SPENDABLE) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet already contains the private key for this address or script\");\n+                }\n+\n+                pwallet->MarkDirty();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r211960610",
      "id" : 211960610,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMTk2MDYxMA==",
      "original_commit_id" : "54ab69ce78a88f24c96ebcab09c63da27db2ee9d",
      "original_position" : 44,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 45,
      "pull_request_review_id" : 148489461,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/211960610",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r211962336"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/211962336"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Seems kind of expected until we stop abusing keys sadly.",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-08-22T13:53:36Z",
      "diff_hunk" : "@@ -917,6 +917,53 @@ static UniValue ProcessImport(CWallet * const pwallet, const UniValue& data, con\n                 pwallet->SetAddressBook(dest, label, \"receive\");\n             }\n \n+            // Import public keys\n+            for (size_t i = 0; i < pubKeys.size(); ++i) {\n+                const std::string& pubkey = pubKeys[i].get_str();\n+\n+                if (!IsHex(pubkey)) {\n+                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Pubkey must be a hex string\");\n+                }\n+\n+                std::vector<unsigned char> vData(ParseHex(pubkey));\n+                CPubKey pubKey(vData.begin(), vData.end());\n+\n+                if (!pubKey.IsFullyValid()) {\n+                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Pubkey is not a valid public key\");\n+                }\n+\n+                CTxDestination pubkey_dest = pubKey.GetID();\n+                CScript pubKeyScript = GetScriptForDestination(pubkey_dest);\n+\n+                if (::IsMine(*pwallet, pubKeyScript) == ISMINE_SPENDABLE) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet already contains the private key for this address or script\");\n+                }\n+\n+                pwallet->MarkDirty();\n+\n+                if (!pwallet->AddWatchOnly(pubKeyScript, timestamp)) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding address to wallet\");\n+                }\n+\n+                // add to address book or update label\n+                if (IsValidDestination(pubkey_dest)) {\n+                    pwallet->SetAddressBook(pubkey_dest, label, \"receive\");\n+                }\n+\n+                // TODO Is this necessary?\n+                CScript scriptRawPubKey = GetScriptForRawPubKey(pubKey);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r211962336",
      "id" : 211962336,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMTk2MjMzNg==",
      "original_commit_id" : "54ab69ce78a88f24c96ebcab09c63da27db2ee9d",
      "original_position" : 38,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 39,
      "pull_request_review_id" : 148489461,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/211962336",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r211976850"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/211976850"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Dunno. I just copied this from below",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-08-22T14:31:17Z",
      "diff_hunk" : "@@ -917,6 +917,53 @@ static UniValue ProcessImport(CWallet * const pwallet, const UniValue& data, con\n                 pwallet->SetAddressBook(dest, label, \"receive\");\n             }\n \n+            // Import public keys\n+            for (size_t i = 0; i < pubKeys.size(); ++i) {\n+                const std::string& pubkey = pubKeys[i].get_str();\n+\n+                if (!IsHex(pubkey)) {\n+                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Pubkey must be a hex string\");\n+                }\n+\n+                std::vector<unsigned char> vData(ParseHex(pubkey));\n+                CPubKey pubKey(vData.begin(), vData.end());\n+\n+                if (!pubKey.IsFullyValid()) {\n+                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Pubkey is not a valid public key\");\n+                }\n+\n+                CTxDestination pubkey_dest = pubKey.GetID();\n+                CScript pubKeyScript = GetScriptForDestination(pubkey_dest);\n+\n+                if (::IsMine(*pwallet, pubKeyScript) == ISMINE_SPENDABLE) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet already contains the private key for this address or script\");\n+                }\n+\n+                pwallet->MarkDirty();\n+\n+                if (!pwallet->AddWatchOnly(pubKeyScript, timestamp)) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding address to wallet\");\n+                }\n+\n+                // add to address book or update label\n+                if (IsValidDestination(pubkey_dest)) {\n+                    pwallet->SetAddressBook(pubkey_dest, label, \"receive\");\n+                }\n+\n+                // TODO Is this necessary?\n+                CScript scriptRawPubKey = GetScriptForRawPubKey(pubKey);\n+\n+                if (::IsMine(*pwallet, scriptRawPubKey) == ISMINE_SPENDABLE) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r211976850",
      "id" : 211976850,
      "in_reply_to_id" : 211959370,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMTk3Njg1MA==",
      "original_commit_id" : "54ab69ce78a88f24c96ebcab09c63da27db2ee9d",
      "original_position" : 40,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 41,
      "pull_request_review_id" : 148510313,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/211976850",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r211977843"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/211977843"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Copied from below. It seems that we always do `MarkDirty` before importing stuff. This pattern appears throughout the other import stuff.",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-08-22T14:33:50Z",
      "diff_hunk" : "@@ -917,6 +917,53 @@ static UniValue ProcessImport(CWallet * const pwallet, const UniValue& data, con\n                 pwallet->SetAddressBook(dest, label, \"receive\");\n             }\n \n+            // Import public keys\n+            for (size_t i = 0; i < pubKeys.size(); ++i) {\n+                const std::string& pubkey = pubKeys[i].get_str();\n+\n+                if (!IsHex(pubkey)) {\n+                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Pubkey must be a hex string\");\n+                }\n+\n+                std::vector<unsigned char> vData(ParseHex(pubkey));\n+                CPubKey pubKey(vData.begin(), vData.end());\n+\n+                if (!pubKey.IsFullyValid()) {\n+                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Pubkey is not a valid public key\");\n+                }\n+\n+                CTxDestination pubkey_dest = pubKey.GetID();\n+                CScript pubKeyScript = GetScriptForDestination(pubkey_dest);\n+\n+                if (::IsMine(*pwallet, pubKeyScript) == ISMINE_SPENDABLE) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet already contains the private key for this address or script\");\n+                }\n+\n+                pwallet->MarkDirty();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r211977843",
      "id" : 211977843,
      "in_reply_to_id" : 211960532,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMTk3Nzg0Mw==",
      "original_commit_id" : "54ab69ce78a88f24c96ebcab09c63da27db2ee9d",
      "original_position" : 26,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 27,
      "pull_request_review_id" : 148511613,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/211977843",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->Reviewers, this pull request conflicts with the following ones:\n\n* #14075 (Import watch only pubkeys to the keypool if private keys are disabled by achow101)\n* #14021 (Import key origin data through importmulti by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-08-23T04:40:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#issuecomment-415288276",
      "id" : 415288276,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14019",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxNTI4ODI3Ng==",
      "updated_at" : "2018-09-27T03:24:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/415288276",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 54ab69ce78a88f24c96ebcab09c63da27db2ee9d\r\n\r\nI think removing the TODO is fine since we're doing it for everything until a future wallet refactor.",
      "created_at" : "2018-08-25T14:08:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#issuecomment-415971743",
      "id" : 415971743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14019",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxNTk3MTc0Mw==",
      "updated_at" : "2018-08-25T14:08:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/415971743",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Why? If you're importing p2sh, the wallet *shouldn't* recognise lone keys...",
      "created_at" : "2018-08-29T17:46:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#issuecomment-417043259",
      "id" : 417043259,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14019",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxNzA0MzI1OQ==",
      "updated_at" : "2018-08-29T17:46:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/417043259",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr This PR is largely to work in combination with #14021, but I decided it would be better to split it into it's own PR. The reason for doing this is so that a PSBT can be made which includes the pubkey and the key derivation information (master key fingerprint and keypath) for a P2SH script (e.g. a multisig redeemScript). Without this, the wallet has no way of knowing the key and its metadata in order to put that into a PSBT. This is particularly useful for hardware wallet support.",
      "created_at" : "2018-08-29T20:29:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#issuecomment-417094900",
      "id" : 417094900,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14019",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxNzA5NDkwMA==",
      "updated_at" : "2018-08-29T20:29:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/417094900",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr It's an unfortunate side effect of the current design that importing keys/script sometimes results in outputs involving those becoming treated as IsMine.\n\nThe goal here isn't changing IsMine, but making sure the information is available for signing.\n\nThis issue will be independently solved by moving to descriptor based wallets, where nothing except the scripts defined by the imported descriptors will be treated as IsMine.",
      "created_at" : "2018-08-29T20:34:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#issuecomment-417096424",
      "id" : 417096424,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14019",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxNzA5NjQyNA==",
      "updated_at" : "2018-08-29T20:34:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/417096424",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "tACK https://github.com/bitcoin/bitcoin/pull/14019/commits/7bcf2cbbf89389d05bc66fb254d9775e846a2f0c\r\n\r\nIn use on active wallets.",
      "created_at" : "2018-09-14T19:56:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#issuecomment-421467902",
      "id" : 421467902,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14019",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMTQ2NzkwMg==",
      "updated_at" : "2018-09-14T19:56:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/421467902",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r219713209"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219713209"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, `assert_equal(result[0]['success'], True)`.\r\n",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-09-23T22:03:47Z",
      "diff_hunk" : "@@ -446,6 +446,27 @@ def run_test (self):\n                 \"timestamp\": \"\",\n             }])\n \n+        # Importing multiple public keys with 2-of-2 p2sh multisig\n+        self.log.info(\"Pubkeys should be available after importing 2-of-2 p2sh multisig with pubkeys\")\n+        addr1 = self.nodes[1].getnewaddress()\n+        addr2 = self.nodes[1].getnewaddress()\n+        pub1 = self.nodes[1].getaddressinfo(addr1)['pubkey']\n+        pub2 = self.nodes[1].getaddressinfo(addr2)['pubkey']\n+        ms = self.nodes[1].createmultisig(2, [pub1, pub2])\n+        result = self.nodes[0].importmulti(\n+            [{\n+                'scriptPubKey' : { 'address' : ms['address']},\n+                'redeemscript' : ms['redeemScript'],\n+                'pubkeys' : [pub1, pub2],\n+                \"timestamp\": \"now\",\n+            }]\n+        )\n+        assert result[0]['success']",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r219713209",
      "id" : 219713209,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTcxMzIwOQ==",
      "original_commit_id" : "7bcf2cbbf89389d05bc66fb254d9775e846a2f0c",
      "original_position" : 19,
      "path" : "test/functional/wallet_importmulti.py",
      "position" : null,
      "pull_request_review_id" : 157953504,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219713209",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r219713297"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219713297"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Use `HexToPubKey`:\r\n```\r\nCPubKey pubKey = HexToPubKey(pubKeys[i].get_str())\r\n```",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-09-23T22:07:55Z",
      "diff_hunk" : "@@ -917,6 +917,53 @@ static UniValue ProcessImport(CWallet * const pwallet, const UniValue& data, con\n                 pwallet->SetAddressBook(dest, label, \"receive\");\n             }\n \n+            // Import public keys\n+            for (size_t i = 0; i < pubKeys.size(); ++i) {\n+                const std::string& pubkey = pubKeys[i].get_str();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r219713297",
      "id" : 219713297,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTcxMzI5Nw==",
      "original_commit_id" : "7bcf2cbbf89389d05bc66fb254d9775e846a2f0c",
      "original_position" : 6,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 157953504,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219713297",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r219713378"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219713378"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, use range-based for-loop?",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-09-23T22:10:26Z",
      "diff_hunk" : "@@ -917,6 +917,53 @@ static UniValue ProcessImport(CWallet * const pwallet, const UniValue& data, con\n                 pwallet->SetAddressBook(dest, label, \"receive\");\n             }\n \n+            // Import public keys\n+            for (size_t i = 0; i < pubKeys.size(); ++i) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r219713378",
      "id" : 219713378,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTcxMzM3OA==",
      "original_commit_id" : "7bcf2cbbf89389d05bc66fb254d9775e846a2f0c",
      "original_position" : 5,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 13,
      "pull_request_review_id" : 157953504,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219713378",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r219713617"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219713617"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, space before `}`?\r\n\r\nwe should style lint python :trollface: ",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-09-23T22:16:05Z",
      "diff_hunk" : "@@ -446,6 +446,27 @@ def run_test (self):\n                 \"timestamp\": \"\",\n             }])\n \n+        # Importing multiple public keys with 2-of-2 p2sh multisig\n+        self.log.info(\"Pubkeys should be available after importing 2-of-2 p2sh multisig with pubkeys\")\n+        addr1 = self.nodes[1].getnewaddress()\n+        addr2 = self.nodes[1].getnewaddress()\n+        pub1 = self.nodes[1].getaddressinfo(addr1)['pubkey']\n+        pub2 = self.nodes[1].getaddressinfo(addr2)['pubkey']\n+        ms = self.nodes[1].createmultisig(2, [pub1, pub2])\n+        result = self.nodes[0].importmulti(\n+            [{\n+                'scriptPubKey' : { 'address' : ms['address']},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r219713617",
      "id" : 219713617,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTcxMzYxNw==",
      "original_commit_id" : "7bcf2cbbf89389d05bc66fb254d9775e846a2f0c",
      "original_position" : 13,
      "path" : "test/functional/wallet_importmulti.py",
      "position" : null,
      "pull_request_review_id" : 157953504,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219713617",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r219715443"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219715443"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If #14303 is correct, these can be removed. Please review.",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-09-23T23:23:58Z",
      "diff_hunk" : "@@ -917,6 +917,53 @@ static UniValue ProcessImport(CWallet * const pwallet, const UniValue& data, con\n                 pwallet->SetAddressBook(dest, label, \"receive\");\n             }\n \n+            // Import public keys\n+            for (size_t i = 0; i < pubKeys.size(); ++i) {\n+                const std::string& pubkey = pubKeys[i].get_str();\n+\n+                if (!IsHex(pubkey)) {\n+                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Pubkey must be a hex string\");\n+                }\n+\n+                std::vector<unsigned char> vData(ParseHex(pubkey));\n+                CPubKey pubKey(vData.begin(), vData.end());\n+\n+                if (!pubKey.IsFullyValid()) {\n+                    throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Pubkey is not a valid public key\");\n+                }\n+\n+                CTxDestination pubkey_dest = pubKey.GetID();\n+                CScript pubKeyScript = GetScriptForDestination(pubkey_dest);\n+\n+                if (::IsMine(*pwallet, pubKeyScript) == ISMINE_SPENDABLE) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet already contains the private key for this address or script\");\n+                }\n+\n+                pwallet->MarkDirty();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r219715443",
      "id" : 219715443,
      "in_reply_to_id" : 211960532,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTcxNTQ0Mw==",
      "original_commit_id" : "54ab69ce78a88f24c96ebcab09c63da27db2ee9d",
      "original_position" : 26,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 27,
      "pull_request_review_id" : 157955795,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219715443",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r220786568"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220786568"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This does not work as `UniValue` does not have an `end()` function apparently.",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-09-27T03:50:10Z",
      "diff_hunk" : "@@ -917,6 +917,53 @@ static UniValue ProcessImport(CWallet * const pwallet, const UniValue& data, con\n                 pwallet->SetAddressBook(dest, label, \"receive\");\n             }\n \n+            // Import public keys\n+            for (size_t i = 0; i < pubKeys.size(); ++i) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r220786568",
      "id" : 220786568,
      "in_reply_to_id" : 219713378,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDc4NjU2OA==",
      "original_commit_id" : "7bcf2cbbf89389d05bc66fb254d9775e846a2f0c",
      "original_position" : 5,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 13,
      "pull_request_review_id" : 159275232,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220786568",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r220786891"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220786891"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-09-27T03:53:23Z",
      "diff_hunk" : "@@ -446,6 +446,27 @@ def run_test (self):\n                 \"timestamp\": \"\",\n             }])\n \n+        # Importing multiple public keys with 2-of-2 p2sh multisig\n+        self.log.info(\"Pubkeys should be available after importing 2-of-2 p2sh multisig with pubkeys\")\n+        addr1 = self.nodes[1].getnewaddress()\n+        addr2 = self.nodes[1].getnewaddress()\n+        pub1 = self.nodes[1].getaddressinfo(addr1)['pubkey']\n+        pub2 = self.nodes[1].getaddressinfo(addr2)['pubkey']\n+        ms = self.nodes[1].createmultisig(2, [pub1, pub2])\n+        result = self.nodes[0].importmulti(\n+            [{\n+                'scriptPubKey' : { 'address' : ms['address']},\n+                'redeemscript' : ms['redeemScript'],\n+                'pubkeys' : [pub1, pub2],\n+                \"timestamp\": \"now\",\n+            }]\n+        )\n+        assert result[0]['success']",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r220786891",
      "id" : 220786891,
      "in_reply_to_id" : 219713209,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDc4Njg5MQ==",
      "original_commit_id" : "7bcf2cbbf89389d05bc66fb254d9775e846a2f0c",
      "original_position" : 19,
      "path" : "test/functional/wallet_importmulti.py",
      "position" : null,
      "pull_request_review_id" : 159275589,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220786891",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r220786901"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220786901"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-09-27T03:53:30Z",
      "diff_hunk" : "@@ -917,6 +917,53 @@ static UniValue ProcessImport(CWallet * const pwallet, const UniValue& data, con\n                 pwallet->SetAddressBook(dest, label, \"receive\");\n             }\n \n+            // Import public keys\n+            for (size_t i = 0; i < pubKeys.size(); ++i) {\n+                const std::string& pubkey = pubKeys[i].get_str();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r220786901",
      "id" : 220786901,
      "in_reply_to_id" : 219713297,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDc4NjkwMQ==",
      "original_commit_id" : "7bcf2cbbf89389d05bc66fb254d9775e846a2f0c",
      "original_position" : 6,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 159275607,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220786901",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r220786910"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220786910"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "6412265b5935173fcaa02b20195d0e282cb2d804",
      "created_at" : "2018-09-27T03:53:33Z",
      "diff_hunk" : "@@ -446,6 +446,27 @@ def run_test (self):\n                 \"timestamp\": \"\",\n             }])\n \n+        # Importing multiple public keys with 2-of-2 p2sh multisig\n+        self.log.info(\"Pubkeys should be available after importing 2-of-2 p2sh multisig with pubkeys\")\n+        addr1 = self.nodes[1].getnewaddress()\n+        addr2 = self.nodes[1].getnewaddress()\n+        pub1 = self.nodes[1].getaddressinfo(addr1)['pubkey']\n+        pub2 = self.nodes[1].getaddressinfo(addr2)['pubkey']\n+        ms = self.nodes[1].createmultisig(2, [pub1, pub2])\n+        result = self.nodes[0].importmulti(\n+            [{\n+                'scriptPubKey' : { 'address' : ms['address']},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14019#discussion_r220786910",
      "id" : 220786910,
      "in_reply_to_id" : 219713617,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDc4NjkxMA==",
      "original_commit_id" : "7bcf2cbbf89389d05bc66fb254d9775e846a2f0c",
      "original_position" : 13,
      "path" : "test/functional/wallet_importmulti.py",
      "position" : null,
      "pull_request_review_id" : 159275619,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14019",
      "updated_at" : "2018-09-27T03:53:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220786910",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
