[
   {
      "body" : "Looks good to me too, utACK https://github.com/bitcoin/bitcoin/pull/10849/commits/c8115e31325312061682bf966b4475359cbc5215.",
      "created_at" : "2017-07-17T10:55:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315724109",
      "id" : 315724109,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T10:55:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315724109",
      "user" : {
         "avatar_url" : "https://avatars4.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "This has no documentation. If we think this approach is a good idea, I would like to see in what way it can be explained to users. Is there going to be a `doc/JSPON-RPC-interface.md` to complement https://github.com/bitcoin/bitcoin/blob/master/doc/REST-interface.md? Will endpoint be considered experimental (unchanging semantics but possibly temporary) or unstable (possibly changing semantics and possibly temporary)?\r\n\r\nAlso, from the other issue I think something like `-rpcwallet=filename` would be better than `-usewallet=filename`. It's hard to see how \"use\" could convey any meaning when you would expect any command line option that you specify to be used.\r\n\r\nAnd, also from other issue I think '`?wallet=filename` makes more sense than `/wallet/filename` as more extensible and conventional way of passing options (as opposed to required arguments) in urls.",
      "created_at" : "2017-07-17T11:37:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315731689",
      "id" : 315731689,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T11:38:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315731689",
      "user" : {
         "avatar_url" : "https://avatars6.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "> And, also from other issue I think '?wallet=filename makes more sense than /wallet/filename as more extensible and conventional way of passing options (as opposed to required arguments) in urls.\r\n\r\nDefinitely no! Let's not repeat this: JSON-RPC uses POST only, and with POST it is weird to have `?a=b` URL-encoded arguments in the URL as well. It also implies more arguments could be added later, which is not true. This is only to select the wallet, which is inherently hierarchical.\r\n(also e.g. ?a=b syntax isn't deterministic, it's possible to add arguments that are ignored, change the order of the arguments, etc, whereas a /wallet/&lt;name&gt;/ URL is simply a fixed thing)",
      "created_at" : "2017-07-17T11:42:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315732604",
      "id" : 315732604,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T11:43:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315732604",
      "user" : {
         "avatar_url" : "https://avatars4.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> POST it is weird to have ?a=b URL-encoded arguments in the URL as well\r\n\r\nDon't know your source for this but this is done all the time.\r\n\r\n> It also implies more arguments could be added later, which is not true.\r\n\r\nI don't know why it wouldn't be true. I can think of lots of RPC options you might want to add outside the RPC request: timeouts, completions handlers, etc.\r\n\r\n> ?a=b syntax isn't deterministic, it's possible to add arguments that are ignored, change the order of the arguments, etc, whereas a /wallet// URL is simply a fixed thing\r\n\r\nNot true, you don't have to ignore any option, but it is good practice to accept options in any order. This is one of the reasons people choose to used named options instead of positional arguments.",
      "created_at" : "2017-07-17T11:47:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315733567",
      "id" : 315733567,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T11:49:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315733567",
      "user" : {
         "avatar_url" : "https://avatars6.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "> I don't know why it it wouldn't be true, but ok. I can think of lots of RPC options you might want to add outside the RPC request: timeouts, completions handlers, etc.\r\n\r\nThose really shouldn't be passed in the URL. The URL *locates* something, such as the wallet in this case.\r\n",
      "created_at" : "2017-07-17T11:49:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315733776",
      "id" : 315733776,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T11:49:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315733776",
      "user" : {
         "avatar_url" : "https://avatars4.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> Those really shouldn't be passed in the URL. The URL locates something, such as the wallet in this case.\r\n\r\nThey shouldn't be part of the uri-path, but you would have to explain more why they shouldn't be options in a query string...",
      "created_at" : "2017-07-17T11:52:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315734432",
      "id" : 315734432,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T11:52:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315734432",
      "user" : {
         "avatar_url" : "https://avatars6.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "ryanofsky: Among other reasons the path approach will already work with most but not all software,  e.g. you change your RPC endpoint url to be one with the path, and tada-- done, no source code modifications in some things.  I believe a query string would not achieve this, and in some cases require deep spelunking.\r\n\r\nI could see an argument that something like a timeout might make sense as a query like parameter, but a wallet seems like a pretty perfect 'navigation' like element.",
      "created_at" : "2017-07-17T11:56:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315735135",
      "id" : 315735135,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T11:59:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315735135",
      "user" : {
         "avatar_url" : "https://avatars5.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "> Is there going to be a doc/JSPON-RPC-interface.md to complement https://github.com/bitcoin/bitcoin/blob/master/doc/REST-interface.md? \r\n\r\nAnd yes, there should be. Documentation is good.\r\nBut that's not a requirement for the feature freeze. This is an experimental API, it could be changed completely for next release, so not having it documented 100% on first release is not a problem.\r\n(we should make an attempt in the release notes, of course)",
      "created_at" : "2017-07-17T12:15:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315739032",
      "id" : 315739032,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T12:15:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315739032",
      "user" : {
         "avatar_url" : "https://avatars4.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> you change your RPC endpoint url to be one with the patch, and tada-- done\r\n\r\nThis is true for this PR but _not_ #10650 which is a big reason why I think this PR is better and less user-hostile than #10650.\r\n\r\n@laanwj, my bigger point is about extensibility . We want to add a wallet option right now. Great, so that can be as simple as adding `?wallet=filename` to the query string to provide the nice user benefit Greg cites. And maybe you have a problem with timeouts or completion handlers, but lets say we want to add a `?network=name` parameter in the future (maybe to add extra way to specify that an operation is done on mainnet or testnet, or in some dystopia where there are multiple chains, but no need to go there...). The point is you want to be able to add some new option. With query strings you have a standard way to do this. `?wallet=filename&network=name&timeout=30s` works just as well as `?timeout=30s&wallet=filename&network=name` as established by long-running convention.\r\n\r\nIf we use paths instead, are we requiring `/wallet/filename/network/name` or `/network/name/filename` or `/wallet/filename?network=name`, or something else completely arbitrary based on historical accident? Or because a filename is a \"location\" but a network name isn't?\r\n\r\nI guess another thing that is motivating me is that I would like to see less uri-path space annexed for this one multiwallet feature. Right now json-rpc calls go directly to `/` handler and REST calls go directly to `/rest` handler. Everything else right now (but not with these endpoint prs) is wide open right now. I'd be happier if more of the path space could be free for other applications like a web interface. If these prs added stuff under an `/rpc` path, that would also seem like an improvement to me.\r\n\r\nAlso, so my other points doesn't get lost above, it would be great to see something done on documentation and `-usewallet` if we are taking this endpoint approach. Even if there is not \"100% documentation\" I think it would be very helpful to see uri-path endpoints explained from user point of view.",
      "created_at" : "2017-07-17T12:17:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315739484",
      "id" : 315739484,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T12:21:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315739484",
      "user" : {
         "avatar_url" : "https://avatars6.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "> I'd be happier if more of the path space could be free for other applications like a web interface. If all this stuff was moved under an /rpc path\r\n\r\nIt's under /wallet/ at least, so I think it won't have any clashes with other use.\r\n\r\nAs far as usewallet-- I think we intend that argument to eventually specify all wallets that get loaded, not just specific to rpc.  e.g. it would also tell it which ones to load in the UI when that support is complete.",
      "created_at" : "2017-07-17T12:24:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315740953",
      "id" : 315740953,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T12:24:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315740953",
      "user" : {
         "avatar_url" : "https://avatars5.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "> It's under /wallet/ at least, so I think it won't have any clashes with other use.\r\n\r\nI could easily imagine a web interface wanting to handle /wallet path. The point is that if RPCs are restricted to exactly one path `/` (current case) or two paths `/` and `/rpc` then it's then it's clean and easy to do anything else with the rest of the space. If there's a bigger changing list of RPC paths, that would seem to make things messier.\r\n\r\n> As far as usewallet-- I think we intend that argument to eventually specify all wallets that get loaded, not just specific to rpc. e.g. it would also tell it which ones to load in the UI when that support is complete.\r\n\r\nThat's interesting. I thought the UI was would just have tabs or a dropdown to choose between any of the loaded wallets. But I guess the advantage of having the `bitcoin-qt` executable accept a `-usewallet=filename` instead of a more descriptive `-showwallet=filename` or `-onlyshowwallet=filename` would be that you can specify `-usewallet` in your `bitcoind.conf` and have it picked up by both `bitcoin-cli` and `bitcoin-qt`.",
      "created_at" : "2017-07-17T12:39:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315744022",
      "id" : 315744022,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T12:48:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315744022",
      "user" : {
         "avatar_url" : "https://avatars6.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10849#discussion_r127724767"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10849"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127724767"
         }
      },
      "body" : "bug: if no wallet is specified then the endpoint will be \"\" instead of \"/\"\r\n\r\nresult: bitcoin-cli doesn't work without a `-usewallet` parameter:\r\n\r\n```\r\nÃ¢ÂÂ bitcoin-cli getinfo\r\nerror: no response from server\r\n```\r\n\r\nFix is:\r\n\r\n```c++\r\n    std::string endpoint = \"/\";\r\n```",
      "commit_id" : "6b9faf747003995417d6a66fad64d2537c371092",
      "created_at" : "2017-07-17T14:33:57Z",
      "diff_hunk" : "@@ -241,7 +242,20 @@ UniValue CallRPC(const std::string& strMethod, const UniValue& params)\n     assert(output_buffer);\n     evbuffer_add(output_buffer, strRequest.data(), strRequest.size());\n \n-    int r = evhttp_make_request(evcon.get(), req.get(), EVHTTP_REQ_POST, \"/\");\n+    // check if we should use a special wallet endpoint\n+    std::string endpoint;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#discussion_r127724767",
      "id" : 127724767,
      "original_commit_id" : "c8115e31325312061682bf966b4475359cbc5215",
      "original_position" : 14,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 50337915,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10849",
      "updated_at" : "2017-07-17T15:42:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127724767",
      "user" : {
         "avatar_url" : "https://avatars7.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "It's a shame that this PR doesn't prevent individual wallet endpoints from accessing server-level RPCs. However that can be added at a later date.\r\n\r\nI have a branch here: https://github.com/jnewbery/bitcoin/tree/pr10849 that does a couple of things:\r\n\r\n- fixes https://github.com/bitcoin/bitcoin/pull/10849#discussion_r127724767 (in commit *bugfix - allow bitcoin-cli to work without -wallet parameter*)\r\n- prevents `bitcoin-cli` from reading `-wallet` arguments from the conf file and removes the `-usewallet` argument. That means that to run a command on a wallet in multiwallet mode, the bitcoin-cli user must specify `-wallet` on the command line.\r\n\r\nFeel free to squash the first commit and cherry-pick the next two if you think they're useful.",
      "created_at" : "2017-07-17T15:25:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315788462",
      "id" : 315788462,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T15:25:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315788462",
      "user" : {
         "avatar_url" : "https://avatars7.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Force push fixed the endpoint issue (thanks @jnewbery). \r\nI think we should keep it minimal with a hope this can slip in before 0.15 freeze.\r\n\r\nFixes can be done later.",
      "created_at" : "2017-07-17T15:43:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315793397",
      "id" : 315793397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T15:43:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315793397",
      "user" : {
         "avatar_url" : "https://avatars7.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "> Fixes can be done later.\r\n\r\nAgree. Multiwallet interface should be considered unstable for v0.15.",
      "created_at" : "2017-07-17T16:05:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315799481",
      "id" : 315799481,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T16:05:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315799481",
      "user" : {
         "avatar_url" : "https://avatars7.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "So this will remove the concept of \"default wallet\" from the RPCs? Any attempt to use a wallet RPC without specifying a wallet will fail, right?",
      "created_at" : "2017-07-17T18:30:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315841238",
      "id" : 315841238,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T18:30:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315841238",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "body" : "@achow101: only if you call a wallet RPC and if you run with multiple wallets.",
      "created_at" : "2017-07-17T18:36:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315842820",
      "id" : 315842820,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T18:36:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315842820",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli Ok, cool!\r\n\r\nutACK 6b9faf747003995417d6a66fad64d2537c371092",
      "created_at" : "2017-07-17T18:39:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315843617",
      "id" : 315843617,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-17T18:39:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315843617",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10849#discussion_r127847938"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10849"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127847938"
         }
      },
      "body" : "Could you change one of these to just 'w' to catch possible length extension bugs? If we're asking for w2, we want to make sure that we don't get w. on accident.",
      "commit_id" : "6b9faf747003995417d6a66fad64d2537c371092",
      "created_at" : "2017-07-17T23:01:55Z",
      "diff_hunk" : "@@ -0,0 +1,47 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test multiwallet.\"\"\"\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+\n+class MultiWalletTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+        self.extra_args = [['-wallet=w1', '-wallet=w2', '-wallet=w3']]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#discussion_r127847938",
      "id" : 127847938,
      "original_commit_id" : "6b9faf747003995417d6a66fad64d2537c371092",
      "original_position" : 15,
      "path" : "test/functional/multiwallet.py",
      "position" : 15,
      "pull_request_review_id" : 50471962,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10849",
      "updated_at" : "2017-07-17T23:01:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127847938",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Code review utACK 6b9faf747003995417d6a66fad64d2537c371092. No opinion on the endpoint discussion.",
      "created_at" : "2017-07-18T00:21:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315922024",
      "id" : 315922024,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-18T00:21:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315922024",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10849#discussion_r127867716"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10849"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127867716"
         }
      },
      "body" : "Nit: else on the same line as '}'",
      "commit_id" : "6b9faf747003995417d6a66fad64d2537c371092",
      "created_at" : "2017-07-18T01:58:15Z",
      "diff_hunk" : "@@ -241,7 +242,20 @@ UniValue CallRPC(const std::string& strMethod, const UniValue& params)\n     assert(output_buffer);\n     evbuffer_add(output_buffer, strRequest.data(), strRequest.size());\n \n-    int r = evhttp_make_request(evcon.get(), req.get(), EVHTTP_REQ_POST, \"/\");\n+    // check if we should use a special wallet endpoint\n+    std::string endpoint = \"/\";\n+    std::string walletName = GetArg(\"-usewallet\", \"\");\n+    if (!walletName.empty()) {\n+        char *encodedURI = evhttp_uriencode(walletName.c_str(), walletName.size(), false);\n+        if (encodedURI) {\n+            endpoint = \"/wallet/\"+ std::string(encodedURI);\n+            free(encodedURI);\n+        }\n+        else {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#discussion_r127867716",
      "id" : 127867716,
      "original_commit_id" : "31e07203bd98d69be476cbff105ad659b4efa862",
      "original_position" : 22,
      "path" : "src/bitcoin-cli.cpp",
      "position" : 22,
      "pull_request_review_id" : 50492656,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10849",
      "updated_at" : "2017-07-18T02:08:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127867716",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK https://github.com/bitcoin/bitcoin/commit/6b9faf747003995417d6a66fad64d2537c371092 looks good to me",
      "created_at" : "2017-07-18T02:59:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315944360",
      "id" : 315944360,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-18T02:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315944360",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "body" : "utACK 6b9faf7\r\n\r\nHowever, this badly needs documentation for the user.\r\n\r\nAlso I am not happy with the fact that passing multiple -usewallet arguments to the commandline results in the last wallet getting used, that should be an error.\r\n",
      "created_at" : "2017-07-18T13:36:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-316065717",
      "id" : 316065717,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-18T13:36:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/316065717",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4360349?v=4",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "@morcos - does #10868 (for merge after v0.15) resolve your issue with `-usewallet`?\r\n\r\nSuggestions for where to put the documentation? I'm happy to work on that.",
      "created_at" : "2017-07-18T16:07:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-316113548",
      "id" : 316113548,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-07-18T16:07:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/316113548",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This is incompatible with RPC batching. :( (you can't batch a /wallets/ request with one which does not use it)",
      "created_at" : "2017-09-02T16:23:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-326754252",
      "id" : 326754252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-09-02T16:23:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/326754252",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok disregard my comment. I thought that adding /wallet/w1 to a non wallet RPC method would fail. This is not the case, so no issue!",
      "created_at" : "2017-09-02T17:06:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-326756990",
      "id" : 326756990,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10849",
      "updated_at" : "2017-09-02T17:06:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/326756990",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10849#discussion_r150328531"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10849"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150328531"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: w2",
      "commit_id" : "6b9faf747003995417d6a66fad64d2537c371092",
      "created_at" : "2017-11-10T20:17:01Z",
      "diff_hunk" : "@@ -0,0 +1,47 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test multiwallet.\"\"\"\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+\n+class MultiWalletTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+        self.extra_args = [['-wallet=w1', '-wallet=w2', '-wallet=w3']]\n+\n+    def run_test(self):\n+        w1 = self.nodes[0] / \"wallet/w1\"\n+        w1.generate(1)\n+\n+        #accessing wallet RPC without using wallet endpoint fails\n+        assert_raises_jsonrpc(-32601, \"Method not found\", self.nodes[0].getwalletinfo)\n+\n+        #check w1 wallet balance\n+        walletinfo = w1.getwalletinfo()\n+        assert_equal(walletinfo['immature_balance'], 50)\n+\n+        #check w1 wallet balance",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10849#discussion_r150328531",
      "id" : 150328531,
      "original_commit_id" : "6b9faf747003995417d6a66fad64d2537c371092",
      "original_position" : 28,
      "path" : "test/functional/multiwallet.py",
      "position" : 28,
      "pull_request_review_id" : 75870275,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10849",
      "updated_at" : "2017-11-10T20:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150328531",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
