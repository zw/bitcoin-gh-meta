[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This is meant as an example for #14148 as requested by @MarcoFalke , not to be merged for now.",
      "created_at" : "2020-04-28T07:29:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#issuecomment-620432429",
      "id" : 620432429,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18795",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMDQzMjQyOQ==",
      "updated_at" : "2020-04-28T07:29:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/620432429",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21338 (test: add functional test for anchors.dat by brunoerg)\n* #19521 (Coinstats Index by fjahr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-04-28T08:35:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#issuecomment-620463740",
      "id" : 620463740,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18795",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMDQ2Mzc0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-12T10:35:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/620463740",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "If this demonstrates an unfixed issue, shouldn't the test fail on master?",
      "created_at" : "2020-04-30T13:54:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#issuecomment-621867814",
      "id" : 621867814,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18795",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTg2NzgxNA==",
      "updated_at" : "2020-04-30T13:54:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621867814",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> If this demonstrates an unfixed issue, shouldn't the test fail on master?\r\n\r\nThat's a good point.  The test was originally written to assert the current behaviour and thus passed (but looking at the code one could see the behaviour described in #14148).\r\n\r\nBut I agree that is probably confusing.  I've added another commit now that makes the test fail as expected (the original version is still preserved in the first commit, as it might be interesting as well for understanding what the issue is about).",
      "created_at" : "2020-05-01T07:12:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#issuecomment-622279220",
      "id" : 622279220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18795",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjI3OTIyMA==",
      "updated_at" : "2020-05-01T07:12:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622279220",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423364829"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423364829"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```\r\ntest/functional/wallet_orphanedreward.py:8:1: F401 'test_framework.util.assert_raises_rpc_error' imported but unused",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2020-05-11T22:53:02Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal, assert_raises_rpc_error",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423364829",
      "id" : 423364829,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM2NDgyOQ==",
      "original_commit_id" : "9f2ac53cbcd15f8a9d9ce4e33b56aa114b190056",
      "original_line" : 8,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : null,
      "pull_request_review_id" : 409585864,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423364829",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423364868"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423364868"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why is this needed?",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2020-05-11T22:53:10Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal, assert_raises_rpc_error\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.supports_cli = False",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423364868",
      "id" : 423364868,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM2NDg2OA==",
      "original_commit_id" : "9f2ac53cbcd15f8a9d9ce4e33b56aa114b190056",
      "original_line" : 14,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : null,
      "pull_request_review_id" : 409585864,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423364868",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423365132"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423365132"
         }
      },
      "author_association" : "MEMBER",
      "body" : "For a speed-up you can remove this line, and then start the test with `sendtoaddress`.",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2020-05-11T22:53:54Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal, assert_raises_rpc_error\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423365132",
      "id" : 423365132,
      "line" : 12,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM2NTEzMg==",
      "original_commit_id" : "9f2ac53cbcd15f8a9d9ce4e33b56aa114b190056",
      "original_line" : 12,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : 12,
      "pull_request_review_id" : 409585864,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423365132",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423372657"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423372657"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could comment this out, and add a comment that it fails?",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2020-05-11T23:16:31Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal, assert_raises_rpc_error\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.supports_cli = False\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        # Generate some blocks and obtain some coins on node 0.  We send\n+        # some balance to node 1, which will hold it as a single coin.\n+        self.nodes[0].generate(150)\n+        self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 10)\n+        self.nodes[0].generate(50)\n+\n+        # Get a block reward with node 1 and remember the block so we can orphan\n+        # it later.\n+        self.sync_blocks()\n+        blk = self.nodes[1].generate(1)[0]\n+        self.sync_blocks()\n+\n+        # Let the block reward mature and send coins including both\n+        # the existing balance and the block reward.\n+        self.nodes[0].generate(150)\n+        assert_equal(self.nodes[1].getbalance(), 10 + 25)\n+        self.nodes[1].sendtoaddress(self.nodes[0].getnewaddress(), 30)\n+\n+        # Orphan the block reward and make sure that the original coins\n+        # from the wallet can still be spent.\n+        self.nodes[0].invalidateblock(blk)\n+        self.nodes[0].generate(200)\n+        self.sync_blocks()\n+        self.nodes[1].sendtoaddress(self.nodes[0].getnewaddress(), 9)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423372657",
      "id" : 423372657,
      "line" : 58,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM3MjY1Nw==",
      "original_commit_id" : "9f2ac53cbcd15f8a9d9ce4e33b56aa114b190056",
      "original_line" : 58,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : 58,
      "pull_request_review_id" : 409585864,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423372657",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423372747"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423372747"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Also, would be good to check the output of `getbalances` here.",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2020-05-11T23:16:50Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal, assert_raises_rpc_error\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.supports_cli = False\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        # Generate some blocks and obtain some coins on node 0.  We send\n+        # some balance to node 1, which will hold it as a single coin.\n+        self.nodes[0].generate(150)\n+        self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 10)\n+        self.nodes[0].generate(50)\n+\n+        # Get a block reward with node 1 and remember the block so we can orphan\n+        # it later.\n+        self.sync_blocks()\n+        blk = self.nodes[1].generate(1)[0]\n+        self.sync_blocks()\n+\n+        # Let the block reward mature and send coins including both\n+        # the existing balance and the block reward.\n+        self.nodes[0].generate(150)\n+        assert_equal(self.nodes[1].getbalance(), 10 + 25)\n+        self.nodes[1].sendtoaddress(self.nodes[0].getnewaddress(), 30)\n+\n+        # Orphan the block reward and make sure that the original coins\n+        # from the wallet can still be spent.\n+        self.nodes[0].invalidateblock(blk)\n+        self.nodes[0].generate(200)\n+        self.sync_blocks()\n+        self.nodes[1].sendtoaddress(self.nodes[0].getnewaddress(), 9)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423372747",
      "id" : 423372747,
      "line" : 58,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM3Mjc0Nw==",
      "original_commit_id" : "9f2ac53cbcd15f8a9d9ce4e33b56aa114b190056",
      "original_line" : 58,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : 58,
      "pull_request_review_id" : 409585864,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423372747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423808536"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423808536"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Indeed, that's a left over from the previous commit.  Removed.",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2020-05-12T15:05:02Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal, assert_raises_rpc_error",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423808536",
      "id" : 423808536,
      "in_reply_to_id" : 423364829,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzgwODUzNg==",
      "original_commit_id" : "9f2ac53cbcd15f8a9d9ce4e33b56aa114b190056",
      "original_line" : 8,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : null,
      "pull_request_review_id" : 410138376,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423808536",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423808696"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423808696"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Removed.",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2020-05-12T15:05:13Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal, assert_raises_rpc_error\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.supports_cli = False",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423808696",
      "id" : 423808696,
      "in_reply_to_id" : 423364868,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzgwODY5Ng==",
      "original_commit_id" : "9f2ac53cbcd15f8a9d9ce4e33b56aa114b190056",
      "original_line" : 14,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : null,
      "pull_request_review_id" : 410138560,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423808696",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423810100"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423810100"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think that a clean chain makes the test easier to read, as it doesn't require any prior knowledge about how the cached chain looks like.  If we use the cached chain, it will be harder to make sure that `node[1]` only has the coins we want to, as it will have immature coins that will appear over time.\r\n\r\nAlso, it seems the initial setup (including until after the `sendtoaddress`) is quick anyway.  The slow parts are the `sync_blocks` calls, which we wouldn't get rid of with a cached chain.\r\n\r\nOr did I misunderstand your suggestion?",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2020-05-12T15:06:57Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal, assert_raises_rpc_error\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423810100",
      "id" : 423810100,
      "in_reply_to_id" : 423365132,
      "line" : 12,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzgxMDEwMA==",
      "original_commit_id" : "9f2ac53cbcd15f8a9d9ce4e33b56aa114b190056",
      "original_line" : 12,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : 12,
      "pull_request_review_id" : 410140363,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423810100",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423810763"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423810763"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Instead of this, I've now added in the `abandontransaction` call that makes the test succeed (but according to #14148 should not be needed) as well as a comment explaining this.  I think that makes the situation even more clear.",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2020-05-12T15:07:46Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal, assert_raises_rpc_error\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.supports_cli = False\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        # Generate some blocks and obtain some coins on node 0.  We send\n+        # some balance to node 1, which will hold it as a single coin.\n+        self.nodes[0].generate(150)\n+        self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 10)\n+        self.nodes[0].generate(50)\n+\n+        # Get a block reward with node 1 and remember the block so we can orphan\n+        # it later.\n+        self.sync_blocks()\n+        blk = self.nodes[1].generate(1)[0]\n+        self.sync_blocks()\n+\n+        # Let the block reward mature and send coins including both\n+        # the existing balance and the block reward.\n+        self.nodes[0].generate(150)\n+        assert_equal(self.nodes[1].getbalance(), 10 + 25)\n+        self.nodes[1].sendtoaddress(self.nodes[0].getnewaddress(), 30)\n+\n+        # Orphan the block reward and make sure that the original coins\n+        # from the wallet can still be spent.\n+        self.nodes[0].invalidateblock(blk)\n+        self.nodes[0].generate(200)\n+        self.sync_blocks()\n+        self.nodes[1].sendtoaddress(self.nodes[0].getnewaddress(), 9)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423810763",
      "id" : 423810763,
      "in_reply_to_id" : 423372657,
      "line" : 58,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzgxMDc2Mw==",
      "original_commit_id" : "9f2ac53cbcd15f8a9d9ce4e33b56aa114b190056",
      "original_line" : 58,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : 58,
      "pull_request_review_id" : 410141188,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423810763",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423810884"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423810884"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Added.",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2020-05-12T15:07:56Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal, assert_raises_rpc_error\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.supports_cli = False\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        # Generate some blocks and obtain some coins on node 0.  We send\n+        # some balance to node 1, which will hold it as a single coin.\n+        self.nodes[0].generate(150)\n+        self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 10)\n+        self.nodes[0].generate(50)\n+\n+        # Get a block reward with node 1 and remember the block so we can orphan\n+        # it later.\n+        self.sync_blocks()\n+        blk = self.nodes[1].generate(1)[0]\n+        self.sync_blocks()\n+\n+        # Let the block reward mature and send coins including both\n+        # the existing balance and the block reward.\n+        self.nodes[0].generate(150)\n+        assert_equal(self.nodes[1].getbalance(), 10 + 25)\n+        self.nodes[1].sendtoaddress(self.nodes[0].getnewaddress(), 30)\n+\n+        # Orphan the block reward and make sure that the original coins\n+        # from the wallet can still be spent.\n+        self.nodes[0].invalidateblock(blk)\n+        self.nodes[0].generate(200)\n+        self.sync_blocks()\n+        self.nodes[1].sendtoaddress(self.nodes[0].getnewaddress(), 9)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r423810884",
      "id" : 423810884,
      "in_reply_to_id" : 423372747,
      "line" : 58,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzgxMDg4NA==",
      "original_commit_id" : "9f2ac53cbcd15f8a9d9ce4e33b56aa114b190056",
      "original_line" : 58,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : 58,
      "pull_request_review_id" : 410141368,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/423810884",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the feeback, @MarcoFalke !  I've addressed it with a new commit (so as to not invalidate comments made on previous commits), but am of course happy to squash all history into a single commit any time.",
      "created_at" : "2020-05-12T15:08:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#issuecomment-627405236",
      "id" : 627405236,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18795",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNzQwNTIzNg==",
      "updated_at" : "2020-05-12T15:08:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/627405236",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke Thanks!  I've rebased onto latest `master`, squashed all commits, and added in a `getbalances` check before the `abandontransaction` call as well (which indeed shows all zero).",
      "created_at" : "2020-05-14T04:56:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#issuecomment-628386424",
      "id" : 628386424,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18795",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyODM4NjQyNA==",
      "updated_at" : "2020-05-14T04:56:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/628386424",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 7aeaa92ae0d45cddd2cdbdc735cdbcfa5fb2871a",
      "created_at" : "2020-05-14T10:07:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#issuecomment-628533978",
      "id" : 628533978,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18795",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyODUzMzk3OA==",
      "updated_at" : "2020-05-14T10:07:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/628533978",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2020-10-04T17:07:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#issuecomment-703285374",
      "id" : 703285374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18795",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMzI4NTM3NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-04T17:07:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703285374",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/60179867?v=4",
         "events_url" : "https://api.github.com/users/decryp2kanon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/decryp2kanon/followers",
         "following_url" : "https://api.github.com/users/decryp2kanon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/decryp2kanon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/decryp2kanon",
         "id" : 60179867,
         "login" : "decryp2kanon",
         "node_id" : "MDQ6VXNlcjYwMTc5ODY3",
         "organizations_url" : "https://api.github.com/users/decryp2kanon/orgs",
         "received_events_url" : "https://api.github.com/users/decryp2kanon/received_events",
         "repos_url" : "https://api.github.com/users/decryp2kanon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/decryp2kanon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/decryp2kanon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/decryp2kanon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r544678039"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/544678039"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        txid = self.nodes[1].sendtoaddress(self.nodes[0].getnewaddress(), 30)\r\n```",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2020-12-16T22:46:00Z",
      "diff_hunk" : "@@ -0,0 +1,61 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        # Generate some blocks and obtain some coins on node 0.  We send\n+        # some balance to node 1, which will hold it as a single coin.\n+        self.nodes[0].generate(150)\n+        self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 10)\n+        self.nodes[0].generate(1)\n+\n+        # Get a block reward with node 1 and remember the block so we can orphan\n+        # it later.\n+        self.sync_blocks()\n+        blk = self.nodes[1].generate(1)[0]\n+        self.sync_blocks()\n+\n+        # Let the block reward mature and send coins including both\n+        # the existing balance and the block reward.\n+        self.nodes[0].generate(150)\n+        assert_equal(self.nodes[1].getbalance(), 10 + 25)\n+        txid = self.nodes[1].sendtoaddress(address=self.nodes[0].getnewaddress(), amount=30, subtractfeefromamount=True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r544678039",
      "id" : 544678039,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY3ODAzOQ==",
      "original_commit_id" : "7aeaa92ae0d45cddd2cdbdc735cdbcfa5fb2871a",
      "original_line" : 35,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : null,
      "pull_request_review_id" : 554146405,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/544678039",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r544686136"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/544686136"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I wasn't sure why this `generate(200)` was needed, so I commented it out, and the test hung in the next line (`sync_blocks()`). I restored the line and played around with different generate counts, and found that it fails with 151 and works at 152. If I'm counting correctly, we invalidated 151 blocks, so it seems that it's necessary to extend the chain so it's _longer_ than it was before. (Necessary for this test framework, not in real life.)\r\n\r\nYou could reduce this to 152; I like tests to \"just barely\" pass because it seems like that imparts better understanding to readers (I wondered is, \"why is this 200?\"), and also because if the code is acting differently from our understanding, for example, we think generating 152 blocks should work but it actually takes 170, and the test does 200, then that mistaken understanding (or even a bug in the code) would be papered over. \r\n\r\nAlso, the test runs a little faster if we reduce this.\r\n\r\nOf course, a downside to tests \"just barely\" passing is that they're more fragile. It's painful when someone makes a perfectly good change and one of the tests break! (I don't think there's much of a chance of that happening here.)",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2020-12-16T23:02:11Z",
      "diff_hunk" : "@@ -0,0 +1,61 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        # Generate some blocks and obtain some coins on node 0.  We send\n+        # some balance to node 1, which will hold it as a single coin.\n+        self.nodes[0].generate(150)\n+        self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 10)\n+        self.nodes[0].generate(1)\n+\n+        # Get a block reward with node 1 and remember the block so we can orphan\n+        # it later.\n+        self.sync_blocks()\n+        blk = self.nodes[1].generate(1)[0]\n+        self.sync_blocks()\n+\n+        # Let the block reward mature and send coins including both\n+        # the existing balance and the block reward.\n+        self.nodes[0].generate(150)\n+        assert_equal(self.nodes[1].getbalance(), 10 + 25)\n+        txid = self.nodes[1].sendtoaddress(address=self.nodes[0].getnewaddress(), amount=30, subtractfeefromamount=True)\n+\n+        # Orphan the block reward and make sure that the original coins\n+        # from the wallet can still be spent.\n+        self.nodes[0].invalidateblock(blk)\n+        self.nodes[0].generate(200)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r544686136",
      "id" : 544686136,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY4NjEzNg==",
      "original_commit_id" : "7aeaa92ae0d45cddd2cdbdc735cdbcfa5fb2871a",
      "original_line" : 40,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : null,
      "pull_request_review_id" : 554146405,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/544686136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r544686860"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/544686860"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Can this last `sendtoaddress` be removed?",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2020-12-16T23:03:47Z",
      "diff_hunk" : "@@ -0,0 +1,61 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        # Generate some blocks and obtain some coins on node 0.  We send\n+        # some balance to node 1, which will hold it as a single coin.\n+        self.nodes[0].generate(150)\n+        self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 10)\n+        self.nodes[0].generate(1)\n+\n+        # Get a block reward with node 1 and remember the block so we can orphan\n+        # it later.\n+        self.sync_blocks()\n+        blk = self.nodes[1].generate(1)[0]\n+        self.sync_blocks()\n+\n+        # Let the block reward mature and send coins including both\n+        # the existing balance and the block reward.\n+        self.nodes[0].generate(150)\n+        assert_equal(self.nodes[1].getbalance(), 10 + 25)\n+        txid = self.nodes[1].sendtoaddress(address=self.nodes[0].getnewaddress(), amount=30, subtractfeefromamount=True)\n+\n+        # Orphan the block reward and make sure that the original coins\n+        # from the wallet can still be spent.\n+        self.nodes[0].invalidateblock(blk)\n+        self.nodes[0].generate(200)\n+        self.sync_blocks()\n+        # Without the following abandontransaction call, the coins are\n+        # not considered available yet.\n+        assert_equal(self.nodes[1].getbalances()[\"mine\"], {\n+          \"trusted\": 0,\n+          \"untrusted_pending\": 0,\n+          \"immature\": 0,\n+        })\n+        # The following abandontransaction is necessary to make the later\n+        # lines succeed, and probably should not be needed; see\n+        # https://github.com/bitcoin/bitcoin/issues/14148.\n+        self.nodes[1].abandontransaction(txid)\n+        assert_equal(self.nodes[1].getbalances()[\"mine\"], {\n+          \"trusted\": 10,\n+          \"untrusted_pending\": 0,\n+          \"immature\": 0,\n+        })\n+        self.nodes[1].sendtoaddress(address=self.nodes[0].getnewaddress(), amount=9, subtractfeefromamount=True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r544686860",
      "id" : 544686860,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY4Njg2MA==",
      "original_commit_id" : "7aeaa92ae0d45cddd2cdbdc735cdbcfa5fb2871a",
      "original_line" : 58,
      "original_position" : 58,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : null,
      "pull_request_review_id" : 554146405,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/544686860",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r582617560"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582617560"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Indeed.  Not sure why I had the other form; maybe a previous version of the test needed the `subtractfeefromamount`, but that is no longer the case.",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2021-02-25T08:01:51Z",
      "diff_hunk" : "@@ -0,0 +1,61 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        # Generate some blocks and obtain some coins on node 0.  We send\n+        # some balance to node 1, which will hold it as a single coin.\n+        self.nodes[0].generate(150)\n+        self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 10)\n+        self.nodes[0].generate(1)\n+\n+        # Get a block reward with node 1 and remember the block so we can orphan\n+        # it later.\n+        self.sync_blocks()\n+        blk = self.nodes[1].generate(1)[0]\n+        self.sync_blocks()\n+\n+        # Let the block reward mature and send coins including both\n+        # the existing balance and the block reward.\n+        self.nodes[0].generate(150)\n+        assert_equal(self.nodes[1].getbalance(), 10 + 25)\n+        txid = self.nodes[1].sendtoaddress(address=self.nodes[0].getnewaddress(), amount=30, subtractfeefromamount=True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r582617560",
      "id" : 582617560,
      "in_reply_to_id" : 544678039,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjYxNzU2MA==",
      "original_commit_id" : "7aeaa92ae0d45cddd2cdbdc735cdbcfa5fb2871a",
      "original_line" : 35,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : null,
      "pull_request_review_id" : 598284075,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:01:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582617560",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r582617933"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582617933"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes it can, but I think having it in there is an extra check that the wallet does properly handle the coins.  So unless there is a strong preference to remove it, I'd rather keep it in to make the test more robust and descriptive.",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2021-02-25T08:02:35Z",
      "diff_hunk" : "@@ -0,0 +1,61 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        # Generate some blocks and obtain some coins on node 0.  We send\n+        # some balance to node 1, which will hold it as a single coin.\n+        self.nodes[0].generate(150)\n+        self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 10)\n+        self.nodes[0].generate(1)\n+\n+        # Get a block reward with node 1 and remember the block so we can orphan\n+        # it later.\n+        self.sync_blocks()\n+        blk = self.nodes[1].generate(1)[0]\n+        self.sync_blocks()\n+\n+        # Let the block reward mature and send coins including both\n+        # the existing balance and the block reward.\n+        self.nodes[0].generate(150)\n+        assert_equal(self.nodes[1].getbalance(), 10 + 25)\n+        txid = self.nodes[1].sendtoaddress(address=self.nodes[0].getnewaddress(), amount=30, subtractfeefromamount=True)\n+\n+        # Orphan the block reward and make sure that the original coins\n+        # from the wallet can still be spent.\n+        self.nodes[0].invalidateblock(blk)\n+        self.nodes[0].generate(200)\n+        self.sync_blocks()\n+        # Without the following abandontransaction call, the coins are\n+        # not considered available yet.\n+        assert_equal(self.nodes[1].getbalances()[\"mine\"], {\n+          \"trusted\": 0,\n+          \"untrusted_pending\": 0,\n+          \"immature\": 0,\n+        })\n+        # The following abandontransaction is necessary to make the later\n+        # lines succeed, and probably should not be needed; see\n+        # https://github.com/bitcoin/bitcoin/issues/14148.\n+        self.nodes[1].abandontransaction(txid)\n+        assert_equal(self.nodes[1].getbalances()[\"mine\"], {\n+          \"trusted\": 10,\n+          \"untrusted_pending\": 0,\n+          \"immature\": 0,\n+        })\n+        self.nodes[1].sendtoaddress(address=self.nodes[0].getnewaddress(), amount=9, subtractfeefromamount=True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r582617933",
      "id" : 582617933,
      "in_reply_to_id" : 544686860,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjYxNzkzMw==",
      "original_commit_id" : "7aeaa92ae0d45cddd2cdbdc735cdbcfa5fb2871a",
      "original_line" : 58,
      "original_position" : 58,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : null,
      "pull_request_review_id" : 598284620,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:02:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582617933",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r582618143"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582618143"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Sounds good to me, updated to 152.",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2021-02-25T08:02:58Z",
      "diff_hunk" : "@@ -0,0 +1,61 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        # Generate some blocks and obtain some coins on node 0.  We send\n+        # some balance to node 1, which will hold it as a single coin.\n+        self.nodes[0].generate(150)\n+        self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 10)\n+        self.nodes[0].generate(1)\n+\n+        # Get a block reward with node 1 and remember the block so we can orphan\n+        # it later.\n+        self.sync_blocks()\n+        blk = self.nodes[1].generate(1)[0]\n+        self.sync_blocks()\n+\n+        # Let the block reward mature and send coins including both\n+        # the existing balance and the block reward.\n+        self.nodes[0].generate(150)\n+        assert_equal(self.nodes[1].getbalance(), 10 + 25)\n+        txid = self.nodes[1].sendtoaddress(address=self.nodes[0].getnewaddress(), amount=30, subtractfeefromamount=True)\n+\n+        # Orphan the block reward and make sure that the original coins\n+        # from the wallet can still be spent.\n+        self.nodes[0].invalidateblock(blk)\n+        self.nodes[0].generate(200)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r582618143",
      "id" : 582618143,
      "in_reply_to_id" : 544686136,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjYxODE0Mw==",
      "original_commit_id" : "7aeaa92ae0d45cddd2cdbdc735cdbcfa5fb2871a",
      "original_line" : 40,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : null,
      "pull_request_review_id" : 598284889,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T08:02:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582618143",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks @LarryRuane and @leonardojobim , and sorry for the long response time on my end.  I have now rebased the PR onto latest `master` and addressed your comments.\r\n\r\nAs for the alternate final validation with `-zapwallettxes`, I agree this is possible, but I think `abandontransaction` is more explicit as it specifies the transaction in question.  I'm happy to change it, though.",
      "created_at" : "2021-02-25T08:04:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#issuecomment-785702542",
      "id" : 785702542,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18795",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NTcwMjU0Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-25T08:04:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/785702542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r583076735"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/583076735"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> ... having it in there is an extra check ...\r\n\r\nI verified that if this `sendtoaddress` fails (which I forced by increasing the amount sent to 99999), the entire test fails, which is good. (I wasn't aware of that, which is why I thought this was an unnecessary line of code -- good to leave it in as you have. Need to put an RPC within a `try` to have its failure not fail the overall test.)",
      "commit_id" : "ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2021-02-25T18:42:14Z",
      "diff_hunk" : "@@ -0,0 +1,61 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        # Generate some blocks and obtain some coins on node 0.  We send\n+        # some balance to node 1, which will hold it as a single coin.\n+        self.nodes[0].generate(150)\n+        self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 10)\n+        self.nodes[0].generate(1)\n+\n+        # Get a block reward with node 1 and remember the block so we can orphan\n+        # it later.\n+        self.sync_blocks()\n+        blk = self.nodes[1].generate(1)[0]\n+        self.sync_blocks()\n+\n+        # Let the block reward mature and send coins including both\n+        # the existing balance and the block reward.\n+        self.nodes[0].generate(150)\n+        assert_equal(self.nodes[1].getbalance(), 10 + 25)\n+        txid = self.nodes[1].sendtoaddress(address=self.nodes[0].getnewaddress(), amount=30, subtractfeefromamount=True)\n+\n+        # Orphan the block reward and make sure that the original coins\n+        # from the wallet can still be spent.\n+        self.nodes[0].invalidateblock(blk)\n+        self.nodes[0].generate(200)\n+        self.sync_blocks()\n+        # Without the following abandontransaction call, the coins are\n+        # not considered available yet.\n+        assert_equal(self.nodes[1].getbalances()[\"mine\"], {\n+          \"trusted\": 0,\n+          \"untrusted_pending\": 0,\n+          \"immature\": 0,\n+        })\n+        # The following abandontransaction is necessary to make the later\n+        # lines succeed, and probably should not be needed; see\n+        # https://github.com/bitcoin/bitcoin/issues/14148.\n+        self.nodes[1].abandontransaction(txid)\n+        assert_equal(self.nodes[1].getbalances()[\"mine\"], {\n+          \"trusted\": 10,\n+          \"untrusted_pending\": 0,\n+          \"immature\": 0,\n+        })\n+        self.nodes[1].sendtoaddress(address=self.nodes[0].getnewaddress(), amount=9, subtractfeefromamount=True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r583076735",
      "id" : 583076735,
      "in_reply_to_id" : 544686860,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MzA3NjczNQ==",
      "original_commit_id" : "7aeaa92ae0d45cddd2cdbdc735cdbcfa5fb2871a",
      "original_line" : 58,
      "original_position" : 58,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : null,
      "pull_request_review_id" : 598886783,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-25T18:42:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/583076735",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK ef9f3f4b25a6158aa3ff32bf74c104c325c910b1",
      "created_at" : "2021-02-25T18:42:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#issuecomment-786118668",
      "id" : 786118668,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18795",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NjExODY2OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-25T18:42:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/786118668",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\n This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-03-24T09:40:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#issuecomment-805651661",
      "id" : 805651661,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18795",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNTY1MTY2MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-24T09:40:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/805651661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ping for rebase @domob1812.",
      "created_at" : "2021-06-01T16:07:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#issuecomment-852248286",
      "id" : 852248286,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18795",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MjI0ODI4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-01T16:07:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/852248286",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the reminder, rebased.",
      "created_at" : "2021-06-02T12:34:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#issuecomment-852989417",
      "id" : 852989417,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18795",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1Mjk4OTQxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-02T12:34:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/852989417",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r644319534"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/644319534"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        # Get a block reward (25) with node 1 and remember the block so we can orphan\r\n```\r\n(Non-blocking, only if you touch-up, would have made the test easier for me to understand.)",
      "commit_id" : "e4356f6a6c18e5027a064a4d3a5deda27985f584",
      "created_at" : "2021-06-02T21:05:09Z",
      "diff_hunk" : "@@ -0,0 +1,61 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test orphaned block rewards in the wallet.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class OrphanedBlockRewardTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        # Generate some blocks and obtain some coins on node 0.  We send\n+        # some balance to node 1, which will hold it as a single coin.\n+        self.nodes[0].generate(150)\n+        self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 10)\n+        self.nodes[0].generate(1)\n+\n+        # Get a block reward with node 1 and remember the block so we can orphan",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18795#discussion_r644319534",
      "id" : 644319534,
      "line" : 25,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NDMxOTUzNA==",
      "original_commit_id" : "e4356f6a6c18e5027a064a4d3a5deda27985f584",
      "original_line" : 25,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/wallet_orphanedreward.py",
      "position" : 25,
      "pull_request_review_id" : 674680226,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18795",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-06-02T21:09:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/644319534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   }
]
