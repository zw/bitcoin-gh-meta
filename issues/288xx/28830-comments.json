[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28830).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/28830#pullrequestreview-1764747210) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28960](https://github.com/bitcoin/bitcoin/pull/28960) (kernel: Remove dependency on CScheduler by TheCharlatan)\n* [#28051](https://github.com/bitcoin/bitcoin/pull/28051) (Get rid of shutdown.cpp/shutdown.h, use SignalInterrupt directly by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-11-09T11:24:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-1803649349",
      "id" : 1803649349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII585rgYFF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1803649349/reactions"
      },
      "updated_at" : "2023-12-05T13:33:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1803649349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-12-01T21:12:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-1836784064",
      "id" : 1836784064,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII585texnA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1836784064/reactions"
      },
      "updated_at" : "2023-12-01T21:12:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1836784064",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415372320"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415372320"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think this actually does anything? (+[here](https://github.com/bitcoin/bitcoin/pull/28830/files#diff-07fe07ecfff4dd7c233a453006567140ff20d226fd73a20406df14982b1e415bR132))",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-05T11:04:45Z",
      "diff_hunk" : "@@ -125,7 +125,9 @@ CTxMemPool MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeConte\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\n \n     // ...and construct a CTxMemPool from it\n-    return CTxMemPool{mempool_opts};\n+    std::optional<bilingual_str> error{};\n+    return CTxMemPool{mempool_opts, error};\n+    Assert(!error);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415372320",
      "id" : 1415372320,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585UXN4g",
      "original_commit_id" : "29818f5f839bb0a08980da6f6dbb980ef7754652",
      "original_line" : 130,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : null,
      "pull_request_review_id" : 1764747210,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415372320/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T13:33:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415372320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415619542"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415619542"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this approach is less safe than it has to be, it's pretty easy to not handle the `error`. Would it make more sense to make the ctor private and add a `util::Result<CTxMemPool> Make(const Options& opts)` factory method?",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-05T13:32:14Z",
      "diff_hunk" : "@@ -400,8 +400,8 @@ void CTxMemPoolEntry::UpdateAncestorState(int32_t modifySize, CAmount modifyFee,\n     assert(int(nSigOpCostWithAncestors) >= 0);\n }\n \n-CTxMemPool::CTxMemPool(const Options& opts)\n-    : m_check_ratio{opts.check_ratio},\n+CTxMemPool::CTxMemPool(const Options& opts, std::optional<bilingual_str>& error)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415619542",
      "id" : 1415619542,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585UYKPW",
      "original_commit_id" : "29818f5f839bb0a08980da6f6dbb980ef7754652",
      "original_line" : 403,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1764747210,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415619542/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T14:08:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415619542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415634415"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415634415"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Funny that compilers compile this code",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-05T13:42:52Z",
      "diff_hunk" : "@@ -125,7 +125,9 @@ CTxMemPool MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeConte\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\n \n     // ...and construct a CTxMemPool from it\n-    return CTxMemPool{mempool_opts};\n+    std::optional<bilingual_str> error{};\n+    return CTxMemPool{mempool_opts, error};\n+    Assert(!error);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415634415",
      "id" : 1415634415,
      "in_reply_to_id" : 1415372320,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585UYN3v",
      "original_commit_id" : "29818f5f839bb0a08980da6f6dbb980ef7754652",
      "original_line" : 130,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : null,
      "pull_request_review_id" : 1765113948,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415634415/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T13:42:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415634415",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415690508"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415690508"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Clang has an `-Wunreachable-code`. Maybe someone can integrate this into the build system by default?\r\n\r\nEdit: https://github.com/bitcoin/bitcoin/pull/28999 ",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-05T14:19:47Z",
      "diff_hunk" : "@@ -125,7 +125,9 @@ CTxMemPool MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeConte\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\n \n     // ...and construct a CTxMemPool from it\n-    return CTxMemPool{mempool_opts};\n+    std::optional<bilingual_str> error{};\n+    return CTxMemPool{mempool_opts, error};\n+    Assert(!error);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415690508",
      "id" : 1415690508,
      "in_reply_to_id" : 1415372320,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585UYbkM",
      "original_commit_id" : "29818f5f839bb0a08980da6f6dbb980ef7754652",
      "original_line" : 130,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : null,
      "pull_request_review_id" : 1765204674,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415690508/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T14:42:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415690508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 29818f5f839bb0a08980da6f6dbb980ef7754652 -> 1d18cc6cb30a875c4b6bea946a8c19d42e76dbcf ([mempoolArgs_0](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_0) -> [mempoolArgs_1](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_1),  [compare](https://github.com/TheCharlatan/bitcoin/compare/mempoolArgs_0..mempoolArgs_1))\r\n\r\nUpdated 1d18cc6cb30a875c4b6bea946a8c19d42e76dbcf -> 3aa41a31690da2ae22b6a15a9a5de0de78a01757 ([mempoolArgs_1](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_1) -> [mempoolArgs_2](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_2),  [compare](https://github.com/TheCharlatan/bitcoin/compare/mempoolArgs_1..mempoolArgs_2)) \r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415619542), using the `Result` type and a factory method instead of error string parameters.\r\n",
      "created_at" : "2023-12-05T22:38:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-1841742823",
      "id" : 1841742823,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII585txsPn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1841742823/reactions"
      },
      "updated_at" : "2023-12-05T22:38:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1841742823",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1416362699"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416362699"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Uff, embarassing.",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-05T22:41:50Z",
      "diff_hunk" : "@@ -125,7 +125,9 @@ CTxMemPool MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeConte\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\n \n     // ...and construct a CTxMemPool from it\n-    return CTxMemPool{mempool_opts};\n+    std::optional<bilingual_str> error{};\n+    return CTxMemPool{mempool_opts, error};\n+    Assert(!error);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1416362699",
      "id" : 1416362699,
      "in_reply_to_id" : 1415372320,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Ua_rL",
      "original_commit_id" : "29818f5f839bb0a08980da6f6dbb980ef7754652",
      "original_line" : 130,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : null,
      "pull_request_review_id" : 1766241970,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416362699/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T22:41:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416362699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422813069"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422813069"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit\r\n```suggestion\r\n    MockedTxPool& tx_pool = *static_cast<MockedTxPool*>(tx_pool_.get());\r\n```",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-11T17:00:54Z",
      "diff_hunk" : "@@ -147,8 +147,8 @@ FUZZ_TARGET(tx_package_eval, .init = initialize_tx_pool)\n     auto outpoints_updater = std::make_shared<OutpointsUpdater>(mempool_outpoints);\n     RegisterSharedValidationInterface(outpoints_updater);\n \n-    CTxMemPool tx_pool_{MakeMempool(fuzzed_data_provider, node)};\n-    MockedTxPool& tx_pool = *static_cast<MockedTxPool*>(&tx_pool_);\n+    auto tx_pool_{Assert(MakeMempool(fuzzed_data_provider, node))};\n+    MockedTxPool& tx_pool = *static_cast<MockedTxPool*>(&*tx_pool_);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422813069",
      "id" : 1422813069,
      "line" : 151,
      "node_id" : "PRRC_kwDOABII585UzmeN",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 151,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : 25,
      "pull_request_review_id" : 1775679380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422813069/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422813069",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422850484"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422850484"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: could limit scope of `mempool`:\r\n\r\n<details>\r\n<summary>git diff on 3aa41a3169</summary>\r\n\r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex eb88a3fa73..1fa34b77e8 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -1476,11 +1476,11 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\r\n     }\r\n \r\n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested();) {\r\n-        auto mempool{CTxMemPool::Make(mempool_opts)};\r\n-        if (!mempool) {\r\n+        if (auto mempool{CTxMemPool::Make(mempool_opts)}) {\r\n+            node.mempool = std::move(mempool.value());\r\n+        } else {\r\n             return InitError(ErrorString(mempool));\r\n         }\r\n-        node.mempool = std::move(mempool.value());\r\n         LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\r\n \r\n \r\n\r\n```\r\n</details>\r\n",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-11T17:27:52Z",
      "diff_hunk" : "@@ -1474,16 +1474,15 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (!result) {\n         return InitError(util::ErrorString(result));\n     }\n-    mempool_opts.check_ratio = std::clamp<int>(mempool_opts.check_ratio, 0, 1'000'000);\n-\n-    int64_t descendant_limit_bytes = mempool_opts.limits.descendant_size_vbytes * 40;\n-    if (mempool_opts.max_size_bytes < 0 || mempool_opts.max_size_bytes < descendant_limit_bytes) {\n-        return InitError(strprintf(_(\"-maxmempool must be at least %d MB\"), std::ceil(descendant_limit_bytes / 1'000'000.0)));\n-    }\n-    LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested();) {\n-        node.mempool = std::make_unique<CTxMemPool>(mempool_opts);\n+        auto mempool{CTxMemPool::Make(mempool_opts)};\n+        if (!mempool) {\n+            return InitError(ErrorString(mempool));\n+        }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422850484",
      "id" : 1422850484,
      "line" : 1482,
      "node_id" : "PRRC_kwDOABII585Uzvm0",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 1482,
      "original_position" : 17,
      "original_start_line" : 1479,
      "path" : "src/init.cpp",
      "position" : 17,
      "pull_request_review_id" : 1775679380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422850484/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1479,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-12-12T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422850484",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422862314"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422862314"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: is there a meaningful use for `Assert` here (and in most other places in this pull) since we already use `util::Result::value()` and there are no side effects?",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-11T17:35:16Z",
      "diff_hunk" : "@@ -109,7 +110,8 @@ FUZZ_TARGET(mini_miner, .init = initialize_miner)\n FUZZ_TARGET(mini_miner_selection, .init = initialize_miner)\n {\n     FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n-    CTxMemPool pool{CTxMemPool::Options{}};\n+    auto tx_pool{std::move(Assert(CTxMemPool::Make(CTxMemPool::Options{})).value())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422862314",
      "id" : 1422862314,
      "line" : 113,
      "node_id" : "PRRC_kwDOABII585Uzyfq",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 113,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/test/fuzz/mini_miner.cpp",
      "position" : 15,
      "pull_request_review_id" : 1775679380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422862314/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422862314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1423915340"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423915340"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: unnecessary newline?",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-12T12:22:20Z",
      "diff_hunk" : "@@ -428,12 +431,11 @@ class CTxMemPool\n                                                               const Limits& limits\n                                                               ) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n \n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1423915340",
      "id" : 1423915340,
      "line" : 434,
      "node_id" : "PRRC_kwDOABII585U3zlM",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 434,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 17,
      "pull_request_review_id" : 1775679380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423915340/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423915340",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1423923859"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423923859"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I'd intuitively expect `Make` to return a (wrapped) ` CTxMemPool`. Would it make sense to name this method `MakeUnique`?",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-12T12:29:48Z",
      "diff_hunk" : "@@ -452,7 +454,7 @@ class CTxMemPool\n      * accepting transactions becomes O(N^2) where N is the number of transactions\n      * in the pool.\n      */\n-    explicit CTxMemPool(const Options& opts);\n+    static util::Result<std::unique_ptr<CTxMemPool>> Make(const Options& opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1423923859",
      "id" : 1423923859,
      "line" : 457,
      "node_id" : "PRRC_kwDOABII585U31qT",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 457,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 32,
      "pull_request_review_id" : 1775679380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423923859/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423923859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1424003014"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424003014"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: if we're okay dropping the `Assert`, would just one-line this ([+here ](https://github.com/bitcoin/bitcoin/pull/28830/files#diff-d324f8d2ac7811c1d9b47d79833154afa6e1e41261170573968ac2ebfde9f478R55-R56), [here](https://github.com/bitcoin/bitcoin/pull/28830/files#diff-77738eb901e87bd186e09ee7d817a0989f1a1a86d045bc2a8a4ffbe35f71145dR36-R37)). Otherwise, not a fan of using `mempool` (or `tx_pool`) as var names, when the difference with `pool` is one being a ptr to the other. `ppool` or `pool_ptr` (my preference) might be more clear?\r\n```suggestion\r\n    CTxMemPool& pool{*std::move(CTxMemPool::Make(MemPoolOptionsForTest(g_setup->m_node)).value())};\r\n```",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-12T13:35:50Z",
      "diff_hunk" : "@@ -38,7 +38,8 @@ FUZZ_TARGET(rbf, .init = initialize_rbf)\n         return;\n     }\n \n-    CTxMemPool pool{MemPoolOptionsForTest(g_setup->m_node)};\n+    auto mempool{std::move(Assert(CTxMemPool::Make(MemPoolOptionsForTest(g_setup->m_node))).value())};\n+    CTxMemPool& pool = *mempool;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1424003014",
      "id" : 1424003014,
      "line" : 42,
      "node_id" : "PRRC_kwDOABII585U4I_G",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 42,
      "original_position" : 6,
      "original_start_line" : 41,
      "path" : "src/test/fuzz/rbf.cpp",
      "position" : 6,
      "pull_request_review_id" : 1775679380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424003014/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 41,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-12-12T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424003014",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1424090165"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424090165"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Wdyt about this approach to fix the fuzzer (this impl requires rebase to use c++20 for `std::string::starts_with`)? This should be efficient without relying too much (but still somewhat) on the implementation of `CTxMemPool::Make`?\r\n\r\nAfter #25665 is merged, could have a `Make` return an enum failure value and avoid the errorstring checking. \r\n\r\n<details>\r\n<summary>git diff on 3aa41a3169</summary>\r\n\r\n```diff\r\ndiff --git a/src/test/fuzz/package_eval.cpp b/src/test/fuzz/package_eval.cpp\r\nindex ec708a5c53..7f8aecb1ae 100644\r\n--- a/src/test/fuzz/package_eval.cpp\r\n+++ b/src/test/fuzz/package_eval.cpp\r\n@@ -111,13 +111,15 @@ std::unique_ptr<CTxMemPool> MakeMempool(FuzzedDataProvider& fuzzed_data_provider\r\n     // Take the default options for tests...\r\n     CTxMemPool::Options mempool_opts{MemPoolOptionsForTest(node)};\r\n \r\n-\r\n     // ...override specific options for this specific fuzz suite\r\n     mempool_opts.limits.ancestor_count = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 50);\r\n     mempool_opts.limits.ancestor_size_vbytes = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 202) * 1'000;\r\n     mempool_opts.limits.descendant_count = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 50);\r\n-    mempool_opts.limits.descendant_size_vbytes = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 202) * 1'000;\r\n-    mempool_opts.max_size_bytes = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 200) * 1'000'000;\r\n+    auto set_descendants_size = [&]() {\r\n+        mempool_opts.limits.descendant_size_vbytes = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 202) * 1'000;\r\n+        mempool_opts.max_size_bytes = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 200) * 1'000'000;\r\n+    };\r\n+    set_descendants_size();\r\n     mempool_opts.expiry = std::chrono::hours{fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 999)};\r\n     nBytesPerSigOp = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(1, 999);\r\n \r\n@@ -125,7 +127,15 @@ std::unique_ptr<CTxMemPool> MakeMempool(FuzzedDataProvider& fuzzed_data_provider\r\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\r\n \r\n     // ...and construct a CTxMemPool from it\r\n-    return std::move(Assert(CTxMemPool::Make(mempool_opts)).value());\r\n+    while (true) {\r\n+        if (auto res{CTxMemPool::Make(mempool_opts)}) {\r\n+            return std::move(res.value());\r\n+        } else {\r\n+            // Ensure this harness is updated when additional mempool construction failure paths are introduced\r\n+            assert(util::ErrorString(res).original.starts_with(\"-maxmempool must be at least\"));\r\n+            set_descendants_size();\r\n+        }\r\n+    }\r\n }\r\n \r\n FUZZ_TARGET(tx_package_eval, .init = initialize_tx_pool)\r\n\r\n```\r\n</details>",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-12T14:39:43Z",
      "diff_hunk" : "@@ -125,7 +125,7 @@ CTxMemPool MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeConte\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\n \n     // ...and construct a CTxMemPool from it\n-    return CTxMemPool{mempool_opts};\n+    return std::move(Assert(CTxMemPool::Make(mempool_opts)).value());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1424090165",
      "id" : 1424090165,
      "line" : 128,
      "node_id" : "PRRC_kwDOABII585U4eQ1",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 128,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : 14,
      "pull_request_review_id" : 1775679380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424090165/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424090165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1424611283"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424611283"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Doesn't this leave an unsafe dangling reference if we don't have a variable capturing ownership of the `unique_ptr`?",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-12T21:49:28Z",
      "diff_hunk" : "@@ -38,7 +38,8 @@ FUZZ_TARGET(rbf, .init = initialize_rbf)\n         return;\n     }\n \n-    CTxMemPool pool{MemPoolOptionsForTest(g_setup->m_node)};\n+    auto mempool{std::move(Assert(CTxMemPool::Make(MemPoolOptionsForTest(g_setup->m_node))).value())};\n+    CTxMemPool& pool = *mempool;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1424611283",
      "id" : 1424611283,
      "in_reply_to_id" : 1424003014,
      "line" : 42,
      "node_id" : "PRRC_kwDOABII585U6dfT",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 42,
      "original_position" : 6,
      "original_start_line" : 41,
      "path" : "src/test/fuzz/rbf.cpp",
      "position" : 6,
      "pull_request_review_id" : 1778493543,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424611283/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 41,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-12-12T21:49:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424611283",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1425077125"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1425077125"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah, you're right, that'd be bad. ",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-13T09:26:03Z",
      "diff_hunk" : "@@ -38,7 +38,8 @@ FUZZ_TARGET(rbf, .init = initialize_rbf)\n         return;\n     }\n \n-    CTxMemPool pool{MemPoolOptionsForTest(g_setup->m_node)};\n+    auto mempool{std::move(Assert(CTxMemPool::Make(MemPoolOptionsForTest(g_setup->m_node))).value())};\n+    CTxMemPool& pool = *mempool;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1425077125",
      "id" : 1425077125,
      "in_reply_to_id" : 1424003014,
      "line" : 42,
      "node_id" : "PRRC_kwDOABII585U8POF",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 42,
      "original_position" : 6,
      "original_start_line" : 41,
      "path" : "src/test/fuzz/rbf.cpp",
      "position" : 6,
      "pull_request_review_id" : 1779197134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1425077125/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 41,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-12-13T09:26:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1425077125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   }
]
