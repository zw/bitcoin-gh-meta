[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28824).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "created_at" : "2023-11-08T16:07:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1802203254",
      "id" : 1802203254,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585ra3B2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1802203254/reactions"
      },
      "updated_at" : "2023-11-08T16:07:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1802203254",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1387462425"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387462425"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This seems much harder to understand to me -- you need to convert it to `0x07a120` then convert that to decimal to get back to the nice round number block height? In particular mistaking it for `0x20a107` (2,138,375) would be particularly misleading.",
      "commit_id" : "fde11cb0fa300914721f55932a3bfabfcd428d27",
      "created_at" : "2023-11-09T04:12:28Z",
      "diff_hunk" : "@@ -133,7 +133,7 @@ def decodescript_script_pub_key(self):\n         cltv_script = '63' + push_public_key + 'ad670320a107b17568' + push_public_key + 'ac'\n         rpc_result = self.nodes[0].decodescript(cltv_script)\n         assert_equal('nonstandard', rpc_result['type'])\n-        assert_equal('OP_IF ' + public_key + ' OP_CHECKSIGVERIFY OP_ELSE 500000 OP_CHECKLOCKTIMEVERIFY OP_DROP OP_ENDIF ' + public_key + ' OP_CHECKSIG', rpc_result['asm'])\n+        assert_equal('OP_IF ' + public_key + ' OP_CHECKSIGVERIFY OP_ELSE 20a107 OP_CHECKLOCKTIMEVERIFY OP_DROP OP_ENDIF ' + public_key + ' OP_CHECKSIG', rpc_result['asm'])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1387462425",
      "id" : 1387462425,
      "line" : 136,
      "node_id" : "PRRC_kwDOABII585Ssv8Z",
      "original_commit_id" : "fde11cb0fa300914721f55932a3bfabfcd428d27",
      "original_line" : 136,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/rpc_decodescript.py",
      "position" : 5,
      "pull_request_review_id" : 1721660658,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387462425/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-09T04:12:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387462425",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1387463136"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387463136"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This also seems confusing, particularly if it appears in something like `DUP SIZE 20 EQUALVERIFY HASH160 <x> EQUAL` -- whoops, that's actually saying the input should be 32 bytes, not 20 bytes.",
      "commit_id" : "fde11cb0fa300914721f55932a3bfabfcd428d27",
      "created_at" : "2023-11-09T04:14:19Z",
      "diff_hunk" : "@@ -170,7 +170,7 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n                 else:\n                     assert_greater_than(from_balance_before - from_balance, amount)\n             else:\n-                assert next((out for out in tx[\"vout\"] if out[\"scriptPubKey\"][\"asm\"] == \"OP_RETURN 35\"), None)\n+                assert next((out for out in tx[\"vout\"] if out[\"scriptPubKey\"][\"asm\"] == \"OP_RETURN 23\"), None)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1387463136",
      "id" : 1387463136,
      "line" : 173,
      "node_id" : "PRRC_kwDOABII585SswHg",
      "original_commit_id" : "fde11cb0fa300914721f55932a3bfabfcd428d27",
      "original_line" : 173,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/wallet_send.py",
      "position" : 5,
      "pull_request_review_id" : 1721661821,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387463136/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-09T04:14:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387463136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "In the dart library coinlib (https://pub.dev/packages/coinlib) I followed the same approach of encoding everything in HEX with integers encoded as LE. However -1 is encoded as -1. See the code here: https://github.com/peercoin/coinlib/blob/master/coinlib/lib/src/scripts/operations.dart\r\n\r\nI did this to avoid changing the ASM too much. However, I'm happy to move towards using `0x` for hex and presenting decimal for smaller data of up-to 32bits if this is introduced in Bitcoin. This would make the ASM easy to understand and read.",
      "created_at" : "2023-11-09T09:32:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1803471329",
      "id" : 1803471329,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585rfsnh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1803471329/reactions"
      },
      "updated_at" : "2023-11-09T09:33:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1803471329",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1679965?v=4",
         "events_url" : "https://api.github.com/users/MatthewLM/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MatthewLM/followers",
         "following_url" : "https://api.github.com/users/MatthewLM/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MatthewLM/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MatthewLM",
         "id" : 1679965,
         "login" : "MatthewLM",
         "node_id" : "MDQ6VXNlcjE2Nzk5NjU=",
         "organizations_url" : "https://api.github.com/users/MatthewLM/orgs",
         "received_events_url" : "https://api.github.com/users/MatthewLM/received_events",
         "repos_url" : "https://api.github.com/users/MatthewLM/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MatthewLM/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MatthewLM/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MatthewLM"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ajtowns @MatthewLM thank for your comments.\r\n\r\nI agree that after these changes some ASM fields will be less human-readable-friendly in LE hex.\r\n\r\nPrefixing with `0d` was another possibility discussed previously, but there still exists a chance that someone will interpret these as hex-encoded values, as `d` is a valid hex char (whereas `x` is clearly not decimal or hex). e.g this is not necessarily _that_ much clearer, but does offer some improvement:\r\n\r\n```sh\r\n$ bitcoin-cli -regtest decodescript 0511121314150457c74942 | jq .asm\r\n\"1112131415 0d1112131415\"\r\n\r\n$ src/bitcoin-cli -regtest decodescript 0512345678900320A107b1 | jq .asm\r\n\"1234567890 0d500000 OP_CHECKLOCKTIMEVERIFY\"\r\n\r\n```\r\n\r\nThinking about this more, it feels like the question to be answered is perhaps \"is the `asm` field supposed to be human or machine readable?\" If the former, then maintaining decimal for small values, and adding a hex-prefix for > 4 byte values might be most desirable, even it it leaves some ambiguity in some circumstances?\r\n\r\n```sh\r\n$ src/bitcoin-cli -regtest decodescript 0512345678900320A107b1 | jq .asm\r\n\"0x1234567890 500000 OP_CHECKLOCKTIMEVERIFY\"\r\n```\r\n\r\nThis would create a moderately inconvenient interface in a few of the tests (and possibly some downstream users relying on this output) where hex prefixes, if present, have to be stripped from rpc output, but perhaps that's not too terrible.\r\n\r\nIf we are designing the asm output to be a canonical, machine-readable format then my opinion remains that using hex-only makes the most sense.\r\n\r\nFWIW [btcdeb](https://github.com/bitcoin-core/btcdeb) interprets all values as decimal but prints a warning that they are ambiguous:\r\n\r\n```sh\r\n$ btcc 1234567890 500000 OP_CHECKLOCKTIMEVERIFY\r\nwarning: ambiguous input 1234567890 is interpreted as a numeric value; use 0x1234567890 to force into hexadecimal interpretation\r\nwarning: ambiguous input 500000 is interpreted as a numeric value; use 0x500000 to force into hexadecimal interpretation\r\n04d20296490320a107b1\r\n\r\n$ btcc 0x1234567890 500000 OP_CHECKLOCKTIMEVERIFY\r\nwarning: ambiguous input 500000 is interpreted as a numeric value; use 0x500000 to force into hexadecimal interpretation\r\n0512345678900320a107b1\r\n\r\n```\r\n\r\nAnd consequently generates a different script without manually specifying hex. I don't know what other tools do by default.",
      "created_at" : "2023-11-09T16:25:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1804150932",
      "id" : 1804150932,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585riSiU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1804150932/reactions"
      },
      "updated_at" : "2023-11-09T16:25:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1804150932",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I agree that `0d` is not a good idea, much better to go with `0x` for hex.",
      "created_at" : "2023-11-09T16:31:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1804161011",
      "id" : 1804161011,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585riU_z",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1804161011/reactions"
      },
      "updated_at" : "2023-11-09T16:31:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1804161011",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1679965?v=4",
         "events_url" : "https://api.github.com/users/MatthewLM/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MatthewLM/followers",
         "following_url" : "https://api.github.com/users/MatthewLM/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MatthewLM/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MatthewLM",
         "id" : 1679965,
         "login" : "MatthewLM",
         "node_id" : "MDQ6VXNlcjE2Nzk5NjU=",
         "organizations_url" : "https://api.github.com/users/MatthewLM/orgs",
         "received_events_url" : "https://api.github.com/users/MatthewLM/received_events",
         "repos_url" : "https://api.github.com/users/MatthewLM/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MatthewLM/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MatthewLM/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MatthewLM"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Thinking about this more, it feels like the question to be answered is perhaps \"is the `asm` field supposed to be human or machine readable?\"\r\n\r\nI think it's human readable? For machines we could just give the raw hex script and not bother with an asm format.\r\n\r\nAnyway, how about going for something more left field and having `decodescript 0511121314150457c74942` output `[1112131415] 1112131415` where the square brackets indicated \"quoted hexidecimal\", and values without square brackets are always decimal numbers within `CScriptNum` range? That would still be pretty clear for pubkeys:\r\n\r\n```\r\n2 [027d28a3580d0823dbee34f1df927ee58664eb8349e79b94017ddaf3f7e159153f] [03a3af0f49a21d29106ebeef9b3c3d69fc375c856a7153d97156a5b7a161ca6c25] 2 OP_CHECKMULTISIG\r\n```\r\n\r\nCould perhaps also represent non-minimal pushes that way, eg the different encodings of -1 or `[ff]`, something like:\r\n\r\n```\r\n decodescript 4f -> -1\r\n decodescript 0181 -> [0:81]\r\n decodescript 4c0181 -> [1:81]\r\n decodescript 4d010081 -> [2:81]\r\n decodescript 4e0100000081 -> [4:81]\r\n```",
      "created_at" : "2023-11-09T20:39:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1804651014",
      "id" : 1804651014,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585rkMoG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1804651014/reactions"
      },
      "updated_at" : "2023-11-09T20:39:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1804651014",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I think it's human readable? For machines we could just give the raw hex script and not bother with an asm format.\r\n\r\nThis has always been my interpretation too.\r\n\r\n> Anyway, how about going for something more left field...\r\n\r\nSquare brackets is something I could get behind; to me it is clear from your example that the brackets are indicating _something_, and just by looking at them I can see in most cases that they're hex values. To use the previous (less common?) example formatted with the brackets:\r\n\r\n```sh\r\n$ bitcoin-cli -regtest decodescript 0511121314150457c74942 | jq .asm\r\n\"[1112131415] 1112131415\"\r\n```\r\n\r\nIMO it's again clear to me now that there's _something_ different about these two values, and if I didn't know what it was then I should find out.\r\n\r\nOne question I have is whether this will interfere with the scripthash types too badly? e.g. Is this nested bracket undesirable?\r\n\r\n```sh\r\n$ src/bitcoin-cli -regtest decoderawtransaction 0100000001696a20784a2c70143f634e95227dbdfdf0ecd51647052e70854512235f5986ca010000008a47304402207174775824bec6c2700023309a168231ec80b82c6069282f5133e6f11cbb04460220570edc55c7c5da2ca687ebd0372d3546ebc3f810516a002350cac72dfe192dfb014104d3f898e6487787910a690410b7a917ef198905c27fb9d3b0a42da12aceae0544fc7088d239d9a48f2828a15a09e84043001f27cc80d162cb95404e1210161536ffffffff0100e1f505000000001976a914eb6c6e0cdb2d256a32d97b8df1fc75d1920d9bca88ac00000000 | jq .vin[].scriptSig.asm\r\n\"[304402207174775824bec6c2700023309a168231ec80b82c6069282f5133e6f11cbb04460220570edc55c7c5da2ca687ebd0372d3546ebc3f810516a002350cac72dfe192dfb[ALL]] [04d3f898e6487787910a690410b7a917ef198905c27fb9d3b0a42da12aceae0544fc7088d239d9a48f2828a15a09e84043001f27cc80d162cb95404e1210161536]\"\r\n\r\n```\r\n\r\nspecifically:\r\n\r\n```sh\r\n[... 2dfb[ALL]]\r\n```\r\n\r\nIt might be preferable to have this format instead?\r\n\r\n```sh\r\n[... 2dfb][ALL]\r\n```",
      "created_at" : "2023-11-13T12:57:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1808117267",
      "id" : 1808117267,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585rxa4T",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1808117267/reactions"
      },
      "updated_at" : "2023-11-13T12:57:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1808117267",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "`0x` is much more standard and recognisable than `[]`.",
      "created_at" : "2023-11-13T13:37:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1808180595",
      "id" : 1808180595,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585rxqVz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 2,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1808180595/reactions"
      },
      "updated_at" : "2023-11-13T13:37:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1808180595",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1679965?v=4",
         "events_url" : "https://api.github.com/users/MatthewLM/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MatthewLM/followers",
         "following_url" : "https://api.github.com/users/MatthewLM/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MatthewLM/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MatthewLM",
         "id" : 1679965,
         "login" : "MatthewLM",
         "node_id" : "MDQ6VXNlcjE2Nzk5NjU=",
         "organizations_url" : "https://api.github.com/users/MatthewLM/orgs",
         "received_events_url" : "https://api.github.com/users/MatthewLM/received_events",
         "repos_url" : "https://api.github.com/users/MatthewLM/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MatthewLM/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MatthewLM/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MatthewLM"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> `0x` is much more standard and recognisable than `[]`.\r\n\r\nIt's pretty misleading though, since `CScriptNum` is little-endian: if you see `0x0100` you would expect that to be 256, but for us it would actually be non-minimally-encoded 1; For us, `0x0201` would actually be less than `0x0102`, etc.\r\n\r\nNote this applies to block hashes, as well, so if you provide block 816651's header and execute HASH256, you end up with `[7d6368795d9675a198bd1dbe3d87dbdbbc3e0f3560a202000000000000000000]`; if you were to write `0x00000000000000000002a260350f3ebcdbdb873dbe1dbd98a175965d7968637d` to refer to the block hash, the same way we do in kernel/chainparams.cpp, you'd end up with the wrong thing. But you can't have \"0x\" just reverse things either, as that would mess up 33-byte pubkeys (they'd now end with 02 or 03 instead of beginning with it) and signatures.",
      "created_at" : "2023-11-13T23:09:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1809279093",
      "id" : 1809279093,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585r12h1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1809279093/reactions"
      },
      "updated_at" : "2023-11-13T23:09:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1809279093",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> One question I have is whether this will interfere with the scripthash types too badly? e.g. Is this nested bracket undesirable?\r\n> \r\n> specifically:\r\n> \r\n> ```shell\r\n> [... 2dfb[ALL]]\r\n> ```\r\n> \r\n> It might be preferable to have this format instead?\r\n> \r\n> ```shell\r\n> [... 2dfb][ALL]\r\n> ```\r\n\r\nI guess it being inside the brackets seems slightly clearer to me? Could have different brackets for the two things, eg `[... 2dfb<ALL>]`. Could perhaps also drop the feature entirely (reverting #5264); note that we don't display sighash flags for taproot signatures.",
      "created_at" : "2023-11-13T23:34:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1809302135",
      "id" : 1809302135,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585r18J3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1809302135/reactions"
      },
      "updated_at" : "2023-11-13T23:34:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1809302135",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> It's pretty misleading though, since `CScriptNum` is little-endian: if you see `0x0100` you would expect that to be 256, but for us it would actually be non-minimally-encoded 1; For us, `0x0201` would actually be less than `0x0102`, etc.\r\n\r\nThose smaller numbers will be shown in decimal still. For larger pushdata, hex is already shown in the little-endian encoded byte order. If `0x` is too suggestive of a big-endian hex number (a fair point), then maybe `bytes(123456789abcdef)` is clearer and less ambiguous (maybe use `push` instead of `bytes`). If following that scheme, signatures could be something like `sig(...2dfb, ALL)`. Possibly public keys could be `pk(...)`.",
      "created_at" : "2023-11-14T11:05:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1809997651",
      "id" : 1809997651,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585r4l9T",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1809997651/reactions"
      },
      "updated_at" : "2023-11-14T11:05:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1809997651",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1679965?v=4",
         "events_url" : "https://api.github.com/users/MatthewLM/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MatthewLM/followers",
         "following_url" : "https://api.github.com/users/MatthewLM/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MatthewLM/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MatthewLM",
         "id" : 1679965,
         "login" : "MatthewLM",
         "node_id" : "MDQ6VXNlcjE2Nzk5NjU=",
         "organizations_url" : "https://api.github.com/users/MatthewLM/orgs",
         "received_events_url" : "https://api.github.com/users/MatthewLM/received_events",
         "repos_url" : "https://api.github.com/users/MatthewLM/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MatthewLM/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MatthewLM/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MatthewLM"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Do we actually want to resolve all forms of ambiguity? E.g. what about the distinction between an OP_1 vs. a direct push of 0x01, vs. OP_PUSHDATA1 of 0x01? I think it'd be nice if there was a one-to-one correspondence between the disassembly and the actual script bytes.\r\n\r\nMy contribution to this bikeshedding would be:\r\n* `OP_n` -> `n` (so `-1`, `0`, `1`, ..., `10`, ..., `16`).\r\n* Drop \"OP_\" prefix for other opcodes too; they're redundant.\r\n* Other *minimal* pushes (so direct pushes, as well as OP_PUSHDATA1 over 75 bytes, and OP_PUSHDATA2 over 255 bytes):\r\n  * If the data pushed is a minimally-encoded positive number between 0 and 2^39-1 (`OP_CLTV` / `OP_CSV` accept 5-byte numbers) -> `<0x12345678>` (BE hex, as that's what a human expects for a numeric value with 0x).\r\n  * Otherwise, `<1234567890ABCDEF>` (in wire byte order, no 0x because not attempting to convey a number)\r\n* For non-minimal pushes, use `PUSHDATA1<...>` or `PUSHDATA2<...>` (with the contents of `...` using the same rules as for minimal pushes).\r\n* Drop the sighash byte type decoding. I don't feel it matches what asm is trying to do.\r\n* Optionally, for P2SH(-like) scriptSigs, the final redeemScript push could be recursively decoded (so inside `<...>`, put the asm decoding of the script being pushed), while remaining fully unambiguous.",
      "created_at" : "2023-11-14T13:28:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1810204432",
      "id" : 1810204432,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585r5YcQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 2,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1810204432/reactions"
      },
      "updated_at" : "2023-11-14T13:28:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1810204432",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> My contribution to this bikeshedding would be:\r\n>     * `OP_n` -> `n` (so `-1`, `0`, `1`, ..., `10`, ..., `16`).\r\n>     * Drop \"OP_\" prefix for other opcodes too; they're redundant.\r\n>     * Drop the sighash byte type decoding. I don't feel it matches what asm is trying to do.\r\n\r\n:+1:\r\n\r\n> * For non-minimal pushes, use `PUSHDATA1<...>` or `PUSHDATA2<...>` (with the contents of `...` using the same rules as for minimal pushes).\r\n\r\nAlso `PUSHDATA4<...>` for completeness, presumably. A direct push of values -1 and 1..16 is also non-minimal (ie, `0101` instead of `51`), could perhaps use `PUSHDATA<..>` (without 1, 2 or 4) for that case.\r\n\r\n> * Other _minimal_ pushes (so direct pushes, as well as OP_PUSHDATA1 over 75 bytes, and OP_PUSHDATA2 over 255 bytes):       \r\n> * If the data pushed is a minimally-encoded positive number between 0 and 2^39-1 (`OP_CLTV` / `OP_CSV` accept 5-byte numbers) -> `<0x12345678>` (BE hex, as that's what a human expects for a numeric value with 0x).\r\n\r\nProvided you've already dealt with non-minimally encoded -1 and 1..16, using decimals seems nicer here? You can cope with negatives cleanly (`-2` vs `<82>`), and it's one less encoding variation?\r\n\r\n> * Optionally, for P2SH(-like) scriptSigs, the final redeemScript push could be recursively decoded (so inside `<...>`, put the asm decoding of the script being pushed), while remaining fully unambiguous.\r\n\r\nThat would be nice. Probably requires remembering info from the scriptPubKey and using it when decoding the scriptSig or witness.",
      "created_at" : "2023-11-15T03:50:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1811766792",
      "id" : 1811766792,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585r_V4I",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1811766792/reactions"
      },
      "updated_at" : "2023-11-15T03:50:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1811766792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Provided you've already dealt with non-minimally encoded -1 and 1..16, using decimals seems nicer here? You can cope with negatives cleanly (`-2` vs `<82>`), and it's one less encoding variation?\r\n\r\nI was thinking it would be nice to retain decimal but, due to ambiguity that could arise with CLTV and CSV, I'm not sure.\r\n\r\nHaving embedded ASM for redeem scripts and Tapscripts would be very useful.",
      "created_at" : "2023-11-15T09:29:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812093815",
      "id" : 1812093815,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sAlt3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812093815/reactions"
      },
      "updated_at" : "2023-11-15T09:29:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812093815",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1679965?v=4",
         "events_url" : "https://api.github.com/users/MatthewLM/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MatthewLM/followers",
         "following_url" : "https://api.github.com/users/MatthewLM/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MatthewLM/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MatthewLM",
         "id" : 1679965,
         "login" : "MatthewLM",
         "node_id" : "MDQ6VXNlcjE2Nzk5NjU=",
         "organizations_url" : "https://api.github.com/users/MatthewLM/orgs",
         "received_events_url" : "https://api.github.com/users/MatthewLM/received_events",
         "repos_url" : "https://api.github.com/users/MatthewLM/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MatthewLM/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MatthewLM/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MatthewLM"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I was thinking it would be nice to retain decimal but, due to ambiguity that could arise with CLTV and CSV, I'm not sure.\r\n\r\nWhat ambiguity?",
      "created_at" : "2023-11-15T10:35:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812212359",
      "id" : 1812212359,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sBCqH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812212359/reactions"
      },
      "updated_at" : "2023-11-15T10:35:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812212359",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "For 32-bit signed integers, the 32nd leftmost bit is negative, but that's not true for CLTV and CSV which uses 5 bytes. So a push data could represent a negative 32-bit signed integer, or a positive 40-bit signed integer if I understand the `CScriptNum` without looking more closely at it.",
      "created_at" : "2023-11-15T12:31:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812455750",
      "id" : 1812455750,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sB-FG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812455750/reactions"
      },
      "updated_at" : "2023-11-15T12:31:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812455750",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1679965?v=4",
         "events_url" : "https://api.github.com/users/MatthewLM/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MatthewLM/followers",
         "following_url" : "https://api.github.com/users/MatthewLM/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MatthewLM/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MatthewLM",
         "id" : 1679965,
         "login" : "MatthewLM",
         "node_id" : "MDQ6VXNlcjE2Nzk5NjU=",
         "organizations_url" : "https://api.github.com/users/MatthewLM/orgs",
         "received_events_url" : "https://api.github.com/users/MatthewLM/received_events",
         "repos_url" : "https://api.github.com/users/MatthewLM/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MatthewLM/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MatthewLM/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MatthewLM"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MatthewLM I don't think that's correct. What's special in CSV and CLTV is that they permit numbers whose encoding is up to 5 bytes (rather than the math opcodes which only support encodings up to 4 bytes on input). But the encoding algorithm is the same: the top bit is the sign.",
      "created_at" : "2023-11-15T12:33:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812458710",
      "id" : 1812458710,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sB-zW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812458710/reactions"
      },
      "updated_at" : "2023-11-15T12:33:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812458710",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@sipa I'll have to look at the code. I imagine it is two's complement? Then the negative bit will be different for each type of integer meaning that a 4 byte pushdata that would encode a negative 32-bit signed integer could also be interpreted as a positive 40-bit signed integer.",
      "created_at" : "2023-11-15T12:36:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812462943",
      "id" : 1812462943,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sB_1f",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812462943/reactions"
      },
      "updated_at" : "2023-11-15T12:36:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812462943",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1679965?v=4",
         "events_url" : "https://api.github.com/users/MatthewLM/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MatthewLM/followers",
         "following_url" : "https://api.github.com/users/MatthewLM/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MatthewLM/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MatthewLM",
         "id" : 1679965,
         "login" : "MatthewLM",
         "node_id" : "MDQ6VXNlcjE2Nzk5NjU=",
         "organizations_url" : "https://api.github.com/users/MatthewLM/orgs",
         "received_events_url" : "https://api.github.com/users/MatthewLM/received_events",
         "repos_url" : "https://api.github.com/users/MatthewLM/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MatthewLM/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MatthewLM/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MatthewLM"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ajtowns Ok, iterating on that, new proposal:\r\n\r\n* Any minimally-encoded number, using a minimal push (`OP_n`, or direct push for numbers that cannot be encoded using OP_n) of an integer between *2<sup>31</sup>* and *2<sup>39</sup>-1*, is just encoded in decimal directly (no `<>` or anything).\r\n* `OP_` prefix dropped in general\r\n* Drop sighash type.\r\n* Any other minimal pushes (so direct push <= 75 bytes, PUSHDATA1 > 75 bytes, PUSHDATA2 > 255 bytes) become `<...>` with ... the hex-encoding (in wire byte order) of the push.\r\n* Non-minimal pushes become `PUSHDATA1<...>`, `PUSHDATA2<...>`, or `PUSHDATA4<...>`.\r\n* Inside `<...>` instead of having hex data, it's also allowed to put another decoded script (as long the script doesn't consist of exactly one 2-digit number push, because that'd be ambiguous...).\r\n\r\nThere is no need for `PUSHDATA<...>` here, because a direct push of `3` for example (`0103` in hex) would become `<03>`, while `OP_3` would become `3`.\r\n\r\n@MatthewLM I think you're missing something, but I don't see what. There is no ambiguity. Every byte encoding represents exactly one number, with a well-defined sign.",
      "created_at" : "2023-11-15T12:47:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812477898",
      "id" : 1812477898,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sCDfK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812477898/reactions"
      },
      "updated_at" : "2023-11-15T12:49:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812477898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@sipa Sorry, you are right. I looked at the code again. Bitcoin doesn't use two's complement for this (I have to keep in mind that Bitcoin has a lot of quirks). It uses a sign bit that negates the other bits, and this sign bit depends on the size of the push data (whatever the last byte is), so there is no ambiguity.\r\n\r\nTherefore I think minimally pushed numbers ought to be displayed as decimal for readability reasons as you now suggest.\r\n\r\n> * Inside `<...>` instead of having hex data, it's also allowed to put another decoded script (as long the script doesn't consist of exactly one 2-digit number push, because that'd be ambiguous...).\r\n\r\nOr any other decimal that has an even number of digits. Maybe use something like `SCRIPT<...>`?\r\n\r\n",
      "created_at" : "2023-11-15T12:56:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812490008",
      "id" : 1812490008,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sCGcY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812490008/reactions"
      },
      "updated_at" : "2023-11-15T12:56:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812490008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1679965?v=4",
         "events_url" : "https://api.github.com/users/MatthewLM/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MatthewLM/followers",
         "following_url" : "https://api.github.com/users/MatthewLM/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MatthewLM/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MatthewLM",
         "id" : 1679965,
         "login" : "MatthewLM",
         "node_id" : "MDQ6VXNlcjE2Nzk5NjU=",
         "organizations_url" : "https://api.github.com/users/MatthewLM/orgs",
         "received_events_url" : "https://api.github.com/users/MatthewLM/received_events",
         "repos_url" : "https://api.github.com/users/MatthewLM/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MatthewLM/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MatthewLM/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MatthewLM"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MatthewLM Right, any single numeric push of even number of digits inside `<>` would be ambiguous. But also, scripts consisting of a single push are generally useless as a redeemscript (they'd be anyone-can-spend), so I'm not sure it's an issue. If you actually encounter one of those, just don't do recursive decoding.",
      "created_at" : "2023-11-15T13:01:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812500265",
      "id" : 1812500265,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sCI8p",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812500265/reactions"
      },
      "updated_at" : "2023-11-15T13:03:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812500265",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "One more thought: if the format we end up with is unambiguous, there could also be a function/RPC/tool to convert asm back to script (and we can have fuzz tests that the roundtripping encoding+decoding is exact!). If so, we can probably permit a few things in the decoding that the encoder might not (yet) support:\r\n* Optionally `OP_` prefixing opcodes (and using aliases like `TRUE` or `OP_TRUE` for `OP_1`).\r\n* Using `0x...` for BE hex encoded numbers in all places where a decimal number is supported (so outside `<>`).\r\n* `PUSHDATA1<...>` or `PUSHDATA2<...>` notation even when the push is minimal.\r\n* Recursive decoding (if not supported in the encoder in the first iteration).",
      "created_at" : "2023-11-15T13:24:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812532463",
      "id" : 1812532463,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sCQzv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812532463/reactions"
      },
      "updated_at" : "2023-11-15T13:24:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812532463",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I like where this is going now. Thanks for the conversation.\r\n\r\nI've written a branch implementing this [previous version](https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1810204432) as I wanted to see what the changes would look like (although I'm not convinced I'm handling `OP_1NEGATE` properly yet, even though tests are passing...)\r\n\r\n> Any minimally-encoded number, using a minimal push (OP_n, or direct push for numbers that cannot be encoded using OP_n) of an integer between 231 and 239-1, is just encoded in decimal directly (no <> or anything).\r\n\r\nI think this will make the representation even nicer to interpret and will gladly make this change.\r\n\r\n> Inside <...> instead of having hex data, it's also allowed to put another decoded script (as long the script doesn't consist of exactly one 2-digit number push, because that'd be ambiguous...).\r\n\r\nI'll take a stab at implementing these nested scripts as well, as I think they'd be a nice improvement too...",
      "created_at" : "2023-11-15T13:25:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812534458",
      "id" : 1812534458,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sCRS6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812534458/reactions"
      },
      "updated_at" : "2023-11-15T13:25:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812534458",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : ">  * Any minimally-encoded number, using a minimal push (`OP_n`, or direct push for numbers that cannot be encoded using OP_n) of an integer between _231_ and _239-1_, is just encoded in decimal directly (no `<>` or anything).\r\n\r\n~`-2**31`~ `-2**31+1` and `2**39-1` presumably? (original lacks the negative sign, and github can't quote superscript correctly apparently). EDIT: `0xffff_ffff` is `-2**31+1` with a sign-flag, rather than `-2**31` being `0x8000_0000` in two's complement\r\n \r\n> * Any other minimal pushes (so direct push <= 75 bytes, PUSHDATA1 > 75 bytes, PUSHDATA2 > 255 bytes) become `<...>` with ... the hex-encoding (in wire byte order) of the push.\r\n\r\nPer `script/script.cpp:CheckMinimalPush()`, `0101` isn't a minimal push, so I think it'd be better to drop the \"minimal push\" phrasing and just use the definition currently in brackets. (also; PUSHDATA4 > 65535 bytes)\r\n\r\n> * Inside `<...>` instead of having hex data, it's also allowed to put another decoded script (as long the script doesn't consist of exactly one 2-digit number push, because that'd be ambiguous...).\r\n\r\nAny push of a single positive number between 10-99; 1,000-9,999; 100,000-999,999; 10,000,000-99,999,999; 1,000,000,000-9,999,999,999; and 100,000,000,000-549,755,813,887 would be ambiguous, no?",
      "created_at" : "2023-11-15T13:49:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812570217",
      "id" : 1812570217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sCaBp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812570217/reactions"
      },
      "updated_at" : "2023-11-15T13:59:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812570217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ajtowns Right on all 3 counts. Instead of limiting the integer range, maybe just \"all minimal pushes of up to 5 bytes, which push a minimally-encoded integer\".",
      "created_at" : "2023-11-15T14:00:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812587025",
      "id" : 1812587025,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sCeIR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812587025/reactions"
      },
      "updated_at" : "2023-11-15T14:00:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812587025",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "One more question: what to do with unknown opcodes, and undecodable bytes? The current `FormatScript` just turns it into bare hex with 0x prefix. I guess we could keep the \"0x\" prefix to denote \"raw stuff\", but the current format is pretty misleading (it uses wire byte order, while \"0x\" suggests they're BE numbers) and incompatible with allowing \"0x...\" for denoting actual integers.\r\n\r\nSuggestion: use `RAW(...)` with \"...\" the hex in wire byte order for those. I'd prefer not to use `RAW<...>` because I associate `<>` with \"pushing\", which wouldn't be correct here. I'm not too happy with having a special keyword in the syntax just for that either, so suggestions welcome.",
      "created_at" : "2023-11-15T14:05:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812596092",
      "id" : 1812596092,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sCgV8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812596092/reactions"
      },
      "updated_at" : "2023-11-15T14:12:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812596092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Currently `GetOpCode()` will return `OP_UNKNOWN` for unknown opcodes which seems reasonable. Dropping the `OP_` would appear in the asm as `UNKNOWN`.\r\n\r\nAs for undecodable bytes, if we did want a keyword, perhaps something more explicit like `UNDECODABLE<...>` would be better? We are essentially using what I would expect `RAW` to denote for > 5 byte minimal pushes if we go with this:\r\n\r\n> Any other minimal pushes (so direct push <= 75 bytes, PUSHDATA1 > 75 bytes, PUSHDATA2 > 255 bytes) become <...> with ... the hex-encoding (in wire byte order) of the push.",
      "created_at" : "2023-11-15T14:14:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812610712",
      "id" : 1812610712,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sCj6Y",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812610712/reactions"
      },
      "updated_at" : "2023-11-15T14:14:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812610712",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Currently GetOpCode() will return OP_UNKNOWN for unknown opcodes which seems reasonable.\r\n\r\nThat's trivially ambiguous, as *all* unknown opcodes are mapped to the same thing.\r\n\r\n> As for undecodable bytes, if we did want a keyword, perhaps something more explicit like UNDECODABLE<...> would be better?\r\n\r\nMaybe, but I wouldn't use `<...>` because it's not a push.\r\n\r\n> We are essentially using what I would expect RAW to denote for > 5 byte minimal pushes if we go with this:\r\n\r\nNo, *any* pushes become either decimal numbers, or `<...>`, or `PUSHDATA[124]<...>`. ~~Pushes are not undecodable.~~\r\n\r\nEDIT: actually, I think all undecodable things (ignoring unknown opcodes) *are* pushes (but ones which straddle the end of the script boundary).",
      "created_at" : "2023-11-15T14:18:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812617163",
      "id" : 1812617163,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sClfL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812617163/reactions"
      },
      "updated_at" : "2023-11-15T14:25:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812617163",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Could we use `UNKNOWN_n` where n denotes the op code hex/decimal such as `UNKOWN_FE` for `0xfe`?",
      "created_at" : "2023-11-15T16:10:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1812829602",
      "id" : 1812829602,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sDZWi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812829602/reactions"
      },
      "updated_at" : "2023-11-15T16:10:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812829602",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1679965?v=4",
         "events_url" : "https://api.github.com/users/MatthewLM/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MatthewLM/followers",
         "following_url" : "https://api.github.com/users/MatthewLM/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MatthewLM/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MatthewLM",
         "id" : 1679965,
         "login" : "MatthewLM",
         "node_id" : "MDQ6VXNlcjE2Nzk5NjU=",
         "organizations_url" : "https://api.github.com/users/MatthewLM/orgs",
         "received_events_url" : "https://api.github.com/users/MatthewLM/received_events",
         "repos_url" : "https://api.github.com/users/MatthewLM/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MatthewLM/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MatthewLM/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MatthewLM"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Marked as draft for now and pushed what I have worked on so far.\r\n\r\nI haven't looked at implementing undecodable bytes or nested scripts yet.",
      "created_at" : "2023-11-15T22:33:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1813371106",
      "id" : 1813371106,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sFdji",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1813371106/reactions"
      },
      "updated_at" : "2023-11-15T22:33:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1813371106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1394993981"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1394993981"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think you want `fRequireMinimal=true` true here, otherwise it'll turn non-minimally-encoded values into decimal too.",
      "commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "created_at" : "2023-11-15T23:53:04Z",
      "diff_hunk" : "@@ -109,33 +115,46 @@ std::string ScriptToAsmStr(const CScript& script, const bool fAttemptSighashDeco\n             str += \"[error]\";\n             return str;\n         }\n+        // Covers OP_FALSE\n+        if (opcode == OP_0) {\n+            str += \"0\";\n+            continue;\n+        }\n+        if (opcode == OP_1NEGATE) {\n+            str += \"-1\";\n+            continue;\n+        }\n+        // OP_n -> n (so 1, ..., 10, ..., 16), covers OP_TRUE\n+        if ((opcode >= OP_1 && opcode <= OP_16)) {\n+            // These are always minimal, use the corresponding value\n+            str += strprintf(\"%i\", opcode - OP_1NEGATE - 1);\n+            continue;\n+        }\n         if (0 <= opcode && opcode <= OP_PUSHDATA4) {\n-            if (vch.size() <= static_cast<std::vector<unsigned char>::size_type>(4)) {\n-                str += strprintf(\"%d\", CScriptNum(vch, false).getint());\n-            } else {\n-                // the IsUnspendable check makes sure not to try to decode OP_RETURN data that may match the format of a signature\n-                if (fAttemptSighashDecode && !script.IsUnspendable()) {\n-                    std::string strSigHashDecode;\n-                    // goal: only attempt to decode a defined sighash type from data that looks like a signature within a scriptSig.\n-                    // this won't decode correctly formatted public keys in Pubkey or Multisig scripts due to\n-                    // the restrictions on the pubkey formats (see IsCompressedOrUncompressedPubKey) being incongruous with the\n-                    // checks in CheckSignatureEncoding.\n-                    if (CheckSignatureEncoding(vch, SCRIPT_VERIFY_STRICTENC, nullptr)) {\n-                        const unsigned char chSigHashType = vch.back();\n-                        const auto it = mapSigHashTypes.find(chSigHashType);\n-                        if (it != mapSigHashTypes.end()) {\n-                            strSigHashDecode = \"[\" + it->second + \"]\";\n-                            vch.pop_back(); // remove the sighash type byte. it will be replaced by the decode.\n-                        }\n-                    }\n-                    str += HexStr(vch) + strSigHashDecode;\n+            if (CheckMinimalPush(vch, opcode)) {\n+                if (vch.size() <= 5 ) {\n+                    // Return decimal for minimially-encoded values <= 5 bytes (OP_CLTV / OP_CSV accept 5-byte numbers)\n+                    CScriptNum n(vch, false, 5);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1394993981",
      "id" : 1394993981,
      "line" : 137,
      "node_id" : "PRRC_kwDOABII585TJes9",
      "original_commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "original_line" : 137,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 67,
      "pull_request_review_id" : 1733242118,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1394993981/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-15T23:53:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1394993981",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395001686"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395001686"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I expect this to be a controversial opinion, but I disagree with calling this \"little endian\". That's a term that applies to encoding numbers to bytes/bits. Since what's being encoded isn't a number, or to be interpreted as a number, endianness is inapplicable. It's just encoding bytes in hexadecimal format, in order.",
      "commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "created_at" : "2023-11-16T00:07:15Z",
      "diff_hunk" : "@@ -109,33 +115,46 @@ std::string ScriptToAsmStr(const CScript& script, const bool fAttemptSighashDeco\n             str += \"[error]\";\n             return str;\n         }\n+        // Covers OP_FALSE\n+        if (opcode == OP_0) {\n+            str += \"0\";\n+            continue;\n+        }\n+        if (opcode == OP_1NEGATE) {\n+            str += \"-1\";\n+            continue;\n+        }\n+        // OP_n -> n (so 1, ..., 10, ..., 16), covers OP_TRUE\n+        if ((opcode >= OP_1 && opcode <= OP_16)) {\n+            // These are always minimal, use the corresponding value\n+            str += strprintf(\"%i\", opcode - OP_1NEGATE - 1);\n+            continue;\n+        }\n         if (0 <= opcode && opcode <= OP_PUSHDATA4) {\n-            if (vch.size() <= static_cast<std::vector<unsigned char>::size_type>(4)) {\n-                str += strprintf(\"%d\", CScriptNum(vch, false).getint());\n-            } else {\n-                // the IsUnspendable check makes sure not to try to decode OP_RETURN data that may match the format of a signature\n-                if (fAttemptSighashDecode && !script.IsUnspendable()) {\n-                    std::string strSigHashDecode;\n-                    // goal: only attempt to decode a defined sighash type from data that looks like a signature within a scriptSig.\n-                    // this won't decode correctly formatted public keys in Pubkey or Multisig scripts due to\n-                    // the restrictions on the pubkey formats (see IsCompressedOrUncompressedPubKey) being incongruous with the\n-                    // checks in CheckSignatureEncoding.\n-                    if (CheckSignatureEncoding(vch, SCRIPT_VERIFY_STRICTENC, nullptr)) {\n-                        const unsigned char chSigHashType = vch.back();\n-                        const auto it = mapSigHashTypes.find(chSigHashType);\n-                        if (it != mapSigHashTypes.end()) {\n-                            strSigHashDecode = \"[\" + it->second + \"]\";\n-                            vch.pop_back(); // remove the sighash type byte. it will be replaced by the decode.\n-                        }\n-                    }\n-                    str += HexStr(vch) + strSigHashDecode;\n+            if (CheckMinimalPush(vch, opcode)) {\n+                if (vch.size() <= 5 ) {\n+                    // Return decimal for minimially-encoded values <= 5 bytes (OP_CLTV / OP_CSV accept 5-byte numbers)\n+                    CScriptNum n(vch, false, 5);\n+                    str += strprintf(\"%lld\", n.GetInt64());\n                 } else {\n-                    str += HexStr(vch);\n+                    // Otherwise display the push as LE hex enclosed in angle brackets",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395001686",
      "id" : 1395001686,
      "line" : 140,
      "node_id" : "PRRC_kwDOABII585TJglW",
      "original_commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "original_line" : 140,
      "original_position" : 71,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 71,
      "pull_request_review_id" : 1733253522,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395001686/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-16T00:07:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395001686",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395004582"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395004582"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It's not little endian, I agree.",
      "commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "created_at" : "2023-11-16T00:11:14Z",
      "diff_hunk" : "@@ -109,33 +115,46 @@ std::string ScriptToAsmStr(const CScript& script, const bool fAttemptSighashDeco\n             str += \"[error]\";\n             return str;\n         }\n+        // Covers OP_FALSE\n+        if (opcode == OP_0) {\n+            str += \"0\";\n+            continue;\n+        }\n+        if (opcode == OP_1NEGATE) {\n+            str += \"-1\";\n+            continue;\n+        }\n+        // OP_n -> n (so 1, ..., 10, ..., 16), covers OP_TRUE\n+        if ((opcode >= OP_1 && opcode <= OP_16)) {\n+            // These are always minimal, use the corresponding value\n+            str += strprintf(\"%i\", opcode - OP_1NEGATE - 1);\n+            continue;\n+        }\n         if (0 <= opcode && opcode <= OP_PUSHDATA4) {\n-            if (vch.size() <= static_cast<std::vector<unsigned char>::size_type>(4)) {\n-                str += strprintf(\"%d\", CScriptNum(vch, false).getint());\n-            } else {\n-                // the IsUnspendable check makes sure not to try to decode OP_RETURN data that may match the format of a signature\n-                if (fAttemptSighashDecode && !script.IsUnspendable()) {\n-                    std::string strSigHashDecode;\n-                    // goal: only attempt to decode a defined sighash type from data that looks like a signature within a scriptSig.\n-                    // this won't decode correctly formatted public keys in Pubkey or Multisig scripts due to\n-                    // the restrictions on the pubkey formats (see IsCompressedOrUncompressedPubKey) being incongruous with the\n-                    // checks in CheckSignatureEncoding.\n-                    if (CheckSignatureEncoding(vch, SCRIPT_VERIFY_STRICTENC, nullptr)) {\n-                        const unsigned char chSigHashType = vch.back();\n-                        const auto it = mapSigHashTypes.find(chSigHashType);\n-                        if (it != mapSigHashTypes.end()) {\n-                            strSigHashDecode = \"[\" + it->second + \"]\";\n-                            vch.pop_back(); // remove the sighash type byte. it will be replaced by the decode.\n-                        }\n-                    }\n-                    str += HexStr(vch) + strSigHashDecode;\n+            if (CheckMinimalPush(vch, opcode)) {\n+                if (vch.size() <= 5 ) {\n+                    // Return decimal for minimially-encoded values <= 5 bytes (OP_CLTV / OP_CSV accept 5-byte numbers)\n+                    CScriptNum n(vch, false, 5);\n+                    str += strprintf(\"%lld\", n.GetInt64());\n                 } else {\n-                    str += HexStr(vch);\n+                    // Otherwise display the push as LE hex enclosed in angle brackets",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395004582",
      "id" : 1395004582,
      "in_reply_to_id" : 1395001686,
      "line" : 140,
      "node_id" : "PRRC_kwDOABII585TJhSm",
      "original_commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "original_line" : 140,
      "original_position" : 71,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 71,
      "pull_request_review_id" : 1733257316,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395004582/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-16T00:11:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395004582",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395555866"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395555866"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Agree that it should be `true` as a belt-and-suspenders, but we are inside `if (CheckMinimalPush(vch, opcode))` already here, so shouldn't happen?",
      "commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "created_at" : "2023-11-16T11:28:51Z",
      "diff_hunk" : "@@ -109,33 +115,46 @@ std::string ScriptToAsmStr(const CScript& script, const bool fAttemptSighashDeco\n             str += \"[error]\";\n             return str;\n         }\n+        // Covers OP_FALSE\n+        if (opcode == OP_0) {\n+            str += \"0\";\n+            continue;\n+        }\n+        if (opcode == OP_1NEGATE) {\n+            str += \"-1\";\n+            continue;\n+        }\n+        // OP_n -> n (so 1, ..., 10, ..., 16), covers OP_TRUE\n+        if ((opcode >= OP_1 && opcode <= OP_16)) {\n+            // These are always minimal, use the corresponding value\n+            str += strprintf(\"%i\", opcode - OP_1NEGATE - 1);\n+            continue;\n+        }\n         if (0 <= opcode && opcode <= OP_PUSHDATA4) {\n-            if (vch.size() <= static_cast<std::vector<unsigned char>::size_type>(4)) {\n-                str += strprintf(\"%d\", CScriptNum(vch, false).getint());\n-            } else {\n-                // the IsUnspendable check makes sure not to try to decode OP_RETURN data that may match the format of a signature\n-                if (fAttemptSighashDecode && !script.IsUnspendable()) {\n-                    std::string strSigHashDecode;\n-                    // goal: only attempt to decode a defined sighash type from data that looks like a signature within a scriptSig.\n-                    // this won't decode correctly formatted public keys in Pubkey or Multisig scripts due to\n-                    // the restrictions on the pubkey formats (see IsCompressedOrUncompressedPubKey) being incongruous with the\n-                    // checks in CheckSignatureEncoding.\n-                    if (CheckSignatureEncoding(vch, SCRIPT_VERIFY_STRICTENC, nullptr)) {\n-                        const unsigned char chSigHashType = vch.back();\n-                        const auto it = mapSigHashTypes.find(chSigHashType);\n-                        if (it != mapSigHashTypes.end()) {\n-                            strSigHashDecode = \"[\" + it->second + \"]\";\n-                            vch.pop_back(); // remove the sighash type byte. it will be replaced by the decode.\n-                        }\n-                    }\n-                    str += HexStr(vch) + strSigHashDecode;\n+            if (CheckMinimalPush(vch, opcode)) {\n+                if (vch.size() <= 5 ) {\n+                    // Return decimal for minimially-encoded values <= 5 bytes (OP_CLTV / OP_CSV accept 5-byte numbers)\n+                    CScriptNum n(vch, false, 5);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395555866",
      "id" : 1395555866,
      "in_reply_to_id" : 1394993981,
      "line" : 137,
      "node_id" : "PRRC_kwDOABII585TLn4a",
      "original_commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "original_line" : 137,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 67,
      "pull_request_review_id" : 1734148610,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395555866/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-16T11:28:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395555866",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395576175"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395576175"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Byte code `024000` is a minimal push of the two-byte vector `4000` (so passes `CheckMinimalPush`) but it's not a minimal `CScriptNum` since it just evaluates to 64, and should have been `0140` (so fails `fRequireMinimal` due to the trailing 0).",
      "commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "created_at" : "2023-11-16T11:47:08Z",
      "diff_hunk" : "@@ -109,33 +115,46 @@ std::string ScriptToAsmStr(const CScript& script, const bool fAttemptSighashDeco\n             str += \"[error]\";\n             return str;\n         }\n+        // Covers OP_FALSE\n+        if (opcode == OP_0) {\n+            str += \"0\";\n+            continue;\n+        }\n+        if (opcode == OP_1NEGATE) {\n+            str += \"-1\";\n+            continue;\n+        }\n+        // OP_n -> n (so 1, ..., 10, ..., 16), covers OP_TRUE\n+        if ((opcode >= OP_1 && opcode <= OP_16)) {\n+            // These are always minimal, use the corresponding value\n+            str += strprintf(\"%i\", opcode - OP_1NEGATE - 1);\n+            continue;\n+        }\n         if (0 <= opcode && opcode <= OP_PUSHDATA4) {\n-            if (vch.size() <= static_cast<std::vector<unsigned char>::size_type>(4)) {\n-                str += strprintf(\"%d\", CScriptNum(vch, false).getint());\n-            } else {\n-                // the IsUnspendable check makes sure not to try to decode OP_RETURN data that may match the format of a signature\n-                if (fAttemptSighashDecode && !script.IsUnspendable()) {\n-                    std::string strSigHashDecode;\n-                    // goal: only attempt to decode a defined sighash type from data that looks like a signature within a scriptSig.\n-                    // this won't decode correctly formatted public keys in Pubkey or Multisig scripts due to\n-                    // the restrictions on the pubkey formats (see IsCompressedOrUncompressedPubKey) being incongruous with the\n-                    // checks in CheckSignatureEncoding.\n-                    if (CheckSignatureEncoding(vch, SCRIPT_VERIFY_STRICTENC, nullptr)) {\n-                        const unsigned char chSigHashType = vch.back();\n-                        const auto it = mapSigHashTypes.find(chSigHashType);\n-                        if (it != mapSigHashTypes.end()) {\n-                            strSigHashDecode = \"[\" + it->second + \"]\";\n-                            vch.pop_back(); // remove the sighash type byte. it will be replaced by the decode.\n-                        }\n-                    }\n-                    str += HexStr(vch) + strSigHashDecode;\n+            if (CheckMinimalPush(vch, opcode)) {\n+                if (vch.size() <= 5 ) {\n+                    // Return decimal for minimially-encoded values <= 5 bytes (OP_CLTV / OP_CSV accept 5-byte numbers)\n+                    CScriptNum n(vch, false, 5);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395576175",
      "id" : 1395576175,
      "in_reply_to_id" : 1394993981,
      "line" : 137,
      "node_id" : "PRRC_kwDOABII585TLs1v",
      "original_commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "original_line" : 137,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 67,
      "pull_request_review_id" : 1734181268,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395576175/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-16T11:47:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395576175",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395623337"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395623337"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah, there are two distinct concepts of minimality:\r\n* Minimal pushes apply to the interpretation of stack elements as *byte vectors*, and are about whether you used the right opcode (OP_n, direct push, OP_PUSHDATA1, OP_PUSHDATA2, OP_PUSHDATA4): you have to use the first applicable one from that list for a push to be a minimal push. It's relevant even for non-numeric data in script (e.g. you shouldn't use OP_PUSHDATA1 to push a public key, as a direct push suffices).\r\n* Minimally-encoded integers apply to the interpretation of stack elements as *numbers*, and are about whether no surplus bytes were introduced when encoding the number as a byte vector but not about how that byte vector gets pushed. The byte vectors `42`, `4200`, `420000` all encode the number 66, and `83`, `0380`, `030080`, ... all encode the number -3, but you have to use the first one from each list for it to be minimally-encoded.",
      "commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "created_at" : "2023-11-16T12:29:50Z",
      "diff_hunk" : "@@ -109,33 +115,46 @@ std::string ScriptToAsmStr(const CScript& script, const bool fAttemptSighashDeco\n             str += \"[error]\";\n             return str;\n         }\n+        // Covers OP_FALSE\n+        if (opcode == OP_0) {\n+            str += \"0\";\n+            continue;\n+        }\n+        if (opcode == OP_1NEGATE) {\n+            str += \"-1\";\n+            continue;\n+        }\n+        // OP_n -> n (so 1, ..., 10, ..., 16), covers OP_TRUE\n+        if ((opcode >= OP_1 && opcode <= OP_16)) {\n+            // These are always minimal, use the corresponding value\n+            str += strprintf(\"%i\", opcode - OP_1NEGATE - 1);\n+            continue;\n+        }\n         if (0 <= opcode && opcode <= OP_PUSHDATA4) {\n-            if (vch.size() <= static_cast<std::vector<unsigned char>::size_type>(4)) {\n-                str += strprintf(\"%d\", CScriptNum(vch, false).getint());\n-            } else {\n-                // the IsUnspendable check makes sure not to try to decode OP_RETURN data that may match the format of a signature\n-                if (fAttemptSighashDecode && !script.IsUnspendable()) {\n-                    std::string strSigHashDecode;\n-                    // goal: only attempt to decode a defined sighash type from data that looks like a signature within a scriptSig.\n-                    // this won't decode correctly formatted public keys in Pubkey or Multisig scripts due to\n-                    // the restrictions on the pubkey formats (see IsCompressedOrUncompressedPubKey) being incongruous with the\n-                    // checks in CheckSignatureEncoding.\n-                    if (CheckSignatureEncoding(vch, SCRIPT_VERIFY_STRICTENC, nullptr)) {\n-                        const unsigned char chSigHashType = vch.back();\n-                        const auto it = mapSigHashTypes.find(chSigHashType);\n-                        if (it != mapSigHashTypes.end()) {\n-                            strSigHashDecode = \"[\" + it->second + \"]\";\n-                            vch.pop_back(); // remove the sighash type byte. it will be replaced by the decode.\n-                        }\n-                    }\n-                    str += HexStr(vch) + strSigHashDecode;\n+            if (CheckMinimalPush(vch, opcode)) {\n+                if (vch.size() <= 5 ) {\n+                    // Return decimal for minimially-encoded values <= 5 bytes (OP_CLTV / OP_CSV accept 5-byte numbers)\n+                    CScriptNum n(vch, false, 5);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395623337",
      "id" : 1395623337,
      "in_reply_to_id" : 1394993981,
      "line" : 137,
      "node_id" : "PRRC_kwDOABII585TL4Wp",
      "original_commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "original_line" : 137,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 67,
      "pull_request_review_id" : 1734259926,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395623337/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-16T12:36:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395623337",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395831233"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395831233"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the explanations.\r\n\r\nI've refactored out handling pushed data, as I wasn't enjoying all the nested if statements, and notice that we are currently handling \"non-minimal pushes\" the same as minimal pushes with non-minimally-encoded values, which is to use `OPCODE<hex>`. This seems ok, and it will not be a lossy decode, but do we want to differentiate between the two pathways to this decode format?\r\n\r\nSee first and last case in snippet to illustrate what I mean above:\r\n\r\n```cpp\r\n/*\r\n * Format pushed bytes into appropriate ASM format\r\n */\r\nstd::string FormatPushDataAsm(const std::vector<unsigned char>& vch, opcodetype opcode)\r\n{\r\n    // Use OPCODE<hex> for non-minimal pushes\r\n    // TODO: There are no tests for this currently\r\n    if (!CheckMinimalPush(vch, opcode)) {\r\n        return GetOpNameAsm(opcode) + BracketStr(HexStr(vch));\r\n    }\r\n\r\n    // Use <hex> for minimal pushes > 5 bytes\r\n    if (!(vch.size() <= 5) ) {\r\n        return BracketStr(HexStr(vch));\r\n    }\r\n\r\n    // Use decimal for minimally-encoded, minimal pushes <= 5 bytes\r\n    // Note: OP_CLTV / OP_CSV accept 5-byte numbers\r\n    try {\r\n        CScriptNum n{vch, true, 5};\r\n        return strprintf(\"%lld\", n.GetInt64());\r\n    }\r\n\r\n    // Use OPCODE<hex> for non-minimally-encoded minimal pushes\r\n    // TODO: There are no tests for this currently\r\n    catch (scriptnum_error& e) {\r\n        return GetOpNameAsm(opcode) + BracketStr(HexStr(vch));\r\n    }\r\n}\r\n```",
      "commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "created_at" : "2023-11-16T14:48:25Z",
      "diff_hunk" : "@@ -109,33 +115,46 @@ std::string ScriptToAsmStr(const CScript& script, const bool fAttemptSighashDeco\n             str += \"[error]\";\n             return str;\n         }\n+        // Covers OP_FALSE\n+        if (opcode == OP_0) {\n+            str += \"0\";\n+            continue;\n+        }\n+        if (opcode == OP_1NEGATE) {\n+            str += \"-1\";\n+            continue;\n+        }\n+        // OP_n -> n (so 1, ..., 10, ..., 16), covers OP_TRUE\n+        if ((opcode >= OP_1 && opcode <= OP_16)) {\n+            // These are always minimal, use the corresponding value\n+            str += strprintf(\"%i\", opcode - OP_1NEGATE - 1);\n+            continue;\n+        }\n         if (0 <= opcode && opcode <= OP_PUSHDATA4) {\n-            if (vch.size() <= static_cast<std::vector<unsigned char>::size_type>(4)) {\n-                str += strprintf(\"%d\", CScriptNum(vch, false).getint());\n-            } else {\n-                // the IsUnspendable check makes sure not to try to decode OP_RETURN data that may match the format of a signature\n-                if (fAttemptSighashDecode && !script.IsUnspendable()) {\n-                    std::string strSigHashDecode;\n-                    // goal: only attempt to decode a defined sighash type from data that looks like a signature within a scriptSig.\n-                    // this won't decode correctly formatted public keys in Pubkey or Multisig scripts due to\n-                    // the restrictions on the pubkey formats (see IsCompressedOrUncompressedPubKey) being incongruous with the\n-                    // checks in CheckSignatureEncoding.\n-                    if (CheckSignatureEncoding(vch, SCRIPT_VERIFY_STRICTENC, nullptr)) {\n-                        const unsigned char chSigHashType = vch.back();\n-                        const auto it = mapSigHashTypes.find(chSigHashType);\n-                        if (it != mapSigHashTypes.end()) {\n-                            strSigHashDecode = \"[\" + it->second + \"]\";\n-                            vch.pop_back(); // remove the sighash type byte. it will be replaced by the decode.\n-                        }\n-                    }\n-                    str += HexStr(vch) + strSigHashDecode;\n+            if (CheckMinimalPush(vch, opcode)) {\n+                if (vch.size() <= 5 ) {\n+                    // Return decimal for minimially-encoded values <= 5 bytes (OP_CLTV / OP_CSV accept 5-byte numbers)\n+                    CScriptNum n(vch, false, 5);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395831233",
      "id" : 1395831233,
      "in_reply_to_id" : 1394993981,
      "line" : 137,
      "node_id" : "PRRC_kwDOABII585TMrHB",
      "original_commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "original_line" : 137,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 67,
      "pull_request_review_id" : 1734604024,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395831233/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-16T14:48:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395831233",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395839903"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395839903"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The `<...>` and `OPCODE<...>` cases treat the pushed values as byte arrays, not as numbers, so minimal encoding or not is irrelevant.",
      "commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "created_at" : "2023-11-16T14:50:25Z",
      "diff_hunk" : "@@ -109,33 +115,46 @@ std::string ScriptToAsmStr(const CScript& script, const bool fAttemptSighashDeco\n             str += \"[error]\";\n             return str;\n         }\n+        // Covers OP_FALSE\n+        if (opcode == OP_0) {\n+            str += \"0\";\n+            continue;\n+        }\n+        if (opcode == OP_1NEGATE) {\n+            str += \"-1\";\n+            continue;\n+        }\n+        // OP_n -> n (so 1, ..., 10, ..., 16), covers OP_TRUE\n+        if ((opcode >= OP_1 && opcode <= OP_16)) {\n+            // These are always minimal, use the corresponding value\n+            str += strprintf(\"%i\", opcode - OP_1NEGATE - 1);\n+            continue;\n+        }\n         if (0 <= opcode && opcode <= OP_PUSHDATA4) {\n-            if (vch.size() <= static_cast<std::vector<unsigned char>::size_type>(4)) {\n-                str += strprintf(\"%d\", CScriptNum(vch, false).getint());\n-            } else {\n-                // the IsUnspendable check makes sure not to try to decode OP_RETURN data that may match the format of a signature\n-                if (fAttemptSighashDecode && !script.IsUnspendable()) {\n-                    std::string strSigHashDecode;\n-                    // goal: only attempt to decode a defined sighash type from data that looks like a signature within a scriptSig.\n-                    // this won't decode correctly formatted public keys in Pubkey or Multisig scripts due to\n-                    // the restrictions on the pubkey formats (see IsCompressedOrUncompressedPubKey) being incongruous with the\n-                    // checks in CheckSignatureEncoding.\n-                    if (CheckSignatureEncoding(vch, SCRIPT_VERIFY_STRICTENC, nullptr)) {\n-                        const unsigned char chSigHashType = vch.back();\n-                        const auto it = mapSigHashTypes.find(chSigHashType);\n-                        if (it != mapSigHashTypes.end()) {\n-                            strSigHashDecode = \"[\" + it->second + \"]\";\n-                            vch.pop_back(); // remove the sighash type byte. it will be replaced by the decode.\n-                        }\n-                    }\n-                    str += HexStr(vch) + strSigHashDecode;\n+            if (CheckMinimalPush(vch, opcode)) {\n+                if (vch.size() <= 5 ) {\n+                    // Return decimal for minimially-encoded values <= 5 bytes (OP_CLTV / OP_CSV accept 5-byte numbers)\n+                    CScriptNum n(vch, false, 5);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395839903",
      "id" : 1395839903,
      "in_reply_to_id" : 1394993981,
      "line" : 137,
      "node_id" : "PRRC_kwDOABII585TMtOf",
      "original_commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "original_line" : 137,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 67,
      "pull_request_review_id" : 1734617682,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395839903/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-16T14:50:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395839903",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395846308"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395846308"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Sure, but what I mean is that in my current impl there are _two_ ways we can end up with `OPCODE<...>`:\r\n\r\n1) Wasn't a minimal push\r\n2) Was a minimal push <5 bytes, but wasn't a minimally-encoded decimal value",
      "commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "created_at" : "2023-11-16T14:54:30Z",
      "diff_hunk" : "@@ -109,33 +115,46 @@ std::string ScriptToAsmStr(const CScript& script, const bool fAttemptSighashDeco\n             str += \"[error]\";\n             return str;\n         }\n+        // Covers OP_FALSE\n+        if (opcode == OP_0) {\n+            str += \"0\";\n+            continue;\n+        }\n+        if (opcode == OP_1NEGATE) {\n+            str += \"-1\";\n+            continue;\n+        }\n+        // OP_n -> n (so 1, ..., 10, ..., 16), covers OP_TRUE\n+        if ((opcode >= OP_1 && opcode <= OP_16)) {\n+            // These are always minimal, use the corresponding value\n+            str += strprintf(\"%i\", opcode - OP_1NEGATE - 1);\n+            continue;\n+        }\n         if (0 <= opcode && opcode <= OP_PUSHDATA4) {\n-            if (vch.size() <= static_cast<std::vector<unsigned char>::size_type>(4)) {\n-                str += strprintf(\"%d\", CScriptNum(vch, false).getint());\n-            } else {\n-                // the IsUnspendable check makes sure not to try to decode OP_RETURN data that may match the format of a signature\n-                if (fAttemptSighashDecode && !script.IsUnspendable()) {\n-                    std::string strSigHashDecode;\n-                    // goal: only attempt to decode a defined sighash type from data that looks like a signature within a scriptSig.\n-                    // this won't decode correctly formatted public keys in Pubkey or Multisig scripts due to\n-                    // the restrictions on the pubkey formats (see IsCompressedOrUncompressedPubKey) being incongruous with the\n-                    // checks in CheckSignatureEncoding.\n-                    if (CheckSignatureEncoding(vch, SCRIPT_VERIFY_STRICTENC, nullptr)) {\n-                        const unsigned char chSigHashType = vch.back();\n-                        const auto it = mapSigHashTypes.find(chSigHashType);\n-                        if (it != mapSigHashTypes.end()) {\n-                            strSigHashDecode = \"[\" + it->second + \"]\";\n-                            vch.pop_back(); // remove the sighash type byte. it will be replaced by the decode.\n-                        }\n-                    }\n-                    str += HexStr(vch) + strSigHashDecode;\n+            if (CheckMinimalPush(vch, opcode)) {\n+                if (vch.size() <= 5 ) {\n+                    // Return decimal for minimially-encoded values <= 5 bytes (OP_CLTV / OP_CSV accept 5-byte numbers)\n+                    CScriptNum n(vch, false, 5);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395846308",
      "id" : 1395846308,
      "in_reply_to_id" : 1394993981,
      "line" : 137,
      "node_id" : "PRRC_kwDOABII585TMuyk",
      "original_commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "original_line" : 137,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 67,
      "pull_request_review_id" : 1734628217,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395846308/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-16T14:54:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395846308",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395859701"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395859701"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Hmm, right. I think that's redundant.\r\n\r\nI'd go for something like:\r\n* If minimal push, not over 5 bytes, and minimally encoded, use decimal.\r\n* Otherwise, if minimal push, or direct push, use `<...>`.\r\n* Otherwise, use `OPCODE<...>`.\r\n\r\n",
      "commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "created_at" : "2023-11-16T15:03:23Z",
      "diff_hunk" : "@@ -109,33 +115,46 @@ std::string ScriptToAsmStr(const CScript& script, const bool fAttemptSighashDeco\n             str += \"[error]\";\n             return str;\n         }\n+        // Covers OP_FALSE\n+        if (opcode == OP_0) {\n+            str += \"0\";\n+            continue;\n+        }\n+        if (opcode == OP_1NEGATE) {\n+            str += \"-1\";\n+            continue;\n+        }\n+        // OP_n -> n (so 1, ..., 10, ..., 16), covers OP_TRUE\n+        if ((opcode >= OP_1 && opcode <= OP_16)) {\n+            // These are always minimal, use the corresponding value\n+            str += strprintf(\"%i\", opcode - OP_1NEGATE - 1);\n+            continue;\n+        }\n         if (0 <= opcode && opcode <= OP_PUSHDATA4) {\n-            if (vch.size() <= static_cast<std::vector<unsigned char>::size_type>(4)) {\n-                str += strprintf(\"%d\", CScriptNum(vch, false).getint());\n-            } else {\n-                // the IsUnspendable check makes sure not to try to decode OP_RETURN data that may match the format of a signature\n-                if (fAttemptSighashDecode && !script.IsUnspendable()) {\n-                    std::string strSigHashDecode;\n-                    // goal: only attempt to decode a defined sighash type from data that looks like a signature within a scriptSig.\n-                    // this won't decode correctly formatted public keys in Pubkey or Multisig scripts due to\n-                    // the restrictions on the pubkey formats (see IsCompressedOrUncompressedPubKey) being incongruous with the\n-                    // checks in CheckSignatureEncoding.\n-                    if (CheckSignatureEncoding(vch, SCRIPT_VERIFY_STRICTENC, nullptr)) {\n-                        const unsigned char chSigHashType = vch.back();\n-                        const auto it = mapSigHashTypes.find(chSigHashType);\n-                        if (it != mapSigHashTypes.end()) {\n-                            strSigHashDecode = \"[\" + it->second + \"]\";\n-                            vch.pop_back(); // remove the sighash type byte. it will be replaced by the decode.\n-                        }\n-                    }\n-                    str += HexStr(vch) + strSigHashDecode;\n+            if (CheckMinimalPush(vch, opcode)) {\n+                if (vch.size() <= 5 ) {\n+                    // Return decimal for minimially-encoded values <= 5 bytes (OP_CLTV / OP_CSV accept 5-byte numbers)\n+                    CScriptNum n(vch, false, 5);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395859701",
      "id" : 1395859701,
      "in_reply_to_id" : 1394993981,
      "line" : 137,
      "node_id" : "PRRC_kwDOABII585TMyD1",
      "original_commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "original_line" : 137,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 67,
      "pull_request_review_id" : 1734653538,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395859701/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-16T15:03:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395859701",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395881820"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395881820"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is unambiguous, with the following decoding rules:\r\n* Decimal numbers are turned into `OP_n` if applicable, otherwise into a direct push of the minimally-encoded form of that number.\r\n* `<...>` is turned into a direct push if up to 75 bytes, into `OP_PUSHDATA1` if below 256 bytes, into `OP_PUSHDATA2` if below 65536 bytes, and into `OP_PUSHDATA4` otherwise.\r\n* `OPCODE<...>` is turned into a push using the relevant opcode.\r\n\r\nIn particular (I think @ajtowns pointed this out before as well), using `<...>` for non-minimal but direct pushes is fine, as it cannot represent anything else (not an `OP_n`, because those use decimal, and not a `PUSHDATA` opcode because if those were used for sizes <= 75 bytes, they'd have used `OPCODE<...>`).",
      "commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "created_at" : "2023-11-16T15:16:28Z",
      "diff_hunk" : "@@ -109,33 +115,46 @@ std::string ScriptToAsmStr(const CScript& script, const bool fAttemptSighashDeco\n             str += \"[error]\";\n             return str;\n         }\n+        // Covers OP_FALSE\n+        if (opcode == OP_0) {\n+            str += \"0\";\n+            continue;\n+        }\n+        if (opcode == OP_1NEGATE) {\n+            str += \"-1\";\n+            continue;\n+        }\n+        // OP_n -> n (so 1, ..., 10, ..., 16), covers OP_TRUE\n+        if ((opcode >= OP_1 && opcode <= OP_16)) {\n+            // These are always minimal, use the corresponding value\n+            str += strprintf(\"%i\", opcode - OP_1NEGATE - 1);\n+            continue;\n+        }\n         if (0 <= opcode && opcode <= OP_PUSHDATA4) {\n-            if (vch.size() <= static_cast<std::vector<unsigned char>::size_type>(4)) {\n-                str += strprintf(\"%d\", CScriptNum(vch, false).getint());\n-            } else {\n-                // the IsUnspendable check makes sure not to try to decode OP_RETURN data that may match the format of a signature\n-                if (fAttemptSighashDecode && !script.IsUnspendable()) {\n-                    std::string strSigHashDecode;\n-                    // goal: only attempt to decode a defined sighash type from data that looks like a signature within a scriptSig.\n-                    // this won't decode correctly formatted public keys in Pubkey or Multisig scripts due to\n-                    // the restrictions on the pubkey formats (see IsCompressedOrUncompressedPubKey) being incongruous with the\n-                    // checks in CheckSignatureEncoding.\n-                    if (CheckSignatureEncoding(vch, SCRIPT_VERIFY_STRICTENC, nullptr)) {\n-                        const unsigned char chSigHashType = vch.back();\n-                        const auto it = mapSigHashTypes.find(chSigHashType);\n-                        if (it != mapSigHashTypes.end()) {\n-                            strSigHashDecode = \"[\" + it->second + \"]\";\n-                            vch.pop_back(); // remove the sighash type byte. it will be replaced by the decode.\n-                        }\n-                    }\n-                    str += HexStr(vch) + strSigHashDecode;\n+            if (CheckMinimalPush(vch, opcode)) {\n+                if (vch.size() <= 5 ) {\n+                    // Return decimal for minimially-encoded values <= 5 bytes (OP_CLTV / OP_CSV accept 5-byte numbers)\n+                    CScriptNum n(vch, false, 5);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1395881820",
      "id" : 1395881820,
      "in_reply_to_id" : 1394993981,
      "line" : 137,
      "node_id" : "PRRC_kwDOABII585TM3dc",
      "original_commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "original_line" : 137,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 67,
      "pull_request_review_id" : 1734691122,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395881820/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-16T15:18:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1395881820",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1396624902"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1396624902"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah. This just means changing the final `catch` to `return BracketStr(HexStr(vch));`, no?",
      "commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "created_at" : "2023-11-17T02:40:46Z",
      "diff_hunk" : "@@ -109,33 +115,46 @@ std::string ScriptToAsmStr(const CScript& script, const bool fAttemptSighashDeco\n             str += \"[error]\";\n             return str;\n         }\n+        // Covers OP_FALSE\n+        if (opcode == OP_0) {\n+            str += \"0\";\n+            continue;\n+        }\n+        if (opcode == OP_1NEGATE) {\n+            str += \"-1\";\n+            continue;\n+        }\n+        // OP_n -> n (so 1, ..., 10, ..., 16), covers OP_TRUE\n+        if ((opcode >= OP_1 && opcode <= OP_16)) {\n+            // These are always minimal, use the corresponding value\n+            str += strprintf(\"%i\", opcode - OP_1NEGATE - 1);\n+            continue;\n+        }\n         if (0 <= opcode && opcode <= OP_PUSHDATA4) {\n-            if (vch.size() <= static_cast<std::vector<unsigned char>::size_type>(4)) {\n-                str += strprintf(\"%d\", CScriptNum(vch, false).getint());\n-            } else {\n-                // the IsUnspendable check makes sure not to try to decode OP_RETURN data that may match the format of a signature\n-                if (fAttemptSighashDecode && !script.IsUnspendable()) {\n-                    std::string strSigHashDecode;\n-                    // goal: only attempt to decode a defined sighash type from data that looks like a signature within a scriptSig.\n-                    // this won't decode correctly formatted public keys in Pubkey or Multisig scripts due to\n-                    // the restrictions on the pubkey formats (see IsCompressedOrUncompressedPubKey) being incongruous with the\n-                    // checks in CheckSignatureEncoding.\n-                    if (CheckSignatureEncoding(vch, SCRIPT_VERIFY_STRICTENC, nullptr)) {\n-                        const unsigned char chSigHashType = vch.back();\n-                        const auto it = mapSigHashTypes.find(chSigHashType);\n-                        if (it != mapSigHashTypes.end()) {\n-                            strSigHashDecode = \"[\" + it->second + \"]\";\n-                            vch.pop_back(); // remove the sighash type byte. it will be replaced by the decode.\n-                        }\n-                    }\n-                    str += HexStr(vch) + strSigHashDecode;\n+            if (CheckMinimalPush(vch, opcode)) {\n+                if (vch.size() <= 5 ) {\n+                    // Return decimal for minimially-encoded values <= 5 bytes (OP_CLTV / OP_CSV accept 5-byte numbers)\n+                    CScriptNum n(vch, false, 5);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1396624902",
      "id" : 1396624902,
      "in_reply_to_id" : 1394993981,
      "line" : 137,
      "node_id" : "PRRC_kwDOABII585TPs4G",
      "original_commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "original_line" : 137,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 67,
      "pull_request_review_id" : 1735926839,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1396624902/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-17T02:40:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1396624902",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1396625356"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1396625356"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Also,\r\n\r\n```c++\r\nif (!(vch.size() <= 5) ) {\r\n```\r\n\r\nCan I introduce you to `>` ? :smile:",
      "commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "created_at" : "2023-11-17T02:41:45Z",
      "diff_hunk" : "@@ -109,33 +115,46 @@ std::string ScriptToAsmStr(const CScript& script, const bool fAttemptSighashDeco\n             str += \"[error]\";\n             return str;\n         }\n+        // Covers OP_FALSE\n+        if (opcode == OP_0) {\n+            str += \"0\";\n+            continue;\n+        }\n+        if (opcode == OP_1NEGATE) {\n+            str += \"-1\";\n+            continue;\n+        }\n+        // OP_n -> n (so 1, ..., 10, ..., 16), covers OP_TRUE\n+        if ((opcode >= OP_1 && opcode <= OP_16)) {\n+            // These are always minimal, use the corresponding value\n+            str += strprintf(\"%i\", opcode - OP_1NEGATE - 1);\n+            continue;\n+        }\n         if (0 <= opcode && opcode <= OP_PUSHDATA4) {\n-            if (vch.size() <= static_cast<std::vector<unsigned char>::size_type>(4)) {\n-                str += strprintf(\"%d\", CScriptNum(vch, false).getint());\n-            } else {\n-                // the IsUnspendable check makes sure not to try to decode OP_RETURN data that may match the format of a signature\n-                if (fAttemptSighashDecode && !script.IsUnspendable()) {\n-                    std::string strSigHashDecode;\n-                    // goal: only attempt to decode a defined sighash type from data that looks like a signature within a scriptSig.\n-                    // this won't decode correctly formatted public keys in Pubkey or Multisig scripts due to\n-                    // the restrictions on the pubkey formats (see IsCompressedOrUncompressedPubKey) being incongruous with the\n-                    // checks in CheckSignatureEncoding.\n-                    if (CheckSignatureEncoding(vch, SCRIPT_VERIFY_STRICTENC, nullptr)) {\n-                        const unsigned char chSigHashType = vch.back();\n-                        const auto it = mapSigHashTypes.find(chSigHashType);\n-                        if (it != mapSigHashTypes.end()) {\n-                            strSigHashDecode = \"[\" + it->second + \"]\";\n-                            vch.pop_back(); // remove the sighash type byte. it will be replaced by the decode.\n-                        }\n-                    }\n-                    str += HexStr(vch) + strSigHashDecode;\n+            if (CheckMinimalPush(vch, opcode)) {\n+                if (vch.size() <= 5 ) {\n+                    // Return decimal for minimially-encoded values <= 5 bytes (OP_CLTV / OP_CSV accept 5-byte numbers)\n+                    CScriptNum n(vch, false, 5);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#discussion_r1396625356",
      "id" : 1396625356,
      "in_reply_to_id" : 1394993981,
      "line" : 137,
      "node_id" : "PRRC_kwDOABII585TPs_M",
      "original_commit_id" : "89547bb05ff5ebe5332297761cb6585ffbf21815",
      "original_line" : 137,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : 67,
      "pull_request_review_id" : 1735927423,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28824",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1396625356/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-17T02:41:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1396625356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Brainstormy idea for undecodable scripts.\r\n\r\nThese are necessarily pushes (direct or OP_PUSHDATA[124]) whose prescribed length exceeds the end of the script. What about using `<...+N>` or `OPCODE<...+N>`, where `...` is hexadecimal as before, and `N` is a decimal number indicating how many bytes are missing?\r\n\r\nEDIT: for `OP_PUSHDATA[124]` it's also possible that the 1-4 byte length field itself straddles the script end, and that isn't covered by this suggestion.",
      "created_at" : "2023-11-17T13:35:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1816445363",
      "id" : 1816445363,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sRMGz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1816445363/reactions"
      },
      "updated_at" : "2023-11-17T13:48:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1816445363",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Brainstormy idea for undecodable scripts.\r\n\r\nCurrently failure to fully parse in `GetScriptOp` will only return `false` if we run out of bytes to read either the length, or from the operand, and we don't store the `opcode` or the available remaining bytes from the iterator in `opcodeRet` or `pvchRet`. But we could change `GetScriptOpt` to store them the failure case too.\r\n\r\n> `<...+N>` or `OPCODE<...+N>`\r\n\r\nI don't think it makes much difference which flavour is chosen here; both would require the `N` to be parsed to calculate the total length and therefore determine the opcode that was used before it was encoded. As there are bytes missing, I don't think we can tell if this was a minimal push or not either. I'd probably slightly lean towards using `OPCODE<...+N>` as it's slightly more human-friendly?",
      "created_at" : "2023-11-17T14:06:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1816491609",
      "id" : 1816491609,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sRXZZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1816491609/reactions"
      },
      "updated_at" : "2023-11-17T14:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1816491609",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I'd probably slightly lean towards using`OPCODE<...+N>`as it's slightly more human-friendly?\r\n\r\nIn case it's a direct push there is no opcode at all. I didn't mean this as a flavor to choose from; we need both.\r\n",
      "created_at" : "2023-11-17T14:08:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1816496295",
      "id" : 1816496295,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585sRYin",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1816496295/reactions"
      },
      "updated_at" : "2023-11-18T02:21:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1816496295",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Brainstormy idea for undecodable scripts.\r\n> \r\n> These are necessarily pushes (direct or OP_PUSHDATA[124]) whose prescribed length exceeds the end of the script. What about using `<...+N>` or `OPCODE<...+N>`, where `...` is hexadecimal as before, and `N` is a decimal number indicating how many bytes are missing?\r\n> \r\n> EDIT: for `OP_PUSHDATA[124]` it's also possible that the 1-4 byte length field itself straddles the script end, and that isn't covered by this suggestion.\r\n\r\nIf you're adding extra encoding that need to be parsed (`+N`), maybe just have `UNPARSABLE<hex>` or `GARBAGE<hex>` to capture the trailing data that wasn't a full push? Seems less likely to be confusing (easy to miss a +30 at the end of a hex string), and works even if we change an OP_SUCCESS into a multibyte opcode in future?",
      "created_at" : "2023-11-22T01:03:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1821929092",
      "id" : 1821929092,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585smG6E",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1821929092/reactions"
      },
      "updated_at" : "2023-11-22T01:03:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1821929092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yeah, my only (rather minor) reservation about `UNPARSEABLE<...>` is that I think of `<...>` as a way of indicating \"stuff being pushed\", which wouldn't be the case here. And if we're going to introduce some special syntax for unparseable stuff anyway, I thought it might be useful to integrate *into* the push syntax itself (as everything unparseable is an incomplete push).\n\nThat said, I agree that the +N thing isn't super readabable, and it's incomplete anyway (can't deal with OP_PUSHDATA[124] whose length descriptor itself is missing).\n\nSo maybe just `UNPARSEABLE(...)`?",
      "created_at" : "2023-11-22T01:08:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1821933197",
      "id" : 1821933197,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585smH6N",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1821933197/reactions"
      },
      "updated_at" : "2023-11-22T01:08:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1821933197",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Yeah, my only (rather minor) reservation about `UNPARSEABLE<...>` is that I think of `<...>` as a way of indicating \"stuff being pushed\",\r\n\r\nYeah, I guess being able to scan and say `<...>` means data is going onto the stack makes sense.\r\n\r\n> So maybe just `UNPARSEABLE(...)`?\r\n\r\nCould do `UNPARSEABLE:04010203` or something (colon instead of brackets). \r\n\r\n(Arguably, everything after the first OP_SUCCESS in a tapscript could also be considered trailing hex that shouldn't be decoded. Probably more useful to decode it anyway, though)",
      "created_at" : "2023-11-22T03:58:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28824#issuecomment-1822050550",
      "id" : 1822050550,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28824",
      "node_id" : "IC_kwDOABII585smkj2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1822050550/reactions"
      },
      "updated_at" : "2023-11-22T03:58:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1822050550",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   }
]
