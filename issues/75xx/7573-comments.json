[
   {
      "body" : "Concept ACK. This is the \"one\" way of \"Never go to sea with two chronometers; take one or three.\".\r\n\r\nYes, please change the default...\r\n\r\nNo need to call `AddTimeData()` at all if we trust system clock. Or you can collect time samples and warn user when his system clock is wrong \"a lot\"...\r\n",
      "created_at" : "2016-02-21T16:01:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-186850364",
      "id" : 186850364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-21T16:01:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186850364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Concept ACK. But the default value should be set to false.",
      "created_at" : "2016-02-21T16:46:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-186855971",
      "id" : 186855971,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-21T16:46:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186855971",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/145747?v=3",
         "events_url" : "https://api.github.com/users/wangchun/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wangchun/followers",
         "following_url" : "https://api.github.com/users/wangchun/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wangchun/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wangchun",
         "id" : 145747,
         "login" : "wangchun",
         "organizations_url" : "https://api.github.com/users/wangchun/orgs",
         "received_events_url" : "https://api.github.com/users/wangchun/received_events",
         "repos_url" : "https://api.github.com/users/wangchun/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wangchun/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wangchun/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wangchun"
      }
   },
   {
      "body" : "Concept NAK; especially with the default value.\r\n\r\nAs is, there is almost never any active monitoring it's quite common for systems even with network time configured to have totally incorrect time because the network time has simply silently stopped working. At RWC some persons from the google chrome team presented data collected from chrome users that showed very high rates of time inaccuracy on hosts (and also showed that a significant fraction of all SSL certificate errors are from clients with the wrong date).\r\n\r\nIIRC Gnutella has the ability to query the local NTP daemon to determine if it believes that its in sync. It might be more reasonable to have an option to \"use local time if and only if the local time server believes that it is in sync\". \r\n\r\nOf course all this ignores that the normal configuration of NTP is completely insecure, easily spoofed, will believe completely implausible information (e.g. that time is a decade before the release of the software), no effort made against sybil resistance, and there are already known incidents of malicious ntp servers in the public NTP pools... but as a default off option, perhaps that is less of a concern.\r\n",
      "created_at" : "2016-02-21T21:16:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-186919568",
      "id" : 186919568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-21T21:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186919568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@paveljanik @wangchun OK, I changed the default to false. I pretty much expected that to be the first thing mentioned, thanks for confirming :) I only left it that way to keep merging easier for anyone that was already using it downstream.\r\n\r\n@gmaxwell Thanks for your perspective. That point about clocks causing cert validation errors is interesting. I would not have guessed that. With the default changed to false now, does that make this more acceptable to you? The latest commit basically leaves people in the same boat as they are now, but it gives knowledgeable users that choose to override the ability to use only their local clock.",
      "created_at" : "2016-02-21T22:17:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-186930643",
      "id" : 186930643,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-21T22:17:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186930643",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "@mruddy Can you lease add warning to the user when his clock is too different to the network time?",
      "created_at" : "2016-02-23T19:21:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-187851188",
      "id" : 187851188,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-23T19:21:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/187851188",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "@paveljanik The existing warning will still trigger for that scenario. Please see here https://github.com/mruddy/bitcoin/blob/a1a4d8a5de73e018485ec8fe67d3918b625ed0d0/src/timedata.cpp#L110.\r\nThis is because the P2P version message still calls AddTimeData. I didn't change any of that. This change leaves all that old time computation stuff, but ignores the offset that is calculated from it if the new command line switch is set. This is a super simple commit.",
      "created_at" : "2016-02-23T22:30:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-187944129",
      "id" : 187944129,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-23T22:30:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/187944129",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "@mruddy Have you looked into making it conditional on the local NTP thinking its in sync?",
      "created_at" : "2016-02-23T22:35:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-187945301",
      "id" : 187945301,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-23T22:35:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/187945301",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell No, but not because I ignored the input.\r\n\r\nThe first reason is that I don't trust _myself_ to not mess it up and add some kind of vector where a malformed response would allow node takeover etc... The extra attack surface makes me apprehensive.\r\n\r\nSecond, when I think of how this would be used, the first use-case that comes to mind is of a node operator that notices some other node(s) trying to jack up its perspective on time and (s)he wants to stop that. I envision that admin to be actively monitoring that his/her system time is within reason. The second use case is that of an operator that simply wants to trust the local clock as a standard operating procedure. Again, I envision that user as having made a conscious effort to commit to maintaining the node time through normal process and procedure.\r\n\r\nLastly, in  the case where NTP has been spoofed/tampered, or is just not reliable (silent failure etc...), as you mentioned before, then the extra complexity does not seem to help by my way of thinking.",
      "created_at" : "2016-02-23T22:58:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-187953596",
      "id" : 187953596,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-23T22:58:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/187953596",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "Indeed, detection would not help when someone is exploiting NTP's normal lack of security to change the system time; I didn't intend to suggest otherwise. Sorry.\r\n\r\nI don't agree with your attack surface concern, after all-- it's all local-- portability may turn out to be more of an issue.  But code to harden up this option to throw an error or refuse to operate when set to trust the local clock but the local clock is detectably undisciplined could be done as a separate PR.\r\n\r\nAm I incorrect in my recollection that the getargument stuff is slow? Do we want that inside GetAdjustedTime?",
      "created_at" : "2016-02-23T23:44:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-187970082",
      "id" : 187970082,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-23T23:44:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/187970082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Yep, you're absolutely right that portability might be the devil in the details for the NTP checking. Even being all local, it's still conditional logic that could be triggered under a remote attacker's influence. So, at that point it depends on your threat model whether an attacker being able to influence that exchange is in scope. If that's in scope, then possibly a concern that doesn't depend on a buffer overflow etc... would be where that could be used as a trigger for a previously installed trojan that listens where the NTP listener would have been and then does something bad. That's getting a little far fetched, but it's what came to mind.\r\n\r\nI'll have to double check on the performance question and get back to you. I know when I first worked on this about six months ago or so, I did wonder that. We went with it, but I forget if that was just because it was the typical pattern and the code was simple, or if it just did not matter performance-wise.\r\n\r\noff topic: Speaking of performance, I went to prune a current datadir today that had txindex on. Of course that caused me to have to reindex. I ran 0.12 to do that and was done soooo much faster thanks to sipa and your excellent work on libsecp256k1. Thank-you!",
      "created_at" : "2016-02-24T00:43:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-187990233",
      "id" : 187990233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-24T00:43:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/187990233",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "No problem with adding this, although I don't think it will be used a lot in practice. It should definitely not be enabled by default.\r\n\r\nBut I understand the use case where you have an expensive trusted time source, and you don't want bitcoind messing with it, even if it means well.\r\n\r\n> Am I incorrect in my recollection that the getargument stuff is slow? Do we want that inside GetAdjustedTime?\r\n\r\nYes - the preferred way to do this would be to set a global flag in AppInit2, then use that in the time function. Calling the argument parser every time someone asks for the time is not very elegant, at least.\r\n\r\nOr possibly even better: have the option disable the time-offset logic, set the time offset to 0? That'd remove even need to change the `GetAdjustedTime()` function itself.\r\n\r\nNits:\r\n- Add a `DEFAULT_TRUST_SYSTEM_TIME` constant as is done for other options instead of hardcode the default in the help message and GetBoolArg line.",
      "created_at" : "2016-02-24T07:48:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-188129423",
      "id" : 188129423,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-24T10:40:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/188129423",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Idea. This can even be extended. If I trust my time source, I can ban nodes with a huge time difference from my exact time to prevent network partition attacks on me (bad nodes trying to attack me on my node startup with a huge time difference bringing me off the main network). Not that I have seen such attack myself yet, but...\r\n",
      "created_at" : "2016-02-24T08:24:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-188136726",
      "id" : 188136726,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-24T08:24:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/188136726",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7573#discussion_r53943456"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7573"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/53943456"
         }
      },
      "body" : "Please factor out the default from the translation string. (see @laanwj's comment.)",
      "commit_id" : "1079b2c907a1c1d03a7426f1081e63c1bcadadf1",
      "created_at" : "2016-02-24T14:17:33Z",
      "diff_hunk" : "@@ -349,6 +349,7 @@ std::string HelpMessage(HelpMessageMode mode)\n #ifndef WIN32\n     strUsage += HelpMessageOpt(\"-sysperms\", _(\"Create new files with system default permissions, instead of umask 077 (only effective with disabled wallet functionality)\"));\n #endif\n+    strUsage += HelpMessageOpt(\"-trustsystemclock\", _(\"Trust, and depend solely on, the local system clock. Do not use peer time offset adjustments. (default: 0)\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#discussion_r53943456",
      "id" : 53943456,
      "original_commit_id" : "a1a4d8a5de73e018485ec8fe67d3918b625ed0d0",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7573",
      "updated_at" : "2016-02-25T18:50:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/53943456",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Thanks, I just pushed the updates mentioned by your feedback.\r\n\r\n@laanwj I chose not to disable the time-offset logic entirely because I've gotten feedback about people liking to get the warning message \"Please check that your computer's date and time are correct!\" if none of the peers are within 5 minutes just in-case.\r\n\r\n@paveljanik I also did not add any logic to ban nodes with largely differing times because I did not want to add side-effects that could increase P2P network partitioning. Right now, if the median offset is more than 70 minutes, the offset is set to zero and a warning is logged if none of the nodes are within five minutes. So, there is some protection against an attack that attempts to change your node's perspective on time a lot. If your node disagrees substantially with every other node, then you get a warning. But you'll continue to exchange transactions and blocks etc... If banning them turns out to be desirable, then a separate PR might be the way to go.",
      "created_at" : "2016-02-25T15:35:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-188844279",
      "id" : 188844279,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-25T15:35:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/188844279",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "Please squash into one commit for easier review.",
      "created_at" : "2016-02-25T15:42:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-188846822",
      "id" : 188846822,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-25T15:42:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/188846822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Sure thing, done.",
      "created_at" : "2016-02-25T18:52:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-188927090",
      "id" : 188927090,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-25T18:52:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/188927090",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "utACK 1079b2c\r\nThis code change is nicely self-contained and localized. Let's not make any changes to the P2P code in this pull, also any proposal regarding automatic banning (for any reason) has to be very carefully evaluated for advantages and dangers, for the reasons already mentioned  - partitioning risk.\r\n",
      "created_at" : "2016-02-29T08:57:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-190108767",
      "id" : 190108767,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-02-29T08:57:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/190108767",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@gmaxwell I am not convinced that the behaviour of not correcting at all is less harmful than correcting your clock based on what random peers tell you when chosen by someone who has confidence in their own clock configuration.",
      "created_at" : "2016-03-05T05:46:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-192584061",
      "id" : 192584061,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-03-05T05:46:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192584061",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Perhaps don't think of it as someone \"having confidence in their own clock configuration\", but rather \"wanting to have a consistent or specific perspective on time\". For example, maybe a company has nodes in more than one geo location and wants to have a closely consistent perspective on time across all of its nodes. Or, maybe that company wants to have a cluster of nodes running on internally controlled time and a cluster running on network adaptive time. Perhaps there are attacker nodes that feed 69 minute time skews to peers based on user agent and those affected user agents don't want to have their ability to follow consensus affected. From a decentralized validation point of view, I don't see why it would be _necessarily_ bad for a node to take a firm position, or have confidence in its own configuration, on what time it thought it was.",
      "created_at" : "2016-03-05T11:52:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-192626502",
      "id" : 192626502,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-03-05T11:52:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192626502",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "I've thought it over a bit and I still think GetTimeOffset should return 0 when `-trustsystemclock` is given. This will make the RPCs (getinfo, getnetworkinfo) give the correct effective time offset.",
      "created_at" : "2016-03-11T07:24:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-195230898",
      "id" : 195230898,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-03-11T07:24:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/195230898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Sure, that makes sense too. Update made and rebased/squashed.",
      "created_at" : "2016-03-13T23:12:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7573#issuecomment-196079796",
      "id" : 196079796,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7573",
      "updated_at" : "2016-03-13T23:12:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/196079796",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   }
]
