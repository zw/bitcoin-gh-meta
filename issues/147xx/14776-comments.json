[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235272587"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235272587"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You could do\r\n```C++\r\nbool mitigatespectre_default = !gArgs.GetBoolArg(\"-disablewallet\", false) && DEFAULT_MITIGATE_SPECTE;\r\nSpectreMitigation(gArgs.GetBoolArg(\"-mitigatespectre\", mitigatespectre_default));\r\n```\r\n",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T07:09:44Z",
      "diff_hunk" : "@@ -888,6 +889,20 @@ bool AppInitBasicSetup()\n     if (setProcDEPPol != nullptr) setProcDEPPol(PROCESS_DEP_ENABLE);\n #endif\n \n+    if (gArgs.GetBoolArg(\"-disablewallet\", false)) {\n+        if (gArgs.GetBoolArg(\"-mitigatespectre\", false)) {\n+            SpectreMitigation(true);\n+        } else {\n+            SpectreMitigation(false);\n+        }\n+    } else {\n+        if (gArgs.GetBoolArg(\"-mitigatespectre\", DEFAULT_MITIGATE_SPECTRE)) {\n+            SpectreMitigation(true);\n+        } else {\n+            SpectreMitigation(false);\n+        }\n+    }\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235272587",
      "id" : 235272587,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI3MjU4Nw==",
      "original_commit_id" : "aa21a4ecfc7e577a0ad3d28f572f5eef9b62dde0",
      "original_position" : 25,
      "path" : "src/init.cpp",
      "position" : 20,
      "pull_request_review_id" : 177099473,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235272587",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235275199"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235275199"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This doesn't seem safe. What if a kernel has number 52 with a different meaning?",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T07:23:07Z",
      "diff_hunk" : "@@ -67,6 +67,31 @@\n \n #ifdef HAVE_SYS_PRCTL_H\n #include <sys/prctl.h>\n+// Set spectre prctl defines so that we can build on older kernels",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235275199",
      "id" : 235275199,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI3NTE5OQ==",
      "original_commit_id" : "aa21a4ecfc7e577a0ad3d28f572f5eef9b62dde0",
      "original_position" : 4,
      "path" : "src/util/system.cpp",
      "position" : 4,
      "pull_request_review_id" : 177102103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235275199",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235275374"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235275374"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "yeah, that's def much cleaner",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T07:24:00Z",
      "diff_hunk" : "@@ -888,6 +889,20 @@ bool AppInitBasicSetup()\n     if (setProcDEPPol != nullptr) setProcDEPPol(PROCESS_DEP_ENABLE);\n #endif\n \n+    if (gArgs.GetBoolArg(\"-disablewallet\", false)) {\n+        if (gArgs.GetBoolArg(\"-mitigatespectre\", false)) {\n+            SpectreMitigation(true);\n+        } else {\n+            SpectreMitigation(false);\n+        }\n+    } else {\n+        if (gArgs.GetBoolArg(\"-mitigatespectre\", DEFAULT_MITIGATE_SPECTRE)) {\n+            SpectreMitigation(true);\n+        } else {\n+            SpectreMitigation(false);\n+        }\n+    }\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235275374",
      "id" : 235275374,
      "in_reply_to_id" : 235272587,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI3NTM3NA==",
      "original_commit_id" : "aa21a4ecfc7e577a0ad3d28f572f5eef9b62dde0",
      "original_position" : 25,
      "path" : "src/init.cpp",
      "position" : 20,
      "pull_request_review_id" : 177102718,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235275374",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#14169](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14169.html) (add -debuglogsize=<n> option by SuckShit)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-11-21T07:32:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#issuecomment-440565114",
      "id" : 440565114,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MDU2NTExNA==",
      "updated_at" : "2018-11-21T07:32:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/440565114",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235277564"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235277564"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The default-exception language here doesn't match elsewhere.\r\n\r\nMaybe something like:\r\n```C++\r\n    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\r\n#ifdef ENABLE_WALLET\r\n    DEFAULT_MITIGATE_SPECTRE ? \"0 or 1 if -disablewallet set\" : \"0\"\r\n#else\r\n    strprintf(\"%u\", DEFAULT_MITIGATE_SPECTRE)\r\n#endif\r\n    )), true, OptionsCategory::OPTIONS);\r\n```",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T07:35:40Z",
      "diff_hunk" : "@@ -369,6 +369,7 @@ void SetupServerArgs()\n             \"(default: 0 = disable pruning blocks, 1 = allow manual pruning via RPC, >=%u = automatically prune block files to stay under the specified target size in MiB)\", MIN_DISK_SPACE_FOR_BLOCK_FILES / 1024 / 1024), false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-reindex\", \"Rebuild chain state and block index from the blk*.dat files on disk\", false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-reindex-chainstate\", \"Rebuild chain state from the currently indexed blocks. When in pruning mode or if blocks on disk might be corrupted, use full -reindex instead.\", false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u, defaults to disabled if -disablewallet is set)\", DEFAULT_MITIGATE_SPECTRE), true, OptionsCategory::OPTIONS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235277564",
      "id" : 235277564,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI3NzU2NA==",
      "original_commit_id" : "26525e5ad337696f716be0275006aeb6b790f6e2",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 177105478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235277564",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235278207"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235278207"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Alphabetic ordering seems to happen here, so move this entry up to below `-minimumchainwork`",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T07:38:04Z",
      "diff_hunk" : "@@ -369,6 +369,7 @@ void SetupServerArgs()\n             \"(default: 0 = disable pruning blocks, 1 = allow manual pruning via RPC, >=%u = automatically prune block files to stay under the specified target size in MiB)\", MIN_DISK_SPACE_FOR_BLOCK_FILES / 1024 / 1024), false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-reindex\", \"Rebuild chain state and block index from the blk*.dat files on disk\", false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-reindex-chainstate\", \"Rebuild chain state from the currently indexed blocks. When in pruning mode or if blocks on disk might be corrupted, use full -reindex instead.\", false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u, defaults to disabled if -disablewallet is set)\", DEFAULT_MITIGATE_SPECTRE), true, OptionsCategory::OPTIONS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235278207",
      "id" : 235278207,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI3ODIwNw==",
      "original_commit_id" : "26525e5ad337696f716be0275006aeb6b790f6e2",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 177106043,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235278207",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235281472"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235281472"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "AFAIK the linux kernel API is supposed to be stable for these types of calls so that should not change.",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T07:52:25Z",
      "diff_hunk" : "@@ -67,6 +67,31 @@\n \n #ifdef HAVE_SYS_PRCTL_H\n #include <sys/prctl.h>\n+// Set spectre prctl defines so that we can build on older kernels",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235281472",
      "id" : 235281472,
      "in_reply_to_id" : 235275199,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI4MTQ3Mg==",
      "original_commit_id" : "aa21a4ecfc7e577a0ad3d28f572f5eef9b62dde0",
      "original_position" : 4,
      "path" : "src/util/system.cpp",
      "position" : 4,
      "pull_request_review_id" : 177109549,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235281472",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235283402"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235283402"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This will turn into `00` if `!DEFAULT_MITIGATE_SPECTE`, I think? Probably want end to go `: \"\"`.",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:00:35Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235283402",
      "id" : 235283402,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI4MzQwMg==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 6,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 177111667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235283402",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235283644"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235283644"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Am I misreading this code completely? This looks like it will print out `DEFAULT_MITIGATE_SPECTRE` twice.",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:01:36Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"\n+#else\n+    strprintf(\"%u\", DEFAULT_MITIGATE_SPECTRE)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235283644",
      "id" : 235283644,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI4MzY0NA==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 8,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 177111966,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235283644",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235284006"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235284006"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "debug help shows with wallet enabled:  \r\n```\r\n  -mitigatespectre\r\n       Attempt to enable per process spectre mitigations (default: 1 or 0 if\r\n       -disablewallet set)\r\n```",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:03:30Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235284006",
      "id" : 235284006,
      "in_reply_to_id" : 235283402,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI4NDAwNg==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 6,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 177112438,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235284006",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235284566"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235284566"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If you set `DEFAULT_MITIGATE_SPECTRE` to `false` it will say `00` I think.",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:06:06Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235284566",
      "id" : 235284566,
      "in_reply_to_id" : 235283402,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI4NDU2Ng==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 6,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 177113127,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235284566",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235285092"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235285092"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`DEFAULT_MITIGATE_SPECTRE` is somewhat redundant in `DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"` since `DEFAULT_MITIGATE_SPECTRE` is controlled by `ENABLE_WALLET`, doesn't look like it would be printed twice.",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:08:27Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"\n+#else\n+    strprintf(\"%u\", DEFAULT_MITIGATE_SPECTRE)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235285092",
      "id" : 235285092,
      "in_reply_to_id" : 235283644,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI4NTA5Mg==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 8,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 177113778,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235285092",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235285513"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235285513"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "yeah, it only works because `DEFAULT_MITIGATE_SPECTRE` is controlled by `ENABLE_WALLET`",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:10:06Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235285513",
      "id" : 235285513,
      "in_reply_to_id" : 235283402,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI4NTUxMw==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 6,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 177114257,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235285513",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235292633"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235292633"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think it should rely on that.\r\n\r\nAnd it does give the following output for `-disable-wallet` (at configure level) so it's broken regardless:\r\n```\r\n  -mitigatespectre\r\n       Attempt to enable per process spectre mitigations (default: 00)\r\n```\r\n\r\nPerhaps \r\n```C++\r\n    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %s)\", (\r\n#ifdef ENABLE_WALLET\r\n    DEFAULT_MITIGATE_SPECTRE ? \"1 or 0 if -disablewallet set\" : \"0\"\r\n#else\r\n    std::to_string(DEFAULT_MITIGATE_SPECTRE)\r\n#endif\r\n```\r\n",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:36:42Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235292633",
      "id" : 235292633,
      "in_reply_to_id" : 235283402,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI5MjYzMw==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 6,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 177122942,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235292633",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235293907"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235293907"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The first `0` comes from `%u` in the initial format line and `DEFAULT_MITIGATE_SPECTRE`. The second `0` comes from\r\n```C++\r\n    strprintf(\"%u\", DEFAULT_MITIGATE_SPECTRE);\r\n```\r\nin the else case on line 365.",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:39:45Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"\n+#else\n+    strprintf(\"%u\", DEFAULT_MITIGATE_SPECTRE)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235293907",
      "id" : 235293907,
      "in_reply_to_id" : 235283644,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI5MzkwNw==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 8,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 177124381,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235293907",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235294926"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235294926"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ah, removed that line now",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:42:47Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"\n+#else\n+    strprintf(\"%u\", DEFAULT_MITIGATE_SPECTRE)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235294926",
      "id" : 235294926,
      "in_reply_to_id" : 235283644,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI5NDkyNg==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 8,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 177125561,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235294926",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235295371"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235295371"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Please add a common prefix to these log messages to be able to quickly grep for it. E.g. `SpectreMitigation:` using `%s:` and `__func__`. It also makes it seem less to come out of the blue for users.",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:44:14Z",
      "diff_hunk" : "@@ -1186,6 +1211,44 @@ void RenameThread(const char* name)\n #endif\n }\n \n+void SpectreMitigation(bool enable)\n+{\n+#if defined(HAVE_SYS_PRCTL_H)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235295371",
      "id" : 235295371,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI5NTM3MQ==",
      "original_commit_id" : "8813aaf3687b1284ea5ddd70dfd5d884bf8cbba0",
      "original_position" : 38,
      "path" : "src/util/system.cpp",
      "position" : 38,
      "pull_request_review_id" : 177125719,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235295371",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235295665"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235295665"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Please don't add `#ifdef ENABLE_WALLET` in the utility code! We've only recently painstakingly removed `#ifdef ENABLE_WALLET` stuff from the `server` library, for example.\r\n\r\nAlso I think it probably should be switched based on the run-time `-disablewallet` flag as well?\r\n\r\nOr maybe: always enable it, don't make it depend on the wallet at all? What would be the drawback to that?\r\n",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:45:29Z",
      "diff_hunk" : "@@ -40,6 +40,11 @@ int64_t GetStartupTime();\n \n extern const char * const BITCOIN_CONF_FILENAME;\n extern const char * const BITCOIN_PID_FILENAME;\n+#ifdef ENABLE_WALLET",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235295665",
      "id" : 235295665,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI5NTY2NQ==",
      "original_commit_id" : "8813aaf3687b1284ea5ddd70dfd5d884bf8cbba0",
      "original_position" : 4,
      "path" : "src/util/system.h",
      "position" : 4,
      "pull_request_review_id" : 177125719,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235295665",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235296392"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235296392"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Might want to add that this works around a CPU vulnerability, for users that don't know what `spectre` is.",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:47:59Z",
      "diff_hunk" : "@@ -358,6 +358,11 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235296392",
      "id" : 235296392,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI5NjM5Mg==",
      "original_commit_id" : "8813aaf3687b1284ea5ddd70dfd5d884bf8cbba0",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : 4,
      "pull_request_review_id" : 177125719,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235296392",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\r\n\r\nI'm not sure this should be switched on `ENABLE_WALLET`. Knowing nothing else I'd say we should enable this always when possible (and not disabled using the flag).\r\n",
      "created_at" : "2018-11-21T08:52:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#issuecomment-440584840",
      "id" : 440584840,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MDU4NDg0MA==",
      "updated_at" : "2018-11-21T08:59:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/440584840",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235298091"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235298091"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should make it clear that this is for *linux only*.\r\nAre there other operating systems with PRCTL?",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:53:36Z",
      "diff_hunk" : "@@ -67,6 +67,31 @@\n \n #ifdef HAVE_SYS_PRCTL_H\n #include <sys/prctl.h>\n+// Set spectre prctl defines so that we can build on older kernels",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235298091",
      "id" : 235298091,
      "in_reply_to_id" : 235275199,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI5ODA5MQ==",
      "original_commit_id" : "aa21a4ecfc7e577a0ad3d28f572f5eef9b62dde0",
      "original_position" : 4,
      "path" : "src/util/system.cpp",
      "position" : 4,
      "pull_request_review_id" : 177129410,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235298091",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235299243"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235299243"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@laanwj Performance slowdown. For a node not running a wallet having mitigation for spectre seems rather pointless, but I could be wrong on that.",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:57:01Z",
      "diff_hunk" : "@@ -40,6 +40,11 @@ int64_t GetStartupTime();\n \n extern const char * const BITCOIN_CONF_FILENAME;\n extern const char * const BITCOIN_PID_FILENAME;\n+#ifdef ENABLE_WALLET",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235299243",
      "id" : 235299243,
      "in_reply_to_id" : 235295665,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI5OTI0Mw==",
      "original_commit_id" : "8813aaf3687b1284ea5ddd70dfd5d884bf8cbba0",
      "original_position" : 4,
      "path" : "src/util/system.h",
      "position" : 4,
      "pull_request_review_id" : 177130789,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235299243",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235300149"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235300149"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think some emulate the interface.",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T08:59:50Z",
      "diff_hunk" : "@@ -67,6 +67,31 @@\n \n #ifdef HAVE_SYS_PRCTL_H\n #include <sys/prctl.h>\n+// Set spectre prctl defines so that we can build on older kernels",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235300149",
      "id" : 235300149,
      "in_reply_to_id" : 235275199,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTMwMDE0OQ==",
      "original_commit_id" : "aa21a4ecfc7e577a0ad3d28f572f5eef9b62dde0",
      "original_position" : 4,
      "path" : "src/util/system.cpp",
      "position" : 4,
      "pull_request_review_id" : 177131847,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235300149",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235301604"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235301604"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should I move that to somewhere else?",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T09:04:20Z",
      "diff_hunk" : "@@ -40,6 +40,11 @@ int64_t GetStartupTime();\n \n extern const char * const BITCOIN_CONF_FILENAME;\n extern const char * const BITCOIN_PID_FILENAME;\n+#ifdef ENABLE_WALLET",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235301604",
      "id" : 235301604,
      "in_reply_to_id" : 235295665,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTMwMTYwNA==",
      "original_commit_id" : "8813aaf3687b1284ea5ddd70dfd5d884bf8cbba0",
      "original_position" : 4,
      "path" : "src/util/system.h",
      "position" : 4,
      "pull_request_review_id" : 177133567,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T09:04:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235301604",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235322856"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235322856"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What *is* the performance slowdown in practice?\r\nI think this needs benchmarking, if it's neglible over say, a full sync, I don't think it makes sense to do this kind of switching at all.",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T10:05:48Z",
      "diff_hunk" : "@@ -40,6 +40,11 @@ int64_t GetStartupTime();\n \n extern const char * const BITCOIN_CONF_FILENAME;\n extern const char * const BITCOIN_PID_FILENAME;\n+#ifdef ENABLE_WALLET",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235322856",
      "id" : 235322856,
      "in_reply_to_id" : 235295665,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTMyMjg1Ng==",
      "original_commit_id" : "8813aaf3687b1284ea5ddd70dfd5d884bf8cbba0",
      "original_position" : 4,
      "path" : "src/util/system.h",
      "position" : 4,
      "pull_request_review_id" : 177159565,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T10:05:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235322856",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Taking a step back from the \"should we switch this based on wallet\" or \"should we take the (unknown) performance hit for the whole process\". I think it's important here to define what the threat scenario is that this is protecting against. This also needs to be documented to the user.\r\n\r\nAs I understand it, Spectre mitigation is especially meant for browsers and such and other software that runs untrusted code in a sandbox. Code running in a sandbox could use spectre to learn things and gain access that it's not supposed to have.\r\n\r\nI don't think this is the case for `bitcoind` at allyes, very pedantically the consensus scripts could be seen as that, but I would be extremely surprised if there's *any* chance of that with the lack of loops and such. So, then, what is left?",
      "created_at" : "2018-11-21T10:09:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#issuecomment-440607879",
      "id" : 440607879,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MDYwNzg3OQ==",
      "updated_at" : "2018-11-21T10:13:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/440607879",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235344495"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235344495"
         }
      },
      "author_association" : "MEMBER",
      "body" : "IRIX has its own prctl(), and there's no guarantee someone won't fork Linux incompatibly either - it's open source, after all.\r\n\r\nAnyone building from source should have recent enough headers to match their actual kernel anyway. Let's just make sure the gitian builds have it working, and rely on the system for source builds...?",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T11:08:43Z",
      "diff_hunk" : "@@ -67,6 +67,31 @@\n \n #ifdef HAVE_SYS_PRCTL_H\n #include <sys/prctl.h>\n+// Set spectre prctl defines so that we can build on older kernels",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235344495",
      "id" : 235344495,
      "in_reply_to_id" : 235275199,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTM0NDQ5NQ==",
      "original_commit_id" : "aa21a4ecfc7e577a0ad3d28f572f5eef9b62dde0",
      "original_position" : 4,
      "path" : "src/util/system.cpp",
      "position" : 4,
      "pull_request_review_id" : 177186070,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T11:08:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235344495",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235344930"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235344930"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Perhaps this should be a ParameterInteraction thing using SoftSetArg in the wallet logic?",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T11:10:19Z",
      "diff_hunk" : "@@ -40,6 +40,11 @@ int64_t GetStartupTime();\n \n extern const char * const BITCOIN_CONF_FILENAME;\n extern const char * const BITCOIN_PID_FILENAME;\n+#ifdef ENABLE_WALLET",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235344930",
      "id" : 235344930,
      "in_reply_to_id" : 235295665,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTM0NDkzMA==",
      "original_commit_id" : "8813aaf3687b1284ea5ddd70dfd5d884bf8cbba0",
      "original_position" : 4,
      "path" : "src/util/system.h",
      "position" : 4,
      "pull_request_review_id" : 177186619,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T11:10:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235344930",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235345585"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235345585"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Hmm, I wonder if it should be future-proofed by making it applicable to any other vulns we could mitigate later.",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T11:12:14Z",
      "diff_hunk" : "@@ -358,6 +358,11 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235345585",
      "id" : 235345585,
      "in_reply_to_id" : 235296392,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTM0NTU4NQ==",
      "original_commit_id" : "8813aaf3687b1284ea5ddd70dfd5d884bf8cbba0",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : 4,
      "pull_request_review_id" : 177187325,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T11:12:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235345585",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Spectre can allow unrelated processes to get at private data of other processes. Whether these specific mitigations help with that scenario or not, however, I am unsure.",
      "created_at" : "2018-11-21T11:16:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#issuecomment-440627881",
      "id" : 440627881,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MDYyNzg4MQ==",
      "updated_at" : "2018-11-21T11:16:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/440627881",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235445311"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235445311"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Irix is an abandoned platform, I think the only other non-linux OS's that have prctl are BSD's but they seem to be just for compatibility with linux so their prctl numbers should always match. Regardless as long as those values are present in the kernel header the ones I hard coded should not get used. I didn't want to have it build this feature based on the presence of the defines in prctl.h since that would complicate the testing and logic since some of the options may not be present. For example I think `PR_SPEC_FORCE_DISABLE` was added after `PR_SPEC_DISABLE`.\r\n\r\nIf linux were to change the prctl number for these it would break on binary builds regardless, but that sounds quite unlikely with the current linux userspace API stability policy.",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T15:58:54Z",
      "diff_hunk" : "@@ -67,6 +67,31 @@\n \n #ifdef HAVE_SYS_PRCTL_H\n #include <sys/prctl.h>\n+// Set spectre prctl defines so that we can build on older kernels",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235445311",
      "id" : 235445311,
      "in_reply_to_id" : 235275199,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTQ0NTMxMQ==",
      "original_commit_id" : "aa21a4ecfc7e577a0ad3d28f572f5eef9b62dde0",
      "original_position" : 4,
      "path" : "src/util/system.cpp",
      "position" : 4,
      "pull_request_review_id" : 177312437,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T15:58:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235445311",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235548724"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235548724"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think there will soon be multiple spectre related prctl controls such as [this](https://lkml.org/lkml/2018/11/21/179).",
      "commit_id" : "e2779a07e0b1efefc27fa4d33e2c62eacf8847a1",
      "created_at" : "2018-11-21T21:52:28Z",
      "diff_hunk" : "@@ -358,6 +358,11 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235548724",
      "id" : 235548724,
      "in_reply_to_id" : 235296392,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTU0ODcyNA==",
      "original_commit_id" : "8813aaf3687b1284ea5ddd70dfd5d884bf8cbba0",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : 4,
      "pull_request_review_id" : 177441215,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T21:52:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235548724",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "We shouldn't take this by default without characterizing the performance implications, esp if we're not precisely sure about what it's protecting against.  If the performance impact is negligible then perhaps we can ignore the minutia of what it's protecting.\r\n\r\nLack of comprehensive mlock (e.g. rpc/QT result in decryption keys laying around in memory) probably and the lack of process isolation for secret keys are probably much more serious limitations to our current behaviour than anything spectre... but also can't just be improved with a ctl.   OTOH, fixing them doesn't have a risk of causing a large sync performance loss that push people onto far less secure software.",
      "created_at" : "2018-11-21T23:29:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#issuecomment-440849477",
      "id" : 440849477,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MDg0OTQ3Nw==",
      "updated_at" : "2018-11-21T23:29:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/440849477",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Spectre can allow unrelated processes to get at private data of other processes. Whether these specific mitigations help with that scenario or not, however, I am unsure.\r\n\r\nI think we need to be sure about that, as far as possible.\r\n\r\nI have a fairly good grasp of how vulnerabilities and exploitation work in general, but this Spectre stuff is abracadabra to me. I can't imagine how a PoC exploit for this would look.\r\n\r\nIf we're unsure if and how this will help, just flipping some process flags seems security theater, or a charm to keep the evil hacker spirits away.",
      "created_at" : "2018-11-22T09:42:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#issuecomment-440971031",
      "id" : 440971031,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MDk3MTAzMQ==",
      "updated_at" : "2018-11-22T09:44:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/440971031",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It's probably easier to tell if it has a meaningfully negative performance impact... understanding could be replaced with emailing the author(s) of the kernel functionality and asking if they think it would be useful for us.",
      "created_at" : "2018-11-24T23:51:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#issuecomment-441404368",
      "id" : 441404368,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MTQwNDM2OA==",
      "updated_at" : "2018-11-24T23:51:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/441404368",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   }
]
