[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r886860219"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886860219"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    const auto count{request.params[2].isNull() ? 1 : request.params[2].getInt<int>()};\r\n```\r\n\r\ncan be written in a single line",
      "commit_id" : "35ae928611c59d44683455d2695edf753cddd275",
      "created_at" : "2022-06-01T14:14:16Z",
      "diff_hunk" : "@@ -539,10 +553,16 @@ static RPCHelpMan getblockheader()\n     if (!request.params[1].isNull())\n         fVerbose = request.params[1].get_bool();\n \n+    int count = 1;\n+    if (!request.params[2].isNull())\n+        count = request.params[2].get_int();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r886860219",
      "id" : 886860219,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58403Gm7",
      "original_commit_id" : "ac3083bc32354d0488d90c5d7e7a41864cb26525",
      "original_line" : 558,
      "original_position" : 41,
      "original_start_line" : 556,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 992049984,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886860219/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-06-01T14:16:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886860219",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r886863148"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886863148"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Header count is invalid or out of acceptable range (1-2000): \" + ::ToString(count));\r\n```",
      "commit_id" : "35ae928611c59d44683455d2695edf753cddd275",
      "created_at" : "2022-06-01T14:16:45Z",
      "diff_hunk" : "@@ -539,10 +553,16 @@ static RPCHelpMan getblockheader()\n     if (!request.params[1].isNull())\n         fVerbose = request.params[1].get_bool();\n \n+    int count = 1;\n+    if (!request.params[2].isNull())\n+        count = request.params[2].get_int();\n+    if ((count <= 0) || (count > 2000))\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Header count is invalid or out of acceptable range (1-2000): \" + std::to_string(count));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r886863148",
      "id" : 886863148,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58403HUs",
      "original_commit_id" : "ac3083bc32354d0488d90c5d7e7a41864cb26525",
      "original_line" : 560,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 992049984,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886863148/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-01T14:16:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886863148",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Please squash your commits according to https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits",
      "created_at" : "2022-06-01T15:57:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1143791921",
      "id" : 1143791921,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585ELOEx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1143791921/reactions"
      },
      "updated_at" : "2022-06-01T15:57:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1143791921",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it makes sense to do count = 0 as a single entity, and >= 1 as an array, or otherwise make an additional as_array bool param to control the output type.\r\n\r\nOtherwise the \"type instability\" is difficult to deal with for downstream consumers of the API. E.g., consider the code for https://docs.rs/bitcoincore-rpc/latest/src/bitcoincore_rpc/client.rs.html#337-341 .",
      "created_at" : "2022-06-01T18:02:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1143965971",
      "id" : 1143965971,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585EL4kT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1143965971/reactions"
      },
      "updated_at" : "2022-06-01T18:02:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1143965971",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> I think it makes sense to do count = 0 as a single entity, and >= 1 as an array, or otherwise make an additional as_array bool param to control the output type.\r\n> \r\n> Otherwise the \"type instability\" is difficult to deal with for downstream consumers of the API. E.g., consider the code for https://docs.rs/bitcoincore-rpc/latest/src/bitcoincore_rpc/client.rs.html#337-341 .\r\n\r\nThanks for the reply. Note that there is no regression impact because all preexisting functionality is intact. Ultimately, it is an optional parameter which can be ignored.\r\n\r\nTo me, `count = 0` is a bit counterintuitive. And as mentioned above, the REST call also interprets `count = 0` as invalid, assuming we are aiming to emulate an improved version of the REST functionality in RPC.\r\n\r\nFrom the old PR, it would appear that we are tending away from the unformatted (concatenated) output in new implementation. If this is indeed the case, then such an additional parameter does not make seem useful.\r\n\r\n@MarcoFalke Do you have any input on this? And are any further updates to the PR needed at this point? All CI checks have passed. Thanks.",
      "created_at" : "2022-06-01T18:54:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1144015767",
      "id" : 1144015767,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585EMEuX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1144015767/reactions"
      },
      "updated_at" : "2022-06-01T18:54:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1144015767",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/63422690?v=4",
         "events_url" : "https://api.github.com/users/natanleung/events{/privacy}",
         "followers_url" : "https://api.github.com/users/natanleung/followers",
         "following_url" : "https://api.github.com/users/natanleung/following{/other_user}",
         "gists_url" : "https://api.github.com/users/natanleung/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/natanleung",
         "id" : 63422690,
         "login" : "natanleung",
         "node_id" : "MDQ6VXNlcjYzNDIyNjkw",
         "organizations_url" : "https://api.github.com/users/natanleung/orgs",
         "received_events_url" : "https://api.github.com/users/natanleung/received_events",
         "repos_url" : "https://api.github.com/users/natanleung/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/natanleung/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/natanleung/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/natanleung"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What about:\r\n\r\n* null -> \"flat\" reply\r\n* int -> array reply",
      "created_at" : "2022-06-01T18:57:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1144018294",
      "id" : 1144018294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585EMFV2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1144018294/reactions"
      },
      "updated_at" : "2022-06-01T18:57:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1144018294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> What about:\r\n> \r\n> * null -> \"flat\" reply\r\n> * int -> array reply\r\n\r\n@JeremyRubin's suggestion has been implemented. I think I misunderstood the difference between `count = 0` and `count = 1` in terms of the \"type instability\". It makes sense to me now.\r\n\r\nAs you've denoted, this is now resolved such that:\r\n`count = 0` -> \"flat\" reply\r\n`count > 0` -> array reply\r\n\r\nLet me know if any other changes are still needed. Thanks.",
      "created_at" : "2022-06-01T19:39:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1144057167",
      "id" : 1144057167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585EMO1P",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1144057167/reactions"
      },
      "updated_at" : "2022-06-01T19:39:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1144057167",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/63422690?v=4",
         "events_url" : "https://api.github.com/users/natanleung/events{/privacy}",
         "followers_url" : "https://api.github.com/users/natanleung/followers",
         "following_url" : "https://api.github.com/users/natanleung/following{/other_user}",
         "gists_url" : "https://api.github.com/users/natanleung/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/natanleung",
         "id" : 63422690,
         "login" : "natanleung",
         "node_id" : "MDQ6VXNlcjYzNDIyNjkw",
         "organizations_url" : "https://api.github.com/users/natanleung/orgs",
         "received_events_url" : "https://api.github.com/users/natanleung/received_events",
         "repos_url" : "https://api.github.com/users/natanleung/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/natanleung/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/natanleung/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/natanleung"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah that makes sense. Null = flat works too. Idea isn't to concatenate anything, but rather to provide support for legacy behavior and something that matches the REST API. Since 0 is invalid in rest, all valid queries in JSON will match all valid rest queries, and legacy count=0 queries will return flat.\r\n\r\nIf we were to do a breaking API change, i'd say *always* return array :)",
      "created_at" : "2022-06-01T20:34:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1144107917",
      "id" : 1144107917,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585EMbON",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1144107917/reactions"
      },
      "updated_at" : "2022-06-01T20:34:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1144107917",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@MarcoFalke I believe that we have finalized the design. I have also updated the description. Let me know if there is anything else that is needed for this PR. Thanks.",
      "created_at" : "2022-06-03T04:45:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1145579888",
      "id" : 1145579888,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585ESClw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1145579888/reactions"
      },
      "updated_at" : "2022-06-03T04:45:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1145579888",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/63422690?v=4",
         "events_url" : "https://api.github.com/users/natanleung/events{/privacy}",
         "followers_url" : "https://api.github.com/users/natanleung/followers",
         "following_url" : "https://api.github.com/users/natanleung/following{/other_user}",
         "gists_url" : "https://api.github.com/users/natanleung/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/natanleung",
         "id" : 63422690,
         "login" : "natanleung",
         "node_id" : "MDQ6VXNlcjYzNDIyNjkw",
         "organizations_url" : "https://api.github.com/users/natanleung/orgs",
         "received_events_url" : "https://api.github.com/users/natanleung/received_events",
         "repos_url" : "https://api.github.com/users/natanleung/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/natanleung/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/natanleung/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/natanleung"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r900652557"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900652557"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think it's a good idea to duplicate the logic for each \"mode\".\r\n\r\nBetter to build a 1-item array, and return only `headers[0]` as a special case.",
      "commit_id" : "a2a73a23603b3600cbfb5e97ac56fa7f404ff157",
      "created_at" : "2022-06-18T01:41:11Z",
      "diff_hunk" : "@@ -552,15 +570,40 @@ static RPCHelpMan getblockheader()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\n     }\n \n-    if (!fVerbose)\n+    if (count == 0)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r900652557",
      "id" : 900652557,
      "line" : 573,
      "node_id" : "PRRC_kwDOABII5841rt4N",
      "original_commit_id" : "a2a73a23603b3600cbfb5e97ac56fa7f404ff157",
      "original_line" : 573,
      "original_position" : 56,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 56,
      "pull_request_review_id" : 1011238315,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900652557/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-18T01:42:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900652557",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r900652953"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900652953"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Prefer restricting special case to `count=null`",
      "commit_id" : "a2a73a23603b3600cbfb5e97ac56fa7f404ff157",
      "created_at" : "2022-06-18T01:41:47Z",
      "diff_hunk" : "@@ -503,9 +503,10 @@ static RPCHelpMan getblockheader()\n                 {\n                     {\"blockhash\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The block hash\"},\n                     {\"verbose\", RPCArg::Type::BOOL, RPCArg::Default{true}, \"true for a json object, false for the hex-encoded data\"},\n+                    {\"count\", RPCArg::Type::NUM, RPCArg::Default{0}, \"Number of headers to get (maximum: 2000)\"},\n                 },\n                 {\n-                    RPCResult{\"for verbose = true\",\n+                    RPCResult{\"for verbose = true, count = 0\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r900652953",
      "id" : 900652953,
      "line" : 509,
      "node_id" : "PRRC_kwDOABII5841rt-Z",
      "original_commit_id" : "a2a73a23603b3600cbfb5e97ac56fa7f404ff157",
      "original_line" : 509,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 8,
      "pull_request_review_id" : 1011238315,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900652953/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-18T01:42:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/900652953",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1317494792), [stickies-v](https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1318755581) |\n| Concept ACK | [LarryRuane](https://github.com/bitcoin/bitcoin/pull/25261#pullrequestreview-1182645687) |\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "created_at" : "2022-06-21T01:35:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1161059940",
      "id" : 1161059940,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585FNF5k",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1161059940/reactions"
      },
      "updated_at" : "2022-11-20T21:31:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1161059940",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "cc @jonatack @luke-jr @LarryRuane ",
      "created_at" : "2022-10-12T19:26:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1276640096",
      "id" : 1276640096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585MF_tg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276640096/reactions"
      },
      "updated_at" : "2022-10-12T19:26:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276640096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "We will be reviewing this PR this Wednesday https://bitcoincore.reviews/25261\r\n@natanleung please join us if you can! (But certainly no pressure or obligation!)",
      "created_at" : "2022-11-14T13:23:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1313696722",
      "id" : 1313696722,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585OTWvS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1313696722/reactions"
      },
      "updated_at" : "2022-11-14T13:23:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1313696722",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024042075"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024042075"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    do {\r\n```",
      "commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "created_at" : "2022-11-16T14:04:28Z",
      "diff_hunk" : "@@ -552,15 +570,23 @@ static RPCHelpMan getblockheader()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\n     }\n \n-    if (!fVerbose)\n+    UniValue headers{UniValue::VARR};\n+    do\n     {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024042075",
      "id" : 1024042075,
      "line" : 587,
      "node_id" : "PRRC_kwDOABII5849CaRb",
      "original_commit_id" : "053ccf0468e477283e80f78cc095ffb83bff9b95",
      "original_line" : 575,
      "original_position" : 58,
      "original_start_line" : 574,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 58,
      "pull_request_review_id" : 1182645687,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024042075/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 586,
      "start_side" : "RIGHT",
      "updated_at" : "2022-11-16T14:38:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024042075",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024042662"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024042662"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        if (!fVerbose) {\r\n```",
      "commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "created_at" : "2022-11-16T14:04:53Z",
      "diff_hunk" : "@@ -552,15 +570,23 @@ static RPCHelpMan getblockheader()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\n     }\n \n-    if (!fVerbose)\n+    UniValue headers{UniValue::VARR};\n+    do\n     {\n-        CDataStream ssBlock(SER_NETWORK, PROTOCOL_VERSION);\n-        ssBlock << pblockindex->GetBlockHeader();\n-        std::string strHex = HexStr(ssBlock);\n-        return strHex;\n+        if (!fVerbose)\n+        {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024042662",
      "id" : 1024042662,
      "line" : 589,
      "node_id" : "PRRC_kwDOABII5849Caam",
      "original_commit_id" : "053ccf0468e477283e80f78cc095ffb83bff9b95",
      "original_line" : 577,
      "original_position" : 64,
      "original_start_line" : 576,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 64,
      "pull_request_review_id" : 1182645687,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024042662/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 588,
      "start_side" : "RIGHT",
      "updated_at" : "2022-11-16T14:38:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024042662",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024045985"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024045985"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    } while ((headers.size() < static_cast<size_t>(count) && (pblockindex != nullptr));\r\n```",
      "commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "created_at" : "2022-11-16T14:07:00Z",
      "diff_hunk" : "@@ -552,15 +570,23 @@ static RPCHelpMan getblockheader()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\n     }\n \n-    if (!fVerbose)\n+    UniValue headers{UniValue::VARR};\n+    do\n     {\n-        CDataStream ssBlock(SER_NETWORK, PROTOCOL_VERSION);\n-        ssBlock << pblockindex->GetBlockHeader();\n-        std::string strHex = HexStr(ssBlock);\n-        return strHex;\n+        if (!fVerbose)\n+        {\n+            CDataStream ssBlock(SER_NETWORK, PROTOCOL_VERSION);\n+            ssBlock << pblockindex->GetBlockHeader();\n+            headers.push_back(HexStr(ssBlock));\n+        }\n+        else\n+            headers.push_back(blockheaderToJSON(tip, pblockindex));\n+\n+        pblockindex = chainman.ActiveChain().Next(pblockindex);\n     }\n+    while ((headers.size() < (long unsigned int)count) && (pblockindex != nullptr));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024045985",
      "id" : 1024045985,
      "line" : 599,
      "node_id" : "PRRC_kwDOABII5849CbOh",
      "original_commit_id" : "053ccf0468e477283e80f78cc095ffb83bff9b95",
      "original_line" : 587,
      "original_position" : 74,
      "original_start_line" : 586,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 74,
      "pull_request_review_id" : 1182645687,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024045985/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 598,
      "start_side" : "RIGHT",
      "updated_at" : "2022-11-16T14:38:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024045985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024052019"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024052019"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        } else {\r\n            headers.push_back(blockheaderToJSON(tip, pblockindex));\r\n        }\r\n```",
      "commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "created_at" : "2022-11-16T14:11:30Z",
      "diff_hunk" : "@@ -552,15 +570,23 @@ static RPCHelpMan getblockheader()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\n     }\n \n-    if (!fVerbose)\n+    UniValue headers{UniValue::VARR};\n+    do\n     {\n-        CDataStream ssBlock(SER_NETWORK, PROTOCOL_VERSION);\n-        ssBlock << pblockindex->GetBlockHeader();\n-        std::string strHex = HexStr(ssBlock);\n-        return strHex;\n+        if (!fVerbose)\n+        {\n+            CDataStream ssBlock(SER_NETWORK, PROTOCOL_VERSION);\n+            ssBlock << pblockindex->GetBlockHeader();\n+            headers.push_back(HexStr(ssBlock));\n+        }\n+        else\n+            headers.push_back(blockheaderToJSON(tip, pblockindex));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024052019",
      "id" : 1024052019,
      "line" : 595,
      "node_id" : "PRRC_kwDOABII5849Ccsz",
      "original_commit_id" : "053ccf0468e477283e80f78cc095ffb83bff9b95",
      "original_line" : 583,
      "original_position" : 70,
      "original_start_line" : 581,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 70,
      "pull_request_review_id" : 1182645687,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024052019/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 593,
      "start_side" : "RIGHT",
      "updated_at" : "2022-11-16T14:38:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024052019",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024073612"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024073612"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm pretty sure calling `Next()` requires the thread to hold `cs_main`. But I don't think you want to grab and release the lock on each iteration of this loop; it's probably better to take the lock close to where you currently do, and hold it throughout this loop.\r\n\r\nBut it's not ideal to hold `cs_main` during the conversions to JSON or (for non-verbose) encodings to hex. So you may want to consider creating a vector of `CBlockindex` pointers, have each iteration of this loop `push_back()` to this vector,  drop `cs_main`, then run a  separate loop to format the results. (This is okay because once you have a `CBlockIndex` pointer, both the pointer and the object it points to remain valid without having to hold `cs_main`.)",
      "commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "created_at" : "2022-11-16T14:27:57Z",
      "diff_hunk" : "@@ -552,15 +570,23 @@ static RPCHelpMan getblockheader()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\n     }\n \n-    if (!fVerbose)\n+    UniValue headers{UniValue::VARR};\n+    do\n     {\n-        CDataStream ssBlock(SER_NETWORK, PROTOCOL_VERSION);\n-        ssBlock << pblockindex->GetBlockHeader();\n-        std::string strHex = HexStr(ssBlock);\n-        return strHex;\n+        if (!fVerbose)\n+        {\n+            CDataStream ssBlock(SER_NETWORK, PROTOCOL_VERSION);\n+            ssBlock << pblockindex->GetBlockHeader();\n+            headers.push_back(HexStr(ssBlock));\n+        }\n+        else\n+            headers.push_back(blockheaderToJSON(tip, pblockindex));\n+\n+        pblockindex = chainman.ActiveChain().Next(pblockindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024073612",
      "id" : 1024073612,
      "line" : 597,
      "node_id" : "PRRC_kwDOABII5849Ch-M",
      "original_commit_id" : "053ccf0468e477283e80f78cc095ffb83bff9b95",
      "original_line" : 585,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 72,
      "pull_request_review_id" : 1182645687,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024073612/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-16T14:38:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024073612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024215945"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024215945"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It appears to be what caused CI to fail with `-Wthread-safety-analysis` enabled.",
      "commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "created_at" : "2022-11-16T16:14:24Z",
      "diff_hunk" : "@@ -552,15 +570,23 @@ static RPCHelpMan getblockheader()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\n     }\n \n-    if (!fVerbose)\n+    UniValue headers{UniValue::VARR};\n+    do\n     {\n-        CDataStream ssBlock(SER_NETWORK, PROTOCOL_VERSION);\n-        ssBlock << pblockindex->GetBlockHeader();\n-        std::string strHex = HexStr(ssBlock);\n-        return strHex;\n+        if (!fVerbose)\n+        {\n+            CDataStream ssBlock(SER_NETWORK, PROTOCOL_VERSION);\n+            ssBlock << pblockindex->GetBlockHeader();\n+            headers.push_back(HexStr(ssBlock));\n+        }\n+        else\n+            headers.push_back(blockheaderToJSON(tip, pblockindex));\n+\n+        pblockindex = chainman.ActiveChain().Next(pblockindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024215945",
      "id" : 1024215945,
      "in_reply_to_id" : 1024073612,
      "line" : 597,
      "node_id" : "PRRC_kwDOABII5849DEuJ",
      "original_commit_id" : "053ccf0468e477283e80f78cc095ffb83bff9b95",
      "original_line" : 585,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 72,
      "pull_request_review_id" : 1182901016,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024215945/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-16T16:14:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024215945",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@natanleung please remove the second commit, \"Merge branch 'bitcoin:master' into rpc_getblockheader_count\"\r\n\r\nPRs should not include such merge commits. Actually, it looks like this is a rebase, not a merge commit (the merge commit is empty). But you should not rebase onto latest master unless there is a conflict, see [rebasing changes](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes). @DrahtBot will usually let you know (although there can be hidden conflicts that DrahtBot doesn't detect).",
      "created_at" : "2022-11-16T16:40:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1317319170",
      "id" : 1317319170,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585OhLIC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1317319170/reactions"
      },
      "updated_at" : "2022-11-16T16:40:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1317319170",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "You don't want to merge master into this commit with a merge commit. Rather you want to rebase your commit _on top_ of master. You could do that with something like (double check this first!):\r\n\r\n```bash\r\n# reset to your first commit\r\ngit reset --hard 053ccf0468e477283e80f78cc095ffb83bff9b95\r\n# rebase onto master if you have remote configured as \"upstream\"\r\ngit fetch --all && git rebase upstream/master\r\n```\r\n\r\nedit: @LarryRuane beat me to it :)",
      "created_at" : "2022-11-16T16:40:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1317319393",
      "id" : 1317319393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585OhLLh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1317319393/reactions"
      },
      "updated_at" : "2022-11-16T16:41:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1317319393",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024252349"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024252349"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could put 2000 in a variable and re-use it in all 3 locations for clarity and to prevent it from going out of sync",
      "commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "created_at" : "2022-11-16T16:44:17Z",
      "diff_hunk" : "@@ -515,9 +515,10 @@ static RPCHelpMan getblockheader()\n                 {\n                     {\"blockhash\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The block hash\"},\n                     {\"verbose\", RPCArg::Type::BOOL, RPCArg::Default{true}, \"true for a json object, false for the hex-encoded data\"},\n+                    {\"count\", RPCArg::Type::AMOUNT, RPCArg::Default{\"null\"}, \"Number of headers to get (maximum: 2000)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024252349",
      "id" : 1024252349,
      "line" : 518,
      "node_id" : "PRRC_kwDOABII5849DNm9",
      "original_commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "original_line" : 518,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 4,
      "pull_request_review_id" : 1182955611,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 3,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 3,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024252349/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-16T17:02:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024252349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024269381"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024269381"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think currently passing `count=0` means we return a single (non-array) header. That's not how it's documented, and also imo unintuitive and undesired. I think we can be firm in rejecting `count=0`, and only allowing `count=null` for the single non-array header result.\r\n\r\n```suggestion\r\n    if ((count < 1) || (count > 2000))\r\n```",
      "commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "created_at" : "2022-11-16T16:59:11Z",
      "diff_hunk" : "@@ -551,10 +565,14 @@ static RPCHelpMan getblockheader()\n     if (!request.params[1].isNull())\n         fVerbose = request.params[1].get_bool();\n \n+    const auto count{request.params[2].isNull() ? 0 : request.params[2].getInt<int>()};\n+    if ((count < 0) || (count > 2000))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024269381",
      "id" : 1024269381,
      "line" : 569,
      "node_id" : "PRRC_kwDOABII5849DRxF",
      "original_commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "original_line" : 569,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 40,
      "pull_request_review_id" : 1182955611,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024269381/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-16T17:02:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024269381",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024270231"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024270231"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I would store `request.params[2].isNull()` into a `bool return_array` and avoid relying on a magic `count==0` value. That makes the code more readable imo.",
      "commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "created_at" : "2022-11-16T16:59:54Z",
      "diff_hunk" : "@@ -551,10 +565,14 @@ static RPCHelpMan getblockheader()\n     if (!request.params[1].isNull())\n         fVerbose = request.params[1].get_bool();\n \n+    const auto count{request.params[2].isNull() ? 0 : request.params[2].getInt<int>()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024270231",
      "id" : 1024270231,
      "line" : 568,
      "node_id" : "PRRC_kwDOABII5849DR-X",
      "original_commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "original_line" : 568,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 39,
      "pull_request_review_id" : 1182955611,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024270231/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-16T17:02:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024270231",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024285687"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024285687"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it was thought [here](https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1144057167) that returning a single non-array header was best to maintain backwards compatibility",
      "commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "created_at" : "2022-11-16T17:13:59Z",
      "diff_hunk" : "@@ -551,10 +565,14 @@ static RPCHelpMan getblockheader()\n     if (!request.params[1].isNull())\n         fVerbose = request.params[1].get_bool();\n \n+    const auto count{request.params[2].isNull() ? 0 : request.params[2].getInt<int>()};\n+    if ((count < 0) || (count > 2000))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024285687",
      "id" : 1024285687,
      "in_reply_to_id" : 1024269381,
      "line" : 569,
      "node_id" : "PRRC_kwDOABII5849DVv3",
      "original_commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "original_line" : 569,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 40,
      "pull_request_review_id" : 1183003939,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024285687/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-16T17:13:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024285687",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024323103"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024323103"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think this needs to be an AMOUNT, NUM would be preferred I think? We don't want floats or strings here, just integers.\r\n```suggestion\r\n                    {\"count\", RPCArg::Type::NUM, RPCArg::Optional::OMITTED, \"Number of headers to get (maximum: 2000)\"},\r\n```",
      "commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "created_at" : "2022-11-16T17:50:30Z",
      "diff_hunk" : "@@ -515,9 +515,10 @@ static RPCHelpMan getblockheader()\n                 {\n                     {\"blockhash\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The block hash\"},\n                     {\"verbose\", RPCArg::Type::BOOL, RPCArg::Default{true}, \"true for a json object, false for the hex-encoded data\"},\n+                    {\"count\", RPCArg::Type::AMOUNT, RPCArg::Default{\"null\"}, \"Number of headers to get (maximum: 2000)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024323103",
      "id" : 1024323103,
      "line" : 518,
      "node_id" : "PRRC_kwDOABII5849De4f",
      "original_commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "original_line" : 518,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 4,
      "pull_request_review_id" : 1183072491,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024323103/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-16T17:50:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024323103",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024363911"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024363911"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> I think it was thought [here](https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1144057167) that returning a single non-array header was best to maintain backwards compatibility\r\n\r\nYou still can by specifying `count=null` (or taking the default, which is the same).",
      "commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "created_at" : "2022-11-16T18:27:53Z",
      "diff_hunk" : "@@ -551,10 +565,14 @@ static RPCHelpMan getblockheader()\n     if (!request.params[1].isNull())\n         fVerbose = request.params[1].get_bool();\n \n+    const auto count{request.params[2].isNull() ? 0 : request.params[2].getInt<int>()};\n+    if ((count < 0) || (count > 2000))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024363911",
      "id" : 1024363911,
      "in_reply_to_id" : 1024269381,
      "line" : 569,
      "node_id" : "PRRC_kwDOABII5849Do2H",
      "original_commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "original_line" : 569,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 40,
      "pull_request_review_id" : 1183125203,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024363911/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-16T18:27:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024363911",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure why I didn't earlier, but...\r\n\r\nConcept NACK. Why shouldn't this be accomplished through JSON-RPC batching?",
      "created_at" : "2022-11-16T18:35:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1317494792",
      "id" : 1317494792,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585Oh2AI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1317494792/reactions"
      },
      "updated_at" : "2022-11-16T18:35:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1317494792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024374174"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024374174"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, but I'd prefer no limit. We don't have to be compatible with REST to that extent. RPC clients aren't DoS threats. They can DoS the node anyway by running many of these as quickly as possible, and even in parallel.",
      "commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "created_at" : "2022-11-16T18:37:12Z",
      "diff_hunk" : "@@ -515,9 +515,10 @@ static RPCHelpMan getblockheader()\n                 {\n                     {\"blockhash\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The block hash\"},\n                     {\"verbose\", RPCArg::Type::BOOL, RPCArg::Default{true}, \"true for a json object, false for the hex-encoded data\"},\n+                    {\"count\", RPCArg::Type::AMOUNT, RPCArg::Default{\"null\"}, \"Number of headers to get (maximum: 2000)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1024374174",
      "id" : 1024374174,
      "in_reply_to_id" : 1024252349,
      "line" : 518,
      "node_id" : "PRRC_kwDOABII5849DrWe",
      "original_commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "original_line" : 518,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 4,
      "pull_request_review_id" : 1183137389,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024374174/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-16T18:39:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1024374174",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Why shouldn't this be accomplished through JSON-RPC batching?\r\n\r\nMy initial intuitive reasoning was that this approach would be significantly faster than batching because of the overhead of each request as well as requiring the blockhash for each request. After doing some performance testing, that doesn't seem to be true. In which case, I think I'm leaning towards Concept NACK too. \r\n\r\nBest case scenario (on my setup-up): to fetch `n` blockheaders `getblockheader` with count parameter was ~2x as fast as fetching it through a batch request. Even though that is a significant speed-up, I don't think it's significant enough to warrant more code complexity, even if it is quite modest as in this PR. Even though there are some UX benefits on cli to not having to query the blockhashes separately etc, I think this should be solved by tooling and not within Core to keep complexity minimal.\r\n\r\n---\r\n\r\nOn signet, I've timed how long it takes to fetch `n` blockheaders using 3 different approaches:\r\n`loop`: _(not really discussed here, just included FYI/illustrative purposes)_ iteratively send `getblockheader` requests for single blockhash until `n` headers are fetched, using the blockhash from the result to query the next one. Only for n<=500 because it started failing for more requests due to timeouts etc.\r\n`batch`: first send a single batch `getblockhash` request to query all blockhashes we need, then send a single batch `getblockheader` request for all the hashes\r\n`count`: iteratively send `getblockheader` requests with `count=2000` (or less), using the blockhash from the last header in the result to query the next array until `n` headers are fetched\r\n\r\n<details>\r\n<summary>performance benchmarking results</summary>\r\n\r\n```\r\nTime required to fetch n blockheaders:\r\n-----\r\nFor 50 blockheaders:\r\nloop: 0.0480s\r\nbatch: 0.0066s (and 0.0090s to fetch blockhashes)\r\ncount: 0.0038s\r\n-----\r\nFor 500 blockheaders:\r\nloop: 0.4594s\r\nbatch: 0.0170s (and 0.0063s to fetch blockhashes)\r\ncount: 0.0102s\r\n-----\r\nFor 2000 blockheaders:\r\nbatch: 0.0476s (and 0.0105s to fetch blockhashes)\r\ncount: 0.0264s\r\n-----\r\nFor 20000 blockheaders:\r\nbatch: 0.4847s (and 0.0865s to fetch blockhashes)\r\ncount: 0.2556s\r\n-----\r\nFor 100000 blockheaders:\r\nbatch: 2.5618s (and 0.4156s to fetch blockhashes)\r\ncount: 1.2770s\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>performance testing code (`-signet -rpcuser user -rpcpassword pass`)</summary>\r\n\r\n```python\r\nimport json\r\nimport time\r\n\r\nimport requests\r\n\r\n\r\ndef get_n_blockhashes(n: int, start_height: int = 0):\r\n    data = [{\r\n        \"method\": \"getblockhash\",\r\n        \"params\": [height]\r\n    } for height in range(start_height, start_height + n)]\r\n    hashes = [item[\"result\"] for item in make_request(data)]\r\n    return hashes\r\n\r\n\r\ndef get_n_headers_batch(hashes):\r\n    \"\"\"Call getblockheader one time with an array of data items, one for each blockhash\"\"\"\r\n    data = []\r\n    for blockhash in hashes:\r\n        data.append({\"method\": \"getblockheader\", \"params\": [blockhash]})\r\n    headers = [item[\"result\"] for item in make_request(data)]\r\n    return headers\r\n\r\n\r\ndef get_n_headers_loop(n: int):\r\n    \"\"\"Call getblockheader n times to get one blockheader each time\"\"\"\r\n    headers = []\r\n    blockhash = get_n_blockhashes(1)[0]\r\n    while len(headers) < n:\r\n        data = {\"method\": \"getblockheader\", \"params\": [blockhash]}\r\n        header = make_request(data)[\"result\"]\r\n        blockhash = header[\"nextblockhash\"]\r\n        headers.append(header)\r\n\r\n    return headers\r\n\r\n\r\ndef get_n_headers_count(n: int):\r\n    \"\"\"Call getblockheader with the `count` parameter until n headers are fetched\"\"\"\r\n    max_per_request = 2000\r\n    remaining = n\r\n    headers = []\r\n    blockhash = get_n_blockhashes(1)[0]\r\n    while remaining > 0:\r\n        count = min(remaining, max_per_request)\r\n        data = {\r\n            \"method\": \"getblockheader\",\r\n            \"params\": [blockhash, True, count]\r\n        }\r\n        headers += make_request(data)[\"result\"]\r\n        remaining -= count\r\n        blockhash = headers[-1][\"nextblockhash\"]\r\n    return headers\r\n\r\n\r\ndef make_request(data):\r\n    url = \"http://user:pass@127.0.0.1:38332/\"\r\n    r = requests.post(url, data=json.dumps(data))\r\n    assert r.status_code == 200\r\n    return r.json()\r\n\r\n\r\ndef time_function(fn, *args, last_hash_check: str, **kwargs) -> float:\r\n    \"\"\"Return average fn time execution and check that the last obtained blockheader hash matches last_hash_check \"\"\"\r\n    iters = 10\r\n    start = time.perf_counter()\r\n    for i in range(iters):\r\n        result = fn(*args, **kwargs)\r\n        assert result[-1][\"hash\"] == last_hash_check\r\n    avg_duration = (time.perf_counter() - start) / iters\r\n    return avg_duration\r\n\r\n\r\nif __name__ == '__main__':\r\n    for n in [50, 500, 2000, 20000, 100000]:\r\n        print(f\"For {n} blockheaders:\")\r\n\r\n        hash_start = time.perf_counter()\r\n        hashes = get_n_blockhashes(n)\r\n        hash_time = time.perf_counter() - hash_start\r\n\r\n        if n <= 500:\r\n            print(f\"loop: {time_function(get_n_headers_loop, n, last_hash_check=hashes[-1]):.4f}s\")\r\n        print(f\"batch: {time_function(get_n_headers_batch, hashes, last_hash_check=hashes[-1]):.4f}s (and {hash_time:.4f}s to fetch blockhashes)\")\r\n        print(f\"count: {time_function(get_n_headers_count, n, last_hash_check=hashes[-1]):.4f}s\")\r\n        print(\"-----\")\r\n```\r\n</details",
      "created_at" : "2022-11-17T14:53:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1318755581",
      "id" : 1318755581,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585Ompz9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1318755581/reactions"
      },
      "updated_at" : "2022-11-17T14:53:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1318755581",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I tested your code @stickies-v and, despite my timings coming out significantly slower than yours (curious about that...), found the same trends, so would tend to agree that this can be done using batching:\r\n\r\n```\r\n ./benchmark_headers.py\r\nFor 50 blockheaders:\r\nloop: 0.1021s\r\nbatch: 0.0109s (and 0.0049s to fetch blockhashes)\r\ncount: 0.0060s\r\n-----\r\nFor 500 blockheaders:\r\nloop: 1.0044s\r\nbatch: 0.0782s (and 0.0215s to fetch blockhashes)\r\ncount: 0.0254s\r\n-----\r\nFor 2000 blockheaders:\r\nbatch: 0.3283s (and 0.0768s to fetch blockhashes)\r\ncount: 0.1245s\r\n-----\r\nFor 20000 blockheaders:\r\nbatch: 3.0241s (and 0.7651s to fetch blockhashes)\r\ncount: 1.1144s\r\n-----\r\nFor 100000 blockheaders:\r\nbatch: 15.4626s (and 3.8391s to fetch blockhashes)\r\ncount: 5.6350s\r\n-----\r\n\r\nwill@ubuntu in bitcoin on  rpc_getblockheader_count [?] via  v3.6.15 took 4m34s\r\n```\r\n\r\nedit: `debug=1` in config was slowing it down quite a bit",
      "created_at" : "2022-11-17T16:29:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1318893069",
      "id" : 1318893069,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585OnLYN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1318893069/reactions"
      },
      "updated_at" : "2022-11-17T16:37:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1318893069",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1027369264"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1027369264"
         }
      },
      "author_association" : "NONE",
      "body" : "This change has been implemented as follows:\r\n```\r\nbool returnArray = !request.params[2].isNull();\r\n```\r\nThe negation operator `!` is used because if `count != null`, then an array is returned.",
      "commit_id" : "73f513507fa03c9575630587912ebc9618dae943",
      "created_at" : "2022-11-20T22:59:50Z",
      "diff_hunk" : "@@ -551,10 +565,14 @@ static RPCHelpMan getblockheader()\n     if (!request.params[1].isNull())\n         fVerbose = request.params[1].get_bool();\n \n+    const auto count{request.params[2].isNull() ? 0 : request.params[2].getInt<int>()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1027369264",
      "id" : 1027369264,
      "in_reply_to_id" : 1024270231,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5849PGkw",
      "original_commit_id" : "b29c8cc29f56423dad222dc184a70255a6cdd716",
      "original_line" : 568,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 1187336691,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1027369264/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-20T22:59:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1027369264",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/63422690?v=4",
         "events_url" : "https://api.github.com/users/natanleung/events{/privacy}",
         "followers_url" : "https://api.github.com/users/natanleung/followers",
         "following_url" : "https://api.github.com/users/natanleung/following{/other_user}",
         "gists_url" : "https://api.github.com/users/natanleung/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/natanleung",
         "id" : 63422690,
         "login" : "natanleung",
         "node_id" : "MDQ6VXNlcjYzNDIyNjkw",
         "organizations_url" : "https://api.github.com/users/natanleung/orgs",
         "received_events_url" : "https://api.github.com/users/natanleung/received_events",
         "repos_url" : "https://api.github.com/users/natanleung/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/natanleung/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/natanleung/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/natanleung"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1027369663"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1027369663"
         }
      },
      "author_association" : "NONE",
      "body" : "I have implemented @LarryRuane's suggestion to store the `CBlockindex` pointers and then iterate through them. However, the CI failure is still occurring. From what I recall, this wasn't happening before. Any insight into why this is now the case?",
      "commit_id" : "73f513507fa03c9575630587912ebc9618dae943",
      "created_at" : "2022-11-20T23:02:31Z",
      "diff_hunk" : "@@ -552,15 +570,23 @@ static RPCHelpMan getblockheader()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\n     }\n \n-    if (!fVerbose)\n+    UniValue headers{UniValue::VARR};\n+    do\n     {\n-        CDataStream ssBlock(SER_NETWORK, PROTOCOL_VERSION);\n-        ssBlock << pblockindex->GetBlockHeader();\n-        std::string strHex = HexStr(ssBlock);\n-        return strHex;\n+        if (!fVerbose)\n+        {\n+            CDataStream ssBlock(SER_NETWORK, PROTOCOL_VERSION);\n+            ssBlock << pblockindex->GetBlockHeader();\n+            headers.push_back(HexStr(ssBlock));\n+        }\n+        else\n+            headers.push_back(blockheaderToJSON(tip, pblockindex));\n+\n+        pblockindex = chainman.ActiveChain().Next(pblockindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1027369663",
      "id" : 1027369663,
      "in_reply_to_id" : 1024073612,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5849PGq_",
      "original_commit_id" : "053ccf0468e477283e80f78cc095ffb83bff9b95",
      "original_line" : 585,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 1187337141,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1027369663/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-20T23:02:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1027369663",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/63422690?v=4",
         "events_url" : "https://api.github.com/users/natanleung/events{/privacy}",
         "followers_url" : "https://api.github.com/users/natanleung/followers",
         "following_url" : "https://api.github.com/users/natanleung/following{/other_user}",
         "gists_url" : "https://api.github.com/users/natanleung/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/natanleung",
         "id" : 63422690,
         "login" : "natanleung",
         "node_id" : "MDQ6VXNlcjYzNDIyNjkw",
         "organizations_url" : "https://api.github.com/users/natanleung/orgs",
         "received_events_url" : "https://api.github.com/users/natanleung/received_events",
         "repos_url" : "https://api.github.com/users/natanleung/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/natanleung/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/natanleung/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/natanleung"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "According to https://github.com/bitcoin/bitcoin/pull/23330#issuecomment-948728773 from the previous PR, the original author considered RPC batching.\r\n\r\nI took on this PR as an up-for-grabs ticket so I thought this was desired functionality. If the changes look good, can I fix the CI failure, write tests, and close? Thanks.",
      "created_at" : "2022-11-20T23:09:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1321269712",
      "id" : 1321269712,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585OwPnQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1321269712/reactions"
      },
      "updated_at" : "2022-11-20T23:09:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1321269712",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/63422690?v=4",
         "events_url" : "https://api.github.com/users/natanleung/events{/privacy}",
         "followers_url" : "https://api.github.com/users/natanleung/followers",
         "following_url" : "https://api.github.com/users/natanleung/following{/other_user}",
         "gists_url" : "https://api.github.com/users/natanleung/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/natanleung",
         "id" : 63422690,
         "login" : "natanleung",
         "node_id" : "MDQ6VXNlcjYzNDIyNjkw",
         "organizations_url" : "https://api.github.com/users/natanleung/orgs",
         "received_events_url" : "https://api.github.com/users/natanleung/received_events",
         "repos_url" : "https://api.github.com/users/natanleung/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/natanleung/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/natanleung/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/natanleung"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I took on this PR as an up-for-grabs ticket so I thought this was desired functionality.\r\n\r\nFirst of all, really appreciate you working on this and contributing - and I hope you'll continue to regardless of the outcome of this PR! Unfortunately, in the decentralized development model of Core, we don't really have a well-defined concept of \"desired functionality\" - we don't have anyone deciding on features/roadmaps/... It all comes down to emergent consensus among developers. I think in this case, the concern is that even though the PR does seem like an improvement in some areas (e.g. performance, UX) it is also a deterioration in other areas (maintainability, unnecessarily complex method parameters). Some reviewers including myself seem to think that this feature is not desired as we think the cons outweigh the pros. If you look at the original issue #23330, you'll see that there was no clear consensus yet on whether or not batching was a feasible alternative, which could be a hint that desirability is unclear.\r\n\r\nThe comments in #23330 mention lack of atomicity (i.e. reorgs could happen during the batch request), but I'm not sure that's an important concern. It's quite trivial for the client to inspect that the headers are indeed part of the same chain (each header links to the previous header), and since reorgs rarely happen to more than a few blocks this would never be any kind of performance concern. Moreover, the approach in this PR also doesn't have that kind of atomicity (although it could be introduced with more aggressive locking of `cs_main`.)\r\n\r\n",
      "created_at" : "2022-11-21T14:32:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#issuecomment-1322150566",
      "id" : 1322150566,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25261",
      "node_id" : "IC_kwDOABII585Ozmqm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1322150566/reactions"
      },
      "updated_at" : "2022-11-21T14:32:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1322150566",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1028120656"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028120656"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Have you looked at the CI logs? You can view them by clicking \"details\" next to the CI failure message here on GitHub. The error message is quite clear in this case:\r\n\r\n```\r\nrpc/blockchain.cpp:591:32: error: calling function 'ActiveChain' requires holding mutex 'cs_main' exclusively [-Werror,-Wthread-safety-analysis]\r\n        pblockindex = chainman.ActiveChain().Next(pblockindex);\r\n```\r\n\r\nYou can't call `ActiveChain()` without holding the `cs_main` mutex, as is done e.g. a few blocks of code above this line.",
      "commit_id" : "73f513507fa03c9575630587912ebc9618dae943",
      "created_at" : "2022-11-21T14:36:31Z",
      "diff_hunk" : "@@ -552,15 +570,23 @@ static RPCHelpMan getblockheader()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\n     }\n \n-    if (!fVerbose)\n+    UniValue headers{UniValue::VARR};\n+    do\n     {\n-        CDataStream ssBlock(SER_NETWORK, PROTOCOL_VERSION);\n-        ssBlock << pblockindex->GetBlockHeader();\n-        std::string strHex = HexStr(ssBlock);\n-        return strHex;\n+        if (!fVerbose)\n+        {\n+            CDataStream ssBlock(SER_NETWORK, PROTOCOL_VERSION);\n+            ssBlock << pblockindex->GetBlockHeader();\n+            headers.push_back(HexStr(ssBlock));\n+        }\n+        else\n+            headers.push_back(blockheaderToJSON(tip, pblockindex));\n+\n+        pblockindex = chainman.ActiveChain().Next(pblockindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25261#discussion_r1028120656",
      "id" : 1028120656,
      "in_reply_to_id" : 1024073612,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5849R-BQ",
      "original_commit_id" : "053ccf0468e477283e80f78cc095ffb83bff9b95",
      "original_line" : 585,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 1188354549,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028120656/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-11-21T14:36:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028120656",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   }
]
