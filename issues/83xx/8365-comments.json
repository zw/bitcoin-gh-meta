[
   {
      "body" : "This solves a different concern than #8364. Concept ACK, but without the removal of bytespersigop.",
      "created_at" : "2016-07-18T19:55:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233439506",
      "id" : 233439506,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-18T19:55:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233439506",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr It was always my assumption that the bytespersigop default was chosen to be equal to MAX_SIZE / MAX_SIGOPS. The fact that it isn't (20, instead of 50) means that someone can pay only 40% of the price for a full block's worth of space, and fill it up with small-size high-sigops transactions.\r\n\r\nI see no reason why the number would ever be other than 50, so I'm removing the parameter.",
      "created_at" : "2016-07-18T19:57:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233440012",
      "id" : 233440012,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-18T20:02:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233440012",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Concept ACK.",
      "created_at" : "2016-07-18T20:02:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233441526",
      "id" : 233441526,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-18T20:02:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233441526",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8365#discussion_r71226700"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8365"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71226700"
         }
      },
      "body" : "Rather than lose the caching of the cost, how about we just change GetTxSize() to return the max of these two quantities?  This way we have access to the actual cost so we can write smarter code in the future, while I believe GetTxSize() is already used everywhere (but we should confirm) for feerate calculations, included size/feerate of ancestors and descendants, both in the mempool and in the mining code.",
      "commit_id" : "ab942c15bd3854650afa810d7c22d7fd30d346c1",
      "created_at" : "2016-07-18T20:50:39Z",
      "diff_hunk" : "@@ -28,7 +28,7 @@ CTxMemPoolEntry::CTxMemPoolEntry(const CTransaction& _tx, const CAmount& _nFee,\n     hadNoDependencies(poolHasNoInputsOf), inChainInputValue(_inChainInputValue),\n     spendsCoinbase(_spendsCoinbase), sigOpCost(_sigOpsCost), lockPoints(lp)\n {\n-    nTxCost = GetTransactionCost(_tx);\n+    nTxCost = std::max(GetTransactionCost(_tx), (MAX_BLOCK_COST * sigOpCost + MAX_BLOCK_SIGOPS_COST - 1) / MAX_BLOCK_SIGOPS_COST);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#discussion_r71226700",
      "id" : 71226700,
      "original_commit_id" : "5f514d7320dff8a3bfad97510d9d3f08485b1245",
      "original_position" : 5,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8365",
      "updated_at" : "2016-07-19T10:34:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71226700",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Concept ACK, but to be clear I don't think we should merge a policy change like this for 0.13.  As it applies to all transactions, and in particular not just the ones being rejected under the current `-bytespersigop` policy, we should give users more notice on the proposed change.  (In the worst case, some transactions that are relayed under current policy of 20 bytes per sigop could conceivably see their effective feerates cut by up to 60%.  I'm analyzing some historical data to get a sense of how many transactions would be affected by this policy; current estimate: 0.8%, no stats yet on how much of an effect it has overall on those transactions.)\r\n\r\nMoreover I can imagine that downstream software might want to consider updating their notion of feerate to match what we do here (wallets, block explorers, fee estimators, etc), so we should give people time for that.\r\n\r\nOne nit: putting aside any non-linear optimization issues, there's another slightly suboptimal behavior here in how the mining package selection would work.  If a package is too big to fit into the block using the sigops-inflated size, but would fit using its actual size, then we should add it (as we're sorting based on feerate-using-inflated size, it's clearly the best thing for us to add).  However we're getting rid of the caching of ancestor package actual sizes, so we don't have a good way to do this.  I expect that this is a small enough effect that we don't need to worry about it now, but we should document it for the future.",
      "created_at" : "2016-07-18T21:12:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233460584",
      "id" : 233460584,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-18T21:13:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233460584",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "I think it could be temporarily adjusted to only impact transactions currently precluded by the bytes per sigop policy. Would that make it more attractive for a more immediate deployment?\r\n\r\n",
      "created_at" : "2016-07-18T21:51:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233470204",
      "id" : 233470204,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-18T21:51:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233470204",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Reworked the patch.\r\n\r\nIt no longer removes -bytespersigop (as that constitutes a policy change we shouldn't be introducing this late in the release process), and does not kill the cost caching in mining. As a result, the existing tests also remain valuable.\r\n\r\nThis is hopefully less controversial, fewer code changes, and more efficient.",
      "created_at" : "2016-07-18T23:33:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233490221",
      "id" : 233490221,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-18T23:33:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233490221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "The changes do not address my concern. bytespersigop is not about miner fee optimisation.",
      "created_at" : "2016-07-18T23:42:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233491683",
      "id" : 233491683,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-18T23:42:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233491683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr I'm sorry to have misunderstood the original intent of the #7081 then, but that's the only thing it does in my opinion.\r\n\r\nThe code we had before #7081 produces nonsensical blocks when high-sigop low-size transactions are present in the mempool, resulting in lower fees than a miner could claim, and reduced transaction capacity on the network for a low cost to the attacker. Our code was broken, to the extent that both miners and the network would be better off patching their code.\r\n\r\n#7081 outlaws low-size high-sigop transactions, but it does not prevent hard-to-validate transactions or high overall validation cost. Those situations can still be produced by simply stuffing the high-sigops transactions until they are big enough to pass. This PR just treats such high-sigop transactions as if they were that big already. As a minor side effect, it removes the incentive for such an attack to in addition to disrupting capacity also bloat the block chain.",
      "created_at" : "2016-07-18T23:52:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233493089",
      "id" : 233493089,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-18T23:52:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233493089",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "If there are not 20 bytes per (properly counted; ie, with the fix in #8364) sigop, then the transaction is clearly misusing the sigop for spam and/or attack. The goal of bytespersigop is to prevent such transactions from being mined or relayed at all.\r\n\r\nI'm fine with miner optimisation as in this PR, but it's a separate matter.",
      "created_at" : "2016-07-18T23:59:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233494292",
      "id" : 233494292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-20T00:30:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233494292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr I tend to agree there, but that's a policy change that should be addressed by something like #5231 after public discussion.\r\n\r\nThis PR is a bug fix for the unintentional effect of making some formerly standard transactions nonacceptable. That's not something that should happen without discussion. Furthermore, this does not make anything worse: the spam you were trying to prevent in #7081 was never made impossible - just more expensive. This PR does not change that.\r\n\r\n#8364 however makes a related attack **worse**. With that you can have a low-accurate-sigop high-consensus-sigop small-size transaction attack that removes network capacity for an even lower price, as you only need to pay proportional to the accurate sigop count.",
      "created_at" : "2016-07-19T00:04:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233495014",
      "id" : 233495014,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T00:12:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233495014",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "#5231 is a policy change, sure, but I'm not talking about blocking that spam. bytespersigop (as it stands today, and also when fixed by #8364) blocks a different category of spam.",
      "created_at" : "2016-07-19T00:12:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233496040",
      "id" : 233496040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T00:12:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233496040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "#7081 and #8364 do not block any spam. They just force attackers to also bloat the size of the transactions to bypass the check, and pay a higher fee.\r\n\r\nThis PR lets them still pay the higher fee, but removes the need to bloat.",
      "created_at" : "2016-07-19T00:13:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233496206",
      "id" : 233496206,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T00:14:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233496206",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "They don't force attackers to do anything. They block the spam, which may lead attackers to consider bloating the size, waiting for (or running) a miner that doesn't have such a policy, or perhaps just not attacking. Just asking for a higher fee sends the message that it's acceptable behaviour and should be expected to be reliable.",
      "created_at" : "2016-07-19T00:28:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233498369",
      "id" : 233498369,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T00:28:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233498369",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr With #8364 they don't even need to pay a higher fee. Use 1-of-1 multisig, and you get a factor 20 reduction in fee.",
      "created_at" : "2016-07-19T00:30:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233498646",
      "id" : 233498646,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T00:31:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233498646",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa #8364 fixes a bug. Nothing more. Like I said, I'm happy to have this concept merged *in addition* to the (fixed) existing behaviour.",
      "created_at" : "2016-07-19T00:45:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233500779",
      "id" : 233500779,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T00:45:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233500779",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Oh, you mean reject based on accurate sigoos, but charge based on consensus sigops? That sounds fine, but I think the extra filtering compared to just this PR remains easily bypassable, so I don't like the extra complexity.",
      "created_at" : "2016-07-19T00:53:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233501725",
      "id" : 233501725,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T00:53:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233501725",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "> They just force attackers to also bloat the size of the transactions to bypass the check.\r\n\r\nWhile I don't consider them as attacker, counterparty-lib and omnicore both create bare-multisig transactions in some rare cases, and as temorary fix to get around the limit introduced by #7081, transactions are indeed bloated.",
      "created_at" : "2016-07-19T09:17:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233576273",
      "id" : 233576273,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T09:17:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233576273",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5836089?v=3",
         "events_url" : "https://api.github.com/users/dexX7/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dexX7/followers",
         "following_url" : "https://api.github.com/users/dexX7/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dexX7/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dexX7",
         "id" : 5836089,
         "login" : "dexX7",
         "organizations_url" : "https://api.github.com/users/dexX7/orgs",
         "received_events_url" : "https://api.github.com/users/dexX7/received_events",
         "repos_url" : "https://api.github.com/users/dexX7/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dexX7/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dexX7"
      }
   },
   {
      "body" : "Rebased.\r\n\r\nI think we should include this (with or without #8364) to get #8079 fixed in 0.13.",
      "created_at" : "2016-07-19T10:35:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233594016",
      "id" : 233594016,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T10:35:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233594016",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Concept ack new approach, will review and test later today.",
      "created_at" : "2016-07-19T11:00:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233599148",
      "id" : 233599148,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T11:00:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233599148",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8365#discussion_r71364090"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8365"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71364090"
         }
      },
      "body" : "nit: Could you add a comment to these functions, indicating the role of sigops here?",
      "commit_id" : "ab942c15bd3854650afa810d7c22d7fd30d346c1",
      "created_at" : "2016-07-19T15:38:31Z",
      "diff_hunk" : "@@ -66,8 +68,10 @@ bool IsStandardTx(const CTransaction& tx, std::string& reason);\n      */\n bool AreInputsStandard(const CTransaction& tx, const CCoinsViewCache& mapInputs);\n \n+extern unsigned int nBytesPerSigOp;\n+\n /** Compute the virtual transaction size (weight reinterpreted as bytes). */\n-int64_t GetVirtualTransactionSize(int64_t nWeight);\n-int64_t GetVirtualTransactionSize(const CTransaction& tx);\n+int64_t GetVirtualTransactionSize(int64_t nWeight, int64_t nSigOpCost);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#discussion_r71364090",
      "id" : 71364090,
      "original_commit_id" : "ab942c15bd3854650afa810d7c22d7fd30d346c1",
      "original_position" : 18,
      "path" : "src/policy/policy.h",
      "position" : 18,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8365",
      "updated_at" : "2016-07-19T15:38:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71364090",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "One nit, apart from the one I left already: I think it would be nice if in AcceptToMemoryPoolWorker, we had a debugging print to indicate when a transaction was being processed using a higher effective size, as sigops are not something we always have a record of when debugging.\r\n\r\nCode review ACK apart from those two nits, will test.\r\n\r\nOne thing I noticed is that if we were to increase the bytesPerSigOp default value in the future (from 20 to 50 -- I assume we'll propose that for a future release), then I think we should also reduce MAX_STANDARD_TX_SIGOPS_COST (currently 16000), because the IsStandard size checks operate on the transaction's actual weight without regard to sigop adjustments, and with the current value and at 50 bytes per sigop, it'd be possible to effectively exceed the IsStandard weight limit (400000) by crafting a smaller transaction that used the maximum number of sigops.\r\n\r\nThis isn't an issue now, because at `bytesPerSigOp=20`, the effective maximum weight that is achievable by sigops alone is still under 400000.\r\n\r\nIt seems that extremely few transactions are accepted for relay under current policy with sig op cost greater than 8000 (I counted 135 out of 8.7M in a sampling of historical data from February/March, the max sigop cost I encountered was 9644), so I don't think this would be an unreasonable change to propose, just wanted to flag it.",
      "created_at" : "2016-07-19T15:48:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233676294",
      "id" : 233676294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T15:48:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233676294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "#8364 fixes #8079, and should be included in 0.13. The current code here merely removes bytespersigop and replaces it with something entirely different. I don't care if the new miner policy code concept here is added to 0.13 or not, but it's not related to #8079 IMO.",
      "created_at" : "2016-07-19T17:56:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233714059",
      "id" : 233714059,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T17:56:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233714059",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "#8364 technically fixes the problem, but introduces an actually exploitable\nbug for miners and the network (cheap attack that results in low-fee\nnearly-empty blocks). It should not be included on its own.\n\nCombined with this PR that problem disappears, but I don't see the\nadvantage over just this PR (which also fixes the bug, and in addition does\nnot incentivize bloating transactions to bypass the protection).\n",
      "created_at" : "2016-07-19T18:03:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233716170",
      "id" : 233716170,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T18:03:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233716170",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Tested ACK.\r\n\r\nI agree with @sipa -- there is no need for #8364, we should merge this instead.  If users are bloating their transactions to get around a policy limit, we should take that as a sign that the policy limit is poorly designed.\r\n\r\nAfter this is merged, we should document in the release notes the changed policy as well as the changed RPC output (the raw transaction rpc's are returning an unmodified-by-sigops vsize, while the mempool RPC's are outputting the modified-by-sigops vsize).",
      "created_at" : "2016-07-19T18:25:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233722419",
      "id" : 233722419,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T18:25:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233722419",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "@sdaftuar Please understand the issues before taking a position. The bloating is in response to the OP_RETURN limit, which is entirely unrelated to either this or bytespersigop. @sipa is speculating that *attackers* (not users) might bloat abusive transactions to get around the anti-spam limit of bytespersigop.\r\n\r\nbytespersigop is a spam filter. This PR is an economic fee rate adjustment. Two entirely different things.",
      "created_at" : "2016-07-19T19:44:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233743884",
      "id" : 233743884,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T19:44:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233743884",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "> and as temorary fix to get around the limit introduced by #7081, transactions are indeed bloated.\r\n\r\n",
      "created_at" : "2016-07-19T19:58:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233747646",
      "id" : 233747646,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T19:58:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233747646",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "> The bloating is in response to the OP_RETURN limit, which is entirely unrelated to either this or bytespersigop.\r\n\r\nActually, while counterparty-lib and omnicore use bare-multisig scripts to transport data that doesn't fit into OP_RETURN scripts, both projects started to bloat transactions to get around the sigops limit, so the bloating is indeed the response to #7081. And just FYI: Counterparty even goes one step further and falls back to data embedding via P2PKH, in case the transaction can't be bloated sufficently, e.g. because an user has not enough inputs available. I believe Dropzone also reverted back to embedding data via P2PKH as response to #7081.\r\n\r\n> bytespersigop is a spam filter. This PR is an economic fee rate adjustment. Two entirely different things.\r\n\r\nIt results in a similar outcome.",
      "created_at" : "2016-07-19T20:18:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233752962",
      "id" : 233752962,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T20:31:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233752962",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5836089?v=3",
         "events_url" : "https://api.github.com/users/dexX7/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dexX7/followers",
         "following_url" : "https://api.github.com/users/dexX7/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dexX7/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dexX7",
         "id" : 5836089,
         "login" : "dexX7",
         "organizations_url" : "https://api.github.com/users/dexX7/orgs",
         "received_events_url" : "https://api.github.com/users/dexX7/received_events",
         "repos_url" : "https://api.github.com/users/dexX7/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dexX7/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dexX7"
      }
   },
   {
      "body" : "That's not multisig, it's data abusively encoded as multisig. For Bitcoin to have any chance of succeeding, it must be stopped, not accommodated.",
      "created_at" : "2016-07-19T20:34:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233757232",
      "id" : 233757232,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T20:34:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233757232",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "ACK ab942c15bd3854650afa810d7c22d7fd30d346c1\r\n\r\nThis is a very clever solution. Will close #8364, once this one is merged.",
      "created_at" : "2016-07-19T22:11:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233782299",
      "id" : 233782299,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T22:11:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233782299",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/20516749?v=3",
         "events_url" : "https://api.github.com/users/f139975/events{/privacy}",
         "followers_url" : "https://api.github.com/users/f139975/followers",
         "following_url" : "https://api.github.com/users/f139975/following{/other_user}",
         "gists_url" : "https://api.github.com/users/f139975/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/f139975",
         "id" : 20516749,
         "login" : "f139975",
         "organizations_url" : "https://api.github.com/users/f139975/orgs",
         "received_events_url" : "https://api.github.com/users/f139975/received_events",
         "repos_url" : "https://api.github.com/users/f139975/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/f139975/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/f139975/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/f139975"
      }
   },
   {
      "body" : "I'm against any sort of spam in reaching the blockchain.  As a miner and a pool operator I have to object to mining anything that could encourage attackers or spammers in any way.  This behavior appears to encourage spammers and has the appearance of condoning their behavior.  While I agree that some tweaking could be done to allow more legitimate transactions with more sigops through normally, removing this limit entirely done not seem like a sane solution.\r\n\r\nWith a spammer who actually cares about bloat, perhaps this could encourage them to lessen it slightly with this approach.  But first, they have no real incentive to do so if the end result is still the same fee.  Plus, an actual attacker has zero incentive to reduce the bloat as a result of this PR either way.  This still ignores the point that none of the spam or attacks should be getting mined anyway.  Again, as a miner, we should not be condoning spammers by giving the appearance that we're willing to accept their spam for a fee.  There should be no fee high enough for accepting a spam/attack transaction.\r\n\r\nNACK as this stands.  Concept ACK If implemented with the bytespersigop filter retained, since then I think this would have the desired effect of reducing/discouraging spam/attacks and also allows legitimate transactions that need more sigops to pay a higher fee.",
      "created_at" : "2016-07-19T23:43:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233799314",
      "id" : 233799314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-19T23:56:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233799314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1316379?v=3",
         "events_url" : "https://api.github.com/users/wizkid057/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wizkid057/followers",
         "following_url" : "https://api.github.com/users/wizkid057/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wizkid057/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wizkid057",
         "id" : 1316379,
         "login" : "wizkid057",
         "organizations_url" : "https://api.github.com/users/wizkid057/orgs",
         "received_events_url" : "https://api.github.com/users/wizkid057/received_events",
         "repos_url" : "https://api.github.com/users/wizkid057/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wizkid057/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wizkid057/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wizkid057"
      }
   },
   {
      "body" : "If you want to discourage the use of bare-multisig, then please start the process to revive #5231, which was closed back then due to it's controversy. Seemingly neither the submitter of #7081, nor it's reviewers, were aware of the side effect #8079. Arguing against this pull request, or #8364, based on the opinion that the side effect is actually nice to have seems wrong to me, as this just shows that the whole process of review and consensus can be bypassed.",
      "created_at" : "2016-07-20T00:03:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233802397",
      "id" : 233802397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-20T00:03:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233802397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5836089?v=3",
         "events_url" : "https://api.github.com/users/dexX7/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dexX7/followers",
         "following_url" : "https://api.github.com/users/dexX7/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dexX7/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dexX7",
         "id" : 5836089,
         "login" : "dexX7",
         "organizations_url" : "https://api.github.com/users/dexX7/orgs",
         "received_events_url" : "https://api.github.com/users/dexX7/received_events",
         "repos_url" : "https://api.github.com/users/dexX7/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dexX7/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dexX7"
      }
   },
   {
      "body" : "@dexX7 You are the only one here I see talking about bare multisig.",
      "created_at" : "2016-07-20T00:24:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233805498",
      "id" : 233805498,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-20T00:24:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233805498",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "To help clarify things, the four different topics:\r\n\r\n* OP_RETURN data carrier: debatably-legit use cases exist (Counterparty); currently limited to 80 bytes per tx, allegedly \"forcing\" some \"use cases\" to resort to abusing bare multisig\r\n* bare multisig: legit use cases exist, no known legit use in practice (?), often abused for spam and attacks (policy filtered by default in #5231)\r\n* bare multisig or p2pk with impossible parameters: must be spam or attack; addressed by bytespersigop (#8364 fixes a bug in this)\r\n* bare multisig with possible parameters that consume the block sigop limit disproportionately: legit use cases exist, no known legit use in practice (?), often abused for spam and attacks, potential DoS risk if miners sort before better-fee'd transactions (what @sipa is trying to address in this PR)\r\n",
      "created_at" : "2016-07-20T00:32:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233806638",
      "id" : 233806638,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-20T00:32:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233806638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2016-07-20T02:42:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-233823692",
      "id" : 233823692,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-20T02:42:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233823692",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Concept ACK.  \r\nI actually think we should make the \"policy change\" of changing this back to 50 bytes per sigop and removing the option entirely.  It's not really about getting your transaction relayed but about having miners construct more optimal blocks.  It seems silly to me to have the mining code be purposefully less good just because users aren't expecting miners to have more intelligent algorithms.  How do you defend that decision to miners?  We're not giving you better code because some users might be confused and not estimate their fees properly (including Bitcoin Core for that matter)?  Maybe you could make that argument if there was a huge impact, but sounds like its not?\r\n\r\n",
      "created_at" : "2016-07-20T20:20:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8365#issuecomment-234069562",
      "id" : 234069562,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8365",
      "updated_at" : "2016-07-20T20:20:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/234069562",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   }
]
