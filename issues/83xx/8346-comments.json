[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71071082"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71071082"
         }
      },
      "body" : "Hmm, does `CheckInputs` change `state` in `assert` in the original code (i.e. is it against our *Assertions should not have side-effects* rule)?",
      "commit_id" : "00b4943c2794fecf93c21d3db814ea7b2e362087",
      "created_at" : "2016-07-16T20:03:40Z",
      "diff_hunk" : "@@ -737,7 +738,7 @@ void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n             waitingOnDependants.push_back(&(*it));\n         else {\n             CValidationState state;\n-            assert(CheckInputs(tx, state, mempoolDuplicate, false, 0, false, NULL));\n+            assert(Consensus::CheckTxInputs(tx, state, mempoolDuplicate, nSpendHeight));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71071082",
      "id" : 71071082,
      "original_commit_id" : "c1d83a93bc9a4355294f2546230e99102200fbd4",
      "original_position" : 13,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346",
      "updated_at" : "2016-07-18T14:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71071082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "CheckTxInputs should return true; if it is a coinbase. (agree that in theory it should not happen, but I prefer that we don't change the semantic by mistake)",
      "created_at" : "2016-07-17T03:12:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-233162743",
      "id" : 233162743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-17T03:17:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233162743",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "@NicolasDorier I'm doing that later in https://github.com/jtimon/bitcoin/commits/0.12.99-consensus , but since you refuse to review that branch...Little steps first, preparations, remember?\r\n",
      "created_at" : "2016-07-17T09:18:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-233172937",
      "id" : 233172937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-17T09:18:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233172937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71079312"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71079312"
         }
      },
      "body" : "I didn't know we had just a rule, is there a place where those \"rules\" are documented?\r\nIf we do, I suggest we change that rule to at least not apply to CValidationState.\r\nIn any case, this is not a change in this PR: there's no change in functionality here, it was doing the same before.",
      "commit_id" : "00b4943c2794fecf93c21d3db814ea7b2e362087",
      "created_at" : "2016-07-17T09:20:41Z",
      "diff_hunk" : "@@ -737,7 +738,7 @@ void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n             waitingOnDependants.push_back(&(*it));\n         else {\n             CValidationState state;\n-            assert(CheckInputs(tx, state, mempoolDuplicate, false, 0, false, NULL));\n+            assert(Consensus::CheckTxInputs(tx, state, mempoolDuplicate, nSpendHeight));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71079312",
      "id" : 71079312,
      "original_commit_id" : "c1d83a93bc9a4355294f2546230e99102200fbd4",
      "original_position" : 13,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346",
      "updated_at" : "2016-07-18T14:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71079312",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71079335"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71079335"
         }
      },
      "body" : "Ã¢ÂÂ\nhttps://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#general-c\n",
      "commit_id" : "00b4943c2794fecf93c21d3db814ea7b2e362087",
      "created_at" : "2016-07-17T09:22:46Z",
      "diff_hunk" : "@@ -737,7 +738,7 @@ void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n             waitingOnDependants.push_back(&(*it));\n         else {\n             CValidationState state;\n-            assert(CheckInputs(tx, state, mempoolDuplicate, false, 0, false, NULL));\n+            assert(Consensus::CheckTxInputs(tx, state, mempoolDuplicate, nSpendHeight));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71079335",
      "id" : 71079335,
      "original_commit_id" : "c1d83a93bc9a4355294f2546230e99102200fbd4",
      "original_position" : 13,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346",
      "updated_at" : "2016-07-18T14:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71079335",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71080614"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71080614"
         }
      },
      "body" : "Thanks. \r\nSo, yes, it seems these asserts were not complying with that rule. Neither before not after my change.\r\nIf there's an easy fix to add here, I'm all for it.\r\nShould I launch an exception instead ?\r\nIt doesn't seem right the way CTxMemPool::check is written...\r\nMaybe it's enough to rename the offending state local variables to dummyState ?\r\n\r\n",
      "commit_id" : "00b4943c2794fecf93c21d3db814ea7b2e362087",
      "created_at" : "2016-07-17T11:03:16Z",
      "diff_hunk" : "@@ -737,7 +738,7 @@ void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n             waitingOnDependants.push_back(&(*it));\n         else {\n             CValidationState state;\n-            assert(CheckInputs(tx, state, mempoolDuplicate, false, 0, false, NULL));\n+            assert(Consensus::CheckTxInputs(tx, state, mempoolDuplicate, nSpendHeight));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71080614",
      "id" : 71080614,
      "original_commit_id" : "c1d83a93bc9a4355294f2546230e99102200fbd4",
      "original_position" : 13,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346",
      "updated_at" : "2016-07-18T14:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71080614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71080635"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71080635"
         }
      },
      "body" : "Assign the result to a local scope bool and assert the value of the bool?",
      "commit_id" : "00b4943c2794fecf93c21d3db814ea7b2e362087",
      "created_at" : "2016-07-17T11:05:15Z",
      "diff_hunk" : "@@ -737,7 +738,7 @@ void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n             waitingOnDependants.push_back(&(*it));\n         else {\n             CValidationState state;\n-            assert(CheckInputs(tx, state, mempoolDuplicate, false, 0, false, NULL));\n+            assert(Consensus::CheckTxInputs(tx, state, mempoolDuplicate, nSpendHeight));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71080635",
      "id" : 71080635,
      "original_commit_id" : "c1d83a93bc9a4355294f2546230e99102200fbd4",
      "original_position" : 13,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346",
      "updated_at" : "2016-07-18T14:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71080635",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71080748"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71080748"
         }
      },
      "body" : "Oh, yeah, is as simple as that. Happy to code and squash that.",
      "commit_id" : "00b4943c2794fecf93c21d3db814ea7b2e362087",
      "created_at" : "2016-07-17T11:14:25Z",
      "diff_hunk" : "@@ -737,7 +738,7 @@ void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n             waitingOnDependants.push_back(&(*it));\n         else {\n             CValidationState state;\n-            assert(CheckInputs(tx, state, mempoolDuplicate, false, 0, false, NULL));\n+            assert(Consensus::CheckTxInputs(tx, state, mempoolDuplicate, nSpendHeight));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71080748",
      "id" : 71080748,
      "original_commit_id" : "c1d83a93bc9a4355294f2546230e99102200fbd4",
      "original_position" : 13,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346",
      "updated_at" : "2016-07-18T14:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71080748",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Updated solving @paveljanik 's nit as suggested by @MarcoFalke . Didn't squashed the commit yet though.",
      "created_at" : "2016-07-17T11:44:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-233178030",
      "id" : 233178030,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-17T11:45:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233178030",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71081086"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71081086"
         }
      },
      "body" : "Would be better to move this into the smaller else {} scopes",
      "commit_id" : "00b4943c2794fecf93c21d3db814ea7b2e362087",
      "created_at" : "2016-07-17T11:47:17Z",
      "diff_hunk" : "@@ -657,6 +657,9 @@ void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n     uint64_t innerUsage = 0;\n \n     CCoinsViewCache mempoolDuplicate(const_cast<CCoinsViewCache*>(pcoins));\n+    const int64_t nSpendHeight = GetSpendHeight(mempoolDuplicate);\n+    CValidationState state;\n+    bool fCheckResult = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71081086",
      "id" : 71081086,
      "original_commit_id" : "fa3e82563db63c6e601ccb440a11ad4ba66c9a5b",
      "original_position" : 6,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346",
      "updated_at" : "2016-07-18T14:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71081086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71081504"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71081504"
         }
      },
      "body" : "Sorry, I actually moved the state out. I thought this would be clearer. I will change it back and declare the bool twice in their smaller scopes. Reusing the bool actually takes one extra line.",
      "commit_id" : "00b4943c2794fecf93c21d3db814ea7b2e362087",
      "created_at" : "2016-07-17T12:19:07Z",
      "diff_hunk" : "@@ -657,6 +657,9 @@ void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n     uint64_t innerUsage = 0;\n \n     CCoinsViewCache mempoolDuplicate(const_cast<CCoinsViewCache*>(pcoins));\n+    const int64_t nSpendHeight = GetSpendHeight(mempoolDuplicate);\n+    CValidationState state;\n+    bool fCheckResult = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71081504",
      "id" : 71081504,
      "original_commit_id" : "fa3e82563db63c6e601ccb440a11ad4ba66c9a5b",
      "original_position" : 6,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346",
      "updated_at" : "2016-07-18T14:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71081504",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@jtimon just saying the returns true if coinbase should be part of this commit, not later.\r\nAnyway, not blocking for me ACK fa3e82563db63c6e601ccb440a11ad4ba66c9a5b\r\n\r\nEDIT: oh I think you were responding to the first comment I made and deleted shortly before you replied. Don't take note to what I said before, my only complain on this commit is that CheckTxInputs should returns true if it is a coinbase.",
      "created_at" : "2016-07-17T15:35:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-233187873",
      "id" : 233187873,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-17T15:40:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233187873",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "I'm not sure I understand. Which return true if coinbase?",
      "created_at" : "2016-07-17T15:40:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-233188073",
      "id" : 233188073,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-17T15:40:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233188073",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "CheckTxInputs should returns true if it is a coinbase.",
      "created_at" : "2016-07-17T15:41:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-233188109",
      "id" : 233188109,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-17T15:41:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233188109",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "as the main::CheckInputs was doing.",
      "created_at" : "2016-07-17T15:41:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-233188125",
      "id" : 233188125,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-17T15:41:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233188125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71084537"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71084537"
         }
      },
      "body" : "here, either you should add\r\n\r\n```\r\nfCheckResult = Consensus::CheckTxInputs(tx, state, mempoolDuplicate, nSpendHeight) || tx.IsCoinbase;\r\n```\r\nOr better, CheckTxInputs should do it internally.\r\n",
      "commit_id" : "00b4943c2794fecf93c21d3db814ea7b2e362087",
      "created_at" : "2016-07-17T15:49:59Z",
      "diff_hunk" : "@@ -736,22 +739,22 @@ void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n         if (fDependsWait)\n             waitingOnDependants.push_back(&(*it));\n         else {\n-            CValidationState state;\n-            assert(CheckInputs(tx, state, mempoolDuplicate, false, 0, false, NULL));\n+            fCheckResult = Consensus::CheckTxInputs(tx, state, mempoolDuplicate, nSpendHeight);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71084537",
      "id" : 71084537,
      "original_commit_id" : "fa3e82563db63c6e601ccb440a11ad4ba66c9a5b",
      "original_position" : 16,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346",
      "updated_at" : "2016-07-18T14:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71084537",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71155136"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71155136"
         }
      },
      "body" : "Oh, yeah again lost in re-write. it's even stated in the Preconditions of Consensus::CheckTxInputs in the doc I'm adding just now!\r\n",
      "commit_id" : "00b4943c2794fecf93c21d3db814ea7b2e362087",
      "created_at" : "2016-07-18T14:20:00Z",
      "diff_hunk" : "@@ -736,22 +739,22 @@ void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n         if (fDependsWait)\n             waitingOnDependants.push_back(&(*it));\n         else {\n-            CValidationState state;\n-            assert(CheckInputs(tx, state, mempoolDuplicate, false, 0, false, NULL));\n+            fCheckResult = Consensus::CheckTxInputs(tx, state, mempoolDuplicate, nSpendHeight);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#discussion_r71155136",
      "id" : 71155136,
      "original_commit_id" : "fa3e82563db63c6e601ccb440a11ad4ba66c9a5b",
      "original_position" : 16,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8346",
      "updated_at" : "2016-07-18T14:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71155136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Updated with more fixes and after squashing.",
      "created_at" : "2016-07-18T14:27:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-233344454",
      "id" : 233344454,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-18T14:27:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233344454",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/8346/commits/00b4943c2794fecf93c21d3db814ea7b2e362087",
      "created_at" : "2016-07-18T14:32:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-233345969",
      "id" : 233345969,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-18T14:32:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233345969",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "body" : "utACK 00b4943",
      "created_at" : "2016-07-21T12:56:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-234245002",
      "id" : 234245002,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-21T12:56:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/234245002",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "utACK 00b4943\r\n\r\nNice proof of work commit there :-p ",
      "created_at" : "2016-07-21T12:56:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-234245012",
      "id" : 234245012,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-21T12:56:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/234245012",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "utACK 00b4943c2794fecf93c21d3db814ea7b2e362087",
      "created_at" : "2016-07-21T13:17:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-234250051",
      "id" : 234250051,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-21T13:17:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/234250051",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "I confirm this one can get merged before #8259. I'll need to backport to 0.13 #8259 which does not have this PR, but that's trivial change.",
      "created_at" : "2016-07-28T20:52:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-236021444",
      "id" : 236021444,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-28T20:52:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236021444",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "I'm not a fan of having the code in main.cpp while the header is in consensus.h. What is the plan afterwards? Will CheckTxInputs move to consesus/consensus.cpp as well? Will that mean that CCoinsViewCache (on which it depends) also moves to consensus?",
      "created_at" : "2016-07-28T21:30:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-236031145",
      "id" : 236031145,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-28T21:30:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236031145",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa most likely in the future for libconsensus, we'll need to make an interface and replace CCoinsViewCache dependencies by such interface. CCoinsViewCache would stay out of consensuslib.\r\n\r\nThe implementation of the interface in libconsensus will use user provided callbacks, while bitcoin core's implementation would use CCoinViewCache under the hood.",
      "created_at" : "2016-07-28T21:35:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-236032474",
      "id" : 236032474,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-28T21:36:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236032474",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "@NicolasDorier I mean in the immediate future. It's not a nice state that the definition for a function is inside a module where the code can't actually move yet.",
      "created_at" : "2016-07-28T21:36:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-236032695",
      "id" : 236032695,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-28T21:36:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236032695",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa ah yes, I also think so.\r\nI'm not against moving before, but I would prefer moving the declaration after as well.",
      "created_at" : "2016-07-28T21:40:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-236033684",
      "id" : 236033684,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-28T21:40:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236033684",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "I'd rather not move things until they can actually cleanly moved.",
      "created_at" : "2016-07-28T21:43:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-236034427",
      "id" : 236034427,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-28T21:43:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236034427",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa My plan was to move it later to tx_verify as shown in #8329, but there's many other options.\r\nI'm happy moving the declaration to main.h (although I strongly believe the declaration doesn't belong there) or the definition to whatever place outside of main, even if it means moving the declaration outside of consensus/consensus.h.\r\nWhatever looks easier to merge in the short term.\r\n",
      "created_at" : "2016-07-28T22:02:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8346#issuecomment-236038854",
      "id" : 236038854,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8346",
      "updated_at" : "2016-07-28T22:02:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236038854",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   }
]
