[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r297277339"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297277339"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could leave them in separate lines, so that an assert failure is more verbose and helpful?",
      "commit_id" : "bdd6a4fd5da44c2575be9195ecb4213a13e74511",
      "created_at" : "2019-06-25T16:22:16Z",
      "diff_hunk" : "@@ -2293,15 +2297,19 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n         g_scan_progress = 0;\n         int64_t count = 0;\n         std::unique_ptr<CCoinsViewCursor> pcursor;\n+        CBlockIndex* tip;\n         {\n             LOCK(cs_main);\n             ::ChainstateActive().ForceFlushStateToDisk();\n             pcursor = std::unique_ptr<CCoinsViewCursor>(pcoinsdbview->Cursor());\n-            assert(pcursor);\n+            tip = ::ChainActive().Tip();\n+            assert(pcursor && tip);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r297277339",
      "id" : 297277339,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzI3NzMzOQ==",
      "original_commit_id" : "5002e87cbc3b0e79969f5232e8477e28ae6cab15",
      "original_position" : 41,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 254122229,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285",
      "updated_at" : "2019-09-08T23:52:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297277339",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r297405966"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297405966"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "bdd6a4fd5da44c2575be9195ecb4213a13e74511",
      "created_at" : "2019-06-25T21:41:56Z",
      "diff_hunk" : "@@ -2293,15 +2297,19 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n         g_scan_progress = 0;\n         int64_t count = 0;\n         std::unique_ptr<CCoinsViewCursor> pcursor;\n+        CBlockIndex* tip;\n         {\n             LOCK(cs_main);\n             ::ChainstateActive().ForceFlushStateToDisk();\n             pcursor = std::unique_ptr<CCoinsViewCursor>(pcoinsdbview->Cursor());\n-            assert(pcursor);\n+            tip = ::ChainActive().Tip();\n+            assert(pcursor && tip);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r297405966",
      "id" : 297405966,
      "in_reply_to_id" : 297277339,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzQwNTk2Ng==",
      "original_commit_id" : "5002e87cbc3b0e79969f5232e8477e28ae6cab15",
      "original_position" : 41,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 254285841,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285",
      "updated_at" : "2019-09-08T23:52:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297405966",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonasschnelli mind taking a look?",
      "created_at" : "2019-07-02T20:52:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#issuecomment-507840316",
      "id" : 507840316,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16285",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNzg0MDMxNg==",
      "updated_at" : "2019-07-02T20:52:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/507840316",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r300809178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300809178"
         }
      },
      "author_association" : "NONE",
      "body" : "Can you remove unused curly braces ",
      "commit_id" : "bdd6a4fd5da44c2575be9195ecb4213a13e74511",
      "created_at" : "2019-07-05T23:07:59Z",
      "diff_hunk" : "@@ -2293,15 +2297,20 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n         g_scan_progress = 0;\n         int64_t count = 0;\n         std::unique_ptr<CCoinsViewCursor> pcursor;\n+        CBlockIndex* tip;\n         {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r300809178",
      "id" : 300809178,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwMDgwOTE3OA==",
      "original_commit_id" : "e36bb00f85f0f26063433c112ef675141b88ba56",
      "original_position" : 35,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 36,
      "pull_request_review_id" : 258565289,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285",
      "updated_at" : "2019-09-08T23:52:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300809178",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1562849?v=4",
         "events_url" : "https://api.github.com/users/fqlx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fqlx/followers",
         "following_url" : "https://api.github.com/users/fqlx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fqlx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fqlx",
         "id" : 1562849,
         "login" : "fqlx",
         "node_id" : "MDQ6VXNlcjE1NjI4NDk=",
         "organizations_url" : "https://api.github.com/users/fqlx/orgs",
         "received_events_url" : "https://api.github.com/users/fqlx/received_events",
         "repos_url" : "https://api.github.com/users/fqlx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fqlx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fqlx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fqlx"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r300809236"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300809236"
         }
      },
      "author_association" : "NONE",
      "body" : "I'd just declare and initialize tip here instead of at the top and same with pcursor",
      "commit_id" : "bdd6a4fd5da44c2575be9195ecb4213a13e74511",
      "created_at" : "2019-07-05T23:08:48Z",
      "diff_hunk" : "@@ -2293,15 +2297,20 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n         g_scan_progress = 0;\n         int64_t count = 0;\n         std::unique_ptr<CCoinsViewCursor> pcursor;\n+        CBlockIndex* tip;\n         {\n             LOCK(cs_main);\n             ::ChainstateActive().ForceFlushStateToDisk();\n             pcursor = std::unique_ptr<CCoinsViewCursor>(pcoinsdbview->Cursor());\n             assert(pcursor);\n+            tip = ::ChainActive().Tip();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r300809236",
      "id" : 300809236,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwMDgwOTIzNg==",
      "original_commit_id" : "e36bb00f85f0f26063433c112ef675141b88ba56",
      "original_position" : 40,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 41,
      "pull_request_review_id" : 258565289,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285",
      "updated_at" : "2019-09-08T23:52:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300809236",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1562849?v=4",
         "events_url" : "https://api.github.com/users/fqlx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fqlx/followers",
         "following_url" : "https://api.github.com/users/fqlx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fqlx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fqlx",
         "id" : 1562849,
         "login" : "fqlx",
         "node_id" : "MDQ6VXNlcjE1NjI4NDk=",
         "organizations_url" : "https://api.github.com/users/fqlx/orgs",
         "received_events_url" : "https://api.github.com/users/fqlx/received_events",
         "repos_url" : "https://api.github.com/users/fqlx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fqlx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fqlx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fqlx"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r300809662"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300809662"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The block is required for cs_main scoped lock.",
      "commit_id" : "bdd6a4fd5da44c2575be9195ecb4213a13e74511",
      "created_at" : "2019-07-05T23:15:00Z",
      "diff_hunk" : "@@ -2293,15 +2297,20 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n         g_scan_progress = 0;\n         int64_t count = 0;\n         std::unique_ptr<CCoinsViewCursor> pcursor;\n+        CBlockIndex* tip;\n         {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r300809662",
      "id" : 300809662,
      "in_reply_to_id" : 300809178,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwMDgwOTY2Mg==",
      "original_commit_id" : "e36bb00f85f0f26063433c112ef675141b88ba56",
      "original_position" : 35,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 36,
      "pull_request_review_id" : 258565855,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285",
      "updated_at" : "2019-09-08T23:52:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300809662",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r300811357"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300811357"
         }
      },
      "author_association" : "NONE",
      "body" : "Can you show me this documentation? I'm not familiar with it",
      "commit_id" : "bdd6a4fd5da44c2575be9195ecb4213a13e74511",
      "created_at" : "2019-07-05T23:39:52Z",
      "diff_hunk" : "@@ -2293,15 +2297,20 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n         g_scan_progress = 0;\n         int64_t count = 0;\n         std::unique_ptr<CCoinsViewCursor> pcursor;\n+        CBlockIndex* tip;\n         {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r300811357",
      "id" : 300811357,
      "in_reply_to_id" : 300809178,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwMDgxMTM1Nw==",
      "original_commit_id" : "e36bb00f85f0f26063433c112ef675141b88ba56",
      "original_position" : 35,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 36,
      "pull_request_review_id" : 258567673,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285",
      "updated_at" : "2019-09-08T23:52:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300811357",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1562849?v=4",
         "events_url" : "https://api.github.com/users/fqlx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fqlx/followers",
         "following_url" : "https://api.github.com/users/fqlx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fqlx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fqlx",
         "id" : 1562849,
         "login" : "fqlx",
         "node_id" : "MDQ6VXNlcjE1NjI4NDk=",
         "organizations_url" : "https://api.github.com/users/fqlx/orgs",
         "received_events_url" : "https://api.github.com/users/fqlx/received_events",
         "repos_url" : "https://api.github.com/users/fqlx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fqlx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fqlx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fqlx"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r300811615"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300811615"
         }
      },
      "author_association" : "MEMBER",
      "body" : " You cannot access variables which are shared across threads without grabbing the correct lock. `::ChainstateActive` accesses a global, which is protected by `cs_main`.",
      "commit_id" : "bdd6a4fd5da44c2575be9195ecb4213a13e74511",
      "created_at" : "2019-07-05T23:44:32Z",
      "diff_hunk" : "@@ -2293,15 +2297,20 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n         g_scan_progress = 0;\n         int64_t count = 0;\n         std::unique_ptr<CCoinsViewCursor> pcursor;\n+        CBlockIndex* tip;\n         {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r300811615",
      "id" : 300811615,
      "in_reply_to_id" : 300809178,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwMDgxMTYxNQ==",
      "original_commit_id" : "e36bb00f85f0f26063433c112ef675141b88ba56",
      "original_position" : 35,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 36,
      "pull_request_review_id" : 258567965,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285",
      "updated_at" : "2019-09-08T23:52:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300811615",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-07-08T14:40:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#issuecomment-509253778",
      "id" : 509253778,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16285",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwOTI1Mzc3OA==",
      "updated_at" : "2019-07-08T14:40:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/509253778",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r317463766"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/317463766"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: maybe `tipheight` or `bestblockheight`?\r\nBut maybe `height` is also okay.",
      "commit_id" : "bdd6a4fd5da44c2575be9195ecb4213a13e74511",
      "created_at" : "2019-08-26T06:18:05Z",
      "diff_hunk" : "@@ -2293,15 +2297,20 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n         g_scan_progress = 0;\n         int64_t count = 0;\n         std::unique_ptr<CCoinsViewCursor> pcursor;\n+        CBlockIndex* tip;\n         {\n             LOCK(cs_main);\n             ::ChainstateActive().ForceFlushStateToDisk();\n             pcursor = std::unique_ptr<CCoinsViewCursor>(pcoinsdbview->Cursor());\n             assert(pcursor);\n+            tip = ::ChainActive().Tip();\n+            assert(tip);\n         }\n         bool res = FindScriptPubKey(g_scan_progress, g_should_abort_scan, count, pcursor.get(), needles, coins);\n         result.pushKV(\"success\", res);\n-        result.pushKV(\"searched_items\", count);\n+        result.pushKV(\"txouts\", count);\n+        result.pushKV(\"height\", tip->nHeight);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r317463766",
      "id" : 317463766,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNzQ2Mzc2Ng==",
      "original_commit_id" : "e36bb00f85f0f26063433c112ef675141b88ba56",
      "original_position" : 47,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 48,
      "pull_request_review_id" : 279414998,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285",
      "updated_at" : "2019-09-08T23:52:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/317463766",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r322033655"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/322033655"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Would be good to add one or two bitcoin-cli examples here.",
      "commit_id" : "bdd6a4fd5da44c2575be9195ecb4213a13e74511",
      "created_at" : "2019-09-08T23:14:20Z",
      "diff_hunk" : "@@ -2199,17 +2199,21 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n                 },\n                 RPCResult{\n             \"{\\n\"\n+            \"  \\\"success\\\": true|false,         (boolean) Whether the scan was completed\\n\"\n+            \"  \\\"txouts\\\": n,                   (numeric) The number of unspent transaction outputs scanned\\n\"\n+            \"  \\\"height\\\": n,                   (numeric) The current block height (index)\\n\"\n+            \"  \\\"bestblock\\\": \\\"hex\\\",            (string) The hash of the block at the tip of the chain\\n\"\n             \"  \\\"unspents\\\": [\\n\"\n-            \"    {\\n\"\n-            \"    \\\"txid\\\" : \\\"transactionid\\\",     (string) The transaction id\\n\"\n-            \"    \\\"vout\\\": n,                    (numeric) the vout value\\n\"\n-            \"    \\\"scriptPubKey\\\" : \\\"script\\\",    (string) the script key\\n\"\n-            \"    \\\"desc\\\" : \\\"descriptor\\\",        (string) A specialized descriptor for the matched scriptPubKey\\n\"\n-            \"    \\\"amount\\\" : x.xxx,             (numeric) The total amount in \" + CURRENCY_UNIT + \" of the unspent output\\n\"\n-            \"    \\\"height\\\" : n,                 (numeric) Height of the unspent transaction output\\n\"\n+            \"   {\\n\"\n+            \"    \\\"txid\\\": \\\"hash\\\",              (string) The transaction id\\n\"\n+            \"    \\\"vout\\\": n,                   (numeric) the vout value\\n\"\n+            \"    \\\"scriptPubKey\\\": \\\"script\\\",    (string) the script key\\n\"\n+            \"    \\\"desc\\\": \\\"descriptor\\\",        (string) A specialized descriptor for the matched scriptPubKey\\n\"\n+            \"    \\\"amount\\\": x.xxx,             (numeric) The total amount in \" + CURRENCY_UNIT + \" of the unspent output\\n\"\n+            \"    \\\"height\\\": n,                 (numeric) Height of the unspent transaction output\\n\"\n             \"   }\\n\"\n             \"   ,...], \\n\"\n-            \" \\\"total_amount\\\" : x.xxx,          (numeric) The total amount of all found unspent outputs in \" + CURRENCY_UNIT + \"\\n\"\n+            \"  \\\"total_amount\\\": x.xxx,          (numeric) The total amount of all found unspent outputs in \" + CURRENCY_UNIT + \"\\n\"\n             \"]\\n\"\n                 },\n                 RPCExamples{\"\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r322033655",
      "id" : 322033655,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMjAzMzY1NQ==",
      "original_commit_id" : "e36bb00f85f0f26063433c112ef675141b88ba56",
      "original_position" : 29,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 30,
      "pull_request_review_id" : 285240076,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285",
      "updated_at" : "2019-09-08T23:52:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/322033655",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r322033717"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/322033717"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In lines 2209-2210, s/the/The/",
      "commit_id" : "bdd6a4fd5da44c2575be9195ecb4213a13e74511",
      "created_at" : "2019-09-08T23:15:42Z",
      "diff_hunk" : "@@ -2199,17 +2199,21 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n                 },\n                 RPCResult{\n             \"{\\n\"\n+            \"  \\\"success\\\": true|false,         (boolean) Whether the scan was completed\\n\"\n+            \"  \\\"txouts\\\": n,                   (numeric) The number of unspent transaction outputs scanned\\n\"\n+            \"  \\\"height\\\": n,                   (numeric) The current block height (index)\\n\"\n+            \"  \\\"bestblock\\\": \\\"hex\\\",            (string) The hash of the block at the tip of the chain\\n\"\n             \"  \\\"unspents\\\": [\\n\"\n-            \"    {\\n\"\n-            \"    \\\"txid\\\" : \\\"transactionid\\\",     (string) The transaction id\\n\"\n-            \"    \\\"vout\\\": n,                    (numeric) the vout value\\n\"\n-            \"    \\\"scriptPubKey\\\" : \\\"script\\\",    (string) the script key\\n\"\n-            \"    \\\"desc\\\" : \\\"descriptor\\\",        (string) A specialized descriptor for the matched scriptPubKey\\n\"\n-            \"    \\\"amount\\\" : x.xxx,             (numeric) The total amount in \" + CURRENCY_UNIT + \" of the unspent output\\n\"\n-            \"    \\\"height\\\" : n,                 (numeric) Height of the unspent transaction output\\n\"\n+            \"   {\\n\"\n+            \"    \\\"txid\\\": \\\"hash\\\",              (string) The transaction id\\n\"\n+            \"    \\\"vout\\\": n,                   (numeric) the vout value\\n\"\n+            \"    \\\"scriptPubKey\\\": \\\"script\\\",    (string) the script key\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r322033717",
      "id" : 322033717,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMjAzMzcxNw==",
      "original_commit_id" : "e36bb00f85f0f26063433c112ef675141b88ba56",
      "original_position" : 19,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 285240076,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285",
      "updated_at" : "2019-09-08T23:52:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/322033717",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r322033796"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/322033796"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Trailing space can be removed here between the comma and `\\n`",
      "commit_id" : "bdd6a4fd5da44c2575be9195ecb4213a13e74511",
      "created_at" : "2019-09-08T23:17:38Z",
      "diff_hunk" : "@@ -2199,17 +2199,21 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n                 },\n                 RPCResult{\n             \"{\\n\"\n+            \"  \\\"success\\\": true|false,         (boolean) Whether the scan was completed\\n\"\n+            \"  \\\"txouts\\\": n,                   (numeric) The number of unspent transaction outputs scanned\\n\"\n+            \"  \\\"height\\\": n,                   (numeric) The current block height (index)\\n\"\n+            \"  \\\"bestblock\\\": \\\"hex\\\",            (string) The hash of the block at the tip of the chain\\n\"\n             \"  \\\"unspents\\\": [\\n\"\n-            \"    {\\n\"\n-            \"    \\\"txid\\\" : \\\"transactionid\\\",     (string) The transaction id\\n\"\n-            \"    \\\"vout\\\": n,                    (numeric) the vout value\\n\"\n-            \"    \\\"scriptPubKey\\\" : \\\"script\\\",    (string) the script key\\n\"\n-            \"    \\\"desc\\\" : \\\"descriptor\\\",        (string) A specialized descriptor for the matched scriptPubKey\\n\"\n-            \"    \\\"amount\\\" : x.xxx,             (numeric) The total amount in \" + CURRENCY_UNIT + \" of the unspent output\\n\"\n-            \"    \\\"height\\\" : n,                 (numeric) Height of the unspent transaction output\\n\"\n+            \"   {\\n\"\n+            \"    \\\"txid\\\": \\\"hash\\\",              (string) The transaction id\\n\"\n+            \"    \\\"vout\\\": n,                   (numeric) the vout value\\n\"\n+            \"    \\\"scriptPubKey\\\": \\\"script\\\",    (string) the script key\\n\"\n+            \"    \\\"desc\\\": \\\"descriptor\\\",        (string) A specialized descriptor for the matched scriptPubKey\\n\"\n+            \"    \\\"amount\\\": x.xxx,             (numeric) The total amount in \" + CURRENCY_UNIT + \" of the unspent output\\n\"\n+            \"    \\\"height\\\": n,                 (numeric) Height of the unspent transaction output\\n\"\n             \"   }\\n\"\n             \"   ,...], \\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r322033796",
      "id" : 322033796,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMjAzMzc5Ng==",
      "original_commit_id" : "e36bb00f85f0f26063433c112ef675141b88ba56",
      "original_position" : 24,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 285240076,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285",
      "updated_at" : "2019-09-08T23:52:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/322033796",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r322035345"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/322035345"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What do you suggest?",
      "commit_id" : "bdd6a4fd5da44c2575be9195ecb4213a13e74511",
      "created_at" : "2019-09-08T23:52:36Z",
      "diff_hunk" : "@@ -2199,17 +2199,21 @@ UniValue scantxoutset(const JSONRPCRequest& request)\n                 },\n                 RPCResult{\n             \"{\\n\"\n+            \"  \\\"success\\\": true|false,         (boolean) Whether the scan was completed\\n\"\n+            \"  \\\"txouts\\\": n,                   (numeric) The number of unspent transaction outputs scanned\\n\"\n+            \"  \\\"height\\\": n,                   (numeric) The current block height (index)\\n\"\n+            \"  \\\"bestblock\\\": \\\"hex\\\",            (string) The hash of the block at the tip of the chain\\n\"\n             \"  \\\"unspents\\\": [\\n\"\n-            \"    {\\n\"\n-            \"    \\\"txid\\\" : \\\"transactionid\\\",     (string) The transaction id\\n\"\n-            \"    \\\"vout\\\": n,                    (numeric) the vout value\\n\"\n-            \"    \\\"scriptPubKey\\\" : \\\"script\\\",    (string) the script key\\n\"\n-            \"    \\\"desc\\\" : \\\"descriptor\\\",        (string) A specialized descriptor for the matched scriptPubKey\\n\"\n-            \"    \\\"amount\\\" : x.xxx,             (numeric) The total amount in \" + CURRENCY_UNIT + \" of the unspent output\\n\"\n-            \"    \\\"height\\\" : n,                 (numeric) Height of the unspent transaction output\\n\"\n+            \"   {\\n\"\n+            \"    \\\"txid\\\": \\\"hash\\\",              (string) The transaction id\\n\"\n+            \"    \\\"vout\\\": n,                   (numeric) the vout value\\n\"\n+            \"    \\\"scriptPubKey\\\": \\\"script\\\",    (string) the script key\\n\"\n+            \"    \\\"desc\\\": \\\"descriptor\\\",        (string) A specialized descriptor for the matched scriptPubKey\\n\"\n+            \"    \\\"amount\\\": x.xxx,             (numeric) The total amount in \" + CURRENCY_UNIT + \" of the unspent output\\n\"\n+            \"    \\\"height\\\": n,                 (numeric) Height of the unspent transaction output\\n\"\n             \"   }\\n\"\n             \"   ,...], \\n\"\n-            \" \\\"total_amount\\\" : x.xxx,          (numeric) The total amount of all found unspent outputs in \" + CURRENCY_UNIT + \"\\n\"\n+            \"  \\\"total_amount\\\": x.xxx,          (numeric) The total amount of all found unspent outputs in \" + CURRENCY_UNIT + \"\\n\"\n             \"]\\n\"\n                 },\n                 RPCExamples{\"\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#discussion_r322035345",
      "id" : 322035345,
      "in_reply_to_id" : 322033655,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMjAzNTM0NQ==",
      "original_commit_id" : "e36bb00f85f0f26063433c112ef675141b88ba56",
      "original_position" : 29,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 30,
      "pull_request_review_id" : 285242100,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16285",
      "updated_at" : "2019-09-08T23:52:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/322035345",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK bdd6a4fd5da44c2575be9195ecb4213a13e74511\r\n\r\nI think this is enough of an improvement in itself, examples can be added later.",
      "created_at" : "2019-09-09T06:08:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16285#issuecomment-529313781",
      "id" : 529313781,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16285",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyOTMxMzc4MQ==",
      "updated_at" : "2019-09-09T06:30:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/529313781",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
