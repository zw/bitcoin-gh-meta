[
   {
      "body" : "Please see this thread: https://bitcointalk.org/index.php?topic=339802.20 and specifically this message https://bitcointalk.org/index.php?topic=339802.msg3654039#msg3654039 for another example.",
      "created_at" : "2013-11-20T19:39:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3288#issuecomment-28922179",
      "id" : 28922179,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3288",
      "updated_at" : "2013-11-20T19:39:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/28922179",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5993033?v=3",
         "events_url" : "https://api.github.com/users/oblongmeteor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/oblongmeteor/followers",
         "following_url" : "https://api.github.com/users/oblongmeteor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/oblongmeteor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/oblongmeteor",
         "id" : 5993033,
         "login" : "oblongmeteor",
         "organizations_url" : "https://api.github.com/users/oblongmeteor/orgs",
         "received_events_url" : "https://api.github.com/users/oblongmeteor/received_events",
         "repos_url" : "https://api.github.com/users/oblongmeteor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/oblongmeteor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/oblongmeteor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/oblongmeteor"
      }
   },
   {
      "body" : "The software only spends its own unconfirmed outputs and only as a last resort. There is nothing improper about spending unconfirmed coins, though the wallet software won't do so when they come from an untrusted source. \r\nWhat exactly is the behavior that you want?",
      "created_at" : "2013-11-20T19:47:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3288#issuecomment-28923237",
      "id" : 28923237,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3288",
      "updated_at" : "2013-11-20T19:47:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/28923237",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "I believe the behavior should default to only spending confirmed outputs. As suggested by DeathAndTaxes here: https://bitcointalk.org/index.php?topic=339802.msg3653378#msg3653378 - a minconf optional parameter with either a default value of 0 - to retain the existing behavior as default - or 1 to ensure that no unconfirmed outputs are ever used to create transactions when the \"sendtoaddress\" method is invoked, regardless of whether the transaction chain is being generated incestuously by outputs within your wallet. \r\n\r\nYou may also wish to consider some of the additional recommendations proposed such as setting a min fee for all transactions as the default.",
      "created_at" : "2013-11-20T19:59:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3288#issuecomment-28924733",
      "id" : 28924733,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3288",
      "updated_at" : "2013-11-20T19:59:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/28924733",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5993033?v=3",
         "events_url" : "https://api.github.com/users/oblongmeteor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/oblongmeteor/followers",
         "following_url" : "https://api.github.com/users/oblongmeteor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/oblongmeteor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/oblongmeteor",
         "id" : 5993033,
         "login" : "oblongmeteor",
         "organizations_url" : "https://api.github.com/users/oblongmeteor/orgs",
         "received_events_url" : "https://api.github.com/users/oblongmeteor/received_events",
         "repos_url" : "https://api.github.com/users/oblongmeteor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/oblongmeteor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/oblongmeteor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/oblongmeteor"
      }
   },
   {
      "body" : "In cases where it spent its own change it would have been unable to spend at all. This is not a desirable outcome.\r\n\r\nWhy do you believe the behavior should be to only spend confirmed outputs?  The current behavior is that it only spends funds from third parties that is confirmed, but its own outputs (with no unconfirmed third party contributions) can be spent whenever.",
      "created_at" : "2013-11-20T20:02:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3288#issuecomment-28925033",
      "id" : 28925033,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3288",
      "updated_at" : "2013-11-20T20:05:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/28925033",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Because in the situation illustrated in the thread (see: https://bitcointalk.org/index.php?topic=339802.20) - where an ancestor transaction does not include a fee but is used as an input to a child, regardless of whether that child includes a fee it will not be confirmed until the ancestor is. In effect, your transaction chain is bottle necked by any preceding transaction used as an input that is not favored for inclusion in a block. \r\n\r\nIn the two examples cited in the above thread, downstream transactions included a fee but were not confirmed in a timely manner because they filed a dependency on an 0 fee ancestor that was ignored by miners until its priority mandated its inclusion. By providing a minconf parameter, you avoid the situation where unconfirmed outputs are spent, and therefore ensure that the addition of a fee is actually meaningful in the context of the current transaction.",
      "created_at" : "2013-11-20T20:07:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3288#issuecomment-28925650",
      "id" : 28925650,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3288",
      "updated_at" : "2013-11-20T20:08:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/28925650",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5993033?v=3",
         "events_url" : "https://api.github.com/users/oblongmeteor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/oblongmeteor/followers",
         "following_url" : "https://api.github.com/users/oblongmeteor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/oblongmeteor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/oblongmeteor",
         "id" : 5993033,
         "login" : "oblongmeteor",
         "organizations_url" : "https://api.github.com/users/oblongmeteor/orgs",
         "received_events_url" : "https://api.github.com/users/oblongmeteor/received_events",
         "repos_url" : "https://api.github.com/users/oblongmeteor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/oblongmeteor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/oblongmeteor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/oblongmeteor"
      }
   },
   {
      "body" : "Some miners probably about 15-20% of the hashrate consider all dependencies as a group, so your argument of the fee being irrelevant doesn't hold compeltely.\r\n\r\nYou're still not answering my core question, which is why do you think refusing to make a transaction at all would be an improvement?\r\n\r\n",
      "created_at" : "2013-11-20T20:13:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3288#issuecomment-28926374",
      "id" : 28926374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3288",
      "updated_at" : "2013-11-20T20:13:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/28926374",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Perhaps I'm misunderstanding your question. I have said the BitcoinD software \"sendtoaddress\" method should either default too or provide the ability to spend *only* from confirmed outputs. \r\n\r\nThe core reason - as I've indicated in my previous response - is because downstream child transactions that are created and rely on the unconfirmed output of an ancestor that does not include a fee are delayed until that ancestor is included in a block. \r\n\r\n*Edit: In addition, since the default behavior of the client is *not* to include a fee unless the size of the transaction exceeds 1KB, a single transaction sent without a fee can cause significant downstream delays to any dependents especially during periods of increased traffic.",
      "created_at" : "2013-11-20T20:19:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3288#issuecomment-28926898",
      "id" : 28926898,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3288",
      "updated_at" : "2013-11-20T20:22:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/28926898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5993033?v=3",
         "events_url" : "https://api.github.com/users/oblongmeteor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/oblongmeteor/followers",
         "following_url" : "https://api.github.com/users/oblongmeteor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/oblongmeteor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/oblongmeteor",
         "id" : 5993033,
         "login" : "oblongmeteor",
         "organizations_url" : "https://api.github.com/users/oblongmeteor/orgs",
         "received_events_url" : "https://api.github.com/users/oblongmeteor/received_events",
         "repos_url" : "https://api.github.com/users/oblongmeteor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/oblongmeteor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/oblongmeteor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/oblongmeteor"
      }
   },
   {
      "body" : "\"can cause significant downstream delays to any dependents\"\r\n\r\nIt only uses the unconfirmed inputs as a last resort. Meaning that the software would refuse to make a transaction until some of its unconfirmed change confirmed. It only attempts to use its own unconfirmed change if it was _unable_ to construct a transaction that didn't do so.\r\n\r\nSome miners already consider the transactions as a group, fees on the subsequent transactions will pay for their parents. I'd rather see that expanded than change the behavior with change.\r\n\r\n(There are reasons unrelated to this why spending unconfirmed anything isn't greatÃ¢ÂÂ the transaction malleability problem, but thats a separate issue)\r\n\r\n",
      "created_at" : "2013-11-20T20:26:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3288#issuecomment-28927509",
      "id" : 28927509,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3288",
      "updated_at" : "2013-11-20T20:26:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/28927509",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Perhaps then it may be prudent to skip \"minconf\" as a parameter on \"sendtoaddress\" and default the behavior to always only using confirmed inputs and refusing to complete a transaction if insufficient confirmed outputs exist. \r\n\r\nThose who wish more granular control can use the preexisting raw transaction functionality (https://en.bitcoin.it/wiki/Raw_Transactions). ",
      "created_at" : "2013-11-20T20:30:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3288#issuecomment-28927932",
      "id" : 28927932,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3288",
      "updated_at" : "2013-11-20T20:30:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/28927932",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5993033?v=3",
         "events_url" : "https://api.github.com/users/oblongmeteor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/oblongmeteor/followers",
         "following_url" : "https://api.github.com/users/oblongmeteor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/oblongmeteor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/oblongmeteor",
         "id" : 5993033,
         "login" : "oblongmeteor",
         "organizations_url" : "https://api.github.com/users/oblongmeteor/orgs",
         "received_events_url" : "https://api.github.com/users/oblongmeteor/received_events",
         "repos_url" : "https://api.github.com/users/oblongmeteor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/oblongmeteor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/oblongmeteor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/oblongmeteor"
      }
   },
   {
      "body" : "I don't see why you believe users would find it acceptable to potentially be only able to issue a single transaction at a time until their prior transaction confirms, or if you don't realize that is an outcome from what you're proposing.",
      "created_at" : "2013-11-20T22:25:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3288#issuecomment-28937849",
      "id" : 28937849,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3288",
      "updated_at" : "2013-11-20T22:25:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/28937849",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Closing; this works as intended.\r\n\r\nThe intended behavior is:\r\n\r\n1) Use confirmed outputs, unless there are not enough, in which case:\r\n2) Use unconfirmed outputs that we created ourself, on the assumption that we will not double-spend ourselves and that those transactions we created ourself will confirm reasonably quickly.\r\n\r\nRight now, the \"will confirm reasonably quickly\" is a bad assumption, but that is a separate issue that is being fixed with my \"smartfee\" work.\r\n\r\n",
      "created_at" : "2013-11-20T22:50:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3288#issuecomment-28939903",
      "id" : 28939903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3288",
      "updated_at" : "2013-11-20T22:50:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/28939903",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   }
]
