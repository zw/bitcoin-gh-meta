[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Missing test.",
      "created_at" : "2018-01-05T09:26:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355509666",
      "id" : 355509666,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-05T09:26:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355509666",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "This decreases the output? In some cases that may desirable, but in general I think that's very unexpected (I would think it would add a new input instead).",
      "created_at" : "2018-01-05T12:30:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355544243",
      "id" : 355544243,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-05T12:30:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355544243",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "If you don't have a change address chance are fairly high that you're simply moving coins (e.g. between wallets). Especially if you only have one utxo in, you may not want to associate other utxo's with it for privacy reasons.",
      "created_at" : "2018-01-05T12:40:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355545850",
      "id" : 355545850,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-05T12:40:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355545850",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> _\"single output transactions are special in that the exact amount doesn't usually matter (the user is emptying a wallet or using coin control to move UTXOs).\"_\r\n\r\nI would argue that this is not stated strongly enough. If they previously paid to a single output then it is *almost always* true that they do not care about the particular amount. This is especially true as the previous amount was subject to an arbitrary, variable fee.\r\n\r\nValid use cases where this behavior is necessary, where you really don't want to require adding more inputs in order to bumpfee:\r\n* Emptying a wallet\r\n* Emptying particular UTXO's\r\n\r\nI would further suggest if the receiver was expecting a particular amount then you would expect there to be a change output.",
      "created_at" : "2018-01-05T12:49:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355547260",
      "id" : 355547260,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-05T12:49:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355547260",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/93665?v=4",
         "events_url" : "https://api.github.com/users/wtogami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wtogami/followers",
         "following_url" : "https://api.github.com/users/wtogami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wtogami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wtogami",
         "id" : 93665,
         "login" : "wtogami",
         "organizations_url" : "https://api.github.com/users/wtogami/orgs",
         "received_events_url" : "https://api.github.com/users/wtogami/received_events",
         "repos_url" : "https://api.github.com/users/wtogami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wtogami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wtogami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wtogami"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@kallewoof You're right that in *most* cases right now that you don't care about the amount if there is only one output, but there is certainly no guarantee. The coin selection algorithm even explicitly tries to find a solution without change first - it's just pretty terrible at its job current (#10637 will make it succeed much more often).\r\n  ",
      "created_at" : "2018-01-05T12:51:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355547735",
      "id" : 355547735,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-05T12:55:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355547735",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this could be generalized and also be made safer by adding an `reduce_output` option to bumpfee (could also call it something like `output_number` or `txout`). This way you'd be able to bump single output transactions by specifying `reduce_output: 0`, but there'd be no risk of someone accidentally decreasing the amount they are trying to send by bumping the fee in other cases.\r\n  ",
      "created_at" : "2018-01-05T12:55:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355548327",
      "id" : 355548327,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-05T12:56:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355548327",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't think it makes sense to arbitrarily add inputs to bumpfee. I don't even know if RBF allows it (since you're suggesting it, I guess it does -- I thought I tried and failed).\r\n\r\nMaybe a `bump_from_output` flag in `options` that did this behavior.\r\n \r\nEdit: @ryanofsky That looks good to me.",
      "created_at" : "2018-01-05T12:55:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355548355",
      "id" : 355548355,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-05T12:55:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355548355",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "I don't see why RBF wouldn't allow it, as long as all transactions you're replacing have been marked as replaceable.\r\n\r\nI like the idea of explicitly marking an output that can be reduced.\r\n\r\nOver time (especially after #10637), I think we'll inevitably need a way to bump transactions that don't have change. Depending on feerates and your wallet's UTXO set distribution, a large fraction of transactions may be created without change.\r\n  ",
      "created_at" : "2018-01-05T13:00:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355549264",
      "id" : 355549264,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-05T13:00:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355549264",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "does the wallet track which outputs had subtractFeeFromOutput? In that case further reduction seems completely fine as well.",
      "created_at" : "2018-01-05T14:11:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355563425",
      "id" : 355563425,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-05T14:11:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355563425",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r159898177"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/159898177"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Check new output is less than 0.00099?",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-01-05T15:11:03Z",
      "diff_hunk" : "@@ -278,6 +279,13 @@ def spend_one_input(node, dest_address):\n     txid = node.sendrawtransaction(signedtx[\"hex\"])\n     return txid\n \n+def test_single_output_bump(node, dest_address):\n+    tx_input = dict(\n+        sequence=BIP125_SEQUENCE_NUMBER, **next(u for u in node.listunspent() if u[\"amount\"] == Decimal(\"0.00100000\")))\n+    rawtx = node.createrawtransaction([tx_input], {dest_address: Decimal(\"0.00099000\")})\n+    signedtx = node.signrawtransaction(rawtx)\n+    txid = node.sendrawtransaction(signedtx[\"hex\"])\n+    bumped_tx = node.bumpfee(txid)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r159898177",
      "id" : 159898177,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1OTg5ODE3Nw==",
      "original_commit_id" : "2afb0d085ff922080c7d40be191ebc684f7f84b3",
      "original_position" : 18,
      "path" : "test/functional/bumpfee.py",
      "position" : null,
      "pull_request_review_id" : 86927273,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/159898177",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Agree that there are cases where the output(s) can't be reduced. In the cases it can be reduced, should it be re-funded?\r\n  ",
      "created_at" : "2018-01-05T15:14:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355578491",
      "id" : 355578491,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-05T15:44:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355578491",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I don't think it makes sense to arbitrarily add inputs to bumpfee. I don't even know if RBF allows it (since you're suggesting it, I guess it does -- I thought I tried and failed).\r\n\r\n@kallewoof Currently our relay policy (and BIP 125) require that if you add a new input, it must be already confirmed -- perhaps you tested with an unconfirmed input?\r\n\r\n(The idea behind that requirement was to ensure the new transaction was more likely to be mined than the ones it was replacing; now that we use ancestor feerate mining, we could perhaps relax this requirement and compare ancestor feerates of everything instead to ensure the new transaction has a higher mining score.)",
      "created_at" : "2018-01-05T15:41:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355585456",
      "id" : 355585456,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-05T15:41:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355585456",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "concept ack after the current coin selection stop trying 1 output (I assume  #10637 solves that?).\r\n",
      "created_at" : "2018-01-08T20:38:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356088910",
      "id" : 356088910,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-08T20:38:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/356088910",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "NAK.  The only time it would be acceptable to reduce the output is if the transaction was created as subtract fee from output.  Bumping should add additional inputs as required.",
      "created_at" : "2018-01-08T20:42:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356089931",
      "id" : 356089931,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-08T20:42:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/356089931",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@gmaxwell even with an option to allow the subtract, default to false (since there is no subtract from output record)?\r\n  ",
      "created_at" : "2018-01-08T20:50:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356092114",
      "id" : 356092114,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-08T20:50:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/356092114",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "if it were behind a bunch of warnings, ... but even though if substract from wasn't initially selected should only be a last resort if it can't bump otherwise.  The wallet shouldn't quietly direct the user into behavior that might cause them to get criminally prosecuted.",
      "created_at" : "2018-01-08T21:00:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356094763",
      "id" : 356094763,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-08T21:00:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/356094763",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@wtogami  The wallet has explicit information about transactions created where the user requested subtracting fees from amounts. Using that information would be  fine but you cannot use the lack of a change output to detect this,  when 2^inputs * fees_saved_from_excluding_an_output  is large relative to the amount being paid an exact match frequently exists. And the PR pieter linked to will usually find it.\r\n  ",
      "created_at" : "2018-01-09T03:53:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356172731",
      "id" : 356172731,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-09T03:57:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/356172731",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@gmaxwell An update to require the user to select the output explicitly for transactions with no change output [https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355548327] would ensure that they know what they're doing, I believe. I.e. it would fail for these transactions unless the user picked the output. Do you think that's insufficient?\r\n",
      "created_at" : "2018-01-09T03:59:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356173401",
      "id" : 356173401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-09T03:59:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/356173401",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Summary:\r\n* Do not implicitly assume a single-output-no-change transaction can be altered due to better coin selection in the future.\r\n* Require the user to select the output if the user does not want additional inputs to be added to cover increased fees.\r\n* (Allow adding additional inputs to cover increased fees -- separate PR)\r\n\r\nFor this PR, that translates to:\r\n* Fail if no output is explicitly chosen (pre-merge behavior)\r\n* Reduce single output to cover fees if user has explicitly picked it\r\n* Allow user to arbitrarily pick the output that is reduced for existing multi-output transactions (i.e. not restricted to change output).\r\n",
      "created_at" : "2018-01-09T04:04:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356173981",
      "id" : 356173981,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-09T04:04:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/356173981",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r160315813"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160315813"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, good point - fixing.",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-01-09T04:13:45Z",
      "diff_hunk" : "@@ -278,6 +279,13 @@ def spend_one_input(node, dest_address):\n     txid = node.sendrawtransaction(signedtx[\"hex\"])\n     return txid\n \n+def test_single_output_bump(node, dest_address):\n+    tx_input = dict(\n+        sequence=BIP125_SEQUENCE_NUMBER, **next(u for u in node.listunspent() if u[\"amount\"] == Decimal(\"0.00100000\")))\n+    rawtx = node.createrawtransaction([tx_input], {dest_address: Decimal(\"0.00099000\")})\n+    signedtx = node.signrawtransaction(rawtx)\n+    txid = node.sendrawtransaction(signedtx[\"hex\"])\n+    bumped_tx = node.bumpfee(txid)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r160315813",
      "id" : 160315813,
      "in_reply_to_id" : 159898177,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MDMxNTgxMw==",
      "original_commit_id" : "2afb0d085ff922080c7d40be191ebc684f7f84b3",
      "original_position" : 18,
      "path" : "test/functional/bumpfee.py",
      "position" : null,
      "pull_request_review_id" : 87409881,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160315813",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "- [x] Self-review: RPC command help needs update to reflect change\r\n",
      "created_at" : "2018-01-09T14:17:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356295827",
      "id" : 356295827,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-01-10T00:15:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/356295827",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r161377915"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161377915"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This error will also display in the gui. Not sure if it makes sense there to mention reduce_output",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-01-13T18:00:36Z",
      "diff_hunk" : "@@ -111,20 +111,22 @@ Result CreateTransaction(const CWallet* wallet, const uint256& txid, const CCoin\n         return Result::WALLET_ERROR;\n     }\n \n-    // figure out which output was change\n-    // if there was no change output or multiple change outputs, fail\n-    int nOutput = -1;\n-    for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n-        if (wallet->IsChange(wtx.tx->vout[i])) {\n-            if (nOutput != -1) {\n-                errors.push_back(\"Transaction has multiple change outputs\");\n-                return Result::WALLET_ERROR;\n+    int nOutput = reduce_output;\n+    if (nOutput == -1) {\n+        // figure out which output was change\n+        // if there was no change output or multiple change outputs, fail\n+        for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n+            if (wallet->IsChange(wtx.tx->vout[i])) {\n+                if (nOutput != -1) {\n+                    errors.push_back(\"Transaction has multiple change outputs (use reduce_output=<index> to select the one to use)\");\n+                    return Result::WALLET_ERROR;\n+                }\n+                nOutput = i;\n             }\n-            nOutput = i;\n         }\n     }\n     if (nOutput == -1) {\n-        errors.push_back(\"Transaction does not have a change output\");\n+        errors.push_back(\"Transaction does not have a change output (use reduce_output=0 to use the single output)\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r161377915",
      "id" : 161377915,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTM3NzkxNQ==",
      "original_commit_id" : "6fa618dc6fdf4440cf3d12e83e6dfc05f9ba65fc",
      "original_position" : 38,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 88663335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161377915",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r161378876"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161378876"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This will segfault on OOB",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-01-13T18:43:57Z",
      "diff_hunk" : "@@ -3257,6 +3262,9 @@ UniValue bumpfee(const JSONRPCRequest& request)\n                 throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid estimate_mode parameter\");\n             }\n         }\n+        if (options.exists(\"reduce_output\")) {\n+            reduce_output = options[\"reduce_output\"].get_int64();\n+        }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r161378876",
      "id" : 161378876,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTM3ODg3Ng==",
      "original_commit_id" : "6fa618dc6fdf4440cf3d12e83e6dfc05f9ba65fc",
      "original_position" : 41,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 44,
      "pull_request_review_id" : 88664346,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161378876",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r161382085"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161382085"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh. Hm..",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-01-13T21:34:51Z",
      "diff_hunk" : "@@ -111,20 +111,22 @@ Result CreateTransaction(const CWallet* wallet, const uint256& txid, const CCoin\n         return Result::WALLET_ERROR;\n     }\n \n-    // figure out which output was change\n-    // if there was no change output or multiple change outputs, fail\n-    int nOutput = -1;\n-    for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n-        if (wallet->IsChange(wtx.tx->vout[i])) {\n-            if (nOutput != -1) {\n-                errors.push_back(\"Transaction has multiple change outputs\");\n-                return Result::WALLET_ERROR;\n+    int nOutput = reduce_output;\n+    if (nOutput == -1) {\n+        // figure out which output was change\n+        // if there was no change output or multiple change outputs, fail\n+        for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n+            if (wallet->IsChange(wtx.tx->vout[i])) {\n+                if (nOutput != -1) {\n+                    errors.push_back(\"Transaction has multiple change outputs (use reduce_output=<index> to select the one to use)\");\n+                    return Result::WALLET_ERROR;\n+                }\n+                nOutput = i;\n             }\n-            nOutput = i;\n         }\n     }\n     if (nOutput == -1) {\n-        errors.push_back(\"Transaction does not have a change output\");\n+        errors.push_back(\"Transaction does not have a change output (use reduce_output=0 to use the single output)\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r161382085",
      "id" : 161382085,
      "in_reply_to_id" : 161377915,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTM4MjA4NQ==",
      "original_commit_id" : "6fa618dc6fdf4440cf3d12e83e6dfc05f9ba65fc",
      "original_position" : 38,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 88667884,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161382085",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r161382531"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161382531"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oops. Added bounds check in `feebumper::CreateTransaction`.",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-01-13T21:59:55Z",
      "diff_hunk" : "@@ -3257,6 +3262,9 @@ UniValue bumpfee(const JSONRPCRequest& request)\n                 throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid estimate_mode parameter\");\n             }\n         }\n+        if (options.exists(\"reduce_output\")) {\n+            reduce_output = options[\"reduce_output\"].get_int64();\n+        }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r161382531",
      "id" : 161382531,
      "in_reply_to_id" : 161378876,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTM4MjUzMQ==",
      "original_commit_id" : "6fa618dc6fdf4440cf3d12e83e6dfc05f9ba65fc",
      "original_position" : 41,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 44,
      "pull_request_review_id" : 88668298,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161382531",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162416337"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162416337"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Where?",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-01-18T17:38:38Z",
      "diff_hunk" : "@@ -3257,6 +3262,9 @@ UniValue bumpfee(const JSONRPCRequest& request)\n                 throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid estimate_mode parameter\");\n             }\n         }\n+        if (options.exists(\"reduce_output\")) {\n+            reduce_output = options[\"reduce_output\"].get_int64();\n+        }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162416337",
      "id" : 162416337,
      "in_reply_to_id" : 161378876,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MjQxNjMzNw==",
      "original_commit_id" : "6fa618dc6fdf4440cf3d12e83e6dfc05f9ba65fc",
      "original_position" : 41,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 44,
      "pull_request_review_id" : 89870012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162416337",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162418688"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162418688"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Also add `assert_raises_rpc_error` tests for:\r\n - when not a number;\r\n - when reduce_output < 0 and >= len(vout).\r\n\r\nFor instance, see 7f67dd0aa.",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-01-18T17:47:22Z",
      "diff_hunk" : "@@ -3257,6 +3262,9 @@ UniValue bumpfee(const JSONRPCRequest& request)\n                 throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid estimate_mode parameter\");\n             }\n         }\n+        if (options.exists(\"reduce_output\")) {\n+            reduce_output = options[\"reduce_output\"].get_int64();\n+        }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162418688",
      "id" : 162418688,
      "in_reply_to_id" : 161378876,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MjQxODY4OA==",
      "original_commit_id" : "6fa618dc6fdf4440cf3d12e83e6dfc05f9ba65fc",
      "original_position" : 41,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 44,
      "pull_request_review_id" : 89870012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162418688",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162419493"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162419493"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Place `reduce_output` after `total_fee`? Those after `total_fee` are *output* values.",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-01-18T17:50:27Z",
      "diff_hunk" : "@@ -78,7 +78,7 @@ bool TransactionCanBeBumped(CWallet* wallet, const uint256& txid)\n }\n \n Result CreateTransaction(const CWallet* wallet, const uint256& txid, const CCoinControl& coin_control, CAmount total_fee, std::vector<std::string>& errors,\n-                         CAmount& old_fee, CAmount& new_fee, CMutableTransaction& mtx)\n+                         CAmount& old_fee, CAmount& new_fee, CMutableTransaction& mtx, int32_t reduce_output)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162419493",
      "id" : 162419493,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MjQxOTQ5Mw==",
      "original_commit_id" : "02d1508d502ffd1725616f511a5396061cd92091",
      "original_position" : 5,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 89870012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162419493",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162419665"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162419665"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`` `reduce_output` ``",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-01-18T17:51:05Z",
      "diff_hunk" : "@@ -3178,7 +3178,8 @@ UniValue bumpfee(const JSONRPCRequest& request)\n             \"\\nBumps the fee of an opt-in-RBF transaction T, replacing it with a new transaction B.\\n\"\n             \"An opt-in RBF transaction with the given txid must be in the wallet.\\n\"\n             \"The command will pay the additional fee by decreasing (or perhaps removing) its change output.\\n\"\n-            \"If the change output is not big enough to cover the increased fee, the command will currently fail\\n\"\n+            \"If an explicit \\\"reduce output\\\" has been picked, that will be decreased instead.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162419665",
      "id" : 162419665,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MjQxOTY2NQ==",
      "original_commit_id" : "02d1508d502ffd1725616f511a5396061cd92091",
      "original_position" : 5,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 89870012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162419665",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162499062"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162499062"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No idea how that happened, but my changes are gone. Fixing, again.",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-01-18T23:20:18Z",
      "diff_hunk" : "@@ -3257,6 +3262,9 @@ UniValue bumpfee(const JSONRPCRequest& request)\n                 throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid estimate_mode parameter\");\n             }\n         }\n+        if (options.exists(\"reduce_output\")) {\n+            reduce_output = options[\"reduce_output\"].get_int64();\n+        }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162499062",
      "id" : 162499062,
      "in_reply_to_id" : 161378876,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MjQ5OTA2Mg==",
      "original_commit_id" : "6fa618dc6fdf4440cf3d12e83e6dfc05f9ba65fc",
      "original_position" : 41,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 44,
      "pull_request_review_id" : 89968711,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162499062",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r169206471"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/169206471"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It also sounds confusing when there isn't a single output?",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-02-20T02:42:51Z",
      "diff_hunk" : "@@ -111,20 +111,22 @@ Result CreateTransaction(const CWallet* wallet, const uint256& txid, const CCoin\n         return Result::WALLET_ERROR;\n     }\n \n-    // figure out which output was change\n-    // if there was no change output or multiple change outputs, fail\n-    int nOutput = -1;\n-    for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n-        if (wallet->IsChange(wtx.tx->vout[i])) {\n-            if (nOutput != -1) {\n-                errors.push_back(\"Transaction has multiple change outputs\");\n-                return Result::WALLET_ERROR;\n+    int nOutput = reduce_output;\n+    if (nOutput == -1) {\n+        // figure out which output was change\n+        // if there was no change output or multiple change outputs, fail\n+        for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n+            if (wallet->IsChange(wtx.tx->vout[i])) {\n+                if (nOutput != -1) {\n+                    errors.push_back(\"Transaction has multiple change outputs (use reduce_output=<index> to select the one to use)\");\n+                    return Result::WALLET_ERROR;\n+                }\n+                nOutput = i;\n             }\n-            nOutput = i;\n         }\n     }\n     if (nOutput == -1) {\n-        errors.push_back(\"Transaction does not have a change output\");\n+        errors.push_back(\"Transaction does not have a change output (use reduce_output=0 to use the single output)\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r169206471",
      "id" : 169206471,
      "in_reply_to_id" : 161377915,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2OTIwNjQ3MQ==",
      "original_commit_id" : "6fa618dc6fdf4440cf3d12e83e6dfc05f9ba65fc",
      "original_position" : 38,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 97695257,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/169206471",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r169210796"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/169210796"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'll just revert it.",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-02-20T03:28:31Z",
      "diff_hunk" : "@@ -111,20 +111,22 @@ Result CreateTransaction(const CWallet* wallet, const uint256& txid, const CCoin\n         return Result::WALLET_ERROR;\n     }\n \n-    // figure out which output was change\n-    // if there was no change output or multiple change outputs, fail\n-    int nOutput = -1;\n-    for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n-        if (wallet->IsChange(wtx.tx->vout[i])) {\n-            if (nOutput != -1) {\n-                errors.push_back(\"Transaction has multiple change outputs\");\n-                return Result::WALLET_ERROR;\n+    int nOutput = reduce_output;\n+    if (nOutput == -1) {\n+        // figure out which output was change\n+        // if there was no change output or multiple change outputs, fail\n+        for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n+            if (wallet->IsChange(wtx.tx->vout[i])) {\n+                if (nOutput != -1) {\n+                    errors.push_back(\"Transaction has multiple change outputs (use reduce_output=<index> to select the one to use)\");\n+                    return Result::WALLET_ERROR;\n+                }\n+                nOutput = i;\n             }\n-            nOutput = i;\n         }\n     }\n     if (nOutput == -1) {\n-        errors.push_back(\"Transaction does not have a change output\");\n+        errors.push_back(\"Transaction does not have a change output (use reduce_output=0 to use the single output)\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r169210796",
      "id" : 169210796,
      "in_reply_to_id" : 161377915,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2OTIxMDc5Ng==",
      "original_commit_id" : "6fa618dc6fdf4440cf3d12e83e6dfc05f9ba65fc",
      "original_position" : 38,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 97699916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/169210796",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r170672617"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170672617"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Needs a lower bounds check here too, to avoid accepting -1.",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-02-26T17:32:02Z",
      "diff_hunk" : "@@ -3257,6 +3262,9 @@ UniValue bumpfee(const JSONRPCRequest& request)\n                 throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid estimate_mode parameter\");\n             }\n         }\n+        if (options.exists(\"reduce_output\")) {\n+            reduce_output = options[\"reduce_output\"].get_int64();\n+        }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r170672617",
      "id" : 170672617,
      "in_reply_to_id" : 161378876,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MDY3MjYxNw==",
      "original_commit_id" : "6fa618dc6fdf4440cf3d12e83e6dfc05f9ba65fc",
      "original_position" : 41,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 44,
      "pull_request_review_id" : 99394115,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170672617",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r170672694"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170672694"
         }
      },
      "author_association" : "MEMBER",
      "body" : "-1 shouldn't be exposed to the user IMO (especially since the internal interfaces will probably change when we add support for additional inputs).",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-02-26T17:32:19Z",
      "diff_hunk" : "@@ -111,22 +112,28 @@ Result CreateTransaction(const CWallet* wallet, const uint256& txid, const CCoin\n         return Result::INVALID_ADDRESS_OR_KEY;\n     }\n     const CWalletTx& wtx = it->second;\n+    if (reduce_output < -1 || reduce_output >= int64_t(wtx.tx->vout.size())) {\n+        errors.push_back(strprintf(\"Change output out of bounds [-1..%zu]\", wtx.tx->vout.size()-1));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r170672694",
      "id" : 170672694,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MDY3MjY5NA==",
      "original_commit_id" : "cf02bcb3edb5aac2a93310809fe52c3e2cf02950",
      "original_position" : 15,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 99394115,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170672694",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The only time it would be acceptable to reduce the output is if the transaction was created as subtract fee from output.\r\n\r\n@gmaxwell What if you want to subtract-fee-from-output after the fact?",
      "created_at" : "2018-02-26T17:35:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-368583330",
      "id" : 368583330,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-02-26T17:35:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/368583330",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r170814148"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170814148"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The default is `-1` to mean `auto-select`. How would you propose that is expressed otherwise? As an additional `bool explicit_reduce_output` feels messy.",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-02-27T04:44:12Z",
      "diff_hunk" : "@@ -111,22 +112,28 @@ Result CreateTransaction(const CWallet* wallet, const uint256& txid, const CCoin\n         return Result::INVALID_ADDRESS_OR_KEY;\n     }\n     const CWalletTx& wtx = it->second;\n+    if (reduce_output < -1 || reduce_output >= int64_t(wtx.tx->vout.size())) {\n+        errors.push_back(strprintf(\"Change output out of bounds [-1..%zu]\", wtx.tx->vout.size()-1));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r170814148",
      "id" : 170814148,
      "in_reply_to_id" : 170672694,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MDgxNDE0OA==",
      "original_commit_id" : "cf02bcb3edb5aac2a93310809fe52c3e2cf02950",
      "original_position" : 15,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 99557046,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170814148",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr Now throws on negative `reduce_output` in RPC code.",
      "created_at" : "2018-02-27T04:46:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-368746102",
      "id" : 368746102,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-02-27T04:46:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/368746102",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171198211"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171198211"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`rpcwallet.cpp` already checks this, so just put an assert here?",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-02-28T10:19:13Z",
      "diff_hunk" : "@@ -111,22 +112,28 @@ Result CreateTransaction(const CWallet* wallet, const uint256& txid, const CCoin\n         return Result::INVALID_ADDRESS_OR_KEY;\n     }\n     const CWalletTx& wtx = it->second;\n+    if (reduce_output < -1 || reduce_output >= int64_t(wtx.tx->vout.size())) {\n+        errors.push_back(strprintf(\"Change output out of bounds [-1..%zu]\", wtx.tx->vout.size()-1));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171198211",
      "id" : 171198211,
      "in_reply_to_id" : 170672694,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTE5ODIxMQ==",
      "original_commit_id" : "cf02bcb3edb5aac2a93310809fe52c3e2cf02950",
      "original_position" : 15,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 100007314,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171198211",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171199195"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171199195"
         }
      },
      "author_association" : "MEMBER",
      "body" : " Can you define a constant like `ONLY_REDUCE_CHANGE_OUTPUT=-1`?",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-02-28T10:23:14Z",
      "diff_hunk" : "@@ -111,22 +112,28 @@ Result CreateTransaction(const CWallet* wallet, const uint256& txid, const CCoin\n         return Result::INVALID_ADDRESS_OR_KEY;\n     }\n     const CWalletTx& wtx = it->second;\n+    if (reduce_output < -1 || reduce_output >= int64_t(wtx.tx->vout.size())) {\n+        errors.push_back(strprintf(\"Change output out of bounds [-1..%zu]\", wtx.tx->vout.size()-1));\n+        return Result::INVALID_PARAMETER;\n+    }\n \n     Result result = PreconditionChecks(wallet, wtx, errors);\n     if (result != Result::OK) {\n         return result;\n     }\n \n-    // figure out which output was change\n-    // if there was no change output or multiple change outputs, fail\n-    int nOutput = -1;\n-    for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n-        if (wallet->IsChange(wtx.tx->vout[i])) {\n-            if (nOutput != -1) {\n-                errors.push_back(\"Transaction has multiple change outputs\");\n-                return Result::WALLET_ERROR;\n+    int nOutput = reduce_output;\n+    if (nOutput == -1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171199195",
      "id" : 171199195,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTE5OTE5NQ==",
      "original_commit_id" : "624f27c4d33b241ba3863c8b69a4134207666960",
      "original_position" : 33,
      "path" : "src/wallet/feebumper.cpp",
      "position" : 33,
      "pull_request_review_id" : 100007314,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171199195",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171200319"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171200319"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why is this an error? Why not just pick the largest (or both)?",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-02-28T10:27:49Z",
      "diff_hunk" : "@@ -111,22 +112,28 @@ Result CreateTransaction(const CWallet* wallet, const uint256& txid, const CCoin\n         return Result::INVALID_ADDRESS_OR_KEY;\n     }\n     const CWalletTx& wtx = it->second;\n+    if (reduce_output < -1 || reduce_output >= int64_t(wtx.tx->vout.size())) {\n+        errors.push_back(strprintf(\"Change output out of bounds [-1..%zu]\", wtx.tx->vout.size()-1));\n+        return Result::INVALID_PARAMETER;\n+    }\n \n     Result result = PreconditionChecks(wallet, wtx, errors);\n     if (result != Result::OK) {\n         return result;\n     }\n \n-    // figure out which output was change\n-    // if there was no change output or multiple change outputs, fail\n-    int nOutput = -1;\n-    for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n-        if (wallet->IsChange(wtx.tx->vout[i])) {\n-            if (nOutput != -1) {\n-                errors.push_back(\"Transaction has multiple change outputs\");\n-                return Result::WALLET_ERROR;\n+    int nOutput = reduce_output;\n+    if (nOutput == -1) {\n+        // figure out which output was change\n+        // if there was no change output or multiple change outputs, fail\n+        for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n+            if (wallet->IsChange(wtx.tx->vout[i])) {\n+                if (nOutput != -1) {\n+                    errors.push_back(\"Transaction has multiple change outputs\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171200319",
      "id" : 171200319,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTIwMDMxOQ==",
      "original_commit_id" : "624f27c4d33b241ba3863c8b69a4134207666960",
      "original_position" : 39,
      "path" : "src/wallet/feebumper.cpp",
      "position" : 39,
      "pull_request_review_id" : 100007314,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171200319",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171210422"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171210422"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`reduce_output` or `reduceOutput`?",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-02-28T11:05:38Z",
      "diff_hunk" : "@@ -3347,6 +3348,8 @@ UniValue bumpfee(const JSONRPCRequest& request)\n             \"         \\\"UNSET\\\"\\n\"\n             \"         \\\"ECONOMICAL\\\"\\n\"\n             \"         \\\"CONSERVATIVE\\\"\\n\"\n+            \"     \\\"reduce_output\\\"     (numeric, optional) Increase the fee by reducing the output value of the output at\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171210422",
      "id" : 171210422,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTIxMDQyMg==",
      "original_commit_id" : "624f27c4d33b241ba3863c8b69a4134207666960",
      "original_position" : 14,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 100007314,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171210422",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "#12565 takes advantage of this in QT.",
      "created_at" : "2018-02-28T12:53:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-369230273",
      "id" : 369230273,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-02-28T12:53:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/369230273",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171452087"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171452087"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is beyond the scope of this PR (pre-existing behavior, and my code doesn't really fix it). You can do `?w=1`, e.g. https://github.com/bitcoin/bitcoin/pull/12096/files?w=1 which ignores whitespace-only changes.",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-03-01T02:58:48Z",
      "diff_hunk" : "@@ -111,22 +112,28 @@ Result CreateTransaction(const CWallet* wallet, const uint256& txid, const CCoin\n         return Result::INVALID_ADDRESS_OR_KEY;\n     }\n     const CWalletTx& wtx = it->second;\n+    if (reduce_output < -1 || reduce_output >= int64_t(wtx.tx->vout.size())) {\n+        errors.push_back(strprintf(\"Change output out of bounds [-1..%zu]\", wtx.tx->vout.size()-1));\n+        return Result::INVALID_PARAMETER;\n+    }\n \n     Result result = PreconditionChecks(wallet, wtx, errors);\n     if (result != Result::OK) {\n         return result;\n     }\n \n-    // figure out which output was change\n-    // if there was no change output or multiple change outputs, fail\n-    int nOutput = -1;\n-    for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n-        if (wallet->IsChange(wtx.tx->vout[i])) {\n-            if (nOutput != -1) {\n-                errors.push_back(\"Transaction has multiple change outputs\");\n-                return Result::WALLET_ERROR;\n+    int nOutput = reduce_output;\n+    if (nOutput == -1) {\n+        // figure out which output was change\n+        // if there was no change output or multiple change outputs, fail\n+        for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n+            if (wallet->IsChange(wtx.tx->vout[i])) {\n+                if (nOutput != -1) {\n+                    errors.push_back(\"Transaction has multiple change outputs\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171452087",
      "id" : 171452087,
      "in_reply_to_id" : 171200319,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTQ1MjA4Nw==",
      "original_commit_id" : "624f27c4d33b241ba3863c8b69a4134207666960",
      "original_position" : 39,
      "path" : "src/wallet/feebumper.cpp",
      "position" : 39,
      "pull_request_review_id" : 100304792,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171452087",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171452183"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171452183"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think the standard these days is to use snake case, even for new RPC commands. See e.g. `address_style` in `getrawtransaction` which was from a recent implementation.",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-03-01T02:59:40Z",
      "diff_hunk" : "@@ -3347,6 +3348,8 @@ UniValue bumpfee(const JSONRPCRequest& request)\n             \"         \\\"UNSET\\\"\\n\"\n             \"         \\\"ECONOMICAL\\\"\\n\"\n             \"         \\\"CONSERVATIVE\\\"\\n\"\n+            \"     \\\"reduce_output\\\"     (numeric, optional) Increase the fee by reducing the output value of the output at\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171452183",
      "id" : 171452183,
      "in_reply_to_id" : 171210422,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTQ1MjE4Mw==",
      "original_commit_id" : "624f27c4d33b241ba3863c8b69a4134207666960",
      "original_position" : 14,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 100304897,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171452183",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors Thanks! I fixed the `wallet_bumpfee` error in 765162c.",
      "created_at" : "2018-03-01T03:19:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-369461737",
      "id" : 369461737,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "updated_at" : "2018-03-01T03:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/369461737",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171491290"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171491290"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah, I didn't notice it was just a whitespace change.",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-03-01T08:40:43Z",
      "diff_hunk" : "@@ -111,22 +112,28 @@ Result CreateTransaction(const CWallet* wallet, const uint256& txid, const CCoin\n         return Result::INVALID_ADDRESS_OR_KEY;\n     }\n     const CWalletTx& wtx = it->second;\n+    if (reduce_output < -1 || reduce_output >= int64_t(wtx.tx->vout.size())) {\n+        errors.push_back(strprintf(\"Change output out of bounds [-1..%zu]\", wtx.tx->vout.size()-1));\n+        return Result::INVALID_PARAMETER;\n+    }\n \n     Result result = PreconditionChecks(wallet, wtx, errors);\n     if (result != Result::OK) {\n         return result;\n     }\n \n-    // figure out which output was change\n-    // if there was no change output or multiple change outputs, fail\n-    int nOutput = -1;\n-    for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n-        if (wallet->IsChange(wtx.tx->vout[i])) {\n-            if (nOutput != -1) {\n-                errors.push_back(\"Transaction has multiple change outputs\");\n-                return Result::WALLET_ERROR;\n+    int nOutput = reduce_output;\n+    if (nOutput == -1) {\n+        // figure out which output was change\n+        // if there was no change output or multiple change outputs, fail\n+        for (size_t i = 0; i < wtx.tx->vout.size(); ++i) {\n+            if (wallet->IsChange(wtx.tx->vout[i])) {\n+                if (nOutput != -1) {\n+                    errors.push_back(\"Transaction has multiple change outputs\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171491290",
      "id" : 171491290,
      "in_reply_to_id" : 171200319,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTQ5MTI5MA==",
      "original_commit_id" : "624f27c4d33b241ba3863c8b69a4134207666960",
      "original_position" : 39,
      "path" : "src/wallet/feebumper.cpp",
      "position" : 39,
      "pull_request_review_id" : 100349616,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/171491290",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r173631574"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173631574"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@kallewoof Just change the error message (and prevent -1 from being passed in from the user)",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-03-10T19:05:32Z",
      "diff_hunk" : "@@ -111,22 +112,28 @@ Result CreateTransaction(const CWallet* wallet, const uint256& txid, const CCoin\n         return Result::INVALID_ADDRESS_OR_KEY;\n     }\n     const CWalletTx& wtx = it->second;\n+    if (reduce_output < -1 || reduce_output >= int64_t(wtx.tx->vout.size())) {\n+        errors.push_back(strprintf(\"Change output out of bounds [-1..%zu]\", wtx.tx->vout.size()-1));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r173631574",
      "id" : 173631574,
      "in_reply_to_id" : 170672694,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MzYzMTU3NA==",
      "original_commit_id" : "cf02bcb3edb5aac2a93310809fe52c3e2cf02950",
      "original_position" : 15,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 102859984,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173631574",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r173680193"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173680193"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@luke-jr I can't distinguish from user passing -1 and from the default (which means 'auto-pick' like the current behavior). I can change the message to say `0..`, though. And it already prevents user from passing -1 in the RPC command itself.",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-03-12T01:38:26Z",
      "diff_hunk" : "@@ -111,22 +112,28 @@ Result CreateTransaction(const CWallet* wallet, const uint256& txid, const CCoin\n         return Result::INVALID_ADDRESS_OR_KEY;\n     }\n     const CWalletTx& wtx = it->second;\n+    if (reduce_output < -1 || reduce_output >= int64_t(wtx.tx->vout.size())) {\n+        errors.push_back(strprintf(\"Change output out of bounds [-1..%zu]\", wtx.tx->vout.size()-1));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r173680193",
      "id" : 173680193,
      "in_reply_to_id" : 170672694,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MzY4MDE5Mw==",
      "original_commit_id" : "cf02bcb3edb5aac2a93310809fe52c3e2cf02950",
      "original_position" : 15,
      "path" : "src/wallet/feebumper.cpp",
      "position" : null,
      "pull_request_review_id" : 102907142,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173680193",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--5d09a71f8925f3f132321140b44b946d-->The last travis run for this pull request was 89 days ago and is thus outdated. To trigger a fresh travis build, this pull request should be closed and re-opened.",
      "created_at" : "2018-07-22T23:50:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-406906795",
      "id" : 406906795,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNjkwNjc5NQ==",
      "updated_at" : "2018-07-22T23:50:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/406906795",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15157](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15157.html) (rpc: Bumpfee units change, satoshis to BTC by benthecarman)\n* [#15114](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15114.html) (Qt: Replace remaining 0 with nullptr by Empact)\n* [#15112](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15112.html) (build: Optionally enable -Wzero-as-null-pointer-constant by Empact)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-10-20T11:13:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-431571223",
      "id" : 431571223,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMTU3MTIyMw==",
      "updated_at" : "2019-01-14T12:37:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/431571223",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r232484267"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232484267"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe add a `/* reduce_output */` comment for this new param too",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-11-11T11:35:43Z",
      "diff_hunk" : "@@ -491,7 +491,7 @@ bool WalletModel::bumpFee(uint256 hash)\n     CAmount old_fee;\n     CAmount new_fee;\n     CMutableTransaction mtx;\n-    if (!m_wallet->createBumpTransaction(hash, coin_control, 0 /* totalFee */, errors, old_fee, new_fee, mtx)) {\n+    if (!m_wallet->createBumpTransaction(hash, coin_control, 0 /* totalFee */, -1, errors, old_fee, new_fee, mtx)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r232484267",
      "id" : 232484267,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjQ4NDI2Nw==",
      "original_commit_id" : "f43fc28d78a196805a3d62453a19acfcc316bedf",
      "original_position" : 5,
      "path" : "src/qt/walletmodel.cpp",
      "position" : null,
      "pull_request_review_id" : 173694433,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232484267",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r232553473"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232553473"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "5b37cc17b4d71938be73d4791979aa36d430531a",
      "created_at" : "2018-11-12T07:23:39Z",
      "diff_hunk" : "@@ -491,7 +491,7 @@ bool WalletModel::bumpFee(uint256 hash)\n     CAmount old_fee;\n     CAmount new_fee;\n     CMutableTransaction mtx;\n-    if (!m_wallet->createBumpTransaction(hash, coin_control, 0 /* totalFee */, errors, old_fee, new_fee, mtx)) {\n+    if (!m_wallet->createBumpTransaction(hash, coin_control, 0 /* totalFee */, -1, errors, old_fee, new_fee, mtx)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#discussion_r232553473",
      "id" : 232553473,
      "in_reply_to_id" : 232484267,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjU1MzQ3Mw==",
      "original_commit_id" : "f43fc28d78a196805a3d62453a19acfcc316bedf",
      "original_position" : 5,
      "path" : "src/qt/walletmodel.cpp",
      "position" : null,
      "pull_request_review_id" : 173773804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12096",
      "updated_at" : "2018-12-10T04:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232553473",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MeshCollider Thanks for the review! I updated commit description and added comment to `qt/walletmodel.cpp`.",
      "created_at" : "2018-11-12T07:25:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-437781855",
      "id" : 437781855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNzc4MTg1NQ==",
      "updated_at" : "2018-11-12T07:25:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/437781855",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2018-11-23T09:23:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-441189815",
      "id" : 441189815,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MTE4OTgxNQ==",
      "updated_at" : "2018-11-23T09:23:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/441189815",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2018-12-05T16:54:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-444558971",
      "id" : 444558971,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NDU1ODk3MQ==",
      "updated_at" : "2018-12-05T16:54:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/444558971",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-01-14T15:25:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-454043688",
      "id" : 454043688,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12096",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NDA0MzY4OA==",
      "updated_at" : "2019-01-14T15:25:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/454043688",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
