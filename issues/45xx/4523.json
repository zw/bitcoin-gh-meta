{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "Similarl to #4051 but I get a different debug info so I'm opening a new issue.\nLast time I shutdown bitcoind normally and now it runs but it get stuck after reading in data (which takes a while).  I can shut it down cleanly, but it gets stuck again upon restart.  \nShould I start with reindex next time? I don't want to do it just yet in case you need additional debug info.\n\n```\n $ uname -a\nLinux raspberrypi 3.12.22+ #691 PREEMPT Wed Jun 18 18:29:58 BST 2014 armv6l GNU/Linux\n$ cat /etc/debian_version\njessie/sid\n\n$ bitcoind getinfo\n{\n    \"version\" : 90200,\n    \"protocolversion\" : 70002,\n    \"blocks\" : 289110,\n    \"timeoffset\" : 0,\n    \"connections\" : 1,\n    \"proxy\" : \"\",\n    \"difficulty\" : 3815723798.81463003,\n    \"testnet\" : false,\n    \"relayfee\" : 0.00001000,\n    \"errors\" : \"\"\n}\n\n- gdb loading\nGNU gdb (GDB) 7.6.2 (Raspbian 7.6.2-1.1)\n...\nLoaded symbols for /lib/arm-linux-gnueabihf/libnss_dns.so.2\nReading symbols from /lib/arm-linux-gnueabihf/libresolv.so.2...Reading symbols from /usr/lib/debug/lib/arm-linux-gnueabihf/libresolv-2.19.so...done.\ndone.\nLoaded symbols for /lib/arm-linux-gnueabihf/libresolv.so.2\n0xb68ba84c in __pthread_cond_wait (cond=0xb7c6e5f8, mutex=0xb7c6e5e0)\n    at pthread_cond_wait.c:187\n187     pthread_cond_wait.c: No such file or directory.\n\n- backtrace\n\n#0  0xb68ba84c in __pthread_cond_wait (cond=0xb7c6e5f8, mutex=0xb7c6e5e0)\n    at pthread_cond_wait.c:187\n#1  0xb6dcd804 in boost::condition_variable::wait (this=0xb7c6e5e0, m=...)\n    at /usr/include/boost/thread/pthread/condition_variable.hpp:73\n#2  0xb6c11e28 in boost::thread::join_noexcept() ()\n   from /usr/lib/libboost_thread.so.1.53.0\n#3  0xb6d2f6d4 in join (this=0xb7c6e198)\n    at /usr/include/boost/thread/detail/thread.hpp:751\n#4  AppInit (argc=argc@entry=3, argv=0x0, argv@entry=0xbebe12b4)\n    at bitcoind.cpp:164\n#5  0xb6d26438 in main (argc=3, argv=0xbebe12b4) at bitcoind.cpp:182\n\n- threads\n  Id   Target Id         Frame\n  12   Thread 0xb65d3450 (LWP 2127) \"bitcoind\" 0xb68babd8 in __pthread_cond_timedwait (cond=0xb7c6e658, mutex=0xb7c6e640, abstime=0xb65d2de0)\n    at pthread_cond_timedwait.c:199\n  11   Thread 0xb5bff450 (LWP 2130) \"bitcoind\" 0xb6839064 in write ()\n    at ../sysdeps/unix/syscall-template.S:81\n  10   Thread 0xa1e94450 (LWP 2304) \"bitcoind\" 0xb6841164 in select ()\n    at ../sysdeps/unix/syscall-template.S:81\n  9    Thread 0xa1694450 (LWP 2305) \"bitcoind\" 0xb68babd8 in __pthread_cond_timedwait (cond=0xb20a4568, mutex=0xb20a4550, abstime=0xa1693cd0)\n    at pthread_cond_timedwait.c:199\n  8    Thread 0xa0e94450 (LWP 2306) \"bitcoind\" 0xb68bd830 in __lll_lock_wait (\n    futex=futex@entry=0xb6fc6cd0 <cs_main>, private=<optimized out>)\n    at ../ports/sysdeps/unix/sysv/linux/arm/nptl/lowlevellock.c:46\n  7    Thread 0xa0694450 (LWP 2307) \"bitcoind\" 0xb6ab127c in ?? ()\n   from /usr/lib/arm-linux-gnueabihf/libcrypto.so.1.0.0\n  6    Thread 0x9fe94450 (LWP 2308) \"bitcoind\" 0xb68babd8 in __pthread_cond_timedwait (cond=0xaefbcfb0, mutex=0xaefbcf98, abstime=0x9fe93da0)\n    at pthread_cond_timedwait.c:199\n  5    Thread 0x9f694450 (LWP 2311) \"bitcoind\"\n    0xb68ba84c in __pthread_cond_wait (cond=0x9f693da8, mutex=0xb1c264a8)\n    at pthread_cond_wait.c:187\n  4    Thread 0x9ee94450 (LWP 2312) \"bitcoind\" 0xb68ba84c in __pthread_cond_wait (cond=0x9ee93da8, mutex=0xb1c264a8) at pthread_cond_wait.c:187\n  3    Thread 0x9e694450 (LWP 2313) \"bitcoind\" 0xb68ba84c in __pthread_cond_wait (cond=0x9e693da8, mutex=0xb1c264a8) at pthread_cond_wait.c:187\n  2    Thread 0x9de94450 (LWP 2314) \"bitcoind\" 0xb6848404 in epoll_wait ()\n    at ../sysdeps/unix/syscall-template.S:81\n* 1    Thread 0xb675e000 (LWP 2126) \"bitcoind\" 0xb68ba84c in __pthread_cond_wait (cond=0xb7c6e5f8, mutex=0xb7c6e5e0) at pthread_cond_wait.c:187\n\n\n```\n",
   "closed_at" : "2015-10-27T11:02:13Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4523/comments",
   "created_at" : "2014-07-13T22:44:58Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4523/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/4523",
   "id" : 37750893,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "id" : 64585,
         "name" : "Bug",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4523/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 4523,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Stuck in futex(0xb71905fc, FUTEX_WAIT_PRIVATE, 1, NULL",
   "updated_at" : "2015-10-27T11:02:13Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4523",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/10137?v=4",
      "events_url" : "https://api.github.com/users/ghost/events{/privacy}",
      "followers_url" : "https://api.github.com/users/ghost/followers",
      "following_url" : "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url" : "https://api.github.com/users/ghost/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/ghost",
      "id" : 10137,
      "login" : "ghost",
      "organizations_url" : "https://api.github.com/users/ghost/orgs",
      "received_events_url" : "https://api.github.com/users/ghost/received_events",
      "repos_url" : "https://api.github.com/users/ghost/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/ghost/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/ghost"
   }
}
