[
   {
      "body" : "Nice catch",
      "created_at" : "2014-07-17T10:47:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-49291348",
      "id" : 49291348,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-07-17T10:47:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49291348",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4547_dcd7ef782bd8105c3427f932206e33fa07ddeded/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-07-20T07:56:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-49539880",
      "id" : 49539880,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-07-20T07:56:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49539880",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "This partially mitigates #1157, by at least limiting the time each transaction can be delayed to 2 minutes per peer.",
      "created_at" : "2014-07-26T17:57:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-50243433",
      "id" : 50243433,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-07-26T17:57:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50243433",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1047859?v=3",
         "events_url" : "https://api.github.com/users/kazcw/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kazcw/followers",
         "following_url" : "https://api.github.com/users/kazcw/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kazcw/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kazcw",
         "id" : 1047859,
         "login" : "kazcw",
         "organizations_url" : "https://api.github.com/users/kazcw/orgs",
         "received_events_url" : "https://api.github.com/users/kazcw/received_events",
         "repos_url" : "https://api.github.com/users/kazcw/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kazcw/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kazcw"
      }
   },
   {
      "body" : "Untested ACK.",
      "created_at" : "2014-07-27T14:46:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-50266195",
      "id" : 50266195,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-07-27T14:46:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50266195",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "ut ACK\r\n",
      "created_at" : "2014-07-29T16:47:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-50503923",
      "id" : 50503923,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-07-29T16:47:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50503923",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4547#discussion_r16970767"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4547"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16970767"
         }
      },
      "body" : "mruset?",
      "commit_id" : "dcd7ef782bd8105c3427f932206e33fa07ddeded",
      "created_at" : "2014-09-02T05:35:18Z",
      "diff_hunk" : "@@ -286,6 +286,7 @@ class CNode\n     mruset<CInv> setInventoryKnown;\n     std::vector<CInv> vInventoryToSend;\n     CCriticalSection cs_inventory;\n+    std::set<uint256> setAskFor;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#discussion_r16970767",
      "id" : 16970767,
      "original_commit_id" : "dcd7ef782bd8105c3427f932206e33fa07ddeded",
      "original_position" : 4,
      "path" : "src/net.h",
      "position" : 4,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4547",
      "updated_at" : "2014-09-02T05:35:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16970767",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "Indeed it likely should be an mruset, however it should grow with mapAskFor, which should be a lrumultimap...so maybe that can be a separate pull.",
      "created_at" : "2014-09-02T06:18:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-54113349",
      "id" : 54113349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-09-02T06:18:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54113349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "ut ACK.",
      "created_at" : "2014-09-02T06:20:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-54113430",
      "id" : 54113430,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-09-02T06:20:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54113430",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "> Indeed it likely should be an mruset, however it should grow with mapAskFor, which should be a lrumultimap...so maybe that can be a separate pull.\r\n\r\n~~Does it need to be a multimap at all? We already make sure that the key (time) is monotonically increasing in AskFor.~~ (edit: yes, it does, nNow is monotonically increasing but nRequestTime doesn't need to be)\r\n\r\nACK after limiting the size of the set. Let's not add any more unbounded structures to CNode.\r\n\r\n**Edit:** limiting doesn't need a mruset or limitedset at all. Something like\r\n```\r\n    if (mapAskFor.size() > MAPASKFOR_MAX_SZ)\r\n        return;\r\n```\r\nat the beginning of AskFor would do.\r\n",
      "created_at" : "2014-09-02T08:02:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-54120364",
      "id" : 54120364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-09-02T11:08:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54120364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I'm not sure how much this will really help though. It avoids 'inv with duplicates' from one node but It's easy to pretend to be multiple nodes by reconnecting, or having multiple connections open even from the same host. I think we need a global limit as well, something like\r\n```\r\n    // Don't plan too far into the future\r\n    if (nRequestTime > nNow + 10 * 60 * 1000000)\r\n        return;\r\n```\r\n",
      "created_at" : "2014-09-02T08:10:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-54120950",
      "id" : 54120950,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-09-02T08:10:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54120950",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj I agree, but also, perhaps the 2 minutes is a little high? If we change this to 1 minute this might also help.\r\n\r\nOr better still, why not make the node determine the ideal number instead of hardcoding it?",
      "created_at" : "2014-09-03T02:39:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-54245379",
      "id" : 54245379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-09-03T02:57:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54245379",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "See also #4831.\r\n\r\nNot sure if the 2 minutes is too much, if you have a way to better determine the timeout that is welcome, but there is not really a hurry to have a transaction quickly. The smaller the timeout, the larger the chance that the first node isn't really defunct but just having lag, and that we'll receive it from two peers.\r\n",
      "created_at" : "2014-09-04T10:09:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-54445748",
      "id" : 54445748,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-09-04T10:09:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54445748",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj How about keeping track of the average delay that each node takes when serving txs, and then when a tx comes in, as well as requesting it immediately from the first node to advertise it, it also deduces how long it will take to arrive from that node. After 10 seconds, it assesses which nodes also can provide it, and if any can provide it significantly sooner than the first node that advertised it, it requests it from that node instead.",
      "created_at" : "2014-09-04T10:37:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-54449934",
      "id" : 54449934,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-09-04T10:37:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54449934",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "@rebroad Possible, but I don't want to make this overly complex. Mind that retries are *extremely* rare at 2 minutes. I've only had a few in a day on a normal node. By far most nodes simply send the tx when requested, even if sometimes they take their time.\r\n\r\nI've also tried with a timeout of 30 seconds for a while, and retries were much more numerous. In general, the first node would still send the transaction anyway, as well as the other nodes who are asked. 10 seconds would be crazy. \r\n\r\nThe P2P network was never designed to be a low-latency network, and there is also not really a point in making it one. If anything, high-latency networks lend themselves better to privacy measures.\r\n\r\nWith the changes in #4831 all the pathological cases are avoided. A node announcing transactions then disconnecting, for example, will have no effect. The retry will always go to a node that is still connected and that has announced the transaction. This makes sure that second retries are even more infrequent.\r\n\r\nWe could add code to keep track of a running average of getdata response times, of course, and see from there.",
      "created_at" : "2014-09-04T11:13:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-54454801",
      "id" : 54454801,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-09-04T12:11:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54454801",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj No, I meant 10 seconds before assessing which would be the best node to request it from, not to perform the actual request (unless the currently requested node is known to take on average longer than the time it would take to request it from a different node).",
      "created_at" : "2014-09-04T15:27:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-54494663",
      "id" : 54494663,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-09-05T02:15:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54494663",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "Meta:  The following note was actually intended for another @rebroad PR, to which @gmaxwell replied, where there was another \"10 sec vs. 2 min\" debate.  I forgot the PR number.\r\n\r\n_Speaking generally_, this debate sometimes seems to illustrate linear thinking with regards to peer interactions.  In particular, I think two techniques are useful in byzantine networks:\r\n\r\n1. Get impatient.  When a local node requests something of a remote, and either (a) it does not receive a response after a short while, or (b) the remote responds at a punishingly slow trickle, the local node should notice this poor behavior and make the same query of another node.  As such, I'm a bit sympathetic to some of @rebroad 's goals.\r\n\r\n2. Go parallel & redundant.  Psychologically, engineers are resistant to this sort of solution, but a simple and effective approach may be to issue the same query in parallel, and discard useless or slow results.  Yes, this increases traffic on the network, but by a quantifiable factor of 2 or 3.\r\n\r\n10 seconds is too fast, 2 minutes is too slow.  But I prefer better solutions to picking better magic numbers :) ",
      "created_at" : "2014-09-04T16:59:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-54509956",
      "id" : 54509956,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-09-04T17:01:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54509956",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik By waiting only 10 seconds, in my experience, you'll have received an inv from >50% of currently connected nodes. This is surely more than enough time to select the fastest peer to send the getdata request to; and certainly an improvement on the current implentation (i.e. added benefit with no disadvantages). \r\n\r\nI.e. the \"10 seconds\" refers to the \"short while\" you mention. It's not the same delay (delay, not size of delay) as the delay used before requesting the tx from another peer.",
      "created_at" : "2014-09-05T02:18:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-54574200",
      "id" : 54574200,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-09-05T02:21:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54574200",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "When reasoning about this problem you cannot rely solely on today's current average behavior.\r\n",
      "created_at" : "2014-09-05T03:49:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-54582088",
      "id" : 54582088,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-09-05T03:49:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54582088",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik Yes, I agree that the 10 seconds would ideally not be hardcoded either. But it is a better hardcoding than the current hardcoding, but as a continuous improvement, this hardcoding would also be removed. What would you recommend replacing the hardcoded 10 second wait with?",
      "created_at" : "2014-09-05T04:15:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-54583231",
      "id" : 54583231,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-09-05T04:16:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54583231",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "Closing in favor of #4831.",
      "created_at" : "2014-09-18T10:11:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4547#issuecomment-56019582",
      "id" : 56019582,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4547",
      "updated_at" : "2014-09-18T10:11:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56019582",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
