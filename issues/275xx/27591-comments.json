[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/27591).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [mononaut](https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1538391444), [Sjors](https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1538451521), [luke-jr](https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1604530634), [kevkevinpal](https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1772027440), [kristapsk](https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1836676257) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28848](https://github.com/bitcoin/bitcoin/pull/28848) (bugfix, Change up submitpackage results to return results for all transactions by instagibbs)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-05-07T19:44:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1537525541",
      "id" : 1537525541,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27591",
      "node_id" : "IC_kwDOABII585bpMcl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1537525541/reactions"
      },
      "updated_at" : "2023-12-01T19:45:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1537525541",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1187089387"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187089387"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is there still a reason with recent univalue to use potentially narrowing casts? You could try no cast or a w-narrowing one (with `{}`)?",
      "commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "created_at" : "2023-05-08T06:55:02Z",
      "diff_hunk" : "@@ -282,7 +285,8 @@ static void entryToJSON(const CTxMemPool& pool, UniValue& info, const CTxMemPool\n {\n     AssertLockHeld(pool.cs);\n \n-    info.pushKV(\"vsize\", (int)e.GetTxSize());\n+    info.pushKV(\"vsize\", (int)GetVirtualTransactionSize(e.GetTx(), 0, 0));\n+    info.pushKV(\"mempool_vsize\", (int)e.GetTxSize());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1187089387",
      "id" : 1187089387,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GwYvr",
      "original_commit_id" : "60bde2dac05bd44b224d6861f6083096c298a2dc",
      "original_line" : 289,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1416224072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187089387/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T06:57:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187089387",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1187091583"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187091583"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is there a setting to affect this value? If yes, does it make sense to mention the setting's key?",
      "commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "created_at" : "2023-05-08T06:57:45Z",
      "diff_hunk" : "@@ -132,6 +132,7 @@ static RPCHelpMan testmempoolaccept()\n                     {RPCResult::Type::BOOL, \"allowed\", /*optional=*/true, \"Whether this tx would be accepted to the mempool and pass client-specified maxfeerate. \"\n                                                        \"If not present, the tx was not fully validated due to a failure in another tx in the list.\"},\n                     {RPCResult::Type::NUM, \"vsize\", /*optional=*/true, \"Virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted (only present when 'allowed' is true)\"},\n+                    {RPCResult::Type::NUM, \"mempool_vsize\", /*optional=*/true, \"Sigop-adjusted virtual transaction size used by mempool and mining.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1187091583",
      "id" : 1187091583,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GwZR_",
      "original_commit_id" : "60bde2dac05bd44b224d6861f6083096c298a2dc",
      "original_line" : 135,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1416224072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187091583/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T06:57:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187091583",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Concept ACK",
      "created_at" : "2023-05-08T13:48:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1538391444",
      "id" : 1538391444,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27591",
      "node_id" : "IC_kwDOABII585bsf2U",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1538391444/reactions"
      },
      "updated_at" : "2023-05-08T13:48:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1538391444",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/83316221?v=4",
         "events_url" : "https://api.github.com/users/mononaut/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mononaut/followers",
         "following_url" : "https://api.github.com/users/mononaut/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mononaut/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mononaut",
         "id" : 83316221,
         "login" : "mononaut",
         "node_id" : "MDQ6VXNlcjgzMzE2MjIx",
         "organizations_url" : "https://api.github.com/users/mononaut/orgs",
         "received_events_url" : "https://api.github.com/users/mononaut/received_events",
         "repos_url" : "https://api.github.com/users/mononaut/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mononaut/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mononaut/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mononaut"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1187505606"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187505606"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I would call this `adjusted_vsize`. Or `vvsize` :-P",
      "commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "created_at" : "2023-05-08T14:18:46Z",
      "diff_hunk" : "@@ -132,6 +132,7 @@ static RPCHelpMan testmempoolaccept()\n                     {RPCResult::Type::BOOL, \"allowed\", /*optional=*/true, \"Whether this tx would be accepted to the mempool and pass client-specified maxfeerate. \"\n                                                        \"If not present, the tx was not fully validated due to a failure in another tx in the list.\"},\n                     {RPCResult::Type::NUM, \"vsize\", /*optional=*/true, \"Virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted (only present when 'allowed' is true)\"},\n+                    {RPCResult::Type::NUM, \"mempool_vsize\", /*optional=*/true, \"Sigop-adjusted virtual transaction size used by mempool and mining.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1187505606",
      "id" : 1187505606,
      "in_reply_to_id" : 1187091583,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Gx-XG",
      "original_commit_id" : "60bde2dac05bd44b224d6861f6083096c298a2dc",
      "original_line" : 135,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1416899470,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187505606/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-08T15:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1187505606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK on clarifying and returning both variants.\r\n\r\nIt would useful to peruse a few other projects to see how they use `getmempoolentry` and `getrawmempool`, to determine if this is a breaking change (in practice).",
      "created_at" : "2023-05-08T14:24:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1538451521",
      "id" : 1538451521,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27591",
      "node_id" : "IC_kwDOABII585bsuhB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1538451521/reactions"
      },
      "updated_at" : "2023-05-08T14:24:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1538451521",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, but should be split into two commits.",
      "created_at" : "2023-06-23T16:38:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1604530634",
      "id" : 1604530634,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27591",
      "node_id" : "IC_kwDOABII585fozHK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1604530634/reactions"
      },
      "updated_at" : "2023-06-23T16:38:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1604530634",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "On further thought, it might make more sense to correct the description and maybe add a `vsize_bip141` field. Consensus only deals with `weight` anyway, so vsize doesn't really exist outside policy (and BIP141).",
      "created_at" : "2023-08-24T22:41:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1692506723",
      "id" : 1692506723,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27591",
      "node_id" : "IC_kwDOABII585k4Zpj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1692506723/reactions"
      },
      "updated_at" : "2023-08-24T22:41:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1692506723",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1305692521"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305692521"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added mention of -bytespersigop",
      "commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "created_at" : "2023-08-25T13:53:32Z",
      "diff_hunk" : "@@ -132,6 +132,7 @@ static RPCHelpMan testmempoolaccept()\n                     {RPCResult::Type::BOOL, \"allowed\", /*optional=*/true, \"Whether this tx would be accepted to the mempool and pass client-specified maxfeerate. \"\n                                                        \"If not present, the tx was not fully validated due to a failure in another tx in the list.\"},\n                     {RPCResult::Type::NUM, \"vsize\", /*optional=*/true, \"Virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted (only present when 'allowed' is true)\"},\n+                    {RPCResult::Type::NUM, \"mempool_vsize\", /*optional=*/true, \"Sigop-adjusted virtual transaction size used by mempool and mining.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1305692521",
      "id" : 1305692521,
      "in_reply_to_id" : 1187091583,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585N00lp",
      "original_commit_id" : "60bde2dac05bd44b224d6861f6083096c298a2dc",
      "original_line" : 135,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1595781886,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305692521/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-25T13:58:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305692521",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1305695805"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305695805"
         }
      },
      "author_association" : "MEMBER",
      "body" : "removed",
      "commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "created_at" : "2023-08-25T13:56:14Z",
      "diff_hunk" : "@@ -282,7 +285,8 @@ static void entryToJSON(const CTxMemPool& pool, UniValue& info, const CTxMemPool\n {\n     AssertLockHeld(pool.cs);\n \n-    info.pushKV(\"vsize\", (int)e.GetTxSize());\n+    info.pushKV(\"vsize\", (int)GetVirtualTransactionSize(e.GetTx(), 0, 0));\n+    info.pushKV(\"mempool_vsize\", (int)e.GetTxSize());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1305695805",
      "id" : 1305695805,
      "in_reply_to_id" : 1187089387,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585N01Y9",
      "original_commit_id" : "60bde2dac05bd44b224d6861f6083096c298a2dc",
      "original_line" : 289,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1595781886,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305695805/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-25T13:58:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305695805",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> On further thought, it might make more sense to correct the description and maybe add a vsize_bip141 field.\r\n\r\nMakes sense to me, changed. Also means no changes to the existing field apart from documentation.\r\n\r\n> Concept ACK, but should be split into two commits.\r\n\r\nDid this, one editing the doc and another to add the new field\r\n\r\nAlso rebased since it's been a few months.",
      "created_at" : "2023-08-25T13:57:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1693403410",
      "id" : 1693403410,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27591",
      "node_id" : "IC_kwDOABII585k70kS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1693403410/reactions"
      },
      "updated_at" : "2023-08-25T13:57:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1693403410",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1307754356"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1307754356"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think we should just define \"virtual size\" to consider bytespersigop policy in general. (But the difficulty calculating it may be an issue)",
      "commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "created_at" : "2023-08-28T18:14:39Z",
      "diff_hunk" : "@@ -130,7 +130,9 @@ static RPCHelpMan testmempoolaccept()\n                     {RPCResult::Type::STR, \"package-error\", /*optional=*/true, \"Package validation error, if any (only possible if rawtxs had more than 1 transaction).\"},\n                     {RPCResult::Type::BOOL, \"allowed\", /*optional=*/true, \"Whether this tx would be accepted to the mempool and pass client-specified maxfeerate. \"\n                                                        \"If not present, the tx was not fully validated due to a failure in another tx in the list.\"},\n-                    {RPCResult::Type::NUM, \"vsize\", /*optional=*/true, \"Virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted (only present when 'allowed' is true)\"},\n+                    {RPCResult::Type::NUM, \"vsize\", /*optional=*/true, \"Maximum of sigop-adjusted size (-bytespersigop) and virtual transaction size as defined in BIP 141.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1307754356",
      "id" : 1307754356,
      "line" : 133,
      "node_id" : "PRRC_kwDOABII585N8r90",
      "original_commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "original_line" : 133,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 5,
      "pull_request_review_id" : 1598805057,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1307754356/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-28T18:14:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1307754356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1308478933"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308478933"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Are you suggesting we add a doc/policy/virtual_size.md?",
      "commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "created_at" : "2023-08-29T09:23:39Z",
      "diff_hunk" : "@@ -130,7 +130,9 @@ static RPCHelpMan testmempoolaccept()\n                     {RPCResult::Type::STR, \"package-error\", /*optional=*/true, \"Package validation error, if any (only possible if rawtxs had more than 1 transaction).\"},\n                     {RPCResult::Type::BOOL, \"allowed\", /*optional=*/true, \"Whether this tx would be accepted to the mempool and pass client-specified maxfeerate. \"\n                                                        \"If not present, the tx was not fully validated due to a failure in another tx in the list.\"},\n-                    {RPCResult::Type::NUM, \"vsize\", /*optional=*/true, \"Virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted (only present when 'allowed' is true)\"},\n+                    {RPCResult::Type::NUM, \"vsize\", /*optional=*/true, \"Maximum of sigop-adjusted size (-bytespersigop) and virtual transaction size as defined in BIP 141.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1308478933",
      "id" : 1308478933,
      "in_reply_to_id" : 1307754356,
      "line" : 133,
      "node_id" : "PRRC_kwDOABII585N_c3V",
      "original_commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "original_line" : 133,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 5,
      "pull_request_review_id" : 1599910554,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308478933/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-29T09:23:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308478933",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ack.\r\n\r\nKinda unfortunate that the \"vsize\" field is still kinda broken IMO, only it's backwards compatible.\r\n\r\nIn fact, arguably since you changed the documentation, it is now also a breaking change in the API spec. And arguably the field not being implemented as it's documented could be seen as a bug and fixing the field to actually be what it says to be is a bugfix.\r\n\r\nPersonally I'd change the semantics of the vsize field to keep it \"as per 141\" and add something else like \"vsize_sigops\" for the alternative weird mempool-specific value.",
      "created_at" : "2023-09-06T19:13:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1708947031",
      "id" : 1708947031,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27591",
      "node_id" : "IC_kwDOABII585l3HZX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1708947031/reactions"
      },
      "updated_at" : "2023-09-06T19:13:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1708947031",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/853468?v=4",
         "events_url" : "https://api.github.com/users/stevenroose/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stevenroose/followers",
         "following_url" : "https://api.github.com/users/stevenroose/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stevenroose/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stevenroose",
         "id" : 853468,
         "login" : "stevenroose",
         "node_id" : "MDQ6VXNlcjg1MzQ2OA==",
         "organizations_url" : "https://api.github.com/users/stevenroose/orgs",
         "received_events_url" : "https://api.github.com/users/stevenroose/received_events",
         "repos_url" : "https://api.github.com/users/stevenroose/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stevenroose/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stevenroose/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stevenroose"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I disagree that the sigop-adjusted value is a \"weird mempool-specific value\"; in fact I'd contend it's the only value anyone should ever use (which is why it got dropped in in the first place). It is our best estimate for how much effective block space a transaction uses, rescaled to 1000000, for purposes of block building, fee estimation, feerate-based policies one would want to enforce, ...\r\n\r\nNow, it's also not perfect. Sadly it can only be computed in contexts where the input is known, and it is subject to a fudge factor (20  vbytes / sigop) that'll likely be off in case a very large number of transactions would be high sigop. So I see why it's annoying to define precisely and work with, but that doesn't change the fact that uninformed users should use the adjusted value if it is available.",
      "created_at" : "2023-09-06T19:20:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1708956844",
      "id" : 1708956844,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27591",
      "node_id" : "IC_kwDOABII585l3Jys",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1708956844/reactions"
      },
      "updated_at" : "2023-09-06T19:50:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1708956844",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I suppose this is only relevant for pre-taproot (pre-segwit?) sigops, right? Because tapscript introduces this \"validation weight/budget\" concept? So I guess eventually the confusion will mostly disappear :)",
      "created_at" : "2023-09-07T16:50:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1710485218",
      "id" : 1710485218,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27591",
      "node_id" : "IC_kwDOABII585l8-7i",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1710485218/reactions"
      },
      "updated_at" : "2023-09-07T16:50:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1710485218",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/853468?v=4",
         "events_url" : "https://api.github.com/users/stevenroose/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stevenroose/followers",
         "following_url" : "https://api.github.com/users/stevenroose/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stevenroose/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stevenroose",
         "id" : 853468,
         "login" : "stevenroose",
         "node_id" : "MDQ6VXNlcjg1MzQ2OA==",
         "organizations_url" : "https://api.github.com/users/stevenroose/orgs",
         "received_events_url" : "https://api.github.com/users/stevenroose/received_events",
         "repos_url" : "https://api.github.com/users/stevenroose/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stevenroose/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stevenroose/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stevenroose"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK [9cf46b6](https://github.com/bitcoin/bitcoin/pull/27591/commits/9cf46b6a3f483281e94404d1a987d0f7386fe63d)\r\n\r\nI took a look at some places where we could add tests for `vsize_bip141` and made this commit [4ab1f14](https://github.com/kevkevinpal/bitcoin/pull/3/commits/4ab1f1416bdc5830c1b7328d1ce81620e358db40) \r\n\r\nfeel free to cherry commit or not use",
      "created_at" : "2023-10-20T03:39:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1772027440",
      "id" : 1772027440,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27591",
      "node_id" : "IC_kwDOABII585pnv4w",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1772027440/reactions"
      },
      "updated_at" : "2023-10-20T03:39:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1772027440",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15950706?v=4",
         "events_url" : "https://api.github.com/users/kevkevinpal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kevkevinpal/followers",
         "following_url" : "https://api.github.com/users/kevkevinpal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kevkevinpal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kevkevinpal",
         "id" : 15950706,
         "login" : "kevkevinpal",
         "node_id" : "MDQ6VXNlcjE1OTUwNzA2",
         "organizations_url" : "https://api.github.com/users/kevkevinpal/orgs",
         "received_events_url" : "https://api.github.com/users/kevkevinpal/received_events",
         "repos_url" : "https://api.github.com/users/kevkevinpal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kevkevinpal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kevkevinpal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kevkevinpal"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1376971061"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1376971061"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "PR description needs updating from \"mempool_vsize\"",
      "commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "created_at" : "2023-10-31T02:05:31Z",
      "diff_hunk" : "@@ -840,7 +845,8 @@ static RPCHelpMan submitpackage()\n                     {RPCResult::Type::OBJ, \"wtxid\", \"transaction wtxid\", {\n                         {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n                         {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n-                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::NUM, \"vsize\", \"Maximum of sigop-adjusted size (-bytespersigop) and virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::NUM, \"vsize_bip141\", \"Virtual transaction size as defined in BIP 141.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1376971061",
      "id" : 1376971061,
      "line" : 849,
      "node_id" : "PRRC_kwDOABII585SEuk1",
      "original_commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "original_line" : 849,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 43,
      "pull_request_review_id" : 1705324925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1376971061/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-31T02:44:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1376971061",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1376977939"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1376977939"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Perhaps doc/policy/feerates-and-vsize.md (or perhaps policy/mining-score.md) with the idea being to document how we prioritise txs for mining (namely via fee vs vsize), how vsize is calculated (weight scaled down by a factor of 4, then rounded up, and only sigop-adjusted when that is possible), and that for normal transactions sigop-adjustment doesn't actually change anything. Could also add that `-bytespersigop` allows tweaking how the sigop-adjustment works, and why that's important to do and can be a bad thing to change (bad fee estimation, suboptimal block templates).",
      "commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "created_at" : "2023-10-31T02:19:57Z",
      "diff_hunk" : "@@ -130,7 +130,9 @@ static RPCHelpMan testmempoolaccept()\n                     {RPCResult::Type::STR, \"package-error\", /*optional=*/true, \"Package validation error, if any (only possible if rawtxs had more than 1 transaction).\"},\n                     {RPCResult::Type::BOOL, \"allowed\", /*optional=*/true, \"Whether this tx would be accepted to the mempool and pass client-specified maxfeerate. \"\n                                                        \"If not present, the tx was not fully validated due to a failure in another tx in the list.\"},\n-                    {RPCResult::Type::NUM, \"vsize\", /*optional=*/true, \"Virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted (only present when 'allowed' is true)\"},\n+                    {RPCResult::Type::NUM, \"vsize\", /*optional=*/true, \"Maximum of sigop-adjusted size (-bytespersigop) and virtual transaction size as defined in BIP 141.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1376977939",
      "id" : 1376977939,
      "in_reply_to_id" : 1307754356,
      "line" : 133,
      "node_id" : "PRRC_kwDOABII585SEwQT",
      "original_commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "original_line" : 133,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 5,
      "pull_request_review_id" : 1705324925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1376977939/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-31T02:44:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1376977939",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1376980882"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1376980882"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think rather than adding `vsize_bip141` to mempool RPCs, it would be better to (a) document mempool vsize as being sigop-adjusted, and (b) document rawtransaction vsize as **not** being sigop-adjusted? (Or, even better, do the sigop adjustment in cases where we can -- getrawtransaction of txs in blocks could pull up the utxo being spent via rev*.dat and calculate the sigop adjustment?)\r\n\r\nCould be sensible to add \"sigopsize\" for the cases where we have a sigop count -- in that case vsize is simply max(floor((weight+3)/4), sigopsize), and the presence of a sigopsize with the exact same value as the weird vsize might be mostly self-explanatory as to what's going on. (And for the normal case where the weight dominates, it actually shows why the sigop adjustment isn't relevant)",
      "commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "created_at" : "2023-10-31T02:25:40Z",
      "diff_hunk" : "@@ -252,7 +255,8 @@ static RPCHelpMan testmempoolaccept()\n static std::vector<RPCResult> MempoolEntryDescription()\n {\n     return {\n-        RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},\n+        RPCResult{RPCResult::Type::NUM, \"vsize\", \"maximum of sigop-adjusted size (-bytespersigop) and virtual transaction size as defined in BIP 141.\"},\n+        RPCResult{RPCResult::Type::NUM, \"vsize_bip141\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1376980882",
      "id" : 1376980882,
      "line" : 259,
      "node_id" : "PRRC_kwDOABII585SEw-S",
      "original_commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "original_line" : 259,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 25,
      "pull_request_review_id" : 1705324925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1376980882/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-31T02:44:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1376980882",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1378636536"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378636536"
         }
      },
      "author_association" : "MEMBER",
      "body" : "IIUC the suggestion is:\r\n- Add docs for where vsize is sigop-adjusted and where it isn't.\r\n- Add some doc/policy/?.md describing feerate, vsize, mining score\r\n- Add an optional \"sigopsize\" result for `getrawtransaction` and the mempool RPCs when we're able to provide it\r\n\r\nWill work on this",
      "commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "created_at" : "2023-11-01T10:38:17Z",
      "diff_hunk" : "@@ -252,7 +255,8 @@ static RPCHelpMan testmempoolaccept()\n static std::vector<RPCResult> MempoolEntryDescription()\n {\n     return {\n-        RPCResult{RPCResult::Type::NUM, \"vsize\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},\n+        RPCResult{RPCResult::Type::NUM, \"vsize\", \"maximum of sigop-adjusted size (-bytespersigop) and virtual transaction size as defined in BIP 141.\"},\n+        RPCResult{RPCResult::Type::NUM, \"vsize_bip141\", \"virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#discussion_r1378636536",
      "id" : 1378636536,
      "in_reply_to_id" : 1376980882,
      "line" : 259,
      "node_id" : "PRRC_kwDOABII585SLFL4",
      "original_commit_id" : "9cf46b6a3f483281e94404d1a987d0f7386fe63d",
      "original_line" : 259,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 25,
      "pull_request_review_id" : 1707953492,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378636536/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-01T10:38:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378636536",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-12-01T19:06:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1836632061",
      "id" : 1836632061,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27591",
      "node_id" : "IC_kwDOABII585teMf9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1836632061/reactions"
      },
      "updated_at" : "2023-12-01T19:06:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1836632061",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2023-12-01T19:45:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27591#issuecomment-1836676257",
      "id" : 1836676257,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27591",
      "node_id" : "IC_kwDOABII585teXSh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1836676257/reactions"
      },
      "updated_at" : "2023-12-01T19:45:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1836676257",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   }
]
