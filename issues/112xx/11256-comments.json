[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "No test affected Ã°ÂÂÂ care to improve by asserting the new field in the relevant RPC's Ã°ÂÂÂ?",
      "created_at" : "2017-09-06T16:16:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11256#issuecomment-327535872",
      "id" : 327535872,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11256",
      "updated_at" : "2017-09-06T16:16:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/327535872",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Concept ACK",
      "created_at" : "2017-09-06T17:50:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11256#issuecomment-327562103",
      "id" : 327562103,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11256",
      "updated_at" : "2017-09-06T17:50:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/327562103",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I guess you need to update the documentation as well.",
      "created_at" : "2017-09-06T17:59:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11256#issuecomment-327564706",
      "id" : 327564706,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11256",
      "updated_at" : "2017-09-06T17:59:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/327564706",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tests are failing.\r\ntxid2 and txid3 work as expected.\r\ntxid1 fails on both my test and https://github.com/bitcoin/bitcoin/pull/11203 (add wtxid to mempool entry output).\r\n\r\nDo not merge as is.",
      "created_at" : "2017-09-07T01:18:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11256#issuecomment-327655102",
      "id" : 327655102,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11256",
      "updated_at" : "2017-09-07T01:19:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/327655102",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7999704?v=4",
         "events_url" : "https://api.github.com/users/esotericnonsense/events{/privacy}",
         "followers_url" : "https://api.github.com/users/esotericnonsense/followers",
         "following_url" : "https://api.github.com/users/esotericnonsense/following{/other_user}",
         "gists_url" : "https://api.github.com/users/esotericnonsense/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/esotericnonsense",
         "id" : 7999704,
         "login" : "esotericnonsense",
         "organizations_url" : "https://api.github.com/users/esotericnonsense/orgs",
         "received_events_url" : "https://api.github.com/users/esotericnonsense/received_events",
         "repos_url" : "https://api.github.com/users/esotericnonsense/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/esotericnonsense/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/esotericnonsense/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/esotericnonsense"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "txid1 is failing because at that point \"tx\" is actually referring to the input to txid1, not the transaction for txid1. It works fine for me if I add\r\n\r\n`         tx = FromHex(CTransaction(), self.nodes[0].gettransaction(txid1)['hex'])\r\n`\r\n\r\nprior to the assert_equal lines (and uncomment them obviously).",
      "created_at" : "2017-09-08T06:18:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11256#issuecomment-328009764",
      "id" : 328009764,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11256",
      "updated_at" : "2017-09-08T06:18:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/328009764",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Doh. You're absolutely right. Fixed.\r\n\r\nThe final commit 'Refactor segwit 3-tx-chain' changes all references to 'tx' to 'tx/tx1/tx2/tx3' in order to clarify that. It has a large diff and can be dropped if necessary (only affects code style).\r\n\r\nI have also rebased on master at 3255d63.\r\n\r\nShould be good to go now.",
      "created_at" : "2017-09-08T19:30:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11256#issuecomment-328193884",
      "id" : 328193884,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11256",
      "updated_at" : "2017-09-08T19:31:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/328193884",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7999704?v=4",
         "events_url" : "https://api.github.com/users/esotericnonsense/events{/privacy}",
         "followers_url" : "https://api.github.com/users/esotericnonsense/followers",
         "following_url" : "https://api.github.com/users/esotericnonsense/following{/other_user}",
         "gists_url" : "https://api.github.com/users/esotericnonsense/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/esotericnonsense",
         "id" : 7999704,
         "login" : "esotericnonsense",
         "organizations_url" : "https://api.github.com/users/esotericnonsense/orgs",
         "received_events_url" : "https://api.github.com/users/esotericnonsense/received_events",
         "repos_url" : "https://api.github.com/users/esotericnonsense/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/esotericnonsense/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/esotericnonsense/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/esotericnonsense"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, but it turns out GetTxSize is not actually what we claim it is.  See the calculation of `GetVirtualTransactionSize` which potentially includes number of sig ops in the calculation.\r\n\r\nI thinke the right path forward is: \r\n- a small BIP documenting this usage of virtual transaction size (which is used almost everywhere in our code\r\n- documentation update pointing to this new BIP instead of 141 for defining virtual size\r\n- this PR makes even more sense given this lack of easy conversion, but I think the newly added tests should at least be documented to note that they only work in the case that sig ops don't factor in, and perhaps we should add a test with a tx that has more sigops to show what happens in that case.\r\n",
      "created_at" : "2017-09-11T18:43:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11256#issuecomment-328621401",
      "id" : 328621401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11256",
      "updated_at" : "2017-09-11T18:43:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/328621401",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4360349?v=4",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@morcos AFAIK that's exclusively used for node policy, and as such isn't a topic for standardisation...?",
      "created_at" : "2017-11-10T09:11:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11256#issuecomment-343418354",
      "id" : 343418354,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11256",
      "updated_at" : "2017-11-10T09:11:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343418354",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11256#discussion_r173643347"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11256"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173643347"
         }
      },
      "author_association" : "MEMBER",
      "body" : "serialize needs to be made serialize_without_witness",
      "commit_id" : "d4b0d81b58f0ef989cbfd526f818225c587ed7ec",
      "created_at" : "2018-03-11T05:02:41Z",
      "diff_hunk" : "@@ -240,28 +240,45 @@ def run_test(self):\n         #                      tx2 (segwit input, paying to a non-segwit output) ->\n         #                      tx3 (non-segwit input, paying to a non-segwit output).\n         # tx1 is allowed to appear in the block, but no others.\n-        txid1 = send_to_witness(1, self.nodes[0], find_unspent(self.nodes[0], 50), self.pubkey[0], False, Decimal(\"49.996\"))\n-        hex_tx = self.nodes[0].gettransaction(txid)['hex']\n-        tx = FromHex(CTransaction(), hex_tx)\n+        tx_hex = self.nodes[0].gettransaction(txid)['hex']\n+        tx = FromHex(CTransaction(), tx_hex)\n         assert(tx.wit.is_null()) # This should not be a segwit input\n+\n+        txid1 = send_to_witness(1, self.nodes[0], find_unspent(self.nodes[0], 50), self.pubkey[0], False, Decimal(\"49.996\"))\n         assert(txid1 in self.nodes[0].getrawmempool())\n+        tx1_hex = self.nodes[0].gettransaction(txid1)['hex']\n+        tx1 = FromHex(CTransaction(), tx1_hex)\n+\n+        # Check that wtxid is properly reported in mempool entry (txid1)\n+        assert_equal(int(self.nodes[0].getmempoolentry(txid1)[\"wtxid\"], 16), tx1.calc_sha256(True))\n+\n+        # Check that weight and sizei (actually vsize) are properly reported in mempool entry (txid1)\n+        assert_equal(self.nodes[0].getmempoolentry(txid1)[\"size\"], (self.nodes[0].getmempoolentry(txid1)[\"weight\"] + 3) // 4)\n+        assert_equal(self.nodes[0].getmempoolentry(txid1)[\"weight\"], len(tx1.serialize())*3 + len(tx1.serialize_with_witness()))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11256#discussion_r173643347",
      "id" : 173643347,
      "original_commit_id" : "d4b0d81b58f0ef989cbfd526f818225c587ed7ec",
      "original_position" : 21,
      "path" : "test/functional/segwit.py",
      "position" : 21,
      "pull_request_review_id" : 102871117,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11256",
      "updated_at" : "2018-03-11T05:02:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173643347",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase and review comments addressed.",
      "created_at" : "2018-08-07T12:21:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11256#issuecomment-411036913",
      "id" : 411036913,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11256",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxMTAzNjkxMw==",
      "updated_at" : "2018-08-07T12:21:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/411036913",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing this, please see #14649",
      "created_at" : "2018-11-04T01:31:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11256#issuecomment-435634375",
      "id" : 435634375,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11256",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNTYzNDM3NQ==",
      "updated_at" : "2018-11-04T01:31:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/435634375",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   }
]
