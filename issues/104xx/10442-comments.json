[
   {
      "body" : "utACK",
      "created_at" : "2017-05-22T20:11:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-303207030",
      "id" : 303207030,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-22T20:11:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/303207030",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1492956?v=3",
         "events_url" : "https://api.github.com/users/jmcorgan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jmcorgan/followers",
         "following_url" : "https://api.github.com/users/jmcorgan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jmcorgan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jmcorgan",
         "id" : 1492956,
         "login" : "jmcorgan",
         "organizations_url" : "https://api.github.com/users/jmcorgan/orgs",
         "received_events_url" : "https://api.github.com/users/jmcorgan/received_events",
         "repos_url" : "https://api.github.com/users/jmcorgan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jmcorgan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jmcorgan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jmcorgan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117835429"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117835429"
         }
      },
      "body" : "No https://? Do we want link to an external site? What if the contents of the site changes? What if the domain owner changes?",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-22T20:16:07Z",
      "diff_hunk" : "@@ -451,6 +451,9 @@ Set maximum size of high\\-priority/low\\-fee transactions in bytes\n .IP\n Set lowest fee rate (in BTC/kB) for transactions to be included in block\n creation. (default: 0.00001)\n+\\fB\\-bip148\\fR\n+.IP\n+Enable BIP148 enforcement (see http://www.uasf.co)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117835429",
      "id" : 117835429,
      "original_commit_id" : "abbcfcd8b2401ef782f4769deff8288bd00ac858",
      "original_position" : 6,
      "path" : "doc/man/bitcoin-qt.1",
      "position" : null,
      "pull_request_review_id" : 39575184,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117835429",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117835558"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117835558"
         }
      },
      "body" : "SPC before `DEFAULT_BIP148` please.",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-22T20:16:51Z",
      "diff_hunk" : "@@ -494,6 +494,7 @@ std::string HelpMessage(HelpMessageMode mode)\n     strUsage += HelpMessageOpt(\"-blockmaxweight=<n>\", strprintf(_(\"Set maximum BIP141 block weight (default: %d)\"), DEFAULT_BLOCK_MAX_WEIGHT));\n     strUsage += HelpMessageOpt(\"-blockmaxsize=<n>\", strprintf(_(\"Set maximum block size in bytes (default: %d)\"), DEFAULT_BLOCK_MAX_SIZE));\n     strUsage += HelpMessageOpt(\"-blockmintxfee=<amt>\", strprintf(_(\"Set lowest fee rate (in %s/kB) for transactions to be included in block creation. (default: %s)\"), CURRENCY_UNIT, FormatMoney(DEFAULT_BLOCK_MIN_TX_FEE)));\n+    strUsage += HelpMessageOpt(\"-bip148\", strprintf(_(\"Enable BIP148/UASF (default: %d)\"),DEFAULT_BIP148));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117835558",
      "id" : 117835558,
      "original_commit_id" : "abbcfcd8b2401ef782f4769deff8288bd00ac858",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 39575184,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117835558",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117835687"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117835687"
         }
      },
      "body" : "SPC before `DEFAULT_BIP148 ` please.",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-22T20:17:37Z",
      "diff_hunk" : "@@ -1566,6 +1566,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (GetBoolArg(\"-bip148\",DEFAULT_BIP148)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117835687",
      "id" : 117835687,
      "original_commit_id" : "abbcfcd8b2401ef782f4769deff8288bd00ac858",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39575184,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117835687",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117837749"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117837749"
         }
      },
      "body" : "yes, since the primary reason for including the flag would be for people who already know about it and were going to install it anyway, and at least think they know what they are doing, an external link is probably not needed.   ",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-22T20:28:02Z",
      "diff_hunk" : "@@ -451,6 +451,9 @@ Set maximum size of high\\-priority/low\\-fee transactions in bytes\n .IP\n Set lowest fee rate (in BTC/kB) for transactions to be included in block\n creation. (default: 0.00001)\n+\\fB\\-bip148\\fR\n+.IP\n+Enable BIP148 enforcement (see http://www.uasf.co)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117837749",
      "id" : 117837749,
      "original_commit_id" : "abbcfcd8b2401ef782f4769deff8288bd00ac858",
      "original_position" : 6,
      "path" : "doc/man/bitcoin-qt.1",
      "position" : null,
      "pull_request_review_id" : 39577683,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117837749",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/50769?v=3",
         "events_url" : "https://api.github.com/users/earonesty/events{/privacy}",
         "followers_url" : "https://api.github.com/users/earonesty/followers",
         "following_url" : "https://api.github.com/users/earonesty/following{/other_user}",
         "gists_url" : "https://api.github.com/users/earonesty/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/earonesty",
         "id" : 50769,
         "login" : "earonesty",
         "organizations_url" : "https://api.github.com/users/earonesty/orgs",
         "received_events_url" : "https://api.github.com/users/earonesty/received_events",
         "repos_url" : "https://api.github.com/users/earonesty/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/earonesty/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/earonesty/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/earonesty"
      }
   },
   {
      "body" : "For the record, previous discussions: https://github.com/bitcoin/bitcoin/pull/10417, https://github.com/bitcoin/bitcoin/pull/10428",
      "created_at" : "2017-05-22T20:42:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-303214425",
      "id" : 303214425,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-22T20:42:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/303214425",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/9156103?v=3",
         "events_url" : "https://api.github.com/users/nopara73/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nopara73/followers",
         "following_url" : "https://api.github.com/users/nopara73/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nopara73/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nopara73",
         "id" : 9156103,
         "login" : "nopara73",
         "organizations_url" : "https://api.github.com/users/nopara73/orgs",
         "received_events_url" : "https://api.github.com/users/nopara73/received_events",
         "repos_url" : "https://api.github.com/users/nopara73/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nopara73/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nopara73/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nopara73"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2017-05-22T21:14:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-303222061",
      "id" : 303222061,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-22T21:14:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/303222061",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4469280?v=3",
         "events_url" : "https://api.github.com/users/ABISprotocol/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ABISprotocol/followers",
         "following_url" : "https://api.github.com/users/ABISprotocol/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ABISprotocol/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ABISprotocol",
         "id" : 4469280,
         "login" : "ABISprotocol",
         "organizations_url" : "https://api.github.com/users/ABISprotocol/orgs",
         "received_events_url" : "https://api.github.com/users/ABISprotocol/received_events",
         "repos_url" : "https://api.github.com/users/ABISprotocol/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ABISprotocol/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ABISprotocol/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ABISprotocol"
      }
   },
   {
      "body" : "NACK",
      "created_at" : "2017-05-22T21:53:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-303230307",
      "id" : 303230307,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-22T21:53:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/303230307",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/12585202?v=3",
         "events_url" : "https://api.github.com/users/AllanDoensen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AllanDoensen/followers",
         "following_url" : "https://api.github.com/users/AllanDoensen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AllanDoensen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AllanDoensen",
         "id" : 12585202,
         "login" : "AllanDoensen",
         "organizations_url" : "https://api.github.com/users/AllanDoensen/orgs",
         "received_events_url" : "https://api.github.com/users/AllanDoensen/received_events",
         "repos_url" : "https://api.github.com/users/AllanDoensen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AllanDoensen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AllanDoensen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AllanDoensen"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2017-05-22T22:07:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-303233193",
      "id" : 303233193,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-22T22:07:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/303233193",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/14859988?v=3",
         "events_url" : "https://api.github.com/users/mkwia/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mkwia/followers",
         "following_url" : "https://api.github.com/users/mkwia/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mkwia/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mkwia",
         "id" : 14859988,
         "login" : "mkwia",
         "organizations_url" : "https://api.github.com/users/mkwia/orgs",
         "received_events_url" : "https://api.github.com/users/mkwia/received_events",
         "repos_url" : "https://api.github.com/users/mkwia/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mkwia/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mkwia/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mkwia"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117857547"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117857547"
         }
      },
      "body" : "small details: you could use gArgs::GetBoolArg directly instead of the wrapper. You could also create a global that is set only in init.cpp",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-22T22:12:45Z",
      "diff_hunk" : "@@ -1566,6 +1566,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117857547",
      "id" : 117857547,
      "original_commit_id" : "b360fd09c3638244dd852ccb378540a36b2db8de",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39598897,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117857547",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117857924"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117857924"
         }
      },
      "body" : "I don't think \"please upgrade\" is a very appropriate comment here. Upgrade to what?",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-22T22:15:12Z",
      "diff_hunk" : "@@ -1566,6 +1566,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {\n+        // BIP148 mandatory segwit signalling.\n+        int64_t nMedianTimePast = pindex->GetMedianTimePast();\n+        if ( (nMedianTimePast >= 1501545600) &&  // Tue 01 Aug 2017 00:00:00 UTC\n+                (nMedianTimePast <= 1510704000) &&  // Wed 15 Nov 2017 00:00:00 UTC\n+                (!IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&  // Segwit is not locked in\n+                 !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus())) )   // and is not active.\n+        {\n+            bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n+            bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n+            if (!(fVersionBits && fSegbit)) {\n+                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade\"), REJECT_INVALID, \"bad-no-segwit\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117857924",
      "id" : 117857924,
      "original_commit_id" : "b360fd09c3638244dd852ccb378540a36b2db8de",
      "original_position" : 15,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39599249,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117857924",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117858119"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117858119"
         }
      },
      "body" : "Can't this be static?\r\n\r\nEDIT: or preferably inlined",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-22T22:16:31Z",
      "diff_hunk" : "@@ -445,6 +447,9 @@ bool TestBlockValidity(CValidationState& state, const CChainParams& chainparams,\n /** Check whether witness commitments are required for block. */\n bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params);\n \n+/** Check if Segregated Witness is Locked In */\n+bool IsWitnessLockedIn(const CBlockIndex* pindexPrev, const Consensus::Params& params);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117858119",
      "id" : 117858119,
      "original_commit_id" : "b360fd09c3638244dd852ccb378540a36b2db8de",
      "original_position" : 14,
      "path" : "src/validation.h",
      "position" : null,
      "pull_request_review_id" : 39599470,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117858119",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117869889"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117869889"
         }
      },
      "body" : "yes, static is more consistent with other uses in the file, so i'll use that",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-22T23:46:04Z",
      "diff_hunk" : "@@ -445,6 +447,9 @@ bool TestBlockValidity(CValidationState& state, const CChainParams& chainparams,\n /** Check whether witness commitments are required for block. */\n bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params);\n \n+/** Check if Segregated Witness is Locked In */\n+bool IsWitnessLockedIn(const CBlockIndex* pindexPrev, const Consensus::Params& params);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117869889",
      "id" : 117869889,
      "original_commit_id" : "b360fd09c3638244dd852ccb378540a36b2db8de",
      "original_position" : 14,
      "path" : "src/validation.h",
      "position" : null,
      "pull_request_review_id" : 39611736,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117869889",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/50769?v=3",
         "events_url" : "https://api.github.com/users/earonesty/events{/privacy}",
         "followers_url" : "https://api.github.com/users/earonesty/followers",
         "following_url" : "https://api.github.com/users/earonesty/following{/other_user}",
         "gists_url" : "https://api.github.com/users/earonesty/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/earonesty",
         "id" : 50769,
         "login" : "earonesty",
         "organizations_url" : "https://api.github.com/users/earonesty/orgs",
         "received_events_url" : "https://api.github.com/users/earonesty/received_events",
         "repos_url" : "https://api.github.com/users/earonesty/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/earonesty/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/earonesty/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/earonesty"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117870059"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117870059"
         }
      },
      "body" : "right?  maybe, please upgrade to Bitcoin version 0.13.2 or greater?",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-22T23:47:17Z",
      "diff_hunk" : "@@ -1566,6 +1566,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {\n+        // BIP148 mandatory segwit signalling.\n+        int64_t nMedianTimePast = pindex->GetMedianTimePast();\n+        if ( (nMedianTimePast >= 1501545600) &&  // Tue 01 Aug 2017 00:00:00 UTC\n+                (nMedianTimePast <= 1510704000) &&  // Wed 15 Nov 2017 00:00:00 UTC\n+                (!IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&  // Segwit is not locked in\n+                 !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus())) )   // and is not active.\n+        {\n+            bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n+            bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n+            if (!(fVersionBits && fSegbit)) {\n+                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade\"), REJECT_INVALID, \"bad-no-segwit\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117870059",
      "id" : 117870059,
      "original_commit_id" : "b360fd09c3638244dd852ccb378540a36b2db8de",
      "original_position" : 15,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39611900,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117870059",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/50769?v=3",
         "events_url" : "https://api.github.com/users/earonesty/events{/privacy}",
         "followers_url" : "https://api.github.com/users/earonesty/followers",
         "following_url" : "https://api.github.com/users/earonesty/following{/other_user}",
         "gists_url" : "https://api.github.com/users/earonesty/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/earonesty",
         "id" : 50769,
         "login" : "earonesty",
         "organizations_url" : "https://api.github.com/users/earonesty/orgs",
         "received_events_url" : "https://api.github.com/users/earonesty/received_events",
         "repos_url" : "https://api.github.com/users/earonesty/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/earonesty/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/earonesty/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/earonesty"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117870419"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117870419"
         }
      },
      "body" : "i think the wrapper from util.h is more consistent with other uses in the code",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-22T23:50:04Z",
      "diff_hunk" : "@@ -1566,6 +1566,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117870419",
      "id" : 117870419,
      "original_commit_id" : "b360fd09c3638244dd852ccb378540a36b2db8de",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39612264,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117870419",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/50769?v=3",
         "events_url" : "https://api.github.com/users/earonesty/events{/privacy}",
         "followers_url" : "https://api.github.com/users/earonesty/followers",
         "following_url" : "https://api.github.com/users/earonesty/following{/other_user}",
         "gists_url" : "https://api.github.com/users/earonesty/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/earonesty",
         "id" : 50769,
         "login" : "earonesty",
         "organizations_url" : "https://api.github.com/users/earonesty/orgs",
         "received_events_url" : "https://api.github.com/users/earonesty/received_events",
         "repos_url" : "https://api.github.com/users/earonesty/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/earonesty/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/earonesty/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/earonesty"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117881523"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117881523"
         }
      },
      "body" : "That's because the code was *just* refactored to create `gArgs`. New code should probably use it, rather than the wrappers which exist to avoid touching the old code.",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-23T01:42:14Z",
      "diff_hunk" : "@@ -1566,6 +1566,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117881523",
      "id" : 117881523,
      "original_commit_id" : "b360fd09c3638244dd852ccb378540a36b2db8de",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39623909,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117881523",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117883972"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117883972"
         }
      },
      "body" : "Cool ok",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-23T02:10:43Z",
      "diff_hunk" : "@@ -1566,6 +1566,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117883972",
      "id" : 117883972,
      "original_commit_id" : "b360fd09c3638244dd852ccb378540a36b2db8de",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39626369,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117883972",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/50769?v=3",
         "events_url" : "https://api.github.com/users/earonesty/events{/privacy}",
         "followers_url" : "https://api.github.com/users/earonesty/followers",
         "following_url" : "https://api.github.com/users/earonesty/following{/other_user}",
         "gists_url" : "https://api.github.com/users/earonesty/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/earonesty",
         "id" : 50769,
         "login" : "earonesty",
         "organizations_url" : "https://api.github.com/users/earonesty/orgs",
         "received_events_url" : "https://api.github.com/users/earonesty/received_events",
         "repos_url" : "https://api.github.com/users/earonesty/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/earonesty/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/earonesty/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/earonesty"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117890157"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117890157"
         }
      },
      "body" : "Why version 0.13.1?",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-23T03:21:05Z",
      "diff_hunk" : "@@ -1566,6 +1567,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (gArgs.GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {\n+        // BIP148 mandatory segwit signalling.\n+        int64_t nMedianTimePast = pindex->GetMedianTimePast();\n+        if ( (nMedianTimePast >= 1501545600) &&  // Tue 01 Aug 2017 00:00:00 UTC\n+                (nMedianTimePast <= 1510704000) &&  // Wed 15 Nov 2017 00:00:00 UTC\n+                (!IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&  // Segwit is not locked in\n+                 !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus())) )   // and is not active.\n+        {\n+            bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n+            bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n+            if (!(fVersionBits && fSegbit)) {\n+                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade to Bitcoin version 0.13.1\"), REJECT_INVALID, \"bad-no-segwit\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117890157",
      "id" : 117890157,
      "original_commit_id" : "5288ddab0f3f9bb001e1a92eeaa087160d78bf6c",
      "original_position" : 23,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39632628,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117890157",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/429961?v=3",
         "events_url" : "https://api.github.com/users/PRabahy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PRabahy/followers",
         "following_url" : "https://api.github.com/users/PRabahy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PRabahy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PRabahy",
         "id" : 429961,
         "login" : "PRabahy",
         "organizations_url" : "https://api.github.com/users/PRabahy/orgs",
         "received_events_url" : "https://api.github.com/users/PRabahy/received_events",
         "repos_url" : "https://api.github.com/users/PRabahy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PRabahy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PRabahy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PRabahy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117890772"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117890772"
         }
      },
      "body" : "@PRabahy Maybe `please upgrade to Bitcoin version >=0.13.1` ?",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-23T03:28:40Z",
      "diff_hunk" : "@@ -1566,6 +1567,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (gArgs.GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {\n+        // BIP148 mandatory segwit signalling.\n+        int64_t nMedianTimePast = pindex->GetMedianTimePast();\n+        if ( (nMedianTimePast >= 1501545600) &&  // Tue 01 Aug 2017 00:00:00 UTC\n+                (nMedianTimePast <= 1510704000) &&  // Wed 15 Nov 2017 00:00:00 UTC\n+                (!IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&  // Segwit is not locked in\n+                 !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus())) )   // and is not active.\n+        {\n+            bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n+            bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n+            if (!(fVersionBits && fSegbit)) {\n+                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade to Bitcoin version 0.13.1\"), REJECT_INVALID, \"bad-no-segwit\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117890772",
      "id" : 117890772,
      "original_commit_id" : "5288ddab0f3f9bb001e1a92eeaa087160d78bf6c",
      "original_position" : 23,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39633260,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117890772",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/2578320?v=3",
         "events_url" : "https://api.github.com/users/webcaetano/events{/privacy}",
         "followers_url" : "https://api.github.com/users/webcaetano/followers",
         "following_url" : "https://api.github.com/users/webcaetano/following{/other_user}",
         "gists_url" : "https://api.github.com/users/webcaetano/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/webcaetano",
         "id" : 2578320,
         "login" : "webcaetano",
         "organizations_url" : "https://api.github.com/users/webcaetano/orgs",
         "received_events_url" : "https://api.github.com/users/webcaetano/received_events",
         "repos_url" : "https://api.github.com/users/webcaetano/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/webcaetano/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/webcaetano/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/webcaetano"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2017-05-23T12:10:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-303378323",
      "id" : 303378323,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-23T12:10:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/303378323",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3824379?v=3",
         "events_url" : "https://api.github.com/users/Cocosoft/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Cocosoft/followers",
         "following_url" : "https://api.github.com/users/Cocosoft/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Cocosoft/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Cocosoft",
         "id" : 3824379,
         "login" : "Cocosoft",
         "organizations_url" : "https://api.github.com/users/Cocosoft/orgs",
         "received_events_url" : "https://api.github.com/users/Cocosoft/received_events",
         "repos_url" : "https://api.github.com/users/Cocosoft/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Cocosoft/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Cocosoft/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Cocosoft"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117978300"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117978300"
         }
      },
      "body" : "Yeah",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-23T12:37:34Z",
      "diff_hunk" : "@@ -1566,6 +1567,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (gArgs.GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {\n+        // BIP148 mandatory segwit signalling.\n+        int64_t nMedianTimePast = pindex->GetMedianTimePast();\n+        if ( (nMedianTimePast >= 1501545600) &&  // Tue 01 Aug 2017 00:00:00 UTC\n+                (nMedianTimePast <= 1510704000) &&  // Wed 15 Nov 2017 00:00:00 UTC\n+                (!IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&  // Segwit is not locked in\n+                 !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus())) )   // and is not active.\n+        {\n+            bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n+            bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n+            if (!(fVersionBits && fSegbit)) {\n+                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade to Bitcoin version 0.13.1\"), REJECT_INVALID, \"bad-no-segwit\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117978300",
      "id" : 117978300,
      "original_commit_id" : "5288ddab0f3f9bb001e1a92eeaa087160d78bf6c",
      "original_position" : 23,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39727482,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117978300",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/50769?v=3",
         "events_url" : "https://api.github.com/users/earonesty/events{/privacy}",
         "followers_url" : "https://api.github.com/users/earonesty/followers",
         "following_url" : "https://api.github.com/users/earonesty/following{/other_user}",
         "gists_url" : "https://api.github.com/users/earonesty/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/earonesty",
         "id" : 50769,
         "login" : "earonesty",
         "organizations_url" : "https://api.github.com/users/earonesty/orgs",
         "received_events_url" : "https://api.github.com/users/earonesty/received_events",
         "repos_url" : "https://api.github.com/users/earonesty/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/earonesty/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/earonesty/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/earonesty"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117978578"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117978578"
         }
      },
      "body" : "Perhaps \"Bitcoin **Core** version ...\"",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-23T12:39:07Z",
      "diff_hunk" : "@@ -1566,6 +1567,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (gArgs.GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {\n+        // BIP148 mandatory segwit signalling.\n+        int64_t nMedianTimePast = pindex->GetMedianTimePast();\n+        if ( (nMedianTimePast >= 1501545600) &&  // Tue 01 Aug 2017 00:00:00 UTC\n+                (nMedianTimePast <= 1510704000) &&  // Wed 15 Nov 2017 00:00:00 UTC\n+                (!IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&  // Segwit is not locked in\n+                 !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus())) )   // and is not active.\n+        {\n+            bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n+            bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n+            if (!(fVersionBits && fSegbit)) {\n+                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade to Bitcoin version 0.13.1\"), REJECT_INVALID, \"bad-no-segwit\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117978578",
      "id" : 117978578,
      "original_commit_id" : "5288ddab0f3f9bb001e1a92eeaa087160d78bf6c",
      "original_position" : 23,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39727798,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117978578",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/14859988?v=3",
         "events_url" : "https://api.github.com/users/mkwia/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mkwia/followers",
         "following_url" : "https://api.github.com/users/mkwia/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mkwia/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mkwia",
         "id" : 14859988,
         "login" : "mkwia",
         "organizations_url" : "https://api.github.com/users/mkwia/orgs",
         "received_events_url" : "https://api.github.com/users/mkwia/received_events",
         "repos_url" : "https://api.github.com/users/mkwia/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mkwia/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mkwia/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mkwia"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117979319"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117979319"
         }
      },
      "body" : "I dont like \"core\".   Bitcoin has no RFC to refer to, so Bitcoin literally is defined by this reference implementation.  I think it would be great to use the RFC process, once Bitcoin is more mature.   ",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-23T12:42:38Z",
      "diff_hunk" : "@@ -1566,6 +1567,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (gArgs.GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {\n+        // BIP148 mandatory segwit signalling.\n+        int64_t nMedianTimePast = pindex->GetMedianTimePast();\n+        if ( (nMedianTimePast >= 1501545600) &&  // Tue 01 Aug 2017 00:00:00 UTC\n+                (nMedianTimePast <= 1510704000) &&  // Wed 15 Nov 2017 00:00:00 UTC\n+                (!IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&  // Segwit is not locked in\n+                 !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus())) )   // and is not active.\n+        {\n+            bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n+            bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n+            if (!(fVersionBits && fSegbit)) {\n+                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade to Bitcoin version 0.13.1\"), REJECT_INVALID, \"bad-no-segwit\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117979319",
      "id" : 117979319,
      "original_commit_id" : "5288ddab0f3f9bb001e1a92eeaa087160d78bf6c",
      "original_position" : 23,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39728648,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117979319",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/50769?v=3",
         "events_url" : "https://api.github.com/users/earonesty/events{/privacy}",
         "followers_url" : "https://api.github.com/users/earonesty/followers",
         "following_url" : "https://api.github.com/users/earonesty/following{/other_user}",
         "gists_url" : "https://api.github.com/users/earonesty/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/earonesty",
         "id" : 50769,
         "login" : "earonesty",
         "organizations_url" : "https://api.github.com/users/earonesty/orgs",
         "received_events_url" : "https://api.github.com/users/earonesty/received_events",
         "repos_url" : "https://api.github.com/users/earonesty/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/earonesty/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/earonesty/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/earonesty"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2017-05-23T12:55:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-303388738",
      "id" : 303388738,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-23T12:55:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/303388738",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/26351349?v=3",
         "events_url" : "https://api.github.com/users/forkwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/forkwar/followers",
         "following_url" : "https://api.github.com/users/forkwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/forkwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/forkwar",
         "id" : 26351349,
         "login" : "forkwar",
         "organizations_url" : "https://api.github.com/users/forkwar/orgs",
         "received_events_url" : "https://api.github.com/users/forkwar/received_events",
         "repos_url" : "https://api.github.com/users/forkwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/forkwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/forkwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/forkwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117988427"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117988427"
         }
      },
      "body" : "No, the person reading the error already has \"Bitcoin version >=0.13.1\", no?",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-23T13:21:23Z",
      "diff_hunk" : "@@ -1566,6 +1567,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (gArgs.GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {\n+        // BIP148 mandatory segwit signalling.\n+        int64_t nMedianTimePast = pindex->GetMedianTimePast();\n+        if ( (nMedianTimePast >= 1501545600) &&  // Tue 01 Aug 2017 00:00:00 UTC\n+                (nMedianTimePast <= 1510704000) &&  // Wed 15 Nov 2017 00:00:00 UTC\n+                (!IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&  // Segwit is not locked in\n+                 !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus())) )   // and is not active.\n+        {\n+            bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n+            bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n+            if (!(fVersionBits && fSegbit)) {\n+                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade to Bitcoin version 0.13.1\"), REJECT_INVALID, \"bad-no-segwit\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117988427",
      "id" : 117988427,
      "original_commit_id" : "5288ddab0f3f9bb001e1a92eeaa087160d78bf6c",
      "original_position" : 23,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39738721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117988427",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117994192"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117994192"
         }
      },
      "body" : "No, they cannot have that.   0.13.1 signals segwit.   (if (!(fVersionBits && fSegbit)) ... ",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-23T13:42:51Z",
      "diff_hunk" : "@@ -1566,6 +1567,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (gArgs.GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {\n+        // BIP148 mandatory segwit signalling.\n+        int64_t nMedianTimePast = pindex->GetMedianTimePast();\n+        if ( (nMedianTimePast >= 1501545600) &&  // Tue 01 Aug 2017 00:00:00 UTC\n+                (nMedianTimePast <= 1510704000) &&  // Wed 15 Nov 2017 00:00:00 UTC\n+                (!IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&  // Segwit is not locked in\n+                 !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus())) )   // and is not active.\n+        {\n+            bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n+            bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n+            if (!(fVersionBits && fSegbit)) {\n+                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade to Bitcoin version 0.13.1\"), REJECT_INVALID, \"bad-no-segwit\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117994192",
      "id" : 117994192,
      "original_commit_id" : "5288ddab0f3f9bb001e1a92eeaa087160d78bf6c",
      "original_position" : 23,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39745108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117994192",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/50769?v=3",
         "events_url" : "https://api.github.com/users/earonesty/events{/privacy}",
         "followers_url" : "https://api.github.com/users/earonesty/followers",
         "following_url" : "https://api.github.com/users/earonesty/following{/other_user}",
         "gists_url" : "https://api.github.com/users/earonesty/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/earonesty",
         "id" : 50769,
         "login" : "earonesty",
         "organizations_url" : "https://api.github.com/users/earonesty/orgs",
         "received_events_url" : "https://api.github.com/users/earonesty/received_events",
         "repos_url" : "https://api.github.com/users/earonesty/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/earonesty/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/earonesty/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/earonesty"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117997603"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117997603"
         }
      },
      "body" : "@earonesty Node software does not control the block version header. Just remove the \"please upgrade\" bit.",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-23T13:54:52Z",
      "diff_hunk" : "@@ -1566,6 +1567,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (gArgs.GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {\n+        // BIP148 mandatory segwit signalling.\n+        int64_t nMedianTimePast = pindex->GetMedianTimePast();\n+        if ( (nMedianTimePast >= 1501545600) &&  // Tue 01 Aug 2017 00:00:00 UTC\n+                (nMedianTimePast <= 1510704000) &&  // Wed 15 Nov 2017 00:00:00 UTC\n+                (!IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&  // Segwit is not locked in\n+                 !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus())) )   // and is not active.\n+        {\n+            bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n+            bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n+            if (!(fVersionBits && fSegbit)) {\n+                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade to Bitcoin version 0.13.1\"), REJECT_INVALID, \"bad-no-segwit\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r117997603",
      "id" : 117997603,
      "original_commit_id" : "5288ddab0f3f9bb001e1a92eeaa087160d78bf6c",
      "original_position" : 23,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39748913,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/117997603",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r118022050"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118022050"
         }
      },
      "body" : "This is not enough. The user has to add `-bip148` in addition. But you do not know if he is running Bitcoin Core at all. So this is wrong by design.\r\n\r\nWho do you think should be/is the reader of this message?\r\n",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-23T15:17:45Z",
      "diff_hunk" : "@@ -1578,7 +1578,7 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n             bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n             bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n             if (!(fVersionBits && fSegbit)) {\n-                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade to Bitcoin version 0.13.1\"), REJECT_INVALID, \"bad-no-segwit\");\n+                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade to Bitcoin version >= 0.13.1\"), REJECT_INVALID, \"bad-no-segwit\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r118022050",
      "id" : 118022050,
      "original_commit_id" : "91722a0342e70e28e9f36438a861fa0a7f7be176",
      "original_position" : 5,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39776048,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118022050",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r118022885"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118022885"
         }
      },
      "body" : "This message will only end up in the debug.log, so there shouldn't be anything asking someone to upgrade.",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-23T15:20:40Z",
      "diff_hunk" : "@@ -1578,7 +1578,7 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n             bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n             bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n             if (!(fVersionBits && fSegbit)) {\n-                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade to Bitcoin version 0.13.1\"), REJECT_INVALID, \"bad-no-segwit\");\n+                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade to Bitcoin version >= 0.13.1\"), REJECT_INVALID, \"bad-no-segwit\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r118022885",
      "id" : 118022885,
      "original_commit_id" : "91722a0342e70e28e9f36438a861fa0a7f7be176",
      "original_position" : 5,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39777035,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118022885",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3782274?v=3",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r118025142"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118025142"
         }
      },
      "body" : "Just remove the `please upgrade to Bitcoin version >= 0.13.1` part.\r\nMake it short like `ConnectBlock(): relayed block must signal for segwit`",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-23T15:28:24Z",
      "diff_hunk" : "@@ -1578,7 +1578,7 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n             bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n             bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n             if (!(fVersionBits && fSegbit)) {\n-                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade to Bitcoin version 0.13.1\"), REJECT_INVALID, \"bad-no-segwit\");\n+                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade to Bitcoin version >= 0.13.1\"), REJECT_INVALID, \"bad-no-segwit\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r118025142",
      "id" : 118025142,
      "original_commit_id" : "91722a0342e70e28e9f36438a861fa0a7f7be176",
      "original_position" : 5,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39779493,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T00:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118025142",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/2578320?v=3",
         "events_url" : "https://api.github.com/users/webcaetano/events{/privacy}",
         "followers_url" : "https://api.github.com/users/webcaetano/followers",
         "following_url" : "https://api.github.com/users/webcaetano/following{/other_user}",
         "gists_url" : "https://api.github.com/users/webcaetano/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/webcaetano",
         "id" : 2578320,
         "login" : "webcaetano",
         "organizations_url" : "https://api.github.com/users/webcaetano/orgs",
         "received_events_url" : "https://api.github.com/users/webcaetano/received_events",
         "repos_url" : "https://api.github.com/users/webcaetano/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/webcaetano/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/webcaetano/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/webcaetano"
      }
   },
   {
      "body" : "A miner only has to run 0.13.1 to be sure this code isn't triggered.",
      "created_at" : "2017-05-23T17:12:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-303469676",
      "id" : 303469676,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-23T17:12:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/303469676",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/50769?v=3",
         "events_url" : "https://api.github.com/users/earonesty/events{/privacy}",
         "followers_url" : "https://api.github.com/users/earonesty/followers",
         "following_url" : "https://api.github.com/users/earonesty/following{/other_user}",
         "gists_url" : "https://api.github.com/users/earonesty/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/earonesty",
         "id" : 50769,
         "login" : "earonesty",
         "organizations_url" : "https://api.github.com/users/earonesty/orgs",
         "received_events_url" : "https://api.github.com/users/earonesty/received_events",
         "repos_url" : "https://api.github.com/users/earonesty/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/earonesty/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/earonesty/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/earonesty"
      }
   },
   {
      "body" : "Ok, changing it.",
      "created_at" : "2017-05-23T17:12:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-303469846",
      "id" : 303469846,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-23T17:12:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/303469846",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/50769?v=3",
         "events_url" : "https://api.github.com/users/earonesty/events{/privacy}",
         "followers_url" : "https://api.github.com/users/earonesty/followers",
         "following_url" : "https://api.github.com/users/earonesty/following{/other_user}",
         "gists_url" : "https://api.github.com/users/earonesty/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/earonesty",
         "id" : 50769,
         "login" : "earonesty",
         "organizations_url" : "https://api.github.com/users/earonesty/orgs",
         "received_events_url" : "https://api.github.com/users/earonesty/received_events",
         "repos_url" : "https://api.github.com/users/earonesty/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/earonesty/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/earonesty/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/earonesty"
      }
   },
   {
      "body" : "Perhaps the PR should see a rebase to 1 commit.\r\nThe commit titles for newest two give no value and only works in context with the first commit.",
      "created_at" : "2017-05-24T09:48:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-303674284",
      "id" : 303674284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-24T09:48:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/303674284",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3824379?v=3",
         "events_url" : "https://api.github.com/users/Cocosoft/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Cocosoft/followers",
         "following_url" : "https://api.github.com/users/Cocosoft/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Cocosoft/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Cocosoft",
         "id" : 3824379,
         "login" : "Cocosoft",
         "organizations_url" : "https://api.github.com/users/Cocosoft/orgs",
         "received_events_url" : "https://api.github.com/users/Cocosoft/received_events",
         "repos_url" : "https://api.github.com/users/Cocosoft/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Cocosoft/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Cocosoft/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Cocosoft"
      }
   },
   {
      "body" : "Maybe i did something stupid.  I'll reopen when I get to a laptop",
      "created_at" : "2017-05-25T23:07:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-304148103",
      "id" : 304148103,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-25T23:16:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/304148103",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/50769?v=3",
         "events_url" : "https://api.github.com/users/earonesty/events{/privacy}",
         "followers_url" : "https://api.github.com/users/earonesty/followers",
         "following_url" : "https://api.github.com/users/earonesty/following{/other_user}",
         "gists_url" : "https://api.github.com/users/earonesty/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/earonesty",
         "id" : 50769,
         "login" : "earonesty",
         "organizations_url" : "https://api.github.com/users/earonesty/orgs",
         "received_events_url" : "https://api.github.com/users/earonesty/received_events",
         "repos_url" : "https://api.github.com/users/earonesty/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/earonesty/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/earonesty/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/earonesty"
      }
   },
   {
      "body" : "@earonesty  You overwrote your PR branch with master.  Since the changes being PR were removed github won't let the PR stay open (as there is nothing to merge).  I'm not sure if restoring the commits will fix it, you might have to open a new PR.",
      "created_at" : "2017-05-25T23:21:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-304150335",
      "id" : 304150335,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-25T23:21:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/304150335",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Yeah, I tried to pull/rebase, and did something wrong.   Thx.",
      "created_at" : "2017-05-26T00:30:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-304159575",
      "id" : 304159575,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-26T00:31:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/304159575",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/50769?v=3",
         "events_url" : "https://api.github.com/users/earonesty/events{/privacy}",
         "followers_url" : "https://api.github.com/users/earonesty/followers",
         "following_url" : "https://api.github.com/users/earonesty/following{/other_user}",
         "gists_url" : "https://api.github.com/users/earonesty/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/earonesty",
         "id" : 50769,
         "login" : "earonesty",
         "organizations_url" : "https://api.github.com/users/earonesty/orgs",
         "received_events_url" : "https://api.github.com/users/earonesty/received_events",
         "repos_url" : "https://api.github.com/users/earonesty/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/earonesty/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/earonesty/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/earonesty"
      }
   },
   {
      "body" : "utACK\r\n\r\nI was concerned by the issue luke-jr pointed out in #10428: \"There are circumstances where this won't upgrade cleanly from a non-BIP148 client: specifically, after July in the case where miners have produced invalid blocks, this will fail to reconsider them.\" But I think what will actually happen in the case of a chain split with only minority hashpower on BIP148, is if you restart bitcoind with -bip148 on, say, August 7th, is that you be highly unlikely to extend the chain you had, and eventually the initially shorter BIP148 chain will become longer than the non-BIP148 chain as at August-7th, and you'll reorg. This behaviour will get worse the longer a user waits after August 1st to enable the option; again assuming a chain split and only minority hashpower on BIP148. This doesn't seem too bad to me, though could be better. \r\n\r\nThis probably isn't good enough for mining the BIP148 chain in this scenario -- if you think BIP148 is going to win, but hasn't yet and has already started, enabling -bip148 will leave you mining on a new, post August-1st fork of the non-BIP148 chain, creating a new chain split, until the original BIP148 chain has caught up.\r\n\r\nIn the event of BIP148 failing, as far as I can see, users can just restart bitcoind without the option, and will reorg to the longer chain. That seems fine, and minimally painful, given the circumstances.\r\n\r\nThis seems like it should have some behavioural tests included before being deployed though, given it changes consensus behaviour...",
      "created_at" : "2017-05-26T05:55:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-304198555",
      "id" : 304198555,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-26T05:55:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/304198555",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/127186?v=3",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "body" : "Okay, I've had a go at writing some functional tests, and I think the \"restart with -bip148 sometime after August 1st\" case is worse than I'd hoped -- a peer that mines on top of the chain they were following will get banned by BIP148 peers for passing on invalid blocks, and thus won't realise when the real BIP148 chain has overtaken their broken chain (at least until the BIP148 chain has somehow become the most work chain). That seems unreasonably fragile to me; I'll see if I can make a patch to prevent it happening.",
      "created_at" : "2017-05-26T14:30:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#issuecomment-304298046",
      "id" : 304298046,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10442",
      "updated_at" : "2017-05-26T14:30:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/304298046",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/127186?v=3",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r118734389"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118734389"
         }
      },
      "body" : "state.DoS(0, ...) here isn't entirely sufficient -- a non-BIP148 node will also forward any block building on the non-segwit block which will give a \"prev block not found\" or \"prev block invalid\" error which have DoS levels of 10 and 100 respectively.",
      "commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "created_at" : "2017-05-26T15:58:52Z",
      "diff_hunk" : "@@ -1565,6 +1566,22 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    if (gArgs.GetBoolArg(\"-bip148\", DEFAULT_BIP148)) {\n+        // BIP148 mandatory segwit signalling.\n+        int64_t nMedianTimePast = pindex->GetMedianTimePast();\n+        if ( (nMedianTimePast >= 1501545600) &&  // Tue 01 Aug 2017 00:00:00 UTC\n+                (nMedianTimePast <= 1510704000) &&  // Wed 15 Nov 2017 00:00:00 UTC\n+                (!IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&  // Segwit is not locked in\n+                 !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus())) )   // and is not active.\n+        {\n+            bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n+            bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n+            if (!(fVersionBits && fSegbit)) {\n+                return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit\"), REJECT_INVALID, \"bad-no-segwit\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10442#discussion_r118734389",
      "id" : 118734389,
      "original_commit_id" : "0f17665ac37fbbf405d8681ec9f4bdd63c77255e",
      "original_position" : 23,
      "path" : "src/validation.cpp",
      "position" : 23,
      "pull_request_review_id" : 40557824,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10442",
      "updated_at" : "2017-05-26T15:58:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118734389",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/127186?v=3",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   }
]
