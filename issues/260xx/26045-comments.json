[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [jamesob](https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1732548997) |\n| Stale ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1529437357) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28685](https://github.com/bitcoin/bitcoin/pull/28685) (coinstats, assumeutxo: fix hash_serialized2 calculation by fjahr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-09-08T17:13:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1240993698",
      "id" : 1240993698,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585J-A-i",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1240993698/reactions"
      },
      "updated_at" : "2023-10-19T21:30:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1240993698",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure it's worth it to save 20%. Presumably generic compressors could do better anyway?",
      "created_at" : "2022-09-10T23:36:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1242820216",
      "id" : 1242820216,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585KE-54",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1242820216/reactions"
      },
      "updated_at" : "2022-09-10T23:36:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1242820216",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Not sure it's worth it to save 20%. Presumably generic compressors could do better anyway?\r\n\r\nYes I agree but at least with this implementation the utxo set is still readable as is and doesn't need decompression.",
      "created_at" : "2022-09-12T07:26:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1243324603",
      "id" : 1243324603,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585KG6C7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1243324603/reactions"
      },
      "updated_at" : "2022-09-12T07:26:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1243324603",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> The main downside of this implementation is that the entire UTXO set must be loaded in RAM (in mapCoins) before being written to disk. So running dumptxoutset will consome a lot of RAM on mainnet since the utxo set is large.\r\n>  Not sure how to improve this.\r\n\r\nThe keys in leveldb are guaranteed to be lexicographically sorted. You just need to cache the last txid and flush the txid and outpoint tuples once the next one is reached in the database iterator. I pushed a dirty proof of concept [here](https://github.com/TheCharlatan/bitcoin/commit/b0a22fbd2eee90982d3bc5f65f0d3cde049fd0f4) and it produced the same output file as your current implementation.\r\n\r\nOtherwise Concept ACK. For a file that might be lugged over a network or other data carrier this space improvement is nice. Users can still apply their own compression on top of it. I also like that this provides additional structure to the data.\r\n",
      "created_at" : "2023-03-02T13:53:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1451900443",
      "id" : 1451900443,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585Wij4b",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1451900443/reactions"
      },
      "updated_at" : "2023-03-02T13:53:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1451900443",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Yeah as I specified in the issue and as @TheCharlatan wrote more ram shouldn't be needed because txid are iterated sorted from leveldb.\r\n\r\nI was also wondering why the `bitcoin-cli savetxoutset`  API (same goes for `savemempool`) requires to specify a filename instead of writing to stdout that would offer better composition while maintaining the possibility to write to file with `>utxo.bin`",
      "created_at" : "2023-03-16T16:17:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1472285629",
      "id" : 1472285629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585XwUu9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1472285629/reactions"
      },
      "updated_at" : "2023-03-16T16:17:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1472285629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6470319?v=4",
         "events_url" : "https://api.github.com/users/RCasatta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/RCasatta/followers",
         "following_url" : "https://api.github.com/users/RCasatta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/RCasatta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/RCasatta",
         "id" : 6470319,
         "login" : "RCasatta",
         "node_id" : "MDQ6VXNlcjY0NzAzMTk=",
         "organizations_url" : "https://api.github.com/users/RCasatta/orgs",
         "received_events_url" : "https://api.github.com/users/RCasatta/received_events",
         "repos_url" : "https://api.github.com/users/RCasatta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/RCasatta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/RCasatta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/RCasatta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Re https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1472285629\r\n\r\n> I was also wondering why the bitcoin-cli savetxoutset API (same goes for savemempool) requires to specify a filename instead of writing to stdout that would offer better composition while maintaining the possibility to write to file with >utxo.bin\r\n\r\nWriting to stdout would mean that the data would have to be carried over the rpc connection, right?",
      "created_at" : "2023-04-29T08:26:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1528716678",
      "id" : 1528716678,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585bHl2G",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1528716678/reactions"
      },
      "updated_at" : "2023-04-29T08:26:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1528716678",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Writing to stdout would mean that the data would have to be carried over the rpc connection, right?\n\nYes, would that be a problem?",
      "created_at" : "2023-04-30T13:33:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1529027307",
      "id" : 1529027307,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585bIxrr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1529027307/reactions"
      },
      "updated_at" : "2023-04-30T13:33:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1529027307",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6470319?v=4",
         "events_url" : "https://api.github.com/users/RCasatta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/RCasatta/followers",
         "following_url" : "https://api.github.com/users/RCasatta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/RCasatta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/RCasatta",
         "id" : 6470319,
         "login" : "RCasatta",
         "node_id" : "MDQ6VXNlcjY0NzAzMTk=",
         "organizations_url" : "https://api.github.com/users/RCasatta/orgs",
         "received_events_url" : "https://api.github.com/users/RCasatta/received_events",
         "repos_url" : "https://api.github.com/users/RCasatta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/RCasatta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/RCasatta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/RCasatta"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "There is no way we can currently send gigabytes of data as an RPC response; both the server and client likely buffer the result and would OOM.",
      "created_at" : "2023-04-30T13:37:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1529027970",
      "id" : 1529027970,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585bIx2C",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1529027970/reactions"
      },
      "updated_at" : "2023-04-30T13:37:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1529027970",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for the patch @TheCharlatan, I applied it.",
      "created_at" : "2023-04-30T14:43:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1529041350",
      "id" : 1529041350,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585bI1HG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1529041350/reactions"
      },
      "updated_at" : "2023-04-30T14:43:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1529041350",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I ran some more numbers, dumping a mainnet snapshot on height 787535:\r\n\r\n| Filename        | Size (bytes) |\r\n|-----------------|--------------|\r\n| this_branch.dat |  4'697'836'541  |\r\n| this_branch.tar.xz | 3'899'452'268 |\r\n| master.dat      |  5'718'308'597  |\r\n| master.tar.xz   |  3'925'608'176  |\r\n\r\nSo even in the compressed form the encoding saves some megabytes. ",
      "created_at" : "2023-04-30T16:24:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1529067823",
      "id" : 1529067823,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585bI7kv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1529067823/reactions"
      },
      "updated_at" : "2023-04-30T16:24:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1529067823",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 7acfc2a221237877aa3522266cac6c326ae7fe8e\r\n\r\nSince we are changing the format of dumptxoutset anyway here in a non backwards compatible fashion, I'd like to suggest moving the metadata to the end of the file. This would take care of the double iteration described in https://github.com/bitcoin/bitcoin/pull/26045#pullrequestreview-1403015467. In my eyes, this does not significantly hurt the integrity of the file. If an exception occurs during writing, only the temporary file remains. Other common file formats also embed metadata at the end.",
      "created_at" : "2023-05-01T07:27:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1529437357",
      "id" : 1529437357,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585bKVyt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1529437357/reactions"
      },
      "updated_at" : "2023-05-01T07:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1529437357",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-07-06T22:10:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1624375634",
      "id" : 1624375634,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585g0gFS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1624375634/reactions"
      },
      "updated_at" : "2023-07-06T22:10:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1624375634",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Are you still working on this?",
      "created_at" : "2023-09-20T17:37:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1728171569",
      "id" : 1728171569,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585nAc4x",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1728171569/reactions"
      },
      "updated_at" : "2023-09-20T17:37:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1728171569",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased",
      "created_at" : "2023-09-24T09:35:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1732531315",
      "id" : 1732531315,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585nRFRz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1732531315/reactions"
      },
      "updated_at" : "2023-09-24T09:35:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1732531315",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2023-09-24T11:22:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1732548997",
      "id" : 1732548997,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585nRJmF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1732548997/reactions"
      },
      "updated_at" : "2023-09-24T11:22:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1732548997",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I cherry-picked 4250824efbe721a8b36f1b05c4280d144318872c on master @ 6619d6a8dca5a4d8e664a76526ac6bef3eb17831 to generate snapshots for signet and mainnet. The `txoutset_hash` is unchanged.\r\n\r\nI then cherry-picked 4250824efbe721a8b36f1b05c4280d144318872c on #28516 (which leads to a small conflict) to load the snapshots.\r\n\r\n**Signet**:\r\n```json\r\n{\r\n  \"coins_written\": 1278002,\r\n  \"base_hash\": \"0000003ca3c99aff040f2563c2ad8f8ec88bd0fd6b8f0895cfaf1ef90353a62c\",\r\n  \"base_height\": 160000,\r\n  \"txoutset_hash\": \"5225141cb62dee63ab3be95f9b03d60801f264010b1816d4bd00618b2736e7be\",\r\n  \"nchaintx\": 2289496\r\n}\r\n```\r\n\r\nThe snapshot is actually slightly bigger:\r\n\r\n```\r\n91425233 utxo-signet-160000.dat\r\n92892387 utxo-signet-160000-smaller.dat\r\n```\r\n\r\n**Mainnet**:\r\n\r\n\r\n```json\r\n{\r\n  \"coins_written\": 111535121,\r\n  \"base_hash\": \"00000000000000000002a7c4c1e48d76c5a37902165a270156b7a8d72728a054\",\r\n  \"base_height\": 800000,\r\n  \"txoutset_hash\": \"7d69b87512db3d13b9758ea32b93ce468d18cf7456fb5d250c9e1bed9339e4d2\",\r\n  \"nchaintx\": 868965226\r\n}\r\n```\r\n\r\nThe snapshot made by this PR is a gigabyte smaller.\r\n```\r\n7323553927 utxo-800000.dat\r\n6234254939 utxo-800000-smaller.dat\r\n```\r\n\r\nI succeeded in loading the signet snapshot and finishing background sync IBD. I also managed to load the mainnet snapshot, waited for it to reach the tip. I didn't wait for the for full background sync.\r\n\r\nHaven't reviewed the code yet.\r\n\r\nGiven the slight conflict with the main assume-utxo PR - and that we don't want to make @jamesob life ever harder - I suggest rebasing on top of it and marking this draft until that's merged.\r\n\r\n---\r\n\r\nAs an aside (this just tests the main PR), loading the block 800,000 snapshot and saving its chainstate to disk takes 10 minutes on my machine (AMD Ryzen 9 7950X, SSD drive for the main datadir, `-dbcache` set to 16GiB). During that time the background IBD reaches november 2011.\r\n\r\nOnce it starts using the snapshot, it reaches the almost-tip in 12 minutes (`-blocksdir` points to a spinning disk, downloaded from 1 Gbit internet, cache peaks at 3584 MiB). It then saves the new chainstate, resizes the caches which trigger a flush, but less than 2 minutes later we're at the real tip! And then the background sync takes over.\r\n\r\nCool stuff.",
      "created_at" : "2023-09-28T16:28:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1739652329",
      "id" : 1739652329,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585nsPzp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1739652329/reactions"
      },
      "updated_at" : "2023-09-28T16:31:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1739652329",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-10-02T21:56:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1743826274",
      "id" : 1743826274,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585n8K1i",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1743826274/reactions"
      },
      "updated_at" : "2023-10-02T21:56:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1743826274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "#27596 was just merged, so this PR will be easier to test if you rebase.",
      "created_at" : "2023-10-03T09:17:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1744566328",
      "id" : 1744566328,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585n-_g4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1744566328/reactions"
      },
      "updated_at" : "2023-10-03T09:17:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1744566328",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-10-23T19:22:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26045#issuecomment-1775877516",
      "id" : 1775877516,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26045",
      "node_id" : "IC_kwDOABII585p2b2M",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1775877516/reactions"
      },
      "updated_at" : "2023-10-23T19:22:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1775877516",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
