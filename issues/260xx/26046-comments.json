[
   {
      "author_association" : "NONE",
      "body" : "I've read a bit there may be some worry about people leaking their xpub and an address's key since it's using non-hardened derivation. I would argue that making dumpprivkey function would actually be a much safer scenario than making less technical or just unlucky people \"figure it out\" with their xpriv and descriptors since:\r\n\r\nOption 1) dumprivkey - maximum leaked data is the private key of one address\r\n\r\nOption 2) listdescriptors + derivation - copy/pasting xprv into unknown 3rd party software which may be malicious (compromising entire wallet), them asking people for \"help\" and getting scammed, etc.\r\n\r\nThere are also things like clipboard monitoring viruses, which again the potential damage there is the private key of one address versus the xprv of the entire wallet.\r\n\r\nOverall I think it's actually much safer to make dumpprivkey work normally.",
      "created_at" : "2022-09-08T08:07:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26046#issuecomment-1240374087",
      "id" : 1240374087,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26046",
      "node_id" : "IC_kwDOABII585J7ptH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1240374087/reactions"
      },
      "updated_at" : "2022-09-08T08:07:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1240374087",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7625236?v=4",
         "events_url" : "https://api.github.com/users/Crypto2/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypto2/followers",
         "following_url" : "https://api.github.com/users/Crypto2/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypto2/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypto2",
         "id" : 7625236,
         "login" : "Crypto2",
         "node_id" : "MDQ6VXNlcjc2MjUyMzY=",
         "organizations_url" : "https://api.github.com/users/Crypto2/orgs",
         "received_events_url" : "https://api.github.com/users/Crypto2/received_events",
         "repos_url" : "https://api.github.com/users/Crypto2/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypto2/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypto2/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypto2"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Option 1) dumprivkey - maximum leaked data is the private key of one address\r\n\r\nNo, it is not. The maximum leaked data is the xprv of the parent. It sounds like you misunderstand the concern with the parent xpub and child private key - given a parent xpub and a child private key derived with unhardened derivation, the parent xprv can be computed. It is far less obvious that this is the case, and therefore far more dangerous than retrieving the xprv. The xprv is more obviously something that is meant to be kept secret.",
      "created_at" : "2022-09-08T16:54:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26046#issuecomment-1240974989",
      "id" : 1240974989,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26046",
      "node_id" : "IC_kwDOABII585J98aN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1240974989/reactions"
      },
      "updated_at" : "2022-09-08T16:54:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1240974989",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "It sounds like you misunderstood? dumpprivkey doesn't return the xpub as well; that would have to be leaked separately.\r\n\r\nGiven only the address + address privkey there is no danger. This could also require a special config entry to enable if you want to be extra secure; really just for dumpprivkey in general not even specific to these address types. In crypto it's not even really acceptable have a user running their own wallet and want the private key to their own address and be like \"Nah, we don't trust you with that\" lol.",
      "created_at" : "2022-09-08T17:31:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26046#issuecomment-1241022122",
      "id" : 1241022122,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26046",
      "node_id" : "IC_kwDOABII585J-H6q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1241022122/reactions"
      },
      "updated_at" : "2022-09-08T17:35:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1241022122",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7625236?v=4",
         "events_url" : "https://api.github.com/users/Crypto2/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypto2/followers",
         "following_url" : "https://api.github.com/users/Crypto2/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypto2/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypto2",
         "id" : 7625236,
         "login" : "Crypto2",
         "node_id" : "MDQ6VXNlcjc2MjUyMzY=",
         "organizations_url" : "https://api.github.com/users/Crypto2/orgs",
         "received_events_url" : "https://api.github.com/users/Crypto2/received_events",
         "repos_url" : "https://api.github.com/users/Crypto2/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypto2/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypto2/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypto2"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The point is that users will have to both know that they can't share the xpub with anyone they may have shared a child private key with, or vice versa, and remember this at a future time when they may wish to share such information with others. Furthermore, just with your example of clipboard malware, the malware that steals the child private key can also now get the entire xprv as xpubs are not encrypted - it can get the private key from the clipboard, and the xpub by reading the wallet database from disk. And since users are unlikely to know about this possibility, we should make it harder for users to shoot themselves in the foot.\r\n\r\n> In crypto it's not even really acceptable have a user running their own wallet and want the private key to their own address and be like \"Nah, we don't trust you with that\" lol.\r\n\r\nWe give them the xprv. That's way more information than just a single private key. We already don't trust users with a lot of things. We try to avoid giving people the ability to footgun themselves. Frankly, the biggest threat to a user's Bitcoin is the user themselves.",
      "created_at" : "2022-09-08T17:44:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26046#issuecomment-1241036127",
      "id" : 1241036127,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26046",
      "node_id" : "IC_kwDOABII585J-LVf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1241036127/reactions"
      },
      "updated_at" : "2022-09-08T17:46:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1241036127",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Exactly, that's why dumpprivkey is the better solution since it minimizes those risks. Yes, give them warnings and/or force them to add a config option; but at the end of the day it's safer than having people who don't know what they are doing playing around with their xprv's with much less warning than that about the dangers of it.",
      "created_at" : "2022-09-08T18:19:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26046#issuecomment-1241068970",
      "id" : 1241068970,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26046",
      "node_id" : "IC_kwDOABII585J-TWq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1241068970/reactions"
      },
      "updated_at" : "2022-09-08T18:19:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1241068970",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7625236?v=4",
         "events_url" : "https://api.github.com/users/Crypto2/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypto2/followers",
         "following_url" : "https://api.github.com/users/Crypto2/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypto2/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypto2",
         "id" : 7625236,
         "login" : "Crypto2",
         "node_id" : "MDQ6VXNlcjc2MjUyMzY=",
         "organizations_url" : "https://api.github.com/users/Crypto2/orgs",
         "received_events_url" : "https://api.github.com/users/Crypto2/received_events",
         "repos_url" : "https://api.github.com/users/Crypto2/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypto2/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypto2/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypto2"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I really don't think we should support `dumpprivkey` for descriptor wallets; that's:\r\n\r\n* a huge footgun; you can't tell from a dumped key whether it'll leak your entire wallet or not, as it depends on whether it was hardened or non-hardened. This concern didn't exist with legacy wallets as they were always hardened, but descriptor wallets are by default non-hardened. If your keys are derived in a non-hardened way, all keys should be considered to really be representations of the same secret material, and exporting one is the same as exporting all. And when exporting the private descriptor (which includes the xprv), it's obvious you are exporting everything.\r\n* It's just the wrong direction to move in, as descriptor wallets aren't key-centric anymore (multisig descriptors are first class wallets, and can't support this cleanly).\r\n\r\nWhat do you think about alternatively providing an RPC or a tool that can derive and return the private keys involved in a descriptor?",
      "created_at" : "2022-09-12T20:30:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26046#issuecomment-1244396125",
      "id" : 1244396125,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26046",
      "node_id" : "IC_kwDOABII585KK_pd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1244396125/reactions"
      },
      "updated_at" : "2022-09-12T20:33:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1244396125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I proposed the https://github.com/bitcoin/bitcoin/pull/25366 to address this issue,  but there are risks that are also mentioned here.\r\n\r\nEDIT: I wasn't remembering, but I removed the private key(s) from the RPC return as requested by the reviewers, but you can check the PR description and the discussion for the original results (which included the private keys).",
      "created_at" : "2022-09-13T00:05:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/26046#issuecomment-1244728290",
      "id" : 1244728290,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26046",
      "node_id" : "IC_kwDOABII585KMQvi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1244728290/reactions"
      },
      "updated_at" : "2022-09-13T00:13:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1244728290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   }
]
