[
   {
      "body" : "Drool.  Very nice.\r\n",
      "created_at" : "2013-12-02T05:30:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29595498",
      "id" : 29595498,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-02T05:30:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29595498",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "fdatasync is defined as fcntl(fd, F_FULLFSYNC, 0) on os x\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/master/src/leveldb/port/port_posix.h#L72",
      "created_at" : "2013-12-02T06:29:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29597117",
      "id" : 29597117,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-02T06:30:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29597117",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "Good!\r\n\r\nBTW: I suppose not using mmap here also reduces virtual memory requirements for leveldb?",
      "created_at" : "2013-12-02T06:33:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29597247",
      "id" : 29597247,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-02T06:37:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29597247",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "possibly, i haven't checked.",
      "created_at" : "2013-12-02T07:00:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29597998",
      "id" : 29597998,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-02T07:00:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29597998",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "@laanwj Correct, it should.  Even though leveldb's mmap'd pages are file-backed and discardable by the OS at any time [after writeout, if dirty], they still require virtual address space to be allocated -- which is in limited supply on 32-bit platforms.",
      "created_at" : "2013-12-02T07:01:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29598049",
      "id" : 29598049,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-02T07:02:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29598049",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "https://bitcointalk.org/index.php?topic=337294.msg3718821#msg3718821\r\nThe 0.8.5-OMG7-no-mmap variant build includes this patch.  @toffoo and @coblee are testing it.",
      "created_at" : "2013-12-02T07:49:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29599679",
      "id" : 29599679,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-02T07:49:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29599679",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/93665?v=3",
         "events_url" : "https://api.github.com/users/wtogami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wtogami/followers",
         "following_url" : "https://api.github.com/users/wtogami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wtogami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wtogami",
         "id" : 93665,
         "login" : "wtogami",
         "organizations_url" : "https://api.github.com/users/wtogami/orgs",
         "received_events_url" : "https://api.github.com/users/wtogami/received_events",
         "repos_url" : "https://api.github.com/users/wtogami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wtogami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wtogami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wtogami"
      }
   },
   {
      "body" : "Can you please squash this into a single commit? That makes cherry-picking it to 0.8.6 more straightforward as the second commit is a fix for the first one not an independent change.",
      "created_at" : "2013-12-02T08:50:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29602125",
      "id" : 29602125,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-02T08:50:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29602125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Do we really want to disable mmap outside of OS X? The issues if any are *not* in LevelDB, they are in MacOS X. If it's a loss then I'm not sure it makes sense to hurt performance on platforms that work correctly.",
      "created_at" : "2013-12-02T17:25:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29638137",
      "id" : 29638137,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-02T17:25:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29638137",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@mikehearn there is pretty clearly a problem with the way os x handles the interaction of mmap and normal io; however given that this is change has effectively no negative impact on performance and is considerably simpler logic than the mmap version, i think it should be used on all posix platforms.\r\n\r\n(indeed I've been advocating for replacing leveldb entirely with a BitcoinKVDB but who has time for that...)",
      "created_at" : "2013-12-02T19:05:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29646991",
      "id" : 29646991,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-02T19:05:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29646991",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "@mikehearn Agreed that Linux probably has a sane mmap :)  However, besides OSX, no-mmap should hopefully extend the lifetime of Windows/32-bit by reducing virtual address space usage.\r\n",
      "created_at" : "2013-12-02T19:36:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29649821",
      "id" : 29649821,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-02T19:36:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29649821",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "I went back and ran initial block sync to block 200k.\r\n\r\nmmap took 622 seconds\r\nwrite took 646 seconds\r\n\r\nthat's ~4%\r\n\r\n@jgarzik this patch only addresses mmap on posix however something very similar could be done there (i have no idea what the performance impact would be)",
      "created_at" : "2013-12-02T20:20:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29653731",
      "id" : 29653731,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-02T20:20:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29653731",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "@pstratem The PosixWriteableFile class should be fixed to do SyncDirIfManifest (similar to PosixMmapFile) before this goes into production ...",
      "created_at" : "2013-12-02T21:47:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29661097",
      "id" : 29661097,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-02T21:47:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29661097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5597917?v=3",
         "events_url" : "https://api.github.com/users/madthanu/events{/privacy}",
         "followers_url" : "https://api.github.com/users/madthanu/followers",
         "following_url" : "https://api.github.com/users/madthanu/following{/other_user}",
         "gists_url" : "https://api.github.com/users/madthanu/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/madthanu",
         "id" : 5597917,
         "login" : "madthanu",
         "organizations_url" : "https://api.github.com/users/madthanu/orgs",
         "received_events_url" : "https://api.github.com/users/madthanu/received_events",
         "repos_url" : "https://api.github.com/users/madthanu/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/madthanu/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/madthanu/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/madthanu"
      }
   },
   {
      "body" : "On the issue tracker, Sanjay comments that he experimented with a no-mmap approach as well, and it seems they're considering it.",
      "created_at" : "2013-12-02T22:49:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29666441",
      "id" : 29666441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-02T22:49:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29666441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "call SyncDirIfManifest as @madthanu pointed out",
      "created_at" : "2013-12-03T00:56:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29674190",
      "id" : 29674190,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-03T00:56:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29674190",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "https://bitcointalk.org/index.php?topic=337294.msg3718821#msg3718821\r\nTwo separate Bitcoin builds are available for testing.\r\n\r\n* mactest1 build contains @rescrv's #3327 and follows https://github.com/bitcoin/bitcoin/commits/0.8.6\r\n* OMG8 contains #3340 and follows https://github.com/litecoin-project/bitcoinomg/commits/0.8.5-OMG8",
      "created_at" : "2013-12-03T06:48:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29687177",
      "id" : 29687177,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-03T06:48:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29687177",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/93665?v=3",
         "events_url" : "https://api.github.com/users/wtogami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wtogami/followers",
         "following_url" : "https://api.github.com/users/wtogami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wtogami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wtogami",
         "id" : 93665,
         "login" : "wtogami",
         "organizations_url" : "https://api.github.com/users/wtogami/orgs",
         "received_events_url" : "https://api.github.com/users/wtogami/received_events",
         "repos_url" : "https://api.github.com/users/wtogami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wtogami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wtogami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wtogami"
      }
   },
   {
      "body" : "Are we going to do the mmap change for all platforms, or just for MacOSX?\r\n(see https://github.com/litecoin-project/bitcoinomg/commit/71eb4af for a patch that makes this OSX-only)\r\nI think there's something to be said for both;\r\n\r\nAdvantages to merge it for all Posix platforms:\r\n- Total virtual memory usage goes down, giving 32-bit architectures some breathing room\r\n- Consistency\r\n\r\nAdvantages to merge it for MacOSX only:\r\n- Minimize risk\r\n- Prevent ~4% performance drop with bitcoin workloads on other Posix platforms\r\n\r\n",
      "created_at" : "2013-12-05T08:11:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-29878606",
      "id" : 29878606,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-05T08:11:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29878606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "This is included in a leveldb upgrade to 1.15\r\n \t\r\n- switched from mmap based writing to simpler stdio based writing. Has\r\n  a minor impact (0.5 microseconds) on microbenchmarks for asynchronous\r\n  writes. Synchronous writes speed up from 30ms to 10ms on linux/ext4.\r\n  Should be much more reliable on diverse platforms.",
      "created_at" : "2013-12-11T16:01:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-30332934",
      "id" : 30332934,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-11T16:01:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30332934",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Well, the implementation in leveldb 1.15 is by Sanjay (one of LevelDB's primary authors), not the one from this PR.",
      "created_at" : "2013-12-11T17:27:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-30341606",
      "id" : 30341606,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-11T17:27:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30341606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Yes, I just thought I'd mention it, it probably doesn't make sense to merge both...\r\n",
      "created_at" : "2013-12-11T17:30:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-30341970",
      "id" : 30341970,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-11T17:30:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30341970",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I'd recommend using Sanjay's implementation because it uses userspace-buffered I/O, which will give higher performance than this PR.  If it matters, it'll also minimize drift between upstream and the carried LevelDB code.",
      "created_at" : "2013-12-11T22:24:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-30370680",
      "id" : 30370680,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-11T22:24:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30370680",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1453649?v=3",
         "events_url" : "https://api.github.com/users/rescrv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rescrv/followers",
         "following_url" : "https://api.github.com/users/rescrv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rescrv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rescrv",
         "id" : 1453649,
         "login" : "rescrv",
         "organizations_url" : "https://api.github.com/users/rescrv/orgs",
         "received_events_url" : "https://api.github.com/users/rescrv/received_events",
         "repos_url" : "https://api.github.com/users/rescrv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rescrv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rescrv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rescrv"
      }
   },
   {
      "body" : "I actually had a version of this that had an internal cache, the performance improvement was surprisingly small.",
      "created_at" : "2013-12-11T22:27:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-30370899",
      "id" : 30370899,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-11T22:27:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30370899",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "I've added a 1 MB buffer (I have not extensively reviewed it for correctness!)\r\n\r\nI could not measure any performance difference for a single thread, which is the only test I tried (or really care about)",
      "created_at" : "2013-12-11T23:11:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-30374377",
      "id" : 30374377,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-11T23:11:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30374377",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "I don't really care about write performance, and I certainly prefer keeping a small diff with upstream.",
      "created_at" : "2013-12-11T23:27:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-30375524",
      "id" : 30375524,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-11T23:27:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30375524",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/b1a4f7e75864dafdf5be8eda20bbabeb5788150c for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2013-12-11T23:34:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-30375942",
      "id" : 30375942,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-11T23:34:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30375942",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "+1 for tracking upstream as closely as we can.\r\n",
      "created_at" : "2013-12-11T23:44:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-30376522",
      "id" : 30376522,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-11T23:44:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30376522",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "I'm pleased that we have a seemingly working implementation in 0.8.6.  Please take due care in validating the long-term 0.9 solution.\r\n\r\nFWIW, as 1.15 is favored, Bitcoin OMG's next build will expose that to users for early real-world testing.",
      "created_at" : "2013-12-12T06:13:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-30391772",
      "id" : 30391772,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-12T06:13:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30391772",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/93665?v=3",
         "events_url" : "https://api.github.com/users/wtogami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wtogami/followers",
         "following_url" : "https://api.github.com/users/wtogami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wtogami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wtogami",
         "id" : 93665,
         "login" : "wtogami",
         "organizations_url" : "https://api.github.com/users/wtogami/orgs",
         "received_events_url" : "https://api.github.com/users/wtogami/received_events",
         "repos_url" : "https://api.github.com/users/wtogami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wtogami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wtogami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wtogami"
      }
   },
   {
      "body" : "See #3405 for LevelDB 1.15.",
      "created_at" : "2013-12-12T21:25:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-30463343",
      "id" : 30463343,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-12T21:25:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30463343",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Superceded by #3405 ",
      "created_at" : "2013-12-13T00:03:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3340#issuecomment-30474968",
      "id" : 30474968,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3340",
      "updated_at" : "2013-12-13T00:03:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30474968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   }
]
