[
   {
      "author_association" : "NONE",
      "body" : "Related: #19463 ",
      "created_at" : "2021-07-11T13:25:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21267#issuecomment-877799613",
      "id" : 877799613,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21267",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3Nzc5OTYxMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-11T13:25:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877799613",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4075106?v=4",
         "events_url" : "https://api.github.com/users/andronoob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andronoob/followers",
         "following_url" : "https://api.github.com/users/andronoob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andronoob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andronoob",
         "id" : 4075106,
         "login" : "andronoob",
         "node_id" : "MDQ6VXNlcjQwNzUxMDY=",
         "organizations_url" : "https://api.github.com/users/andronoob/orgs",
         "received_events_url" : "https://api.github.com/users/andronoob/received_events",
         "repos_url" : "https://api.github.com/users/andronoob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andronoob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andronoob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andronoob"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Also related: https://github.com/bitcoin/bitcoin/issues/23727 and https://github.com/bitcoin/bitcoin/pull/23549",
      "created_at" : "2022-07-21T16:05:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21267#issuecomment-1191670987",
      "id" : 1191670987,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21267",
      "node_id" : "IC_kwDOABII585HB3TL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1191670987/reactions"
      },
      "updated_at" : "2022-07-21T16:05:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1191670987",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7445670?v=4",
         "events_url" : "https://api.github.com/users/chrisguida/events{/privacy}",
         "followers_url" : "https://api.github.com/users/chrisguida/followers",
         "following_url" : "https://api.github.com/users/chrisguida/following{/other_user}",
         "gists_url" : "https://api.github.com/users/chrisguida/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/chrisguida",
         "id" : 7445670,
         "login" : "chrisguida",
         "node_id" : "MDQ6VXNlcjc0NDU2NzA=",
         "organizations_url" : "https://api.github.com/users/chrisguida/orgs",
         "received_events_url" : "https://api.github.com/users/chrisguida/received_events",
         "repos_url" : "https://api.github.com/users/chrisguida/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/chrisguida/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/chrisguida/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/chrisguida"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Also related: https://github.com/bitcoin/bitcoin/pull/25957",
      "created_at" : "2022-11-08T01:38:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21267#issuecomment-1306490260",
      "id" : 1306490260,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21267",
      "node_id" : "IC_kwDOABII585N33WU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1306490260/reactions"
      },
      "updated_at" : "2022-11-08T01:38:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1306490260",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm not sure how the wallet could initiate the download of the missing blocks considering the `libbitcoin_wallet` is not linked with any node related code, which is expected.\r\nMaybe an alternative could be to print the missing blocks after a rescanblockchain or importdescriptors and let the user manually run `getblockfrompeer`? (with an option to make it precious?)\r\n\r\nSuch as:\r\n\r\n```\r\n./src/bitcoin-cli rescanblockchain 149000 170000\r\n{\r\n  \"status\": \"failure\",\r\n  \"start_height\": 149000,\r\n  \"stop_height\": 170000,\r\n  \"missing_blocks\": [\r\n    \"000000000004b2eefb71b225f425b99266c81acee1dbe720400086f0bfa38674\",\r\n    \"0000000000005e5fd51f764d230441092f1b69d1a1eeab334c5bb32412e8dc51\",\r\n    \"0000000073cd77cb31cc16969808eb2cc426cfce6388ccb883de25671d410d87\"\r\n  ]\r\n}\r\n```\r\n\r\nThat might be troublesome if there are a lot of missing blocks though.",
      "created_at" : "2022-11-23T15:32:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21267#issuecomment-1325261057",
      "id" : 1325261057,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21267",
      "node_id" : "IC_kwDOABII585O_eEB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1325261057/reactions"
      },
      "updated_at" : "2022-11-23T15:32:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1325261057",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "NONE",
      "body" : ">That might be troublesome if there are a lot of missing blocks though.\r\n\r\nBy design there will be false positives so that some privacy can be retained. Those possibly related (not necessarily missing) blocks should then be fetched from different peers to enhance that privacy protection, or even better, fetched through different Tor circuits.",
      "created_at" : "2022-11-25T03:51:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21267#issuecomment-1326995827",
      "id" : 1326995827,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21267",
      "node_id" : "IC_kwDOABII585PGFlz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1326995827/reactions"
      },
      "updated_at" : "2022-11-25T03:51:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1326995827",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4075106?v=4",
         "events_url" : "https://api.github.com/users/andronoob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andronoob/followers",
         "following_url" : "https://api.github.com/users/andronoob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andronoob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andronoob",
         "id" : 4075106,
         "login" : "andronoob",
         "node_id" : "MDQ6VXNlcjQwNzUxMDY=",
         "organizations_url" : "https://api.github.com/users/andronoob/orgs",
         "received_events_url" : "https://api.github.com/users/andronoob/received_events",
         "repos_url" : "https://api.github.com/users/andronoob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andronoob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andronoob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andronoob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm actually half-way (almost ready with the PoC) through implementing a sync mode that fetches the missing (pruned) blocks from peers based on whether they match or not the filters (by first syncing-up the filters-chain from the network if it was not previously stored on the node). Started it ~2 months ago.\r\nWill push the project PR in few weeks with all the details etc :). Then start decoupling it into smaller PRs.",
      "created_at" : "2022-11-25T14:30:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21267#issuecomment-1327551658",
      "id" : 1327551658,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21267",
      "node_id" : "IC_kwDOABII585PINSq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 2,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1327551658/reactions"
      },
      "updated_at" : "2022-11-26T00:02:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1327551658",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@furszy are you still working on this?",
      "created_at" : "2023-03-22T10:57:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21267#issuecomment-1479349534",
      "id" : 1479349534,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21267",
      "node_id" : "IC_kwDOABII585YLRUe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1479349534/reactions"
      },
      "updated_at" : "2023-03-22T10:57:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1479349534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yeah @darosior, thanks for the ping. Let's update this issue.\r\n\r\nI do have a running version of this. And the complete project extends beyond this use case actually.\r\n\r\nAs is often the case, the working path hasn't been as straight as expected. I have been improving orthogonal components in parallel to make the end result cleaner and more usable. For example, to make the mainnet live tests less painful, have created #26966 which reduces the time it takes for the block filter index to sync from ~7 hours down to less than 45 minutes. Although this sidetracked me from the project's end goal, it was ultimately worth the effort.\r\n\r\nAlso have to add that, while the 'all-in-one' project branch is functional, it still could benefit from some refactoring and consolidation rounds. And to address it, have started decoupling parts of it into sub-projects. The mentioned #26966 is one of them, all the refactoring commits were extracted from that branch (so it would be great if that PR starts getting reviewed).\r\n\r\nThe plan is to keep pushing sub-projects forward so that the overall picture becomes clearer. Just matter of staying on track and continue making progress.",
      "created_at" : "2023-03-22T14:33:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21267#issuecomment-1479678755",
      "id" : 1479678755,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21267",
      "node_id" : "IC_kwDOABII585YMhsj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1479678755/reactions"
      },
      "updated_at" : "2023-03-22T19:46:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1479678755",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Two more PRs added to the public ground-work queue:\r\n\r\n* [#27837](https://github.com/bitcoin/bitcoin/pull/27837): This work will allow us to keep track of the filter matching requested blocks. It is dependent on [#27836](https://github.com/bitcoin/bitcoin/pull/27836), which also contain parts of the blocks fetching process in the all-in-one branch like the random peer selection method and the `FetchBlock` error handling for network limited peers.\r\n* [#27607](https://github.com/bitcoin/bitcoin/pull/27607): This work, along with [#27720](https://github.com/bitcoin/bitcoin/pull/27720) and [#27708](https://github.com/bitcoin/bitcoin/pull/27708) (both of which have already been merged), aims to simplify [#24230](https://github.com/bitcoin/bitcoin/pull/24230). The focus here is to prepare the ground for [#26966](https://github.com/bitcoin/bitcoin/pull/26966) and the storage of block filters coming from the wire.\r\n\r\nWill keep pushing progress.",
      "created_at" : "2023-06-18T21:01:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21267#issuecomment-1596268854",
      "id" : 1596268854,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21267",
      "node_id" : "IC_kwDOABII585fJSE2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1596268854/reactions"
      },
      "updated_at" : "2023-06-18T21:01:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1596268854",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Is there an initial version for testing, perhaps?",
      "created_at" : "2023-06-22T20:56:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21267#issuecomment-1603303747",
      "id" : 1603303747,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21267",
      "node_id" : "IC_kwDOABII585fkHlD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1603303747/reactions"
      },
      "updated_at" : "2023-06-22T20:56:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1603303747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/111286121?v=4",
         "events_url" : "https://api.github.com/users/GregTonoski/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GregTonoski/followers",
         "following_url" : "https://api.github.com/users/GregTonoski/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GregTonoski/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GregTonoski",
         "id" : 111286121,
         "login" : "GregTonoski",
         "node_id" : "U_kgDOBqIXaQ",
         "organizations_url" : "https://api.github.com/users/GregTonoski/orgs",
         "received_events_url" : "https://api.github.com/users/GregTonoski/received_events",
         "repos_url" : "https://api.github.com/users/GregTonoski/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GregTonoski/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GregTonoski/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GregTonoski"
      }
   }
]
