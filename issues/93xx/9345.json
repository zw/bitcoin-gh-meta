{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "getdata block requests continue to be sent for a short while after shutdown is requested, according to my debug.log:-\r\n\r\n```\r\n2016-12-14 04:17:02.186618 Interrupt: Setting fRequestShutdown to true\r\n2016-12-14 04:17:02.242689 recv block 000000000000000001308dd3497017f3054bd962872c74dc05bf87a4c1be896d (427478) age=106.0days size=946949 peer=0\r\n2016-12-14 04:17:02.288464 BLOCKED - count (1) reached peer=0\r\n2016-12-14 04:17:02.288568 send getdata block 0000000000000000039213c4a24d056ce0892f9b64fa1d51ca9138db99f991d6 (427755) age=104.0days peer=0\r\n2016-12-14 04:17:02.290855 BLOCKED - count (5) reached peer=13\r\n2016-12-14 04:17:02.290919 send getdata block 0000000000000000025f0e34d50dbd6c48817a9f39af8f74cddf5e628c8bfebe (427762) age=104.0days peer=13\r\n2016-12-14 04:17:02.290969 send getdata block 000000000000000003674eab9860bf52bb23c16323ea6493067571de30c59089 (427767) age=103.9days peer=13\r\n2016-12-14 04:17:02.291016 send getdata block 000000000000000002c738515d37c408f23880b2b28587daf8dfefb439e906de (427772) age=103.9days peer=13\r\n2016-12-14 04:17:02.291061 send getdata block 0000000000000000031e6258d0258f299d07c991e51f7fed3b465a30ecc05582 (427777) age=103.9days peer=13\r\n2016-12-14 04:17:02.291114 send getdata block 000000000000000000937b7ca9b7753eea5d3b572a39ebaac8e2e645942fdb02 (427782) age=103.8days peer=13\r\n2016-12-14 04:17:02.345097 recv block 0000000000000000026f824276aad5948f3fd84f5790eeab9a186c38ebda8499 (427325) age=107.0days size=710333 peer=13\r\n2016-12-14 04:17:02.443337 Interrupting HTTP RPC server\r\n2016-12-14 04:17:02.491357 Incoming block (464916 of 721607 bytes) chk=5e526b36 from peer=13\r\n2016-12-14 04:17:02.531167 Interrupting RPC\r\n2016-12-14 04:17:02.613689 recv block 000000000000000004b72fd635e25022a63c2c04c28e80d97e2dcc7feadc59b7 (427445) age=106.1days size=998199 peer=21\r\n2016-12-14 04:17:02.659374 BLOCKED - count (1) reached peer=21\r\n2016-12-14 04:17:02.659474 send getdata block 0000000000000000042f305fe2a1dcaa2ea0886a045b056d40aea81f15490765 (427759) age=104.0days peer=21\r\n2016-12-14 04:17:02.764973 Incoming block (70056 of 998219 bytes) chk=885412c0 from peer=0\r\n2016-12-14 04:17:02.831709 tor: Thread interrupt\r\n2016-12-14 04:17:02.831834 RemoveLocal(j2hehmestxfpylx4.onion:8333)\r\n2016-12-14 04:17:02.925820 torcontrol thread exit\r\n2016-12-14 04:17:03.126485 addcon thread interrupt\r\n2016-12-14 04:17:03.126534 scheduler thread interrupt\r\n2016-12-14 04:17:03.126600 net thread interrupt\r\n2016-12-14 04:17:03.126652 msghand thread interrupt\r\n2016-12-14 04:17:03.249263 opencon thread interrupt\r\n2016-12-14 04:17:03.269874 Shutdown: In progress...\r\n2016-12-14 04:17:03.269985 Stopping HTTP RPC server\r\n2016-12-14 04:17:03.284170 Stopping RPC\r\n2016-12-14 04:17:03.284937 RPC stopped.\r\n2016-12-14 04:17:03.325594 Stop\r\n2016-12-14 04:17:03.325687 Flushing 872 addresses to peers.dat...\r\n2016-12-14 04:17:04.464104 Flushed 872 addresses to peers.dat  1138ms\r\n2016-12-14 04:17:04.669715 Dumped mempool: 0.013966s to copy, 0.061317s to dump\r\n2016-12-14 04:17:06.236354 Shutdown: done\r\n```\r\n\r\nwill submit a PR to fix this shortly",
   "closed_at" : "2017-02-02T00:35:12Z",
   "closed_by" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/1530283?v=4",
      "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
      "followers_url" : "https://api.github.com/users/rebroad/followers",
      "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/rebroad",
      "id" : 1530283,
      "login" : "rebroad",
      "organizations_url" : "https://api.github.com/users/rebroad/orgs",
      "received_events_url" : "https://api.github.com/users/rebroad/received_events",
      "repos_url" : "https://api.github.com/users/rebroad/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/rebroad"
   },
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9345/comments",
   "created_at" : "2016-12-14T04:28:23Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9345/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/9345",
   "id" : 195437659,
   "labels" : [
      {
         "color" : "006b75",
         "default" : false,
         "id" : 98298007,
         "name" : "P2P",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9345/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 9345,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "messages still being sent and processed after shutdown requested",
   "updated_at" : "2017-02-02T00:35:12Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9345",
   "user" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/1530283?v=4",
      "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
      "followers_url" : "https://api.github.com/users/rebroad/followers",
      "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/rebroad",
      "id" : 1530283,
      "login" : "rebroad",
      "organizations_url" : "https://api.github.com/users/rebroad/orgs",
      "received_events_url" : "https://api.github.com/users/rebroad/received_events",
      "repos_url" : "https://api.github.com/users/rebroad/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/rebroad"
   }
}
