{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "### Describe the issue\r\n\r\nI haven't space enough on my SSD drive in my laptop to download the whole blockchain and I don't want use Bitcoin on Windows. So I decide to run the Bitcoin Core on a Linux distro (Lubuntu) as a Virtual Machine but I can't setup Bitcoin Core to use an external hard drive mounted as vsboxsf in it as my -datadir option.\r\n\r\n### Can you reliably reproduce the issue?\r\n#### If so, please list the steps to reproduce below:\r\n1. Run a Lubuntu Guest VM with VirtualBox and Windows 10 as Host\r\n2. Install bitcoin-qt and run it with -datadir option on a shared folder of an external hard drive mounted using vboxsf.\r\n\r\n### Expected behaviour\r\n\r\nShould open Bitcoin Core nicely and start synchronizing the blockchain using the external hard drive shared folder.\r\n\r\n### Actual behaviour\r\n\r\nPop up an error \"Error opening block database\" and close Bitcoin Core unexpectedly.\r\n\r\n### Screenshots.\r\n![virtualbox_lubuntu_03_07_2017_15_45_47](https://user-images.githubusercontent.com/28768905/27805013-7209bfe6-6008-11e7-8f25-4a306aa9b772.png)\r\n![virtualbox_lubuntu_03_07_2017_15_46_46](https://user-images.githubusercontent.com/28768905/27805014-722325e4-6008-11e7-9836-3dab502df0bb.png)\r\n\r\n\r\n### What version of bitcoin-core are you using?\r\nBitcoin Core v0.14.2.0-gfc61c83\r\n\r\n### Machine specs:\r\n\r\n- OS: Windows 10 Host - Lubuntu 17.04 VM Guest running on VirtualBox 5.1.22\r\n- CPU: Intel Core i7 CPU 2.20 GHz\r\n- RAM: 8 GB\r\n- Disk size: 223 GB SSD on my machine, 30 GB Virtual Disk for VM and 1 TB on External Hard Drive\r\n- Disk Type (HD/SDD): SSD\r\n\r\n### Any extra information that might be useful in the debugging process.\r\n\r\nMy **db.log** output:\r\n\r\n> 2017-07-03 18:41:58 Bitcoin version v0.14.2.0-gfc61c83\r\n2017-07-03 18:41:58 InitParameterInteraction: parameter interaction: -whitelistforcerelay=1 -> setting -whitelistrelay=1\r\n2017-07-03 18:41:59 Assuming ancestors of block 00000000000000000013176bf8d7dfeab4e1db31dc93bc311b436e82ab226b90 have valid signatures.\r\n2017-07-03 18:41:59 Default data directory /home/andre/.bitcoin\r\n2017-07-03 18:41:59 Using data directory /media/hd-externo/.bitcoin\r\n2017-07-03 18:41:59 Using config file /media/hd-externo/.bitcoin/bitcoin.conf\r\n2017-07-03 18:41:59 Using at most 125 automatic connections (1024 file descriptors available)\r\n2017-07-03 18:41:59 Using 32 MiB out of 32 requested for signature cache, able to store 1048576 elements\r\n2017-07-03 18:41:59 Using 2 threads for script verification\r\n2017-07-03 18:41:59 Using BerkeleyDB version Berkeley DB 4.8.30: (April  9, 2010)\r\n2017-07-03 18:41:59 Using wallet wallet.dat\r\n2017-07-03 18:41:59 init message: Verifying wallet...\r\n2017-07-03 18:41:59 scheduler thread start\r\n2017-07-03 18:41:59 CDBEnv::Open: LogDir=/media/hd-externo/.bitcoin/database ErrorFile=/media/hd-externo/.bitcoin/db.log\r\n2017-07-03 18:42:00 Bound to [::]:8333\r\n2017-07-03 18:42:00 Bound to 0.0.0.0:8333\r\n2017-07-03 18:42:00 Cache configuration:\r\n2017-07-03 18:42:00 * Using 2.0MiB for block index database\r\n2017-07-03 18:42:00 * Using 8.0MiB for chain state database\r\n2017-07-03 18:42:00 * Using 440.0MiB for in-memory UTXO set (plus up to 286.1MiB of unused mempool space)\r\n2017-07-03 18:42:00 init message: Loading block index...\r\n2017-07-03 18:42:00 Opening LevelDB in /media/hd-externo/.bitcoin/blocks/index\r\n2017-07-03 18:42:00 IO error: /media/hd-externo/.bitcoin/blocks/index: Invalid argument\r\n2017-07-03 18:42:24 init message: Loading block index...\r\n2017-07-03 18:42:24 Wiping LevelDB in /media/hd-externo/.bitcoin/blocks/index\r\n2017-07-03 18:42:24 Opening LevelDB in /media/hd-externo/.bitcoin/blocks/index\r\n2017-07-03 18:42:24 IO error: /media/hd-externo/.bitcoin/blocks/index: Invalid argument\r\n2017-07-03 18:42:26 scheduler thread interrupt\r\n2017-07-03 18:42:26 Shutdown: In progress...\r\n2017-07-03 18:42:26 Shutdown: done\r\n",
   "closed_at" : "2017-07-03T20:30:27Z",
   "closed_by" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/28768905?v=4",
      "events_url" : "https://api.github.com/users/aferreira44/events{/privacy}",
      "followers_url" : "https://api.github.com/users/aferreira44/followers",
      "following_url" : "https://api.github.com/users/aferreira44/following{/other_user}",
      "gists_url" : "https://api.github.com/users/aferreira44/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/aferreira44",
      "id" : 28768905,
      "login" : "aferreira44",
      "organizations_url" : "https://api.github.com/users/aferreira44/orgs",
      "received_events_url" : "https://api.github.com/users/aferreira44/received_events",
      "repos_url" : "https://api.github.com/users/aferreira44/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/aferreira44/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/aferreira44/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/aferreira44"
   },
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10737/comments",
   "created_at" : "2017-07-03T18:58:04Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10737/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/10737",
   "id" : 240245171,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10737/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 10737,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Error opening block database using a Virtual Machine and an External Hard Drive",
   "updated_at" : "2017-07-03T20:30:27Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10737",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/28768905?v=4",
      "events_url" : "https://api.github.com/users/aferreira44/events{/privacy}",
      "followers_url" : "https://api.github.com/users/aferreira44/followers",
      "following_url" : "https://api.github.com/users/aferreira44/following{/other_user}",
      "gists_url" : "https://api.github.com/users/aferreira44/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/aferreira44",
      "id" : 28768905,
      "login" : "aferreira44",
      "organizations_url" : "https://api.github.com/users/aferreira44/orgs",
      "received_events_url" : "https://api.github.com/users/aferreira44/received_events",
      "repos_url" : "https://api.github.com/users/aferreira44/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/aferreira44/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/aferreira44/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/aferreira44"
   }
}
