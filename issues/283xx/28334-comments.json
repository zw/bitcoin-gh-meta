[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28334).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [darosior](https://github.com/bitcoin/bitcoin/pull/28334#pullrequestreview-1592977421), [moonsettler](https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1691475593), [sipa](https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1691601715), [instagibbs](https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1693299012) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29280](https://github.com/bitcoin/bitcoin/pull/29280) (Implement OP_CHECKTEMPLATEVERIFY by reardencode)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-08-24T04:30:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1690982960",
      "id" : 1690982960,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585kylow",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1690982960/reactions"
      },
      "updated_at" : "2024-03-06T07:16:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1690982960",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Concept ACK!",
      "created_at" : "2023-08-24T11:08:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1691475593",
      "id" : 1691475593,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585k0d6J",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1691475593/reactions"
      },
      "updated_at" : "2023-08-24T11:08:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1691475593",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/90689674?v=4",
         "events_url" : "https://api.github.com/users/moonsettler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/moonsettler/followers",
         "following_url" : "https://api.github.com/users/moonsettler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/moonsettler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/moonsettler",
         "id" : 90689674,
         "login" : "moonsettler",
         "node_id" : "MDQ6VXNlcjkwNjg5Njc0",
         "organizations_url" : "https://api.github.com/users/moonsettler/orgs",
         "received_events_url" : "https://api.github.com/users/moonsettler/received_events",
         "repos_url" : "https://api.github.com/users/moonsettler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/moonsettler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/moonsettler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/moonsettler"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Added a commit to ensure that the mempool is at least enforcing the script rules that will be required for the next block. Not sure that's sensible: it only makes a difference if there's a rule in `GetBlockScriptFlags` that's not in `MANDATORY_SCRIPT_VERIFY_FLAGS`, and if there is such a rule, even with this patch, you could add a tx to the mempool prior to the rule becoming active, in which case it wouldn't magically be removed from the mempool when it became active. There's already a double check in the mining code (`test_block_validity`) which would prevent PoW being wasted on a block that included an invalid tx because it was somehow made it into the mempool.",
      "created_at" : "2023-08-24T11:13:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1691482037",
      "id" : 1691482037,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585k0fe1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1691482037/reactions"
      },
      "updated_at" : "2023-08-24T11:13:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1691482037",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2023-08-24T12:41:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1691601715",
      "id" : 1691601715,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585k08sz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1691601715/reactions"
      },
      "updated_at" : "2023-08-24T12:41:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1691601715",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> have -acceptnonstdtxn=1 skip the non-mandatory script checks,\r\n\r\nCan you give a bit of motivation for this second part?",
      "created_at" : "2023-08-24T16:55:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1692076369",
      "id" : 1692076369,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585k2wlR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1692076369/reactions"
      },
      "updated_at" : "2023-08-24T16:55:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1692076369",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > have -acceptnonstdtxn=1 skip the non-mandatory script checks,\r\n> \r\n> Can you give a bit of motivation for this second part?\r\n\r\nMostly that `STANDARD_SCRIPT_VERIFY_FLAGS` violations sounds like something that `acceptnonstdtxn` should allow. But some particular examples:\r\n\r\n * When investigating the btcd bugs that crashed lnd, I tried using an OP_SUCCESS to overcome the standard limits, but was blocked by these checks. IIRC I manually disabled them.\r\n * There was a discussion about being able to see inquisition txs on signet in mempool.space prior to them being mined, without having to run inquisition node software. `-acceptnonstdtxn` seemed like a way to make this possible, except it doesn't actually work. https://twitter.com/fiatjaf/status/1632710159163170821\r\n * It makes it hard to mess around with things on regtest https://twitter.com/4moonsettler/status/1694024772403834963",
      "created_at" : "2023-08-25T06:26:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1692833881",
      "id" : 1692833881,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585k5phZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1692833881/reactions"
      },
      "updated_at" : "2023-08-25T06:26:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1692833881",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28334#discussion_r1305234566"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28334"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305234566"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Probably this commit should be in its own PR since it touches block consensus code. I just wanted to make sure that there is a path forward to ensuring we don't introduce mempool bugs in future by updating consensus without also updating `MANDATORY_SCRIPT_VERIFY_FLAGS`. This gives compile time errors:\r\n\r\n```\r\nvalidation.cpp:2070:11: error: no viable overloaded '|='\r\n    flags |= SCRIPT_VERIFY_CLEANSTACK;\r\n```\r\n\r\nor\r\n\r\n```\r\nvalidation.cpp:2013:5: error: static_assert failed due to requirement '(16384U & MANDATORY_SCRIPT_VERIFY_FLAGS) == 16384U' \"MandatoryFlag not included in MANDATORY_SCRIPT_VERIFY_FLAGS\"\r\n....\r\nvalidation.cpp:2071:14: note: in instantiation of variable template specialization '(anonymous namespace)::MandatoryFlag<16384>' requested here\r\n    flags |= MandatoryFlag<SCRIPT_VERIFY_NULLFAIL>;\r\n```",
      "commit_id" : "a656ecc2465ff960efe1f42014ec29437e31e9a6",
      "created_at" : "2023-08-25T06:34:54Z",
      "diff_hunk" : "@@ -2016,33 +2042,33 @@ static unsigned int GetBlockScriptFlags(const CBlockIndex& block_index, const Ch\n     // mainnet.\n     // For simplicity, always leave P2SH+WITNESS+TAPROOT on except for the two\n     // violating blocks.\n-    uint32_t flags{SCRIPT_VERIFY_P2SH | SCRIPT_VERIFY_WITNESS | SCRIPT_VERIFY_TAPROOT};\n+    MandatoryFlags flags{MandatoryFlag<SCRIPT_VERIFY_P2SH | SCRIPT_VERIFY_WITNESS | SCRIPT_VERIFY_TAPROOT>};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#discussion_r1305234566",
      "id" : 1305234566,
      "line" : 2045,
      "node_id" : "PRRC_kwDOABII585NzEyG",
      "original_commit_id" : "a656ecc2465ff960efe1f42014ec29437e31e9a6",
      "original_line" : 2045,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 38,
      "pull_request_review_id" : 1595001044,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28334",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305234566/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-25T06:35:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305234566",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28334#discussion_r1305234598"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28334"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305234598"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This prevents `script_flag_exceptions` from adding rules; it can now only remove from the `P2SH, SEGWIT, TAPROOT` set.",
      "commit_id" : "a656ecc2465ff960efe1f42014ec29437e31e9a6",
      "created_at" : "2023-08-25T06:34:57Z",
      "diff_hunk" : "@@ -2016,33 +2042,33 @@ static unsigned int GetBlockScriptFlags(const CBlockIndex& block_index, const Ch\n     // mainnet.\n     // For simplicity, always leave P2SH+WITNESS+TAPROOT on except for the two\n     // violating blocks.\n-    uint32_t flags{SCRIPT_VERIFY_P2SH | SCRIPT_VERIFY_WITNESS | SCRIPT_VERIFY_TAPROOT};\n+    MandatoryFlags flags{MandatoryFlag<SCRIPT_VERIFY_P2SH | SCRIPT_VERIFY_WITNESS | SCRIPT_VERIFY_TAPROOT>};\n     const auto it{consensusparams.script_flag_exceptions.find(*Assert(block_index.phashBlock))};\n     if (it != consensusparams.script_flag_exceptions.end()) {\n-        flags = it->second;\n+        flags &= it->second;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#discussion_r1305234598",
      "id" : 1305234598,
      "line" : 2048,
      "node_id" : "PRRC_kwDOABII585NzEym",
      "original_commit_id" : "a656ecc2465ff960efe1f42014ec29437e31e9a6",
      "original_line" : 2048,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 42,
      "pull_request_review_id" : 1595001044,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28334",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305234598/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-25T06:35:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305234598",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "concept ACK on first half,\r\n~0 on latter commits",
      "created_at" : "2023-08-25T12:42:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1693299012",
      "id" : 1693299012,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585k7bFE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1693299012/reactions"
      },
      "updated_at" : "2023-08-25T12:42:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1693299012",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> concept ACK on first half, ~0 on latter commits\r\n\r\nSplit the first part out into #28354",
      "created_at" : "2023-08-28T05:29:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1695034916",
      "id" : 1695034916,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585lCC4k",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1695034916/reactions"
      },
      "updated_at" : "2023-08-28T05:29:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1695034916",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Mostly that STANDARD_SCRIPT_VERIFY_FLAGS violations sounds like something that acceptnonstdtxn should allow. But some particular examples:\r\n\r\nI think this is valuable for experimentation to allow non-standard scripts with `-accetnonstdtxn=1`, though I wonder if we wouldnât wish more granularity e.g allow OP_SUCCESS / OP_NOP without bypassing `IsStandardTx` checks. I wonder if we might wish partial policy loosening deployment, e.g if a OP_NOP is used as a new data carrier though all the other checks on sanity of spent inputs / transaction size / etc are conserved. Related discussions in #27926.",
      "created_at" : "2023-08-30T01:12:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1698347591",
      "id" : 1698347591,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585lOrpH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1698347591/reactions"
      },
      "updated_at" : "2023-08-30T01:12:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1698347591",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I'm not sure I understand what this brings to Bitcoin could you elaborate?",
      "created_at" : "2023-08-30T15:36:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1699410920",
      "id" : 1699410920,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585lSvPo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1699410920/reactions"
      },
      "updated_at" : "2023-08-30T15:36:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1699410920",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/74937347?v=4",
         "events_url" : "https://api.github.com/users/Retropex/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Retropex/followers",
         "following_url" : "https://api.github.com/users/Retropex/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Retropex/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Retropex",
         "id" : 74937347,
         "login" : "Retropex",
         "node_id" : "MDQ6VXNlcjc0OTM3MzQ3",
         "organizations_url" : "https://api.github.com/users/Retropex/orgs",
         "received_events_url" : "https://api.github.com/users/Retropex/received_events",
         "repos_url" : "https://api.github.com/users/Retropex/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Retropex/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Retropex/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Retropex"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> I'm not sure I understand what this brings to Bitcoin could you elaborate?\r\n\r\nit's a rationalization of node behavior. removes some logical inconsistencies related to standardness checks and relay policy and gives you better control over your own node.\r\n\r\nsometimes you remove weirdness instead of adding new functionality.",
      "created_at" : "2023-08-30T18:50:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1699675964",
      "id" : 1699675964,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585lTv88",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1699675964/reactions"
      },
      "updated_at" : "2023-08-30T18:50:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1699675964",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/90689674?v=4",
         "events_url" : "https://api.github.com/users/moonsettler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/moonsettler/followers",
         "following_url" : "https://api.github.com/users/moonsettler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/moonsettler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/moonsettler",
         "id" : 90689674,
         "login" : "moonsettler",
         "node_id" : "MDQ6VXNlcjkwNjg5Njc0",
         "organizations_url" : "https://api.github.com/users/moonsettler/orgs",
         "received_events_url" : "https://api.github.com/users/moonsettler/received_events",
         "repos_url" : "https://api.github.com/users/moonsettler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/moonsettler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/moonsettler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/moonsettler"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't know if it's particularly weird to \"protect\" upgrade hooks in testnets, but I also know that people can just go do their own thing and then mine a block with violations of these rules, hence my ~0",
      "created_at" : "2023-08-30T18:52:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1699678325",
      "id" : 1699678325,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585lTwh1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1699678325/reactions"
      },
      "updated_at" : "2023-08-30T18:52:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1699678325",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28334#discussion_r1313470810"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28334"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313470810"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Okay, I think there's a reasonable way of doing this with C++20 consteval:\r\n\r\n```c++\r\nclass MandatoryFlags {\r\nprivate:\r\n    uint32_t value{0};\r\n    struct CheckFlag {\r\n        uint32_t flag;\r\n        consteval CheckFlag(uint32_t f) {\r\n            if ((f & MANDATORY_SCRIPT_VERIFY_FLAGS) != f) {\r\n                throw \"Block script flag not included in MANDATORY_SCRIPT_VERIFY_FLAGS\";\r\n            }\r\n            flag = f;\r\n        }\r\n    };\r\npublic:\r\n    explicit MandatoryFlags(const CheckFlag& flags) { value |= flags.flag; }\r\n    void operator|=(const CheckFlag& flags) { value |= flags.flag; }\r\n    void operator&=(uint32_t flags) { value &= flags; }\r\n    operator uint32_t() const { return value; }\r\n};\r\n```\r\n\r\nthen declare `MandatoryFlags flags;` and you can just say `flags |= SCRIPT_VERIFY_DERSIG;` as normal, but if you give a non-mandatory flag, you get:\r\n\r\n```\r\nvalidation.cpp:2072:14: error: call to consteval function '(anonymous namespace)::MandatoryFlags::CheckFlag::CheckFlag' is not a constant expression\r\n    flags |= SCRIPT_VERIFY_MINIMALIF;\r\n             ^\r\nvalidation.cpp:2018:17: note: subexpression not valid in a constant expression\r\n                throw \"Block script flag not included in MANDATORY_SCRIPT_VERIFY_FLAGS\";\r\n                ^\r\n```\r\n\r\nand saying `flags |= var` also gives you a decent error:\r\n\r\n```\r\nvalidation.cpp:2049:18: error: call to consteval function '(anonymous namespace)::MandatoryFlags::CheckFlag::CheckFlag' is not a constant expression\r\n        flags |= var;\r\n                 ^\r\nvalidation.cpp:2049:18: note: initializer of 'var' is not a constant expression\r\nvalidation.cpp:2046:20: note: declared here\r\n        const auto var = it->second;\r\n                   ^\r\n```",
      "commit_id" : "f09bb66ba29817b011a588369486f7ad8818339e",
      "created_at" : "2023-09-01T20:10:23Z",
      "diff_hunk" : "@@ -2005,6 +2004,32 @@ class WarningBitsConditionChecker : public AbstractThresholdConditionChecker\n     }\n };\n \n+namespace {\n+// Helpers to ensure that GetBlockScriptFlags only returns a superset of MANDATORY_SCRIPT_VERIFY_FLAGS\n+// (otherwise unminable txs could end up in the mempool)\n+template<uint32_t FLAG>\n+struct MandatoryFlagChecked\n+{\n+    static_assert((FLAG & MANDATORY_SCRIPT_VERIFY_FLAGS) == FLAG, \"MandatoryFlag not included in MANDATORY_SCRIPT_VERIFY_FLAGS\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#discussion_r1313470810",
      "id" : 1313470810,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585OSfla",
      "original_commit_id" : "091d52be4b6d6348af8f8f29572d8102800576e8",
      "original_line" : 2013,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 1607619776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28334",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313470810/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-01T20:30:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313470810",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I think this is valuable for experimentation to allow non-standard scripts with `-accetnonstdtxn=1`, though I wonder if we wouldnât wish more granularity e.g allow OP_SUCCESS / OP_NOP without bypassing `IsStandardTx` checks. I wonder if we might wish partial policy loosening deployment, e.g if a OP_NOP is used as a new data carrier though all the other checks on sanity of spent inputs / transaction size / etc are conserved.\r\n\r\nI think any time you want more granularity, you should just define the new standardness rule and implement it. Examples:\r\n\r\n * `-annexdatacarrier` https://github.com/bitcoin-inquisition/bitcoin/pull/22\r\n * `-ephemeralanchors` https://github.com/bitcoin-inquisition/bitcoin/pull/23\r\n * CTV relay https://github.com/bitcoin-inquisition/bitcoin/pull/17/commits/496d3be6dc0be8548ecd5eeaf033bacbddd0bf95#diff-a0337ffd7259e8c7c9a7786d6dbd420c80abfa1afdb34ebae3261109d9ae3c19R596-R601 and https://github.com/bitcoin-inquisition/bitcoin/pull/17/commits/624177f2f4eaa1b7513db55c85268aaaa4a669a3\r\n * APO relay https://github.com/bitcoin-inquisition/bitcoin/pull/18/commits/441f5b3680a09ffd00c192be9f8c837a98cde894\r\n\r\nUsing `-acceptnonstdtxn` is useful for experimenting before you get to that point (or while you're not confident that the code implementing it is really safe to run, but you want to see the txs that use those rules anyway).",
      "created_at" : "2023-09-01T20:43:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1703300106",
      "id" : 1703300106,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585lhkwK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1703300106/reactions"
      },
      "updated_at" : "2023-09-01T20:43:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1703300106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think we should distinguish at least between simply non-standard transactions, and ones that use opcodes reserved for future functionality. Maybe only bypass the latter for `-acceptnonstdtxn=2` or something?",
      "created_at" : "2023-09-05T19:29:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1707197949",
      "id" : 1707197949,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585lwcX9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1707197949/reactions"
      },
      "updated_at" : "2023-09-05T19:29:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1707197949",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@luke-jr that thought crossed my mind too. so long the option is available granularity is not a bad thing at all.",
      "created_at" : "2023-09-05T22:12:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1707372843",
      "id" : 1707372843,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585lxHEr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1707372843/reactions"
      },
      "updated_at" : "2023-09-05T22:12:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1707372843",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/90689674?v=4",
         "events_url" : "https://api.github.com/users/moonsettler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/moonsettler/followers",
         "following_url" : "https://api.github.com/users/moonsettler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/moonsettler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/moonsettler",
         "id" : 90689674,
         "login" : "moonsettler",
         "node_id" : "MDQ6VXNlcjkwNjg5Njc0",
         "organizations_url" : "https://api.github.com/users/moonsettler/orgs",
         "received_events_url" : "https://api.github.com/users/moonsettler/received_events",
         "repos_url" : "https://api.github.com/users/moonsettler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/moonsettler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/moonsettler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/moonsettler"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I think we should distinguish at least between simply non-standard transactions, and ones that use opcodes reserved for future functionality. Maybe only bypass the latter for `-acceptnonstdtxn=2` or something?\r\n\r\nI guess the difference would be:\r\n\r\n* malleability:\r\n  * SCRIPT_VERIFY_MINIMALDATA\r\n  * SCRIPT_VERIFY_CLEANSTACK\r\n  * SCRIPT_VERIFY_MINIMALIF\r\n  * SCRIPT_VERIFY_NULLFAIL\r\n  * SCRIPT_VERIFY_LOW_S\r\n* upgrades:\r\n  * SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS\r\n  * SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM\r\n  * SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_TAPROOT_VERSION\r\n  * SCRIPT_VERIFY_DISCOURAGE_OP_SUCCESS\r\n  * SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_PUBKEYTYPE\r\n* weirdness:\r\n  * SCRIPT_VERIFY_CONST_SCRIPTCODE\r\n  * SCRIPT_VERIFY_STRICTENC\r\n  * SCRIPT_VERIFY_WITNESS_PUBKEYTYPE\r\n\r\nNot really seeing the point in differentiating between them though; all the examples I have are where you want to mess with the upgradable things.",
      "created_at" : "2023-09-06T00:55:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1707495247",
      "id" : 1707495247,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585lxk9P",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1707495247/reactions"
      },
      "updated_at" : "2023-09-06T00:55:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1707495247",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I think any time you want more granularity, you should just define the new standardness rule and implement it.\r\n\r\nYes this is one policy rules design viewpoint. The pitfall I can think of is in term of DoS protection of full-nodes. Letâs say in the future we discover a new DoS vector on new deployed segwit versions (e.g grafroot spends) and max transaction size. Max transaction size (`MAX_STANDARD_TX_WEIGHT`) is currently enforced `IsStandardTx`, lowering this limit would a plausible fix to this DoS vector, however it would come at the ecosystem cost of breaking all the data carriage use-case relying on current `MAX_STANDARD_TX_WEIGHT`. Those node operators if they have high-performance full-nodes would have an interest to keep those loose default, and weâll start to have mempool partitioning in the ecosystem (sounds bad for decentralization), I think.\r\n\r\nAll of that hypothetical, though it sounds the most-granular policy loosening allowing the use-case can be a better policy rules design thumb rule. I wonder if here a new `acceptnonstdscripts=1` would fit ? If itâs for experimentation-only, the current code changes could be also signet / testnet /regtest only.",
      "created_at" : "2023-09-09T00:30:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-1712359392",
      "id" : 1712359392,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII585mEIfg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1712359392/reactions"
      },
      "updated_at" : "2023-09-09T00:31:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1712359392",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Leaning on -0 now for this PR.\r\n\r\nUnfortunately I think mining pools may start hacking things off with their modifications, including flipping standardness switch in mainnet. From what I can tell, Marathon was doing exactly this feedback was given to introduce back some limits, such as upgrade hooks.\r\n\r\n",
      "created_at" : "2024-04-10T06:59:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-2046664715",
      "id" : 2046664715,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII5855_aAL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2046664715/reactions"
      },
      "updated_at" : "2024-04-10T06:59:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2046664715",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Note that the concept aks in the drahtbot report were mostly/entirely for the \"don't do this on testnet by default\" aspect of this PR which was split out into #28354.",
      "created_at" : "2024-04-10T08:37:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-2046913270",
      "id" : 2046913270,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII5856AWr2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2046913270/reactions"
      },
      "updated_at" : "2024-04-10T08:37:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2046913270",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Maybe reopen as a fresh pull request, if still relevant, so that there is a clean and easy to follow discussion?",
      "created_at" : "2024-04-10T08:49:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-2046936190",
      "id" : 2046936190,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII5856AcR-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2046936190/reactions"
      },
      "updated_at" : "2024-04-10T08:49:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2046936190",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Closed and re-opened fresh as #29843",
      "created_at" : "2024-04-10T09:16:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28334#issuecomment-2046988860",
      "id" : 2046988860,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28334",
      "node_id" : "IC_kwDOABII5856ApI8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2046988860/reactions"
      },
      "updated_at" : "2024-04-10T09:16:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2046988860",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   }
]
