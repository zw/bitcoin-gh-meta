[
   {
      "body" : "Considering how prevalent dynamic IPs are, I would consider this bug to be of a high priority.",
      "created_at" : "2011-02-14T05:27:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/48#issuecomment-769328",
      "id" : 769328,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/48",
      "updated_at" : "2011-02-14T05:27:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/769328",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/105077?v=3",
         "events_url" : "https://api.github.com/users/jeffWelling/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jeffWelling/followers",
         "following_url" : "https://api.github.com/users/jeffWelling/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jeffWelling/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jeffWelling",
         "id" : 105077,
         "login" : "jeffWelling",
         "organizations_url" : "https://api.github.com/users/jeffWelling/orgs",
         "received_events_url" : "https://api.github.com/users/jeffWelling/received_events",
         "repos_url" : "https://api.github.com/users/jeffWelling/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jeffWelling/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jeffWelling/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jeffWelling"
      }
   },
   {
      "body" : "The client should never end up with 0 connections, as it always tries to keep MAX_OUTBOUT_CONNECTIONS open (8).  In my testing, a dynamic ip change will keep connections open.  However, connections take 90 minutes to timeout, so there is a time where your client thinks its connected, but is actually not.  That should be fixed, but I have never seen a complete silent disconnect.  I might be wrong but please add a test case which always causes this if you do see this often.",
      "created_at" : "2011-03-09T19:36:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/48#issuecomment-853062",
      "id" : 853062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/48",
      "updated_at" : "2011-03-09T19:36:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Is 90 *minutes* really a reasonable period to wait before timing out a connection?  That's an hour and a half... I suppose there is no kind of heartbeat packet to help speed the timeout?",
      "created_at" : "2011-03-13T10:08:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/48#issuecomment-865447",
      "id" : 865447,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/48",
      "updated_at" : "2011-03-13T10:08:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/865447",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/105077?v=3",
         "events_url" : "https://api.github.com/users/jeffWelling/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jeffWelling/followers",
         "following_url" : "https://api.github.com/users/jeffWelling/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jeffWelling/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jeffWelling",
         "id" : 105077,
         "login" : "jeffWelling",
         "organizations_url" : "https://api.github.com/users/jeffWelling/orgs",
         "received_events_url" : "https://api.github.com/users/jeffWelling/received_events",
         "repos_url" : "https://api.github.com/users/jeffWelling/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jeffWelling/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jeffWelling/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jeffWelling"
      }
   },
   {
      "body" : "TheBlueMatt: what you're saying does not hold true for me... I started a 0.3.20.1 beta node on testnet about 3 days ago. It got stuck at 10870 blocks (that block was mined 2 days ago). It says \"0 connections\" and does not reconnect.\r\nWhile this is not \"silent\" (assuming after 90 minutes it shows 0 connections), it's a complete disconnect (persisting for probably 2 days now) and should not happen, as most will agree.",
      "created_at" : "2011-03-15T15:30:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/48#issuecomment-876616",
      "id" : 876616,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/48",
      "updated_at" : "2011-03-15T15:30:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/876616",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/589745?v=3",
         "events_url" : "https://api.github.com/users/molecular/events{/privacy}",
         "followers_url" : "https://api.github.com/users/molecular/followers",
         "following_url" : "https://api.github.com/users/molecular/following{/other_user}",
         "gists_url" : "https://api.github.com/users/molecular/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/molecular",
         "id" : 589745,
         "login" : "molecular",
         "organizations_url" : "https://api.github.com/users/molecular/orgs",
         "received_events_url" : "https://api.github.com/users/molecular/received_events",
         "repos_url" : "https://api.github.com/users/molecular/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/molecular/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/molecular/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/molecular"
      }
   },
   {
      "body" : "jeffWelling: according to ArtForz, there is a heartbeat packet sent every 30 minutes (provided no other txes/blocks/etc have been send in the last 30 minutes).  I guess the timeout could reasonably be decreased as content sent by TCP should be reliable.  \r\n\r\nmolecular: Odd, I guess this needs more long-term testing (I only tested by artificially setting the timeout to a low value).  Ill try to do this when I get the chance. Can you grep some debug.log stuff out when this happens?",
      "created_at" : "2011-03-15T15:52:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/48#issuecomment-876713",
      "id" : 876713,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/48",
      "updated_at" : "2011-03-15T15:52:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/876713",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "testing the whole thing once more:\r\n1.) start 0.3.20.1 beta -testnet (wait to sync blockchain to block 10882)\r\n2.) mine a block (block now 10883)\r\n3.) switch IP\r\n4.) observe a new block arriving (block 10884): so in fact at least one connection survived the IP switch! I did not expect this.\r\n5.) mine 3 more blocks\r\n6.) notice something very strange: it says \"2/offline? - generated - warning: this block was not received by any other nodes and will probably not be accepted!\" on newly (after IP switch) mined blocks, \"2 connections\". I still received other blocks after IP switch, though.\r\n\r\nhere's a screenshot to illustrate the situation: http://i.imgur.com/xlzY1.jpg\r\n",
      "created_at" : "2011-03-15T17:11:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/48#issuecomment-877092",
      "id" : 877092,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/48",
      "updated_at" : "2011-03-15T17:11:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/589745?v=3",
         "events_url" : "https://api.github.com/users/molecular/events{/privacy}",
         "followers_url" : "https://api.github.com/users/molecular/followers",
         "following_url" : "https://api.github.com/users/molecular/following{/other_user}",
         "gists_url" : "https://api.github.com/users/molecular/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/molecular",
         "id" : 589745,
         "login" : "molecular",
         "organizations_url" : "https://api.github.com/users/molecular/orgs",
         "received_events_url" : "https://api.github.com/users/molecular/received_events",
         "repos_url" : "https://api.github.com/users/molecular/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/molecular/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/molecular/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/molecular"
      }
   },
   {
      "body" : "to complete above test report:\r\n\r\n7.) went to eat, came back, found this: \"0 connections, 10893 blocks\", the block generation(s) shown as \"2/offline?\" in 6.), now show as \"7 confirmations\". I don't seem to receive new blocks any more, stuck at 10893, blockexplorer: 10898\r\n8.) concluding that the node is disconnected for real, the IP switch was more than 3 hours ago.\r\n\r\nhere's a slightly grepped version of the debug.log (I marked the point where the IP changed, line 123): http://pastebin.com/rmSEcAXA\r\n\r\nnote: it seems from the debug.log I didn't wait for the blockchain to sync before I switched the IP address. This, I think, explains the \"2/offline?\"-stuff.\r\n\r\nSummary: this is now an example of a \"non-silent complete disconnect\".",
      "created_at" : "2011-03-15T19:35:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/48#issuecomment-877654",
      "id" : 877654,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/48",
      "updated_at" : "2011-03-15T19:35:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877654",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/589745?v=3",
         "events_url" : "https://api.github.com/users/molecular/events{/privacy}",
         "followers_url" : "https://api.github.com/users/molecular/followers",
         "following_url" : "https://api.github.com/users/molecular/following{/other_user}",
         "gists_url" : "https://api.github.com/users/molecular/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/molecular",
         "id" : 589745,
         "login" : "molecular",
         "organizations_url" : "https://api.github.com/users/molecular/orgs",
         "received_events_url" : "https://api.github.com/users/molecular/received_events",
         "repos_url" : "https://api.github.com/users/molecular/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/molecular/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/molecular/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/molecular"
      }
   },
   {
      "body" : "Since this seems to affect both incoming and outgoing connections and occurs on an event that at least some users will encounter with some frequency (and can't easily avoid), I would say this should be considered a fairly high priority issue. It's obvious why this affects inbound connections (if you didn't think about this issue and design around it, that would happen by itself). It's quite mysterious that it affects outbound connections.\r\n\r\nA lot of programs have issues on dynamic IP changes.",
      "created_at" : "2011-07-28T08:35:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/48#issuecomment-1670961",
      "id" : 1670961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/48",
      "updated_at" : "2011-07-28T08:35:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1670961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/877549?v=3",
         "events_url" : "https://api.github.com/users/JoelKatz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JoelKatz/followers",
         "following_url" : "https://api.github.com/users/JoelKatz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JoelKatz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JoelKatz",
         "id" : 877549,
         "login" : "JoelKatz",
         "organizations_url" : "https://api.github.com/users/JoelKatz/orgs",
         "received_events_url" : "https://api.github.com/users/JoelKatz/received_events",
         "repos_url" : "https://api.github.com/users/JoelKatz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JoelKatz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JoelKatz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JoelKatz"
      }
   },
   {
      "body" : "Is there any way at all to detect network connect/disconnects, even in a platform-depending manner? Re-executing the \"detect local ip\" logic is no problem at all, but we can't do it continuously.",
      "created_at" : "2012-02-19T19:49:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/48#issuecomment-4044570",
      "id" : 4044570,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/48",
      "updated_at" : "2012-02-19T19:49:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4044570",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Why not peridoically re-check (local) IPs or query via UPnP?",
      "created_at" : "2013-11-21T16:28:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/48#issuecomment-28998964",
      "id" : 28998964,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/48",
      "updated_at" : "2013-11-21T16:28:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/28998964",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "There was discussion on IRC about this today, IIRC #3088 is a step toward improvement here",
      "created_at" : "2013-11-21T16:42:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/48#issuecomment-29000312",
      "id" : 29000312,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/48",
      "updated_at" : "2013-11-21T16:42:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/29000312",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@molecular Is this still an issue?",
      "created_at" : "2016-04-10T22:44:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/48#issuecomment-208086630",
      "id" : 208086630,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/48",
      "updated_at" : "2016-04-10T22:44:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/208086630",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   }
]
