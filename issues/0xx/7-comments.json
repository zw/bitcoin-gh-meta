[
   {
      "body" : "See the blockheaders feature branch here for initial work on this.  Notes from Satoshi:\r\n\r\nCBlockIndex contains all the information of the block header, so to operate with headers only, I just maintain the CBlockIndex structure as usual.  The nFile/nBlockPos are null, since the full block is not recorded on disk.\r\n\r\nThe code to gracefully switch between client-mode on/off without deleting blk*.dat in between is not implemented yet.  It would mostly be a matter of having non-client LoadBlockIndex ignore block index entries with null block pos.  That would make it re-download those as full blocks.  Switching back to client-mode is no problem, it doesn't mind if the full blocks are there.\r\n\r\nIf the initial block download becomes too long, we'll want client mode as an option so new users can get running quickly.  With graceful switch-off of client mode, they can later turn off client mode and have it download the full blocks if they want to start generating.\r\n",
      "created_at" : "2010-12-20T17:44:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7#issuecomment-625002",
      "id" : 625002,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7",
      "updated_at" : "2010-12-20T17:44:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/625002",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "@gavinandresen, we need to add another service category (NODE_SPV??) for SPV clients, so that they can operate without getting queried for blocks by other peers.",
      "created_at" : "2014-03-29T11:50:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7#issuecomment-38993428",
      "id" : 38993428,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7",
      "updated_at" : "2014-03-29T23:58:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/38993428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1073681?v=3",
         "events_url" : "https://api.github.com/users/bardiharborow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bardiharborow/followers",
         "following_url" : "https://api.github.com/users/bardiharborow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bardiharborow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bardiharborow",
         "id" : 1073681,
         "login" : "bardiharborow",
         "organizations_url" : "https://api.github.com/users/bardiharborow/orgs",
         "received_events_url" : "https://api.github.com/users/bardiharborow/received_events",
         "repos_url" : "https://api.github.com/users/bardiharborow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bardiharborow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bardiharborow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bardiharborow"
      }
   },
   {
      "body" : "Why, how is this any different from what SPV clients do?\r\nSee #3884 for another step towards this.\r\n",
      "created_at" : "2014-03-29T11:54:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7#issuecomment-38993507",
      "id" : 38993507,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7",
      "updated_at" : "2014-03-29T11:57:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/38993507",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj, my understanding is that most SPV clients at the moment either get headers from a centralised source (Electrum) or use their own p2p network. I don't know, some may use the main Bitcoin network, but wouldn't they be queried for blocks by other clients and have to ignore those requests which could confuse the other peer (maybe?). I think it would be neater if other peers knew that you could be asked for headers, but not for blocks/txs. Anyway, sorry to bring up an old issue. Just thought someone should start working through the massive backlog, so I started from the back.",
      "created_at" : "2014-03-30T00:24:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7#issuecomment-39013731",
      "id" : 39013731,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7",
      "updated_at" : "2014-03-30T00:25:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39013731",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1073681?v=3",
         "events_url" : "https://api.github.com/users/bardiharborow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bardiharborow/followers",
         "following_url" : "https://api.github.com/users/bardiharborow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bardiharborow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bardiharborow",
         "id" : 1073681,
         "login" : "bardiharborow",
         "organizations_url" : "https://api.github.com/users/bardiharborow/orgs",
         "received_events_url" : "https://api.github.com/users/bardiharborow/received_events",
         "repos_url" : "https://api.github.com/users/bardiharborow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bardiharborow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bardiharborow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bardiharborow"
      }
   },
   {
      "body" : "@bardiharborow \r\nSPV nodes talk to full nodes, not to each other (although that might be possible as well?). There's a service bit specifically for offering full blocks instead of just headers: https://en.bitcoin.it/wiki/Protocol_specification#version",
      "created_at" : "2014-03-30T00:29:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7#issuecomment-39013823",
      "id" : 39013823,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7",
      "updated_at" : "2014-03-30T00:29:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39013823",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/566354?v=3",
         "events_url" : "https://api.github.com/users/christophebiocca/events{/privacy}",
         "followers_url" : "https://api.github.com/users/christophebiocca/followers",
         "following_url" : "https://api.github.com/users/christophebiocca/following{/other_user}",
         "gists_url" : "https://api.github.com/users/christophebiocca/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/christophebiocca",
         "id" : 566354,
         "login" : "christophebiocca",
         "organizations_url" : "https://api.github.com/users/christophebiocca/orgs",
         "received_events_url" : "https://api.github.com/users/christophebiocca/received_events",
         "repos_url" : "https://api.github.com/users/christophebiocca/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/christophebiocca/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/christophebiocca/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/christophebiocca"
      }
   },
   {
      "body" : "Electrum does SPV validation, but is in the strictly technical sense not an SPV node, as it does not participate in the P2P network.\r\n\r\nActual SPV nodes (like Bitcoin Wallet for Android or Multibit) do connect to the P2P network (only to other full nodes, service flag NODE_NETWORK), and fetch blocks and headers from it. SPV nodes so far don't connect to each other, both because they provide very little service (most don't even keep all old headers around) and because they are only online sporadically.",
      "created_at" : "2014-03-30T15:06:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7#issuecomment-39027656",
      "id" : 39027656,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7",
      "updated_at" : "2014-03-30T15:06:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39027656",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I've just realised that nodes can chose not to advertise their IP, which I assume is what they do. Does anyone know how hard this would be to implement? The only technical discussion seems to be 3 years old. Wouldn't we also need a way of being alerted to transactions and downloading merkle branches? (This may already exist but the wiki maybe out of date and I'm not completely on top of the code.)",
      "created_at" : "2014-03-30T21:36:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7#issuecomment-39040562",
      "id" : 39040562,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7",
      "updated_at" : "2014-03-30T21:36:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39040562",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1073681?v=3",
         "events_url" : "https://api.github.com/users/bardiharborow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bardiharborow/followers",
         "following_url" : "https://api.github.com/users/bardiharborow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bardiharborow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bardiharborow",
         "id" : 1073681,
         "login" : "bardiharborow",
         "organizations_url" : "https://api.github.com/users/bardiharborow/orgs",
         "received_events_url" : "https://api.github.com/users/bardiharborow/received_events",
         "repos_url" : "https://api.github.com/users/bardiharborow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bardiharborow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bardiharborow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bardiharborow"
      }
   },
   {
      "body" : "All this exists. SPV clients are used, and the protocol provides everything necessary. See BIP37 for example.\r\n\r\nThe only thing we don't have is the ability to run the reference code base in such an SPV client mode, where it doesn't do full block validation. There are several steps towards that, but the first is certainly headers-first synchronization.",
      "created_at" : "2014-03-30T21:38:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7#issuecomment-39040617",
      "id" : 39040617,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7",
      "updated_at" : "2014-03-30T21:38:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39040617",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@bardiharborow This has all been done years ago. Please move questions like these to the stack exchange or forums, or #bitcoin on IRC. Github is not the place for basic discussion like this.",
      "created_at" : "2014-03-31T02:18:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7#issuecomment-39048943",
      "id" : 39048943,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7",
      "updated_at" : "2014-03-31T02:18:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39048943",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Headers-first download merged. And there are plenty of SPV wallets. Closing this.\r\n",
      "created_at" : "2014-10-28T18:28:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7#issuecomment-60806479",
      "id" : 60806479,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7",
      "updated_at" : "2014-10-28T18:28:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/60806479",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   }
]
