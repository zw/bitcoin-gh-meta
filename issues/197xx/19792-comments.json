[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25193](https://github.com/bitcoin/bitcoin/pull/25193) (indexes: Read the locator's top block during init, allow interaction with reindex-chainstate by mzumsande)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-08-24T21:25:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-679374860",
      "id" : 679374860,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3OTM3NDg2MA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/679374860/reactions"
      },
      "updated_at" : "2022-05-29T13:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/679374860",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Taking this out of draft status since I am interested in conceptual feedback on something like this but of course, #19521 still has a long way to go before this can be seriously considered.",
      "created_at" : "2020-08-25T21:15:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-680273690",
      "id" : 680273690,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MDI3MzY5MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-25T21:15:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/680273690",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-08-26T09:01:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-680754514",
      "id" : 680754514,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MDc1NDUxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-26T09:01:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/680754514",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested ACK 21c42c22c9b50f60a4b4a0ee84c45f47df98752f",
      "created_at" : "2020-08-27T02:54:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-681312999",
      "id" : 681312999,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MTMxMjk5OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-27T02:54:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/681312999",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/6299681?v=4",
         "events_url" : "https://api.github.com/users/PierreRochard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PierreRochard/followers",
         "following_url" : "https://api.github.com/users/PierreRochard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PierreRochard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PierreRochard",
         "id" : 6299681,
         "login" : "PierreRochard",
         "node_id" : "MDQ6VXNlcjYyOTk2ODE=",
         "organizations_url" : "https://api.github.com/users/PierreRochard/orgs",
         "received_events_url" : "https://api.github.com/users/PierreRochard/received_events",
         "repos_url" : "https://api.github.com/users/PierreRochard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PierreRochard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PierreRochard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PierreRochard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, I wish we had gotten streaming to work though so that the file can be downloaded (see my experiment in #7759). RPCs that creates a server-local file, although there are already some others, are not that great from a security and usability point of view.",
      "created_at" : "2020-08-27T12:00:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-681904102",
      "id" : 681904102,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MTkwNDEwMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-27T12:00:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/681904102",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-09-22T17:06:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-696854658",
      "id" : 696854658,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5Njg1NDY1OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-22T17:06:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/696854658",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased on top of the latest changes in #19521",
      "created_at" : "2020-09-22T21:28:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-696992350",
      "id" : 696992350,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5Njk5MjM1MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-22T21:28:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/696992350",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-10-15T11:09:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-709204093",
      "id" : 709204093,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwOTIwNDA5Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-15T11:09:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/709204093",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased now that #19521, will also push a functional test shortly.",
      "created_at" : "2021-05-05T23:32:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-833114126",
      "id" : 833114126,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMzExNDEyNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-05T23:32:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/833114126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Added functional test.",
      "created_at" : "2021-05-06T22:48:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-833924850",
      "id" : 833924850,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMzkyNDg1MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-06T22:48:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/833924850",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-07-28T15:05:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-888386739",
      "id" : 888386739,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII584087Sz",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-28T15:05:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/888386739",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased",
      "created_at" : "2021-08-01T19:41:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-890575123",
      "id" : 890575123,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII5841FRkT",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-01T19:41:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890575123",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Error: RPC command \"dumpcoinstats\" not found in RPC_COMMANDS_SAFE_FOR_FUZZING or RPC_COMMANDS_NOT_SAFE_FOR_FUZZING. Please update test/fuzz/rpc.cpp.",
      "created_at" : "2021-08-02T06:36:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-890762494",
      "id" : 890762494,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII5841F_T-",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-02T06:36:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890762494",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks @MarcoFalke , fixed!",
      "created_at" : "2021-08-03T22:05:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-892197130",
      "id" : 892197130,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII5841LdkK",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-03T22:05:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/892197130",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased and fixed silent merge conflict.",
      "created_at" : "2022-01-23T17:50:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1019533887",
      "id" : 1019533887,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII5848xNo_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019533887/reactions"
      },
      "updated_at" : "2022-01-23T17:50:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019533887",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r792795349"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792795349"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I would prefer these to be per-block amounts like in the RPC (obtaining the sum of a column is trivial in a spreadsheet).",
      "commit_id" : "87fd7b8f02b8198e86a1adc784bf673534b23b18",
      "created_at" : "2022-01-26T16:04:37Z",
      "diff_hunk" : "@@ -1167,6 +1168,109 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",\n+                {\n+                    {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+                    HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+\n+    fs::path filepath = fs::u8path(request.params[0].get_str());\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    fsbridge::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    file << strprintf(\"height,\"\n+                      \"bestblock,\"\n+                      \"txouts,\"\n+                      \"bogosize,\"\n+                      \"muhash,\"\n+                      \"total_amount,\"\n+                      \"total_unspendable_amount,\"\n+                      \"total_prevout_spent_amount,\"\n+                      \"total_new_outputs_ex_coinbase_amount,\"\n+                      \"total_coinbase_amount,\"\n+                      \"total_subsidy,\"\n+                      \"total_genesis_block,\"\n+                      \"total_bip30,\"\n+                      \"total_unspendable_scripts,\"\n+                      \"total_unclaimed_rewards\\n\");\n+\n+    CCoinsStats stats{CoinStatsHashType::MUHASH};\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    ChainstateManager& chainman = EnsureChainman(node);\n+    CChainState& active_chainstate = chainman.ActiveChainstate();\n+    active_chainstate.ForceFlushStateToDisk();\n+    CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+    CCoinsView* coins_view;\n+    BlockManager* blockman;\n+    {\n+        LOCK(::cs_main);\n+        coins_view = &active_chainstate.CoinsDB();\n+        blockman = &active_chainstate.m_blockman;\n+    }\n+\n+    for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+        if (!GetUTXOStats(coins_view, *blockman, stats, node.rpc_interruption_point, pindex))\n+            throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to read UTXO set\");\n+\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nHeight));\n+        file << strprintf(\"%s,\", stats.hashBlock.GetHex());\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nTransactionOutputs));\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nBogoSize));\n+        file << strprintf(\"%d,\", stats.hashSerialized.GetHex());\n+        CHECK_NONFATAL(stats.total_amount.has_value());\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_amount.value()));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_unspendable_amount));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_prevout_spent_amount));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_new_outputs_ex_coinbase_amount));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_coinbase_amount));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r792795349",
      "id" : 792795349,
      "line" : 1254,
      "node_id" : "PRRC_kwDOABII584vQRjV",
      "original_commit_id" : "cd87e8163a5e8675b1a0d2dd498dc231f834824f",
      "original_line" : 1254,
      "original_position" : 95,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 95,
      "pull_request_review_id" : 863759028,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792795349/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-26T16:06:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792795349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r795280072"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795280072"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "There seemed to be a few people that preferred this version back when I first built the `coinstatsindex` but we can just have both. So now there is a bool argument to switch between cummulative and per-block.",
      "commit_id" : "f73b68c262df256e08a32af4a2e8142b3f68dee6",
      "created_at" : "2022-01-31T00:14:31Z",
      "diff_hunk" : "@@ -1167,6 +1168,109 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",\n+                {\n+                    {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+                    HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+\n+    fs::path filepath = fs::u8path(request.params[0].get_str());\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    fsbridge::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    file << strprintf(\"height,\"\n+                      \"bestblock,\"\n+                      \"txouts,\"\n+                      \"bogosize,\"\n+                      \"muhash,\"\n+                      \"total_amount,\"\n+                      \"total_unspendable_amount,\"\n+                      \"total_prevout_spent_amount,\"\n+                      \"total_new_outputs_ex_coinbase_amount,\"\n+                      \"total_coinbase_amount,\"\n+                      \"total_subsidy,\"\n+                      \"total_genesis_block,\"\n+                      \"total_bip30,\"\n+                      \"total_unspendable_scripts,\"\n+                      \"total_unclaimed_rewards\\n\");\n+\n+    CCoinsStats stats{CoinStatsHashType::MUHASH};\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    ChainstateManager& chainman = EnsureChainman(node);\n+    CChainState& active_chainstate = chainman.ActiveChainstate();\n+    active_chainstate.ForceFlushStateToDisk();\n+    CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+    CCoinsView* coins_view;\n+    BlockManager* blockman;\n+    {\n+        LOCK(::cs_main);\n+        coins_view = &active_chainstate.CoinsDB();\n+        blockman = &active_chainstate.m_blockman;\n+    }\n+\n+    for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+        if (!GetUTXOStats(coins_view, *blockman, stats, node.rpc_interruption_point, pindex))\n+            throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to read UTXO set\");\n+\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nHeight));\n+        file << strprintf(\"%s,\", stats.hashBlock.GetHex());\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nTransactionOutputs));\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nBogoSize));\n+        file << strprintf(\"%d,\", stats.hashSerialized.GetHex());\n+        CHECK_NONFATAL(stats.total_amount.has_value());\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_amount.value()));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_unspendable_amount));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_prevout_spent_amount));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_new_outputs_ex_coinbase_amount));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_coinbase_amount));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r795280072",
      "id" : 795280072,
      "in_reply_to_id" : 792795349,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vZwLI",
      "original_commit_id" : "cd87e8163a5e8675b1a0d2dd498dc231f834824f",
      "original_line" : 1254,
      "original_position" : 95,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 867271838,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795280072/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-31T00:14:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795280072",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Also, not to scope creep, but can you add a few goodies from `CBlockIndex` to the CSV?\r\n> \r\n> * the number of transactions per block (`nTx`)\r\n> * timestamp (and maybe MTP, but that can be derived in a spreadsheet)\r\n> * `nChainWork` (or per block)\r\n> * `nVersion`\r\n\r\nEasy enough, if it enables more use cases we can easily add more. I have added all of these.",
      "created_at" : "2022-01-31T00:15:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1025269403",
      "id" : 1025269403,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII5849HF6b",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025269403/reactions"
      },
      "updated_at" : "2022-01-31T00:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025269403",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r795834817"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795834817"
         }
      },
      "author_association" : "MEMBER",
      "body" : "cumulative",
      "commit_id" : "f73b68c262df256e08a32af4a2e8142b3f68dee6",
      "created_at" : "2022-01-31T16:19:04Z",
      "diff_hunk" : "@@ -1167,6 +1168,141 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",\n+                {\n+                    {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+                    {\"cummulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cummulative\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r795834817",
      "id" : 795834817,
      "line" : 1177,
      "node_id" : "PRRC_kwDOABII584vb3nB",
      "original_commit_id" : "f73b68c262df256e08a32af4a2e8142b3f68dee6",
      "original_line" : 1177,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 18,
      "pull_request_review_id" : 868091592,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795834817/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-31T16:54:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795834817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r795843775"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795843775"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: maybe calculate these values before the `if (cummulative)` to remove the repetition here:\r\n```cpp\r\nconst unspendable_amount = tats.total_unspendable_amount - cumulative ? 0 : prev_stats.total_prevout_spent_amount\r\n...\r\nfile << strprintf(\"%s,\", FormatMoney(unspendable_amount));\r\n```",
      "commit_id" : "f73b68c262df256e08a32af4a2e8142b3f68dee6",
      "created_at" : "2022-01-31T16:27:49Z",
      "diff_hunk" : "@@ -1167,6 +1168,141 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",\n+                {\n+                    {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+                    {\"cummulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cummulative\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+                    HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+\n+    fs::path filepath = fs::u8path(request.params[0].get_str());\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    fsbridge::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    const bool cummulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+    file << strprintf(\"height,\"\n+                      \"bestblock,\"\n+                      \"txouts,\"\n+                      \"bogosize,\"\n+                      \"muhash,\"\n+                      \"total_amount,\"\n+                      \"total_unspendable_amount,\"\n+                      \"total_prevout_spent_amount,\"\n+                      \"total_new_outputs_ex_coinbase_amount,\"\n+                      \"total_coinbase_amount,\"\n+                      \"total_subsidy,\"\n+                      \"total_genesis_block,\"\n+                      \"total_bip30,\"\n+                      \"total_unspendable_scripts,\"\n+                      \"total_unclaimed_rewards,\"\n+                      \"txs,\"\n+                      \"timestamp,\"\n+                      \"mediantime,\"\n+                      \"chainwork,\"\n+                      \"version\\n\");\n+\n+    CCoinsStats stats{CoinStatsHashType::MUHASH};\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    ChainstateManager& chainman = EnsureChainman(node);\n+    CChainState& active_chainstate = chainman.ActiveChainstate();\n+    active_chainstate.ForceFlushStateToDisk();\n+    CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+    CCoinsView* coins_view;\n+    BlockManager* blockman;\n+    {\n+        LOCK(::cs_main);\n+        coins_view = &active_chainstate.CoinsDB();\n+        blockman = &active_chainstate.m_blockman;\n+    }\n+\n+    CCoinsStats prev_stats{CoinStatsHashType::MUHASH};\n+\n+    for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+        if (!GetUTXOStats(coins_view, *blockman, stats, node.rpc_interruption_point, pindex))\n+            throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to read UTXO set\");\n+\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nHeight));\n+        file << strprintf(\"%s,\", stats.hashBlock.GetHex());\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nTransactionOutputs));\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nBogoSize));\n+        file << strprintf(\"%d,\", stats.hashSerialized.GetHex());\n+\n+        CHECK_NONFATAL(stats.total_amount.has_value());\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_amount.value()));\n+\n+        if (cummulative) {\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_unspendable_amount));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_prevout_spent_amount));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_new_outputs_ex_coinbase_amount));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_coinbase_amount));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_subsidy));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_unspendables_genesis_block));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_unspendables_bip30));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_unspendables_scripts));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_unspendables_unclaimed_rewards));\n+        } else {\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_unspendable_amount - prev_stats.total_unspendable_amount));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r795843775",
      "id" : 795843775,
      "line" : 1274,
      "node_id" : "PRRC_kwDOABII584vb5y_",
      "original_commit_id" : "f73b68c262df256e08a32af4a2e8142b3f68dee6",
      "original_line" : 1274,
      "original_position" : 115,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 115,
      "pull_request_review_id" : 868091592,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795843775/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-31T16:54:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795843775",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r795857544"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795857544"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`block_hash` ?",
      "commit_id" : "f73b68c262df256e08a32af4a2e8142b3f68dee6",
      "created_at" : "2022-01-31T16:41:54Z",
      "diff_hunk" : "@@ -1167,6 +1168,141 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",\n+                {\n+                    {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+                    {\"cummulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cummulative\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+                    HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+\n+    fs::path filepath = fs::u8path(request.params[0].get_str());\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    fsbridge::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    const bool cummulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+    file << strprintf(\"height,\"\n+                      \"bestblock,\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r795857544",
      "id" : 795857544,
      "line" : 1213,
      "node_id" : "PRRC_kwDOABII584vb9KI",
      "original_commit_id" : "f73b68c262df256e08a32af4a2e8142b3f68dee6",
      "original_line" : 1213,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 54,
      "pull_request_review_id" : 868091592,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795857544/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-31T16:54:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795857544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r795858672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795858672"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`cumulative ? \"total_amount\" : \"amount\"` ",
      "commit_id" : "f73b68c262df256e08a32af4a2e8142b3f68dee6",
      "created_at" : "2022-01-31T16:43:00Z",
      "diff_hunk" : "@@ -1167,6 +1168,141 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",\n+                {\n+                    {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+                    {\"cummulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cummulative\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+                    HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+\n+    fs::path filepath = fs::u8path(request.params[0].get_str());\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    fsbridge::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    const bool cummulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+    file << strprintf(\"height,\"\n+                      \"bestblock,\"\n+                      \"txouts,\"\n+                      \"bogosize,\"\n+                      \"muhash,\"\n+                      \"total_amount,\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r795858672",
      "id" : 795858672,
      "line" : 1217,
      "node_id" : "PRRC_kwDOABII584vb9bw",
      "original_commit_id" : "f73b68c262df256e08a32af4a2e8142b3f68dee6",
      "original_line" : 1217,
      "original_position" : 58,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 58,
      "pull_request_review_id" : 868091592,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795858672/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-31T16:54:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795858672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r800225681"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800225681"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I was a bit hesitant about this because it might make some scripting harder if the header is different but I guess it makes sense to change it if the values are different. So done now.",
      "commit_id" : "ba1a08a3e106ddde1c7b44f52960f68eb5edf932",
      "created_at" : "2022-02-06T19:54:24Z",
      "diff_hunk" : "@@ -1167,6 +1168,141 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",\n+                {\n+                    {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+                    {\"cummulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cummulative\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+                    HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+\n+    fs::path filepath = fs::u8path(request.params[0].get_str());\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    fsbridge::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    const bool cummulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+    file << strprintf(\"height,\"\n+                      \"bestblock,\"\n+                      \"txouts,\"\n+                      \"bogosize,\"\n+                      \"muhash,\"\n+                      \"total_amount,\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r800225681",
      "id" : 800225681,
      "in_reply_to_id" : 795858672,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vsnmR",
      "original_commit_id" : "f73b68c262df256e08a32af4a2e8142b3f68dee6",
      "original_line" : 1217,
      "original_position" : 58,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 874078427,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800225681/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-06T19:54:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800225681",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r800225685"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800225685"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "ba1a08a3e106ddde1c7b44f52960f68eb5edf932",
      "created_at" : "2022-02-06T19:54:26Z",
      "diff_hunk" : "@@ -1167,6 +1168,141 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",\n+                {\n+                    {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+                    {\"cummulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cummulative\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+                    HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+\n+    fs::path filepath = fs::u8path(request.params[0].get_str());\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    fsbridge::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    const bool cummulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+    file << strprintf(\"height,\"\n+                      \"bestblock,\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r800225685",
      "id" : 800225685,
      "in_reply_to_id" : 795857544,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vsnmV",
      "original_commit_id" : "f73b68c262df256e08a32af4a2e8142b3f68dee6",
      "original_line" : 1213,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 874078433,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800225685/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-06T19:54:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800225685",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r800225697"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800225697"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "ba1a08a3e106ddde1c7b44f52960f68eb5edf932",
      "created_at" : "2022-02-06T19:54:35Z",
      "diff_hunk" : "@@ -1167,6 +1168,141 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",\n+                {\n+                    {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+                    {\"cummulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cummulative\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+                    HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+\n+    fs::path filepath = fs::u8path(request.params[0].get_str());\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    fsbridge::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    const bool cummulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+    file << strprintf(\"height,\"\n+                      \"bestblock,\"\n+                      \"txouts,\"\n+                      \"bogosize,\"\n+                      \"muhash,\"\n+                      \"total_amount,\"\n+                      \"total_unspendable_amount,\"\n+                      \"total_prevout_spent_amount,\"\n+                      \"total_new_outputs_ex_coinbase_amount,\"\n+                      \"total_coinbase_amount,\"\n+                      \"total_subsidy,\"\n+                      \"total_genesis_block,\"\n+                      \"total_bip30,\"\n+                      \"total_unspendable_scripts,\"\n+                      \"total_unclaimed_rewards,\"\n+                      \"txs,\"\n+                      \"timestamp,\"\n+                      \"mediantime,\"\n+                      \"chainwork,\"\n+                      \"version\\n\");\n+\n+    CCoinsStats stats{CoinStatsHashType::MUHASH};\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    ChainstateManager& chainman = EnsureChainman(node);\n+    CChainState& active_chainstate = chainman.ActiveChainstate();\n+    active_chainstate.ForceFlushStateToDisk();\n+    CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+    CCoinsView* coins_view;\n+    BlockManager* blockman;\n+    {\n+        LOCK(::cs_main);\n+        coins_view = &active_chainstate.CoinsDB();\n+        blockman = &active_chainstate.m_blockman;\n+    }\n+\n+    CCoinsStats prev_stats{CoinStatsHashType::MUHASH};\n+\n+    for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+        if (!GetUTXOStats(coins_view, *blockman, stats, node.rpc_interruption_point, pindex))\n+            throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to read UTXO set\");\n+\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nHeight));\n+        file << strprintf(\"%s,\", stats.hashBlock.GetHex());\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nTransactionOutputs));\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nBogoSize));\n+        file << strprintf(\"%d,\", stats.hashSerialized.GetHex());\n+\n+        CHECK_NONFATAL(stats.total_amount.has_value());\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_amount.value()));\n+\n+        if (cummulative) {\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_unspendable_amount));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_prevout_spent_amount));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_new_outputs_ex_coinbase_amount));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_coinbase_amount));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_subsidy));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_unspendables_genesis_block));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_unspendables_bip30));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_unspendables_scripts));\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_unspendables_unclaimed_rewards));\n+        } else {\n+            file << strprintf(\"%s,\", FormatMoney(stats.total_unspendable_amount - prev_stats.total_unspendable_amount));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r800225697",
      "id" : 800225697,
      "in_reply_to_id" : 795843775,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vsnmh",
      "original_commit_id" : "f73b68c262df256e08a32af4a2e8142b3f68dee6",
      "original_line" : 1274,
      "original_position" : 115,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 874078442,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800225697/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-06T19:54:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800225697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r800225722"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800225722"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed",
      "commit_id" : "ba1a08a3e106ddde1c7b44f52960f68eb5edf932",
      "created_at" : "2022-02-06T19:54:40Z",
      "diff_hunk" : "@@ -1167,6 +1168,141 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",\n+                {\n+                    {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+                    {\"cummulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cummulative\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r800225722",
      "id" : 800225722,
      "in_reply_to_id" : 795834817,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vsnm6",
      "original_commit_id" : "f73b68c262df256e08a32af4a2e8142b3f68dee6",
      "original_line" : 1177,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 874078448,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800225722/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-06T19:54:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800225722",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed @Sjors ' comments, thanks for reviewing! :)",
      "created_at" : "2022-02-06T19:55:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1030902371",
      "id" : 1030902371,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII5849clJj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030902371/reactions"
      },
      "updated_at" : "2022-02-06T19:55:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030902371",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r800453128"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800453128"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Missed a spot",
      "commit_id" : "ba1a08a3e106ddde1c7b44f52960f68eb5edf932",
      "created_at" : "2022-02-07T09:19:08Z",
      "diff_hunk" : "@@ -155,6 +155,7 @@ static const CRPCConvertParam vRPCConvertParams[] =\n     { \"getblockstats\", 0, \"hash_or_height\" },\n     { \"getblockstats\", 1, \"stats\" },\n     { \"pruneblockchain\", 0, \"height\" },\n+    { \"dumpcoinstats\", 1, \"cummulative\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r800453128",
      "id" : 800453128,
      "line" : 158,
      "node_id" : "PRRC_kwDOABII584vtfII",
      "original_commit_id" : "ba1a08a3e106ddde1c7b44f52960f68eb5edf932",
      "original_line" : 158,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/client.cpp",
      "position" : 4,
      "pull_request_review_id" : 874384510,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800453128/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-07T09:19:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800453128",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r801141296"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801141296"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Gah, thought I had grepped for it. But there was another silent merge conflict anyway... :/",
      "commit_id" : "e381d716b03888632196920caff95aa958e5cc72",
      "created_at" : "2022-02-07T23:20:33Z",
      "diff_hunk" : "@@ -155,6 +155,7 @@ static const CRPCConvertParam vRPCConvertParams[] =\n     { \"getblockstats\", 0, \"hash_or_height\" },\n     { \"getblockstats\", 1, \"stats\" },\n     { \"pruneblockchain\", 0, \"height\" },\n+    { \"dumpcoinstats\", 1, \"cummulative\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r801141296",
      "id" : 801141296,
      "in_reply_to_id" : 800453128,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vwHIw",
      "original_commit_id" : "ba1a08a3e106ddde1c7b44f52960f68eb5edf932",
      "original_line" : 158,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/client.cpp",
      "position" : null,
      "pull_request_review_id" : 875357832,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801141296/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-07T23:20:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801141296",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Windows CI seems unhappy:\r\n> PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\\\Users\\\\ContainerAdministrator\\\\AppData\\\\Local\\\\Temp\\\\test_runner_â¿_ð_20220207_231436\\\\feature_coinstatsindex_17\\\\node1\\\\test.csv'",
      "created_at" : "2022-02-08T10:02:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1032425604",
      "id" : 1032425604,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII5849iZCE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1032425604/reactions"
      },
      "updated_at" : "2022-02-08T10:02:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1032425604",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r801463108"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801463108"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit:\r\n\r\n```suggestion\r\n        \"Dumps content of coinstats index to a CSV file.\",\r\n```\r\n\r\nCan remove some whitespace and `\\n`.",
      "commit_id" : "e381d716b03888632196920caff95aa958e5cc72",
      "created_at" : "2022-02-08T10:08:44Z",
      "diff_hunk" : "@@ -1161,6 +1163,162 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r801463108",
      "id" : 801463108,
      "line" : 1169,
      "node_id" : "PRRC_kwDOABII584vxVtE",
      "original_commit_id" : "e381d716b03888632196920caff95aa958e5cc72",
      "original_line" : 1169,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 23,
      "pull_request_review_id" : 875792309,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801463108/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-08T10:15:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801463108",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r801465434"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801465434"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Wouldn't you have to delete the default constructor now? Otherwise it seems possible to leave this uninitialized?",
      "commit_id" : "e381d716b03888632196920caff95aa958e5cc72",
      "created_at" : "2022-02-08T10:11:24Z",
      "diff_hunk" : "@@ -29,7 +29,7 @@ enum class CoinStatsHashType {\n \n struct CCoinsStats {\n     //! Which hash type to use\n-    const CoinStatsHashType m_hash_type;\n+    CoinStatsHashType m_hash_type;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r801465434",
      "id" : 801465434,
      "line" : 32,
      "node_id" : "PRRC_kwDOABII584vxWRa",
      "original_commit_id" : "a287c74981177409a0fc9cfeafad3383227bca49",
      "original_line" : 32,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/coinstats.h",
      "position" : 5,
      "pull_request_review_id" : 875792309,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801465434/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-08T10:15:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801465434",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r801468136"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801468136"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Missing `{` here and elsewhere?",
      "commit_id" : "e381d716b03888632196920caff95aa958e5cc72",
      "created_at" : "2022-02-08T10:14:23Z",
      "diff_hunk" : "@@ -1161,6 +1163,162 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",\n+                {\n+                    {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+                    {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+                    HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r801468136",
      "id" : 801468136,
      "line" : 1186,
      "node_id" : "PRRC_kwDOABII584vxW7o",
      "original_commit_id" : "e381d716b03888632196920caff95aa958e5cc72",
      "original_line" : 1186,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 40,
      "pull_request_review_id" : 875792309,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801468136/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-08T10:15:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801468136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r805183084"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805183084"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed",
      "commit_id" : "3772c09e16544c7876da13f33e6cb11401c9e4bd",
      "created_at" : "2022-02-12T17:17:19Z",
      "diff_hunk" : "@@ -1161,6 +1163,162 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",\n+                {\n+                    {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+                    {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+                    HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r805183084",
      "id" : 805183084,
      "in_reply_to_id" : 801468136,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584v_h5s",
      "original_commit_id" : "e381d716b03888632196920caff95aa958e5cc72",
      "original_line" : 1186,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 880874019,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805183084/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-12T17:17:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805183084",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r805183092"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805183092"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "3772c09e16544c7876da13f33e6cb11401c9e4bd",
      "created_at" : "2022-02-12T17:17:24Z",
      "diff_hunk" : "@@ -1161,6 +1163,162 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r805183092",
      "id" : 805183092,
      "in_reply_to_id" : 801463108,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584v_h50",
      "original_commit_id" : "e381d716b03888632196920caff95aa958e5cc72",
      "original_line" : 1169,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 880874031,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805183092/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-12T17:17:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805183092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r805183221"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805183221"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Hm, ok, didn't think about that. I opted to set hash_serialized as a default value instead.",
      "commit_id" : "3772c09e16544c7876da13f33e6cb11401c9e4bd",
      "created_at" : "2022-02-12T17:18:37Z",
      "diff_hunk" : "@@ -29,7 +29,7 @@ enum class CoinStatsHashType {\n \n struct CCoinsStats {\n     //! Which hash type to use\n-    const CoinStatsHashType m_hash_type;\n+    CoinStatsHashType m_hash_type;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r805183221",
      "id" : 805183221,
      "in_reply_to_id" : 801465434,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584v_h71",
      "original_commit_id" : "a287c74981177409a0fc9cfeafad3383227bca49",
      "original_line" : 32,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/coinstats.h",
      "position" : null,
      "pull_request_review_id" : 880874128,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805183221/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-12T17:18:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805183221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed comments by @Sjors and @MarcoFalke , thanks for reviewing!",
      "created_at" : "2022-02-12T17:20:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1037325451",
      "id" : 1037325451,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII58491FSL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1037325451/reactions"
      },
      "updated_at" : "2022-02-12T17:20:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1037325451",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r810076128"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810076128"
         }
      },
      "author_association" : "MEMBER",
      "body" : "3772c09e16544c7876da13f33e6cb11401c9e4bd : this is a cumulative metric. Would be nice to get the per block work. ",
      "commit_id" : "3772c09e16544c7876da13f33e6cb11401c9e4bd",
      "created_at" : "2022-02-18T14:59:20Z",
      "diff_hunk" : "@@ -1291,7 +1297,13 @@ static RPCHelpMan dumpcoinstats()\n         file << strprintf(\"%s,\", FormatMoney(unspendables_scripts));\n \n         const CAmount unspendables_unclaimed_rewards = cumulative ? stats.total_unspendables_unclaimed_rewards : stats.total_unspendables_unclaimed_rewards - prev_stats.total_unspendables_unclaimed_rewards;\n-        file << strprintf(\"%s\\n\", FormatMoney(unspendables_unclaimed_rewards));\n+        file << strprintf(\"%s,\", FormatMoney(unspendables_unclaimed_rewards));\n+\n+        file << strprintf(\"%d,\", pindex->nTx);\n+        file << strprintf(\"%d,\", pindex->nTime);\n+        file << strprintf(\"%d,\", pindex->GetMedianTimePast());\n+        file << strprintf(\"%s,\", pindex->nChainWork.GetHex());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r810076128",
      "id" : 810076128,
      "line" : 1305,
      "node_id" : "PRRC_kwDOABII584wSMfg",
      "original_commit_id" : "3772c09e16544c7876da13f33e6cb11401c9e4bd",
      "original_line" : 1305,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 36,
      "pull_request_review_id" : 887387273,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810076128/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-18T15:04:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810076128",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r810079612"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810079612"
         }
      },
      "author_association" : "MEMBER",
      "body" : "3772c09e16544c7876da13f33e6cb11401c9e4bd : this is not cumulative, so would be nice to have cumulative version.",
      "commit_id" : "3772c09e16544c7876da13f33e6cb11401c9e4bd",
      "created_at" : "2022-02-18T15:03:11Z",
      "diff_hunk" : "@@ -1291,7 +1297,13 @@ static RPCHelpMan dumpcoinstats()\n         file << strprintf(\"%s,\", FormatMoney(unspendables_scripts));\n \n         const CAmount unspendables_unclaimed_rewards = cumulative ? stats.total_unspendables_unclaimed_rewards : stats.total_unspendables_unclaimed_rewards - prev_stats.total_unspendables_unclaimed_rewards;\n-        file << strprintf(\"%s\\n\", FormatMoney(unspendables_unclaimed_rewards));\n+        file << strprintf(\"%s,\", FormatMoney(unspendables_unclaimed_rewards));\n+\n+        file << strprintf(\"%d,\", pindex->nTx);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r810079612",
      "id" : 810079612,
      "line" : 1302,
      "node_id" : "PRRC_kwDOABII584wSNV8",
      "original_commit_id" : "3772c09e16544c7876da13f33e6cb11401c9e4bd",
      "original_line" : 1302,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 33,
      "pull_request_review_id" : 887387273,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810079612/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-18T15:04:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810079612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r810114626"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810114626"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The per-block delta in bogosize is useful too, for the non cumulative version.",
      "commit_id" : "3772c09e16544c7876da13f33e6cb11401c9e4bd",
      "created_at" : "2022-02-18T15:40:39Z",
      "diff_hunk" : "@@ -1161,6 +1163,163 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file.\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+    }\n+\n+    fs::path filepath = fs::u8path(request.params[0].get_str());\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    std::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+    file << strprintf(\"height,\"\n+                      \"block_hash,\"\n+                      \"txouts,\"\n+                      \"bogosize,\"\n+                      \"muhash,\");\n+\n+    if (cumulative) {\n+        file << strprintf(\"total_amount,\"\n+                          \"total_unspendable_amount,\"\n+                          \"total_prevout_spent_amount,\"\n+                          \"total_new_outputs_ex_coinbase_amount,\"\n+                          \"total_coinbase_amount,\"\n+                          \"total_subsidy,\"\n+                          \"total_genesis_block,\"\n+                          \"total_bip30,\"\n+                          \"total_unspendable_scripts,\"\n+                          \"total_unclaimed_rewards,\");\n+    } else {\n+        file << strprintf(\"amount,\"\n+                          \"unspendable_amount,\"\n+                          \"prevout_spent_amount,\"\n+                          \"new_outputs_ex_coinbase_amount,\"\n+                          \"coinbase_amount,\"\n+                          \"subsidy,\"\n+                          \"genesis_block,\"\n+                          \"bip30,\"\n+                          \"unspendable_scripts,\"\n+                          \"unclaimed_rewards,\");\n+    }\n+\n+    file << strprintf(\"txs,\"\n+                      \"timestamp,\"\n+                      \"mediantime,\"\n+                      \"chainwork,\"\n+                      \"version\\n\");\n+\n+    CCoinsStats stats{CoinStatsHashType::MUHASH};\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    ChainstateManager& chainman = EnsureChainman(node);\n+    CChainState& active_chainstate = chainman.ActiveChainstate();\n+    active_chainstate.ForceFlushStateToDisk();\n+    CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+    CCoinsView* coins_view;\n+    BlockManager* blockman;\n+    {\n+        LOCK(::cs_main);\n+        coins_view = &active_chainstate.CoinsDB();\n+        blockman = &active_chainstate.m_blockman;\n+    }\n+\n+    CCoinsStats prev_stats{CoinStatsHashType::MUHASH};\n+\n+    for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+        if (!GetUTXOStats(coins_view, *blockman, stats, node.rpc_interruption_point, pindex))\n+            throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to read UTXO set\");\n+\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nHeight));\n+        file << strprintf(\"%s,\", stats.hashBlock.GetHex());\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nTransactionOutputs));\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nBogoSize));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r810114626",
      "id" : 810114626,
      "line" : 1268,
      "node_id" : "PRRC_kwDOABII584wSV5C",
      "original_commit_id" : "3772c09e16544c7876da13f33e6cb11401c9e4bd",
      "original_line" : 1268,
      "original_position" : 122,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 122,
      "pull_request_review_id" : 887442371,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810114626/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-18T15:40:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810114626",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed @Sjors feedback and also squashed some commits because it was just easier to do the reorganization this way.\r\n\r\n> Maybe document the fields in the help, since some are not obvious. For each item, note if it has a cumulative version.\r\n\r\nI was a bit unsure where to put this and how to format it but I tried my best.\r\n\r\n> A slightly more logical ordering of columns would be:\r\n\r\nI applied that order\r\n\r\n> * maybe insert: `txins` to count the number of outputs spent. I think you can use `coin_count` between two blocks and `txouts` to calculate it.\r\n\r\nI think it's not possible without updating `coinstatsindex`. The `coin_count` isn't included there, I am not sure why but probably just bad timing since it was merged while I was already working on the index. Leaving this as a follow-up since I first have to think about updating the index. I also thought about calculating it with txouts but I think it would be `(txouts - prev_txouts) - coinbase_txouts - unspendable_txouts` and from those I am missing the unspendable counts as well.\r\n\r\n> * txouts (document for cumulative: this is the total number of outputs ever created, not the total in existence at this height)\r\n\r\nI actually didn't have this as non-cummulative yet, but done as well.\r\n\r\n> * maybe insert: the number txouts in existence at this height (the same for cumulative). It may be useful to track its ratio to bogosize over time.\r\n\r\nI think you mean UTXOs here which would basically be `coin_count`? Or should it also include unspendable outputs?\r\n\r\n> * prevout_spent_amount (maybe rename to `amount_spent`)\r\n> * amount (or `amount_created`)\r\n\r\nrenamed both\r\n\r\n> * unspendable_amount (docs should clarify this includes both immature and OP_RETURN)\r\n\r\nNo, immature is not included here. This is the just the total of the other unspendable values (genesis, bip30, scripts and unclaimed rewards)\r\n",
      "created_at" : "2022-02-20T01:28:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1046138401",
      "id" : 1046138401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII584-Ws4h",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046138401/reactions"
      },
      "updated_at" : "2022-02-20T01:28:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046138401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r810556376"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810556376"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "created_at" : "2022-02-20T01:29:01Z",
      "diff_hunk" : "@@ -1161,6 +1163,163 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file.\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+    }\n+\n+    fs::path filepath = fs::u8path(request.params[0].get_str());\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    std::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+    file << strprintf(\"height,\"\n+                      \"block_hash,\"\n+                      \"txouts,\"\n+                      \"bogosize,\"\n+                      \"muhash,\");\n+\n+    if (cumulative) {\n+        file << strprintf(\"total_amount,\"\n+                          \"total_unspendable_amount,\"\n+                          \"total_prevout_spent_amount,\"\n+                          \"total_new_outputs_ex_coinbase_amount,\"\n+                          \"total_coinbase_amount,\"\n+                          \"total_subsidy,\"\n+                          \"total_genesis_block,\"\n+                          \"total_bip30,\"\n+                          \"total_unspendable_scripts,\"\n+                          \"total_unclaimed_rewards,\");\n+    } else {\n+        file << strprintf(\"amount,\"\n+                          \"unspendable_amount,\"\n+                          \"prevout_spent_amount,\"\n+                          \"new_outputs_ex_coinbase_amount,\"\n+                          \"coinbase_amount,\"\n+                          \"subsidy,\"\n+                          \"genesis_block,\"\n+                          \"bip30,\"\n+                          \"unspendable_scripts,\"\n+                          \"unclaimed_rewards,\");\n+    }\n+\n+    file << strprintf(\"txs,\"\n+                      \"timestamp,\"\n+                      \"mediantime,\"\n+                      \"chainwork,\"\n+                      \"version\\n\");\n+\n+    CCoinsStats stats{CoinStatsHashType::MUHASH};\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    ChainstateManager& chainman = EnsureChainman(node);\n+    CChainState& active_chainstate = chainman.ActiveChainstate();\n+    active_chainstate.ForceFlushStateToDisk();\n+    CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+    CCoinsView* coins_view;\n+    BlockManager* blockman;\n+    {\n+        LOCK(::cs_main);\n+        coins_view = &active_chainstate.CoinsDB();\n+        blockman = &active_chainstate.m_blockman;\n+    }\n+\n+    CCoinsStats prev_stats{CoinStatsHashType::MUHASH};\n+\n+    for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+        if (!GetUTXOStats(coins_view, *blockman, stats, node.rpc_interruption_point, pindex))\n+            throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to read UTXO set\");\n+\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nHeight));\n+        file << strprintf(\"%s,\", stats.hashBlock.GetHex());\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nTransactionOutputs));\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nBogoSize));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r810556376",
      "id" : 810556376,
      "in_reply_to_id" : 810114626,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584wUBvY",
      "original_commit_id" : "3772c09e16544c7876da13f33e6cb11401c9e4bd",
      "original_line" : 1268,
      "original_position" : 122,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 887980496,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810556376/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-20T01:29:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810556376",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r810556379"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810556379"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "created_at" : "2022-02-20T01:29:05Z",
      "diff_hunk" : "@@ -1291,7 +1297,13 @@ static RPCHelpMan dumpcoinstats()\n         file << strprintf(\"%s,\", FormatMoney(unspendables_scripts));\n \n         const CAmount unspendables_unclaimed_rewards = cumulative ? stats.total_unspendables_unclaimed_rewards : stats.total_unspendables_unclaimed_rewards - prev_stats.total_unspendables_unclaimed_rewards;\n-        file << strprintf(\"%s\\n\", FormatMoney(unspendables_unclaimed_rewards));\n+        file << strprintf(\"%s,\", FormatMoney(unspendables_unclaimed_rewards));\n+\n+        file << strprintf(\"%d,\", pindex->nTx);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r810556379",
      "id" : 810556379,
      "in_reply_to_id" : 810079612,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584wUBvb",
      "original_commit_id" : "3772c09e16544c7876da13f33e6cb11401c9e4bd",
      "original_line" : 1302,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 887980498,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810556379/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-20T01:29:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810556379",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r810556381"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810556381"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "created_at" : "2022-02-20T01:29:10Z",
      "diff_hunk" : "@@ -1291,7 +1297,13 @@ static RPCHelpMan dumpcoinstats()\n         file << strprintf(\"%s,\", FormatMoney(unspendables_scripts));\n \n         const CAmount unspendables_unclaimed_rewards = cumulative ? stats.total_unspendables_unclaimed_rewards : stats.total_unspendables_unclaimed_rewards - prev_stats.total_unspendables_unclaimed_rewards;\n-        file << strprintf(\"%s\\n\", FormatMoney(unspendables_unclaimed_rewards));\n+        file << strprintf(\"%s,\", FormatMoney(unspendables_unclaimed_rewards));\n+\n+        file << strprintf(\"%d,\", pindex->nTx);\n+        file << strprintf(\"%d,\", pindex->nTime);\n+        file << strprintf(\"%d,\", pindex->GetMedianTimePast());\n+        file << strprintf(\"%s,\", pindex->nChainWork.GetHex());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r810556381",
      "id" : 810556381,
      "in_reply_to_id" : 810076128,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584wUBvd",
      "original_commit_id" : "3772c09e16544c7876da13f33e6cb11401c9e4bd",
      "original_line" : 1305,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 887980502,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810556381/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-20T01:29:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/810556381",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r811234262"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811234262"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`nTx` is not cumulative\r\n```suggestion\r\n        num_tx_sum += pindex->nTx;\r\n        const int num_tx = cumulative ? num_tx_sum : pindex->nTx;\r\n```",
      "commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "created_at" : "2022-02-21T15:25:54Z",
      "diff_hunk" : "@@ -1161,6 +1163,197 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs created\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)amount_created - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)coinbase_amount - Coinbase subsidy amount\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)subsidy - Total subsidy paid out\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of all other unspendable categories\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+    }\n+\n+    fs::path filepath = fs::u8path(request.params[0].get_str());\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    std::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+    file << strprintf(\"height,\"\n+                      \"block_hash,\"\n+                      \"timestamp,\"\n+                      \"mediantime,\"\n+                      \"version,\"\n+                      );\n+\n+    if (cumulative) {\n+        file << strprintf(\"total_txs,\"\n+                          \"total_txouts,\"\n+                          \"total_amount_spent,\"\n+                          \"total_amount_created,\"\n+                          \"total_coinbase_amount,\"\n+                          \"total_new_outputs_ex_coinbase_amount,\"\n+                          \"total_subsidy,\"\n+                          \"total_unclaimed_rewards,\"\n+                          \"total_unspendable_scripts,\"\n+                          \"total_unspendable_amount,\"\n+                          \"total_genesis_block,\"\n+                          \"total_bip30,\"\n+                          \"total_chainwork,\"\n+                          \"muhash,\"\n+                          \"total_bogosize\\n\");\n+    } else {\n+        file << strprintf(\"txs,\"\n+                          \"txouts,\"\n+                          \"amount_spent,\"\n+                          \"amount_created,\"\n+                          \"coinbase_amount,\"\n+                          \"new_outputs_ex_coinbase_amount,\"\n+                          \"subsidy,\"\n+                          \"unclaimed_rewards,\"\n+                          \"unspendable_scripts,\"\n+                          \"unspendable_amount,\"\n+                          \"genesis_block,\"\n+                          \"bip30,\"\n+                          \"chainwork,\"\n+                          \"muhash,\"\n+                          \"bogosize\\n\");\n+    }\n+\n+    CCoinsStats stats{CoinStatsHashType::MUHASH};\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    ChainstateManager& chainman = EnsureChainman(node);\n+    CChainState& active_chainstate = chainman.ActiveChainstate();\n+    active_chainstate.ForceFlushStateToDisk();\n+    CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+    CCoinsView* coins_view;\n+    BlockManager* blockman;\n+    {\n+        LOCK(::cs_main);\n+        coins_view = &active_chainstate.CoinsDB();\n+        blockman = &active_chainstate.m_blockman;\n+    }\n+\n+    CCoinsStats prev_stats{CoinStatsHashType::MUHASH};\n+\n+    for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+        if (!GetUTXOStats(coins_view, *blockman, stats, node.rpc_interruption_point, pindex))\n+            throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to read UTXO set\");\n+\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nHeight));\n+        file << strprintf(\"%s,\", stats.hashBlock.GetHex());\n+        file << strprintf(\"%d,\", pindex->nTime);\n+        file << strprintf(\"%d,\", pindex->GetMedianTimePast());\n+        file << strprintf(\"%s,\", pindex->nVersion);\n+\n+        const int num_tx = cumulative ? pindex->nTx : pindex->nTx - (pindex->pprev ? pindex->pprev->nTx : 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r811234262",
      "id" : 811234262,
      "line" : 1297,
      "node_id" : "PRRC_kwDOABII584wWnPW",
      "original_commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "original_line" : 1297,
      "original_position" : 151,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 151,
      "pull_request_review_id" : 888832263,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811234262/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-21T16:21:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811234262",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r811235018"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811235018"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n      uint64_t num_tx_sum = 0;\r\n```",
      "commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "created_at" : "2022-02-21T15:26:44Z",
      "diff_hunk" : "@@ -1161,6 +1163,197 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs created\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)amount_created - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)coinbase_amount - Coinbase subsidy amount\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)subsidy - Total subsidy paid out\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of all other unspendable categories\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+    }\n+\n+    fs::path filepath = fs::u8path(request.params[0].get_str());\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    std::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+    file << strprintf(\"height,\"\n+                      \"block_hash,\"\n+                      \"timestamp,\"\n+                      \"mediantime,\"\n+                      \"version,\"\n+                      );\n+\n+    if (cumulative) {\n+        file << strprintf(\"total_txs,\"\n+                          \"total_txouts,\"\n+                          \"total_amount_spent,\"\n+                          \"total_amount_created,\"\n+                          \"total_coinbase_amount,\"\n+                          \"total_new_outputs_ex_coinbase_amount,\"\n+                          \"total_subsidy,\"\n+                          \"total_unclaimed_rewards,\"\n+                          \"total_unspendable_scripts,\"\n+                          \"total_unspendable_amount,\"\n+                          \"total_genesis_block,\"\n+                          \"total_bip30,\"\n+                          \"total_chainwork,\"\n+                          \"muhash,\"\n+                          \"total_bogosize\\n\");\n+    } else {\n+        file << strprintf(\"txs,\"\n+                          \"txouts,\"\n+                          \"amount_spent,\"\n+                          \"amount_created,\"\n+                          \"coinbase_amount,\"\n+                          \"new_outputs_ex_coinbase_amount,\"\n+                          \"subsidy,\"\n+                          \"unclaimed_rewards,\"\n+                          \"unspendable_scripts,\"\n+                          \"unspendable_amount,\"\n+                          \"genesis_block,\"\n+                          \"bip30,\"\n+                          \"chainwork,\"\n+                          \"muhash,\"\n+                          \"bogosize\\n\");\n+    }\n+\n+    CCoinsStats stats{CoinStatsHashType::MUHASH};\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    ChainstateManager& chainman = EnsureChainman(node);\n+    CChainState& active_chainstate = chainman.ActiveChainstate();\n+    active_chainstate.ForceFlushStateToDisk();\n+    CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+    CCoinsView* coins_view;\n+    BlockManager* blockman;\n+    {\n+        LOCK(::cs_main);\n+        coins_view = &active_chainstate.CoinsDB();\n+        blockman = &active_chainstate.m_blockman;\n+    }\n+\n+    CCoinsStats prev_stats{CoinStatsHashType::MUHASH};\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r811235018",
      "id" : 811235018,
      "line" : 1286,
      "node_id" : "PRRC_kwDOABII584wWnbK",
      "original_commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "original_line" : 1286,
      "original_position" : 140,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 140,
      "pull_request_review_id" : 888832263,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811235018/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-21T16:21:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811235018",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r811242325"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811242325"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"Nett number of\" or \"outputs added\"\r\n\r\nSee e.g. block 170 that has a coinbase output and a regular transaction with one input and two outputs, yet `txouts` is 2.\r\nhttps://www.blockchain.com/btc/block/00000000d1145790a8694403d4063f323d499e655c83426834d4ce2f8dd4a2ee\r\n\r\n(it'd be nice to actually know how many were created, but see discussion elsewhere)",
      "commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "created_at" : "2022-02-21T15:35:16Z",
      "diff_hunk" : "@@ -1161,6 +1163,197 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs created\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r811242325",
      "id" : 811242325,
      "line" : 1176,
      "node_id" : "PRRC_kwDOABII584wWpNV",
      "original_commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "original_line" : 1176,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 30,
      "pull_request_review_id" : 888832263,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811242325/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-21T16:23:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811242325",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r811246426"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811246426"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe call this `amount_generated` and add \"(never more than the block subsidy)",
      "commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "created_at" : "2022-02-21T15:40:11Z",
      "diff_hunk" : "@@ -1161,6 +1163,197 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs created\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)amount_created - Amount of coins added to the UTXO set\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r811246426",
      "id" : 811246426,
      "line" : 1178,
      "node_id" : "PRRC_kwDOABII584wWqNa",
      "original_commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "original_line" : 1178,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 32,
      "pull_request_review_id" : 888832263,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811246426/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-21T16:21:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811246426",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r811258437"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811258437"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should be \"Maximum subsidy\" \r\n\r\nBlock 501,726 (0000000000000000004b27f9ee7ba33d6f048f684aaeb0eea4befd80f1701126) claimed 0 rewards, yet its `subsidy`column says `12.5`.\r\n\r\nAlternatively we can keep `subsidy` what it is, but then `amount_generated` should be negative.\r\n\r\nhttps://bitcoin.stackexchange.com/questions/38994/will-there-be-21-million-bitcoins-eventually\r\n\r\nUnrelated bug: the `unspendable_amount` for this block is set to 12.5 but should be zero (also wrong in `gettxoutsetinfo`). Same issue for block 526,591 which claimed half its reward (the other half is not unspendable, it doesn't exist). This is different than the situation with the genesis block: that block does exist and does claim a reward, but it just can't be spent.",
      "commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "created_at" : "2022-02-21T15:54:42Z",
      "diff_hunk" : "@@ -1161,6 +1163,197 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs created\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)amount_created - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)coinbase_amount - Coinbase subsidy amount\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)subsidy - Total subsidy paid out\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r811258437",
      "id" : 811258437,
      "line" : 1181,
      "node_id" : "PRRC_kwDOABII584wWtJF",
      "original_commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "original_line" : 1181,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 35,
      "pull_request_review_id" : 888832263,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811258437/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-21T16:24:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811258437",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r811274391"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811274391"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"Amount claimed in coinbase transaction.\" (see e.g. block 409,008 which claimed a whopping 17K BTC.",
      "commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "created_at" : "2022-02-21T16:13:49Z",
      "diff_hunk" : "@@ -1161,6 +1163,197 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs created\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)amount_created - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)coinbase_amount - Coinbase subsidy amount\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r811274391",
      "id" : 811274391,
      "line" : 1179,
      "node_id" : "PRRC_kwDOABII584wWxCX",
      "original_commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "original_line" : 1179,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 33,
      "pull_request_review_id" : 888832263,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811274391/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-21T16:21:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811274391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r820276356"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276356"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "e5bcf405345395e0ae79254131ee7a5d1d2a046f",
      "created_at" : "2022-03-06T19:26:56Z",
      "diff_hunk" : "@@ -1161,6 +1163,197 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs created\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)amount_created - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)coinbase_amount - Coinbase subsidy amount\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r820276356",
      "id" : 820276356,
      "in_reply_to_id" : 811274391,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584w5GyE",
      "original_commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "original_line" : 1179,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 901111453,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276356/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-06T19:26:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r820276430"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276430"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Hehe, we are really getting into the weeds here :)\r\n\r\nYeah, the \"paid out\" part is definitely wrong. It wasn't paid out but also it can never be paid out in the the future, I still find this hard to express concisely so changed to \"Maximum subsidy\".\r\n\r\nFor the `unspendable_amount` comment: that is not a bug by my definition. When I wrote the coinstatsindex one of my goals was to make these non-existent amounts visible, and I summed this up with the other categories of lost coins under the umbrella term unspendables . See this code block in coinstatsindex:\r\n\r\n```\r\n    const CAmount unclaimed_rewards{(m_total_prevout_spent_amount + m_total_subsidy) - (m_total_new_outputs_ex_coinbase_amount + m_total_coinbase_amount + m_total_unspendable_amount)};\r\n    m_total_unspendable_amount += unclaimed_rewards;\r\n    m_total_unspendables_unclaimed_rewards += unclaimed_rewards;\r\n```\r\n\r\nIf the definition for anything \"unspendable\" was that it needed have to existed before as an output in a tx, then yes, the unclaimed rewards should not be part of this category. But I think this is confusing to some without deep knowledge of how the subsidies work. They might think that these amounts could still be claimed some time in the future, since they haven't existed yet and there will be 21M, right? So I was more looking at this from the side of the 21M: for example the 12.5 are part of the 21M total (and part of the >19M that are considered mined) even though they will never exist because the moment to claim them has passed. Thus, I consider them unspendable even though they never even existed in the first place, i.e. \"unspendable\" includes \"never spendable in the future\". If we don't keep track of these to some degree we can never really do the full accounting that this export was intended for.",
      "commit_id" : "e5bcf405345395e0ae79254131ee7a5d1d2a046f",
      "created_at" : "2022-03-06T19:27:31Z",
      "diff_hunk" : "@@ -1161,6 +1163,197 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs created\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)amount_created - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)coinbase_amount - Coinbase subsidy amount\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)subsidy - Total subsidy paid out\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r820276430",
      "id" : 820276430,
      "in_reply_to_id" : 811258437,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584w5GzO",
      "original_commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "original_line" : 1181,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 901111510,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276430/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-06T19:27:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276430",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r820276439"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276439"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "e5bcf405345395e0ae79254131ee7a5d1d2a046f",
      "created_at" : "2022-03-06T19:27:40Z",
      "diff_hunk" : "@@ -1161,6 +1163,197 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs created\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)amount_created - Amount of coins added to the UTXO set\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r820276439",
      "id" : 820276439,
      "in_reply_to_id" : 811246426,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584w5GzX",
      "original_commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "original_line" : 1178,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 901111521,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276439/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-06T19:27:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r820276446"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276446"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "e5bcf405345395e0ae79254131ee7a5d1d2a046f",
      "created_at" : "2022-03-06T19:27:44Z",
      "diff_hunk" : "@@ -1161,6 +1163,197 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs created\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r820276446",
      "id" : 820276446,
      "in_reply_to_id" : 811242325,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584w5Gze",
      "original_commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "original_line" : 1176,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 901111527,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276446/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-06T19:27:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276446",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r820276454"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276454"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "e5bcf405345395e0ae79254131ee7a5d1d2a046f",
      "created_at" : "2022-03-06T19:27:52Z",
      "diff_hunk" : "@@ -1161,6 +1163,197 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs created\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)amount_created - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)coinbase_amount - Coinbase subsidy amount\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)subsidy - Total subsidy paid out\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of all other unspendable categories\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+    }\n+\n+    fs::path filepath = fs::u8path(request.params[0].get_str());\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    std::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+    file << strprintf(\"height,\"\n+                      \"block_hash,\"\n+                      \"timestamp,\"\n+                      \"mediantime,\"\n+                      \"version,\"\n+                      );\n+\n+    if (cumulative) {\n+        file << strprintf(\"total_txs,\"\n+                          \"total_txouts,\"\n+                          \"total_amount_spent,\"\n+                          \"total_amount_created,\"\n+                          \"total_coinbase_amount,\"\n+                          \"total_new_outputs_ex_coinbase_amount,\"\n+                          \"total_subsidy,\"\n+                          \"total_unclaimed_rewards,\"\n+                          \"total_unspendable_scripts,\"\n+                          \"total_unspendable_amount,\"\n+                          \"total_genesis_block,\"\n+                          \"total_bip30,\"\n+                          \"total_chainwork,\"\n+                          \"muhash,\"\n+                          \"total_bogosize\\n\");\n+    } else {\n+        file << strprintf(\"txs,\"\n+                          \"txouts,\"\n+                          \"amount_spent,\"\n+                          \"amount_created,\"\n+                          \"coinbase_amount,\"\n+                          \"new_outputs_ex_coinbase_amount,\"\n+                          \"subsidy,\"\n+                          \"unclaimed_rewards,\"\n+                          \"unspendable_scripts,\"\n+                          \"unspendable_amount,\"\n+                          \"genesis_block,\"\n+                          \"bip30,\"\n+                          \"chainwork,\"\n+                          \"muhash,\"\n+                          \"bogosize\\n\");\n+    }\n+\n+    CCoinsStats stats{CoinStatsHashType::MUHASH};\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    ChainstateManager& chainman = EnsureChainman(node);\n+    CChainState& active_chainstate = chainman.ActiveChainstate();\n+    active_chainstate.ForceFlushStateToDisk();\n+    CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+    CCoinsView* coins_view;\n+    BlockManager* blockman;\n+    {\n+        LOCK(::cs_main);\n+        coins_view = &active_chainstate.CoinsDB();\n+        blockman = &active_chainstate.m_blockman;\n+    }\n+\n+    CCoinsStats prev_stats{CoinStatsHashType::MUHASH};\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r820276454",
      "id" : 820276454,
      "in_reply_to_id" : 811235018,
      "line" : 1287,
      "node_id" : "PRRC_kwDOABII584w5Gzm",
      "original_commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "original_line" : 1287,
      "original_position" : 140,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 141,
      "pull_request_review_id" : 901111538,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276454/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-06T19:27:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276454",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r820276461"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276461"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "e5bcf405345395e0ae79254131ee7a5d1d2a046f",
      "created_at" : "2022-03-06T19:27:58Z",
      "diff_hunk" : "@@ -1161,6 +1163,197 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs created\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)amount_created - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)coinbase_amount - Coinbase subsidy amount\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)subsidy - Total subsidy paid out\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of all other unspendable categories\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+    }\n+\n+    fs::path filepath = fs::u8path(request.params[0].get_str());\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    std::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+    file << strprintf(\"height,\"\n+                      \"block_hash,\"\n+                      \"timestamp,\"\n+                      \"mediantime,\"\n+                      \"version,\"\n+                      );\n+\n+    if (cumulative) {\n+        file << strprintf(\"total_txs,\"\n+                          \"total_txouts,\"\n+                          \"total_amount_spent,\"\n+                          \"total_amount_created,\"\n+                          \"total_coinbase_amount,\"\n+                          \"total_new_outputs_ex_coinbase_amount,\"\n+                          \"total_subsidy,\"\n+                          \"total_unclaimed_rewards,\"\n+                          \"total_unspendable_scripts,\"\n+                          \"total_unspendable_amount,\"\n+                          \"total_genesis_block,\"\n+                          \"total_bip30,\"\n+                          \"total_chainwork,\"\n+                          \"muhash,\"\n+                          \"total_bogosize\\n\");\n+    } else {\n+        file << strprintf(\"txs,\"\n+                          \"txouts,\"\n+                          \"amount_spent,\"\n+                          \"amount_created,\"\n+                          \"coinbase_amount,\"\n+                          \"new_outputs_ex_coinbase_amount,\"\n+                          \"subsidy,\"\n+                          \"unclaimed_rewards,\"\n+                          \"unspendable_scripts,\"\n+                          \"unspendable_amount,\"\n+                          \"genesis_block,\"\n+                          \"bip30,\"\n+                          \"chainwork,\"\n+                          \"muhash,\"\n+                          \"bogosize\\n\");\n+    }\n+\n+    CCoinsStats stats{CoinStatsHashType::MUHASH};\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    ChainstateManager& chainman = EnsureChainman(node);\n+    CChainState& active_chainstate = chainman.ActiveChainstate();\n+    active_chainstate.ForceFlushStateToDisk();\n+    CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+    CCoinsView* coins_view;\n+    BlockManager* blockman;\n+    {\n+        LOCK(::cs_main);\n+        coins_view = &active_chainstate.CoinsDB();\n+        blockman = &active_chainstate.m_blockman;\n+    }\n+\n+    CCoinsStats prev_stats{CoinStatsHashType::MUHASH};\n+\n+    for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+        if (!GetUTXOStats(coins_view, *blockman, stats, node.rpc_interruption_point, pindex))\n+            throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to read UTXO set\");\n+\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nHeight));\n+        file << strprintf(\"%s,\", stats.hashBlock.GetHex());\n+        file << strprintf(\"%d,\", pindex->nTime);\n+        file << strprintf(\"%d,\", pindex->GetMedianTimePast());\n+        file << strprintf(\"%s,\", pindex->nVersion);\n+\n+        const int num_tx = cumulative ? pindex->nTx : pindex->nTx - (pindex->pprev ? pindex->pprev->nTx : 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r820276461",
      "id" : 820276461,
      "in_reply_to_id" : 811234262,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584w5Gzt",
      "original_commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "original_line" : 1297,
      "original_position" : 151,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 901111544,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276461/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-06T19:27:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/820276461",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Seeing this in a spreadsheet slightly changed my thoughts on the optimal order. After txouts let's do:\r\n> \r\n> * coinbase_amount\r\n> * subsidy (which represents the maximum allowed subsidy)\r\n> * amount_generated (in theory this can be less than zero, but afaik there has never been a block that included transactions but forgot to claim both the subsidy and fees)\r\n> * unclaimed_rewards\r\n> * amount_spent\r\n> * new_outputs_ex_coinbase_amount\r\n> \r\n> (then continue as it is now, from unspendable_scripts)\r\n\r\nDone",
      "created_at" : "2022-03-06T19:29:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1060024769",
      "id" : 1060024769,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII584_LrHB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060024769/reactions"
      },
      "updated_at" : "2022-03-06T19:29:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060024769",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r824512022"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/824512022"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I see, in that case just document that \"unspendable\" means \"unspendable coins plus unclaimed subsidies\".\r\n\r\nThough I think it's cleaner to track `unspendable` and `unclaimed_rewards` separately, and then explain in the docs that \"unclaimed\" means it can never be claimed. I suspect anyone using an RPC like this will understand that.",
      "commit_id" : "e5bcf405345395e0ae79254131ee7a5d1d2a046f",
      "created_at" : "2022-03-11T08:59:16Z",
      "diff_hunk" : "@@ -1161,6 +1163,197 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs created\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)amount_created - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)coinbase_amount - Coinbase subsidy amount\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)subsidy - Total subsidy paid out\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r824512022",
      "id" : 824512022,
      "in_reply_to_id" : 811258437,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584xJQ4W",
      "original_commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "original_line" : 1181,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 906933309,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/824512022/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-11T08:59:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/824512022",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r825516315"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825516315"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done, amended the doc for the `unspendable_amount`.\r\n\r\nI see your reasoning but at least for now let's keep it consistent with the index code and `gettxoutsetinfo` where the unclaimed rewards are in the unspendable 'category'. ",
      "commit_id" : "418331f35424bdc95dedba6023bf0d8f7819fabe",
      "created_at" : "2022-03-13T22:55:50Z",
      "diff_hunk" : "@@ -1161,6 +1163,197 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs created\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)amount_created - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)coinbase_amount - Coinbase subsidy amount\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)subsidy - Total subsidy paid out\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r825516315",
      "id" : 825516315,
      "in_reply_to_id" : 811258437,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584xNGEb",
      "original_commit_id" : "87f0cc381c77e7d321d9e01a11a4725878c81810",
      "original_line" : 1181,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 908196375,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825516315/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-13T22:55:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825516315",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "tACK 418331f35424bdc95dedba6023bf0d8f7819fabe\r\n\r\nTIL block 367,853 has the highest number of transactions ever: 12,239\r\n\r\nAdded a wish list for more stats: https://github.com/bitcoin/bitcoin/issues/24581",
      "created_at" : "2022-03-16T10:00:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1068940987",
      "id" : 1068940987,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII584_tr67",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1068940987/reactions"
      },
      "updated_at" : "2022-03-16T10:57:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1068940987",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-03-16T10:34:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1068973363",
      "id" : 1068973363,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII584_tz0z",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1068973363/reactions"
      },
      "updated_at" : "2022-03-16T10:34:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1068973363",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Way to kill the mood @DrahtBot ! Rebased...",
      "created_at" : "2022-03-16T23:49:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1069751822",
      "id" : 1069751822,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII584_wx4O",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1069751822/reactions"
      },
      "updated_at" : "2022-03-16T23:49:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1069751822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-utACK 843159e5df3dc0d1ca0341b22aaa9fe86160994a",
      "created_at" : "2022-03-17T10:20:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1070756656",
      "id" : 1070756656,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII584_0nMw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1070756656/reactions"
      },
      "updated_at" : "2022-03-17T10:20:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1070756656",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-04-24T11:56:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1107825961",
      "id" : 1107825961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII585CCBUp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1107825961/reactions"
      },
      "updated_at" : "2022-04-24T11:56:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1107825961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased",
      "created_at" : "2022-04-24T13:14:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1107839699",
      "id" : 1107839699,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII585CCErT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1107839699/reactions"
      },
      "updated_at" : "2022-04-24T13:14:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1107839699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Half of CI seems unhappy...",
      "created_at" : "2022-04-24T17:10:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1107880893",
      "id" : 1107880893,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII585CCOu9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1107880893/reactions"
      },
      "updated_at" : "2022-04-24T17:10:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1107880893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@Sjors Thanks! Fixed the silent merge conflict.",
      "created_at" : "2022-04-24T21:33:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1107922633",
      "id" : 1107922633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII585CCY7J",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1107922633/reactions"
      },
      "updated_at" : "2022-04-24T21:33:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1107922633",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-tACK 19b12fa07653cb11a6fd97566af0036241eaa8c9",
      "created_at" : "2022-04-25T18:13:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1108886824",
      "id" : 1108886824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII585CGEUo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108886824/reactions"
      },
      "updated_at" : "2022-04-25T18:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108886824",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-04-26T14:24:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1109863656",
      "id" : 1109863656,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII585CJyzo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 1,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109863656/reactions"
      },
      "updated_at" : "2022-04-26T14:24:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109863656",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r861612789"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861612789"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: I think for new code it is fine to use the normal indent (8 spaces and 12 spaces for those lines, respectively)",
      "commit_id" : "19b12fa07653cb11a6fd97566af0036241eaa8c9",
      "created_at" : "2022-04-29T09:01:38Z",
      "diff_hunk" : "@@ -795,6 +797,199 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs added\\n\"\n+        \"- (total_)coinbase_amount - Amount claimed in coinbase transaction\\n\"\n+        \"- (total_)subsidy - Maximum subsidy\\n\"\n+        \"- (total_)amount_generated - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of unspendable coins and unclaimed rewards\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r861612789",
      "id" : 861612789,
      "line" : 841,
      "node_id" : "PRRC_kwDOABII584zWyr1",
      "original_commit_id" : "19b12fa07653cb11a6fd97566af0036241eaa8c9",
      "original_line" : 841,
      "original_position" : 61,
      "original_start_line" : 840,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 61,
      "pull_request_review_id" : 957460001,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861612789/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 840,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-29T09:01:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861612789",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased and changed indentation per @MarcoFalke 's request.",
      "created_at" : "2022-05-01T13:24:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1114238467",
      "id" : 1114238467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII585Cae4D",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114238467/reactions"
      },
      "updated_at" : "2022-05-01T13:24:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114238467",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r862475085"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862475085"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "9d45f7c455318089fb73dc275efbf6e176d971e2",
      "created_at" : "2022-05-01T13:24:59Z",
      "diff_hunk" : "@@ -795,6 +797,199 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs added\\n\"\n+        \"- (total_)coinbase_amount - Amount claimed in coinbase transaction\\n\"\n+        \"- (total_)subsidy - Maximum subsidy\\n\"\n+        \"- (total_)amount_generated - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of unspendable coins and unclaimed rewards\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r862475085",
      "id" : 862475085,
      "in_reply_to_id" : 861612789,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zaFNN",
      "original_commit_id" : "19b12fa07653cb11a6fd97566af0036241eaa8c9",
      "original_line" : 841,
      "original_position" : 61,
      "original_start_line" : 840,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 958590214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862475085/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-01T13:24:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862475085",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r862477162"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862477162"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: Perhaps the error message could be more specific?\r\n```suggestion\r\n                    throw JSONRPCError(RPC_INTERNAL_ERROR, \"Failed to generate coins stats\");\r\n```",
      "commit_id" : "9d45f7c455318089fb73dc275efbf6e176d971e2",
      "created_at" : "2022-05-01T13:43:24Z",
      "diff_hunk" : "@@ -795,6 +797,199 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs added\\n\"\n+        \"- (total_)coinbase_amount - Amount claimed in coinbase transaction\\n\"\n+        \"- (total_)subsidy - Maximum subsidy\\n\"\n+        \"- (total_)amount_generated - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of unspendable coins and unclaimed rewards\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (request.params[0].isNull()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+            }\n+\n+            fs::path filepath = fs::u8path(request.params[0].get_str());\n+            filepath = fs::absolute(filepath);\n+\n+            if (fs::exists(filepath)) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+            }\n+\n+            std::ofstream file;\n+            file.open(filepath);\n+            if (!file.is_open())\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+            if (!g_coin_stats_index) {\n+                throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+            }\n+\n+            const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+            file << strprintf(\"height,\"\n+                              \"block_hash,\"\n+                              \"timestamp,\"\n+                              \"mediantime,\"\n+                              \"version,\"\n+                              );\n+\n+            if (cumulative) {\n+                file << strprintf(\"total_txs,\"\n+                                  \"total_txouts,\"\n+                                  \"total_coinbase_amount,\"\n+                                  \"total_subsidy,\"\n+                                  \"total_amount_generated,\"\n+                                  \"total_unclaimed_rewards,\"\n+                                  \"total_amount_spent,\"\n+                                  \"total_new_outputs_ex_coinbase_amount,\"\n+                                  \"total_unspendable_scripts,\"\n+                                  \"total_unspendable_amount,\"\n+                                  \"total_genesis_block,\"\n+                                  \"total_bip30,\"\n+                                  \"total_chainwork,\"\n+                                  \"muhash,\"\n+                                  \"total_bogosize\\n\");\n+            } else {\n+                file << strprintf(\"txs,\"\n+                                  \"txouts,\"\n+                                  \"coinbase_amount,\"\n+                                  \"subsidy,\"\n+                                  \"amount_generated,\"\n+                                  \"unclaimed_rewards,\"\n+                                  \"amount_spent,\"\n+                                  \"new_outputs_ex_coinbase_amount,\"\n+                                  \"unspendable_scripts,\"\n+                                  \"unspendable_amount,\"\n+                                  \"genesis_block,\"\n+                                  \"bip30,\"\n+                                  \"chainwork,\"\n+                                  \"muhash,\"\n+                                  \"bogosize\\n\");\n+            }\n+\n+            CCoinsStats stats{CoinStatsHashType::MUHASH};\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            ChainstateManager& chainman = EnsureChainman(node);\n+            CChainState& active_chainstate = chainman.ActiveChainstate();\n+            active_chainstate.ForceFlushStateToDisk();\n+            CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+            CCoinsView* coins_view;\n+            BlockManager* blockman;\n+            {\n+                LOCK(::cs_main);\n+                coins_view = &active_chainstate.CoinsDB();\n+                blockman = &active_chainstate.m_blockman;\n+            }\n+\n+            CCoinsStats prev_stats{CoinStatsHashType::MUHASH};\n+            uint64_t num_tx_sum = 0;\n+\n+            for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+                if (!GetUTXOStats(coins_view, *blockman, stats, node.rpc_interruption_point, pindex))\n+                    throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to read UTXO set\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r862477162",
      "id" : 862477162,
      "line" : 924,
      "node_id" : "PRRC_kwDOABII584zaFtq",
      "original_commit_id" : "9d45f7c455318089fb73dc275efbf6e176d971e2",
      "original_line" : 924,
      "original_position" : 144,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 144,
      "pull_request_review_id" : 958592148,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862477162/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-01T13:45:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862477162",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r862491520"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862491520"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the quick re-review! I adapted your suggestion by adding the height of the failure as well, which should make is more helpful in case of corruption in the index.",
      "commit_id" : "56ffe93aa4840736b2f50cc4a6a9f017b7c984f0",
      "created_at" : "2022-05-01T15:48:29Z",
      "diff_hunk" : "@@ -795,6 +797,199 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs added\\n\"\n+        \"- (total_)coinbase_amount - Amount claimed in coinbase transaction\\n\"\n+        \"- (total_)subsidy - Maximum subsidy\\n\"\n+        \"- (total_)amount_generated - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of unspendable coins and unclaimed rewards\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (request.params[0].isNull()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+            }\n+\n+            fs::path filepath = fs::u8path(request.params[0].get_str());\n+            filepath = fs::absolute(filepath);\n+\n+            if (fs::exists(filepath)) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+            }\n+\n+            std::ofstream file;\n+            file.open(filepath);\n+            if (!file.is_open())\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+            if (!g_coin_stats_index) {\n+                throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+            }\n+\n+            const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+            file << strprintf(\"height,\"\n+                              \"block_hash,\"\n+                              \"timestamp,\"\n+                              \"mediantime,\"\n+                              \"version,\"\n+                              );\n+\n+            if (cumulative) {\n+                file << strprintf(\"total_txs,\"\n+                                  \"total_txouts,\"\n+                                  \"total_coinbase_amount,\"\n+                                  \"total_subsidy,\"\n+                                  \"total_amount_generated,\"\n+                                  \"total_unclaimed_rewards,\"\n+                                  \"total_amount_spent,\"\n+                                  \"total_new_outputs_ex_coinbase_amount,\"\n+                                  \"total_unspendable_scripts,\"\n+                                  \"total_unspendable_amount,\"\n+                                  \"total_genesis_block,\"\n+                                  \"total_bip30,\"\n+                                  \"total_chainwork,\"\n+                                  \"muhash,\"\n+                                  \"total_bogosize\\n\");\n+            } else {\n+                file << strprintf(\"txs,\"\n+                                  \"txouts,\"\n+                                  \"coinbase_amount,\"\n+                                  \"subsidy,\"\n+                                  \"amount_generated,\"\n+                                  \"unclaimed_rewards,\"\n+                                  \"amount_spent,\"\n+                                  \"new_outputs_ex_coinbase_amount,\"\n+                                  \"unspendable_scripts,\"\n+                                  \"unspendable_amount,\"\n+                                  \"genesis_block,\"\n+                                  \"bip30,\"\n+                                  \"chainwork,\"\n+                                  \"muhash,\"\n+                                  \"bogosize\\n\");\n+            }\n+\n+            CCoinsStats stats{CoinStatsHashType::MUHASH};\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            ChainstateManager& chainman = EnsureChainman(node);\n+            CChainState& active_chainstate = chainman.ActiveChainstate();\n+            active_chainstate.ForceFlushStateToDisk();\n+            CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+            CCoinsView* coins_view;\n+            BlockManager* blockman;\n+            {\n+                LOCK(::cs_main);\n+                coins_view = &active_chainstate.CoinsDB();\n+                blockman = &active_chainstate.m_blockman;\n+            }\n+\n+            CCoinsStats prev_stats{CoinStatsHashType::MUHASH};\n+            uint64_t num_tx_sum = 0;\n+\n+            for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+                if (!GetUTXOStats(coins_view, *blockman, stats, node.rpc_interruption_point, pindex))\n+                    throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to read UTXO set\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r862491520",
      "id" : 862491520,
      "in_reply_to_id" : 862477162,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zaJOA",
      "original_commit_id" : "9d45f7c455318089fb73dc275efbf6e176d971e2",
      "original_line" : 924,
      "original_position" : 144,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 958604974,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862491520/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-01T15:48:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862491520",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-05-24T13:41:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1135939049",
      "id" : 1135939049,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII585DtQ3p",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 1,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135939049/reactions"
      },
      "updated_at" : "2022-05-24T13:41:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135939049",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased. The first commit has become obsolete, so it was removed.",
      "created_at" : "2022-05-27T23:55:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1140108671",
      "id" : 1140108671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII585D9K1_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140108671/reactions"
      },
      "updated_at" : "2022-05-27T23:55:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140108671",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-tACK 3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "created_at" : "2022-05-30T09:29:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#issuecomment-1140925004",
      "id" : 1140925004,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19792",
      "node_id" : "IC_kwDOABII585EASJM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140925004/reactions"
      },
      "updated_at" : "2022-05-30T09:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140925004",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r884755325"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884755325"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could mention that this will have a line for each block?",
      "commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "created_at" : "2022-05-30T12:02:57Z",
      "diff_hunk" : "@@ -985,6 +987,202 @@ static RPCHelpMan gettxoutsetinfo()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r884755325",
      "id" : 884755325,
      "line" : 993,
      "node_id" : "PRRC_kwDOABII5840vEt9",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 993,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 23,
      "pull_request_review_id" : 989247910,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884755325/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-30T12:11:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884755325",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r884755800"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884755800"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n            if (!file.is_open()) {\r\n```",
      "commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "created_at" : "2022-05-30T12:03:31Z",
      "diff_hunk" : "@@ -985,6 +987,202 @@ static RPCHelpMan gettxoutsetinfo()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs added\\n\"\n+        \"- (total_)coinbase_amount - Amount claimed in coinbase transaction\\n\"\n+        \"- (total_)subsidy - Maximum subsidy\\n\"\n+        \"- (total_)amount_generated - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of unspendable coins and unclaimed rewards\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (request.params[0].isNull()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+            }\n+\n+            fs::path filepath = fs::u8path(request.params[0].get_str());\n+            filepath = fs::absolute(filepath);\n+\n+            if (fs::exists(filepath)) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+            }\n+\n+            std::ofstream file;\n+            file.open(filepath);\n+            if (!file.is_open())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r884755800",
      "id" : 884755800,
      "line" : 1044,
      "node_id" : "PRRC_kwDOABII5840vE1Y",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 1044,
      "original_position" : 74,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 74,
      "pull_request_review_id" : 989247910,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884755800/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-30T12:11:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884755800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r884756435"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884756435"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Pretty sure flushing and getting the cursor will need to happen in the same cs_main scope, otherwise the flush seems best-effort at best?",
      "commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "created_at" : "2022-05-30T12:04:23Z",
      "diff_hunk" : "@@ -985,6 +987,202 @@ static RPCHelpMan gettxoutsetinfo()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs added\\n\"\n+        \"- (total_)coinbase_amount - Amount claimed in coinbase transaction\\n\"\n+        \"- (total_)subsidy - Maximum subsidy\\n\"\n+        \"- (total_)amount_generated - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of unspendable coins and unclaimed rewards\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (request.params[0].isNull()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+            }\n+\n+            fs::path filepath = fs::u8path(request.params[0].get_str());\n+            filepath = fs::absolute(filepath);\n+\n+            if (fs::exists(filepath)) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+            }\n+\n+            std::ofstream file;\n+            file.open(filepath);\n+            if (!file.is_open())\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+            if (!g_coin_stats_index) {\n+                throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+            }\n+\n+            const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+            file << strprintf(\"height,\"\n+                              \"block_hash,\"\n+                              \"timestamp,\"\n+                              \"mediantime,\"\n+                              \"version,\"\n+                              );\n+\n+            if (cumulative) {\n+                file << strprintf(\"total_txs,\"\n+                                  \"total_txouts,\"\n+                                  \"total_coinbase_amount,\"\n+                                  \"total_subsidy,\"\n+                                  \"total_amount_generated,\"\n+                                  \"total_unclaimed_rewards,\"\n+                                  \"total_amount_spent,\"\n+                                  \"total_new_outputs_ex_coinbase_amount,\"\n+                                  \"total_unspendable_scripts,\"\n+                                  \"total_unspendable_amount,\"\n+                                  \"total_genesis_block,\"\n+                                  \"total_bip30,\"\n+                                  \"total_chainwork,\"\n+                                  \"muhash,\"\n+                                  \"total_bogosize\\n\");\n+            } else {\n+                file << strprintf(\"txs,\"\n+                                  \"txouts,\"\n+                                  \"coinbase_amount,\"\n+                                  \"subsidy,\"\n+                                  \"amount_generated,\"\n+                                  \"unclaimed_rewards,\"\n+                                  \"amount_spent,\"\n+                                  \"new_outputs_ex_coinbase_amount,\"\n+                                  \"unspendable_scripts,\"\n+                                  \"unspendable_amount,\"\n+                                  \"genesis_block,\"\n+                                  \"bip30,\"\n+                                  \"chainwork,\"\n+                                  \"muhash,\"\n+                                  \"bogosize\\n\");\n+            }\n+\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            ChainstateManager& chainman = EnsureChainman(node);\n+            CChainState& active_chainstate = chainman.ActiveChainstate();\n+            active_chainstate.ForceFlushStateToDisk();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r884756435",
      "id" : 884756435,
      "line" : 1097,
      "node_id" : "PRRC_kwDOABII5840vE_T",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 1097,
      "original_position" : 127,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 127,
      "pull_request_review_id" : 989247910,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884756435/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-30T12:11:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884756435",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r884757629"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884757629"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n                if (!maybe_stats) {\r\n```\r\n\r\nAlso, could mention that the file may have been created and may need to be manually cleared now?",
      "commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "created_at" : "2022-05-30T12:05:53Z",
      "diff_hunk" : "@@ -985,6 +987,202 @@ static RPCHelpMan gettxoutsetinfo()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs added\\n\"\n+        \"- (total_)coinbase_amount - Amount claimed in coinbase transaction\\n\"\n+        \"- (total_)subsidy - Maximum subsidy\\n\"\n+        \"- (total_)amount_generated - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of unspendable coins and unclaimed rewards\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (request.params[0].isNull()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+            }\n+\n+            fs::path filepath = fs::u8path(request.params[0].get_str());\n+            filepath = fs::absolute(filepath);\n+\n+            if (fs::exists(filepath)) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+            }\n+\n+            std::ofstream file;\n+            file.open(filepath);\n+            if (!file.is_open())\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+            if (!g_coin_stats_index) {\n+                throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+            }\n+\n+            const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+            file << strprintf(\"height,\"\n+                              \"block_hash,\"\n+                              \"timestamp,\"\n+                              \"mediantime,\"\n+                              \"version,\"\n+                              );\n+\n+            if (cumulative) {\n+                file << strprintf(\"total_txs,\"\n+                                  \"total_txouts,\"\n+                                  \"total_coinbase_amount,\"\n+                                  \"total_subsidy,\"\n+                                  \"total_amount_generated,\"\n+                                  \"total_unclaimed_rewards,\"\n+                                  \"total_amount_spent,\"\n+                                  \"total_new_outputs_ex_coinbase_amount,\"\n+                                  \"total_unspendable_scripts,\"\n+                                  \"total_unspendable_amount,\"\n+                                  \"total_genesis_block,\"\n+                                  \"total_bip30,\"\n+                                  \"total_chainwork,\"\n+                                  \"muhash,\"\n+                                  \"total_bogosize\\n\");\n+            } else {\n+                file << strprintf(\"txs,\"\n+                                  \"txouts,\"\n+                                  \"coinbase_amount,\"\n+                                  \"subsidy,\"\n+                                  \"amount_generated,\"\n+                                  \"unclaimed_rewards,\"\n+                                  \"amount_spent,\"\n+                                  \"new_outputs_ex_coinbase_amount,\"\n+                                  \"unspendable_scripts,\"\n+                                  \"unspendable_amount,\"\n+                                  \"genesis_block,\"\n+                                  \"bip30,\"\n+                                  \"chainwork,\"\n+                                  \"muhash,\"\n+                                  \"bogosize\\n\");\n+            }\n+\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            ChainstateManager& chainman = EnsureChainman(node);\n+            CChainState& active_chainstate = chainman.ActiveChainstate();\n+            active_chainstate.ForceFlushStateToDisk();\n+            CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+            CCoinsView* coins_view;\n+            BlockManager* blockman;\n+            {\n+                LOCK(::cs_main);\n+                coins_view = &active_chainstate.CoinsDB();\n+                blockman = &active_chainstate.m_blockman;\n+            }\n+\n+            CCoinsStats prev_stats{};\n+            uint64_t num_tx_sum = 0;\n+\n+            for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+                const std::optional<CCoinsStats> maybe_stats{GetUTXOStats(coins_view, *blockman, CoinStatsHashType::MUHASH, node.rpc_interruption_point, pindex)};\n+\n+                if (!maybe_stats)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r884757629",
      "id" : 884757629,
      "line" : 1114,
      "node_id" : "PRRC_kwDOABII5840vFR9",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 1114,
      "original_position" : 144,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 144,
      "pull_request_review_id" : 989247910,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884757629/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-30T12:11:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884757629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r884758164"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884758164"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Any reason to create a copy when a reference should be enough?",
      "commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "created_at" : "2022-05-30T12:06:31Z",
      "diff_hunk" : "@@ -985,6 +987,202 @@ static RPCHelpMan gettxoutsetinfo()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs added\\n\"\n+        \"- (total_)coinbase_amount - Amount claimed in coinbase transaction\\n\"\n+        \"- (total_)subsidy - Maximum subsidy\\n\"\n+        \"- (total_)amount_generated - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of unspendable coins and unclaimed rewards\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (request.params[0].isNull()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+            }\n+\n+            fs::path filepath = fs::u8path(request.params[0].get_str());\n+            filepath = fs::absolute(filepath);\n+\n+            if (fs::exists(filepath)) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+            }\n+\n+            std::ofstream file;\n+            file.open(filepath);\n+            if (!file.is_open())\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+            if (!g_coin_stats_index) {\n+                throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+            }\n+\n+            const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+            file << strprintf(\"height,\"\n+                              \"block_hash,\"\n+                              \"timestamp,\"\n+                              \"mediantime,\"\n+                              \"version,\"\n+                              );\n+\n+            if (cumulative) {\n+                file << strprintf(\"total_txs,\"\n+                                  \"total_txouts,\"\n+                                  \"total_coinbase_amount,\"\n+                                  \"total_subsidy,\"\n+                                  \"total_amount_generated,\"\n+                                  \"total_unclaimed_rewards,\"\n+                                  \"total_amount_spent,\"\n+                                  \"total_new_outputs_ex_coinbase_amount,\"\n+                                  \"total_unspendable_scripts,\"\n+                                  \"total_unspendable_amount,\"\n+                                  \"total_genesis_block,\"\n+                                  \"total_bip30,\"\n+                                  \"total_chainwork,\"\n+                                  \"muhash,\"\n+                                  \"total_bogosize\\n\");\n+            } else {\n+                file << strprintf(\"txs,\"\n+                                  \"txouts,\"\n+                                  \"coinbase_amount,\"\n+                                  \"subsidy,\"\n+                                  \"amount_generated,\"\n+                                  \"unclaimed_rewards,\"\n+                                  \"amount_spent,\"\n+                                  \"new_outputs_ex_coinbase_amount,\"\n+                                  \"unspendable_scripts,\"\n+                                  \"unspendable_amount,\"\n+                                  \"genesis_block,\"\n+                                  \"bip30,\"\n+                                  \"chainwork,\"\n+                                  \"muhash,\"\n+                                  \"bogosize\\n\");\n+            }\n+\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            ChainstateManager& chainman = EnsureChainman(node);\n+            CChainState& active_chainstate = chainman.ActiveChainstate();\n+            active_chainstate.ForceFlushStateToDisk();\n+            CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+            CCoinsView* coins_view;\n+            BlockManager* blockman;\n+            {\n+                LOCK(::cs_main);\n+                coins_view = &active_chainstate.CoinsDB();\n+                blockman = &active_chainstate.m_blockman;\n+            }\n+\n+            CCoinsStats prev_stats{};\n+            uint64_t num_tx_sum = 0;\n+\n+            for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+                const std::optional<CCoinsStats> maybe_stats{GetUTXOStats(coins_view, *blockman, CoinStatsHashType::MUHASH, node.rpc_interruption_point, pindex)};\n+\n+                if (!maybe_stats)\n+                    throw JSONRPCError(RPC_INTERNAL_ERROR, strprintf(\"Failed to get coins stats at height %d\", pindex->nHeight));\n+\n+                CCoinsStats stats{maybe_stats.value()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r884758164",
      "id" : 884758164,
      "line" : 1117,
      "node_id" : "PRRC_kwDOABII5840vFaU",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 1117,
      "original_position" : 147,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 147,
      "pull_request_review_id" : 989247910,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884758164/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-30T12:11:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884758164",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r884763742"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884763742"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Probably time to introduce a helper and use that:\r\n\r\n```diff\r\ndiff --git a/test/functional/test_framework/test_node.py b/test/functional/test_framework/test_node.py\r\nindex 7d2db391b6..aa9ff9831f 100755\r\n--- a/test/functional/test_framework/test_node.py\r\n+++ b/test/functional/test_framework/test_node.py\r\n@@ -381,9 +381,13 @@ class TestNode():\r\n     def wait_until_stopped(self, timeout=BITCOIND_PROC_WAIT_TIMEOUT):\r\n         wait_until_helper(self.is_node_stopped, timeout=timeout, timeout_factor=self.timeout_factor)\r\n \r\n+    @property\r\n+    def datadir_path(self) -> Path:\r\n+        return Path(self.datadir)\r\n+\r\n     @property\r\n     def chain_path(self) -> Path:\r\n-        return Path(self.datadir) / self.chain\r\n+        return self.datadir_path / self.chain\r\n \r\n     @property\r\n     def debug_log_path(self) -> Path:\r\n```\r\n\r\n```suggestion\r\n            path = self.nodes[1].datadir_path /  file\r\n```",
      "commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "created_at" : "2022-05-30T12:10:38Z",
      "diff_hunk" : "@@ -295,6 +300,53 @@ def _test_index_rejects_hash_serialized(self):\n         for use_index in {True, False, None}:\n             assert_raises_rpc_error(-8, msg, self.nodes[1].gettxoutsetinfo, hash_type='hash_serialized_2', hash_or_height=111, use_index=use_index)\n \n+    def _test_dumpcoinstats_rpc(self):\n+        self.log.info(\"Test dumpcoinstats RPC\")\n+\n+        msg = \"File name and path for dump file are required\"\n+        assert_raises_rpc_error(-8, msg, self.nodes[1].dumpcoinstats, None)\n+\n+        for cumulative in [True, False]:\n+            if cumulative:\n+                file = \"ctest.csv\"\n+            else:\n+                file = \"test.csv\"\n+\n+            path = os.path.join(get_datadir_path(self.options.tmpdir, 1), file)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r884763742",
      "id" : 884763742,
      "line" : 315,
      "node_id" : "PRRC_kwDOABII5840vGxe",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 315,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/functional/feature_coinstatsindex.py",
      "position" : 42,
      "pull_request_review_id" : 989247910,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884763742/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-30T12:11:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884763742",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895041075"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041075"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I like the helper but using the `/` operator would mean `file` would also need to be a Path object iiuc. So, instead I opted for a slightly different approach that I liked a little better using another helper `datadir_file_path`. What do you think?",
      "commit_id" : "c8b5d0a811339aadb6195cd0dba68c14efc0c9ab",
      "created_at" : "2022-06-11T16:01:37Z",
      "diff_hunk" : "@@ -295,6 +300,53 @@ def _test_index_rejects_hash_serialized(self):\n         for use_index in {True, False, None}:\n             assert_raises_rpc_error(-8, msg, self.nodes[1].gettxoutsetinfo, hash_type='hash_serialized_2', hash_or_height=111, use_index=use_index)\n \n+    def _test_dumpcoinstats_rpc(self):\n+        self.log.info(\"Test dumpcoinstats RPC\")\n+\n+        msg = \"File name and path for dump file are required\"\n+        assert_raises_rpc_error(-8, msg, self.nodes[1].dumpcoinstats, None)\n+\n+        for cumulative in [True, False]:\n+            if cumulative:\n+                file = \"ctest.csv\"\n+            else:\n+                file = \"test.csv\"\n+\n+            path = os.path.join(get_datadir_path(self.options.tmpdir, 1), file)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895041075",
      "id" : 895041075,
      "in_reply_to_id" : 884763742,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841WT4z",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 315,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/functional/feature_coinstatsindex.py",
      "position" : null,
      "pull_request_review_id" : 1003476137,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041075/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-11T16:01:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041075",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895041097"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041097"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "c8b5d0a811339aadb6195cd0dba68c14efc0c9ab",
      "created_at" : "2022-06-11T16:01:47Z",
      "diff_hunk" : "@@ -985,6 +987,202 @@ static RPCHelpMan gettxoutsetinfo()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs added\\n\"\n+        \"- (total_)coinbase_amount - Amount claimed in coinbase transaction\\n\"\n+        \"- (total_)subsidy - Maximum subsidy\\n\"\n+        \"- (total_)amount_generated - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of unspendable coins and unclaimed rewards\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (request.params[0].isNull()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+            }\n+\n+            fs::path filepath = fs::u8path(request.params[0].get_str());\n+            filepath = fs::absolute(filepath);\n+\n+            if (fs::exists(filepath)) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+            }\n+\n+            std::ofstream file;\n+            file.open(filepath);\n+            if (!file.is_open())\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+            if (!g_coin_stats_index) {\n+                throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+            }\n+\n+            const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+            file << strprintf(\"height,\"\n+                              \"block_hash,\"\n+                              \"timestamp,\"\n+                              \"mediantime,\"\n+                              \"version,\"\n+                              );\n+\n+            if (cumulative) {\n+                file << strprintf(\"total_txs,\"\n+                                  \"total_txouts,\"\n+                                  \"total_coinbase_amount,\"\n+                                  \"total_subsidy,\"\n+                                  \"total_amount_generated,\"\n+                                  \"total_unclaimed_rewards,\"\n+                                  \"total_amount_spent,\"\n+                                  \"total_new_outputs_ex_coinbase_amount,\"\n+                                  \"total_unspendable_scripts,\"\n+                                  \"total_unspendable_amount,\"\n+                                  \"total_genesis_block,\"\n+                                  \"total_bip30,\"\n+                                  \"total_chainwork,\"\n+                                  \"muhash,\"\n+                                  \"total_bogosize\\n\");\n+            } else {\n+                file << strprintf(\"txs,\"\n+                                  \"txouts,\"\n+                                  \"coinbase_amount,\"\n+                                  \"subsidy,\"\n+                                  \"amount_generated,\"\n+                                  \"unclaimed_rewards,\"\n+                                  \"amount_spent,\"\n+                                  \"new_outputs_ex_coinbase_amount,\"\n+                                  \"unspendable_scripts,\"\n+                                  \"unspendable_amount,\"\n+                                  \"genesis_block,\"\n+                                  \"bip30,\"\n+                                  \"chainwork,\"\n+                                  \"muhash,\"\n+                                  \"bogosize\\n\");\n+            }\n+\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            ChainstateManager& chainman = EnsureChainman(node);\n+            CChainState& active_chainstate = chainman.ActiveChainstate();\n+            active_chainstate.ForceFlushStateToDisk();\n+            CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+            CCoinsView* coins_view;\n+            BlockManager* blockman;\n+            {\n+                LOCK(::cs_main);\n+                coins_view = &active_chainstate.CoinsDB();\n+                blockman = &active_chainstate.m_blockman;\n+            }\n+\n+            CCoinsStats prev_stats{};\n+            uint64_t num_tx_sum = 0;\n+\n+            for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+                const std::optional<CCoinsStats> maybe_stats{GetUTXOStats(coins_view, *blockman, CoinStatsHashType::MUHASH, node.rpc_interruption_point, pindex)};\n+\n+                if (!maybe_stats)\n+                    throw JSONRPCError(RPC_INTERNAL_ERROR, strprintf(\"Failed to get coins stats at height %d\", pindex->nHeight));\n+\n+                CCoinsStats stats{maybe_stats.value()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895041097",
      "id" : 895041097,
      "in_reply_to_id" : 884758164,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841WT5J",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 1117,
      "original_position" : 147,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 1003476153,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041097/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-11T16:01:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895041106"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041106"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "c8b5d0a811339aadb6195cd0dba68c14efc0c9ab",
      "created_at" : "2022-06-11T16:01:56Z",
      "diff_hunk" : "@@ -985,6 +987,202 @@ static RPCHelpMan gettxoutsetinfo()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs added\\n\"\n+        \"- (total_)coinbase_amount - Amount claimed in coinbase transaction\\n\"\n+        \"- (total_)subsidy - Maximum subsidy\\n\"\n+        \"- (total_)amount_generated - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of unspendable coins and unclaimed rewards\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (request.params[0].isNull()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+            }\n+\n+            fs::path filepath = fs::u8path(request.params[0].get_str());\n+            filepath = fs::absolute(filepath);\n+\n+            if (fs::exists(filepath)) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+            }\n+\n+            std::ofstream file;\n+            file.open(filepath);\n+            if (!file.is_open())\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+            if (!g_coin_stats_index) {\n+                throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+            }\n+\n+            const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+            file << strprintf(\"height,\"\n+                              \"block_hash,\"\n+                              \"timestamp,\"\n+                              \"mediantime,\"\n+                              \"version,\"\n+                              );\n+\n+            if (cumulative) {\n+                file << strprintf(\"total_txs,\"\n+                                  \"total_txouts,\"\n+                                  \"total_coinbase_amount,\"\n+                                  \"total_subsidy,\"\n+                                  \"total_amount_generated,\"\n+                                  \"total_unclaimed_rewards,\"\n+                                  \"total_amount_spent,\"\n+                                  \"total_new_outputs_ex_coinbase_amount,\"\n+                                  \"total_unspendable_scripts,\"\n+                                  \"total_unspendable_amount,\"\n+                                  \"total_genesis_block,\"\n+                                  \"total_bip30,\"\n+                                  \"total_chainwork,\"\n+                                  \"muhash,\"\n+                                  \"total_bogosize\\n\");\n+            } else {\n+                file << strprintf(\"txs,\"\n+                                  \"txouts,\"\n+                                  \"coinbase_amount,\"\n+                                  \"subsidy,\"\n+                                  \"amount_generated,\"\n+                                  \"unclaimed_rewards,\"\n+                                  \"amount_spent,\"\n+                                  \"new_outputs_ex_coinbase_amount,\"\n+                                  \"unspendable_scripts,\"\n+                                  \"unspendable_amount,\"\n+                                  \"genesis_block,\"\n+                                  \"bip30,\"\n+                                  \"chainwork,\"\n+                                  \"muhash,\"\n+                                  \"bogosize\\n\");\n+            }\n+\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            ChainstateManager& chainman = EnsureChainman(node);\n+            CChainState& active_chainstate = chainman.ActiveChainstate();\n+            active_chainstate.ForceFlushStateToDisk();\n+            CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+            CCoinsView* coins_view;\n+            BlockManager* blockman;\n+            {\n+                LOCK(::cs_main);\n+                coins_view = &active_chainstate.CoinsDB();\n+                blockman = &active_chainstate.m_blockman;\n+            }\n+\n+            CCoinsStats prev_stats{};\n+            uint64_t num_tx_sum = 0;\n+\n+            for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+                const std::optional<CCoinsStats> maybe_stats{GetUTXOStats(coins_view, *blockman, CoinStatsHashType::MUHASH, node.rpc_interruption_point, pindex)};\n+\n+                if (!maybe_stats)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895041106",
      "id" : 895041106,
      "in_reply_to_id" : 884757629,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841WT5S",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 1114,
      "original_position" : 144,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 1003476162,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041106/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-11T16:01:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895041149"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041149"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah, I would have described it as best effort so I think it can be omitted here as well. And this made me realize that we don't actually need coins_view and blockman, so I adapted this as well.",
      "commit_id" : "c8b5d0a811339aadb6195cd0dba68c14efc0c9ab",
      "created_at" : "2022-06-11T16:02:11Z",
      "diff_hunk" : "@@ -985,6 +987,202 @@ static RPCHelpMan gettxoutsetinfo()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs added\\n\"\n+        \"- (total_)coinbase_amount - Amount claimed in coinbase transaction\\n\"\n+        \"- (total_)subsidy - Maximum subsidy\\n\"\n+        \"- (total_)amount_generated - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of unspendable coins and unclaimed rewards\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (request.params[0].isNull()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+            }\n+\n+            fs::path filepath = fs::u8path(request.params[0].get_str());\n+            filepath = fs::absolute(filepath);\n+\n+            if (fs::exists(filepath)) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+            }\n+\n+            std::ofstream file;\n+            file.open(filepath);\n+            if (!file.is_open())\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+            if (!g_coin_stats_index) {\n+                throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+            }\n+\n+            const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+            file << strprintf(\"height,\"\n+                              \"block_hash,\"\n+                              \"timestamp,\"\n+                              \"mediantime,\"\n+                              \"version,\"\n+                              );\n+\n+            if (cumulative) {\n+                file << strprintf(\"total_txs,\"\n+                                  \"total_txouts,\"\n+                                  \"total_coinbase_amount,\"\n+                                  \"total_subsidy,\"\n+                                  \"total_amount_generated,\"\n+                                  \"total_unclaimed_rewards,\"\n+                                  \"total_amount_spent,\"\n+                                  \"total_new_outputs_ex_coinbase_amount,\"\n+                                  \"total_unspendable_scripts,\"\n+                                  \"total_unspendable_amount,\"\n+                                  \"total_genesis_block,\"\n+                                  \"total_bip30,\"\n+                                  \"total_chainwork,\"\n+                                  \"muhash,\"\n+                                  \"total_bogosize\\n\");\n+            } else {\n+                file << strprintf(\"txs,\"\n+                                  \"txouts,\"\n+                                  \"coinbase_amount,\"\n+                                  \"subsidy,\"\n+                                  \"amount_generated,\"\n+                                  \"unclaimed_rewards,\"\n+                                  \"amount_spent,\"\n+                                  \"new_outputs_ex_coinbase_amount,\"\n+                                  \"unspendable_scripts,\"\n+                                  \"unspendable_amount,\"\n+                                  \"genesis_block,\"\n+                                  \"bip30,\"\n+                                  \"chainwork,\"\n+                                  \"muhash,\"\n+                                  \"bogosize\\n\");\n+            }\n+\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            ChainstateManager& chainman = EnsureChainman(node);\n+            CChainState& active_chainstate = chainman.ActiveChainstate();\n+            active_chainstate.ForceFlushStateToDisk();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895041149",
      "id" : 895041149,
      "in_reply_to_id" : 884756435,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841WT59",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 1097,
      "original_position" : 127,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 1003476183,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041149/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-11T16:02:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041149",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895041151"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041151"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "c8b5d0a811339aadb6195cd0dba68c14efc0c9ab",
      "created_at" : "2022-06-11T16:02:14Z",
      "diff_hunk" : "@@ -985,6 +987,202 @@ static RPCHelpMan gettxoutsetinfo()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs added\\n\"\n+        \"- (total_)coinbase_amount - Amount claimed in coinbase transaction\\n\"\n+        \"- (total_)subsidy - Maximum subsidy\\n\"\n+        \"- (total_)amount_generated - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of unspendable coins and unclaimed rewards\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (request.params[0].isNull()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+            }\n+\n+            fs::path filepath = fs::u8path(request.params[0].get_str());\n+            filepath = fs::absolute(filepath);\n+\n+            if (fs::exists(filepath)) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+            }\n+\n+            std::ofstream file;\n+            file.open(filepath);\n+            if (!file.is_open())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895041151",
      "id" : 895041151,
      "in_reply_to_id" : 884755800,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841WT5_",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 1044,
      "original_position" : 74,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 1003476187,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041151/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-11T16:02:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895041158"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041158"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "c8b5d0a811339aadb6195cd0dba68c14efc0c9ab",
      "created_at" : "2022-06-11T16:02:18Z",
      "diff_hunk" : "@@ -985,6 +987,202 @@ static RPCHelpMan gettxoutsetinfo()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file. The resulting file contains the following columns:\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895041158",
      "id" : 895041158,
      "in_reply_to_id" : 884755325,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841WT6G",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 993,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 1003476197,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041158/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-11T16:02:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895041158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895042126"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895042126"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> but using the / operator would mean file would also need to be a Path object iiuc\r\n\r\nDoes it? (It doesn't for me locally)",
      "commit_id" : "c8b5d0a811339aadb6195cd0dba68c14efc0c9ab",
      "created_at" : "2022-06-11T16:11:36Z",
      "diff_hunk" : "@@ -295,6 +300,53 @@ def _test_index_rejects_hash_serialized(self):\n         for use_index in {True, False, None}:\n             assert_raises_rpc_error(-8, msg, self.nodes[1].gettxoutsetinfo, hash_type='hash_serialized_2', hash_or_height=111, use_index=use_index)\n \n+    def _test_dumpcoinstats_rpc(self):\n+        self.log.info(\"Test dumpcoinstats RPC\")\n+\n+        msg = \"File name and path for dump file are required\"\n+        assert_raises_rpc_error(-8, msg, self.nodes[1].dumpcoinstats, None)\n+\n+        for cumulative in [True, False]:\n+            if cumulative:\n+                file = \"ctest.csv\"\n+            else:\n+                file = \"test.csv\"\n+\n+            path = os.path.join(get_datadir_path(self.options.tmpdir, 1), file)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895042126",
      "id" : 895042126,
      "in_reply_to_id" : 884763742,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841WUJO",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 315,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/functional/feature_coinstatsindex.py",
      "position" : null,
      "pull_request_review_id" : 1003476951,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895042126/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-11T16:11:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895042126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895043792"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895043792"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Hm, seems like I misinterpreted the error, actually the next line fails. And I am now also seeing it fail with the `Path` object but I am sure it previously passed at least twice with it. Very strange. Maybe a python version or platform issue, need to look deeper into this.\r\n\r\n```\r\n2022-06-11T16:28:24.998000Z TestFramework (INFO): Test dumpcoinstats RPC\r\n2022-06-11T16:28:24.998000Z TestFramework (ERROR): Unexpected exception caught during testing\r\nTraceback (most recent call last):\r\n  File \"/Users/FJ/projects/clones/bitcoin/test/functional/test_framework/test_framework.py\", line 133, in main\r\n    self.run_test()\r\n  File \"/Users/FJ/projects/clones/bitcoin/test/functional/feature_coinstatsindex.py\", line 58, in run_test\r\n    self._test_dumpcoinstats_rpc()\r\n  File \"/Users/FJ/projects/clones/bitcoin/test/functional/feature_coinstatsindex.py\", line 319, in _test_dumpcoinstats_rpc\r\n    self.nodes[1].dumpcoinstats(path, cumulative)\r\n  File \"/Users/FJ/projects/clones/bitcoin/test/functional/test_framework/coverage.py\", line 49, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n  File \"/Users/FJ/projects/clones/bitcoin/test/functional/test_framework/authproxy.py\", line 141, in __call__\r\n    postdata = json.dumps(self.get_request(*args, **argsn), default=EncodeDecimal, ensure_ascii=self.ensure_ascii)\r\n  File \"/Users/FJ/projects/clones/bitcoin/test/functional/test_framework/authproxy.py\", line 131, in get_request\r\n    json.dumps(args or argsn, default=EncodeDecimal, ensure_ascii=self.ensure_ascii),\r\n  File \"/opt/homebrew/Cellar/python@3.9/3.9.12/Frameworks/Python.framework/Versions/3.9/lib/python3.9/json/__init__.py\", line 234, in dumps\r\n    return cls(\r\n  File \"/opt/homebrew/Cellar/python@3.9/3.9.12/Frameworks/Python.framework/Versions/3.9/lib/python3.9/json/encoder.py\", line 199, in encode\r\n    chunks = self.iterencode(o, _one_shot=True)\r\n  File \"/opt/homebrew/Cellar/python@3.9/3.9.12/Frameworks/Python.framework/Versions/3.9/lib/python3.9/json/encoder.py\", line 257, in iterencode\r\n    return _iterencode(o, 0)\r\n  File \"/Users/FJ/projects/clones/bitcoin/test/functional/test_framework/authproxy.py\", line 66, in EncodeDecimal\r\n    raise TypeError(repr(o) + \" is not JSON serializable\")\r\nTypeError: PosixPath('/var/folders/9z/n7rz_6cj3bq__11k5kcrsvvm0000gn/T/bitcoin_func_test_ru27w0qw/node1/ctest.csv') is not JSON serializable\r\n```",
      "commit_id" : "c8b5d0a811339aadb6195cd0dba68c14efc0c9ab",
      "created_at" : "2022-06-11T16:30:07Z",
      "diff_hunk" : "@@ -295,6 +300,53 @@ def _test_index_rejects_hash_serialized(self):\n         for use_index in {True, False, None}:\n             assert_raises_rpc_error(-8, msg, self.nodes[1].gettxoutsetinfo, hash_type='hash_serialized_2', hash_or_height=111, use_index=use_index)\n \n+    def _test_dumpcoinstats_rpc(self):\n+        self.log.info(\"Test dumpcoinstats RPC\")\n+\n+        msg = \"File name and path for dump file are required\"\n+        assert_raises_rpc_error(-8, msg, self.nodes[1].dumpcoinstats, None)\n+\n+        for cumulative in [True, False]:\n+            if cumulative:\n+                file = \"ctest.csv\"\n+            else:\n+                file = \"test.csv\"\n+\n+            path = os.path.join(get_datadir_path(self.options.tmpdir, 1), file)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895043792",
      "id" : 895043792,
      "in_reply_to_id" : 884763742,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841WUjQ",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 315,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/functional/feature_coinstatsindex.py",
      "position" : null,
      "pull_request_review_id" : 1003478336,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895043792/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-11T16:30:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895043792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895046595"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895046595"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You could do `str(path)` before passing it as json?",
      "commit_id" : "c8b5d0a811339aadb6195cd0dba68c14efc0c9ab",
      "created_at" : "2022-06-11T17:01:03Z",
      "diff_hunk" : "@@ -295,6 +300,53 @@ def _test_index_rejects_hash_serialized(self):\n         for use_index in {True, False, None}:\n             assert_raises_rpc_error(-8, msg, self.nodes[1].gettxoutsetinfo, hash_type='hash_serialized_2', hash_or_height=111, use_index=use_index)\n \n+    def _test_dumpcoinstats_rpc(self):\n+        self.log.info(\"Test dumpcoinstats RPC\")\n+\n+        msg = \"File name and path for dump file are required\"\n+        assert_raises_rpc_error(-8, msg, self.nodes[1].dumpcoinstats, None)\n+\n+        for cumulative in [True, False]:\n+            if cumulative:\n+                file = \"ctest.csv\"\n+            else:\n+                file = \"test.csv\"\n+\n+            path = os.path.join(get_datadir_path(self.options.tmpdir, 1), file)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895046595",
      "id" : 895046595,
      "in_reply_to_id" : 884763742,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841WVPD",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 315,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/functional/feature_coinstatsindex.py",
      "position" : null,
      "pull_request_review_id" : 1003480631,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895046595/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-11T17:01:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895046595",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895056492"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895056492"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah, that works too and I just pushed a version with that. But I find it a little less elegant overall.",
      "commit_id" : "42763a243a782186647b23453173c38c4c418017",
      "created_at" : "2022-06-11T18:51:58Z",
      "diff_hunk" : "@@ -295,6 +300,53 @@ def _test_index_rejects_hash_serialized(self):\n         for use_index in {True, False, None}:\n             assert_raises_rpc_error(-8, msg, self.nodes[1].gettxoutsetinfo, hash_type='hash_serialized_2', hash_or_height=111, use_index=use_index)\n \n+    def _test_dumpcoinstats_rpc(self):\n+        self.log.info(\"Test dumpcoinstats RPC\")\n+\n+        msg = \"File name and path for dump file are required\"\n+        assert_raises_rpc_error(-8, msg, self.nodes[1].dumpcoinstats, None)\n+\n+        for cumulative in [True, False]:\n+            if cumulative:\n+                file = \"ctest.csv\"\n+            else:\n+                file = \"test.csv\"\n+\n+            path = os.path.join(get_datadir_path(self.options.tmpdir, 1), file)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895056492",
      "id" : 895056492,
      "in_reply_to_id" : 884763742,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841WXps",
      "original_commit_id" : "3b3e3d966ad44b37bab3659b0d840f8384da05be",
      "original_line" : 315,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/functional/feature_coinstatsindex.py",
      "position" : null,
      "pull_request_review_id" : 1003490177,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895056492/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-11T18:51:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895056492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895168433"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895168433"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        cookie_file = self.nodes[0].chain_path / '.cookie.tmp'\r\n```\r\n\r\nnit?",
      "commit_id" : "42763a243a782186647b23453173c38c4c418017",
      "created_at" : "2022-06-12T12:39:55Z",
      "diff_hunk" : "@@ -112,7 +112,7 @@ def run_test(self):\n         self.nodes[0].assert_start_raises_init_error(expected_msg=init_error, extra_args=['-rpcauth=foo$bar$baz'])\n \n         self.log.info('Check that failure to write cookie file will abort the node gracefully')\n-        cookie_file = os.path.join(get_datadir_path(self.options.tmpdir, 0), self.chain, '.cookie.tmp')\n+        cookie_file = str(self.nodes[0].datadir_path / self.chain / '.cookie.tmp')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895168433",
      "id" : 895168433,
      "line" : 115,
      "node_id" : "PRRC_kwDOABII5841Wy-x",
      "original_commit_id" : "42763a243a782186647b23453173c38c4c418017",
      "original_line" : 115,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/rpc_users.py",
      "position" : 5,
      "pull_request_review_id" : 1003607753,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895168433/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-12T12:39:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895168433",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895200145"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895200145"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit!",
      "commit_id" : "c8e63f8e7df645647cfed2a48e9e1bc58391f930",
      "created_at" : "2022-06-12T15:55:35Z",
      "diff_hunk" : "@@ -112,7 +112,7 @@ def run_test(self):\n         self.nodes[0].assert_start_raises_init_error(expected_msg=init_error, extra_args=['-rpcauth=foo$bar$baz'])\n \n         self.log.info('Check that failure to write cookie file will abort the node gracefully')\n-        cookie_file = os.path.join(get_datadir_path(self.options.tmpdir, 0), self.chain, '.cookie.tmp')\n+        cookie_file = str(self.nodes[0].datadir_path / self.chain / '.cookie.tmp')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r895200145",
      "id" : 895200145,
      "in_reply_to_id" : 895168433,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841W6uR",
      "original_commit_id" : "42763a243a782186647b23453173c38c4c418017",
      "original_line" : 115,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/rpc_users.py",
      "position" : null,
      "pull_request_review_id" : 1003639853,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895200145/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-12T15:55:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/895200145",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r995902904"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/995902904"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is it possible that the index has not synced up to `active_chainstate.m_chain.Tip()` if the tip moved during the dump? I don't see any lock for that. Could be fixed with this?\r\n```suggestion\r\n                if (pindex->nHeight >= g_coin_stats_index->GetSummary().best_block_height) break;\r\n```",
      "commit_id" : "c8e63f8e7df645647cfed2a48e9e1bc58391f930",
      "created_at" : "2022-10-14T15:48:02Z",
      "diff_hunk" : "@@ -985,6 +987,200 @@ static RPCHelpMan gettxoutsetinfo()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+        \"Dumps content of coinstats index to a CSV file with a new line for each block. The resulting file contains the following columns:\\n\"\n+        \"- height\\n\"\n+        \"- block_hash\\n\"\n+        \"- timestamp\\n\"\n+        \"- mediantime\\n\"\n+        \"- version\\n\"\n+        \"- (total_)txs - Number of transactions included\\n\"\n+        \"- (total_)txouts - Number of transaction outputs added\\n\"\n+        \"- (total_)coinbase_amount - Amount claimed in coinbase transaction\\n\"\n+        \"- (total_)subsidy - Maximum subsidy\\n\"\n+        \"- (total_)amount_generated - Amount of coins added to the UTXO set\\n\"\n+        \"- (total_)unclaimed_rewards - Fee rewards that miners did not claim in their coinbase transaction\\n\"\n+        \"- (total_)amount_spent - Amount of inputs spent\\n\"\n+        \"- (total_)new_outputs_ex_coinbase_amount - Amount of new outputs created by this block\\n\"\n+        \"- (total_)unspendable_scripts - Amounts sent to scripts that are unspendable, e.g. OP_RETURN outputs\\n\"\n+        \"- (total_)unspendable_amount - Sum of unspendable coins and unclaimed rewards\\n\"\n+        \"- (total_)genesis_block - The unspendable amount of the Genesis block subsidy\\n\"\n+        \"- (total_)bip30 - Transactions overridden by duplicates (no longer possible with BIP30)\\n\"\n+        \"- (total_)chainwork - Expected number of hashes required to produce the current chain\\n\"\n+        \"- muhash - The serialized hash of the UTXO set at that height\\n\"\n+        \"- (total_)bogo_size - Database-independent approximate metric of UTXO set size. It counts every UTXO entry as 50 + the length of its scriptPubKey\\n\\n\"\n+        \"The total_ prefix is applied if the values in the file are cumulative\",\n+        {\n+            {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+            {\"cumulative\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"The numbers coming out of coinstatsindex will be cumulative\"},\n+        },\n+        RPCResult{\n+            RPCResult::Type::OBJ, \"\", \"\",\n+            {\n+                {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+            HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            if (request.params[0].isNull()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+            }\n+\n+            fs::path filepath = fs::u8path(request.params[0].get_str());\n+            filepath = fs::absolute(filepath);\n+\n+            if (fs::exists(filepath)) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.u8string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+            }\n+\n+            std::ofstream file;\n+            file.open(filepath);\n+            if (!file.is_open()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+            }\n+\n+            if (!g_coin_stats_index) {\n+                throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+            }\n+\n+            const bool cumulative{request.params[1].isNull() ? false : request.params[1].get_bool()};\n+\n+            file << strprintf(\"height,\"\n+                              \"block_hash,\"\n+                              \"timestamp,\"\n+                              \"mediantime,\"\n+                              \"version,\"\n+                              );\n+\n+            if (cumulative) {\n+                file << strprintf(\"total_txs,\"\n+                                  \"total_txouts,\"\n+                                  \"total_coinbase_amount,\"\n+                                  \"total_subsidy,\"\n+                                  \"total_amount_generated,\"\n+                                  \"total_unclaimed_rewards,\"\n+                                  \"total_amount_spent,\"\n+                                  \"total_new_outputs_ex_coinbase_amount,\"\n+                                  \"total_unspendable_scripts,\"\n+                                  \"total_unspendable_amount,\"\n+                                  \"total_genesis_block,\"\n+                                  \"total_bip30,\"\n+                                  \"total_chainwork,\"\n+                                  \"muhash,\"\n+                                  \"total_bogosize\\n\");\n+            } else {\n+                file << strprintf(\"txs,\"\n+                                  \"txouts,\"\n+                                  \"coinbase_amount,\"\n+                                  \"subsidy,\"\n+                                  \"amount_generated,\"\n+                                  \"unclaimed_rewards,\"\n+                                  \"amount_spent,\"\n+                                  \"new_outputs_ex_coinbase_amount,\"\n+                                  \"unspendable_scripts,\"\n+                                  \"unspendable_amount,\"\n+                                  \"genesis_block,\"\n+                                  \"bip30,\"\n+                                  \"chainwork,\"\n+                                  \"muhash,\"\n+                                  \"bogosize\\n\");\n+            }\n+\n+            NodeContext& node = EnsureAnyNodeContext(request.context);\n+            ChainstateManager& chainman = EnsureChainman(node);\n+            CChainState& active_chainstate = chainman.ActiveChainstate();\n+            CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+            // Both coins_view and blockman are not actually needed in GetUTXOStats\n+            // since the stats will have to come out of coinstatsindex.\n+            CCoinsView* coins_view{nullptr};\n+            BlockManager blockman{};\n+\n+            CCoinsStats prev_stats{};\n+            uint64_t num_tx_sum = 0;\n+\n+            for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+                const std::optional<CCoinsStats> maybe_stats{GetUTXOStats(coins_view, blockman, CoinStatsHashType::MUHASH, node.rpc_interruption_point, pindex, true)};\n+\n+                if (!maybe_stats) {\n+                    throw JSONRPCError(RPC_INTERNAL_ERROR, strprintf(\"Failed to get coins stats at height %d. You may have to remove an incomplete dump file before running this command again.\", pindex->nHeight));\n+                }\n+\n+                const CCoinsStats& stats{maybe_stats.value()};\n+\n+                file << strprintf(\"%d,\", static_cast<int64_t>(stats.nHeight));\n+                file << strprintf(\"%s,\", stats.hashBlock.GetHex());\n+                file << strprintf(\"%d,\", pindex->nTime);\n+                file << strprintf(\"%d,\", pindex->GetMedianTimePast());\n+                file << strprintf(\"%s,\", pindex->nVersion);\n+\n+                num_tx_sum += pindex->nTx;\n+                const int num_tx = cumulative ? num_tx_sum : pindex->nTx;\n+                file << strprintf(\"%d,\", num_tx);\n+\n+                const uint64_t tx_outs = cumulative ? stats.nTransactionOutputs : stats.nTransactionOutputs - prev_stats.nTransactionOutputs;\n+                file << strprintf(\"%d,\", static_cast<int64_t>(tx_outs));\n+\n+                const CAmount coinbase_amount = cumulative ? stats.total_coinbase_amount : stats.total_coinbase_amount - prev_stats.total_coinbase_amount;\n+                file << strprintf(\"%s,\", FormatMoney(coinbase_amount));\n+\n+                const CAmount subsidy = cumulative ? stats.total_subsidy : stats.total_subsidy - prev_stats.total_subsidy;\n+                file << strprintf(\"%s,\", FormatMoney(subsidy));\n+\n+                CHECK_NONFATAL(stats.total_amount.has_value());\n+                const CAmount amount = cumulative ? stats.total_amount.value() : stats.total_amount.value() - prev_stats.total_amount.value();\n+                file << strprintf(\"%s,\", FormatMoney(amount));\n+\n+                const CAmount unspendables_unclaimed_rewards = cumulative ? stats.total_unspendables_unclaimed_rewards : stats.total_unspendables_unclaimed_rewards - prev_stats.total_unspendables_unclaimed_rewards;\n+                file << strprintf(\"%s,\", FormatMoney(unspendables_unclaimed_rewards));\n+\n+                const CAmount prevout_spent_amount = cumulative ? stats.total_prevout_spent_amount : stats.total_prevout_spent_amount - prev_stats.total_prevout_spent_amount;\n+                file << strprintf(\"%s,\", FormatMoney(prevout_spent_amount));\n+\n+                const CAmount new_outputs_ex_coinbase_amount = cumulative ? stats.total_new_outputs_ex_coinbase_amount : stats.total_new_outputs_ex_coinbase_amount - prev_stats.total_new_outputs_ex_coinbase_amount;\n+                file << strprintf(\"%s,\", FormatMoney(new_outputs_ex_coinbase_amount));\n+\n+                const CAmount unspendables_scripts = cumulative ? stats.total_unspendables_scripts : stats.total_unspendables_scripts - prev_stats.total_unspendables_scripts;\n+                file << strprintf(\"%s,\", FormatMoney(unspendables_scripts));\n+\n+                const CAmount unspendable_amount = cumulative ? stats.total_unspendable_amount : stats.total_unspendable_amount - prev_stats.total_unspendable_amount;\n+                file << strprintf(\"%s,\", FormatMoney(unspendable_amount));\n+\n+                const CAmount unspendables_genesis_block = cumulative ? stats.total_unspendables_genesis_block : stats.total_unspendables_genesis_block - prev_stats.total_unspendables_genesis_block;\n+                file << strprintf(\"%s,\", FormatMoney(unspendables_genesis_block));\n+\n+                const CAmount unspendables_bip30 = cumulative ? stats.total_unspendables_bip30 : stats.total_unspendables_bip30 - prev_stats.total_unspendables_bip30;\n+                file << strprintf(\"%s,\", FormatMoney(unspendables_bip30));\n+\n+                const arith_uint256 chain_work = cumulative ? pindex->nChainWork : pindex->nChainWork - (pindex->pprev ? pindex->pprev->nChainWork : 0);\n+                file << strprintf(\"%s,\", chain_work.GetHex());\n+\n+                file << strprintf(\"%d,\", stats.hashSerialized.GetHex());\n+\n+                const uint64_t bogo_size = cumulative ? stats.nBogoSize : stats.nBogoSize - prev_stats.nBogoSize;\n+                file << strprintf(\"%d\\n\", static_cast<int64_t>(bogo_size));\n+\n+                prev_stats = stats;\n+\n+                if (pindex->nHeight >= active_chainstate.m_chain.Tip()->nHeight) break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19792#discussion_r995902904",
      "id" : 995902904,
      "line" : 1171,
      "node_id" : "PRRC_kwDOABII5847XEW4",
      "original_commit_id" : "c8e63f8e7df645647cfed2a48e9e1bc58391f930",
      "original_line" : 1171,
      "original_position" : 201,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 201,
      "pull_request_review_id" : 1142645082,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19792",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/995902904/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-14T15:48:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/995902904",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   }
]
