[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21158 (lib: Add Taproot support to libconsensus by jrawsthorne)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-04-04T17:05:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-813066028",
      "id" : 813066028,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMzA2NjAyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-15T20:20:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/813066028",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK: nice! :)",
      "created_at" : "2021-04-04T21:29:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-813102291",
      "id" : 813102291,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMzEwMjI5MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-04T21:29:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/813102291",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "P",
      "created_at" : "2021-04-04T22:32:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-813109274",
      "id" : 813109274,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMzEwOTI3NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-04T22:32:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/813109274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/79517432?v=4",
         "events_url" : "https://api.github.com/users/szeli57/events{/privacy}",
         "followers_url" : "https://api.github.com/users/szeli57/followers",
         "following_url" : "https://api.github.com/users/szeli57/following{/other_user}",
         "gists_url" : "https://api.github.com/users/szeli57/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/szeli57",
         "id" : 79517432,
         "login" : "szeli57",
         "node_id" : "MDQ6VXNlcjc5NTE3NDMy",
         "organizations_url" : "https://api.github.com/users/szeli57/orgs",
         "received_events_url" : "https://api.github.com/users/szeli57/received_events",
         "repos_url" : "https://api.github.com/users/szeli57/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/szeli57/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/szeli57/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/szeli57"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks!\r\n\r\n> Question: Why make this a CLI command and not an RPC command? Seems useful as an RPC command.\r\n\r\nIt could, or a third path could be to add a boolean `totals` arg to the `getnodeaddresses` RPC to toggle a \"totals mode\" (that said, it might be a bit obscure/hard to discover).\r\n\r\nGenerally, CLI commands batch or wrap one or multiple RPC commands and are easier to change and improve without worrying about API stability. For example, this might evolve to returning other address info or statistics. In this case where only one RPC is wrapped, instead of batching multiple RPCs like `-getinfo`, `-netinfo` and `-generate` do, I don't have a strong opinion on the RPC vs CLI question.",
      "created_at" : "2021-04-05T11:10:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-813342416",
      "id" : 813342416,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMzM0MjQxNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-05T11:10:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/813342416",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure, but it's maybe more flexible to start life as a CLI and then become an RPC if there's a good reason, than vice-versa.",
      "created_at" : "2021-04-05T11:13:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-813343583",
      "id" : 813343583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMzM0MzU4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-05T11:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/813343583",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\n> Question: Why make this a CLI command and not an RPC command? Seems useful as an RPC command.\r\n\r\nMinimalism. I think it's a good choice to put functionality in the client that can be done client-side. Adding things server-side adds maintenance burden, means having to commit to a certain (machine parseable) interface, etc. And this is clearly functionality aimed at end users. Also agree with\r\n\r\n> Not sure, but it's maybe more flexible to start life as a CLI and then become an RPC if there's a good reason, than vice-versa.\r\n\r\nRight, it doesn't rule out making it a server-side RPC either. This is just the path of least resistance.",
      "created_at" : "2021-04-05T12:25:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-813367693",
      "id" : 813367693,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMzM2NzY5Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-05T12:26:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/813367693",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "An argument I could see for an RPC would be potentially better performance by avoiding a copy of a large object and by parsing Network enums rather than strings. Doesn't seem critical for occasional use though.",
      "created_at" : "2021-04-05T12:46:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-813374999",
      "id" : 813374999,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMzM3NDk5OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-05T12:46:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/813374999",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@laanwj @jonatack Thanks for answering my question. Maybe this information, when a command should be a CLI or RPC command, should be added to the [developer-notes](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#rpc-interface-guidelines). ",
      "created_at" : "2021-04-05T17:37:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-813526176",
      "id" : 813526176,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMzUyNjE3Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-05T17:38:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/813526176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23396902?v=4",
         "events_url" : "https://api.github.com/users/jarolrod/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jarolrod/followers",
         "following_url" : "https://api.github.com/users/jarolrod/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jarolrod/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jarolrod",
         "id" : 23396902,
         "login" : "jarolrod",
         "node_id" : "MDQ6VXNlcjIzMzk2OTAy",
         "organizations_url" : "https://api.github.com/users/jarolrod/orgs",
         "received_events_url" : "https://api.github.com/users/jarolrod/received_events",
         "repos_url" : "https://api.github.com/users/jarolrod/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jarolrod/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jarolrod/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jarolrod"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r608439638"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608439638"
         }
      },
      "author_association" : "MEMBER",
      "body" : "57eb71ce0f27c0353ea0742a696c6d04ce048e15\r\n\r\nIMO avoid spaces in keys.",
      "commit_id" : "06c43201a714b0426cc68b2fd5c681e5df10af99",
      "created_at" : "2021-04-07T08:17:26Z",
      "diff_hunk" : "@@ -569,6 +569,56 @@ class NetinfoRequestHandler : public BaseRequestHandler\n         \"> bitcoin-cli -netinfo help\\n\"};\n };\n \n+/** Process addressinfo requests */\n+class AddressinfoRequestHandler : public BaseRequestHandler\n+{\n+private:\n+    static constexpr uint8_t m_networks_size{5};\n+    const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"}};\n+    std::array<uint64_t, m_networks_size> m_counts{{}}; // Address counts by network\n+    uint64_t m_total{0}; // Total address count\n+    int8_t NetworkStringToId(const std::string& str) const\n+    {\n+        for (uint8_t i = 0; i < m_networks_size; ++i) {\n+            if (str == m_networks.at(i)) return i;\n+        }\n+        return UNKNOWN_NETWORK;\n+    }\n+\n+public:\n+    UniValue PrepareRequest(const std::string& method, const std::vector<std::string>& args) override\n+    {\n+        if (!args.empty()) {\n+            throw std::runtime_error(\"-addressinfo takes no arguments\");\n+        }\n+        UniValue params{RPCConvertValues(\"getnodeaddresses\", std::vector<std::string>{{\"0\"}})};\n+        return JSONRPCRequestObj(\"getnodeaddresses\", params, 1);\n+    }\n+\n+    UniValue ProcessReply(const UniValue& reply) override\n+    {\n+        // Count the number of peers we know, by network.\n+        for (const UniValue& node : reply[\"result\"].getValues()) {\n+            std::string network_name{node[\"network\"].get_str()};\n+            if (network_name == \"onion\") {\n+                network_name = node[\"address\"].get_str().size() > 22 ? \"torv3\" : \"torv2\";\n+            }\n+            const int8_t network_id{NetworkStringToId(network_name)};\n+            if (network_id == UNKNOWN_NETWORK) continue;\n+            ++m_counts.at(network_id);\n+        }\n+        // Prepare result to return to user.\n+        UniValue result{UniValue::VOBJ}, addresses{UniValue::VOBJ};\n+        for (uint8_t i = 0; i < m_networks_size; ++i) {\n+            addresses.pushKV(m_networks.at(i), m_counts.at(i));\n+            m_total += m_counts.at(i);\n+        }\n+        addresses.pushKV(\"total\", m_total);\n+        result.pushKV(\"addresses known\", addresses);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r608439638",
      "id" : 608439638,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODQzOTYzOA==",
      "original_commit_id" : "57eb71ce0f27c0353ea0742a696c6d04ce048e15",
      "original_line" : 617,
      "original_position" : 65,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 629719990,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T08:38:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608439638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r608442632"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608442632"
         }
      },
      "author_association" : "MEMBER",
      "body" : "57eb71ce0f27c0353ea0742a696c6d04ce048e15\r\n\r\nNo need to have `m_networks` and `m_total` as members.",
      "commit_id" : "06c43201a714b0426cc68b2fd5c681e5df10af99",
      "created_at" : "2021-04-07T08:21:28Z",
      "diff_hunk" : "@@ -569,6 +569,56 @@ class NetinfoRequestHandler : public BaseRequestHandler\n         \"> bitcoin-cli -netinfo help\\n\"};\n };\n \n+/** Process addressinfo requests */\n+class AddressinfoRequestHandler : public BaseRequestHandler\n+{\n+private:\n+    static constexpr uint8_t m_networks_size{5};\n+    const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"}};\n+    std::array<uint64_t, m_networks_size> m_counts{{}}; // Address counts by network\n+    uint64_t m_total{0}; // Total address count",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r608442632",
      "id" : 608442632,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODQ0MjYzMg==",
      "original_commit_id" : "57eb71ce0f27c0353ea0742a696c6d04ce048e15",
      "original_line" : 579,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 629719990,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T08:38:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608442632",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r608443683"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608443683"
         }
      },
      "author_association" : "MEMBER",
      "body" : "57eb71ce0f27c0353ea0742a696c6d04ce048e15\r\n\r\nDrop, and use `m_networks` size?",
      "commit_id" : "06c43201a714b0426cc68b2fd5c681e5df10af99",
      "created_at" : "2021-04-07T08:22:53Z",
      "diff_hunk" : "@@ -569,6 +569,56 @@ class NetinfoRequestHandler : public BaseRequestHandler\n         \"> bitcoin-cli -netinfo help\\n\"};\n };\n \n+/** Process addressinfo requests */\n+class AddressinfoRequestHandler : public BaseRequestHandler\n+{\n+private:\n+    static constexpr uint8_t m_networks_size{5};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r608443683",
      "id" : 608443683,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODQ0MzY4Mw==",
      "original_commit_id" : "57eb71ce0f27c0353ea0742a696c6d04ce048e15",
      "original_line" : 576,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 629719990,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T08:38:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608443683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r608444785"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608444785"
         }
      },
      "author_association" : "MEMBER",
      "body" : "57eb71ce0f27c0353ea0742a696c6d04ce048e15\r\n\r\nI think you can omit template arguments, see https://stackoverflow.com/a/61371266/1978589.",
      "commit_id" : "06c43201a714b0426cc68b2fd5c681e5df10af99",
      "created_at" : "2021-04-07T08:24:31Z",
      "diff_hunk" : "@@ -569,6 +569,56 @@ class NetinfoRequestHandler : public BaseRequestHandler\n         \"> bitcoin-cli -netinfo help\\n\"};\n };\n \n+/** Process addressinfo requests */\n+class AddressinfoRequestHandler : public BaseRequestHandler\n+{\n+private:\n+    static constexpr uint8_t m_networks_size{5};\n+    const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r608444785",
      "id" : 608444785,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODQ0NDc4NQ==",
      "original_commit_id" : "57eb71ce0f27c0353ea0742a696c6d04ce048e15",
      "original_line" : 577,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 629719990,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T08:38:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608444785",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r608535653"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608535653"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, will give it a try in the next push.",
      "commit_id" : "06c43201a714b0426cc68b2fd5c681e5df10af99",
      "created_at" : "2021-04-07T10:34:08Z",
      "diff_hunk" : "@@ -569,6 +569,56 @@ class NetinfoRequestHandler : public BaseRequestHandler\n         \"> bitcoin-cli -netinfo help\\n\"};\n };\n \n+/** Process addressinfo requests */\n+class AddressinfoRequestHandler : public BaseRequestHandler\n+{\n+private:\n+    static constexpr uint8_t m_networks_size{5};\n+    const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r608535653",
      "id" : 608535653,
      "in_reply_to_id" : 608444785,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODUzNTY1Mw==",
      "original_commit_id" : "57eb71ce0f27c0353ea0742a696c6d04ce048e15",
      "original_line" : 577,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 629849276,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T08:38:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608535653",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r608537421"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608537421"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point, will snakecase it if this remains in JSON format. I wonder if it should drop the JSON format (like `-netinfo`) for the client side. ",
      "commit_id" : "06c43201a714b0426cc68b2fd5c681e5df10af99",
      "created_at" : "2021-04-07T10:36:55Z",
      "diff_hunk" : "@@ -569,6 +569,56 @@ class NetinfoRequestHandler : public BaseRequestHandler\n         \"> bitcoin-cli -netinfo help\\n\"};\n };\n \n+/** Process addressinfo requests */\n+class AddressinfoRequestHandler : public BaseRequestHandler\n+{\n+private:\n+    static constexpr uint8_t m_networks_size{5};\n+    const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"}};\n+    std::array<uint64_t, m_networks_size> m_counts{{}}; // Address counts by network\n+    uint64_t m_total{0}; // Total address count\n+    int8_t NetworkStringToId(const std::string& str) const\n+    {\n+        for (uint8_t i = 0; i < m_networks_size; ++i) {\n+            if (str == m_networks.at(i)) return i;\n+        }\n+        return UNKNOWN_NETWORK;\n+    }\n+\n+public:\n+    UniValue PrepareRequest(const std::string& method, const std::vector<std::string>& args) override\n+    {\n+        if (!args.empty()) {\n+            throw std::runtime_error(\"-addressinfo takes no arguments\");\n+        }\n+        UniValue params{RPCConvertValues(\"getnodeaddresses\", std::vector<std::string>{{\"0\"}})};\n+        return JSONRPCRequestObj(\"getnodeaddresses\", params, 1);\n+    }\n+\n+    UniValue ProcessReply(const UniValue& reply) override\n+    {\n+        // Count the number of peers we know, by network.\n+        for (const UniValue& node : reply[\"result\"].getValues()) {\n+            std::string network_name{node[\"network\"].get_str()};\n+            if (network_name == \"onion\") {\n+                network_name = node[\"address\"].get_str().size() > 22 ? \"torv3\" : \"torv2\";\n+            }\n+            const int8_t network_id{NetworkStringToId(network_name)};\n+            if (network_id == UNKNOWN_NETWORK) continue;\n+            ++m_counts.at(network_id);\n+        }\n+        // Prepare result to return to user.\n+        UniValue result{UniValue::VOBJ}, addresses{UniValue::VOBJ};\n+        for (uint8_t i = 0; i < m_networks_size; ++i) {\n+            addresses.pushKV(m_networks.at(i), m_counts.at(i));\n+            m_total += m_counts.at(i);\n+        }\n+        addresses.pushKV(\"total\", m_total);\n+        result.pushKV(\"addresses known\", addresses);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r608537421",
      "id" : 608537421,
      "in_reply_to_id" : 608439638,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODUzNzQyMQ==",
      "original_commit_id" : "57eb71ce0f27c0353ea0742a696c6d04ce048e15",
      "original_line" : 617,
      "original_position" : 65,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 629851546,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T08:38:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608537421",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I would be in favor of implementing this on the server so we get it right for all clients, GUI included.\r\n \r\nThe GUI is a good point, and performance could also be better (not sure if it would be noticeable) as an RPC.\r\n\r\n> I'm also not fond of the name `-addressinfo` as it looks like something specific to an address only, I would name it `-nodestats` or something like that.\r\n\r\nI proposed `-addressinfo` in line with CLI commands `-getinfo` and `-netinfo`...`nodestats` isn't bad though and is shorter. Hm...",
      "created_at" : "2021-04-07T10:41:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-814808014",
      "id" : 814808014,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxNDgwODAxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-07T10:41:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/814808014",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Note to self: as a CLI this needs a server version check like the one in `-netinfo` to gracefully raise if the server is earlier than v22, due to this depending on the network field in `getnodeaddresses`.",
      "created_at" : "2021-04-07T10:43:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-814808970",
      "id" : 814808970,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxNDgwODk3MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-07T10:44:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/814808970",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r609874577"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609874577"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "06c43201a714b0426cc68b2fd5c681e5df10af99",
      "created_at" : "2021-04-08T16:21:05Z",
      "diff_hunk" : "@@ -569,6 +569,56 @@ class NetinfoRequestHandler : public BaseRequestHandler\n         \"> bitcoin-cli -netinfo help\\n\"};\n };\n \n+/** Process addressinfo requests */\n+class AddressinfoRequestHandler : public BaseRequestHandler\n+{\n+private:\n+    static constexpr uint8_t m_networks_size{5};\n+    const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"}};\n+    std::array<uint64_t, m_networks_size> m_counts{{}}; // Address counts by network\n+    uint64_t m_total{0}; // Total address count\n+    int8_t NetworkStringToId(const std::string& str) const\n+    {\n+        for (uint8_t i = 0; i < m_networks_size; ++i) {\n+            if (str == m_networks.at(i)) return i;\n+        }\n+        return UNKNOWN_NETWORK;\n+    }\n+\n+public:\n+    UniValue PrepareRequest(const std::string& method, const std::vector<std::string>& args) override\n+    {\n+        if (!args.empty()) {\n+            throw std::runtime_error(\"-addressinfo takes no arguments\");\n+        }\n+        UniValue params{RPCConvertValues(\"getnodeaddresses\", std::vector<std::string>{{\"0\"}})};\n+        return JSONRPCRequestObj(\"getnodeaddresses\", params, 1);\n+    }\n+\n+    UniValue ProcessReply(const UniValue& reply) override\n+    {\n+        // Count the number of peers we know, by network.\n+        for (const UniValue& node : reply[\"result\"].getValues()) {\n+            std::string network_name{node[\"network\"].get_str()};\n+            if (network_name == \"onion\") {\n+                network_name = node[\"address\"].get_str().size() > 22 ? \"torv3\" : \"torv2\";\n+            }\n+            const int8_t network_id{NetworkStringToId(network_name)};\n+            if (network_id == UNKNOWN_NETWORK) continue;\n+            ++m_counts.at(network_id);\n+        }\n+        // Prepare result to return to user.\n+        UniValue result{UniValue::VOBJ}, addresses{UniValue::VOBJ};\n+        for (uint8_t i = 0; i < m_networks_size; ++i) {\n+            addresses.pushKV(m_networks.at(i), m_counts.at(i));\n+            m_total += m_counts.at(i);\n+        }\n+        addresses.pushKV(\"total\", m_total);\n+        result.pushKV(\"addresses known\", addresses);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r609874577",
      "id" : 609874577,
      "in_reply_to_id" : 608439638,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwOTg3NDU3Nw==",
      "original_commit_id" : "57eb71ce0f27c0353ea0742a696c6d04ce048e15",
      "original_line" : 617,
      "original_position" : 65,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 631597029,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T08:38:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609874577",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r609876337"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609876337"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Changed `m_counts` and `m_total` to be local variables instead (`counts` and `total`). ",
      "commit_id" : "06c43201a714b0426cc68b2fd5c681e5df10af99",
      "created_at" : "2021-04-08T16:23:04Z",
      "diff_hunk" : "@@ -569,6 +569,56 @@ class NetinfoRequestHandler : public BaseRequestHandler\n         \"> bitcoin-cli -netinfo help\\n\"};\n };\n \n+/** Process addressinfo requests */\n+class AddressinfoRequestHandler : public BaseRequestHandler\n+{\n+private:\n+    static constexpr uint8_t m_networks_size{5};\n+    const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"}};\n+    std::array<uint64_t, m_networks_size> m_counts{{}}; // Address counts by network\n+    uint64_t m_total{0}; // Total address count",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r609876337",
      "id" : 609876337,
      "in_reply_to_id" : 608442632,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwOTg3NjMzNw==",
      "original_commit_id" : "57eb71ce0f27c0353ea0742a696c6d04ce048e15",
      "original_line" : 579,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 631598991,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T08:38:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609876337",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r609876937"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609876937"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Couldn't get that to compile (clang 11).",
      "commit_id" : "06c43201a714b0426cc68b2fd5c681e5df10af99",
      "created_at" : "2021-04-08T16:23:39Z",
      "diff_hunk" : "@@ -569,6 +569,56 @@ class NetinfoRequestHandler : public BaseRequestHandler\n         \"> bitcoin-cli -netinfo help\\n\"};\n };\n \n+/** Process addressinfo requests */\n+class AddressinfoRequestHandler : public BaseRequestHandler\n+{\n+private:\n+    static constexpr uint8_t m_networks_size{5};\n+    const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r609876937",
      "id" : 609876937,
      "in_reply_to_id" : 608444785,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwOTg3NjkzNw==",
      "original_commit_id" : "57eb71ce0f27c0353ea0742a696c6d04ce048e15",
      "original_line" : 577,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 631599607,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T08:38:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609876937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "- Rebased following the merge of #21594\r\n- Took review feedback where applicable\r\n- Re \"-nodestats\", I couldn't get command names beginning with \"-node\" to work (e.g. `-nodestats`, `-nodeinfo`); it compiles, but when run: \"Error parsing command line arguments: Invalid parameter -nodestats\"...not sure why. OTOH, `-peerstats` does work.\r\n- Shortened the command from `-addressinfo` to `-addrinfo`, as shorter is better for humans typing manually\r\n- Added the server version check which raises with a helpful message\r\n- Improved the release note\r\n",
      "created_at" : "2021-04-08T16:34:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-815970020",
      "id" : 815970020,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxNTk3MDAyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-09T07:51:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/815970020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r609892324"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609892324"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I would if could omit the template arguments.",
      "commit_id" : "06c43201a714b0426cc68b2fd5c681e5df10af99",
      "created_at" : "2021-04-08T16:40:24Z",
      "diff_hunk" : "@@ -569,6 +569,56 @@ class NetinfoRequestHandler : public BaseRequestHandler\n         \"> bitcoin-cli -netinfo help\\n\"};\n };\n \n+/** Process addressinfo requests */\n+class AddressinfoRequestHandler : public BaseRequestHandler\n+{\n+private:\n+    static constexpr uint8_t m_networks_size{5};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r609892324",
      "id" : 609892324,
      "in_reply_to_id" : 608443683,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwOTg5MjMyNA==",
      "original_commit_id" : "57eb71ce0f27c0353ea0742a696c6d04ce048e15",
      "original_line" : 576,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 631615870,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T08:38:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609892324",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Good find! I agree this isn't great, will look at fixing.",
      "created_at" : "2021-04-12T19:47:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-818092764",
      "id" : 818092764,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxODA5Mjc2NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-12T19:47:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/818092764",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks again for finding that @jarolrod. Fixed in the last commit per `git diff c0986af edf3167`. Much better.\r\n\r\n```diff\r\n@@ -256,6 +256,7 @@ public:\r\n \r\n     UniValue ProcessReply(const UniValue& reply) override\r\n     {\r\n+        if (!reply[\"error\"].isNull()) return reply;\r\n         const std::vector<UniValue>& nodes{reply[\"result\"].getValues()};\r\n```\r\n```\r\n$ bitcoin-cli -addrinfo\r\nerror code: -28\r\nerror message:\r\nLoading block index...\r\n````\r\n\r\nNote that the server version message can be tested by building and running with a change like\r\n```diff\r\n--- a/src/bitcoin-cli.cpp\r\n+++ b/src/bitcoin-cli.cpp\r\n@@ -264,7 +264,7 @@ public:\r\n         // Count the number of peers we know by network, including torv2 versus torv3.\r\n         std::array<uint64_t, m_networks_size> counts{{}};\r\n         for (const UniValue& node : nodes) {\r\n-        if (!nodes.empty() && nodes.at(0)[\"network\"].isNull()) {\r\n+        if (!nodes.empty() && nodes.at(0)[\"networ\"].isNull()) {\r\n             throw std::runtime_error(\"-addrinfo requires bitcoind server to be running v22.0 and up\");\r\n         }\r\n```\r\n",
      "created_at" : "2021-04-12T20:17:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-818156765",
      "id" : 818156765,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxODE1Njc2NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-12T20:32:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/818156765",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I would be in favor of implementing this on the server so we get it right for all clients, GUI included.\r\n\r\nI'm not 100% convinced this is worth adding server side. Also not against it, but I don't think we should add a lot of \"would be nice\" RPC commands. Yes, doing it client side is slower but how often are you going to call this ?\r\n\r\nAs for the GUI I wonder if we can share some things between bitcoin-cli and GUI debug console.",
      "created_at" : "2021-04-12T20:18:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-818158465",
      "id" : 818158465,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxODE1ODQ2NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-12T20:20:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/818158465",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Right, and the fields returned here will probably change...more BIP155 networks may be on the way...and we may want to replace \"torv2\" and \"torv3\" with \"onion\" a year from now, IDK...adding fields is easier than removing or reorganizing them, but we'll have more flexibility to do needed updates as a CLI.",
      "created_at" : "2021-04-12T20:46:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-818216239",
      "id" : 818216239,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxODIxNjIzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-12T21:09:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/818216239",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm at **2842** torv3 peers known now, up from ~1800 ten days ago and still finding more...good to see.\r\n```\r\n{\r\n  \"addresses_known\": {\r\n    \"ipv4\": 14398,\r\n    \"ipv6\": 2509,\r\n    \"torv2\": 5561,\r\n    \"torv3\": 2842,\r\n    \"i2p\": 8,\r\n    \"total\": 25318\r\n  }\r\n}\r\n```\r\n",
      "created_at" : "2021-04-13T14:33:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-818784935",
      "id" : 818784935,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxODc4NDkzNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-13T14:33:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/818784935",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "And one more i2p peer as well!",
      "created_at" : "2021-04-13T14:35:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-818786751",
      "id" : 818786751,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxODc4Njc1MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-13T14:35:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/818786751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r616251674"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616251674"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Does the following work?\r\n```cpp\r\nstatic constexpr std::array m_networks{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"};\r\n```",
      "commit_id" : "06c43201a714b0426cc68b2fd5c681e5df10af99",
      "created_at" : "2021-04-19T23:57:18Z",
      "diff_hunk" : "@@ -228,6 +230,61 @@ class BaseRequestHandler\n     virtual UniValue ProcessReply(const UniValue &batch_in) = 0;\n };\n \n+/** Process addrinfo requests */\n+class AddrinfoRequestHandler : public BaseRequestHandler\n+{\n+private:\n+    static constexpr uint8_t m_networks_size{5};\n+    const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r616251674",
      "id" : 616251674,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNjI1MTY3NA==",
      "original_commit_id" : "edf3167151f7a6d08cf733b4e230e2d745819ac8",
      "original_line" : 238,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 639397488,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T08:38:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616251674",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r616472982"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616472982"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks! I think I hadn't dropped the type specifier, only the size arg. Took your suggestions and updated the file in 06c43201a714b0426cc68b2fd5c681e5df10af99.",
      "commit_id" : "06c43201a714b0426cc68b2fd5c681e5df10af99",
      "created_at" : "2021-04-20T08:40:44Z",
      "diff_hunk" : "@@ -228,6 +230,61 @@ class BaseRequestHandler\n     virtual UniValue ProcessReply(const UniValue &batch_in) = 0;\n };\n \n+/** Process addrinfo requests */\n+class AddrinfoRequestHandler : public BaseRequestHandler\n+{\n+private:\n+    static constexpr uint8_t m_networks_size{5};\n+    const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r616472982",
      "id" : 616472982,
      "in_reply_to_id" : 616251674,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNjQ3Mjk4Mg==",
      "original_commit_id" : "edf3167151f7a6d08cf733b4e230e2d745819ac8",
      "original_line" : 238,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 639671522,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T08:40:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616472982",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r616533600"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616533600"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Cool  ",
      "commit_id" : "06c43201a714b0426cc68b2fd5c681e5df10af99",
      "created_at" : "2021-04-20T09:59:33Z",
      "diff_hunk" : "@@ -228,6 +230,61 @@ class BaseRequestHandler\n     virtual UniValue ProcessReply(const UniValue &batch_in) = 0;\n };\n \n+/** Process addrinfo requests */\n+class AddrinfoRequestHandler : public BaseRequestHandler\n+{\n+private:\n+    static constexpr uint8_t m_networks_size{5};\n+    const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#discussion_r616533600",
      "id" : 616533600,
      "in_reply_to_id" : 616251674,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNjUzMzYwMA==",
      "original_commit_id" : "edf3167151f7a6d08cf733b4e230e2d745819ac8",
      "original_line" : 238,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 639752044,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21595",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T09:59:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/616533600",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested ACK 06c43201a714b0426cc68b2fd5c681e5df10af99\r\n```javascript\r\n% cli -addrinfo\r\n{\r\n  \"addresses_known\": {\r\n    \"ipv4\": 52404,\r\n    \"ipv6\": 10827,\r\n    \"torv2\": 4987,\r\n    \"torv3\": 94,\r\n    \"i2p\": 5,\r\n    \"total\": 68317\r\n  }\r\n}\r\n```\r\n",
      "created_at" : "2021-04-20T11:51:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21595#issuecomment-823210810",
      "id" : 823210810,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21595",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMzIxMDgxMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-20T11:51:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/823210810",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
