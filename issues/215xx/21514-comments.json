[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #22087 by amadeuszpawlik\n* #20018 by dhruv\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-03-23T21:57:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-805293720",
      "id" : 805293720,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNTI5MzcyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-24T16:35:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/805293720",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nI think it would be a useful abstraction to introduce `CService::HasPort` or something like that. There are more protocols that do not have multi-port endpoints (UNIX sockets come to mind as an important one) and it would be slightly clearer than special-casing I2P.",
      "created_at" : "2021-03-25T10:00:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-806517937",
      "id" : 806517937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNjUxNzkzNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-25T10:00:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/806517937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`5c3eaea36...f30e489c3`: added an abstraction to check if a given network is using ports, making this not I2P specific.\r\n\r\n\"uses ports or not\" is a per-network property (like IPv4 uses ports, I2P does not use ports), so I added a standalone function that takes an `enum Network` argument to check for that instead of adding a `CNetAddr` or `CService` method. It is not required to have a `CNetAddr` or `CService` object in order to check the uses-ports property of a given network.",
      "created_at" : "2021-03-30T10:44:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-810118195",
      "id" : 810118195,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMDExODE5NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-30T10:44:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/810118195",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for working on this! Will review soon.",
      "created_at" : "2021-03-30T13:36:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-810251498",
      "id" : 810251498,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMDI1MTQ5OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-30T13:36:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/810251498",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r604922210"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604922210"
         }
      },
      "author_association" : "MEMBER",
      "body" : "44cf17a maybe add a unit test assertion",
      "commit_id" : "5be0a46b1623536d98aec641af0d24401995e837",
      "created_at" : "2021-03-31T13:58:03Z",
      "diff_hunk" : "@@ -563,7 +563,13 @@ class CService : public CNetAddr\n         bool SetSockAddr(const struct sockaddr* paddr);\n         friend bool operator==(const CService& a, const CService& b);\n         friend bool operator!=(const CService& a, const CService& b) { return !(a == b); }\n-        friend bool operator<(const CService& a, const CService& b);\n+\n+        /**\n+         * Avoid silently, unintentionally falling back to comparing CService objects as\n+         * CNetAddr objects.\n+         */\n+        bool operator<(const CService&) = delete;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r604922210",
      "id" : 604922210,
      "line" : 571,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDkyMjIxMA==",
      "original_commit_id" : "f30e489c3882cd58e382c203e5e4722fbe70f58e",
      "original_line" : 571,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : 10,
      "pull_request_review_id" : 625322551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-01T16:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604922210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r604941036"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604941036"
         }
      },
      "author_association" : "MEMBER",
      "body" : "987d372 Verified that these new assertions fail without the change to `ToStringIPPort()` in the same commit.",
      "commit_id" : "5be0a46b1623536d98aec641af0d24401995e837",
      "created_at" : "2021-03-31T14:20:03Z",
      "diff_hunk" : "@@ -131,6 +131,11 @@ BOOST_AUTO_TEST_CASE(netbase_lookupnumeric)\n     BOOST_CHECK(TestParse(\"[fd6b:88c0:8724:1:2:3:4:5]\", \"[::]:0\"));\n     // and that a one-off resolves correctly\n     BOOST_CHECK(TestParse(\"[fd6c:88c0:8724:1:2:3:4:5]\", \"[fd6c:88c0:8724:1:2:3:4:5]:65535\"));\n+\n+    // I2P skips the port.\n+    const std::string i2p_addr{\"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"};\n+    BOOST_CHECK(TestParse(i2p_addr, i2p_addr));\n+    BOOST_CHECK(TestParse(i2p_addr + \":8333\", i2p_addr));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r604941036",
      "id" : 604941036,
      "line" : 138,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDk0MTAzNg==",
      "original_commit_id" : "f30e489c3882cd58e382c203e5e4722fbe70f58e",
      "original_line" : 138,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/test/netbase_tests.cpp",
      "position" : 8,
      "pull_request_review_id" : 625322551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-01T16:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604941036",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r604943949"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604943949"
         }
      },
      "author_association" : "MEMBER",
      "body" : "8f4bd325 This I2P address string is created 4 times in this test file now; perhaps hoist to a constant.",
      "commit_id" : "5be0a46b1623536d98aec641af0d24401995e837",
      "created_at" : "2021-03-31T14:23:14Z",
      "diff_hunk" : "@@ -564,4 +569,32 @@ BOOST_AUTO_TEST_CASE(caddress_unserialize_v2)\n     BOOST_CHECK(fixture_addresses == addresses_unserialized);\n }\n \n+BOOST_AUTO_TEST_CASE(cservice_compare)\n+{\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") == LookupNumeric(\"1.1.1.1:555\"));\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") != LookupNumeric(\"1.1.1.1:666\"));\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") != LookupNumeric(\"2.2.2.2:555\"));\n+\n+    const std::string i2p_addr{\"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r604943949",
      "id" : 604943949,
      "line" : 578,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDk0Mzk0OQ==",
      "original_commit_id" : "f30e489c3882cd58e382c203e5e4722fbe70f58e",
      "original_line" : 578,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/netbase_tests.cpp",
      "position" : 22,
      "pull_request_review_id" : 625322551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-01T16:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604943949",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r604952955"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604952955"
         }
      },
      "author_association" : "MEMBER",
      "body" : "8f4bd325 can also test passing `RemovePortIfIrrelevant()` a vector of addresses",
      "commit_id" : "5be0a46b1623536d98aec641af0d24401995e837",
      "created_at" : "2021-03-31T14:33:25Z",
      "diff_hunk" : "@@ -564,4 +569,32 @@ BOOST_AUTO_TEST_CASE(caddress_unserialize_v2)\n     BOOST_CHECK(fixture_addresses == addresses_unserialized);\n }\n \n+BOOST_AUTO_TEST_CASE(cservice_compare)\n+{\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") == LookupNumeric(\"1.1.1.1:555\"));\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") != LookupNumeric(\"1.1.1.1:666\"));\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") != LookupNumeric(\"2.2.2.2:555\"));\n+\n+    const std::string i2p_addr{\"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"};\n+    BOOST_CHECK(LookupNumeric(i2p_addr + \":555\") == LookupNumeric(i2p_addr + \":555\"));\n+    BOOST_CHECK(LookupNumeric(i2p_addr + \":555\") == LookupNumeric(i2p_addr + \":666\"));\n+}\n+\n+BOOST_AUTO_TEST_CASE(remove_port_if_irrelevant)\n+{\n+    const std::string i2p_addr{\"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"};\n+    BOOST_CHECK_EQUAL(RemovePortIfIrrelevant(i2p_addr + \":4444\"), i2p_addr);\n+\n+    for (const std::string addr : {\n+             \"1.2.3.4\",\n+             \"1.2.3.4:5678\",\n+             \"[1:2::3:4]:5678\",\n+             \"pg6mmjiyjmcrsslvykfwnntlaru7p5svn6y2ymmju6nubxndf4pscryd.onion\",\n+             \"pg6mmjiyjmcrsslvykfwnntlaru7p5svn6y2ymmju6nubxndf4pscryd.onion:1111\",\n+             \"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\",\n+         }) {\n+        BOOST_CHECK_EQUAL(RemovePortIfIrrelevant(addr), addr);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r604952955",
      "id" : 604952955,
      "line" : 598,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDk1Mjk1NQ==",
      "original_commit_id" : "f30e489c3882cd58e382c203e5e4722fbe70f58e",
      "original_line" : 598,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/test/netbase_tests.cpp",
      "position" : 42,
      "pull_request_review_id" : 625322551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-01T16:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604952955",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r604964280"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604964280"
         }
      },
      "author_association" : "MEMBER",
      "body" : "6f19e34 suggested simplification\r\n```diff\r\n     def test_addnode_and_connect_i2p(self):\r\n-        self.log.info('Test that ports are removed from -addnode= and -connect= I2P addresses')\r\n-\r\n+        self.log.info(\"Test ports are removed from I2P addresses passed to -addnode/-connect\")\r\n         i2p_addr = \"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"\r\n         i2p_addr_with_port = i2p_addr + \":3333\"\r\n-\r\n-        self.stop_node(0)\r\n-        with self.nodes[0].assert_debug_log(expected_msgs=[\r\n-                f\"trying connection {i2p_addr} lastseen=\",\r\n-        ]):\r\n-            self.start_node(0, extra_args=[f\"-addnode={i2p_addr_with_port}\"])\r\n-\r\n-        self.stop_node(0)\r\n-        with self.nodes[0].assert_debug_log(expected_msgs=[\r\n-                f\"trying connection {i2p_addr} lastseen=\",\r\n-        ]):\r\n-            self.start_node(0, extra_args=[f\"-connect={i2p_addr_with_port}\"])\r\n+        msg = [f\"trying connection {i2p_addr} lastseen=\"]\r\n+        for option in {\"addnode\", \"connect\"}:\r\n+            with self.nodes[0].assert_debug_log(expected_msgs=msg):\r\n+                self.restart_node(0, extra_args=[f\"-{option}={i2p_addr_with_port}\"])\r\n \r\n     def run_test(self):\r\n```\r\n",
      "commit_id" : "5be0a46b1623536d98aec641af0d24401995e837",
      "created_at" : "2021-03-31T14:46:30Z",
      "diff_hunk" : "@@ -213,11 +213,30 @@ def test_seed_peers(self):\n         ]):\n             self.nodes[0].setmocktime(start + 65)\n \n+    def test_addnode_and_connect_i2p(self):\n+        self.log.info('Test that ports are removed from -addnode= and -connect= I2P addresses')\n+\n+        i2p_addr = \"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"\n+        i2p_addr_with_port = i2p_addr + \":3333\"\n+\n+        self.stop_node(0)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                f\"trying connection {i2p_addr} lastseen=\",\n+        ]):\n+            self.start_node(0, extra_args=[f\"-addnode={i2p_addr_with_port}\"])\n+\n+        self.stop_node(0)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                f\"trying connection {i2p_addr} lastseen=\",\n+        ]):\n+            self.start_node(0, extra_args=[f\"-connect={i2p_addr_with_port}\"])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r604964280",
      "id" : 604964280,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDk2NDI4MA==",
      "original_commit_id" : "f30e489c3882cd58e382c203e5e4722fbe70f58e",
      "original_line" : 232,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : null,
      "pull_request_review_id" : 625322551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-01T16:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604964280",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r604982203"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604982203"
         }
      },
      "author_association" : "MEMBER",
      "body" : "While here, maybe sneak this minor fixup into the commit\r\n```diff\r\n-bool static TestParse(std::string src, std::string canon)\r\n+bool static TestParse(const std::string& src, const std::string& canon)\r\n {\r\n-    CService addr(LookupNumeric(src, 65535));\r\n+    CService addr{LookupNumeric(src, 65535)};\r\n```\r\n",
      "commit_id" : "5be0a46b1623536d98aec641af0d24401995e837",
      "created_at" : "2021-03-31T15:07:59Z",
      "diff_hunk" : "@@ -131,6 +131,11 @@ BOOST_AUTO_TEST_CASE(netbase_lookupnumeric)\n     BOOST_CHECK(TestParse(\"[fd6b:88c0:8724:1:2:3:4:5]\", \"[::]:0\"));\n     // and that a one-off resolves correctly\n     BOOST_CHECK(TestParse(\"[fd6c:88c0:8724:1:2:3:4:5]\", \"[fd6c:88c0:8724:1:2:3:4:5]:65535\"));\n+\n+    // I2P skips the port.\n+    const std::string i2p_addr{\"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"};\n+    BOOST_CHECK(TestParse(i2p_addr, i2p_addr));\n+    BOOST_CHECK(TestParse(i2p_addr + \":8333\", i2p_addr));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r604982203",
      "id" : 604982203,
      "in_reply_to_id" : 604941036,
      "line" : 138,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDk4MjIwMw==",
      "original_commit_id" : "f30e489c3882cd58e382c203e5e4722fbe70f58e",
      "original_line" : 138,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/test/netbase_tests.cpp",
      "position" : 8,
      "pull_request_review_id" : 625405223,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-01T16:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604982203",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r605696588"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605696588"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Trying to order `CService` objects wouldn't compile.",
      "commit_id" : "5be0a46b1623536d98aec641af0d24401995e837",
      "created_at" : "2021-04-01T14:20:16Z",
      "diff_hunk" : "@@ -563,7 +563,13 @@ class CService : public CNetAddr\n         bool SetSockAddr(const struct sockaddr* paddr);\n         friend bool operator==(const CService& a, const CService& b);\n         friend bool operator!=(const CService& a, const CService& b) { return !(a == b); }\n-        friend bool operator<(const CService& a, const CService& b);\n+\n+        /**\n+         * Avoid silently, unintentionally falling back to comparing CService objects as\n+         * CNetAddr objects.\n+         */\n+        bool operator<(const CService&) = delete;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r605696588",
      "id" : 605696588,
      "in_reply_to_id" : 604922210,
      "line" : 571,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNTY5NjU4OA==",
      "original_commit_id" : "f30e489c3882cd58e382c203e5e4722fbe70f58e",
      "original_line" : 571,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : 10,
      "pull_request_review_id" : 626320217,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-01T16:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605696588",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r605709093"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605709093"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I prefer to keep it local to each test. It is just a random address, does not need to be equal in all test cases.",
      "commit_id" : "5be0a46b1623536d98aec641af0d24401995e837",
      "created_at" : "2021-04-01T14:36:30Z",
      "diff_hunk" : "@@ -564,4 +569,32 @@ BOOST_AUTO_TEST_CASE(caddress_unserialize_v2)\n     BOOST_CHECK(fixture_addresses == addresses_unserialized);\n }\n \n+BOOST_AUTO_TEST_CASE(cservice_compare)\n+{\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") == LookupNumeric(\"1.1.1.1:555\"));\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") != LookupNumeric(\"1.1.1.1:666\"));\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") != LookupNumeric(\"2.2.2.2:555\"));\n+\n+    const std::string i2p_addr{\"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r605709093",
      "id" : 605709093,
      "in_reply_to_id" : 604943949,
      "line" : 578,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNTcwOTA5Mw==",
      "original_commit_id" : "f30e489c3882cd58e382c203e5e4722fbe70f58e",
      "original_line" : 578,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/netbase_tests.cpp",
      "position" : 22,
      "pull_request_review_id" : 626337381,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-01T16:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605709093",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r605798867"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605798867"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "5be0a46b1623536d98aec641af0d24401995e837",
      "created_at" : "2021-04-01T16:41:11Z",
      "diff_hunk" : "@@ -564,4 +569,32 @@ BOOST_AUTO_TEST_CASE(caddress_unserialize_v2)\n     BOOST_CHECK(fixture_addresses == addresses_unserialized);\n }\n \n+BOOST_AUTO_TEST_CASE(cservice_compare)\n+{\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") == LookupNumeric(\"1.1.1.1:555\"));\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") != LookupNumeric(\"1.1.1.1:666\"));\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") != LookupNumeric(\"2.2.2.2:555\"));\n+\n+    const std::string i2p_addr{\"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"};\n+    BOOST_CHECK(LookupNumeric(i2p_addr + \":555\") == LookupNumeric(i2p_addr + \":555\"));\n+    BOOST_CHECK(LookupNumeric(i2p_addr + \":555\") == LookupNumeric(i2p_addr + \":666\"));\n+}\n+\n+BOOST_AUTO_TEST_CASE(remove_port_if_irrelevant)\n+{\n+    const std::string i2p_addr{\"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"};\n+    BOOST_CHECK_EQUAL(RemovePortIfIrrelevant(i2p_addr + \":4444\"), i2p_addr);\n+\n+    for (const std::string addr : {\n+             \"1.2.3.4\",\n+             \"1.2.3.4:5678\",\n+             \"[1:2::3:4]:5678\",\n+             \"pg6mmjiyjmcrsslvykfwnntlaru7p5svn6y2ymmju6nubxndf4pscryd.onion\",\n+             \"pg6mmjiyjmcrsslvykfwnntlaru7p5svn6y2ymmju6nubxndf4pscryd.onion:1111\",\n+             \"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\",\n+         }) {\n+        BOOST_CHECK_EQUAL(RemovePortIfIrrelevant(addr), addr);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r605798867",
      "id" : 605798867,
      "in_reply_to_id" : 604952955,
      "line" : 598,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNTc5ODg2Nw==",
      "original_commit_id" : "f30e489c3882cd58e382c203e5e4722fbe70f58e",
      "original_line" : 598,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/test/netbase_tests.cpp",
      "position" : 42,
      "pull_request_review_id" : 626457258,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-01T16:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605798867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r605808095"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605808095"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Taketh, thanks!\r\n\r\nOne minor downside of the new variant is that if we get exception on line 224, then it is not clear whether the problem is in `-addnode` or `-connect`.",
      "commit_id" : "5be0a46b1623536d98aec641af0d24401995e837",
      "created_at" : "2021-04-01T16:56:23Z",
      "diff_hunk" : "@@ -213,11 +213,30 @@ def test_seed_peers(self):\n         ]):\n             self.nodes[0].setmocktime(start + 65)\n \n+    def test_addnode_and_connect_i2p(self):\n+        self.log.info('Test that ports are removed from -addnode= and -connect= I2P addresses')\n+\n+        i2p_addr = \"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"\n+        i2p_addr_with_port = i2p_addr + \":3333\"\n+\n+        self.stop_node(0)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                f\"trying connection {i2p_addr} lastseen=\",\n+        ]):\n+            self.start_node(0, extra_args=[f\"-addnode={i2p_addr_with_port}\"])\n+\n+        self.stop_node(0)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                f\"trying connection {i2p_addr} lastseen=\",\n+        ]):\n+            self.start_node(0, extra_args=[f\"-connect={i2p_addr_with_port}\"])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r605808095",
      "id" : 605808095,
      "in_reply_to_id" : 604964280,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNTgwODA5NQ==",
      "original_commit_id" : "f30e489c3882cd58e382c203e5e4722fbe70f58e",
      "original_line" : 232,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : null,
      "pull_request_review_id" : 626469456,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-01T16:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605808095",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`f30e489c3...5be0a46b1`: address suggestions",
      "created_at" : "2021-04-01T16:57:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-812041193",
      "id" : 812041193,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMjA0MTE5Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-01T16:57:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812041193",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r605842743"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605842743"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point, `loglevel=debug` (logged by the CI in case of failure) would reliably indicate which one if we use an array/dict rather than a set:\r\n\r\n```diff\r\n-        for option in {\"addnode\", \"connect\"}:\r\n+        for option in [\"addnode\", \"connect\"]:\r\n```\r\nor by adding, for instance\r\n```diff\r\n         for option in {\"addnode\", \"connect\"}:\r\n+            self.log.debug(f\"-{option}\")\r\n             with self.nodes[0].assert_debug_log(expected_msgs=[msg]):\r\n```\r\nthen the log would show\r\n```\r\n2021-04-01T17:42:16.846000Z TestFramework (INFO): Test ports are removed from I2P addresses passed to -addnode/-connect\r\n2021-04-01T17:42:16.846000Z TestFramework (DEBUG): -connect\r\n2021-04-01T17:42:16.846000Z TestFramework.node0 (DEBUG): Stopping node\r\n2021-04-01T17:42:16.999000Z TestFramework.node0 (DEBUG): Node stopped\r\n2021-04-01T17:42:17.002000Z TestFramework.node0 (DEBUG): bitcoind started, waiting for RPC to come up\r\n2021-04-01T17:42:17.512000Z TestFramework.node0 (DEBUG): RPC successfully started\r\n2021-04-01T17:42:17.514000Z TestFramework (DEBUG): -addnode\r\n2021-04-01T17:42:17.514000Z TestFramework.node0 (DEBUG): Stopping node\r\n2021-04-01T17:42:17.618000Z TestFramework.node0 (DEBUG): Node stopped\r\n2021-04-01T17:42:17.628000Z TestFramework.node0 (DEBUG): bitcoind started, waiting for RPC to come up\r\n2021-04-01T17:42:18.140000Z TestFramework.node0 (DEBUG): RPC successfully started\r\n```\r\n",
      "commit_id" : "5be0a46b1623536d98aec641af0d24401995e837",
      "created_at" : "2021-04-01T17:53:51Z",
      "diff_hunk" : "@@ -213,11 +213,30 @@ def test_seed_peers(self):\n         ]):\n             self.nodes[0].setmocktime(start + 65)\n \n+    def test_addnode_and_connect_i2p(self):\n+        self.log.info('Test that ports are removed from -addnode= and -connect= I2P addresses')\n+\n+        i2p_addr = \"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"\n+        i2p_addr_with_port = i2p_addr + \":3333\"\n+\n+        self.stop_node(0)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                f\"trying connection {i2p_addr} lastseen=\",\n+        ]):\n+            self.start_node(0, extra_args=[f\"-addnode={i2p_addr_with_port}\"])\n+\n+        self.stop_node(0)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                f\"trying connection {i2p_addr} lastseen=\",\n+        ]):\n+            self.start_node(0, extra_args=[f\"-connect={i2p_addr_with_port}\"])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r605842743",
      "id" : 605842743,
      "in_reply_to_id" : 604964280,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNTg0Mjc0Mw==",
      "original_commit_id" : "f30e489c3882cd58e382c203e5e4722fbe70f58e",
      "original_line" : 232,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : null,
      "pull_request_review_id" : 626514742,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-01T17:53:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605842743",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 5be0a46b1623536d98aec641af0d24401995e837",
      "created_at" : "2021-04-01T17:54:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-812072399",
      "id" : 812072399,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMjA3MjM5OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-01T17:54:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812072399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Would it make sense to make it illegal for I2P hostnames to have a port in the first place?",
      "created_at" : "2021-04-01T18:41:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-812098165",
      "id" : 812098165,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMjA5ODE2NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-01T18:41:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812098165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Would it make sense to make it illegal for I2P hostnames to have a port in the first place?\r\n\r\nWe receive I2P host names from the outside world from:\r\n* command line arguments\r\n* RPC\r\n* the P2P layer via gossip\r\n* (is there more to this?)\r\n\r\nThe first two receive string arguments, so we can parse them and reject/return an error if we see an I2P address followed by `:port`. I am -0.1 on this, see below.\r\n\r\nOn the P2P layer we inevitably receive a port in the addrv2 encoding. We may insist that the port is e.g. `0` and ignore the address otherwise. I am -1 on this, because:\r\n\r\nI2P in general supports ports. It is just the proxy protocol we use that does not support them (SAM 3.1). Other proxy protocols or newer versions of SAM do support ports (we don't use newer SAM versions because `i2pd` supports maximum SAM 3.1).\r\n\r\nSo, I think it is best to ignore ports in I2P addresses and some day in the distant future if we decide to support them, then revert parts of this PR. But not impose restrictions on the P2P protocol.",
      "created_at" : "2021-04-02T15:53:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-812588585",
      "id" : 812588585,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMjU4ODU4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-02T15:54:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812588585",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Hmm can you explain a bit more what changes in later SAM protocols? The ability to create \"portful\" services, the ability to connect to them, both, ... what happens when an older-protocol node tries to connect to portful newer-protocol node or the other way around?\r\n\r\nThis may inform what to do, if we envision ever adopting a later version.",
      "created_at" : "2021-04-02T16:25:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-812601775",
      "id" : 812601775,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMjYwMTc3NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-02T16:25:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812601775",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "If helpful, \r\n\r\n- https://github.com/PurpleI2P/i2pd/wiki/Roadmap has \"Implement SAM v3.3\" on the roadmap (but the last update to the roadmap was in 2016; the code repo appears to be active however)\r\n- https://i2pd.readthedocs.io/en/latest/user-guide/configuration/#sam-interface is the current i2pd SAM interface doc\r\n- https://github.com/PurpleI2P/i2pd/wiki/Differences-between-i2pd-and-Java-I2P-router lists a few differences between the implementations, nothing \"portful\" though",
      "created_at" : "2021-04-02T16:36:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-812606208",
      "id" : 812606208,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMjYwNjIwOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-02T16:40:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812606208",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa, short answer - it works either way. Long answer:\r\n\r\n> Hmm can you explain a bit more what changes in later SAM protocols? The ability to create \"portful\" services, the ability to connect to them, both,\r\n\r\nBoth. The SAM protocol is described here: https://geti2p.net/en/docs/api/samv3 (relevant: \"Version 3.2 Changes\" and \"FROM_PORT\" / \"TO_PORT\").\r\n\r\n> what happens when an older-protocol node tries to connect to portful newer-protocol node or the other way around?\r\n\r\n* SAM 3.2 Client -> SAM 3.2 Listener\r\n  * Listener: `SESSION CREATE ... FROM_PORT=100 TO_PORT=200`\r\n  * Listener: `STREAM ACCEPT ...`\r\n  * Client: `SESSION CREATE ...` (no ports needed here)\r\n  * Client: `STREAM CONNECT ... FROM_PORT=500 TO_PORT=600` (deliberately different from the above)\r\n  * Listener receives: `...addr of client... FROM_PORT=500 TO_PORT=600`\r\n  * Then the connection is established just fine (!). I guess the listener has to close the connection manually if he does not like `{FROM,TO}_PORT`. It is unclear to me what is the purpose of `{FROM,TO}_PORT` in the `SESSION CREATE` command.\r\n\r\n* SAM 3.2 Client -> SAM 3.1 Listener\r\n  * Listener: `SESSION CREATE ...` (without `{FROM,TO}_PORT`)\r\n  * Listener: `STREAM ACCEPT ...`\r\n  * Client: `SESSION CREATE ...` (no ports needed here)\r\n  * Client: `STREAM CONNECT ... FROM_PORT=500 TO_PORT=600`\r\n  * Listener receives: `...addr of client...`\r\n  * Then the connection is established just fine.\r\n\r\n* SAM 3.1 Client -> SAM 3.2 Listener\r\n  * Listener: `SESSION CREATE ... FROM_PORT=100 TO_PORT=200`\r\n  * Listener: `STREAM ACCEPT ...`\r\n  * Client: `SESSION CREATE ...` (no ports needed here)\r\n  * Client: `STREAM CONNECT ...`\r\n  * Listener receives: `...addr of client... FROM_PORT=0 TO_PORT=0`\r\n  * Then the connection is established just fine.\r\n\r\n<details>\r\n<summary>raw transcripts in case somebody wants to play</summary>\r\n\r\n```\r\n# Listener 3.2 socket1\r\nHELLO VERSION MIN=3.2 MAX=3.2\r\nSESSION CREATE STYLE=STREAM ID=newlistenersession DESTINATION=il9BGrm9DNCXjCQ7lBCkmOOcaMIEIjdypahLIdn6xlIktHB4e2Dve6Wpo5dueVpH7s~UcK9XS9aUplxWU8zK1kEuk3Ty~dmwhs-vO0hzEdb7a8Hp25hQL1otv0InignPkLRx3eV-3Ksn6PmYuGDJt7gUXIVR2Q-Qc8tALBlDxejDuWsu4O33jeG9uw-pvAnza4FOSbP2KYv5Zm86RVwV2nQs78tBHsNVHqNuD5pCkQGlTbBA-PMQNqvvwjgqAln9jiqVDCTkcz~lF1NnntCctnoVHxPrNdxde3kEXRc~MCBOuuJ8Dals89TlGqd~9-P7PZxDbqqH4K6olUoqSTH-YtSb8ZjUAz35~pn-hkeyEJQOjVTzzAO20W~Udh3bNQamLUma4Hml6IDmpBi4fLa7450LJKb3WYhobhptCgem91lWSCqYeA3bW~UuCMp2OUrZ~i8-OhVh1SMGhChS1Qu-ZsLh4ZF1SCJdugZHSBF8VVnrlv--vasP2JBhbXb3LczHBQAEAAcAAMacUI6416R9uJapm5lWWfxiyWLPjJCaiYT0p0S-KySbPqOtXjy5HBd63HbC9u4eeT34RTPEuR0zaiVoSFIOyOaf0zTSQD2r32gwysjSgmjyJX7t9VB-uTGzL24W2WGrD1uidTW2YdQ2mGmwJXeSy2pFySEfJP34BYs~0V5c~rDz2CgyBpaAVuDMO3kCNB0tVw6JIprpX-bxoTkrHOgB6IkhTdDMJMwTvBtUBeWAwZJtt7-uc8aGZf5In0NyaRwn~JaqjKjbxjA0A9e1sYyayOtJpZxnek2s0hRxdW64uJFIbywYmnbQuMn~ovfbLl17ZC4Dj0IlNubjIehal9TmgIaVYJ-svqKadbOare6wZ5ETG5kNjx19YQ~F-DfB-UmTQQ== FROM_PORT=100 TO_PORT=200\r\n\r\n# Listener 3.2 socket2\r\nHELLO VERSION MIN=3.2 MAX=3.2\r\nSTREAM ACCEPT ID=newlistenersession SILENT=false\r\n\r\n# Listener 3.1 socket1\r\nHELLO VERSION MIN=3.1 MAX=3.1\r\nSESSION CREATE STYLE=STREAM ID=oldlistenersession DESTINATION=il9BGrm9DNCXjCQ7lBCkmOOcaMIEIjdypahLIdn6xlIktHB4e2Dve6Wpo5dueVpH7s~UcK9XS9aUplxWU8zK1kEuk3Ty~dmwhs-vO0hzEdb7a8Hp25hQL1otv0InignPkLRx3eV-3Ksn6PmYuGDJt7gUXIVR2Q-Qc8tALBlDxejDuWsu4O33jeG9uw-pvAnza4FOSbP2KYv5Zm86RVwV2nQs78tBHsNVHqNuD5pCkQGlTbBA-PMQNqvvwjgqAln9jiqVDCTkcz~lF1NnntCctnoVHxPrNdxde3kEXRc~MCBOuuJ8Dals89TlGqd~9-P7PZxDbqqH4K6olUoqSTH-YtSb8ZjUAz35~pn-hkeyEJQOjVTzzAO20W~Udh3bNQamLUma4Hml6IDmpBi4fLa7450LJKb3WYhobhptCgem91lWSCqYeA3bW~UuCMp2OUrZ~i8-OhVh1SMGhChS1Qu-ZsLh4ZF1SCJdugZHSBF8VVnrlv--vasP2JBhbXb3LczHBQAEAAcAAMacUI6416R9uJapm5lWWfxiyWLPjJCaiYT0p0S-KySbPqOtXjy5HBd63HbC9u4eeT34RTPEuR0zaiVoSFIOyOaf0zTSQD2r32gwysjSgmjyJX7t9VB-uTGzL24W2WGrD1uidTW2YdQ2mGmwJXeSy2pFySEfJP34BYs~0V5c~rDz2CgyBpaAVuDMO3kCNB0tVw6JIprpX-bxoTkrHOgB6IkhTdDMJMwTvBtUBeWAwZJtt7-uc8aGZf5In0NyaRwn~JaqjKjbxjA0A9e1sYyayOtJpZxnek2s0hRxdW64uJFIbywYmnbQuMn~ovfbLl17ZC4Dj0IlNubjIehal9TmgIaVYJ-svqKadbOare6wZ5ETG5kNjx19YQ~F-DfB-UmTQQ==\r\n\r\n# Listener 3.1 socket2\r\nHELLO VERSION MIN=3.1 MAX=3.1\r\nSTREAM ACCEPT ID=oldlistenersession SILENT=false\r\n\r\n# Client 3.2 socket1\r\nHELLO VERSION MIN=3.2 MAX=3.2\r\nSESSION CREATE STYLE=STREAM ID=newclientsession DESTINATION=bTy5lwz1fc6nhH4hd88~8nlhT-Ls6E8qrGIEId1Of1JwILHya-gsXBXqPyO7X4Nd4zjPrOxWLmXrluxOxQWHr4ARrL2GhfgCj6hqySM~tG9BnnMqZiu4oil9i~XhJ7XU526FcG4o3jNL0vGxtQqle64PO9dezxtsORpsNnl-2l8soQFHxzMjw6nkZSwBIT2Uy44rB3jvQ0ufGNr8kKVKZgIS-7GpFuvPZucJSehztIZ2hK4Ffz-qquUrTaXTSBmaLQPEQpgxePXgasfb2mnbOx6L1qmjUoAUWaL4JQEfPYbfU5hr~BJ7NkxzvaMY1nb-FyJF5se-huNxRIovmbkz-35Ui6D0WZnV0WG2yCyVvRApLa90CHI~sy~El2wUzAk51TY7PJ29TdqMH7fLVTgPyCr1p2Yq7tJgqYxn2nIiUi90qiAHI5N7YqUAetjzWf48mgtgvlh7bD6vsb7CBPN311zYjK3CGOpHEDHvB4Q7S~tWKaVdKZteitopsGAiPCY3BQAEAAcAAA1nRAP3r9C4iPvXg-oGc9bVnOuLx2c2jein3cYgg0JJugOOU5uwYfpptLIHcK5Ejm6O6T0YWXAa9MgdGT9Qq7-urBsJIWng1h67rcIKXV5sj9AkuKXF43zBk-7LTsZujWnqU8LGoE49-2dMNJfQHH0HMUxyw23AuTZHQ4esK-ymCB5eD6EBnuWdpZAzo7Rbk-Spq5RVVoPrP-sR-FweFW3Lr-irPuGGE1B4bzODqesnpJeQlbwxCek40zdhqK5rBOW~rxCdxYk3-mrxnJxuOCnHs0eM0686ur3KPbJYhA2ibXTyDShnWCxTiLyYawfkK17IuP9V1R0magY3DlGTukgcsrRri1vQMpB2DJ3JLwcB9hUHeFcglFKZ7ZkSOCKTnw==\r\n\r\n# Client 3.2 socket2\r\nHELLO VERSION MIN=3.2 MAX=3.2\r\nSTREAM CONNECT ID=newclientsession DESTINATION=il9BGrm9DNCXjCQ7lBCkmOOcaMIEIjdypahLIdn6xlIktHB4e2Dve6Wpo5dueVpH7s~UcK9XS9aUplxWU8zK1kEuk3Ty~dmwhs-vO0hzEdb7a8Hp25hQL1otv0InignPkLRx3eV-3Ksn6PmYuGDJt7gUXIVR2Q-Qc8tALBlDxejDuWsu4O33jeG9uw-pvAnza4FOSbP2KYv5Zm86RVwV2nQs78tBHsNVHqNuD5pCkQGlTbBA-PMQNqvvwjgqAln9jiqVDCTkcz~lF1NnntCctnoVHxPrNdxde3kEXRc~MCBOuuJ8Dals89TlGqd~9-P7PZxDbqqH4K6olUoqSTH-YtSb8ZjUAz35~pn-hkeyEJQOjVTzzAO20W~Udh3bNQamLUma4Hml6IDmpBi4fLa7450LJKb3WYhobhptCgem91lWSCqYeA3bW~UuCMp2OUrZ~i8-OhVh1SMGhChS1Qu-ZsLh4ZF1SCJdugZHSBF8VVnrlv--vasP2JBhbXb3LczHBQAEAAcAAA== SILENT=false FROM_PORT=500 TO_PORT=600\r\n\r\n# Client 3.1 socket1\r\nHELLO VERSION MIN=3.1 MAX=3.1\r\nSESSION CREATE STYLE=STREAM ID=oldclientsession DESTINATION=bTy5lwz1fc6nhH4hd88~8nlhT-Ls6E8qrGIEId1Of1JwILHya-gsXBXqPyO7X4Nd4zjPrOxWLmXrluxOxQWHr4ARrL2GhfgCj6hqySM~tG9BnnMqZiu4oil9i~XhJ7XU526FcG4o3jNL0vGxtQqle64PO9dezxtsORpsNnl-2l8soQFHxzMjw6nkZSwBIT2Uy44rB3jvQ0ufGNr8kKVKZgIS-7GpFuvPZucJSehztIZ2hK4Ffz-qquUrTaXTSBmaLQPEQpgxePXgasfb2mnbOx6L1qmjUoAUWaL4JQEfPYbfU5hr~BJ7NkxzvaMY1nb-FyJF5se-huNxRIovmbkz-35Ui6D0WZnV0WG2yCyVvRApLa90CHI~sy~El2wUzAk51TY7PJ29TdqMH7fLVTgPyCr1p2Yq7tJgqYxn2nIiUi90qiAHI5N7YqUAetjzWf48mgtgvlh7bD6vsb7CBPN311zYjK3CGOpHEDHvB4Q7S~tWKaVdKZteitopsGAiPCY3BQAEAAcAAA1nRAP3r9C4iPvXg-oGc9bVnOuLx2c2jein3cYgg0JJugOOU5uwYfpptLIHcK5Ejm6O6T0YWXAa9MgdGT9Qq7-urBsJIWng1h67rcIKXV5sj9AkuKXF43zBk-7LTsZujWnqU8LGoE49-2dMNJfQHH0HMUxyw23AuTZHQ4esK-ymCB5eD6EBnuWdpZAzo7Rbk-Spq5RVVoPrP-sR-FweFW3Lr-irPuGGE1B4bzODqesnpJeQlbwxCek40zdhqK5rBOW~rxCdxYk3-mrxnJxuOCnHs0eM0686ur3KPbJYhA2ibXTyDShnWCxTiLyYawfkK17IuP9V1R0magY3DlGTukgcsrRri1vQMpB2DJ3JLwcB9hUHeFcglFKZ7ZkSOCKTnw==\r\n\r\n# Client 3.1 socket2\r\nHELLO VERSION MIN=3.1 MAX=3.1\r\nSTREAM CONNECT ID=oldclientsession DESTINATION=il9BGrm9DNCXjCQ7lBCkmOOcaMIEIjdypahLIdn6xlIktHB4e2Dve6Wpo5dueVpH7s~UcK9XS9aUplxWU8zK1kEuk3Ty~dmwhs-vO0hzEdb7a8Hp25hQL1otv0InignPkLRx3eV-3Ksn6PmYuGDJt7gUXIVR2Q-Qc8tALBlDxejDuWsu4O33jeG9uw-pvAnza4FOSbP2KYv5Zm86RVwV2nQs78tBHsNVHqNuD5pCkQGlTbBA-PMQNqvvwjgqAln9jiqVDCTkcz~lF1NnntCctnoVHxPrNdxde3kEXRc~MCBOuuJ8Dals89TlGqd~9-P7PZxDbqqH4K6olUoqSTH-YtSb8ZjUAz35~pn-hkeyEJQOjVTzzAO20W~Udh3bNQamLUma4Hml6IDmpBi4fLa7450LJKb3WYhobhptCgem91lWSCqYeA3bW~UuCMp2OUrZ~i8-OhVh1SMGhChS1Qu-ZsLh4ZF1SCJdugZHSBF8VVnrlv--vasP2JBhbXb3LczHBQAEAAcAAA== SILENT=false\r\n```\r\n\r\n</details>\r\n",
      "created_at" : "2021-04-02T17:34:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-812632520",
      "id" : 812632520,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxMjYzMjUyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-02T17:34:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812632520",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r608806324"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608806324"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> ...would reliably indicate which one if we use an array/dict rather than a set...\r\n\r\nHmm, I tried this, but did not see any difference in the output, what am I missing? (I sneaked a deliberate change of the expected message if the option is e.g. `addnode` in order to trigger a failure).",
      "commit_id" : "5be0a46b1623536d98aec641af0d24401995e837",
      "created_at" : "2021-04-07T16:22:05Z",
      "diff_hunk" : "@@ -213,11 +213,30 @@ def test_seed_peers(self):\n         ]):\n             self.nodes[0].setmocktime(start + 65)\n \n+    def test_addnode_and_connect_i2p(self):\n+        self.log.info('Test that ports are removed from -addnode= and -connect= I2P addresses')\n+\n+        i2p_addr = \"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"\n+        i2p_addr_with_port = i2p_addr + \":3333\"\n+\n+        self.stop_node(0)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                f\"trying connection {i2p_addr} lastseen=\",\n+        ]):\n+            self.start_node(0, extra_args=[f\"-addnode={i2p_addr_with_port}\"])\n+\n+        self.stop_node(0)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                f\"trying connection {i2p_addr} lastseen=\",\n+        ]):\n+            self.start_node(0, extra_args=[f\"-connect={i2p_addr_with_port}\"])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r608806324",
      "id" : 608806324,
      "in_reply_to_id" : 604964280,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODgwNjMyNA==",
      "original_commit_id" : "f30e489c3882cd58e382c203e5e4722fbe70f58e",
      "original_line" : 232,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : null,
      "pull_request_review_id" : 630211994,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-07T16:22:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608806324",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild So... that kind of calls for treating the lack of ports right now as forcing port=0. I guess that's a bit annoying to implement, but if it's possible perhaps the most forward-compatible approach:\r\n* Make the default port in I2P connections 0 (rather than 8333/18333 etc).\r\n* Refuse to make outgoing connections that don't have port field equal to 0\r\n* Still print it in output/ToString conversions\r\n\r\nThat would mean that if/when ports are actually adopted, you won't get any surprises.",
      "created_at" : "2021-04-07T16:25:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-815049933",
      "id" : 815049933,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxNTA0OTkzMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-07T16:25:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/815049933",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r608835334"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608835334"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I wasn't very clear. I meant that it would have a fixed order so you would know which failure it is. Array + debug logging probably best.",
      "commit_id" : "5be0a46b1623536d98aec641af0d24401995e837",
      "created_at" : "2021-04-07T17:01:07Z",
      "diff_hunk" : "@@ -213,11 +213,30 @@ def test_seed_peers(self):\n         ]):\n             self.nodes[0].setmocktime(start + 65)\n \n+    def test_addnode_and_connect_i2p(self):\n+        self.log.info('Test that ports are removed from -addnode= and -connect= I2P addresses')\n+\n+        i2p_addr = \"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"\n+        i2p_addr_with_port = i2p_addr + \":3333\"\n+\n+        self.stop_node(0)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                f\"trying connection {i2p_addr} lastseen=\",\n+        ]):\n+            self.start_node(0, extra_args=[f\"-addnode={i2p_addr_with_port}\"])\n+\n+        self.stop_node(0)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                f\"trying connection {i2p_addr} lastseen=\",\n+        ]):\n+            self.start_node(0, extra_args=[f\"-connect={i2p_addr_with_port}\"])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#discussion_r608835334",
      "id" : 608835334,
      "in_reply_to_id" : 604964280,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODgzNTMzNA==",
      "original_commit_id" : "f30e489c3882cd58e382c203e5e4722fbe70f58e",
      "original_line" : 232,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : null,
      "pull_request_review_id" : 630249523,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21514",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-07T17:01:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608835334",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`5be0a46b1...9ea6503d7`: in the added test, use python's dict (`[]`) instead of set (`{}`) to make the order of execution deterministic (would help with [diagnosis if the test fails](https://github.com/bitcoin/bitcoin/pull/21514#discussion_r605842743))",
      "created_at" : "2021-04-09T08:44:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-816525914",
      "id" : 816525914,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxNjUyNTkxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-09T08:44:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/816525914",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa, I made some further experiments. Since one may connect to I2P in ways other than using the SAM protocol, I tried using the I2P router's HTTP proxy to connect to a SAM 3.2 listener (who has done `SESSION CREATE ... FROM_PORT=100 TO_PORT=200`). All went as expected:\r\n\r\n* Entering `http://foo.b32.i2p` in the browser, the listener receives `... FROM_PORT=0 TO_PORT=80`\r\n* Entering `https://foo.b32.i2p` in the browser, the listener receives `... FROM_PORT=0 TO_PORT=443`\r\n* Entering `http://foo.b32.i2p:1234` in the browser, the listener receives `... FROM_PORT=0 TO_PORT=1234`\r\n\r\nHmm...",
      "created_at" : "2021-04-09T09:48:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-816564719",
      "id" : 816564719,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxNjU2NDcxOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-09T09:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/816564719",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "So, it looks like with I2P we listen on just `address` (not on `address:port` like in TCP). The listener receives the port the client is connecting to as a parameter along with the incoming connection (or port=0 if the client uses SAM 3.1 or older). This means that in I2P it is not possible to have two different programs listening on the same address but different port like in TCP.",
      "created_at" : "2021-04-12T15:07:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-817890395",
      "id" : 817890395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxNzg5MDM5NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-12T15:07:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/817890395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK on improving abstractions.\r\nHaven't verify the mentioned problem.",
      "created_at" : "2021-04-16T10:03:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-821067320",
      "id" : 821067320,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMTA2NzMyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-16T10:03:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/821067320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 9ea6503d753a3c84bc2ea3b3e61504e8bd46c40c modulo ensuring this change is compatible with the I2P seeds and non-default port check in net.cpp::CConnman::ThreadOpenConnections.\r\n\r\n(When testing the I2P seed nodes for #21825, I first tried adding them with no port numbers. Testing with a fresh peers.dat and only those I2P seeds in chainparamsseeds and in my AddrMan, I realizing they weren't organically connecting because the port number was missing (e.g. a missing port is converted to 0). Adding port 8333 like for the other seeds enabled the I2P ones to connect immediately.)",
      "created_at" : "2021-05-05T15:50:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-832804940",
      "id" : 832804940,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMjgwNDk0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-05T15:51:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/832804940",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Would be good to have this fixed for v22.",
      "created_at" : "2021-05-19T14:44:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-844174325",
      "id" : 844174325,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0NDE3NDMyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-19T14:44:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/844174325",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\n This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-05-25T08:38:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-847673378",
      "id" : 847673378,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0NzY3MzM3OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-25T08:38:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/847673378",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`9ea6503d75...6d8d59284b`: rebase due to conflicts",
      "created_at" : "2021-05-31T16:19:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-851583806",
      "id" : 851583806,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MTU4MzgwNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-31T16:19:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851583806",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @vasild So... that kind of calls for treating the lack of ports right now as forcing port=0...\r\n\r\nThat makes sense (too). Implemented in https://github.com/bitcoin/bitcoin/pull/22112, lets see if it will fly better than this PR :)",
      "created_at" : "2021-05-31T16:32:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-851589118",
      "id" : 851589118,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MTU4OTExOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-31T16:32:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851589118",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Closing in favor of #22112 (which was merged).",
      "created_at" : "2021-07-13T15:40:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21514#issuecomment-879196207",
      "id" : 879196207,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21514",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3OTE5NjIwNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-13T15:40:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/879196207",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   }
]
