[
   {
      "body" : "Specific numbers are of course open for discussion.",
      "created_at" : "2016-06-27T14:00:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#issuecomment-228753998",
      "id" : 228753998,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8273",
      "updated_at" : "2016-06-27T14:00:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/228753998",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Would this require mention in the release notes?\r\n\r\nImagine someone updating on weak hardware, which does not support the new memory requirement.",
      "created_at" : "2016-06-27T18:39:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#issuecomment-228836145",
      "id" : 228836145,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8273",
      "updated_at" : "2016-06-27T18:39:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/228836145",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "This is a good idea and we should def. do this!\r\n\r\nLong term I would wish a flexible solution. If you have to catch up a couple of days/week (or during IBD), bitcoind/qt should use a catchup-cache-setting (can be a different, second `-dbcacheibd` [or similar] settings).\r\nOr we could think about adding \"profiles\" (set-changes of some CPU/MEM related settings).",
      "created_at" : "2016-06-27T19:21:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#issuecomment-228847697",
      "id" : 228847697,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8273",
      "updated_at" : "2016-06-27T19:21:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/228847697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/8273/commits/fdf085fcaccd012a54ead0de4c01cf35f541f257\r\nACK for 0.13.\r\nWould need prominent releasenotes part.",
      "created_at" : "2016-06-27T19:22:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#issuecomment-228847980",
      "id" : 228847980,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8273",
      "updated_at" : "2016-06-27T19:22:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/228847980",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8273#discussion_r68696573"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8273"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68696573"
         }
      },
      "body" : "nit: without knowing the shorthand by heart,   it isn't exactly clear what `<< 20` represents here.   It could have some implied context compared to the fact its just shorthand for `MiB` (assuming I've understood it correctly!)",
      "commit_id" : "f2bdbb7e307f89e6e823d6b03e92ed4c269fc01e",
      "created_at" : "2016-06-28T04:37:44Z",
      "diff_hunk" : "@@ -22,11 +22,17 @@ class CCoinsViewDBCursor;\n class uint256;\n \n //! -dbcache default (MiB)\n-static const int64_t nDefaultDbCache = 100;\n+static const int64_t nDefaultDbCache = 300;\n //! max. -dbcache in (MiB)\n static const int64_t nMaxDbCache = sizeof(void*) > 4 ? 16384 : 1024;\n //! min. -dbcache in (MiB)\n static const int64_t nMinDbCache = 4;\n+//! Max memory allocated to block tree DB specific cache (if no -txindex)\n+static const int64_t nMaxBlockDBCache = 2 << 20;\n+//! Max memory allocated to block tree DB specific cache (with -txindex)\n+static const int64_t nMaxBlockDBAndTxIndexCache = 32 << 20;\n+//! Max memory allocated to coin DB specific cache\n+static const int64_t nMaxCoinsDBCache = 32 << 20;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#discussion_r68696573",
      "id" : 68696573,
      "original_commit_id" : "fdf085fcaccd012a54ead0de4c01cf35f541f257",
      "original_position" : 15,
      "path" : "src/txdb.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8273",
      "updated_at" : "2016-06-28T13:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68696573",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "concept ACK",
      "created_at" : "2016-06-28T04:38:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#issuecomment-228946298",
      "id" : 228946298,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8273",
      "updated_at" : "2016-06-28T04:38:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/228946298",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8273#discussion_r68711696"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8273"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68711696"
         }
      },
      "body" : "yes, I don't want to mention numbers in the comments (as everyone forgets to update those as they're not checked by the compiler) but specifying that it's MiB is fine with me",
      "commit_id" : "f2bdbb7e307f89e6e823d6b03e92ed4c269fc01e",
      "created_at" : "2016-06-28T07:50:34Z",
      "diff_hunk" : "@@ -22,11 +22,17 @@ class CCoinsViewDBCursor;\n class uint256;\n \n //! -dbcache default (MiB)\n-static const int64_t nDefaultDbCache = 100;\n+static const int64_t nDefaultDbCache = 300;\n //! max. -dbcache in (MiB)\n static const int64_t nMaxDbCache = sizeof(void*) > 4 ? 16384 : 1024;\n //! min. -dbcache in (MiB)\n static const int64_t nMinDbCache = 4;\n+//! Max memory allocated to block tree DB specific cache (if no -txindex)\n+static const int64_t nMaxBlockDBCache = 2 << 20;\n+//! Max memory allocated to block tree DB specific cache (with -txindex)\n+static const int64_t nMaxBlockDBAndTxIndexCache = 32 << 20;\n+//! Max memory allocated to coin DB specific cache\n+static const int64_t nMaxCoinsDBCache = 32 << 20;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#discussion_r68711696",
      "id" : 68711696,
      "original_commit_id" : "fdf085fcaccd012a54ead0de4c01cf35f541f257",
      "original_position" : 15,
      "path" : "src/txdb.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8273",
      "updated_at" : "2016-06-28T13:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68711696",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> Would this require mention in the release notes?\r\n\r\nYes.\r\n\r\n> Imagine someone updating on weak hardware, which does not support the new memory requirement.\r\n\r\nWell at least now that the mempool is capped, that ought to free up some memory for other uses. But yes  it could be the final straw, sure...\r\n\r\n> Long term I would wish a flexible solution. If you have to catch up a couple of days/week (or during IBD), bitcoind/qt should use a catchup-cache-setting (can be a different, second -dbcacheibd [or similar] settings).\r\n\r\nRight - during initial sync (and catch-up) the mempool is virtually guaranteed to be empty. This fact could be used to temporarily bump dbcache. But it's too late for that for 0.13.\r\n",
      "created_at" : "2016-06-28T07:51:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#issuecomment-228977292",
      "id" : 228977292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8273",
      "updated_at" : "2016-06-28T07:58:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/228977292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8273#discussion_r68718530"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8273"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68718530"
         }
      },
      "body" : "Nit: braces should be \"(in MiB)\" or remove \"in\"",
      "commit_id" : "f2bdbb7e307f89e6e823d6b03e92ed4c269fc01e",
      "created_at" : "2016-06-28T08:41:52Z",
      "diff_hunk" : "@@ -22,11 +22,17 @@ class CCoinsViewDBCursor;\n class uint256;\n \n //! -dbcache default (MiB)\n-static const int64_t nDefaultDbCache = 100;\n+static const int64_t nDefaultDbCache = 300;\n //! max. -dbcache in (MiB)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#discussion_r68718530",
      "id" : 68718530,
      "original_commit_id" : "fdf085fcaccd012a54ead0de4c01cf35f541f257",
      "original_position" : 6,
      "path" : "src/txdb.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8273",
      "updated_at" : "2016-06-28T13:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68718530",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8273#discussion_r68718600"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8273"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68718600"
         }
      },
      "body" : "Nit: Mention \"(in bytes)\" or \"(bytes)\"",
      "commit_id" : "f2bdbb7e307f89e6e823d6b03e92ed4c269fc01e",
      "created_at" : "2016-06-28T08:42:21Z",
      "diff_hunk" : "@@ -22,11 +22,17 @@ class CCoinsViewDBCursor;\n class uint256;\n \n //! -dbcache default (MiB)\n-static const int64_t nDefaultDbCache = 100;\n+static const int64_t nDefaultDbCache = 300;\n //! max. -dbcache in (MiB)\n static const int64_t nMaxDbCache = sizeof(void*) > 4 ? 16384 : 1024;\n //! min. -dbcache in (MiB)\n static const int64_t nMinDbCache = 4;\n+//! Max memory allocated to block tree DB specific cache (if no -txindex)\n+static const int64_t nMaxBlockDBCache = 2 << 20;\n+//! Max memory allocated to block tree DB specific cache (with -txindex)\n+static const int64_t nMaxBlockDBAndTxIndexCache = 32 << 20;\n+//! Max memory allocated to coin DB specific cache",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#discussion_r68718600",
      "id" : 68718600,
      "original_commit_id" : "fdf085fcaccd012a54ead0de4c01cf35f541f257",
      "original_position" : 14,
      "path" : "src/txdb.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8273",
      "updated_at" : "2016-06-28T13:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68718600",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8273#discussion_r68729625"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8273"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68729625"
         }
      },
      "body" : "bah, it's kind of messy that some of these are in bytes, and some in MiB\r\nWe probably should switch them all to bytes, or all to MiB.\r\n",
      "commit_id" : "f2bdbb7e307f89e6e823d6b03e92ed4c269fc01e",
      "created_at" : "2016-06-28T10:01:16Z",
      "diff_hunk" : "@@ -22,11 +22,17 @@ class CCoinsViewDBCursor;\n class uint256;\n \n //! -dbcache default (MiB)\n-static const int64_t nDefaultDbCache = 100;\n+static const int64_t nDefaultDbCache = 300;\n //! max. -dbcache in (MiB)\n static const int64_t nMaxDbCache = sizeof(void*) > 4 ? 16384 : 1024;\n //! min. -dbcache in (MiB)\n static const int64_t nMinDbCache = 4;\n+//! Max memory allocated to block tree DB specific cache (if no -txindex)\n+static const int64_t nMaxBlockDBCache = 2 << 20;\n+//! Max memory allocated to block tree DB specific cache (with -txindex)\n+static const int64_t nMaxBlockDBAndTxIndexCache = 32 << 20;\n+//! Max memory allocated to coin DB specific cache",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#discussion_r68729625",
      "id" : 68729625,
      "original_commit_id" : "fdf085fcaccd012a54ead0de4c01cf35f541f257",
      "original_position" : 14,
      "path" : "src/txdb.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8273",
      "updated_at" : "2016-06-28T13:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68729625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I am (slowly) trying various leveldb cache sizes to see how big it really needs to be.",
      "created_at" : "2016-06-28T11:35:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#issuecomment-229024122",
      "id" : 229024122,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8273",
      "updated_at" : "2016-06-28T11:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229024122",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8273#discussion_r68754042"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8273"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68754042"
         }
      },
      "body" : "All the constants are in MiB now, and that's documented as such",
      "commit_id" : "f2bdbb7e307f89e6e823d6b03e92ed4c269fc01e",
      "created_at" : "2016-06-28T13:18:45Z",
      "diff_hunk" : "@@ -22,11 +22,17 @@ class CCoinsViewDBCursor;\n class uint256;\n \n //! -dbcache default (MiB)\n-static const int64_t nDefaultDbCache = 100;\n+static const int64_t nDefaultDbCache = 300;\n //! max. -dbcache in (MiB)\n static const int64_t nMaxDbCache = sizeof(void*) > 4 ? 16384 : 1024;\n //! min. -dbcache in (MiB)\n static const int64_t nMinDbCache = 4;\n+//! Max memory allocated to block tree DB specific cache (if no -txindex)\n+static const int64_t nMaxBlockDBCache = 2 << 20;\n+//! Max memory allocated to block tree DB specific cache (with -txindex)\n+static const int64_t nMaxBlockDBAndTxIndexCache = 32 << 20;\n+//! Max memory allocated to coin DB specific cache",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#discussion_r68754042",
      "id" : 68754042,
      "original_commit_id" : "fdf085fcaccd012a54ead0de4c01cf35f541f257",
      "original_position" : 14,
      "path" : "src/txdb.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8273",
      "updated_at" : "2016-06-28T13:18:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68754042",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "On a Xeon-D 1541 with 64GB ram, 7200 rpm disk,  with no txindex, and all signature checks disabled, I found that:\r\n\r\nCapping GetOptions ncachesize to 1MB (holding all else constant) resulted in a 1% performance loss and capping at  4MB to a 0.1% loss (31072.23 to reindex instead of 31021.76). (2MB was very close to the 1MB numbers). On this basis I recommend clamping at leveldb 4MB or 8MB (just in case future growth or other workloads makes it matter more), and handing the rest of the memory to the coins cache.",
      "created_at" : "2016-06-28T19:09:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#issuecomment-229151117",
      "id" : 229151117,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8273",
      "updated_at" : "2016-06-28T19:09:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229151117",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "> Capping GetOptions ncachesize to 1MB (holding all else constant) resulted in a 1% performance loss and capping at 4MB to a 0.1% loss (31072.23 to reindex instead of 31021.76). (2MB was very close to the 1MB numbers). On this basis I recommend clamping at leveldb 4MB or 8MB (just in case future growth or other workloads makes it matter more), and handing the rest of the memory to the coins cache.\r\n\r\nThanks for testing! I'll change the maximums to 8 MiB.",
      "created_at" : "2016-06-29T07:23:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#issuecomment-229277149",
      "id" : 229277149,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8273",
      "updated_at" : "2016-06-29T07:23:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229277149",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Benchmarked this pull req on the above system with reindex (and no signature checking at all),  went from 31021.76 seconds to 21303.22.\r\n\r\nIt's still a lot slower than the 'infinite' dbcache size results; but a huge improvement over the old results.\r\n\r\nACK.",
      "created_at" : "2016-06-29T17:34:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8273#issuecomment-229430211",
      "id" : 229430211,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8273",
      "updated_at" : "2016-06-29T17:34:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229430211",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   }
]
