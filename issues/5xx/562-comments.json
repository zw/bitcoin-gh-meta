[
   {
      "body" : "If the \"cache getwork\" patch is applied, does this matter?\r\n",
      "created_at" : "2011-10-05T14:22:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/562#issuecomment-2298382",
      "id" : 2298382,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/562",
      "updated_at" : "2011-10-05T14:22:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2298382",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "The original \"cache getwork\" patch used this. I split them up for code cleanliness. If this one is merged first, I can rebase the FastGetWork code and bring it back to its original state from JoelKatz.",
      "created_at" : "2011-10-05T15:12:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/562#issuecomment-2298974",
      "id" : 2298974,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/562",
      "updated_at" : "2011-10-05T15:12:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2298974",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I appreciate that you're trying to optimize bitcoin, but please don't add any fixed-sized buffers! I rather have somewhat slower code than potential security holes.\r\n",
      "created_at" : "2011-10-23T12:16:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/562#issuecomment-2495061",
      "id" : 2495061,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/562",
      "updated_at" : "2011-10-23T12:17:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2495061",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Fixed-size buffers are not a security hole, only misuse of them. That being said, I have not checked over this patch for security checks either.",
      "created_at" : "2011-10-28T23:27:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/562#issuecomment-2562424",
      "id" : 2562424,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/562",
      "updated_at" : "2011-10-28T23:27:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2562424",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I think we all know that already Luke. The thing is, people make mistakes,\nand they are usually not all found on the first time around code\ninspection. It's playing with fire, in a way, and should be restricted imo\nto direct interaction with hw, OS-level libraries and such stuff. I'd\nprefer to err on the safe side in financial sw.",
      "created_at" : "2011-10-29T06:58:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/562#issuecomment-2563775",
      "id" : 2563775,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/562",
      "updated_at" : "2011-10-29T06:58:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2563775",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Sure, but that ignores the fact that this code has had a lot of real-world production testing in probably 90% of pools (and even *required* by PSJ)",
      "created_at" : "2011-10-29T12:50:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/562#issuecomment-2564745",
      "id" : 2564745,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/562",
      "updated_at" : "2011-10-29T12:50:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2564745",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I don't understand the concern here. If you look in the context of this patch, there's plenty of fixed buffer usage already.\r\n\r\nWhat would make sense is to instead make the buffer size a result of a constexpr calculation, but in this case that really seems like overkill.",
      "created_at" : "2011-11-02T22:20:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/562#issuecomment-2610649",
      "id" : 2610649,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/562",
      "updated_at" : "2011-11-02T22:20:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2610649",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/128969?v=3",
         "events_url" : "https://api.github.com/users/cgaebel/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cgaebel/followers",
         "following_url" : "https://api.github.com/users/cgaebel/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cgaebel/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cgaebel",
         "id" : 128969,
         "login" : "cgaebel",
         "organizations_url" : "https://api.github.com/users/cgaebel/orgs",
         "received_events_url" : "https://api.github.com/users/cgaebel/received_events",
         "repos_url" : "https://api.github.com/users/cgaebel/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cgaebel/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cgaebel/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cgaebel"
      }
   },
   {
      "body" : "That's exactly my concern. I'd like to reduce fixed buffer use not increase\nit. C++ has introduced all kinds of stuff exactly to not have to muck\naround with them.\n\nAlso, this does not completely replace the old HexStr function, so this\nmeans that the source will now be littered with not one but two hex\nconversion utility functions.\n\nI would prefer if he just optimized the current HexStr function, which is\nvery possible in a similar way, as it seems to be the strprintf and string\nconcatenation that make it slow. Writing to a fixed buffer instead of\nreturning a std::string is likely a unnecessary micro-optimization.",
      "created_at" : "2011-11-02T22:38:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/562#issuecomment-2610850",
      "id" : 2610850,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/562",
      "updated_at" : "2011-11-02T22:38:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2610850",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I have a few problems with this code, starting with it doesn't follow the bitcoin coding conventions (e.g. nLen instead of len).  And I agree with laanwj RE: optimizing HexStr instead.\r\n\r\nBut I'll go back to my original question:  does this have any measurable effect on performance if the bypass-JSON-and-return-a-cached-response-to-getwork patch is applied?  What is the performance of getwork with/without:\r\n  Just this patch\r\n  Just the bypass-JSON-cache-getwork patch\r\n  Both this AND the cache-getwork patch\r\n\r\nI think it is a bad idea to add another (potentially unsafe if you use it wrong!) way of converting to hex, unless it gives a really significant (on the order of \"you can serve twice as many getwork requests with one bitcoind\") performance advantage.\r\n\r\n",
      "created_at" : "2011-12-02T15:29:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/562#issuecomment-2991349",
      "id" : 2991349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/562",
      "updated_at" : "2011-12-02T15:29:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2991349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Pull #565 includes performance testing for this.",
      "created_at" : "2012-01-11T21:52:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/562#issuecomment-3454336",
      "id" : 3454336,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/562",
      "updated_at" : "2012-01-11T21:52:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3454336",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
