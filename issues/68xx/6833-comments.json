[
   {
      "body" : "This is likely due to the recent high volume of transactions filling the\nmemory pool.\n\nThe recently released 0.11.1 versio  changes the default relay limit to\ntemporarily combat this. You can also change this in the config file or\ncommand line.\n\nFor 0.12, a more thorough solution that limits the size of the mempool is\nbeing worked on.\n",
      "created_at" : "2015-10-15T15:22:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6833#issuecomment-148420236",
      "id" : 148420236,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6833",
      "updated_at" : "2015-10-15T15:22:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/148420236",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "You can check the mempool with `getmempoolinfo`.",
      "created_at" : "2015-10-15T15:22:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6833#issuecomment-148420485",
      "id" : 148420485,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6833",
      "updated_at" : "2015-10-15T15:22:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/148420485",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "If you don't want to upgrade (for whatever reason), AFAIK `-minrelaytxfee=0.00005` as a CLI or config option should put you in line with https://github.com/bitcoin/bitcoin/pull/6793 as @sipa mentioned.\r\n\r\n**edit:** bitcoin, not satoshis",
      "created_at" : "2015-10-15T21:19:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6833#issuecomment-148524158",
      "id" : 148524158,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6833",
      "updated_at" : "2015-10-16T00:06:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/148524158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "thanks for your reactions and tips.\r\nMy setting was 'minrelaytxfee = 0.00001'. Will study the effect of increasing that and report.\r\nResult:\r\nwith setting of 5500 Satoshi for relay tx fee the memory still goes to next to nothing. it has only 22 MB left now. \r\nSo this relay issue may be one of the problems but cannot discard memory leaks in the software yet.\r\nLooking via 'top' to the memory use per pid after restarting bitcoin:\r\nat first very high CPU usage but after a minute or so that reduces to typically 2-5 % of CPU.\r\n\r\nAfter appr. 1 minute memory usage by Bitcoin is 7%\r\nAfter 3 hours it is 35% and all that is available.\r\nAfter 7 hours 'top' reports 43% memory for bitcoin.\r\n\r\nOutput of 'getmempoolinfo' after 7 hours:\r\nKey \t               Value\r\nsize\t                3118\r\nbytes\t  7224457\r\nusage\t12790064\r\n\r\nAny ideas what else to try to make Bitcoin behave memory-wise?\r\n\r\n![bitcoin-ram-use](https://cloud.githubusercontent.com/assets/6975989/10541289/b7fb4cf2-7407-11e5-9cea-0cc955acc4d1.png)\r\n\r\n\r\n\r\n\r\n",
      "created_at" : "2015-10-15T23:37:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6833#issuecomment-148552128",
      "id" : 148552128,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6833",
      "updated_at" : "2015-10-16T12:13:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/148552128",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6975989?v=3",
         "events_url" : "https://api.github.com/users/wwortel/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wwortel/followers",
         "following_url" : "https://api.github.com/users/wwortel/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wwortel/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wwortel",
         "id" : 6975989,
         "login" : "wwortel",
         "organizations_url" : "https://api.github.com/users/wwortel/orgs",
         "received_events_url" : "https://api.github.com/users/wwortel/received_events",
         "repos_url" : "https://api.github.com/users/wwortel/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wwortel/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wwortel/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wwortel"
      }
   },
   {
      "body" : "Have been experimenting with setting the option '-disablewallet' when restarting bitcoind.\r\nWith the wallet disabled have tried the min. tx relay fee at 1000 Satoshi and at 5000.\r\nEffects:\r\nIn both cases memory usage stays in the 5-7  %MEM range as reported by 'top'. \r\nWith 1000 S. setting CPU % time goes crazy, with 5000S. it stays at a few percent CPU after the initial minutes of resyncing. Will look again in a few hours but if memory creeps up it is at a much much slower rate than with the wallet active. So is the wallet software leaking memory?\r\nAfter some 2.5 hours: 10.4 %MEM and %CPU 5-7 with short bursts to 99.9%. All with wallet disabled. ",
      "created_at" : "2015-10-16T13:07:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6833#issuecomment-148711946",
      "id" : 148711946,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6833",
      "updated_at" : "2015-10-16T16:45:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/148711946",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6975989?v=3",
         "events_url" : "https://api.github.com/users/wwortel/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wwortel/followers",
         "following_url" : "https://api.github.com/users/wwortel/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wwortel/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wwortel",
         "id" : 6975989,
         "login" : "wwortel",
         "organizations_url" : "https://api.github.com/users/wwortel/orgs",
         "received_events_url" : "https://api.github.com/users/wwortel/received_events",
         "repos_url" : "https://api.github.com/users/wwortel/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wwortel/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wwortel/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wwortel"
      }
   },
   {
      "body" : "@wwortel probably best just to data dump (graphs are good too) of memory usage over time to show case if this is an actual issue,  and maybe compare with the different options.",
      "created_at" : "2015-10-17T04:08:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6833#issuecomment-148884301",
      "id" : 148884301,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6833",
      "updated_at" : "2015-10-17T04:08:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/148884301",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "@dcousens:\r\nTnx. The results show that disabling the wallet only delays the occupation of all available memory by a little. In both cases, with and without wallet, in the end only a few tens of k of RAM memory are left free. It takes between 1.5 and 2 hours for bitcoind to have confiscated appr. 1 GB of RAM.\r\n![bitcoind-with-wallet](https://cloud.githubusercontent.com/assets/6975989/10559551/5f7be58e-74eb-11e5-9cf5-c35541636c8d.png)\r\n![bitcoind-no-wallet](https://cloud.githubusercontent.com/assets/6975989/10559513/2288ed30-74ea-11e5-9262-d7199dd9dba8.png)\r\n\r\n",
      "created_at" : "2015-10-17T09:39:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6833#issuecomment-148899164",
      "id" : 148899164,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6833",
      "updated_at" : "2015-10-17T15:23:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/148899164",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6975989?v=3",
         "events_url" : "https://api.github.com/users/wwortel/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wwortel/followers",
         "following_url" : "https://api.github.com/users/wwortel/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wwortel/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wwortel",
         "id" : 6975989,
         "login" : "wwortel",
         "organizations_url" : "https://api.github.com/users/wwortel/orgs",
         "received_events_url" : "https://api.github.com/users/wwortel/received_events",
         "repos_url" : "https://api.github.com/users/wwortel/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wwortel/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wwortel/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wwortel"
      }
   },
   {
      "body" : "It looks like the graphs above don't agree with your initial statement?\r\n\r\n> After starting bitcoin as a daemon it takes about 1 GB of memory from the 3 GB my VPS has available.\r\n> But some 3 hours later is has occupied an additional 1 GB and this continues creeping down until only hardly anything has been left available.\r\n\r\n3 hours later, only 1GB is still in use (~30%)?",
      "created_at" : "2015-10-17T23:38:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6833#issuecomment-148961009",
      "id" : 148961009,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6833",
      "updated_at" : "2015-10-17T23:38:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/148961009",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "It depends on the amount of memory becoming available after having stopped bitcoind. That was more the first time than later times. As the VPS is live for other processes cannot do a reboot all the time. First time it started from ~2 GB given as free. Or is there a command to make any unused memory available again without a reboot? Doubt that it makes any difference. 1 or 2 GB, bitcoind will eat it all. Setting the min. tx relay fee to 5.0 E-5 has not stopped this memory hunger. With the 1 GB taken by bitcoind in the graphs above there is nothing left for other programmes. \r\nWhat I find strange is that when I run 'top' and sort for memory use %MEM that, apart from the thirty-some percent taken by bitcoind, no other processes claim the rest. A few 0.1 and 0,2 % for things like httpd but nothing that amounts up to the other 70%. ",
      "created_at" : "2015-10-18T07:51:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6833#issuecomment-148987464",
      "id" : 148987464,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6833",
      "updated_at" : "2015-10-18T08:02:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/148987464",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6975989?v=3",
         "events_url" : "https://api.github.com/users/wwortel/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wwortel/followers",
         "following_url" : "https://api.github.com/users/wwortel/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wwortel/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wwortel",
         "id" : 6975989,
         "login" : "wwortel",
         "organizations_url" : "https://api.github.com/users/wwortel/orgs",
         "received_events_url" : "https://api.github.com/users/wwortel/received_events",
         "repos_url" : "https://api.github.com/users/wwortel/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wwortel/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wwortel/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wwortel"
      }
   },
   {
      "body" : "> Doubt that it makes any difference. 1, 2, or three GB, bitcoind will eat it all.\r\n\r\nHow are you setting these caps?   Can you show the data for the 3 GB case?  ~~I'm not seeing this behaviour on my instance at all.~~",
      "created_at" : "2015-10-18T08:03:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6833#issuecomment-148988060",
      "id" : 148988060,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6833",
      "updated_at" : "2015-10-18T08:08:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/148988060",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   }
]
