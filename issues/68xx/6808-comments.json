[
   {
      "body" : "You still have to bootstrap somehow. If your addrman has entries, it should be waiting 11 seconds before it bothers running the dnsseed connect stuff. We could maybe extend the 11 seconds if you set onlynet=tor, but I'm not sure what else you're suggesting be done?",
      "created_at" : "2015-10-12T20:07:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6808#issuecomment-147505715",
      "id" : 147505715,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6808",
      "updated_at" : "2015-10-12T20:07:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/147505715",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Right - it shouldn't connect to ipv4/ipv6 dnsseeds if `onlynet=tor`. That's surprising behavior.\r\n\r\nIt's also unnecessary, there are some hardcoded onion seeds in `src/chainparamsseeds.h` that it can use.",
      "created_at" : "2015-10-12T20:30:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6808#issuecomment-147511738",
      "id" : 147511738,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6808",
      "updated_at" : "2015-10-12T20:30:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/147511738",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I'm not actually sure we shouldn't connect to them - its rather easy for the hardcoded onion seeds to go down, then we're stuck with never being able to sync? We should maybe use the hardcoded nodes first and give ourselves more time to find a connection, but I'm not sure it should be turned off entirely.",
      "created_at" : "2015-10-12T21:20:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6808#issuecomment-147525899",
      "id" : 147525899,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6808",
      "updated_at" : "2015-10-12T21:20:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/147525899",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "People *choose* to use onlynet=tor. It's not a default in any circumstances.\r\nYes, the consequence may be that it's harder to find peers, but the user should take that into account. The idea is to avoid using exit nodes.\r\n\r\nAn preferable option would be to have one or more 'DNS seeds' (a misnomer in this case as no DNS is used, it's a one-shot node connection) on .onion as hidden service.\r\n",
      "created_at" : "2015-10-12T21:38:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6808#issuecomment-147529064",
      "id" : 147529064,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6808",
      "updated_at" : "2015-10-12T21:45:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/147529064",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I know at least some of the DNS seeds have Tor running (to scan .onion peers) - so adding a hidden service that redirects to their 8333 port may be a small step.\r\nPing @sipa @jonasschnelli ",
      "created_at" : "2015-10-13T08:00:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6808#issuecomment-147637513",
      "id" : 147637513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6808",
      "updated_at" : "2015-10-13T08:01:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/147637513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Huh? You mean doing DNS-over-TCP to a .onion? Or do you suggest a new service for such a thing?",
      "created_at" : "2015-10-13T08:42:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6808#issuecomment-147649073",
      "id" : 147649073,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6808",
      "updated_at" : "2015-10-13T08:42:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/147649073",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I think he means using a oneshot P2P connection to the onion address\n(connecf, getaddr, wait for addr response, disconnect).\n",
      "created_at" : "2015-10-13T08:45:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6808#issuecomment-147649652",
      "id" : 147649652,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6808",
      "updated_at" : "2015-10-13T08:45:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/147649652",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Yes, but he said you connect to the DNS Seed over Tor. That makes no sense - the DNS Seeds are not designed to listen or provide addr message responses. Are y'all suggesting adding this?",
      "created_at" : "2015-10-13T08:50:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6808#issuecomment-147651025",
      "id" : 147651025,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6808",
      "updated_at" : "2015-10-13T08:50:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/147651025",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "If you 'connect' to a DNS seed over Tor, your exit node will resolve the\nname for you, and forward the connection there, so you actually get a\nconnection to one of the *results* of the seed, not to the seeder itself.\n",
      "created_at" : "2015-10-13T08:55:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6808#issuecomment-147652505",
      "id" : 147652505,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6808",
      "updated_at" : "2015-10-13T08:55:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/147652505",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "... so the suggestion here is to just do oneshot connections to a few\nhardcoded .onion addresses instead of actually using a seeder.\n",
      "created_at" : "2015-10-13T08:56:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6808#issuecomment-147652830",
      "id" : 147652830,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6808",
      "updated_at" : "2015-10-13T08:56:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/147652830",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Yes, that is what I thought we were talking about, hence why I was confused by @laanwj's mention of DNS seeds exposing their 8333 port...",
      "created_at" : "2015-10-13T09:01:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6808#issuecomment-147653773",
      "id" : 147653773,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6808",
      "updated_at" : "2015-10-13T09:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/147653773",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I agree we should make onlynet=tor do what it says: connect only to onion peers. If it cannot because it doesn't find any, or because the Tor instance is broken, or because the clock is skewed, or whatever, so be it. onlynet=tor is not on by default and it has a clear name, so whoever is using it knows what he's doing. \r\n\r\n@laanwj I am running 3 onlynet=tor full nodes for quite some time, and they have never connected to a clearnet peer as far as I was able to see. I use addnode=foo.onion in bitcoin.conf along with onlynet=tor so I am guessing that is why it has no problems bootstrapping.\r\n\r\nUnfortunately Tor only supports resolving anonymously DNS A records at Exit node end. If it supported looking up of more types of records and validating DNSSEC signatures, we could add hostnames of onion peers in TXT records to the main hardocded clearnet (normal DNS) seed nodes and an onlynet=tor node would just take the onion hostnames from there and connect to them without actually establishing connections to the clearnet seed nodes. There is a proposal for this so this shouldn't happen too far way in the future, hopefully. Let me know if my onion nodes can help in any way.",
      "created_at" : "2015-10-13T22:35:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6808#issuecomment-147873250",
      "id" : 147873250,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6808",
      "updated_at" : "2015-10-13T22:35:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/147873250",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6549887?v=3",
         "events_url" : "https://api.github.com/users/gits7r/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gits7r/followers",
         "following_url" : "https://api.github.com/users/gits7r/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gits7r/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gits7r",
         "id" : 6549887,
         "login" : "gits7r",
         "organizations_url" : "https://api.github.com/users/gits7r/orgs",
         "received_events_url" : "https://api.github.com/users/gits7r/received_events",
         "repos_url" : "https://api.github.com/users/gits7r/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gits7r/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gits7r/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gits7r"
      }
   }
]
