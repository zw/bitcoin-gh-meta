{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "### Describe the issue\r\n\r\nWhen I opened the Bitcoin Core program, the GUI gets to \"Done loading\" and then hangs for about 5 minutes. \r\n\r\n### Can you reliably reproduce the issue?\r\nYes. After getting through the non responsiveness and shutting down bitcoin core properly, and restarting, I get the same behavior (attempted repro twice so far).\r\n\r\n#### If so, please list the steps to reproduce below:\r\n1. Open Bitcoin Core - Note that my state is having caught up with 66.43% of the blockchain and having just installed v0.14.2 over v0.14.1\r\n\r\n### Expected behaviour\r\nThe GUI should continue to be responsive. It should only say \"Done loading\" when its actually done loading (ie the main GUI should open immediately).\r\n\r\n### Actual behaviour\r\nAbout  2 minutes 30 seconds after \"Done loading\" appears, the GUI locks up (Not responding listed in the task manager). The \"Done loading\" message remains there until the main GUI appears.\r\n\r\n### What version of bitcoin-core are you using?\r\nBitcoin Core version v0.14.2 (64-bit), official\r\n\r\n### Machine specs:\r\n- OS: Windows 8.1 64-bit\r\n- CPU: Intel Core i7-4702HQ  @ 2.2 GHz\r\n- RAM: 8 GB\r\n- Disk size: 4TB HD for the blockchain, 250 GB SSD for the program and other (smaller) data\r\n- Network Speed: 50 Mbps\r\n\r\n### Any extra information that might be useful in the debugging process.\r\nHere's my debug.log I grabbed while it's non responsive. Note that I did notice some logs were written while the GUI is unresponsive (note the weird empty space is exactly as it was in the log): \r\n\r\n```\r\n2017-06-21 19:40:25 \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n2017-06-21 19:40:25 Bitcoin version v0.14.2\r\n2017-06-21 19:40:25 InitParameterInteraction: parameter interaction: -whitelistforcerelay=1 -> setting -whitelistrelay=1\r\n2017-06-21 19:40:25 Assuming ancestors of block 00000000000000000013176bf8d7dfeab4e1db31dc93bc311b436e82ab226b90 have valid signatures.\r\n2017-06-21 19:40:25 GUI: \"registerShutdownBlockReason: Successfully registered: Bitcoin Core didn't yet exit safely...\"\r\n2017-06-21 19:40:25 Default data directory C:\\Users\\fresheneesz\\AppData\\Roaming\\Bitcoin\r\n2017-06-21 19:40:25 Using data directory H:\\Bitcoin\r\n2017-06-21 19:40:25 Using config file H:\\Bitcoin\\bitcoin.conf\r\n2017-06-21 19:40:25 Using at most 125 automatic connections (2048 file descriptors available)\r\n2017-06-21 19:40:25 Using 32 MiB out of 32 requested for signature cache, able to store 1048576 elements\r\n2017-06-21 19:40:25 Using 4 threads for script verification\r\n2017-06-21 19:40:25 Using BerkeleyDB version Berkeley DB 4.8.30: (April  9, 2010)\r\n2017-06-21 19:40:25 scheduler thread start\r\n2017-06-21 19:40:25 Using wallet wallet.dat\r\n2017-06-21 19:40:25 init message: Verifying wallet...\r\n2017-06-21 19:40:25 CDBEnv::Open: LogDir=H:\\Bitcoin\\database ErrorFile=H:\\Bitcoin\\db.log\r\n2017-06-21 19:40:26 Bound to [::]:8333\r\n2017-06-21 19:40:26 Bound to 0.0.0.0:8333\r\n2017-06-21 19:40:26 Cache configuration:\r\n2017-06-21 19:40:26 * Using 2.0MiB for block index database\r\n2017-06-21 19:40:26 * Using 8.0MiB for chain state database\r\n2017-06-21 19:40:26 * Using 440.0MiB for in-memory UTXO set (plus up to 286.1MiB of unused mempool space)\r\n2017-06-21 19:40:26 init message: Loading block index...\r\n2017-06-21 19:40:26 Opening LevelDB in H:\\Bitcoin\\blocks\\index\r\n2017-06-21 19:40:26 Opened LevelDB successfully\r\n2017-06-21 19:40:26 Using obfuscation key for H:\\Bitcoin\\blocks\\index: 0000000000000000\r\n2017-06-21 19:40:26 Opening LevelDB in H:\\Bitcoin\\chainstate\r\n2017-06-21 19:40:26 Opened LevelDB successfully\r\n2017-06-21 19:40:26 Using obfuscation key for H:\\Bitcoin\\chainstate: 2e24172acafd25a5\r\n2017-06-21 19:40:31 LoadBlockIndexDB: last block file = 614\r\n2017-06-21 19:40:31 LoadBlockIndexDB: last block file info: CBlockFileInfo(blocks=156, size=118252833, heights=427663...428149, time=2016-08-31...2016-09-03)\r\n2017-06-21 19:40:31 Checking all blk files are present...\r\n2017-06-21 19:40:31 LoadBlockIndexDB: transaction index disabled\r\n2017-06-21 19:40:31 LoadBlockIndexDB: hashBestChain=00000000000000000251276de9928a6720e7d8485ed1dcea93fc59cd481d57e2 height=428062 date=2016-09-03 05:45:28 progress=0.664302\r\n2017-06-21 19:40:31 init message: Rewinding blocks...\r\n2017-06-21 19:40:33 init message: Verifying blocks...\r\n2017-06-21 19:40:33 Verifying last 6 blocks at level 3\r\n2017-06-21 19:40:33 [0%]...[16%]...[33%]...[50%]...[66%]...[83%]...[99%]...[DONE].\r\n2017-06-21 19:40:34 No coin database inconsistencies in last 7 blocks (5026 transactions)\r\n2017-06-21 19:40:34  block index            8006ms\r\n2017-06-21 19:40:34 init message: Loading wallet...\r\n2017-06-21 19:40:34 nFileVersion = 140200\r\n2017-06-21 19:40:34 Keys: 102 plaintext, 0 encrypted, 102 w/ metadata, 102 total\r\n2017-06-21 19:40:34  wallet                   55ms\r\n2017-06-21 19:40:34 setKeyPool.size() = 100\r\n2017-06-21 19:40:34 mapWallet.size() = 0\r\n2017-06-21 19:40:34 mapAddressBook.size() = 1\r\n2017-06-21 19:40:34 mapBlockIndex.size() = 472291\r\n2017-06-21 19:40:34 nBestHeight = 428062\r\n2017-06-21 19:40:34 torcontrol thread start\r\n2017-06-21 19:40:34 AddLocal([2001:0:9d38:90d7:204a:599:b399:e59e]:8333,1)\r\n2017-06-21 19:40:34 Discover: btbot - 2001:0:9d38:90d7:204a:599:b399:e59e\r\n2017-06-21 19:40:34 init message: Loading addresses...\r\n2017-06-21 19:40:34 UpdateTip: new best=000000000000000002acb7baee528ca1ceb1baa1e353f0128c79c19da41f061f height=428063 version=0x20000000 log2_work=85.218671 tx=153600730 date='2016-09-03 05:50:12' progress=0.664304 cache=1.1MiB(1192tx)\r\n2017-06-21 19:40:34 Loaded 59995 addresses from peers.dat  345ms\r\n2017-06-21 19:40:34 init message: Loading banlist...\r\n2017-06-21 19:40:34 init message: Starting network threads...\r\n2017-06-21 19:40:34 net thread start\r\n2017-06-21 19:40:34 addcon thread start\r\n2017-06-21 19:40:34 dnsseed thread start\r\n2017-06-21 19:40:34 init message: Done loading\r\n2017-06-21 19:40:34 msghand thread start\r\n2017-06-21 19:40:34 opencon thread start\r\n2017-06-21 19:40:35 UpdateTip: new best=000000000000000002504642e6ff9b1577af550c269f4537ad5b6e7f77247c25 height=428064 version=0x20000000 log2_work=85.218702 tx=153603533 date='2016-09-03 06:45:03' progress=0.664316 cache=5.8MiB(6990tx)\r\n2017-06-21 19:40:35 GUI: Platform customization: \"windows\"\r\n2017-06-21 19:40:35 GUI: PaymentServer::LoadRootCAs: Loaded  37  root certificates\r\n2017-06-21 19:40:45 Loading addresses from DNS seeds (could take a while)\r\n2017-06-21 19:40:51 95 addresses found from DNS seeds\r\n2017-06-21 19:40:51 dnsseed thread exit\r\n2017-06-21 19:41:36 UpdateTip: new best=0000000000000000024f493cccb8b4bb3491a2d15188188ebc773d36b2297946 height=428065 version=0x20000000 log2_work=85.218732 tx=153604452 date='2016-09-03 06:48:58' progress=0.664319 cache=7.7MiB(13053tx)\r\n```\r\n\r\n\r\nAfter the GUI became responsive again, I checked the logs again and found these additional ones:\r\n```\r\n2017-06-21 19:42:02 UpdateTip: new best=0000000000000000021fa6cb9f756d3e47bac8dc6c037132281e4c314469479b height=428066 version=0x20000000 log2_work=85.218763 tx=153606092 date='2016-09-03 07:05:13' progress=0.664326 cache=14.4MiB(16353tx)\r\n2017-06-21 19:42:02 receive version message: /Satoshi:0.14.0/: version 70015, blocks=472292, us=76.102.26.97:55513, peer=0\r\n2017-06-21 19:42:38 version handshake timeout from 1\r\n2017-06-21 19:42:44 UpdateTip: new best=000000000000000001bef2c3fb53729c1ce61d6dd4bba3607432ec02760a4e4c height=428067 version=0x20000000 log2_work=85.218793 tx=153607101 date='2016-09-03 07:11:05' progress=0.664330 cache=18.4MiB(19877tx)\r\n2017-06-21 19:43:22 UpdateTip: new best=0000000000000000007f9759c9eee376e3432e300b43aea53d1371e1fb143961 height=428068 version=0x20000000 log2_work=85.218823 tx=153607814 date='2016-09-03 07:16:39' progress=0.664333 cache=34.2MiB(22708tx)\r\n2017-06-21 19:43:22 socket recv error An established connection was aborted by the software in your host machine.  (10053)\r\n2017-06-21 19:43:30 UpdateTip: new best=000000000000000000194febb05d8d50e27721589815c29e9079a0c6ce84dca4 height=428069 version=0x20000000 log2_work=85.218854 tx=153608278 date='2016-09-03 07:20:14' progress=0.664335 cache=34.4MiB(23422tx)\r\n2017-06-21 19:43:51 version handshake timeout from 3\r\n2017-06-21 19:44:13 Pre-allocating up to position 0x800000 in rev00614.dat\r\n2017-06-21 19:44:14 UpdateTip: new best=000000000000000001b5744ee46b55e194dfbfab4e04d2551c35e759bcada36b height=428070 version=0x20000000 log2_work=85.218884 tx=153610301 date='2016-09-03 07:41:36' progress=0.664343 cache=37.0MiB(27896tx)\r\n2017-06-21 19:44:14 receive version message: /Satoshi:0.14.1(UASF-SegWit-BIP148)/: version 70015, blocks=472292, us=76.102.26.97:55649, peer=3\r\n2017-06-21 19:44:14 receive version message: /Satoshi:0.13.99/: version 70014, blocks=472292, us=[2001:0:9d38:90d7:204a:599:b399:e59e]:55709, peer=4\r\n2017-06-21 19:44:44 GUI:   OpenType support missing for script 11\r\n2017-06-21 19:44:44 GUI:   OpenType support missing for script 11\r\n2017-06-21 19:44:44 GUI:   OpenType support missing for script 11\r\n2017-06-21 19:44:44 GUI:   OpenType support missing for script 11\r\n2017-06-21 19:44:44 GUI:   OpenType support missing for script 11\r\n2017-06-21 19:44:44 GUI:   OpenType support missing for script 11\r\n2017-06-21 19:44:44 GUI:   OpenType support missing for script 16\r\n2017-06-21 19:44:44 GUI:   OpenType support missing for script 16\r\n2017-06-21 19:44:44 GUI:   OpenType support missing for script 16\r\n2017-06-21 19:44:44 GUI:   OpenType support missing for script 16\r\n2017-06-21 19:44:44 GUI:   OpenType support missing for script 16\r\n2017-06-21 19:44:44 GUI:   OpenType support missing for script 16\r\n2017-06-21 19:45:02 UpdateTip: new best=0000000000000000037dd64902467e3acb6430345e7fdbfef4f083ef94902a06 height=428071 version=0x20000000 log2_work=85.218914 tx=153611882 date='2016-09-03 07:51:29' progress=0.664350 cache=42.0MiB(32552tx)\r\n2017-06-21 19:45:02 version handshake timeout from 5\r\n2017-06-21 19:45:08 UpdateTip: new best=000000000000000003a3764345d934547c9ac733f56ff4935c98937a6b1a355c height=428072 version=0x20000000 log2_work=85.218945 tx=153612228 date='2016-09-03 07:53:22' progress=0.664351 cache=42.5MiB(33203tx)\r\n2017-06-21 19:45:08 receive version message: /Satoshi:0.14.1/: version 70015, blocks=472292, us=76.102.26.97:55806, peer=6\r\n2017-06-21 19:45:32 version handshake timeout from 6\r\n2017-06-21 19:45:46 UpdateTip: new best=00000000000000000029fd454e3a6012529caeab947a2a2a4e9aa4f92ac0acf0 height=428073 version=0x20000000 log2_work=85.218975 tx=153613209 date='2016-09-03 07:59:02' progress=0.664355 cache=46.4MiB(36600tx)\r\n2017-06-21 19:46:02 UpdateTip: new best=0000000000000000000d4c504f9826e1b1afb428f7ad3eb902ca988072d2f4b9 height=428074 version=0x20000000 log2_work=85.219006 tx=153613749 date='2016-09-03 08:01:38' progress=0.664357 cache=51.0MiB(38258tx)\r\n2017-06-21 19:46:23 UpdateTip: new best=000000000000000004f973fa814cb6649cf1c6cb6a188ff726d4d4209cd71ee9 height=428075 version=0x20000000 log2_work=85.219036 tx=153614068 date='2016-09-03 08:03:24' progress=0.664358 cache=54.2MiB(39269tx)\r\n2017-06-21 19:46:23 version handshake timeout from 7\r\n2017-06-21 19:46:24 UpdateTip: new best=0000000000000000035fa95ebe65921b4401dc15d6579398b13df118539f58da height=428076 version=0x20000000 log2_work=85.219066 tx=153614136 date='2016-09-03 08:03:39' progress=0.664359 cache=54.3MiB(39406tx)\r\n2017-06-21 19:46:24 receive version message: /Satoshi:0.14.1/: version 70015, blocks=472292, us=76.102.26.97:55861, peer=7\r\n2017-06-21 19:47:16 UpdateTip: new best=00000000000000000349363ff458bd004a3c68b210685b440e51e7ef03453a3f height=428077 version=0x30000000 log2_work=85.219097 tx=153616131 date='2016-09-03 08:27:53' progress=0.664367 cache=56.9MiB(44652tx)\r\n```\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 7,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10646/comments",
   "created_at" : "2017-06-21T19:48:51Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10646/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/10646",
   "id" : 237644971,
   "labels" : [
      {
         "color" : "02d7e1",
         "default" : false,
         "id" : 135946,
         "name" : "GUI",
         "node_id" : "MDU6TGFiZWwxMzU5NDY=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI"
      },
      {
         "color" : "884400",
         "default" : false,
         "id" : 234877,
         "name" : "Windows",
         "node_id" : "MDU6TGFiZWwyMzQ4Nzc=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Windows"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10646/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUyMzc2NDQ5NzE=",
   "number" : 10646,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Windows Gui becomes non responsive after \"Done loading\"",
   "updated_at" : "2018-01-21T22:04:09Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10646",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/149531?v=4",
      "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fresheneesz/followers",
      "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fresheneesz",
      "id" : 149531,
      "login" : "fresheneesz",
      "node_id" : "MDQ6VXNlcjE0OTUzMQ==",
      "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
      "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
      "repos_url" : "https://api.github.com/users/fresheneesz/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fresheneesz"
   }
}
