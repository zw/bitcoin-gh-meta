[
   {
      "body" : "I ran bitcoin core all day today, for 12 hours. It went from saying eta was 2 weeks to being 5 weeks. It only progressed maybe from 68% to 71.25% complete. \r\n\r\nI downloaded and validated the 20GB monero blockchain in just 3 hours. Why is it taking weeks to download and verify bitcoin's blockchain that is only 5 times as large? ",
      "created_at" : "2017-06-26T10:58:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-311027844",
      "id" : 311027844,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-06-26T10:58:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/311027844",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "Hmm, your system looks incredibly slow (are you running anything else which might be using disk IOPS and/or CPU in the background?). At 20:02:44 your node marked peer 1 as \"timed out, disconnect\" and at 20:03:11 you processed a message from it, which is likely an indication that your disk was pegged making the import thread take a while.\r\n\r\nI assume the Monero chain's ringsigs make it more CPU intensive than Bitcoin's (especially with assumevalid), so its not hugely surprising that Bitcoin may be slower to sync. You might try running on the SSD with -prune enabled.\r\n\r\nNote that -dbcache also has an overhead to flush, and so you may notice that its mostly \"not used\" during normal runtime except for brief spikes, this should be fixed in 0.15, which should be much less disk intensive during initial sync.",
      "created_at" : "2017-06-26T14:36:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-311078172",
      "id" : 311078172,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-06-26T14:36:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/311078172",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt I hope my system specs don't already look incredibly slow.. At this moment, ugh.. its saying \"Progress increase per hous: -0.00%\" - faaaantastic. And estimated time left until synced: \"%n second\". Its using 1.4MB/s of my disk (my total disk usage says 25%), about .8% cpu (total being 11%), and 45MB (total used being 86%). I don't have enough space on my SSD, unfortunately, to store the blockchain. \r\n\r\nSo would you guess that 0.15 will fix my problems? This has been a huge problem for me - I wouldn't have been able to use any bitcoin for the last month if I didn't accidentally leave a few in my coinbase account. This really makes me want to just switch to electrum or something. ",
      "created_at" : "2017-06-26T20:38:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-311175022",
      "id" : 311175022,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-06-26T20:38:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/311175022",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "You say you don't have enough space on your SSD. What are you using to store the blockchain and chainstate on? Anything USB connected will likely be painfully slow, for example.\r\n\r\n> So would you guess that 0.15 will fix my problems?\r\n\r\nNo, it most likely won't. 0.15 will improve memory usage and I/O performance a bit, but it's not going to make validation suddenly 100x faster. There seems to be something fundamentally broken here that makes it _so_ slow.",
      "created_at" : "2017-06-26T21:56:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-311193591",
      "id" : 311193591,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-06-27T00:30:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/311193591",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Could you run with `-debug=bench`? That may teach us something about where the wasted time goes.",
      "created_at" : "2017-06-27T00:26:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-311218294",
      "id" : 311218294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-06-27T00:26:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/311218294",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa I mentioned my 4TB external HD in my OP. It is USB connected, but copying from one USB drive to another (while they're both connected to the same hub) gives me over 20 MB/s transfer speed. Bitcoin Core isn't even using 1.5MB/s, so my hard drive transfer speed shouldn't be the issue here. \r\n\r\nHere's my debug log after starting with `-debug=bench`: http://btetrud.com/files/bitcoinDebug.log",
      "created_at" : "2017-07-02T02:22:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-312466574",
      "id" : 312466574,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-07-02T02:22:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312466574",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "@fresheneesz The problem with USB disks is not bandwidth, but operations per second. Copying files only needs a small number of operations (each accessing large blobs of sequential bytes on disk). Block validation needs to access 1000s of small pieces, each of  which results in a separate operation. USB disks are very limited in their number of operations per second, regardless of how many bytes are affected. This is also what your debug information shows; it's the fetching of inputs (the connect step in the log) which takes long, while signature validation is instant after that.\n\nI would strongly suggest running database on an internal disk, and either run in pruning mode, or just put the blocks on the external disk, but not the database.",
      "created_at" : "2017-07-02T02:36:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-312466993",
      "id" : 312466993,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-07-02T02:53:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312466993",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Hmm, some of that doesn't quite make sense to me.\r\n\r\n> USB disks are very limited in their number of operations per second\r\n\r\nThis doesn't describe latency. Why would USB disks be limited to operations per second? I get the feeling that either you're dumbing this down for me, or its just not accurate. The closest thing I can think you mean is that each disk access on a hard disk (regardless of whether its USB or not) requires moving the read head, which is kind of a geological-time operation in comparison to your CPU. Is this what you mean? \r\n\r\n> Block validation needs to access 1000s of small pieces\r\n\r\nYa, but I would have thought the software would store it so it can still grab large blocks to put into memory, then grab each small piece from memory, rather than trying to random-access every little bit from the disk. \r\n\r\n> just put the blocks on the external disk, but not the database.\r\n\r\nHow do I do this? ",
      "created_at" : "2017-07-03T05:59:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-312556022",
      "id" : 312556022,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-07-03T06:00:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312556022",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "I don't have a full explanation for you, but it's very commonly observed that the operations per second is much lower for USB disks (much worse than internal spinning disks). In general, any database system running on USB tends to have terrible performance.\n\nDisks tend to organize things in 512 to 4096 byte sections. Since the pieces of data we need to fetch for validation are only a few hundred bytes, each read tends to result in an independent fetch from disk.\n\nAs for how to move the database without moving blocks: In Linux, you can use a symlink to another directory for the $DATADIR/blocks directory. There is something similar in Windows, but I don't know the details.",
      "created_at" : "2017-07-03T06:07:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-312557034",
      "id" : 312557034,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-07-03T06:07:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312557034",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Ok, well from what you're telling me it sounds like bitcoin core could implement a couple performance improvements to fix this problem:\r\n* Store (more?) of the database in memory. How big is the database?\r\n* Have separate options (that you can set in the bitcoin options in the GUI) for location of the database vs the raw blockchain\r\n* Organize data on-disk so that single large sequential reads can gather multiple (hundreds) of the pieces of data needed for validation all at once and then run through them sequentially from memory.\r\n\r\nHonestly I'm surprised these sorts of optimizations aren't already done. Should I create a new issue for these optimizations? Who can comment on which of these would actually help performance or what other optimizations would be critical for this kind of issue? \r\n\r\nIts gonna start getting a ton more important to optimize this for external HD usage as the blockchain grows. Top of the line laptops still come with a baseline 256GB SSDs, and a 120GB blockchain is already straining the space on those things (+ OS and programs and games). And some people don't have top of the line laptops.. ",
      "created_at" : "2017-07-03T06:59:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-312564836",
      "id" : 312564836,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-07-03T06:59:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312564836",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "It looks like everything that doesn't include the `blocks` directry inside the data directory is less than 3GB for me. So why isn't my bitcoin core using more than 300MB of memory? It should be storing some of that db in there right? ",
      "created_at" : "2017-07-03T07:01:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-312565120",
      "id" : 312565120,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-07-03T07:01:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312565120",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "> Store (more?) of the database in memory.\r\n\r\n> So why isn't my bitcoin core using more than 300MB of memory? It should be storing some of that db in there right?\r\n\r\nThat's controlled by `-dbcache`, but only the pieces that are actually used - they still get loaded only when needed. Plus it reserves some of the dbcache for the time when flushes happen, to prevent briefly spike and make you run out of memory. This slack space is significantly reduced in 0.15; you're free to try master if you want to see if it improves things.\r\n\r\nThe database is stored in a special compact format on disk. When loaded into memory it's done an quickly-accessible way that is several times larger than the disk version. Loading the whole thing in memory needs around 8 GB.\r\n\r\nThere could perhaps be an option to load the whole database into memory at startup to speed things up later if you actually have that much dbcache configured.... but if not, you're still stuck with loading the bits and pieces as they are used, and slow disks will keep slowing you down.\r\n\r\n> Have separate options (that you can set in the bitcoin options in the GUI) for location of the database vs the raw blockchain\r\n\r\nYes, this would be possible.\r\n\r\n> Organize data on-disk so that single large sequential reads can gather multiple (hundreds) of the pieces of data needed for validation all at once and then run through them sequentially from memory.\r\n\r\nWe can't predict what pieces will be needed. They're organized by the txids of what inputs are spent from, and thus inherently randomly distributed.\r\n",
      "created_at" : "2017-07-03T07:11:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-312566822",
      "id" : 312566822,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-07-03T07:15:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312566822",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "> We can't predict what pieces will be needed. They're organized by the txids of what inputs are spent from, and thus inherently randomly distributed.\r\n\r\nI don't understand enough about what order the data needs to be accessed in, but why is it sorted by txid? Would it be possible to sort it by something more useful to blockchain validation? \r\n\r\nOk, so I attempted to symlink the `blocks` directory from my SSD to my external HD (which are both using NTFS). I copied the data directory (minus the blocks directory) to my SSD, cd'd in there and did:\r\n\r\n`mklink /D blocks H:\\Bitcoin\\blocks`\r\n\r\nI can confirm that its moving about 6 times as fast now. Where it was telling me 3 days til I'm synced, now its saying 12 hours. So a huge speed up! Not as much of a speed up as I had hoped, but the client is now using over 650MB of memory and 5-6 Mbps of network bandwidth (that last being relatively consistent with the 4x speedup). Also, the client starts up a ton faster (not a lot of waiting at \"Done loading\" anymore).\r\n\r\nSo thanks @sipa for helping me figure this out! Anything else I might be able to do to make it go any faster? \r\n\r\n",
      "created_at" : "2017-07-03T07:26:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-312569593",
      "id" : 312569593,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-07-03T07:29:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312569593",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "@fresheneesz Every transaction has a number of inputs, which refer to previous transaction outputs. Whenever a transaction is being validated, we need to look up the outputs being spent to figure out (1) whether they aren't spent already (2) which address/script they were sent to to verify the signature against and (3) to determine whether input and output amounts balance. There are over 50 million unspent outputs, and they all need to be individually addressable by the txid they were created it, because that's how they're referred to in inputs. As we don't know which outputs will be spent in future transaction, there is nothing better to index them by.",
      "created_at" : "2017-07-03T18:21:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-312708589",
      "id" : 312708589,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-07-03T18:24:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312708589",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I think this issue can be closed, as the whole way of doing caching is significantly rewritten in 0.15.",
      "created_at" : "2017-07-03T18:22:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-312708691",
      "id" : 312708691,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-07-03T18:23:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312708691",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Hmm ok.\r\n\r\nSo the fact that my problem has been solved (with significant effort and workarounds) doesn't solve the problem for the project. Maybe 0.15 means I would have never had this problem in the first place, but I'm not convinced. Since I solved this problem by separating the database from the blockchain storage, why don't I create an issue for making a clear way (via the GUI) to allow the user to separate those out on different drives? ",
      "created_at" : "2017-07-03T18:31:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-312710137",
      "id" : 312710137,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-07-03T18:31:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312710137",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "@fresheneesz Feel free to open a wishlist item to separate the chainstate location from block storage.\n\nHowever, neither of the things currently listed in this issue are what I consider bugs (it being slow on slow disks is inevitable, and I haven't seen evidence that the -dbcache value does not affect the cache size).",
      "created_at" : "2017-07-03T18:33:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-312710506",
      "id" : 312710506,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-07-03T18:33:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312710506",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "> it being slow on slow disks is inevitable\r\n\r\nBug or not, its a major usability flaw if the user isn't informed via the interface about critical performance decisions they have to make. And this is especially true when the GUI doesn't even support options that would allow users to easily optimize the client. So I'll close this and open up a wishlist item. Thanks for all your help!",
      "created_at" : "2017-07-03T18:36:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-312710978",
      "id" : 312710978,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-07-03T18:36:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312710978",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "> Bug or not, its a major usability flaw if the user isn't informed via the interface about critical performance decisions they have to make. And this is especially true when the GUI doesn't even support options that would allow users to easily optimize the client.\n\nI agree with all of that.",
      "created_at" : "2017-07-03T18:37:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-312711201",
      "id" : 312711201,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "updated_at" : "2017-07-03T18:37:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312711201",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> As for how to move the database without moving blocks: In Linux, you can use a symlink to another directory for the $DATADIR/blocks directory. There is something similar in Windows, but I don't know the details.\r\n\r\nIn case anyone finds this in the future, I used [this guide](https://bitcointalk.org/index.php?topic=4722244.0) to sync a node with the blocks on an external hard drive and the database on an internal hard drive on Windows, which fixed the problem and drastically improved my initial sync time. Running `-debug=bench`, the `connect block` time (which is the same bottleneck the user above had) reduced from around 21000ms to about 700-800ms.\r\n\r\nThank you @fresheneesz for posting the issue, @sipa for the explanation and advice, everyone else on the issue and to actuallytwolamas on bitcointalk for the guide. Cheers\r\n",
      "created_at" : "2019-12-20T11:26:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10647#issuecomment-567893446",
      "id" : 567893446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10647",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2Nzg5MzQ0Ng==",
      "updated_at" : "2019-12-20T11:26:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/567893446",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/33473721?v=4",
         "events_url" : "https://api.github.com/users/BravoIndia/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BravoIndia/followers",
         "following_url" : "https://api.github.com/users/BravoIndia/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BravoIndia/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BravoIndia",
         "id" : 33473721,
         "login" : "BravoIndia",
         "node_id" : "MDQ6VXNlcjMzNDczNzIx",
         "organizations_url" : "https://api.github.com/users/BravoIndia/orgs",
         "received_events_url" : "https://api.github.com/users/BravoIndia/received_events",
         "repos_url" : "https://api.github.com/users/BravoIndia/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BravoIndia/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BravoIndia/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BravoIndia"
      }
   }
]
