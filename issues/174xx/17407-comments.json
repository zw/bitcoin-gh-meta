[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343916849"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343916849"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Due to RPC requests only being served after `SetRPCWarmupFinished` even after mempool is switched to a struct initialized during init sequence, it shouldn't never be null (but better to be secure if we refactor our init logic)",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-07T22:53:02Z",
      "diff_hunk" : "@@ -518,7 +518,9 @@ static UniValue getrawmempool(const JSONRPCRequest& request)\n     if (!request.params[0].isNull())\n         fVerbose = request.params[0].get_bool();\n \n-    return MempoolToJSON(::mempool, fVerbose);\n+    const CTxMemPool* tx_pool = MempoolInstance();\n+    CHECK_NONFATAL(tx_pool);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343916849",
      "id" : 343916849,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzkxNjg0OQ==",
      "original_commit_id" : "ae73b972231084303ef436338786fac916209be7",
      "original_position" : 6,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 313691267,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343916849",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Going further in this direction, what would be the next steps ? Passing a mempool pointer to g_chainstate ?\r\n\r\ngood question. I have decided against that to not interwind chainstate (consensus) with mempool (policy). Otherwise this should be a member function: `CChainState::GetMempool`.",
      "created_at" : "2019-11-07T23:03:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-551306580",
      "id" : 551306580,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTMwNjU4MA==",
      "updated_at" : "2019-11-07T23:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551306580",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343920529"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343920529"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, obviously this should be adjusted when the mempool is truly optional. However I don't see the reason to add dead code right now.",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-07T23:04:40Z",
      "diff_hunk" : "@@ -518,7 +518,9 @@ static UniValue getrawmempool(const JSONRPCRequest& request)\n     if (!request.params[0].isNull())\n         fVerbose = request.params[0].get_bool();\n \n-    return MempoolToJSON(::mempool, fVerbose);\n+    const CTxMemPool* tx_pool = MempoolInstance();\n+    CHECK_NONFATAL(tx_pool);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343920529",
      "id" : 343920529,
      "in_reply_to_id" : 343916849,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzkyMDUyOQ==",
      "original_commit_id" : "ae73b972231084303ef436338786fac916209be7",
      "original_position" : 6,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 313695846,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343920529",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343922507"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343922507"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "My point was more currently the `CHECK_FATAL` is useless because RPC server accepting requests is the last thing in our init sequence. `CHECK_FATAL` hitting  would be a glaring logic error.",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-07T23:11:26Z",
      "diff_hunk" : "@@ -518,7 +518,9 @@ static UniValue getrawmempool(const JSONRPCRequest& request)\n     if (!request.params[0].isNull())\n         fVerbose = request.params[0].get_bool();\n \n-    return MempoolToJSON(::mempool, fVerbose);\n+    const CTxMemPool* tx_pool = MempoolInstance();\n+    CHECK_NONFATAL(tx_pool);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343922507",
      "id" : 343922507,
      "in_reply_to_id" : 343916849,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzkyMjUwNw==",
      "original_commit_id" : "ae73b972231084303ef436338786fac916209be7",
      "original_position" : 6,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 313698437,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343922507",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I have decided against that to not interwind chainstate (consensus) with mempool (policy)\r\n\r\nThat means keeping `::mempool` as a global on the long-term? Anyway better to process incrementally, curious of your next PRs on this.",
      "created_at" : "2019-11-07T23:15:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-551309887",
      "id" : 551309887,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTMwOTg4Nw==",
      "updated_at" : "2019-11-07T23:15:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551309887",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343924679"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343924679"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> CHECK_FATAL is useless\r\n\r\nCHECK_NONFATAL is not useless. Its exact use case it to be used when the condition is assumed to be always true. This is the case here. See https://dev.visucore.com/bitcoin/doxygen/check_8h.html#a46a3e27097aa5e94bbf62075bad7016f\r\n\r\nI plan to introduce a `-nomempool` command line option, which makes the mempool go away (optional). When I fail to update this line of code, it will turn into a logic error and will properly throw a bug report.",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-07T23:19:07Z",
      "diff_hunk" : "@@ -518,7 +518,9 @@ static UniValue getrawmempool(const JSONRPCRequest& request)\n     if (!request.params[0].isNull())\n         fVerbose = request.params[0].get_bool();\n \n-    return MempoolToJSON(::mempool, fVerbose);\n+    const CTxMemPool* tx_pool = MempoolInstance();\n+    CHECK_NONFATAL(tx_pool);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343924679",
      "id" : 343924679,
      "in_reply_to_id" : 343916849,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzkyNDY3OQ==",
      "original_commit_id" : "ae73b972231084303ef436338786fac916209be7",
      "original_position" : 6,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 313701191,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343924679",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> That means keeping ::mempool as a global on the long-term? Anyway better to process incrementally, curious of your next PRs on this.\r\n\r\nYes, but it will become `Optional<CTxMemPool>` (or similar)",
      "created_at" : "2019-11-07T23:21:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-551311633",
      "id" : 551311633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTMxMTYzMw==",
      "updated_at" : "2019-11-07T23:21:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551311633",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343960086"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343960086"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "If this function is supposed to replace uses of ::mempool in existing code, I think it'd be better to return a reference:\r\n\r\n```c++\r\nCTxMemPool& MempoolInstance()\r\n{\r\n    return ::mempool;\r\n}\r\n```\r\n\r\nnow and change it to:\r\n\r\n```c++\r\nCTxMemPool& MempoolInstance()\r\n{\r\n    CHECK_NONFATAL(::g_mempool);\r\n    return *::g_mempool;\r\n}\r\n```\r\n\r\nin the future when mempool is replaced by an optional or unique_ptr or similar.\r\n\r\nUsing a reference instead of a pointer for existing code is better because it won't burden the code with checking for nulls.\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/17407/files#issue-338259412\r\n\r\n> Finally, in the future someone might want to run a consensus-only full node\"\r\n\r\nIf new code is going to be added or existing code is going to be changed that expects the mempool to be null, this code could probably just access `g_mempool` directly instead of using the helper function. Or you could add different helper functions `CTxMemPool* OptionalMempoolInstance()` or `bool MempoolEnabled()` if referencing the global is a problem.",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-08T01:56:14Z",
      "diff_hunk" : "@@ -132,6 +132,10 @@ CTxMemPool mempool(&feeEstimator);\n /** Constant stuff for coinbase transactions we create: */\n CScript COINBASE_FLAGS;\n \n+CTxMemPool* MempoolInstance()\n+{\n+    return &::mempool;\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343960086",
      "id" : 343960086,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0Mzk2MDA4Ng==",
      "original_commit_id" : "ae73b972231084303ef436338786fac916209be7",
      "original_position" : 7,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 313745470,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343960086",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343963050"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343963050"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> If this function is supposed to replace uses of ::mempool in existing code, I think it'd be better to return a reference:\r\n\r\nIt is *not* supposed to replace ::mempool in existing code. It is supposed to be what you refer to as \"different helper function\". I am happy to rename it to `OptionalMempoolInstance`, but I think that that is a bit too verbose.",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-08T02:11:52Z",
      "diff_hunk" : "@@ -132,6 +132,10 @@ CTxMemPool mempool(&feeEstimator);\n /** Constant stuff for coinbase transactions we create: */\n CScript COINBASE_FLAGS;\n \n+CTxMemPool* MempoolInstance()\n+{\n+    return &::mempool;\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343963050",
      "id" : 343963050,
      "in_reply_to_id" : 343960086,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0Mzk2MzA1MA==",
      "original_commit_id" : "ae73b972231084303ef436338786fac916209be7",
      "original_position" : 7,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 313749191,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343963050",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343969798"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343969798"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Unclear what the next steps are here. It's hard to see how a function that doesn't log or check anything but just returns a pointer to a global could be useful, but it'd help if you could describe more literally how the function and global and function calls will change in the future.",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-08T02:48:56Z",
      "diff_hunk" : "@@ -132,6 +132,10 @@ CTxMemPool mempool(&feeEstimator);\n /** Constant stuff for coinbase transactions we create: */\n CScript COINBASE_FLAGS;\n \n+CTxMemPool* MempoolInstance()\n+{\n+    return &::mempool;\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r343969798",
      "id" : 343969798,
      "in_reply_to_id" : 343960086,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0Mzk2OTc5OA==",
      "original_commit_id" : "ae73b972231084303ef436338786fac916209be7",
      "original_position" : 7,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 313757717,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343969798",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Currently the mempool is a global that is initialized before the main function.\r\n\r\nThis PR doesn't appear to change that, but it sounds like this is the first step in some larger changes. Perhaps you could link to a branch that illustrates what you're planning to do next.",
      "created_at" : "2019-11-08T03:00:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-551363596",
      "id" : 551363596,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTM2MzU5Ng==",
      "updated_at" : "2019-11-08T03:34:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551363596",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok, will upload my branches tomorrow",
      "created_at" : "2019-11-08T03:06:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-551364928",
      "id" : 551364928,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTM2NDkyOA==",
      "updated_at" : "2019-11-08T03:06:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551364928",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2019-11-08T16:28:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-551895529",
      "id" : 551895529,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTg5NTUyOQ==",
      "updated_at" : "2019-11-08T22:00:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551895529",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok, added some more documentation about future code design in the first commit",
      "created_at" : "2019-11-08T17:51:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-551926300",
      "id" : 551926300,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTkyNjMwMA==",
      "updated_at" : "2019-11-08T17:51:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551926300",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346488421"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346488421"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"node: Add reference to mempool in NodeContext\" (fa5329abb91ec4876f61967848901c6805ab5503)\r\n\r\nThis looks good. It would be nice in the future to have similar functions for connman and banman in [`rpc/net.cpp`](https://github.com/bitcoin/bitcoin/blob/master/src/rpc/net.cpp) to minimize uses of `g_rpc_node`, and help that global go away at some point.\r\n\r\n(Maybe relevant:  One way `g_rpc_node` might go away is adding a `std::any context` member to `JSONRPCRequest` assigned to the node context, and having functions like `EnsureMempool` take `request` arguments and pull the context from the request.)",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-14T18:56:01Z",
      "diff_hunk" : "@@ -53,6 +54,14 @@ static Mutex cs_blockchange;\n static std::condition_variable cond_blockchange;\n static CUpdatedBlock latestblock;\n \n+CTxMemPool& EnsureMemPool()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346488421",
      "id" : 346488421,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjQ4ODQyMQ==",
      "original_commit_id" : "fa5329abb91ec4876f61967848901c6805ab5503",
      "original_position" : 12,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 12,
      "pull_request_review_id" : 317184773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346488421",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346489583"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346489583"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"node: Add reference to mempool in NodeContext\" (fa5329abb91ec4876f61967848901c6805ab5503)\r\n\r\nCould also check g_rpc_node is not null, maybe using assert",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-14T18:58:13Z",
      "diff_hunk" : "@@ -53,6 +54,14 @@ static Mutex cs_blockchange;\n static std::condition_variable cond_blockchange;\n static CUpdatedBlock latestblock;\n \n+CTxMemPool& EnsureMemPool()\n+{\n+    if (!g_rpc_node->mempool) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346489583",
      "id" : 346489583,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjQ4OTU4Mw==",
      "original_commit_id" : "fa5329abb91ec4876f61967848901c6805ab5503",
      "original_position" : 14,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 15,
      "pull_request_review_id" : 317184773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346489583",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346493149"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346493149"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"node: Add reference to mempool in NodeContext\" (fa5329abb91ec4876f61967848901c6805ab5503)\r\n\r\nWould it be clearer to refer to the mempool instead of the tx pool or transaction pool? (I don't actually know, I'm just used to mempool over transaction pool.)",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-14T19:05:46Z",
      "diff_hunk" : "@@ -63,6 +63,9 @@ enum RPCErrorCode\n     RPC_CLIENT_INVALID_IP_OR_SUBNET = -30, //!< Invalid IP/Subnet\n     RPC_CLIENT_P2P_DISABLED         = -31, //!< No valid connection manager instance found\n \n+    //! Chain errors\n+    RPC_CLIENT_TX_POOL_DISABLED     = -33, //!< No transaction pool instance found",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346493149",
      "id" : 346493149,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjQ5MzE0OQ==",
      "original_commit_id" : "fa5329abb91ec4876f61967848901c6805ab5503",
      "original_position" : 5,
      "path" : "src/rpc/protocol.h",
      "position" : null,
      "pull_request_review_id" : 317184773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346493149",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346497982"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346497982"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"test: Replace recursive lock with AssertLockHeld\" (fa19ddc2bf8ee8f1ce621611a90f8b9e380b1517)\r\n\r\nInstead of `TestSequenceLocks` being a lambda and `TestPackageSelection` in fafe3d88d34f04c798d000ca0b315830d63a80eb taking an unconventionally named `m_node` argument, I think it might be better if both were test fixture methods:\r\n\r\n```c++\r\nclass MinerTest : public TestingSetup\r\n{\r\n    bool TestSequenceLocks(...);\r\n    void TestPackageSelection(...);\r\n};\r\n\r\nbool MinerTest::TestSequenceLocks(...) {...}\r\nvoid MinerTest::TestPackageSelection(...) {...}\r\n\r\nBOOST_FIXTURE_TEST_CASE(CreateNewBlock_validity, MinerTest) { ... }\r\n```\r\n\r\nThis should make the diffs here smaller and scripted diff simpler because `TestSequenceLocks` wouldn't need to move and `TestPackageSelection` arguments wouldn't have to change.",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-14T19:15:35Z",
      "diff_hunk" : "@@ -203,6 +197,11 @@ static void TestPackageSelection(const CChainParams& chainparams, const CScript&\n // NOTE: These tests rely on CreateNewBlock doing its own self-validation!\n BOOST_AUTO_TEST_CASE(CreateNewBlock_validity)\n {\n+    const auto TestSequenceLocks = [this](const CTransaction& tx, int flags) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346497982",
      "id" : 346497982,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjQ5Nzk4Mg==",
      "original_commit_id" : "fa19ddc2bf8ee8f1ce621611a90f8b9e380b1517",
      "original_position" : 17,
      "path" : "src/test/miner_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 317184773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346497982",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346539606"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346539606"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sounds like a nice follow-up pull request",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-14T20:51:58Z",
      "diff_hunk" : "@@ -53,6 +54,14 @@ static Mutex cs_blockchange;\n static std::condition_variable cond_blockchange;\n static CUpdatedBlock latestblock;\n \n+CTxMemPool& EnsureMemPool()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346539606",
      "id" : 346539606,
      "in_reply_to_id" : 346488421,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjUzOTYwNg==",
      "original_commit_id" : "fa5329abb91ec4876f61967848901c6805ab5503",
      "original_position" : 12,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 12,
      "pull_request_review_id" : 317251787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:51:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346539606",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346539722"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346539722"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done. added assert",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-14T20:52:13Z",
      "diff_hunk" : "@@ -53,6 +54,14 @@ static Mutex cs_blockchange;\n static std::condition_variable cond_blockchange;\n static CUpdatedBlock latestblock;\n \n+CTxMemPool& EnsureMemPool()\n+{\n+    if (!g_rpc_node->mempool) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346539722",
      "id" : 346539722,
      "in_reply_to_id" : 346489583,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjUzOTcyMg==",
      "original_commit_id" : "fa5329abb91ec4876f61967848901c6805ab5503",
      "original_position" : 14,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 15,
      "pull_request_review_id" : 317251934,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:52:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346539722",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346540138"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346540138"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done. Renamed TX_POOL to MEMPOOL",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-14T20:53:07Z",
      "diff_hunk" : "@@ -63,6 +63,9 @@ enum RPCErrorCode\n     RPC_CLIENT_INVALID_IP_OR_SUBNET = -30, //!< Invalid IP/Subnet\n     RPC_CLIENT_P2P_DISABLED         = -31, //!< No valid connection manager instance found\n \n+    //! Chain errors\n+    RPC_CLIENT_TX_POOL_DISABLED     = -33, //!< No transaction pool instance found",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346540138",
      "id" : 346540138,
      "in_reply_to_id" : 346493149,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjU0MDEzOA==",
      "original_commit_id" : "fa5329abb91ec4876f61967848901c6805ab5503",
      "original_position" : 5,
      "path" : "src/rpc/protocol.h",
      "position" : null,
      "pull_request_review_id" : 317252505,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:53:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346540138",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346540308"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346540308"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed, I think",
      "commit_id" : "faf24f1e82e77e625bba616412ff5ee3f12e88a5",
      "created_at" : "2019-11-14T20:53:30Z",
      "diff_hunk" : "@@ -203,6 +197,11 @@ static void TestPackageSelection(const CChainParams& chainparams, const CScript&\n // NOTE: These tests rely on CreateNewBlock doing its own self-validation!\n BOOST_AUTO_TEST_CASE(CreateNewBlock_validity)\n {\n+    const auto TestSequenceLocks = [this](const CTransaction& tx, int flags) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#discussion_r346540308",
      "id" : 346540308,
      "in_reply_to_id" : 346497982,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjU0MDMwOA==",
      "original_commit_id" : "fa19ddc2bf8ee8f1ce621611a90f8b9e380b1517",
      "original_position" : 17,
      "path" : "src/test/miner_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 317252700,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17407",
      "updated_at" : "2019-11-14T20:53:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346540308",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Addressed @ryanofsky feedback",
      "created_at" : "2019-11-14T20:53:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-554074903",
      "id" : 554074903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NDA3NDkwMw==",
      "updated_at" : "2019-11-14T20:53:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554074903",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. Can you update the PR description, which makes it sound like this PR changes mempool from being a global that is initialized before `main`.",
      "created_at" : "2019-11-14T22:37:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17407#issuecomment-554114146",
      "id" : 554114146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17407",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NDExNDE0Ng==",
      "updated_at" : "2019-11-14T22:37:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554114146",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
