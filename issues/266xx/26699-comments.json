[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1495532740), [achow101](https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1501822228) |\n| Concept ACK | [theStack](https://github.com/bitcoin/bitcoin/pull/26699#pullrequestreview-1253771673) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#bitcoin-core/gui/417](https://github.com/bitcoin-core/gui/pull/417) (Ditch wallet model juggling by promag)\n* [#27217](https://github.com/bitcoin/bitcoin/pull/27217) (wallet: Replace use of purpose strings with an enum by achow101)\n* [#25979](https://github.com/bitcoin/bitcoin/pull/25979) ([WIP] wallet: standardize change output detection process by furszy)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-12-14T14:07:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1351420865",
      "id" : 1351420865,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585QjQvB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1351420865/reactions"
      },
      "updated_at" : "2023-04-10T13:37:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1351420865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "While you're in this function, can you also fix #26687. It's a similar issue - we're now filtering for only spendable coins which excludes watch-only coins.",
      "created_at" : "2022-12-14T17:45:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1351842161",
      "id" : 1351842161,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585Qk3lx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1351842161/reactions"
      },
      "updated_at" : "2022-12-14T17:45:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1351842161",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> While you're in this function, can you also fix #26687. It's a similar issue - we're now filtering for only spendable coins which excludes watch-only coins.\r\n\r\nsure @achow101, will check it. Feel free to cc me for other similar stuff next time.",
      "created_at" : "2022-12-14T20:25:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1352115123",
      "id" : 1352115123,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585Ql6Oz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352115123/reactions"
      },
      "updated_at" : "2022-12-14T20:25:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352115123",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Added fix and test coverage for https://github.com/bitcoin/bitcoin/issues/26687.\r\n\r\nAs we are using a cached balance on `WalletModel::getAvailableBalance`,\r\nthe function needs to include into the response the watch-only available\r\nbalance on wallets with private keys disabled.\r\n\r\nNote:\r\nLet me know if want me to decouple this two fixes into a new PR.",
      "created_at" : "2022-12-15T01:55:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1352454494",
      "id" : 1352454494,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585QnNFe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352454494/reactions"
      },
      "updated_at" : "2022-12-17T12:19:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352454494",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1051162240"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051162240"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can we test for this?",
      "commit_id" : "30785b280e52edde67779b99903ad71298cfcb3f",
      "created_at" : "2022-12-16T21:06:26Z",
      "diff_hunk" : "@@ -897,7 +897,9 @@ static util::Result<CreatedTransactionResult> CreateTransactionInternal(\n     // allowed (coins automatically selected by the wallet)\n     CoinsResult available_coins;\n     if (coin_control.m_allow_other_inputs) {\n-        available_coins = AvailableCoins(wallet, &coin_control, coin_selection_params.m_effective_feerate);\n+        CoinFilterParams params; // include non-spendable coins if this is a watch-only wallet\n+        params.only_spendable = !wallet.IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1051162240",
      "id" : 1051162240,
      "line" : 901,
      "node_id" : "PRRC_kwDOABII584-p3aA",
      "original_commit_id" : "30785b280e52edde67779b99903ad71298cfcb3f",
      "original_line" : 901,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 6,
      "pull_request_review_id" : 1221470050,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051162240/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-16T21:06:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051162240",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1051202175"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051202175"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Actually, this change is not needed here. Will just drop it.\r\nI was using it to add support for creating PSBTs on legacy wallets that only know the pubkey hash and not the pubkey (in other terms, use `importaddress` instead of `importpubkey`). Which has never being possible.",
      "commit_id" : "30785b280e52edde67779b99903ad71298cfcb3f",
      "created_at" : "2022-12-16T22:12:54Z",
      "diff_hunk" : "@@ -897,7 +897,9 @@ static util::Result<CreatedTransactionResult> CreateTransactionInternal(\n     // allowed (coins automatically selected by the wallet)\n     CoinsResult available_coins;\n     if (coin_control.m_allow_other_inputs) {\n-        available_coins = AvailableCoins(wallet, &coin_control, coin_selection_params.m_effective_feerate);\n+        CoinFilterParams params; // include non-spendable coins if this is a watch-only wallet\n+        params.only_spendable = !wallet.IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1051202175",
      "id" : 1051202175,
      "in_reply_to_id" : 1051162240,
      "line" : 901,
      "node_id" : "PRRC_kwDOABII584-qBJ_",
      "original_commit_id" : "30785b280e52edde67779b99903ad71298cfcb3f",
      "original_line" : 901,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 6,
      "pull_request_review_id" : 1221524223,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051202175/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-16T22:12:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051202175",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Added test coverage for the GUI PSBT creation on legacy watch-only wallets.",
      "created_at" : "2022-12-17T02:28:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1355969807",
      "id" : 1355969807,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585Q0nUP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1355969807/reactions"
      },
      "updated_at" : "2022-12-17T02:28:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1355969807",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase",
      "created_at" : "2023-01-18T16:08:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1387320822",
      "id" : 1387320822,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585SsNX2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1387320822/reactions"
      },
      "updated_at" : "2023-01-18T16:08:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1387320822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased, silent conflict solved.",
      "created_at" : "2023-01-18T18:25:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1387520381",
      "id" : 1387520381,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585Ss-F9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1387520381/reactions"
      },
      "updated_at" : "2023-01-18T18:25:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1387520381",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-02-17T19:13:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1435119734",
      "id" : 1435119734,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585VijB2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1435119734/reactions"
      },
      "updated_at" : "2023-02-17T19:13:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1435119734",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased, conflicts solved.",
      "created_at" : "2023-02-20T14:06:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1437077463",
      "id" : 1437077463,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585VqA_X",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1437077463/reactions"
      },
      "updated_at" : "2023-02-20T14:06:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1437077463",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested that this fixes the coin selection + use available balance GUI issue for me. Haven't reviewed the code yet.",
      "created_at" : "2023-03-31T16:19:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1492224218",
      "id" : 1492224218,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585Y8Yja",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1492224218/reactions"
      },
      "updated_at" : "2023-03-31T16:19:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1492224218",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-04-02T08:31:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1493265468",
      "id" : 1493265468,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585ZAWw8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1493265468/reactions"
      },
      "updated_at" : "2023-04-02T08:31:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1493265468",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased, conflict solved.",
      "created_at" : "2023-04-02T15:33:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1493373583",
      "id" : 1493373583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585ZAxKP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1493373583/reactions"
      },
      "updated_at" : "2023-04-02T15:33:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1493373583",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1155886202"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1155886202"
         }
      },
      "author_association" : "MEMBER",
      "body" : "8cd77302305a2387368aabe8744b1859caf9956a: what do you mean by this?",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-03T12:21:07Z",
      "diff_hunk" : "@@ -791,8 +791,13 @@ void SendCoinsDialog::useAvailableBalance(SendCoinsEntry* entry)\n     // Include watch-only for wallets without private key\n     m_coin_control->fAllowWatchOnly = model->wallet().privateKeysDisabled() && !model->wallet().hasExternalSigner();\n \n+    // Same behavior as send: if we have selected coins, only obtain their available balance.\n+    // future, introduce a checkbox to customize this value.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1155886202",
      "id" : 1155886202,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585E5Wx6",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 795,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 1368916841,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1155886202/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-03T15:08:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1155886202",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1155888778"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1155888778"
         }
      },
      "author_association" : "MEMBER",
      "body" : "8cd77302305a2387368aabe8744b1859caf9956a: This seems more consistent with the style above:\r\n\r\n```cpp\r\nm_coin_control->m_allow_other_inputs = !m_coin_control->HasSelected();\r\n```\r\n\r\nAlternatively you could do `*m_coin_control` at the top of the function.\r\n\r\nMaybe also add an `assert(m_coin_control)` at the top.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-03T12:22:49Z",
      "diff_hunk" : "@@ -791,8 +791,13 @@ void SendCoinsDialog::useAvailableBalance(SendCoinsEntry* entry)\n     // Include watch-only for wallets without private key\n     m_coin_control->fAllowWatchOnly = model->wallet().privateKeysDisabled() && !model->wallet().hasExternalSigner();\n \n+    // Same behavior as send: if we have selected coins, only obtain their available balance.\n+    // future, introduce a checkbox to customize this value.\n+    CCoinControl coin_control = *m_coin_control;\n+    coin_control.m_allow_other_inputs = !coin_control.HasSelected();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1155888778",
      "id" : 1155888778,
      "line" : 797,
      "node_id" : "PRRC_kwDOABII585E5XaK",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 797,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 16,
      "pull_request_review_id" : 1368916841,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1155888778/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-03T15:08:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1155888778",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1155907956"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1155907956"
         }
      },
      "author_association" : "MEMBER",
      "body" : "8cd77302305a2387368aabe8744b1859caf9956a: paging @ryanofsky: do you think we should move all this complexity here to the interface? ",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-03T12:40:10Z",
      "diff_hunk" : "@@ -403,7 +404,24 @@ class WalletImpl : public Wallet\n     CAmount getBalance() override { return GetBalance(*m_wallet).m_mine_trusted; }\n     CAmount getAvailableBalance(const CCoinControl& coin_control) override\n     {\n-        return GetAvailableBalance(*m_wallet, &coin_control);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1155907956",
      "id" : 1155907956,
      "line" : 406,
      "node_id" : "PRRC_kwDOABII585E5cF0",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 406,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/wallet/interfaces.cpp",
      "position" : 12,
      "pull_request_review_id" : 1368916841,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1155907956/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-03T15:08:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1155907956",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156018577"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156018577"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Here's a commit to handle the error: https://github.com/Sjors/bitcoin/commit/5711f8274b91a278dd9307972e6985dc96ba56cb",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-03T14:09:11Z",
      "diff_hunk" : "@@ -403,7 +404,24 @@ class WalletImpl : public Wallet\n     CAmount getBalance() override { return GetBalance(*m_wallet).m_mine_trusted; }\n     CAmount getAvailableBalance(const CCoinControl& coin_control) override\n     {\n-        return GetAvailableBalance(*m_wallet, &coin_control);\n+        LOCK(m_wallet->cs_wallet);\n+        CAmount total_amount = 0;\n+        // Fetch selected coins total amount\n+        if (coin_control.HasSelected()) {\n+            FastRandomContext rng{};\n+            CoinSelectionParams params(rng);\n+            // Note: for now, swallow any error.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156018577",
      "id" : 1156018577,
      "line" : 413,
      "node_id" : "PRRC_kwDOABII585E53GR",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 413,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/wallet/interfaces.cpp",
      "position" : 19,
      "pull_request_review_id" : 1368916841,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156018577/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-03T15:08:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156018577",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156147572"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156147572"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Basically to follow the same procedure as the send process (`SendCoinsDialog::PrepareSendText`), it's is at line 288-290.\r\n\r\nCurrently, the GUI disables the automatic selection of \"other inputs\" when the user manually selected coins (the process will only use those). But, in the future, that could also be customizable. The user might want to let the wallet add new inputs, even when the user had selected some, if there aren't enough funds to cover for the tx target amount.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-03T15:49:52Z",
      "diff_hunk" : "@@ -791,8 +791,13 @@ void SendCoinsDialog::useAvailableBalance(SendCoinsEntry* entry)\n     // Include watch-only for wallets without private key\n     m_coin_control->fAllowWatchOnly = model->wallet().privateKeysDisabled() && !model->wallet().hasExternalSigner();\n \n+    // Same behavior as send: if we have selected coins, only obtain their available balance.\n+    // future, introduce a checkbox to customize this value.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156147572",
      "id" : 1156147572,
      "in_reply_to_id" : 1155886202,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585E6Wl0",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 795,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 1369322333,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156147572/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-03T15:49:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156147572",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156170345"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156170345"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The `m_allow_other_inputs` flag is different to the `fAllowWatchOnly` flag.\r\n\r\n`fAllowWatchOnly` set is actually redundant here as `privateKeysDisabled()` and `hasExternalSigner()` are wallet constants. It can be set only once, when the wallet is set in the GUI and don't be re-set again.\r\n\r\nAnd, at the contraire, the `m_allow_other_inputs` flag can change as it depends on whether the user manually selected coins or not, which could be modified at any time. Thus why I would try to not set the coin control member here.\r\n\r\nThe best path would be to set `m_allow_other_inputs` at the same moment when the user manually selects/deselect coins in the coin control dialog. But.. I think that it's better to do that in a follow-up to not expand this PR much.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-03T16:09:45Z",
      "diff_hunk" : "@@ -791,8 +791,13 @@ void SendCoinsDialog::useAvailableBalance(SendCoinsEntry* entry)\n     // Include watch-only for wallets without private key\n     m_coin_control->fAllowWatchOnly = model->wallet().privateKeysDisabled() && !model->wallet().hasExternalSigner();\n \n+    // Same behavior as send: if we have selected coins, only obtain their available balance.\n+    // future, introduce a checkbox to customize this value.\n+    CCoinControl coin_control = *m_coin_control;\n+    coin_control.m_allow_other_inputs = !coin_control.HasSelected();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156170345",
      "id" : 1156170345,
      "in_reply_to_id" : 1155888778,
      "line" : 797,
      "node_id" : "PRRC_kwDOABII585E6cJp",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 797,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 16,
      "pull_request_review_id" : 1369360710,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156170345/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-03T16:09:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156170345",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156186159"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156186159"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I see. I think it's better to drop that comment and instead open a GUI issue. The checkbox could say \"Add more coins as needed\" to match the send RPC behaviour. The issue can point to the line `!coin_control.HasSelected();` that needs to be changed to implement this.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-03T16:24:09Z",
      "diff_hunk" : "@@ -791,8 +791,13 @@ void SendCoinsDialog::useAvailableBalance(SendCoinsEntry* entry)\n     // Include watch-only for wallets without private key\n     m_coin_control->fAllowWatchOnly = model->wallet().privateKeysDisabled() && !model->wallet().hasExternalSigner();\n \n+    // Same behavior as send: if we have selected coins, only obtain their available balance.\n+    // future, introduce a checkbox to customize this value.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156186159",
      "id" : 1156186159,
      "in_reply_to_id" : 1155886202,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585E6gAv",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 795,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 1369383739,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156186159/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-03T16:24:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156186159",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156188348"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156188348"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah, maybe add a comment:\r\n\r\n```cpp\r\n// Copy to avoid modifying m_coin_control \r\n```",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-03T16:25:54Z",
      "diff_hunk" : "@@ -791,8 +791,13 @@ void SendCoinsDialog::useAvailableBalance(SendCoinsEntry* entry)\n     // Include watch-only for wallets without private key\n     m_coin_control->fAllowWatchOnly = model->wallet().privateKeysDisabled() && !model->wallet().hasExternalSigner();\n \n+    // Same behavior as send: if we have selected coins, only obtain their available balance.\n+    // future, introduce a checkbox to customize this value.\n+    CCoinControl coin_control = *m_coin_control;\n+    coin_control.m_allow_other_inputs = !coin_control.HasSelected();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156188348",
      "id" : 1156188348,
      "in_reply_to_id" : 1155888778,
      "line" : 797,
      "node_id" : "PRRC_kwDOABII585E6gi8",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 797,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 16,
      "pull_request_review_id" : 1369387023,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156188348/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-03T16:25:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156188348",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156408310"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156408310"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Was remembering why I left it unhandled:\r\nAnd it was because this cannot happen. `FetchSelectedInputs` fails only if any of the selected coins are not solvable or invalid. And we set the selected coins via the coin control dialog, which is loaded from the wallet's available UTXOs, which are always valid.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-03T20:06:40Z",
      "diff_hunk" : "@@ -403,7 +404,24 @@ class WalletImpl : public Wallet\n     CAmount getBalance() override { return GetBalance(*m_wallet).m_mine_trusted; }\n     CAmount getAvailableBalance(const CCoinControl& coin_control) override\n     {\n-        return GetAvailableBalance(*m_wallet, &coin_control);\n+        LOCK(m_wallet->cs_wallet);\n+        CAmount total_amount = 0;\n+        // Fetch selected coins total amount\n+        if (coin_control.HasSelected()) {\n+            FastRandomContext rng{};\n+            CoinSelectionParams params(rng);\n+            // Note: for now, swallow any error.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156408310",
      "id" : 1156408310,
      "in_reply_to_id" : 1156018577,
      "line" : 413,
      "node_id" : "PRRC_kwDOABII585E7WP2",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 413,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/wallet/interfaces.cpp",
      "position" : 19,
      "pull_request_review_id" : 1369726832,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156408310/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-03T20:06:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156408310",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156411543"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156411543"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sure. Doesn't hurt to add a comment.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-03T20:10:39Z",
      "diff_hunk" : "@@ -791,8 +791,13 @@ void SendCoinsDialog::useAvailableBalance(SendCoinsEntry* entry)\n     // Include watch-only for wallets without private key\n     m_coin_control->fAllowWatchOnly = model->wallet().privateKeysDisabled() && !model->wallet().hasExternalSigner();\n \n+    // Same behavior as send: if we have selected coins, only obtain their available balance.\n+    // future, introduce a checkbox to customize this value.\n+    CCoinControl coin_control = *m_coin_control;\n+    coin_control.m_allow_other_inputs = !coin_control.HasSelected();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156411543",
      "id" : 1156411543,
      "in_reply_to_id" : 1155888778,
      "line" : 797,
      "node_id" : "PRRC_kwDOABII585E7XCX",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 797,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 16,
      "pull_request_review_id" : 1369732116,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156411543/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-03T20:10:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156411543",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156423239"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156423239"
         }
      },
      "author_association" : "MEMBER",
      "body" : "np about creating a gui issue for this.\r\n\r\nstill, I'm not fan of the link to this particular line because this isn't the only place that has to be modified to introduce the feature. Plus, code changes over time, so the issue could easily get behind, which would mean more maintenance burden for us.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-03T20:23:05Z",
      "diff_hunk" : "@@ -791,8 +791,13 @@ void SendCoinsDialog::useAvailableBalance(SendCoinsEntry* entry)\n     // Include watch-only for wallets without private key\n     m_coin_control->fAllowWatchOnly = model->wallet().privateKeysDisabled() && !model->wallet().hasExternalSigner();\n \n+    // Same behavior as send: if we have selected coins, only obtain their available balance.\n+    // future, introduce a checkbox to customize this value.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156423239",
      "id" : 1156423239,
      "in_reply_to_id" : 1155886202,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585E7Z5H",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 795,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 1369750938,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156423239/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-03T20:23:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156423239",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156424730"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156424730"
         }
      },
      "author_association" : "MEMBER",
      "body" : "pushed",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-03T20:24:56Z",
      "diff_hunk" : "@@ -791,8 +791,13 @@ void SendCoinsDialog::useAvailableBalance(SendCoinsEntry* entry)\n     // Include watch-only for wallets without private key\n     m_coin_control->fAllowWatchOnly = model->wallet().privateKeysDisabled() && !model->wallet().hasExternalSigner();\n \n+    // Same behavior as send: if we have selected coins, only obtain their available balance.\n+    // future, introduce a checkbox to customize this value.\n+    CCoinControl coin_control = *m_coin_control;\n+    coin_control.m_allow_other_inputs = !coin_control.HasSelected();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156424730",
      "id" : 1156424730,
      "in_reply_to_id" : 1155888778,
      "line" : 797,
      "node_id" : "PRRC_kwDOABII585E7aQa",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 797,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 16,
      "pull_request_review_id" : 1369753210,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156424730/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-03T20:24:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156424730",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156424958"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156424958"
         }
      },
      "author_association" : "MEMBER",
      "body" : "pushed",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-03T20:25:12Z",
      "diff_hunk" : "@@ -791,8 +791,13 @@ void SendCoinsDialog::useAvailableBalance(SendCoinsEntry* entry)\n     // Include watch-only for wallets without private key\n     m_coin_control->fAllowWatchOnly = model->wallet().privateKeysDisabled() && !model->wallet().hasExternalSigner();\n \n+    // Same behavior as send: if we have selected coins, only obtain their available balance.\n+    // future, introduce a checkbox to customize this value.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156424958",
      "id" : 1156424958,
      "in_reply_to_id" : 1155886202,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585E7aT-",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 795,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 1369753550,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156424958/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-03T20:25:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156424958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Feedback tackled. Thanks Sjors.\r\n\r\nOnly a comment change, [diff](https://github.com/bitcoin/bitcoin/compare/86b43c78ecd5a68b5569b1c2a7b2696b1f70ef21..68eed5df8656bed1be6526b014e58d3123102b03).",
      "created_at" : "2023-04-03T20:26:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1494936715",
      "id" : 1494936715,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585ZGuyL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1494936715/reactions"
      },
      "updated_at" : "2023-04-03T20:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1494936715",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156881801"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156881801"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I see. In that case, just add what you just wrote as a comment.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-04T08:05:36Z",
      "diff_hunk" : "@@ -403,7 +404,24 @@ class WalletImpl : public Wallet\n     CAmount getBalance() override { return GetBalance(*m_wallet).m_mine_trusted; }\n     CAmount getAvailableBalance(const CCoinControl& coin_control) override\n     {\n-        return GetAvailableBalance(*m_wallet, &coin_control);\n+        LOCK(m_wallet->cs_wallet);\n+        CAmount total_amount = 0;\n+        // Fetch selected coins total amount\n+        if (coin_control.HasSelected()) {\n+            FastRandomContext rng{};\n+            CoinSelectionParams params(rng);\n+            // Note: for now, swallow any error.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156881801",
      "id" : 1156881801,
      "in_reply_to_id" : 1156018577,
      "line" : 413,
      "node_id" : "PRRC_kwDOABII585E9J2J",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 413,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/wallet/interfaces.cpp",
      "position" : 19,
      "pull_request_review_id" : 1370424743,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156881801/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-04T08:05:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156881801",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156884391"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156884391"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> pushed\r\n\r\nI don't see a change.\r\n\r\nMy main point was to clarify the comment \"future, introduce a checkbox to customize this value\". It could be done as source code comments or a Github issue.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-04T08:07:59Z",
      "diff_hunk" : "@@ -791,8 +791,13 @@ void SendCoinsDialog::useAvailableBalance(SendCoinsEntry* entry)\n     // Include watch-only for wallets without private key\n     m_coin_control->fAllowWatchOnly = model->wallet().privateKeysDisabled() && !model->wallet().hasExternalSigner();\n \n+    // Same behavior as send: if we have selected coins, only obtain their available balance.\n+    // future, introduce a checkbox to customize this value.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156884391",
      "id" : 1156884391,
      "in_reply_to_id" : 1155886202,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585E9Ken",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 795,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 1370428824,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156884391/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-04T08:08:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1156884391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "tACK 68eed5df8656bed1be6526b014e58d3123102b03\r\n\r\nRemaining feedback is only about source code comments.",
      "created_at" : "2023-04-04T08:09:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1495532740",
      "id" : 1495532740,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585ZJATE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1495532740/reactions"
      },
      "updated_at" : "2023-04-04T08:10:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1495532740",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1157195466"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1157195466"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ok, sounds good. Will do it in the next push.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-04T12:46:38Z",
      "diff_hunk" : "@@ -403,7 +404,24 @@ class WalletImpl : public Wallet\n     CAmount getBalance() override { return GetBalance(*m_wallet).m_mine_trusted; }\n     CAmount getAvailableBalance(const CCoinControl& coin_control) override\n     {\n-        return GetAvailableBalance(*m_wallet, &coin_control);\n+        LOCK(m_wallet->cs_wallet);\n+        CAmount total_amount = 0;\n+        // Fetch selected coins total amount\n+        if (coin_control.HasSelected()) {\n+            FastRandomContext rng{};\n+            CoinSelectionParams params(rng);\n+            // Note: for now, swallow any error.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1157195466",
      "id" : 1157195466,
      "in_reply_to_id" : 1156018577,
      "line" : 413,
      "node_id" : "PRRC_kwDOABII585E-WbK",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 413,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/wallet/interfaces.cpp",
      "position" : 19,
      "pull_request_review_id" : 1370899759,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1157195466/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-04T12:46:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1157195466",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-10T13:37:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#issuecomment-1501822228",
      "id" : 1501822228,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
      "node_id" : "IC_kwDOABII585Zg_0U",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1501822228/reactions"
      },
      "updated_at" : "2023-04-10T13:37:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1501822228",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1161771202"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161771202"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> [8cd7730](https://github.com/bitcoin/bitcoin/commit/8cd77302305a2387368aabe8744b1859caf9956a): paging @ryanofsky: do you think we should move all this complexity here to the interface?\r\n\r\nRight, probably it would be better to move the new code from the `wallet:WalletImpl::getAvailableBalance()` method in `src/wallet/interfaces.cpp` into the `wallet::GetAvailableBalance()` function in `src/wallet/spend.cpp` or into another function there like `wallet::GetSelectedCoinsBalance`. Reasoning is\r\n\r\n- `src/wallet/interfaces.cpp` is supposed to define a public interface to wallet code that GUI code can call without accessing wallet internals. It is just supposed to forward calls from the public interface to private functions, and not really designed to contain coin selection code.\r\n- It is easier to write unit tests for standalone `spend.cpp` functions than interface methods that require constructing a larger interface.\r\n- It is easier to share code between RPC and GUI interfaces right now if code is standalone\r\n\r\nEDIT: To clarify, I think it would be better to move this code, but I don't think leaving the code here is a big problem. I wouldn't want it to delay fixing the bug.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-10T14:32:46Z",
      "diff_hunk" : "@@ -403,7 +404,24 @@ class WalletImpl : public Wallet\n     CAmount getBalance() override { return GetBalance(*m_wallet).m_mine_trusted; }\n     CAmount getAvailableBalance(const CCoinControl& coin_control) override\n     {\n-        return GetAvailableBalance(*m_wallet, &coin_control);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1161771202",
      "id" : 1161771202,
      "in_reply_to_id" : 1155907956,
      "line" : 406,
      "node_id" : "PRRC_kwDOABII585FPzjC",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 406,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/wallet/interfaces.cpp",
      "position" : 12,
      "pull_request_review_id" : 1377615778,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161771202/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-10T16:22:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161771202",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1162906791"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162906791"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sure. Having a proxy class is nice for any future IPC mechanism. All the protobuf/protocan/etc messages are simpler to craft in this way.\r\n\r\nBased on how close we are to v25 branch-off, I'm thinking on whether should do it now or later :/. Otherwise I would push it right away.\r\n\r\nProbably, could tackle it on a quick follow-up with https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1156018577 and few other cleanups as well.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-11T14:29:14Z",
      "diff_hunk" : "@@ -403,7 +404,24 @@ class WalletImpl : public Wallet\n     CAmount getBalance() override { return GetBalance(*m_wallet).m_mine_trusted; }\n     CAmount getAvailableBalance(const CCoinControl& coin_control) override\n     {\n-        return GetAvailableBalance(*m_wallet, &coin_control);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1162906791",
      "id" : 1162906791,
      "in_reply_to_id" : 1155907956,
      "line" : 406,
      "node_id" : "PRRC_kwDOABII585FUIyn",
      "original_commit_id" : "8cd77302305a2387368aabe8744b1859caf9956a",
      "original_line" : 406,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/wallet/interfaces.cpp",
      "position" : 12,
      "pull_request_review_id" : 1379401911,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162906791/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-11T14:29:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162906791",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1163054934"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1163054934"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: Is there any specific reason for this change? Without it, everything seems to work still fine on my side (but obviously, it shouldn't hurt to construct the message box with a parent...)",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-11T16:17:17Z",
      "diff_hunk" : "@@ -403,7 +403,7 @@ void SendCoinsDialog::presentPSBT(PartiallySignedTransaction& psbtx)\n     CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\n     ssTx << psbtx;\n     GUIUtil::setClipboard(EncodeBase64(ssTx.str()).c_str());\n-    QMessageBox msgBox;\n+    QMessageBox msgBox(this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1163054934",
      "id" : 1163054934,
      "line" : 406,
      "node_id" : "PRRC_kwDOABII585FUs9W",
      "original_commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "original_line" : 406,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 5,
      "pull_request_review_id" : 1379656461,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1163054934/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-11T16:25:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1163054934",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1163166007"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1163166007"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It was because I was accessing the parent to click on the message box from the unit test (the dialog `exec()` method blocks the thread until the user presses any of the buttons). And, later on, changed my mind and accessed it via the `QApplication::topLevelWidgets` call.\r\n\r\nIt doesn't hurt to have it. This would had been a leak if the message box would had been constructed via the `new` call.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2023-04-11T18:07:30Z",
      "diff_hunk" : "@@ -403,7 +403,7 @@ void SendCoinsDialog::presentPSBT(PartiallySignedTransaction& psbtx)\n     CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\n     ssTx << psbtx;\n     GUIUtil::setClipboard(EncodeBase64(ssTx.str()).c_str());\n-    QMessageBox msgBox;\n+    QMessageBox msgBox(this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1163166007",
      "id" : 1163166007,
      "in_reply_to_id" : 1163054934,
      "line" : 406,
      "node_id" : "PRRC_kwDOABII585FVIE3",
      "original_commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "original_line" : 406,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 5,
      "pull_request_review_id" : 1379827867,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1163166007/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-11T18:08:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1163166007",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1494464086"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494464086"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It seems all these lines of code might be replaced with `ConfirmMessage(nullptr, 500ms);`.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2024-02-19T12:19:08Z",
      "diff_hunk" : "@@ -313,6 +391,76 @@ void TestGUI(interfaces::Node& node)\n     QCOMPARE(walletModel.wallet().getAddressReceiveRequests().size(), size_t{0});\n }\n \n+void TestGUIWatchOnly(interfaces::Node& node, TestChain100Setup& test)\n+{\n+    const std::shared_ptr<CWallet>& wallet = SetupLegacyWatchOnlyWallet(node, test);\n+\n+    // Create widgets and init models\n+    std::unique_ptr<const PlatformStyle> platformStyle(PlatformStyle::instantiate(\"other\"));\n+    MiniGUI mini_gui(node, platformStyle.get());\n+    mini_gui.initModelForWallet(node, wallet, platformStyle.get());\n+    WalletModel& walletModel = *mini_gui.walletModel;\n+    SendCoinsDialog& sendCoinsDialog = mini_gui.sendCoinsDialog;\n+\n+    // Update walletModel cached balance which will trigger an update for the 'labelBalance' QLabel.\n+    walletModel.pollBalanceChanged();\n+    // Check balance in send dialog\n+    CompareBalance(walletModel, walletModel.wallet().getBalances().watch_only_balance,\n+                   sendCoinsDialog.findChild<QLabel*>(\"labelBalance\"));\n+\n+    // Set change address\n+    sendCoinsDialog.getCoinControl()->destChange = GetDestinationForKey(test.coinbaseKey.GetPubKey(), OutputType::LEGACY);\n+\n+    // Time to reject \"save\" PSBT dialog ('SendCoins' locks the main thread until the dialog receives the event).\n+    QTimer timer;\n+    timer.setInterval(500);\n+    QObject::connect(&timer, &QTimer::timeout, [&](){\n+        for (QWidget* widget : QApplication::topLevelWidgets()) {\n+            if (widget->inherits(\"QMessageBox\")) {\n+                QMessageBox* dialog = qobject_cast<QMessageBox*>(widget);\n+                QAbstractButton* button = dialog->button(QMessageBox::Discard);\n+                button->setEnabled(true);\n+                button->click();\n+                timer.stop();\n+                break;\n+            }\n+        }\n+    });\n+    timer.start(500);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1494464086",
      "id" : 1494464086,
      "line" : 429,
      "node_id" : "PRRC_kwDOABII585ZE7ZW",
      "original_commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "original_line" : 429,
      "original_position" : 304,
      "original_start_line" : 415,
      "path" : "src/qt/test/wallettests.cpp",
      "position" : 304,
      "pull_request_review_id" : 1888281600,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494464086/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 415,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-19T12:19:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494464086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1494577858"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494577858"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> It seems all these lines of code might be replaced with `ConfirmMessage(nullptr, 500ms);`.\r\n\r\nThat will trigger the filesystem window to dump the psbt info to a file, which would incur in another step to cancel the dialog. The idea here is to obtain the data through the clipboard only (see few lines below), not through a file.\r\n\r\nThat being said, agree that we could move this into the utility file in the future and cleanup some code.",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2024-02-19T13:49:50Z",
      "diff_hunk" : "@@ -313,6 +391,76 @@ void TestGUI(interfaces::Node& node)\n     QCOMPARE(walletModel.wallet().getAddressReceiveRequests().size(), size_t{0});\n }\n \n+void TestGUIWatchOnly(interfaces::Node& node, TestChain100Setup& test)\n+{\n+    const std::shared_ptr<CWallet>& wallet = SetupLegacyWatchOnlyWallet(node, test);\n+\n+    // Create widgets and init models\n+    std::unique_ptr<const PlatformStyle> platformStyle(PlatformStyle::instantiate(\"other\"));\n+    MiniGUI mini_gui(node, platformStyle.get());\n+    mini_gui.initModelForWallet(node, wallet, platformStyle.get());\n+    WalletModel& walletModel = *mini_gui.walletModel;\n+    SendCoinsDialog& sendCoinsDialog = mini_gui.sendCoinsDialog;\n+\n+    // Update walletModel cached balance which will trigger an update for the 'labelBalance' QLabel.\n+    walletModel.pollBalanceChanged();\n+    // Check balance in send dialog\n+    CompareBalance(walletModel, walletModel.wallet().getBalances().watch_only_balance,\n+                   sendCoinsDialog.findChild<QLabel*>(\"labelBalance\"));\n+\n+    // Set change address\n+    sendCoinsDialog.getCoinControl()->destChange = GetDestinationForKey(test.coinbaseKey.GetPubKey(), OutputType::LEGACY);\n+\n+    // Time to reject \"save\" PSBT dialog ('SendCoins' locks the main thread until the dialog receives the event).\n+    QTimer timer;\n+    timer.setInterval(500);\n+    QObject::connect(&timer, &QTimer::timeout, [&](){\n+        for (QWidget* widget : QApplication::topLevelWidgets()) {\n+            if (widget->inherits(\"QMessageBox\")) {\n+                QMessageBox* dialog = qobject_cast<QMessageBox*>(widget);\n+                QAbstractButton* button = dialog->button(QMessageBox::Discard);\n+                button->setEnabled(true);\n+                button->click();\n+                timer.stop();\n+                break;\n+            }\n+        }\n+    });\n+    timer.start(500);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1494577858",
      "id" : 1494577858,
      "in_reply_to_id" : 1494464086,
      "line" : 429,
      "node_id" : "PRRC_kwDOABII585ZFXLC",
      "original_commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "original_line" : 429,
      "original_position" : 304,
      "original_start_line" : 415,
      "path" : "src/qt/test/wallettests.cpp",
      "position" : 304,
      "pull_request_review_id" : 1888462021,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494577858/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 415,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-19T13:49:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494577858",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1494650375"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494650375"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> That will trigger the filesystem window to dump the psbt info to a file...\r\n\r\nWhy? The `ConfirmMessage` triggers the default button, which is `QMessageBox::Discard`, no?",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2024-02-19T14:42:35Z",
      "diff_hunk" : "@@ -313,6 +391,76 @@ void TestGUI(interfaces::Node& node)\n     QCOMPARE(walletModel.wallet().getAddressReceiveRequests().size(), size_t{0});\n }\n \n+void TestGUIWatchOnly(interfaces::Node& node, TestChain100Setup& test)\n+{\n+    const std::shared_ptr<CWallet>& wallet = SetupLegacyWatchOnlyWallet(node, test);\n+\n+    // Create widgets and init models\n+    std::unique_ptr<const PlatformStyle> platformStyle(PlatformStyle::instantiate(\"other\"));\n+    MiniGUI mini_gui(node, platformStyle.get());\n+    mini_gui.initModelForWallet(node, wallet, platformStyle.get());\n+    WalletModel& walletModel = *mini_gui.walletModel;\n+    SendCoinsDialog& sendCoinsDialog = mini_gui.sendCoinsDialog;\n+\n+    // Update walletModel cached balance which will trigger an update for the 'labelBalance' QLabel.\n+    walletModel.pollBalanceChanged();\n+    // Check balance in send dialog\n+    CompareBalance(walletModel, walletModel.wallet().getBalances().watch_only_balance,\n+                   sendCoinsDialog.findChild<QLabel*>(\"labelBalance\"));\n+\n+    // Set change address\n+    sendCoinsDialog.getCoinControl()->destChange = GetDestinationForKey(test.coinbaseKey.GetPubKey(), OutputType::LEGACY);\n+\n+    // Time to reject \"save\" PSBT dialog ('SendCoins' locks the main thread until the dialog receives the event).\n+    QTimer timer;\n+    timer.setInterval(500);\n+    QObject::connect(&timer, &QTimer::timeout, [&](){\n+        for (QWidget* widget : QApplication::topLevelWidgets()) {\n+            if (widget->inherits(\"QMessageBox\")) {\n+                QMessageBox* dialog = qobject_cast<QMessageBox*>(widget);\n+                QAbstractButton* button = dialog->button(QMessageBox::Discard);\n+                button->setEnabled(true);\n+                button->click();\n+                timer.stop();\n+                break;\n+            }\n+        }\n+    });\n+    timer.start(500);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1494650375",
      "id" : 1494650375,
      "in_reply_to_id" : 1494464086,
      "line" : 429,
      "node_id" : "PRRC_kwDOABII585ZFo4H",
      "original_commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "original_line" : 429,
      "original_position" : 304,
      "original_start_line" : 415,
      "path" : "src/qt/test/wallettests.cpp",
      "position" : 304,
      "pull_request_review_id" : 1888577012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494650375/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 415,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-19T14:42:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494650375",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1494667687"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494667687"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> > That will trigger the filesystem window to dump the psbt info to a file...\r\n> \r\n> Why? The `ConfirmMessage` triggers the default button, which is `QMessageBox::Discard`, no?\r\n\r\nYeah ok, I did not see the manual `setDefaultButton` call. That will work fine while the dialog takes less than 500ms in popping up. If it takes longer, the test will stall because `ConfirmMessage` executes runs the timer only once (`QTimer::singleShot`).",
      "commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "created_at" : "2024-02-19T14:53:20Z",
      "diff_hunk" : "@@ -313,6 +391,76 @@ void TestGUI(interfaces::Node& node)\n     QCOMPARE(walletModel.wallet().getAddressReceiveRequests().size(), size_t{0});\n }\n \n+void TestGUIWatchOnly(interfaces::Node& node, TestChain100Setup& test)\n+{\n+    const std::shared_ptr<CWallet>& wallet = SetupLegacyWatchOnlyWallet(node, test);\n+\n+    // Create widgets and init models\n+    std::unique_ptr<const PlatformStyle> platformStyle(PlatformStyle::instantiate(\"other\"));\n+    MiniGUI mini_gui(node, platformStyle.get());\n+    mini_gui.initModelForWallet(node, wallet, platformStyle.get());\n+    WalletModel& walletModel = *mini_gui.walletModel;\n+    SendCoinsDialog& sendCoinsDialog = mini_gui.sendCoinsDialog;\n+\n+    // Update walletModel cached balance which will trigger an update for the 'labelBalance' QLabel.\n+    walletModel.pollBalanceChanged();\n+    // Check balance in send dialog\n+    CompareBalance(walletModel, walletModel.wallet().getBalances().watch_only_balance,\n+                   sendCoinsDialog.findChild<QLabel*>(\"labelBalance\"));\n+\n+    // Set change address\n+    sendCoinsDialog.getCoinControl()->destChange = GetDestinationForKey(test.coinbaseKey.GetPubKey(), OutputType::LEGACY);\n+\n+    // Time to reject \"save\" PSBT dialog ('SendCoins' locks the main thread until the dialog receives the event).\n+    QTimer timer;\n+    timer.setInterval(500);\n+    QObject::connect(&timer, &QTimer::timeout, [&](){\n+        for (QWidget* widget : QApplication::topLevelWidgets()) {\n+            if (widget->inherits(\"QMessageBox\")) {\n+                QMessageBox* dialog = qobject_cast<QMessageBox*>(widget);\n+                QAbstractButton* button = dialog->button(QMessageBox::Discard);\n+                button->setEnabled(true);\n+                button->click();\n+                timer.stop();\n+                break;\n+            }\n+        }\n+    });\n+    timer.start(500);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26699#discussion_r1494667687",
      "id" : 1494667687,
      "in_reply_to_id" : 1494464086,
      "line" : 429,
      "node_id" : "PRRC_kwDOABII585ZFtGn",
      "original_commit_id" : "68eed5df8656bed1be6526b014e58d3123102b03",
      "original_line" : 429,
      "original_position" : 304,
      "original_start_line" : 415,
      "path" : "src/qt/test/wallettests.cpp",
      "position" : 304,
      "pull_request_review_id" : 1888605830,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494667687/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 415,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-19T14:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1494667687",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   }
]
