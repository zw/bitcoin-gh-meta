[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-11-24T20:14:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17580#issuecomment-557923507",
      "id" : 557923507,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17580",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NzkyMzUwNw==",
      "updated_at" : "2019-11-24T20:14:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/557923507",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19242 (Add -uaappend option to append a literal string to user agent by luke-jr)\n* #19241 (help: Generate checkpoint height from chainparams by luke-jr)\n* #18267 (BIP-325: Signet [consensus] by kallewoof)\n* #17167 (Allow whitelisting outgoing connections by luke-jr)\n* #11082 (Add new bitcoin_rw.conf file that is used for settings modified by this software itself by luke-jr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-11-24T23:52:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17580#issuecomment-557942582",
      "id" : 557942582,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17580",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1Nzk0MjU4Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-03T16:29:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/557942582",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-12-19T20:15:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17580#issuecomment-567646146",
      "id" : 567646146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17580",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NzY0NjE0Ng==",
      "updated_at" : "2019-12-19T20:15:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/567646146",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "~~Wrong commit bcbbc48a1fe7273494738200d508affef40cb47b?~~ nevermind.\r\n\r\nConcept ACK.",
      "created_at" : "2019-12-22T22:10:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17580#issuecomment-568306905",
      "id" : 568306905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17580",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2ODMwNjkwNQ==",
      "updated_at" : "2019-12-22T23:53:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/568306905",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17580#discussion_r364551281"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17580"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364551281"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think it makes sense to ever include any of the `ALLOW_ANY` types in `forbid` (if you don't want a string, then in reality you probably `require` a boolean eg), so having:\r\n\r\n```\r\n  constexpr unsigned int ALLOW_ANY_EQUIV = ALLOW_BOOL | ALLOW_INT | ALLOW_STRING;\r\n  \r\n  assert((forbid & ALLOW_ANY_EQUIV) == 0);\r\n  if (*flags & ALLOW_ANY) require &= ~ALLOW_ANY_EQUIV;\r\n\r\n  ..\r\n\r\n  return (*flags & ALLOW_ANY) == 0; // since ignore_types is gone now\r\n```\r\n\r\nmight make sense?",
      "commit_id" : "4f3e5e9988280ac96b7979c352da218bbf939ed0",
      "created_at" : "2020-01-09T04:04:09Z",
      "diff_hunk" : "@@ -418,13 +418,18 @@ bool ArgsManager::CheckArgFlags(const std::string& name,\n {\n     Optional<unsigned int> flags = GetArgFlags(name);\n     if (!flags) return false;\n-    if (*flags & ArgsManager::ALLOW_ANY) return false;\n+\n+    unsigned int ignore_types = *flags & ALLOW_ANY ? ALLOW_BOOL | ALLOW_INT | ALLOW_STRING : 0;\n+    require &= ~ignore_types;\n+    forbid &= ~ignore_types;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17580#discussion_r364551281",
      "id" : 364551281,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDU1MTI4MQ==",
      "original_commit_id" : "4f3e5e9988280ac96b7979c352da218bbf939ed0",
      "original_position" : 8,
      "path" : "src/util/system.cpp",
      "position" : 201,
      "pull_request_review_id" : 340279414,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17580",
      "updated_at" : "2020-01-09T05:05:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364551281",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17580#discussion_r364553512"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17580"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364553512"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it might be better to restructure the tests than have these special functions that tweak the flags. Maybe something like:\r\n\r\n```\r\nstr_config =\r\n   \"a=\\n\"\r\n   \"b=1\\n\"\r\n   \"c=foo\\n\"\r\n   \"noaaa=1\\n\"\r\n   \"r=0\\n\"\r\n   \"r=1\\n\"\r\n```\r\n\r\n(with a section as well to check overrides/repeats etc work correctly) and then try setting up all the args as `ALLOW_ANY` and check for appropriate errors, then all the args as `ALLOW_BOOL` and check for appropriate results/errors, and all the args as `ALLOW_LIST` and check for appropriate errors?\r\n\r\n(Might be nicer to separate out the test infrastructure changes first, so that it's easy to see all the changes to test results in the commit that changes the functionality, but YMMV)",
      "commit_id" : "4f3e5e9988280ac96b7979c352da218bbf939ed0",
      "created_at" : "2020-01-09T04:18:46Z",
      "diff_hunk" : "@@ -190,6 +190,49 @@ struct TestArgsManager : public ArgsManager\n             AddArg(arg.first, \"\", arg.second, OptionsCategory::OPTIONS);\n         }\n     }\n+    //! Return registered argument information.\n+    Arg* FindArg(const std::string& name)\n+    {\n+        LOCK(cs_args);\n+        for (auto& category : m_available_args) {\n+            if (Arg* arg = util::FindKey(category.second, name)) {\n+                return arg;\n+            }\n+        }\n+        return nullptr;\n+    }\n+    //! Look up current registered argument flags so they can be modified, and\n+    //! restore them on destruction.\n+    struct TestFlags {\n+        TestFlags(TestArgsManager& test, const std::string& name) : arg(test.FindArg(name)) {}\n+        ~TestFlags() { if (arg) arg->m_flags = prev_flags; }\n+        Arg* arg;\n+        unsigned int prev_flags = arg ? arg->m_flags : 0;\n+    };\n+    //! Call GetArgs(), temporarily enabling ALLOW_LIST so call can succeed.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17580#discussion_r364553512",
      "id" : 364553512,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDU1MzUxMg==",
      "original_commit_id" : "4f3e5e9988280ac96b7979c352da218bbf939ed0",
      "original_position" : 23,
      "path" : "src/test/util_tests.cpp",
      "position" : 23,
      "pull_request_review_id" : 340279414,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17580",
      "updated_at" : "2020-01-09T05:05:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364553512",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17580#discussion_r364559553"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17580"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364559553"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`gArgs.IsArgSet(\"-rpcauth\")` ?",
      "commit_id" : "4f3e5e9988280ac96b7979c352da218bbf939ed0",
      "created_at" : "2020-01-09T04:57:40Z",
      "diff_hunk" : "@@ -260,7 +260,7 @@ static bool InitRPCAuthentication()\n         LogPrintf(\"Config options rpcuser and rpcpassword will soon be deprecated. Locally-run instances may remove rpcuser to use cookie-based auth, or may be replaced with rpcauth. Please see share/rpcauth for rpcauth auth generation.\\n\");\n         strRPCUserColonPass = gArgs.GetArg(\"-rpcuser\", \"\") + \":\" + gArgs.GetArg(\"-rpcpassword\", \"\");\n     }\n-    if (gArgs.GetArg(\"-rpcauth\",\"\") != \"\")\n+    if (!gArgs.GetArgs(\"-rpcauth\").empty())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17580#discussion_r364559553",
      "id" : 364559553,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDU1OTU1Mw==",
      "original_commit_id" : "4bd1c3b1606021dff2b39a1927781b3c53428bbe",
      "original_position" : 5,
      "path" : "src/httprpc.cpp",
      "position" : 5,
      "pull_request_review_id" : 340279414,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17580",
      "updated_at" : "2020-01-09T05:05:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364559553",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17580#discussion_r364943182"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17580"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364943182"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Fix more ALLOW_LIST arguments\" (4bd1c3b1606021dff2b39a1927781b3c53428bbe)\r\n\r\n> `gArgs.IsArgSet(\"-rpcauth\")` ?\r\n\r\nThat would do the wrong thing if the argument is negated. `IsArgSet` is generally broken and misused for list settings (and a lot of non-list settings), see #17783",
      "commit_id" : "4f3e5e9988280ac96b7979c352da218bbf939ed0",
      "created_at" : "2020-01-09T20:23:27Z",
      "diff_hunk" : "@@ -260,7 +260,7 @@ static bool InitRPCAuthentication()\n         LogPrintf(\"Config options rpcuser and rpcpassword will soon be deprecated. Locally-run instances may remove rpcuser to use cookie-based auth, or may be replaced with rpcauth. Please see share/rpcauth for rpcauth auth generation.\\n\");\n         strRPCUserColonPass = gArgs.GetArg(\"-rpcuser\", \"\") + \":\" + gArgs.GetArg(\"-rpcpassword\", \"\");\n     }\n-    if (gArgs.GetArg(\"-rpcauth\",\"\") != \"\")\n+    if (!gArgs.GetArgs(\"-rpcauth\").empty())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17580#discussion_r364943182",
      "id" : 364943182,
      "in_reply_to_id" : 364559553,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk0MzE4Mg==",
      "original_commit_id" : "4bd1c3b1606021dff2b39a1927781b3c53428bbe",
      "original_position" : 5,
      "path" : "src/httprpc.cpp",
      "position" : 5,
      "pull_request_review_id" : 340791706,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17580",
      "updated_at" : "2020-01-09T21:10:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364943182",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17580#discussion_r364943251"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17580"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364943251"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Always enforce ALLOW_LIST in CheckArgFlags\" (4f3e5e9988280ac96b7979c352da218bbf939ed0)\r\n\r\n> I think it might be better to restructure the tests than have these special functions that tweak the flags.\r\n\r\nI'm not too inclined to want to restructure the tests, though I'd be happy to review a PR that did. I also wouldn't want to do it in this PR because I'd like the test changes here to reflect only reflect behavior that's changing, and not have other differences.",
      "commit_id" : "4f3e5e9988280ac96b7979c352da218bbf939ed0",
      "created_at" : "2020-01-09T20:23:37Z",
      "diff_hunk" : "@@ -190,6 +190,49 @@ struct TestArgsManager : public ArgsManager\n             AddArg(arg.first, \"\", arg.second, OptionsCategory::OPTIONS);\n         }\n     }\n+    //! Return registered argument information.\n+    Arg* FindArg(const std::string& name)\n+    {\n+        LOCK(cs_args);\n+        for (auto& category : m_available_args) {\n+            if (Arg* arg = util::FindKey(category.second, name)) {\n+                return arg;\n+            }\n+        }\n+        return nullptr;\n+    }\n+    //! Look up current registered argument flags so they can be modified, and\n+    //! restore them on destruction.\n+    struct TestFlags {\n+        TestFlags(TestArgsManager& test, const std::string& name) : arg(test.FindArg(name)) {}\n+        ~TestFlags() { if (arg) arg->m_flags = prev_flags; }\n+        Arg* arg;\n+        unsigned int prev_flags = arg ? arg->m_flags : 0;\n+    };\n+    //! Call GetArgs(), temporarily enabling ALLOW_LIST so call can succeed.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17580#discussion_r364943251",
      "id" : 364943251,
      "in_reply_to_id" : 364553512,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk0MzI1MQ==",
      "original_commit_id" : "4f3e5e9988280ac96b7979c352da218bbf939ed0",
      "original_position" : 23,
      "path" : "src/test/util_tests.cpp",
      "position" : 23,
      "pull_request_review_id" : 340791706,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17580",
      "updated_at" : "2020-01-09T21:10:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364943251",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17580#discussion_r364943290"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17580"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364943290"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Always enforce ALLOW_LIST in CheckArgFlags\" (4f3e5e9988280ac96b7979c352da218bbf939ed0):\r\n\r\nI see your point that CheckArgFlags is never called forbidding bool/int/string flags, so no need to update `forbid` and probably no reason to even want to, so I could make a simplification along those lines. I think I will at least drop the `forbid &= ~ignore_types` line.",
      "commit_id" : "4f3e5e9988280ac96b7979c352da218bbf939ed0",
      "created_at" : "2020-01-09T20:23:44Z",
      "diff_hunk" : "@@ -418,13 +418,18 @@ bool ArgsManager::CheckArgFlags(const std::string& name,\n {\n     Optional<unsigned int> flags = GetArgFlags(name);\n     if (!flags) return false;\n-    if (*flags & ArgsManager::ALLOW_ANY) return false;\n+\n+    unsigned int ignore_types = *flags & ALLOW_ANY ? ALLOW_BOOL | ALLOW_INT | ALLOW_STRING : 0;\n+    require &= ~ignore_types;\n+    forbid &= ~ignore_types;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17580#discussion_r364943290",
      "id" : 364943290,
      "in_reply_to_id" : 364551281,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk0MzI5MA==",
      "original_commit_id" : "4f3e5e9988280ac96b7979c352da218bbf939ed0",
      "original_position" : 8,
      "path" : "src/util/system.cpp",
      "position" : 201,
      "pull_request_review_id" : 340791706,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17580",
      "updated_at" : "2020-01-09T21:10:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364943290",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2020-01-30T22:50:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17580#issuecomment-580499194",
      "id" : 580499194,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17580",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4MDQ5OTE5NA==",
      "updated_at" : "2020-01-30T22:50:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/580499194",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-09-15T15:51:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17580#issuecomment-692807039",
      "id" : 692807039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17580",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MjgwNzAzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-15T15:51:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692807039",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
