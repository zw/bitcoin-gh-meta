[
   {
      "body" : "You know if you set txindex=1 this works without the blockhash, right?\r\n\r\nI guess this isn't so badÃ¢ÂÂ it's incompatible with pruning but so is txindex=1. ",
      "created_at" : "2013-03-29T01:50:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2421#issuecomment-15625353",
      "id" : 15625353,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2421",
      "updated_at" : "2013-03-29T01:50:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15625353",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Ok. But txindex requires reindex and it's bad for me (now).\r\n\r\n\"If you need that functionality, you must run once with -txindex -reindex to rebuild block-chain indices (see below for more details)\"\r\n",
      "created_at" : "2013-03-29T01:58:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2421#issuecomment-15625496",
      "id" : 15625496,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2421",
      "updated_at" : "2013-03-29T01:58:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15625496",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/155036?v=3",
         "events_url" : "https://api.github.com/users/silvioq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/silvioq/followers",
         "following_url" : "https://api.github.com/users/silvioq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/silvioq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/silvioq",
         "id" : 155036,
         "login" : "silvioq",
         "organizations_url" : "https://api.github.com/users/silvioq/orgs",
         "received_events_url" : "https://api.github.com/users/silvioq/received_events",
         "repos_url" : "https://api.github.com/users/silvioq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/silvioq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/silvioq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/silvioq"
      }
   },
   {
      "body" : "I'm unsure about this.\r\n\r\nOn the one hand, the blocks are available, and getblock() exists- it's stupid that it cannot give you the transactions in it.\r\n\r\nOn the other hand, I really don't want to encouraging services that depend on the presense of (indexable) block chain data in the first place.",
      "created_at" : "2013-03-29T02:06:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2421#issuecomment-15625637",
      "id" : 15625637,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2421",
      "updated_at" : "2013-03-29T02:06:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15625637",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Well ... Maybe you must check this addon with the user community and decide if this is useful/compatible/promotable or not. \r\n\r\nMeanwhile, as I say, the fork is fine for me now and I can use it.\r\n\r\nRegards (and sorry by my basic English!)",
      "created_at" : "2013-03-29T02:27:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2421#issuecomment-15626140",
      "id" : 15626140,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2421",
      "updated_at" : "2013-03-29T02:27:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15626140",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/155036?v=3",
         "events_url" : "https://api.github.com/users/silvioq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/silvioq/followers",
         "following_url" : "https://api.github.com/users/silvioq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/silvioq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/silvioq",
         "id" : 155036,
         "login" : "silvioq",
         "organizations_url" : "https://api.github.com/users/silvioq/orgs",
         "received_events_url" : "https://api.github.com/users/silvioq/received_events",
         "repos_url" : "https://api.github.com/users/silvioq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/silvioq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/silvioq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/silvioq"
      }
   },
   {
      "body" : "I don't feel strongly one way or the other; code looks fine, I haven't tested (only question: do you get a reasonable error message if you specify an invalid block hash?)",
      "created_at" : "2013-03-29T18:56:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2421#issuecomment-15655273",
      "id" : 15655273,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2421",
      "updated_at" : "2013-03-29T18:56:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15655273",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/303101f2da0550ff3b51693b65171b2b02d7f2d5 for binaries and test log.\nThis is an automated test script which runs test cases on each commit every time is updated.\nIt, however, dies sometimes and fails to test properly, if you are waiting on a test, please check timestamps and if the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nand contact BlueMatt on freenode if something looks broken.",
      "created_at" : "2013-03-30T09:04:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2421#issuecomment-15671601",
      "id" : 15671601,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2421",
      "updated_at" : "2013-03-30T09:04:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15671601",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/8b011a4871fab786913489abf3b78121a8452396 for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts (you can find the patches applied at test-time at http://jenkins.bluematt.me/pull-tester/files/patches/)\n2. It adds/modifies tests which test network rules (thanks for doing that), which conflicts with a patch applied at test time\n3. It does not build on either Linux i386 or Win32 (via MinGW cross compile)\n4. The test suite fails on either Linux i386 or Win32\n5. The block test-cases failed (lookup the first bNN identifier which failed in https://github.com/TheBlueMatt/test-scripts/blob/master/FullBlockTestGenerator.java)\n\nIf you believe this to be in error, please ping BlueMatt on freenode or TheBlueMatt here.\n\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2013-04-03T03:10:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2421#issuecomment-15815379",
      "id" : 15815379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2421",
      "updated_at" : "2013-04-03T03:10:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15815379",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "I'm interested in this feature as well. I like being able to parse transaction data, regardless of whether it has been spent or no.\r\n\r\nsilvioq, do you know why it failed to build? I can't access the build log.",
      "created_at" : "2013-05-21T19:23:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2421#issuecomment-18232670",
      "id" : 18232670,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2421",
      "updated_at" : "2013-05-21T19:23:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/18232670",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1069247?v=3",
         "events_url" : "https://api.github.com/users/runeksvendsen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/runeksvendsen/followers",
         "following_url" : "https://api.github.com/users/runeksvendsen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/runeksvendsen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/runeksvendsen",
         "id" : 1069247,
         "login" : "runeksvendsen",
         "organizations_url" : "https://api.github.com/users/runeksvendsen/orgs",
         "received_events_url" : "https://api.github.com/users/runeksvendsen/received_events",
         "repos_url" : "https://api.github.com/users/runeksvendsen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/runeksvendsen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/runeksvendsen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/runeksvendsen"
      }
   },
   {
      "body" : "So, some more thoughts. The generic problem this pullreq tries to solve is very worthwhile: right now, we have the full blocks stored and indexed, but retrieving anything more than the headers and the txids in them is not possible without txindex=1. This shouldn't be necessary - just a sequential scan through the blocks is perfectly meaningful.\r\n\r\nI'm still unconvinced about the implementation though. Doing such a sequential scan using this code here results in every block being read from disk and parsed N times, with N the number of transactions in it - only to fetch a single one from it. I have some suggestions for alternatives, but neither is perfect imho either:\r\n* Add a mode to getblock to inline the full transactions (efficient, but huge RPC replies, and unable to filter transactions you don't care about)\r\n* Add a mode to getblock which adds opaque transaction pointers to the output (e.g. block file number + position + size encoded in some form, or block hash + offset, or even just txids itself). The client isn't supposed to interpret these transaction pointers in any way, but pass them on to getrawtransaction. Ugly, but efficient and flexible.\r\n* Cache the last block read through getblock, so getrawtransaction (which takes the block hash, as implemented here) can just scan through it. Nice solution, but what if access isn't entirely sequential?\r\n* Cache the positions of transactions of the last few blocks read through getblock, so they can be read directly. Not a trivial change anymore though, ...\r\n",
      "created_at" : "2013-06-15T14:59:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2421#issuecomment-19497727",
      "id" : 19497727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2421",
      "updated_at" : "2013-06-15T15:00:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/19497727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Agree w/ @sipa.  This functionality is OK to have, but in a different form.\r\n\r\nThe first suggestion is the most powerful, and would seem to solve many common requests:  'getblock' simply returns a full block, including all transactions.\r\n\r\nClosing, as consensus seems to point elsewhere.",
      "created_at" : "2013-06-24T14:54:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2421#issuecomment-19912040",
      "id" : 19912040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2421",
      "updated_at" : "2013-06-24T14:54:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/19912040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   }
]
