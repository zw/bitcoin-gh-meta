[
   {
      "body" : "I think this is just the tor browser-bundle specific. Tor itself still listens on 9050.\r\n",
      "created_at" : "2013-04-06T19:39:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2475#issuecomment-16002624",
      "id" : 16002624,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2475",
      "updated_at" : "2013-04-06T19:39:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16002624",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Yes. System Tor uses 9050 and TBB uses 9150.",
      "created_at" : "2013-04-10T04:32:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2475#issuecomment-16154975",
      "id" : 16154975,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2475",
      "updated_at" : "2013-04-10T04:32:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16154975",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1985040?v=3",
         "events_url" : "https://api.github.com/users/adrelanos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adrelanos/followers",
         "following_url" : "https://api.github.com/users/adrelanos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adrelanos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adrelanos",
         "id" : 1985040,
         "login" : "adrelanos",
         "organizations_url" : "https://api.github.com/users/adrelanos/orgs",
         "received_events_url" : "https://api.github.com/users/adrelanos/received_events",
         "repos_url" : "https://api.github.com/users/adrelanos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adrelanos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adrelanos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adrelanos"
      }
   },
   {
      "body" : "Might it be worth adding an option for trying 9150 after 9050 as many users use TBB rather than straight Tor? Or defaulting to 9150? Could there be a security risk from using just -proxy rather than -proxy with -nodnsseed? (IIRC the -proxy when it detects Tor no longer does DNS seed and -noirc)",
      "created_at" : "2013-04-10T04:41:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2475#issuecomment-16155181",
      "id" : 16155181,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2475",
      "updated_at" : "2013-04-10T04:41:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16155181",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2402779?v=3",
         "events_url" : "https://api.github.com/users/keystrike/events{/privacy}",
         "followers_url" : "https://api.github.com/users/keystrike/followers",
         "following_url" : "https://api.github.com/users/keystrike/following{/other_user}",
         "gists_url" : "https://api.github.com/users/keystrike/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/keystrike",
         "id" : 2402779,
         "login" : "keystrike",
         "organizations_url" : "https://api.github.com/users/keystrike/orgs",
         "received_events_url" : "https://api.github.com/users/keystrike/received_events",
         "repos_url" : "https://api.github.com/users/keystrike/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/keystrike/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/keystrike/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/keystrike"
      }
   },
   {
      "body" : "The underlying issue here is that we detect tor-ness (and thus extra\nanonymity features) of a socks proxy based on the port. Currently this is\nonly 9050. This isn't a very flexible or robust approach.\n\nAny better suggestions?",
      "created_at" : "2013-04-10T07:23:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2475#issuecomment-16159206",
      "id" : 16159206,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2475",
      "updated_at" : "2013-04-10T07:23:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16159206",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Here are the Tor SOCKS extensions:\r\nhttps://gitweb.torproject.org/torspec.git?a=blob_plain;hb=HEAD;f=socks-extensions.txt\r\n\r\nThis could be used to detect Tor:\r\n4. HTTP-resistance\r\n\r\n  Tor checks the first byte of each SOCKS request to see whether it looks\r\n  more like an HTTP request (that is, it starts with a \"G\", \"H\", or \"P\").  If\r\n  so, Tor returns a small webpage, telling the user that his/her browser is\r\n  misconfigured.  This is helpful for the many users who mistakenly try to\r\n  use Tor as an HTTP proxy instead of a SOCKS proxy.\r\n\r\nA bit of a hack though... but if it returns then we are on Tor.",
      "created_at" : "2013-04-10T07:40:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2475#issuecomment-16159759",
      "id" : 16159759,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2475",
      "updated_at" : "2013-04-10T07:40:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16159759",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2402779?v=3",
         "events_url" : "https://api.github.com/users/keystrike/events{/privacy}",
         "followers_url" : "https://api.github.com/users/keystrike/followers",
         "following_url" : "https://api.github.com/users/keystrike/following{/other_user}",
         "gists_url" : "https://api.github.com/users/keystrike/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/keystrike",
         "id" : 2402779,
         "login" : "keystrike",
         "organizations_url" : "https://api.github.com/users/keystrike/orgs",
         "received_events_url" : "https://api.github.com/users/keystrike/received_events",
         "repos_url" : "https://api.github.com/users/keystrike/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/keystrike/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/keystrike/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/keystrike"
      }
   },
   {
      "body" : "> The underlying issue here is that we detect tor-ness (and thus extra anonymity features) of a socks proxy based on the port.\r\n\r\nNo we don't. We used to a long time ago, we do not now. \"DNS\"seed even works safely over a proxy now. Nowhere in the code does it try to figure out if we're using tor based on the port-numbersÃ¢ÂÂ the only place 9050 shows up is in the default port used for the proxy and tor settings.\r\n\r\n",
      "created_at" : "2013-04-10T08:53:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2475#issuecomment-16162488",
      "id" : 16162488,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2475",
      "updated_at" : "2013-04-10T08:55:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16162488",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "In that case, why is this an issue at all? Just use the new port in your\nproxy settings.",
      "created_at" : "2013-04-10T09:07:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2475#issuecomment-16163012",
      "id" : 16163012,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2475",
      "updated_at" : "2013-04-10T09:07:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16163012",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Thanks gmaxwell, I didn't realize dnsseed worked safely over a proxy. So there are no known leaks when using a proxy?\r\n\r\nI received this from the Tor team:\r\n\"After a quick look at the code (or/buffers.c:parse_socks), it looks like\r\nthere's a way, but it is a little bit of a hack. To help users that\r\nhave misconfigured their browser to use Tor as an HTTP proxy, Tor\r\nwill answer to HTTP-like requests with:\r\n\r\n    HTTP/1.0 501 Tor is not an HTTP Proxy\r\n\r\nWhich is further followed by a valid HTTP/1.0 response. I am not sure that\r\nis is a good idea to rely on this behaviour.\r\n\r\nPlease also note that, overall, it might be a bad idea to encourage users\r\nto mix the Tor instance used for browsing purpose with software that use\r\nidentity keys and longer connections. It probably can provide some more\r\nhints to an observer to link, in your case, Bitcoin activity to the visited\r\nweb sites.\"",
      "created_at" : "2013-04-10T17:21:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2475#issuecomment-16188624",
      "id" : 16188624,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2475",
      "updated_at" : "2013-04-10T17:21:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16188624",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2402779?v=3",
         "events_url" : "https://api.github.com/users/keystrike/events{/privacy}",
         "followers_url" : "https://api.github.com/users/keystrike/followers",
         "following_url" : "https://api.github.com/users/keystrike/following{/other_user}",
         "gists_url" : "https://api.github.com/users/keystrike/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/keystrike",
         "id" : 2402779,
         "login" : "keystrike",
         "organizations_url" : "https://api.github.com/users/keystrike/orgs",
         "received_events_url" : "https://api.github.com/users/keystrike/received_events",
         "repos_url" : "https://api.github.com/users/keystrike/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/keystrike/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/keystrike/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/keystrike"
      }
   },
   {
      "body" : "Can be closed AFAIK, as bitcoin does nothing specific depending on what the proxy port is anymore. Users that have Tor running on port 9150 should simply configure the client to use that port.\r\n",
      "created_at" : "2013-10-21T10:29:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2475#issuecomment-26706497",
      "id" : 26706497,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2475",
      "updated_at" : "2013-10-21T10:29:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26706497",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
