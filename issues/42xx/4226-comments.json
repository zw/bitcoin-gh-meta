[
   {
      "body" : "That turns it into not a pure utility function anymore. I'm not sure I like\nthat.",
      "created_at" : "2014-05-23T18:33:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-44045311",
      "id" : 44045311,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-05-23T18:33:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44045311",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Agreed, but as a practical matter most of the time I use decoderawtransaction I care about the inputs.\r\n\r\nI also worry about the performance hit if someone is doing tons of decoderawtransactions for some reason: the new impure behaviour involves a utxo search for every input.\r\n\r\nWhat if I added a flag (default off) to get this new behaviour?",
      "created_at" : "2014-05-23T18:35:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-44045673",
      "id" : 44045673,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-05-23T18:50:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44045673",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1351933?v=3",
         "events_url" : "https://api.github.com/users/apoelstra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/apoelstra/followers",
         "following_url" : "https://api.github.com/users/apoelstra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/apoelstra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/apoelstra",
         "id" : 1351933,
         "login" : "apoelstra",
         "organizations_url" : "https://api.github.com/users/apoelstra/orgs",
         "received_events_url" : "https://api.github.com/users/apoelstra/received_events",
         "repos_url" : "https://api.github.com/users/apoelstra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/apoelstra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/apoelstra"
      }
   },
   {
      "body" : "I think it may be useful to have an RPC to look this information up, but agree with @sipa that it doesn't belong in decoderawtransaction. Decoderawtransaction should to just that, decode a transaction.\r\n",
      "created_at" : "2014-05-23T19:51:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-44053165",
      "id" : 44053165,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-05-23T19:51:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44053165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "::nods:: just split out the rpc, and perhaps the other one should only work if txindex=1 so that it can always give complete results rather than 'mysteriously' failing to expand some transactions?",
      "created_at" : "2014-05-24T00:07:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-44071741",
      "id" : 44071741,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-05-24T00:07:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44071741",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "I don't think we want to fail on txindex=0. If someone without -txindex is using the raw transaction API chances are they're spending their own money, so their wallet will know the inputs.\r\n\r\nI'll split out the RPC to leave decoderawtransaction alone and add a new \"explainrawtransaction\" which does an input decode, or fails with a nice message if any input is unknown.",
      "created_at" : "2014-05-24T20:33:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-44099125",
      "id" : 44099125,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-05-24T20:33:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44099125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1351933?v=3",
         "events_url" : "https://api.github.com/users/apoelstra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/apoelstra/followers",
         "following_url" : "https://api.github.com/users/apoelstra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/apoelstra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/apoelstra",
         "id" : 1351933,
         "login" : "apoelstra",
         "organizations_url" : "https://api.github.com/users/apoelstra/orgs",
         "received_events_url" : "https://api.github.com/users/apoelstra/received_events",
         "repos_url" : "https://api.github.com/users/apoelstra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/apoelstra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/apoelstra"
      }
   },
   {
      "body" : "Can you have it display the fees and priority too?\r\n\r\nI'm not quite sure how to handle the case of the fee when not all the inputs could be resolved though. Omitting it might give the impression that there is no fee.",
      "created_at" : "2014-05-24T20:35:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-44099176",
      "id" : 44099176,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-05-24T20:38:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44099176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Oh, excellent idea. I think in the case that any inputs can't be resolved, we should just fail and recommend decoderawtransaction instead.\r\n",
      "created_at" : "2014-05-25T02:37:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-44109883",
      "id" : 44109883,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-05-25T02:37:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44109883",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1351933?v=3",
         "events_url" : "https://api.github.com/users/apoelstra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/apoelstra/followers",
         "following_url" : "https://api.github.com/users/apoelstra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/apoelstra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/apoelstra",
         "id" : 1351933,
         "login" : "apoelstra",
         "organizations_url" : "https://api.github.com/users/apoelstra/orgs",
         "received_events_url" : "https://api.github.com/users/apoelstra/received_events",
         "repos_url" : "https://api.github.com/users/apoelstra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/apoelstra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/apoelstra"
      }
   },
   {
      "body" : "Oh, duh good point.\r\n\r\nSo one issue is that you ought to be able to give it multiple transactions, e.g. a chain of unconfirmed transactions so that it can resolve those even if they aren't mempooled yet. This might be more complex than you want to handle right now, but when setting up the api keep that in mind thatÃ¢ÂÂ if you agreeÃ¢ÂÂ it might make sense to make the output a list.",
      "created_at" : "2014-05-25T02:59:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-44110146",
      "id" : 44110146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-05-25T02:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44110146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "OK, I have refreshed the PR with the new explainrawtransaction RPC. I put the output in a list as suggested and added a TODO note to support chaining transactions together, since I would indeed like that feature eventually.",
      "created_at" : "2014-05-25T04:26:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-44111178",
      "id" : 44111178,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-05-25T04:26:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44111178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1351933?v=3",
         "events_url" : "https://api.github.com/users/apoelstra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/apoelstra/followers",
         "following_url" : "https://api.github.com/users/apoelstra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/apoelstra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/apoelstra",
         "id" : 1351933,
         "login" : "apoelstra",
         "organizations_url" : "https://api.github.com/users/apoelstra/orgs",
         "received_events_url" : "https://api.github.com/users/apoelstra/received_events",
         "repos_url" : "https://api.github.com/users/apoelstra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/apoelstra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/apoelstra"
      }
   },
   {
      "body" : ">  are they're spending their own money, so their wallet will know the inputs\r\n\r\n@apoelstra but this doesn't look in the wallet at all, does it?",
      "created_at" : "2014-05-25T08:12:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-44123801",
      "id" : 44123801,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-05-25T08:13:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44123801",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj it does not, but neither does gettxout and I recall that working for wallet transactions (somehow) back when I had a non-txindex node. Perhaps this was just coincidence (or I am misremembering). Can you clarify this?",
      "created_at" : "2014-05-25T14:47:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-44135314",
      "id" : 44135314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-05-25T14:47:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44135314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1351933?v=3",
         "events_url" : "https://api.github.com/users/apoelstra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/apoelstra/followers",
         "following_url" : "https://api.github.com/users/apoelstra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/apoelstra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/apoelstra",
         "id" : 1351933,
         "login" : "apoelstra",
         "organizations_url" : "https://api.github.com/users/apoelstra/orgs",
         "received_events_url" : "https://api.github.com/users/apoelstra/received_events",
         "repos_url" : "https://api.github.com/users/apoelstra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/apoelstra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/apoelstra"
      }
   },
   {
      "body" : "@apoelstra That may have to do with the transactions coincidentally being in the mempool or UTXO set as well. It doesn't check the wallet in any way (and probably shouldn't, in the interest of keeping it general and independent of wallet-enabled or not).",
      "created_at" : "2014-06-23T08:06:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-46816141",
      "id" : 46816141,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-06-23T08:07:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46816141",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "BTW: isn't all this information already available through the current API?\r\n\r\nSure, it'd require a second pass where you call gettxout for the inputs, but I would prefer it that way. It would avoid adding the coinsview logic into TxToJSON, which looks like confusing concerns (and messy) to me.",
      "created_at" : "2014-06-23T08:11:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-46816538",
      "id" : 46816538,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-06-23T08:11:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46816538",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Yes, the information is all available through the current API. (This is why I tried to tackle it despite my unclear understanding of where what data is stored Ã¢ÂÂ I could just look at the other RPCs!)\r\n\r\nThe usecase here is verification of user-created rawtransactions. Using the current API you need to call gettxout for every input, sum their values and calculate the fee, all of which offer opportunity for mistakes. I'd expect frequent users of the current API write their own shell tools around bitcoin-cli to accomplish all that. Since bitcoind has all the available information and this is good practice before every signrawtransaction, I think it should be its own RPC.\r\n\r\nAs for adding the coinsview stuff to TxToJSON, I definitely agree with you from a code cleanliness perspective. It's an artifact of my initial approach to extend decoderawtransaction. I'll push a new commit which pulls the coinsview logic into the explainrawtransaction function call where it belongs.",
      "created_at" : "2014-06-23T14:54:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-46855652",
      "id" : 46855652,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-06-23T18:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46855652",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1351933?v=3",
         "events_url" : "https://api.github.com/users/apoelstra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/apoelstra/followers",
         "following_url" : "https://api.github.com/users/apoelstra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/apoelstra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/apoelstra",
         "id" : 1351933,
         "login" : "apoelstra",
         "organizations_url" : "https://api.github.com/users/apoelstra/orgs",
         "received_events_url" : "https://api.github.com/users/apoelstra/received_events",
         "repos_url" : "https://api.github.com/users/apoelstra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/apoelstra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/apoelstra"
      }
   },
   {
      "body" : "I haven't yet tested the various failure modes (only the syntax-error unit tests included in the commit), but I'm throwing this out there for comments on the design.",
      "created_at" : "2014-06-25T18:26:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-47139854",
      "id" : 47139854,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-06-25T18:26:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47139854",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1351933?v=3",
         "events_url" : "https://api.github.com/users/apoelstra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/apoelstra/followers",
         "following_url" : "https://api.github.com/users/apoelstra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/apoelstra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/apoelstra",
         "id" : 1351933,
         "login" : "apoelstra",
         "organizations_url" : "https://api.github.com/users/apoelstra/orgs",
         "received_events_url" : "https://api.github.com/users/apoelstra/received_events",
         "repos_url" : "https://api.github.com/users/apoelstra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/apoelstra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/apoelstra"
      }
   },
   {
      "body" : "Oops, in the last commit I had moved the coinsview logic into explainrawtransaction, but forgot to remove it from TxToJSON. This push fixes that, so TxToJSON is untouched. Now the commit is entirely added code for the new RPC.\r\n\r\nNote that wallet transactions are now considered first when looking for inputs, and moving to the mempool and txindex if this fails. So there should be no requirement on txindex for wallet transactions now.",
      "created_at" : "2014-06-25T19:10:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-47145035",
      "id" : 47145035,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-06-25T19:10:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47145035",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1351933?v=3",
         "events_url" : "https://api.github.com/users/apoelstra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/apoelstra/followers",
         "following_url" : "https://api.github.com/users/apoelstra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/apoelstra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/apoelstra",
         "id" : 1351933,
         "login" : "apoelstra",
         "organizations_url" : "https://api.github.com/users/apoelstra/orgs",
         "received_events_url" : "https://api.github.com/users/apoelstra/received_events",
         "repos_url" : "https://api.github.com/users/apoelstra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/apoelstra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/apoelstra"
      }
   },
   {
      "body" : "Concept ACK.  Needs rebase + re-review by others, due to amount of change since first posting.  Feedback:\r\n\r\n* Minor: RPCTypeCheck() replaces manually verifying a JSON object's member types\r\n* Avoid directly locking and accessing the mempool.  Update CTxMemPool class with a helper you need, and then use that helper in your code.\r\n* Updating the PR title and description would be helpful\r\n",
      "created_at" : "2014-07-29T17:03:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-50506060",
      "id" : 50506060,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-07-29T17:03:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50506060",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Thanks @jgarzik. I've rebased the PR and replaced the typechecks with `RPCTypeCheck`.\r\n\r\nI'm not sure what you mean by \"update CTxMemPool with a helper\". I'm locking the pool, looking up a utxo, then unlocking it. (The `gettxout` RPC does this too.) How should that be refactored?",
      "created_at" : "2014-07-29T23:33:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-50553997",
      "id" : 50553997,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-07-29T23:33:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50553997",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1351933?v=3",
         "events_url" : "https://api.github.com/users/apoelstra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/apoelstra/followers",
         "following_url" : "https://api.github.com/users/apoelstra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/apoelstra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/apoelstra",
         "id" : 1351933,
         "login" : "apoelstra",
         "organizations_url" : "https://api.github.com/users/apoelstra/orgs",
         "received_events_url" : "https://api.github.com/users/apoelstra/received_events",
         "repos_url" : "https://api.github.com/users/apoelstra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/apoelstra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/apoelstra"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4226_1c20f52cc412ee9c2714fc09b8cd6deea983547d/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-07-30T00:00:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-50556539",
      "id" : 50556539,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-07-30T00:00:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50556539",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "I agree with @jgarzik that ideally all mempool-touching code should be refactored into methods inside CTxMempool, but the code right now violates this pretty much everywhere. I don't think it's reasonable to ask that here.",
      "created_at" : "2014-07-30T00:09:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-50557201",
      "id" : 50557201,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-07-30T00:09:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50557201",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "No, not asking for a refactor.  The general principle is \"don't make the situation worse\"\r\n\r\nTo be specific, the lock should ideally be only taken inside the mempool class, and the code is slowly being migrated in that direction.  We don't want to move in the opposite direction, do the \"ugly\" thing (take lock manually, touch mempool internals manually) without a good reason.\r\n\r\nThat means\r\n* Avoid adding new places outside CTxMemPool that take the mempool lock, and reach a hand into the mempool's internals.\r\n* If you find yourself needing to do that, then create a new method inside CTxMemPool class that satisfies the mempool manipulation or query you wish to accomplish.  That was the genesis of CTxMemPool::addUnchecked() and CTxMemPool::queryHashes().\r\n\r\nIs this PR a necessary exception to that general migration?\r\n",
      "created_at" : "2014-07-30T02:26:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-50566467",
      "id" : 50566467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-07-30T02:26:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50566467",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "I like this functionality in principal. Will be nice not to have to rely on 3rd party apps like insight-api.",
      "created_at" : "2014-08-21T00:49:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-52865680",
      "id" : 52865680,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-08-21T00:49:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/52865680",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "Hi @btcdrak, thanks for the heads up. I think the only blocker right now is @jgarzik's suggested refactoring (which is no big deal, this PR just got bumped to the back burner and I forgot about it).\r\n\r\nWill try to have it together this week.",
      "created_at" : "2014-08-21T02:57:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-52872919",
      "id" : 52872919,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-08-21T02:57:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/52872919",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1351933?v=3",
         "events_url" : "https://api.github.com/users/apoelstra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/apoelstra/followers",
         "following_url" : "https://api.github.com/users/apoelstra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/apoelstra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/apoelstra",
         "id" : 1351933,
         "login" : "apoelstra",
         "organizations_url" : "https://api.github.com/users/apoelstra/orgs",
         "received_events_url" : "https://api.github.com/users/apoelstra/received_events",
         "repos_url" : "https://api.github.com/users/apoelstra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/apoelstra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/apoelstra"
      }
   },
   {
      "body" : "Ping\r\n",
      "created_at" : "2014-10-13T15:17:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-58907074",
      "id" : 58907074,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-10-13T15:17:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58907074",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Pong. I have not forgotten about this, it's just on the back burner because I need to learn more of the codebase to implement the changes you requested.\r\n\r\nI'll rebase it today.",
      "created_at" : "2014-10-13T17:39:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4226#issuecomment-58927879",
      "id" : 58927879,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4226",
      "updated_at" : "2014-10-13T17:39:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58927879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1351933?v=3",
         "events_url" : "https://api.github.com/users/apoelstra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/apoelstra/followers",
         "following_url" : "https://api.github.com/users/apoelstra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/apoelstra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/apoelstra",
         "id" : 1351933,
         "login" : "apoelstra",
         "organizations_url" : "https://api.github.com/users/apoelstra/orgs",
         "received_events_url" : "https://api.github.com/users/apoelstra/received_events",
         "repos_url" : "https://api.github.com/users/apoelstra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/apoelstra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/apoelstra"
      }
   }
]
