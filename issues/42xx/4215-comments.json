[
   {
      "body" : "untested ACK, code changes OK\r\n",
      "created_at" : "2014-05-23T09:41:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-43989643",
      "id" : 43989643,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-23T09:41:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/43989643",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "untested ACK",
      "created_at" : "2014-05-23T10:35:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-43993583",
      "id" : 43993583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-23T10:35:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/43993583",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I did the testing locally, any thing I need to do for pushing the commit?",
      "created_at" : "2014-05-23T12:15:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44002054",
      "id" : 44002054,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-23T12:15:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44002054",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "body" : "By using async getaddrinfo_a() instead of getaddrinfo() in netbase.cpp::LookupIntern(), the responsiveness issue of dnsseed thread is finally resolved.\r\n\r\nAnd to note:  With the 2nd commit in this pull request, the 1st one is not necessary now, although leaving it there would cause no problem.",
      "created_at" : "2014-05-24T04:21:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44077372",
      "id" : 44077372,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-24T04:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44077372",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "body" : "@laanwj @sipa You'll need to re-review/re-ACK this pull.",
      "created_at" : "2014-05-24T04:34:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44077550",
      "id" : 44077550,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-24T04:34:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44077550",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "body" : "Sorry, the previous building error was caused by missing the libanl, added it in last commit.\r\n\r\nHave done a clean rebuilding and testing locally, please kindly have a review.  Thanks.",
      "created_at" : "2014-05-24T10:55:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44083982",
      "id" : 44083982,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-24T10:55:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44083982",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4215#discussion_r13026976"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4215"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13026976"
         }
      },
      "body" : "Please tie this check to the function and not glibc's usage, in case other libc's (uclibc, musl, etc) implement it as part of libc itself:\r\n```\r\nAC_SEARCH_LIBS([getaddrinfo_a], [anl], [AC_DEFINE(HAVE_GETADDRINFO_A, 1,[Define this symbol if you have getaddrinfo_a])])\r\n```\r\nThen in code, use: ```#if defined(HAVE_GETADDRINFO_A)```",
      "commit_id" : "978d2881b00fbc98789b64e8ed2ec4bd2e8fadc5",
      "created_at" : "2014-05-24T16:20:14Z",
      "diff_hunk" : "@@ -367,6 +367,7 @@ if test x$TARGET_OS = xdarwin; then\n fi\n \n AC_CHECK_HEADERS([stdio.h stdlib.h unistd.h strings.h sys/types.h sys/stat.h])\n+AC_CHECK_LIB(anl, getaddrinfo_a)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#discussion_r13026976",
      "id" : 13026976,
      "original_commit_id" : "f721cca4424f1752706625049c34dcacac217032",
      "original_position" : 4,
      "path" : "configure.ac",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4215",
      "updated_at" : "2014-05-27T16:33:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13026976",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@theuni Thanks, done as you suggested in last commit.",
      "created_at" : "2014-05-24T17:26:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44093751",
      "id" : 44093751,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-24T17:26:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44093751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4215#discussion_r13030203"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4215"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13030203"
         }
      },
      "body" : "Is the `defined(_GNU_SOURCE)` necessary here? (i.e. isn't HAVE_GETADDRINFO_A in itself enough to know that the function exists?)",
      "commit_id" : "978d2881b00fbc98789b64e8ed2ec4bd2e8fadc5",
      "created_at" : "2014-05-25T10:48:52Z",
      "diff_hunk" : "@@ -82,8 +88,32 @@ bool static LookupIntern(const char *pszName, std::vector<CNetAddr>& vIP, unsign\n #else\n     aiHint.ai_flags = fAllowLookup ? AI_ADDRCONFIG : AI_NUMERICHOST;\n #endif\n+\n     struct addrinfo *aiRes = NULL;\n+#if defined(_GNU_SOURCE) && defined(HAVE_GETADDRINFO_A)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#discussion_r13030203",
      "id" : 13030203,
      "original_commit_id" : "07fd1d63a6ff0486a36f097448bdd2be07ee9d93",
      "original_position" : 35,
      "path" : "src/netbase.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4215",
      "updated_at" : "2014-05-27T16:33:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13030203",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4215#discussion_r13030317"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4215"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13030317"
         }
      },
      "body" : "Indeed, it's unnecessary in my dev environment, but I just added it for if someone was building with an older toolchain, although such a toolchain might fail to get HAVE_GETADDRINFO_A defined by configure script at the first place, but just in case.\r\n\r\nSure it should be pretty safe to remove the macro definition check, I'd like to do that if you think that is desired, but it could be even safer (ok, quite little) to leave it there:)",
      "commit_id" : "978d2881b00fbc98789b64e8ed2ec4bd2e8fadc5",
      "created_at" : "2014-05-25T11:21:04Z",
      "diff_hunk" : "@@ -82,8 +88,32 @@ bool static LookupIntern(const char *pszName, std::vector<CNetAddr>& vIP, unsign\n #else\n     aiHint.ai_flags = fAllowLookup ? AI_ADDRCONFIG : AI_NUMERICHOST;\n #endif\n+\n     struct addrinfo *aiRes = NULL;\n+#if defined(_GNU_SOURCE) && defined(HAVE_GETADDRINFO_A)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#discussion_r13030317",
      "id" : 13030317,
      "original_commit_id" : "07fd1d63a6ff0486a36f097448bdd2be07ee9d93",
      "original_position" : 35,
      "path" : "src/netbase.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4215",
      "updated_at" : "2014-05-27T16:33:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13030317",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4215#discussion_r13030544"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4215"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13030544"
         }
      },
      "body" : "@laanwj Yes, I consider the situation for a while and come to agree on your point: we should remove the _GNU_SOURCE macro definition checking because someone might build it with another libc implementation, and in such a case, the _GNU_SOURCE was unlikely defined by the compiler but the getaddrinfo_a() could have been implemented in the c library itself.\r\n\r\nWill submit a commit immediately.  Thanks for your kind review!",
      "commit_id" : "978d2881b00fbc98789b64e8ed2ec4bd2e8fadc5",
      "created_at" : "2014-05-25T12:20:20Z",
      "diff_hunk" : "@@ -82,8 +88,32 @@ bool static LookupIntern(const char *pszName, std::vector<CNetAddr>& vIP, unsign\n #else\n     aiHint.ai_flags = fAllowLookup ? AI_ADDRCONFIG : AI_NUMERICHOST;\n #endif\n+\n     struct addrinfo *aiRes = NULL;\n+#if defined(_GNU_SOURCE) && defined(HAVE_GETADDRINFO_A)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#discussion_r13030544",
      "id" : 13030544,
      "original_commit_id" : "07fd1d63a6ff0486a36f097448bdd2be07ee9d93",
      "original_position" : 35,
      "path" : "src/netbase.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4215",
      "updated_at" : "2014-05-27T16:33:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13030544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "body" : "@laanwj Done.  Hope it is the last commit for this pull request. :)",
      "created_at" : "2014-05-25T12:31:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44129807",
      "id" : 44129807,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-25T12:31:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44129807",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "body" : "Does this launch a new thread for each resolve? If so, I think it would be necessary to do a quick probe at random times to see what the thread count looks like before/after this change. If it's a drastic change, this will need some sort of rate-limiting.\r\n\r\nAlso (not necessary for this PR), it might be beneficial to maintain a global resolve list in some class so that a single tight loop can be checking the status of all resolves simultaneously, rather than each resolve getting its own loop. From the examples of getaddrinfo_a in the man pages, it seems that's how it is meant to be used.",
      "created_at" : "2014-05-26T18:51:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44210655",
      "id" : 44210655,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-26T18:51:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44210655",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@theuni Yes, the getaddrinfo_a() call does kick off a new thread for resolving the name and poll on it in its own thread.  So when there is one resolving job, there would be one more thread than before this change.\r\n\r\nHowever, the real name resolving job happens mostly, if not only, in dnsseed thread.  To all other calls to the LookupIntern() function, they are generally kicked off by the constructor of CNetAddr which actually just want to convert a string address into a network address structure, and this kind of job, which is not a real name resolving one, can be done without getaddrinfo(), but a lighter inet_aton().  By detecting this case, we can dramatically reduce the overhead of getaddrinfo(), and in general there should be only one more thread and only when dnsseed thread is running.\r\n\r\nWill submit a patch for this PR according to the above soon.\r\n\r\nFor the global resolver idea, one thing need to pointed out is that it doesn't reduce the thread count but add one (the global resolver itself) instead, while it is extremely helpful for the throughput if there were lots of *real async* name resolving jobs kicked off simultaneously and the kickers don't need the result immediately.  But as mentioned above, the dnsseed seems the only one needs the result of a real name resolving, and it works in a sync manner, so the global resolver doesn't help here.  Actually why we switch to a async getaddrinfo_a() is just for responsiveness purpose but not throughput.  We can absolutely rewrite the dnsseed thread to let it work in an async manner and improve its throughput, but given it's only running for several minutes, or tens of minutes if the network situation is really bad, before exiting, it doesn't worth the effort I guess.  Or maybe later if we figure out the effort is really needed.",
      "created_at" : "2014-05-27T05:22:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44236856",
      "id" : 44236856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-27T06:04:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44236856",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "body" : "@theuni, @4tar This is starting to be too complicated. Don't get too deep in this rabbit hole. I would accept this simple patch, but I don't want to merge a whole thread/job management system just so that interruption can happen sooner.\r\n\r\nWe already have boost::asio for that, if really necessary. No need to replicate its functionality.\r\n\r\nBut is the number of threads created by the async resolve really that bad that we need some complex system to work around it? Are we using the resolver this intensively at all? Does it create DoS risk?\r\n",
      "created_at" : "2014-05-27T07:30:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44243431",
      "id" : 44243431,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-27T07:37:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44243431",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Interesting, looks like the i586-mingw32msvc-g++ building env doesn't have inet_pton() defined.  Will submit a patch to AC_SEARCH_LIB for it.",
      "created_at" : "2014-05-27T07:41:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44244134",
      "id" : 44244134,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-27T07:41:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44244134",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "body" : "@laanwj I agree with you that we don't really need an async resolver now, so I just add a inet_pton()/inet_addr() call in the LookupIntern() before issuing the getaddrinfo_a(), so that we can avoid kicking off a new resolving thread inside the latter, when the caller just want to convert an ip addr text to an ip addr structure, which, as we have discussed above, is the most cases that the LookupIntern() get called.  By doing this, we have already removed the possible thread count problems.\r\n\r\nHope I have cleared mingw env building error in last commit...",
      "created_at" : "2014-05-27T08:09:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44246243",
      "id" : 44246243,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-27T08:09:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44246243",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "body" : "@4tar: I'm not very familiar with the networking code, so I'll give your analysis the benefit of the doubt. Thanks for addressing my thread-count concern.\r\n\r\nAs for inet_pton, please add \"nsl resolv\" to the list of libs where it may be found (the empty 2nd param).",
      "created_at" : "2014-05-27T15:31:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44292179",
      "id" : 44292179,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-27T15:31:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44292179",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@theuni Thanks for your review! Setting up a correct lib list is always a mystery to me...",
      "created_at" : "2014-05-27T16:28:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44300126",
      "id" : 44300126,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-27T16:28:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44300126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/978d2881b00fbc98789b64e8ed2ec4bd2e8fadc5 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-05-27T16:58:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44303832",
      "id" : 44303832,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-27T16:58:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44303832",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "@laanwj Anything I can do to make this PR be merged a little bit soon?  It passed the test and I believe it is ready.\r\n\r\nThe reason I'm asking is that I made a mistake to commit directly on my master branch and send the PR, so the pending causes big issue on my branch management...",
      "created_at" : "2014-05-29T04:11:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44492691",
      "id" : 44492691,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-29T04:11:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44492691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "body" : "OK, I'm closing this RP and will re-submit it from another branch...",
      "created_at" : "2014-05-30T12:51:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4215#issuecomment-44646980",
      "id" : 44646980,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4215",
      "updated_at" : "2014-05-30T12:51:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44646980",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   }
]
