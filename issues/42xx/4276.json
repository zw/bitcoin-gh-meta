{
   "assignee" : null,
   "body" : "This is running the 32-bit bitcoin-qt binary released with 0.9.1.  I had received numerous errors, so I decided to draw things back to as basic a configuration as possible (the bitcoin.conf file has been renamed so the client would not use it and just assume default settings).\r\n\r\nPlease note that my local time (and thus my system time) is UTC+10:00\r\n\r\n```\r\nbash-4.2$ ls -l\r\ntotal 17111392\r\n-rwxr-xr-x 0 ben root        1710 Jun  3 06:49 bitcoin.conf~\r\n-rwxr-xr-x 0 ben root        1712 Jun  3 06:56 bitcoin.conf0\r\n-rwxr-xr-x 0 ben root 17522056398 Jun  3 06:21 bootstrap.dat\r\nbash-4.2$ /usr/local/bitcoin/bitcoin-qt \r\nbash-4.2$ ls -l\r\ntotal 17111400\r\n-rwxr-xr-x 0 ben root        1710 Jun  3 06:49 bitcoin.conf~\r\n-rwxr-xr-x 0 ben root        1712 Jun  3 06:56 bitcoin.conf0\r\ndrwxr-xr-x 0 ben root           0 Jun  3 06:59 blocks\r\n-rwxr-xr-x 0 ben root 17522056398 Jun  3 06:21 bootstrap.dat\r\ndrwxr-xr-x 0 ben root           0 Jun  3 06:59 database\r\n-rwxr-xr-x 0 ben root           0 Jun  3 06:59 db.log\r\n-rwxr-xr-x 0 ben root        1615 Jun  3 06:59 debug.log\r\n-rwxr-xr-x 0 ben root        1106 Jun  3 06:59 peers.dat\r\nbash-4.2$ less debug.log \r\nbash-4.2$ less peers.dat \r\n\"peers.dat\" may be a binary file.  See it anyway? \r\nbash-4.2$ ls database/\r\nlog.0000000001\r\nbash-4.2$ ls -l database/log.0000000001 \r\n-rwxr-xr-x 1 ben root 1048576 Jun  3 06:59 database/log.0000000001\r\nbash-4.2$ file database/log.0000000001 \r\ndatabase/log.0000000001: Berkeley DB (Log, version 16, native byte-order)\r\nbash-4.2$ ls blocks/index/\r\n000003.log  CURRENT  LOCK  LOG  MANIFEST-000001\r\nbash-4.2$ ls blocks/index/LOG\r\nblocks/index/LOG\r\nbash-4.2$ cat blocks/index/LOG\r\n2014/06/03-06:59:20.843543 b3a37b40 MANIFEST write: IO error: /home/ben/.bitcoin/blocks/index: Invalid argument\r\nbash-4.2$ \r\n```\r\n\r\nThe bootstrap.dat file is the result of the torrent from bitcoin.org (not the other one from BitcoinArmory).\r\n\r\nThe debug.log (with around 15 blank lines removed):\r\n\r\n```\r\nRequesting initialize\r\nRunning AppInit2 in thread\r\n2014-06-02 20:59:16 \r\n\r\n\r\n2014-06-02 20:59:16 Bitcoin version v0.9.1.0-g026a939-beta (Tue, 8 Apr 2014 12:04:06 +0200)\r\n2014-06-02 20:59:16 Using OpenSSL version OpenSSL 1.0.1g 7 Apr 2014\r\n2014-06-02 20:59:16 Default data directory /home/ben/.bitcoin\r\n2014-06-02 20:59:16 Using data directory /home/ben/.bitcoin\r\n2014-06-02 20:59:16 Using at most 125 connections (1024 file descriptors available)\r\n2014-06-02 20:59:16 Using wallet wallet.dat\r\n2014-06-02 20:59:16 init message: Verifying wallet...\r\n2014-06-02 20:59:16 dbenv.open LogDir=/home/ben/.bitcoin/database ErrorFile=/home/ben/.bitcoin/db.log\r\n2014-06-02 20:59:16 Bound to [::]:8333\r\n2014-06-02 20:59:16 Bound to 0.0.0.0:8333\r\n2014-06-02 20:59:16 init message: Loading block index...\r\n2014-06-02 20:59:16 Opening LevelDB in /home/ben/.bitcoin/blocks/index\r\n2014-06-02 20:59:16 IO error: /home/ben/.bitcoin/blocks/index: Invalid argument\r\n2014-06-02 20:59:20 init message: Loading block index...\r\n2014-06-02 20:59:20 Wiping LevelDB in /home/ben/.bitcoin/blocks/index\r\n2014-06-02 20:59:20 Opening LevelDB in /home/ben/.bitcoin/blocks/index\r\n2014-06-02 20:59:20 IO error: /home/ben/.bitcoin/blocks/index: Invalid argument\r\n2014-06-02 20:59:22 Initialization result: 0\r\n2014-06-02 20:59:22 Requesting shutdown\r\n2014-06-02 20:59:22 Running Shutdown in thread\r\n2014-06-02 20:59:22 Shutdown : In progress...\r\n2014-06-02 20:59:22 StopNode()\r\n2014-06-02 20:59:22 Shutdown : done\r\n2014-06-02 20:59:22 Shutdown finished\r\n2014-06-02 20:59:22 Shutdown result: 1\r\n2014-06-02 20:59:22 Stopping thread\r\n2014-06-02 20:59:22 Stopped thread\r\n```\r\n\r\nAdditional system, fs and directory details:\r\n\r\n```\r\nbash-4.2$ uname -a\r\nLinux sardonic 3.10.17-smp #2 SMP Wed Oct 23 17:13:14 CDT 2013 i686 Intel(R) Core(TM)2 Duo CPU     T9500  @ 2.60GHz GenuineIntel GNU/Linux\r\nbash-4.2$ pwd\r\n/home/ben/.bitcoin\r\nbash-4.2$ mount\r\n/dev/sda1 on / type ext4 (rw)\r\nproc on /proc type proc (rw)\r\nsysfs on /sys type sysfs (rw)\r\ntmpfs on /dev/shm type tmpfs (rw)\r\n//172.17.23.100/Data/bitcoin on /home/ben/.bitcoin type cifs (rw)\r\nbash-4.2$ df\r\nFilesystem                    1K-blocks       Used Available Use% Mounted on\r\n/dev/sda1                      12253360    9757056   1850828  85% /\r\ntmpfs                            511860          0    511860   0% /dev/shm\r\n//172.17.23.100/Data/bitcoin 1951417392 1822055272 129362120  94% /home/ben/.bitcoin\r\nbash-4.2$ \r\n```\r\n\r\nRunning this on a samba mount is necessary because I just don't have the room for the blockchain on this system anymore.  I doubt it makes much difference, but sardonic is a VirtualBox VM running Slackware 14.1 on ironic, which is:\r\n\r\n```\r\nbash-3.2$ uname -a\r\nDarwin ironic.adversary.org 9.8.0 Darwin Kernel Version 9.8.0: Wed Jul 15 16:55:01 PDT 2009; root:xnu-1228.15.4~1/RELEASE_I386 i386 i386\r\nbash-3.2$ \r\n```\r\n\r\nNow, I could be wrong, but the error in debug.log appears to indicate that an invalid argument was passed to bitcoin-qt.  Except no arguments have been passed to it, so strange as it may appear, someone may have hard coded an argument that doesn't exist.  No idea why, but that's what it looks like.  The offending code appears to be in src/leveldb/util/status.cc:\r\n\r\n```c\r\nstd::string Status::ToString() const {\r\n  if (state_ == NULL) {\r\n    return \"OK\";\r\n  } else {\r\n    char tmp[30];\r\n    const char* type;\r\n    switch (code()) {\r\n      case kOk:\r\n        type = \"OK\";\r\n        break;\r\n      case kNotFound:\r\n        type = \"NotFound: \";\r\n        break;\r\n      case kCorruption:\r\n        type = \"Corruption: \";\r\n        break;\r\n      case kNotSupported:\r\n        type = \"Not implemented: \";\r\n        break;\r\n      case kInvalidArgument:\r\n        type = \"Invalid argument: \";\r\n        break;\r\n      case kIOError:\r\n        type = \"IO error: \";\r\n        break;\r\n      default:\r\n        snprintf(tmp, sizeof(tmp), \"Unknown code(%d): \",\r\n                 static_cast<int>(code()));\r\n        type = tmp;\r\n        break;\r\n    }\r\n    std::string result(type);\r\n    uint32_t length;\r\n    memcpy(&length, state_, sizeof(length));\r\n    result.append(state_ + 5, length);\r\n    return result;\r\n  }\r\n}\r\n```\r\n\r\nOf course, my C coding is a bit crap, so that's probably just the beginning.\r\n",
   "closed_at" : "2014-06-02T23:04:13Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/2611615?v=3",
      "events_url" : "https://api.github.com/users/Hasimir/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Hasimir/followers",
      "following_url" : "https://api.github.com/users/Hasimir/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Hasimir/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Hasimir",
      "id" : 2611615,
      "login" : "Hasimir",
      "organizations_url" : "https://api.github.com/users/Hasimir/orgs",
      "received_events_url" : "https://api.github.com/users/Hasimir/received_events",
      "repos_url" : "https://api.github.com/users/Hasimir/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Hasimir/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Hasimir/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Hasimir"
   },
   "comments" : 5,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4276/comments",
   "created_at" : "2014-06-02T21:59:40Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4276/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/4276",
   "id" : 34814928,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4276/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 4276,
   "state" : "closed",
   "title" : "Invalid argument with ... no argument present",
   "updated_at" : "2014-06-03T01:39:15Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4276",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/2611615?v=3",
      "events_url" : "https://api.github.com/users/Hasimir/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Hasimir/followers",
      "following_url" : "https://api.github.com/users/Hasimir/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Hasimir/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Hasimir",
      "id" : 2611615,
      "login" : "Hasimir",
      "organizations_url" : "https://api.github.com/users/Hasimir/orgs",
      "received_events_url" : "https://api.github.com/users/Hasimir/received_events",
      "repos_url" : "https://api.github.com/users/Hasimir/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Hasimir/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Hasimir/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Hasimir"
   }
}
