[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think #27245 which uses `evhttp_connection_set_closecb` is needed to avoid this, but:\r\n- it doesn't seem to be slated for v25.0\r\n- I experience this in one of the libevent versions that #27245 doesn't address",
      "created_at" : "2023-05-23T13:05:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1559296260",
      "id" : 1559296260,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585c8PkE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1559296260/reactions"
      },
      "updated_at" : "2023-05-23T13:19:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1559296260",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for reporting! I observed this issue sporadically, but were never able to reproduce it until now. With the help of your description (_\"... interrupting bitcoin-cli before it has received the reply ...\"_) I found it's actually quite trivial at least on my machine:\r\n\r\n1. startup `bitcoind -debug=http` (and any other desired flags; note that the hangup also happens without the debug flag, but this allows us to see where it's hanging)\r\n2. execute `bitcoin-cli waitforblockheight 1234567` (or any other RPC call which doesn't terminate immediately)\r\n3. terminate bitcoin-cli via CTRL-C\r\n4. terminate bitcoind via CTRL-C\r\n\r\nThe shutdown leads to the following messages and then hangs forever:\r\n```\r\n2023-05-23T13:58:01Z [http] Unregistering HTTP handler for / (exactmatch 1)\r\n2023-05-23T13:58:01Z [http] Unregistering HTTP handler for /wallet/ (exactmatch 0)\r\n2023-05-23T13:58:01Z [http] Stopping HTTP server\r\n2023-05-23T13:58:01Z [http] Waiting for HTTP worker threads to exit\r\n2023-05-23T13:58:01Z [http] Waiting for 1 requests to stop HTTP server\r\n2023-05-23T13:58:01Z [http] Exited http event loop\r\n2023-05-23T13:58:01Z msghand thread exit\r\n2023-05-23T13:58:01Z net thread exit\r\n2023-05-23T13:58:03Z opencon thread exit\r\n```\r\n\r\nTested on master branch (commit 5ef2c1ee7a7416907e0f9135dc0701a88d92a7f6) with default configuration, running OpenBSD 7.3 with libevent 2.1.12 here.",
      "created_at" : "2023-05-23T14:02:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1559453982",
      "id" : 1559453982,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585c82Ee",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1559453982/reactions"
      },
      "updated_at" : "2023-05-23T14:02:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1559453982",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I was able to fix this with my branch here https://github.com/Crypt-iQ/bitcoin/commit/4fd7adb30f584664421b6431bce8ebcbf7ceef2f by adding a `evhttp_connection_set_closecb` callback. I didn't need to modify the logic related to `EV_READ` and no functional test errors are introduced on my machine",
      "created_at" : "2023-05-23T16:00:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1559731418",
      "id" : 1559731418,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585c95za",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1559731418/reactions"
      },
      "updated_at" : "2023-05-23T16:00:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1559731418",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I was able to fix this with my branch here [Crypt-iQ@4fd7adb](https://github.com/Crypt-iQ/bitcoin/commit/4fd7adb30f584664421b6431bce8ebcbf7ceef2f) by adding a `evhttp_connection_set_closecb` callback. I didn't need to modify the logic related to `EV_READ` and no functional test errors are introduced on my machine\r\n\r\nCan confirm that this patch fixes the issue on my side. ",
      "created_at" : "2023-05-24T18:09:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1561718193",
      "id" : 1561718193,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585dFe2x",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1561718193/reactions"
      },
      "updated_at" : "2023-05-24T18:09:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1561718193",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hmmm, curiously enough I was not able to reproduce using either method on master @ aa6cc5bec9 \r\n\r\nWith @theStack method:\r\n\r\n```log\r\n2023-05-26T10:39:07Z [http] Received a POST request for / from 127.0.0.1:50704\r\n^C2023-05-26T10:39:10Z [http] Interrupting HTTP server\r\n2023-05-26T10:39:10Z tor: Thread interrupt\r\n2023-05-26T10:39:10Z torcontrol thread exit\r\n2023-05-26T10:39:10Z addcon thread exit\r\n2023-05-26T10:39:10Z opencon thread exit\r\n2023-05-26T10:39:10Z Shutdown: In progress...\r\n2023-05-26T10:39:10Z [http] Unregistering HTTP handler for / (exactmatch 1)\r\n2023-05-26T10:39:10Z [http] Unregistering HTTP handler for /wallet/ (exactmatch 0)\r\n2023-05-26T10:39:10Z [http] Stopping HTTP server\r\n2023-05-26T10:39:10Z [http] Waiting for HTTP worker threads to exit\r\n2023-05-26T10:39:10Z [http] Waiting for 1 requests to stop HTTP server\r\n2023-05-26T10:39:10Z [http] Waiting for HTTP event thread to exit\r\n2023-05-26T10:39:10Z [http] Exited http event loop\r\n2023-05-26T10:39:10Z [http] Stopped HTTP server\r\n2023-05-26T10:39:10Z loadblk thread exit\r\n2023-05-26T10:39:10Z net thread exit\r\n2023-05-26T10:39:10Z msghand thread exit\r\n2023-05-26T10:39:10Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\r\n2023-05-26T10:39:10Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.00s)\r\n2023-05-26T10:39:10Z scheduler thread exit\r\n2023-05-26T10:39:16Z Shutdown: done\r\n```\r\n\r\nWith @Crypt-iQ method:\r\n\r\n<details>\r\n<summary>Details</summary>\r\n\r\n```log\r\n... many lines like this\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59546\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59562\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59566\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59570\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59574\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59580\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59590\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59596\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59606\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59616\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59618\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59636\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59638\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59660\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59658\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59686\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59684\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59704\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59706\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59722\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59734\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59740\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59746\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59760\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59774\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59790\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59792\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59798\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59802\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59804\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59818\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59822\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59828\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59826\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59840\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59854\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59864\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59866\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59870\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59868\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59886\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59900\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59914\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59928\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59944\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59960\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59964\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59968\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59980\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59982\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60002\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60004\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60010\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60008\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60018\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60016\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60038\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60044\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60048\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60054\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60066\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60064\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60080\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60082\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60108\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60110\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60124\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60128\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60130\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60142\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60154\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60158\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60170\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60168\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60186\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60184\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60196\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60198\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60224\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60226\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60242\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60244\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60258\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60256\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60284\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60296\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60298\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60310\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60320\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60336\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60344\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60342\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60362\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60370\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60378\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60382\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60386\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60388\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60400\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60402\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60422\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60430\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60436\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60450\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60462\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60468\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60472\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60470\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60494\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60496\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60508\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60510\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60514\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60522\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60524\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60532\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60544\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60552\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60556\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60560\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60570\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60582\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60592\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60598\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60612\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60614\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60620\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60626\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60628\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60646\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60654\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60652\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60676\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60678\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60680\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60688\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60700\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60706\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60710\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60712\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60724\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60736\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60750\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60756\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60760\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60772\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60776\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60788\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60802\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60814\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60816\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60828\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60830\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60846\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60848\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60854\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60866\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60880\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60892\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60896\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60906\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60918\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60934\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60940\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60950\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60960\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60972\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60988\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60994\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32772\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32774\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32776\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32778\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32788\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32802\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32812\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32828\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32830\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32832\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32846\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32854\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32870\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32872\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32876\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32890\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32892\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32904\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32906\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32912\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32928\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32934\r\n^C2023-05-26T10:42:14Z [http] Interrupting HTTP server\r\n2023-05-26T10:42:14Z tor: Thread interrupt\r\n2023-05-26T10:42:14Z torcontrol thread exit\r\n2023-05-26T10:42:14Z opencon thread exit\r\n2023-05-26T10:42:14Z addcon thread exit\r\n2023-05-26T10:42:14Z Shutdown: In progress...\r\n2023-05-26T10:42:14Z [http] Unregistering HTTP handler for / (exactmatch 1)\r\n2023-05-26T10:42:14Z [http] Unregistering HTTP handler for /wallet/ (exactmatch 0)\r\n2023-05-26T10:42:14Z [http] Stopping HTTP server\r\n2023-05-26T10:42:14Z [http] Waiting for HTTP worker threads to exit\r\n2023-05-26T10:42:14Z [http] Exited http event loop\r\n2023-05-26T10:42:14Z [http] Waiting for HTTP event thread to exit\r\n2023-05-26T10:42:14Z [http] Stopped HTTP server\r\n2023-05-26T10:42:14Z net thread exit\r\n2023-05-26T10:42:14Z loadblk thread exit\r\n2023-05-26T10:42:14Z msghand thread exit\r\n2023-05-26T10:42:14Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\r\n2023-05-26T10:42:14Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.00s)\r\n2023-05-26T10:42:14Z scheduler thread exit\r\n2023-05-26T10:42:15Z Shutdown: done\r\n```\r\n\r\n</details>",
      "created_at" : "2023-05-26T10:44:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1564196898",
      "id" : 1564196898,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585dO8Ai",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1564196898/reactions"
      },
      "updated_at" : "2023-05-26T10:44:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1564196898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@willcl-ark can you find what libevent version you're using? ",
      "created_at" : "2023-05-26T13:15:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1564380223",
      "id" : 1564380223,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585dPow_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1564380223/reactions"
      },
      "updated_at" : "2023-05-26T13:15:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1564380223",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "This bug appeared in the [nix-bitcoin](https://github.com/fort-nix/nix-bitcoin/) [test suite](https://github.com/fort-nix/nix-bitcoin/blob/master/test/tests.py). I can confirm that it is fixed by https://github.com/Crypt-iQ/bitcoin/commit/4fd7adb30f584664421b6431bce8ebcbf7ceef2f.\r\n\r\n\r\n<details>\r\n<summary>Details</summary>\r\n\r\nThe test is executed inside a QEMU VM and runs `bitcoind` together with a bunch of client services (like `clightning`, `lnd`, `joinmarket`). It then stops all services, including `bitcoind`.\r\nSometimes `bitcoind` hangs during shutdown:\r\n1. First, it waits for a few minutes at [httpserver.cpp#L469](https://github.com/bitcoin/bitcoin/blob/v25.0/src/httpserver.cpp#L469) (`[http] Waiting for HTTP worker threads to exit`)\r\n2. Then it hangs indefinitely at [httpserver.cpp#L484](https://github.com/bitcoin/bitcoin/blob/v25.0/src/httpserver.cpp#L484) (`[http] Waiting for 1 requests to stop HTTP server`')\r\n\r\n`bitcoind` gets shutdown *after* all client services have exited, so there are never any lingering active connections.\r\n\r\nThis bug is hard to reproduce in the context of the test suite.\r\nI once could consistently trigger it on my desktop system, but never again after rebooting the system.\r\nCurrently, I can reproduce it in 80% of all test runs on our [nix-bitcoin server](https://nixbitcoin.org).\r\n\r\n[Here's the log output](https://gist.github.com/erikarvstedt/843f6d5fdb545b52f6bd34bc66651c52) of the shutdown sequence, interspersed with gdb backtraces of all threads.\r\n\r\n</details>\r\n\r\n",
      "created_at" : "2023-05-30T18:31:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1568888056",
      "id" : 1568888056,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585dg1T4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1568888056/reactions"
      },
      "updated_at" : "2023-05-30T20:30:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1568888056",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/36110478?v=4",
         "events_url" : "https://api.github.com/users/erikarvstedt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/erikarvstedt/followers",
         "following_url" : "https://api.github.com/users/erikarvstedt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/erikarvstedt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/erikarvstedt",
         "id" : 36110478,
         "login" : "erikarvstedt",
         "node_id" : "MDQ6VXNlcjM2MTEwNDc4",
         "organizations_url" : "https://api.github.com/users/erikarvstedt/orgs",
         "received_events_url" : "https://api.github.com/users/erikarvstedt/received_events",
         "repos_url" : "https://api.github.com/users/erikarvstedt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/erikarvstedt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/erikarvstedt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/erikarvstedt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@erikarvstedt it seems like there's a call to `importmulti` that is outstanding while bitcoind is trying to shut down",
      "created_at" : "2023-05-30T19:26:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1568965050",
      "id" : 1568965050,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585dhIG6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1568965050/reactions"
      },
      "updated_at" : "2023-05-30T19:26:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1568965050",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@Crypt-iQ, the slow progress of `importmulti` is indeed a separate issue. Maybe it has existed before and was just uncovered by https://github.com/bitcoin/bitcoin/pull/26742. I'll check this later.\r\nI've updated my previous post. ",
      "created_at" : "2023-05-30T20:43:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1569074534",
      "id" : 1569074534,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585dhi1m",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1569074534/reactions"
      },
      "updated_at" : "2023-05-30T21:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1569074534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/36110478?v=4",
         "events_url" : "https://api.github.com/users/erikarvstedt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/erikarvstedt/followers",
         "following_url" : "https://api.github.com/users/erikarvstedt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/erikarvstedt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/erikarvstedt",
         "id" : 36110478,
         "login" : "erikarvstedt",
         "node_id" : "MDQ6VXNlcjM2MTEwNDc4",
         "organizations_url" : "https://api.github.com/users/erikarvstedt/orgs",
         "received_events_url" : "https://api.github.com/users/erikarvstedt/received_events",
         "repos_url" : "https://api.github.com/users/erikarvstedt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/erikarvstedt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/erikarvstedt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/erikarvstedt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @willcl-ark can you find what libevent version you're using?\r\n\r\nI am using libevent 2.1.12 (like TheStack)",
      "created_at" : "2023-05-31T10:23:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1569922589",
      "id" : 1569922589,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585dkx4d",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1569922589/reactions"
      },
      "updated_at" : "2023-05-31T10:23:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1569922589",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I get this when compiling with both gcc and clang-16. I am also using libevent 2.1.12. Is there anything unique about your setup @willcl-ark ? Also, did you Ctrl-C the `waitforblockheight` command before trying to stop bitcoind?",
      "created_at" : "2023-05-31T17:56:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1570668159",
      "id" : 1570668159,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585dnn5_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1570668159/reactions"
      },
      "updated_at" : "2023-05-31T17:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1570668159",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "As @willcl-ark, tried @theStack's method with no sucess, my libevent version is 2.1.7, I'll try to update it and retry again. Thanks.\r\n\r\n@Crypt-iQ I did: Ctrl-C the waitforblockheight command before trying to stop bitcoind.",
      "created_at" : "2023-06-25T14:11:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1606107875",
      "id" : 1606107875,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585fu0Lj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1606107875/reactions"
      },
      "updated_at" : "2023-06-25T14:11:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1606107875",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Guys, it's late, I'll send more tomorrow ð¤£ð¤£ð¤£ð\r\nHey gold night\r\n\r\n\r\nVÃ o 21:15, CN, 25 thg 6, 2023 pablomartin4btc ***@***.***> ÄÃ£\r\nviáº¿t:\r\n\r\n> As @willcl-ark <https://github.com/willcl-ark>, tried @theStack\r\n> <https://github.com/theStack>'s method with no sucess, my libevent\r\n> version is 2.1.7, I'll try to update it and retry again. Thanks.\r\n>\r\n> @Crypt-iQ <https://github.com/Crypt-iQ> I did: Ctrl-C the\r\n> waitforblockheight command before trying to stop bitcoind.\r\n>\r\n> â\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1606107875>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/A25NZ7SC2CWTMI2RV2FF3DTXNBBWLANCNFSM6AAAAAAYLB4CL4>\r\n> .\r\n> You are receiving this because you are subscribed to this thread.Message\r\n> ID: ***@***.***>\r\n>\r\n",
      "created_at" : "2023-06-25T17:58:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1606197612",
      "id" : 1606197612,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585fvKFs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1606197612/reactions"
      },
      "updated_at" : "2023-06-25T17:58:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1606197612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/112909566?v=4",
         "events_url" : "https://api.github.com/users/Macoophonic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Macoophonic/followers",
         "following_url" : "https://api.github.com/users/Macoophonic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Macoophonic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Macoophonic",
         "id" : 112909566,
         "login" : "Macoophonic",
         "node_id" : "U_kgDOBrrc_g",
         "organizations_url" : "https://api.github.com/users/Macoophonic/orgs",
         "received_events_url" : "https://api.github.com/users/Macoophonic/received_events",
         "repos_url" : "https://api.github.com/users/Macoophonic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Macoophonic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Macoophonic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Macoophonic"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> As @willcl-ark, tried @theStack's method with no sucess, my libevent version is 2.1.7, I'll try to update it and retry again. Thanks.\r\n> \r\n> @Crypt-iQ I did: Ctrl-C the waitforblockheight command before trying to stop bitcoind.\r\n\r\nGood to know, I'll have to test out that version",
      "created_at" : "2023-06-26T11:04:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1607224982",
      "id" : 1607224982,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585fzE6W",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1607224982/reactions"
      },
      "updated_at" : "2023-06-26T11:04:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1607224982",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I get this when compiling with both gcc and clang-16. I am also using libevent 2.1.12. Is there anything unique about your setup @willcl-ark ? Also, did you Ctrl-C the `waitforblockheight` command before trying to stop bitcoind?\r\n\r\nI've had more reports of this deadlock so come back to try and repro it again, but don't seem to be able to no matter what I try ð¤·ð¼ââï¸ \r\n\r\nI am on Ubuntu 23.04, also using Clang 16 and libevent 2.1.12-stable-8ubuntu3. It doesn't look like there are any debian patches applied which could affect this...\r\n\r\n<details>\r\n<summary>debug log with http and libevent looks normal</summary>\r\n\r\n```log\r\n2023-06-28T08:47:52Z [libevent:debug] event_active: 0x55c039f36038 (fd 12), res 2, callback 0x7ff7a7371270\r\n2023-06-28T08:47:52Z [libevent:debug] event_process_active: event: 0x55c039f36038, EV_READ   call 0x7ff7a7371270\r\n2023-06-28T08:47:52Z [libevent:debug] evhttp_get_request_connection: new request from 127.0.0.1:46142 on 44\r\n\r\n2023-06-28T08:47:52Z [libevent:debug] Attempting connection to 127.0.0.1:46142\r\n\r\n2023-06-28T08:47:52Z [libevent:debug] event_del: 0x7ff7500053f0 (fd -1), callback 0x7ff7a7361f90\r\n2023-06-28T08:47:52Z [libevent:debug] event_del: 0x7ff750005470 (fd -1), callback 0x7ff7a7362740\r\n2023-06-28T08:47:52Z [libevent:debug] event_add: event: 0x7ff750005470 (fd 44),  EV_WRITE   call 0x7ff7a7362740\r\n2023-06-28T08:47:52Z [libevent:debug] Epoll ADD(4) on fd 44 okay. Old events were 0; read change was 0 (none); write change was 1 (add); close change was 0 (none)\r\n2023-06-28T08:47:52Z [libevent:debug] event_add: event: 0x7ff7500053f0 (fd 44), EV_READ    call 0x7ff7a7361f90\r\n2023-06-28T08:47:52Z [libevent:debug] Epoll MOD(5) on fd 44 okay. Old events were 4; read change was 1 (add); write change was 0 (none); close change was 0 (none)\r\n2023-06-28T08:47:52Z [libevent:debug] event_del: 0x7ff750005470 (fd 44), callback 0x7ff7a7362740\r\n2023-06-28T08:47:52Z [libevent:debug] Epoll MOD(1) on fd 44 okay. Old events were 6; read change was 0 (none); write change was 2 (del); close change was 0 (none)\r\n2023-06-28T08:47:52Z [libevent:debug] event_add: event: 0x7ff7500053f0 (fd 44), EV_READ   EV_TIMEOUT call 0x7ff7a7361f90\r\n2023-06-28T08:47:52Z [libevent:debug] event_add: event 0x7ff7500053f0, timeout in 30 seconds 0 useconds, call 0x7ff7a7361f90\r\n2023-06-28T08:47:52Z [libevent:debug] event_del: 0x7ff750005470 (fd 44), callback 0x7ff7a7362740\r\n2023-06-28T08:47:52Z [libevent:debug] event_add: event: 0x7ff7500053f0 (fd 44), EV_READ   EV_TIMEOUT call 0x7ff7a7361f90\r\n2023-06-28T08:47:52Z [libevent:debug] event_add: event 0x7ff7500053f0, timeout in 30 seconds 0 useconds, call 0x7ff7a7361f90\r\n2023-06-28T08:47:52Z [libevent:debug] timeout_next: event: 0x7ff7500053f0, in 30 seconds, 0 useconds\r\n2023-06-28T08:47:52Z [libevent:debug] epoll_dispatch: epoll_wait reports 1\r\n2023-06-28T08:47:52Z [libevent:debug] event_active: 0x7ff7500053f0 (fd 44), res 2, callback 0x7ff7a7361f90\r\n2023-06-28T08:47:52Z [libevent:debug] event_process_active: event: 0x7ff7500053f0, EV_READ   call 0x7ff7a7361f90\r\n2023-06-28T08:47:52Z [libevent:debug] event_add: event: 0x7ff7500053f0 (fd 44), EV_READ   EV_TIMEOUT call 0x7ff7a7361f90\r\n2023-06-28T08:47:52Z [libevent:debug] event_add: event 0x7ff7500053f0, timeout in 70594 seconds 199020 useconds, call 0x7ff7a7361f90\r\n2023-06-28T08:47:52Z [libevent:debug] evhttp_add_header: key: Host val: 127.0.0.1\r\n\r\n2023-06-28T08:47:52Z [libevent:debug] evhttp_add_header: key: Connection val: close\r\n\r\n2023-06-28T08:47:52Z [libevent:debug] evhttp_add_header: key: Content-Type val: application/json\r\n\r\n2023-06-28T08:47:52Z [libevent:debug] evhttp_add_header: key: Authorization val: Basic xxxxxxx\r\n\r\n2023-06-28T08:47:52Z [libevent:debug] evhttp_add_header: key: Content-Length val: 58\r\n\r\n2023-06-28T08:47:52Z [libevent:debug] evhttp_read_header: checking for post data on 44\r\n\r\n2023-06-28T08:47:52Z [libevent:debug] evhttp_get_body_length: bytes to read: 58 (in buffer 58)\r\n\r\n2023-06-28T08:47:52Z [libevent:debug] event_del: 0x7ff7500053f0 (fd 44), callback 0x7ff7a7361f90\r\n2023-06-28T08:47:52Z [libevent:debug] Epoll DEL(1) on fd 44 okay. Old events were 2; read change was 2 (del); write change was 0 (none); close change was 0 (none)\r\n2023-06-28T08:47:52Z [libevent:debug] event_del: 0x7ff7500053f0 (fd 44), callback 0x7ff7a7361f90\r\n2023-06-28T08:47:52Z [libevent:debug] event_del: 0x7ff7500053f0 (fd 44), callback 0x7ff7a7361f90\r\n2023-06-28T08:47:52Z [http] Received a POST request for / from 127.0.0.1:46142\r\n^C2023-06-28T08:47:57Z [http] Interrupting HTTP server\r\n2023-06-28T08:47:57Z tor: Thread interrupt\r\n2023-06-28T08:47:57Z [libevent:debug] event_active: 0x55c0458e3250 (fd -1), res 1, callback 0x7ff7a7366100\r\n2023-06-28T08:47:57Z [libevent:debug] epoll_dispatch: epoll_wait reports 1\r\n2023-06-28T08:47:57Z [libevent:debug] event_active: 0x55c0458e51f0 (fd 30), res 2, callback 0x7ff7a736c690\r\n2023-06-28T08:47:57Z [libevent:debug] event_del: 0x55c0458e3250 (fd -1), callback 0x7ff7a7366100\r\n2023-06-28T08:47:57Z [libevent:debug] event_process_active: event: 0x55c0458e3250,    call 0x7ff7a7366100\r\n2023-06-28T08:47:57Z [libevent:debug] event_base_loop: asked to terminate loop.\r\n2023-06-28T08:47:57Z [libevent:debug] event_del: 0x7ff640001080 (fd -1), callback 0x55c03736e022\r\n2023-06-28T08:47:57Z torcontrol thread exit\r\n2023-06-28T08:47:57Z Shutdown: In progress...\r\n2023-06-28T08:47:57Z addcon thread exit\r\n2023-06-28T08:47:57Z opencon thread exit\r\n2023-06-28T08:47:57Z [http] Unregistering HTTP handler for / (exactmatch 1)\r\n2023-06-28T08:47:57Z [http] Unregistering HTTP handler for /wallet/ (exactmatch 0)\r\n2023-06-28T08:47:57Z [http] Stopping HTTP server\r\n2023-06-28T08:47:57Z [http] Waiting for HTTP worker threads to exit\r\n2023-06-28T08:47:57Z [libevent:debug] evhttp_add_header: key: Content-Type val: application/json\r\n\r\n2023-06-28T08:47:57Z [libevent:debug] evhttp_add_header: key: Connection val: close\r\n\r\n2023-06-28T08:47:57Z [libevent:debug] event_active: 0x7ff730001240 (fd -1), res 0, callback 0x55c03750235f\r\n2023-06-28T08:47:57Z [libevent:debug] epoll_dispatch: epoll_wait reports 1\r\n2023-06-28T08:47:57Z [libevent:debug] event_active: 0x55c039f35bc0 (fd 10), res 2, callback 0x7ff7a736c690\r\n2023-06-28T08:47:57Z [libevent:debug] event_del: 0x7ff730001240 (fd -1), callback 0x55c03750235f\r\n2023-06-28T08:47:57Z [libevent:debug] event_process_active: event: 0x7ff730001240,    call 0x55c03750235f\r\n2023-06-28T08:47:57Z [libevent:debug] evhttp_add_header: key: Date val: Wed, 28 Jun 2023 08:47:57 GMT\r\n\r\n2023-06-28T08:47:57Z [libevent:debug] evhttp_add_header: key: Content-Length val: 123\r\n\r\n2023-06-28T08:47:57Z [libevent:debug] evhttp_add_header: key: Connection val: close\r\n\r\n2023-06-28T08:47:57Z [libevent:debug] evhttp_write_buffer: preparing to write buffer\r\n\r\n2023-06-28T08:47:57Z [libevent:debug] event_add: event: 0x7ff7500053f0 (fd 44), EV_READ   EV_TIMEOUT call 0x7ff7a7361f90\r\n2023-06-28T08:47:57Z [libevent:debug] Epoll ADD(1) on fd 44 okay. Old events were 0; read change was 1 (add); write change was 0 (none); close change was 0 (none)\r\n2023-06-28T08:47:57Z [libevent:debug] event_add: event 0x7ff7500053f0, timeout in 30 seconds 0 useconds, call 0x7ff7a7361f90\r\n2023-06-28T08:47:57Z [libevent:debug] event_add: event: 0x7ff750005470 (fd 44),  EV_WRITE  EV_TIMEOUT call 0x7ff7a7362740\r\n2023-06-28T08:47:57Z [libevent:debug] Epoll MOD(5) on fd 44 okay. Old events were 2; read change was 0 (none); write change was 1 (add); close change was 0 (none)\r\n2023-06-28T08:47:57Z [libevent:debug] event_add: event 0x7ff750005470, timeout in 30 seconds 0 useconds, call 0x7ff7a7362740\r\n2023-06-28T08:47:57Z [libevent:debug] event_add: event: 0x7ff7500053f0 (fd 44), EV_READ   EV_TIMEOUT call 0x7ff7a7361f90\r\n2023-06-28T08:47:57Z [libevent:debug] event_add: event 0x7ff7500053f0, timeout in 30 seconds 0 useconds, call 0x7ff7a7361f90\r\n2023-06-28T08:47:57Z [libevent:debug] event_add: event: 0x7ff750005470 (fd 44),  EV_WRITE  EV_TIMEOUT call 0x7ff7a7362740\r\n2023-06-28T08:47:57Z [libevent:debug] event_add: event 0x7ff750005470, timeout in 30 seconds 0 useconds, call 0x7ff7a7362740\r\n2023-06-28T08:47:57Z [libevent:debug] event_del: 0x7ff730001240 (fd -1), callback 0x55c03750235f\r\n2023-06-28T08:47:57Z [libevent:debug] event_process_active: event: 0x55c039f35bc0, EV_READ   call 0x7ff7a736c690\r\n2023-06-28T08:47:57Z [libevent:debug] timeout_next: event: 0x7ff7500053f0, in 30 seconds, 0 useconds\r\n2023-06-28T08:47:57Z [libevent:debug] epoll_dispatch: epoll_wait reports 1\r\n2023-06-28T08:47:57Z [libevent:debug] event_active: 0x7ff750005470 (fd 44), res 4, callback 0x7ff7a7362740\r\n2023-06-28T08:47:57Z [libevent:debug] event_active: 0x7ff7500053f0 (fd 44), res 2, callback 0x7ff7a7361f90\r\n2023-06-28T08:47:57Z [libevent:debug] event_process_active: event: 0x7ff750005470,  EV_WRITE  call 0x7ff7a7362740\r\n2023-06-28T08:47:57Z [libevent:debug] event_add: event: 0x7ff750005470 (fd 44),  EV_WRITE  EV_TIMEOUT call 0x7ff7a7362740\r\n2023-06-28T08:47:57Z [libevent:debug] event_add: event 0x7ff750005470, timeout in 70599 seconds 923008 useconds, call 0x7ff7a7362740\r\n2023-06-28T08:47:57Z [libevent:debug] event_del: 0x55c039f36658 (fd 11), callback 0x7ff7a7371270\r\n2023-06-28T08:47:57Z [libevent:debug] Epoll DEL(1) on fd 11 okay. Old events were 2; read change was 2 (del); write change was 0 (none); close change was 0 (none)\r\n2023-06-28T08:47:57Z [libevent:debug] event_del: 0x7ff750005470 (fd 44), callback 0x7ff7a7362740\r\n2023-06-28T08:47:57Z [libevent:debug] Epoll MOD(1) on fd 44 okay. Old events were 6; read change was 0 (none); write change was 2 (del); close change was 0 (none)\r\n2023-06-28T08:47:57Z [libevent:debug] event_del: 0x55c039f36038 (fd 12), callback 0x7ff7a7371270\r\n2023-06-28T08:47:57Z [libevent:debug] Epoll DEL(1) on fd 12 okay. Old events were 2; read change was 2 (del); write change was 0 (none); close change was 0 (none)\r\n2023-06-28T08:47:57Z [libevent:debug] event_active: 0x55c04518ec30 (fd -1), res 1, callback 0x7ff7a7366100\r\n2023-06-28T08:47:57Z [http] Waiting for HTTP event thread to exit\r\n2023-06-28T08:47:57Z [libevent:debug] event_callback_finalize_many_: 3 events finalizing\r\n2023-06-28T08:47:57Z [libevent:debug] event_del: 0x7ff7500053f0 (fd 44), callback 0x7ff7a7361f90\r\n2023-06-28T08:47:57Z [libevent:debug] Epoll DEL(1) on fd 44 gave Bad file descriptor: DEL was unnecessary.\r\n2023-06-28T08:47:57Z [libevent:debug] event_del: 0x7ff750005470 (fd 44), callback 0x7ff7a7362740\r\n2023-06-28T08:47:57Z [libevent:debug] event_del: 0x55c04518ec30 (fd -1), callback 0x7ff7a7366100\r\n2023-06-28T08:47:57Z [libevent:debug] event_process_active: event: 0x55c04518ec30,    call 0x7ff7a7366100\r\n2023-06-28T08:47:57Z [libevent:debug] event_process_active: event: 0x7ff750005470,  EV_WRITE  call 0x7ff7a735f910\r\n2023-06-28T08:47:57Z [libevent:debug] event_base_loop: no events registered.\r\n2023-06-28T08:47:57Z [http] Exited http event loop\r\n2023-06-28T08:47:57Z [libevent:debug] event_del: 0x55c039f35bc0 (fd 10), callback 0x7ff7a736c690\r\n2023-06-28T08:47:57Z [libevent:debug] Epoll DEL(1) on fd 10 okay. Old events were 2; read change was 2 (del); write change was 0 (none); close change was 0 (none)\r\n2023-06-28T08:47:57Z [libevent:debug] event_base_free_: 0 events freed\r\n2023-06-28T08:47:57Z [http] Stopped HTTP server\r\n2023-06-28T08:47:57Z loadblk thread exit\r\n2023-06-28T08:47:57Z msghand thread exit\r\n2023-06-28T08:47:57Z net thread exit\r\n2023-06-28T08:47:58Z i2paccept thread exit\r\n2023-06-28T08:47:58Z DumpAnchors: Flush 2 outbound block-relay-only peer addresses to anchors.dat started\r\n2023-06-28T08:47:58Z DumpAnchors: Flush 2 outbound block-relay-only peer addresses to anchors.dat completed (0.01s)\r\n2023-06-28T08:47:58Z [libevent:debug] event_del: 0x55c0458e51f0 (fd 30), callback 0x7ff7a736c690\r\n2023-06-28T08:47:58Z [libevent:debug] Epoll DEL(1) on fd 30 okay. Old events were 2; read change was 2 (del); write change was 0 (none); close change was 0 (none)\r\n2023-06-28T08:47:58Z [libevent:debug] event_base_free_: 0 events freed\r\n2023-06-28T08:47:58Z scheduler thread exit\r\n2023-06-28T08:47:58Z Flushed fee estimates to fee_estimates.dat.\r\n2023-06-28T08:47:59Z Shutdown: done\r\n```\r\n\r\n</details>\r\n\r\nI wonder libevent on my system using `Epoll` might be the reason I can't reproduce (and that I've seen mainly reports of this on MacOS)? AFAIK MacOS uses `kqueue`, and not sure what BSD is using but I might guess also `kqueue`... Perhaps `kqueue` blocks if it can't delete a closed fd or something?\r\n\r\n```\r\n2023-06-28T08:47:57Z [libevent:debug] Epoll DEL(1) on fd 44 gave Bad file descriptor: DEL was unnecessary.\r\n# continues with shutdown\r\n...\r\n```",
      "created_at" : "2023-06-28T09:00:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1611033313",
      "id" : 1611033313,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585gBmrh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1611033313/reactions"
      },
      "updated_at" : "2023-06-28T09:00:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1611033313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I was able to fix this with my branch here [Crypt-iQ@4fd7adb](https://github.com/Crypt-iQ/bitcoin/commit/4fd7adb30f584664421b6431bce8ebcbf7ceef2f) by adding a `evhttp_connection_set_closecb` callback.\r\n\r\nThis fixed the issue for me too, but I just saw a crash caused by an assert() just 4 lines before the modified code:\r\n\r\n    [Thread 0x7ffec0f4b700 (LWP 1828755) exited]\r\n    bitcoin-qt: httpserver.cpp:223: http_request_cb(evhttp_request*, void*)::<lambda(evhttp_request*, void*)>: Assertion `n == 1' failed.\r\n\r\n    Thread 35 \"b-http\" received signal SIGABRT, Aborted.\r\n    [Switching to Thread 0x7fff577fe700 (LWP 1762429)]\r\n    __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:50\r\n    50      ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\r\n    (gdb) where\r\n    #0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:50\r\n    #1  0x00007ffff6261537 in __GI_abort () at abort.c:79\r\n    #2  0x00007ffff626140f in __assert_fail_base (fmt=0x7ffff63d8688 \"%s%s%s:%u: %s%sAssertion `%s' failed.\\n%n\", assertion=0x555556ae7ae2 \"n == 1\", file=0x555556ae79c2 \"httpserver.cpp\", line=223, function=<optimized out>) at assert.c:92\r\n    #3  0x00007ffff6270662 in __GI___assert_fail (assertion=0x555556ae7ae2 \"n == 1\", file=0x555556ae79c2 \"httpserver.cpp\", line=223, function=0x555556ae7a98 \"http_request_cb(evhttp_request*, void*)::<lambda(evhttp_request*, void*)>\") at assert.c:101\r\n    #4  0x0000555555dab98b in http_request_cb(evhttp_request*, void*)::{lambda(evhttp_request*, void*)#2}::operator()(evhttp_request*, void*) const ()\r\n    #5  0x0000555555dab9e6 in http_request_cb(evhttp_request*, void*)::{lambda(evhttp_request*, void*)#2}::_FUN(evhttp_request*, void*) ()\r\n    #6  0x00007ffff68e4da9 in  () at /usr/lib/x86_64-linux-gnu/libevent-2.1.so.7\r\n    #7  0x00007ffff68c3233 in  () at /usr/lib/x86_64-linux-gnu/libevent-2.1.so.7\r\n    #8  0x00007ffff68c8b4f in  () at /usr/lib/x86_64-linux-gnu/libevent-2.1.so.7\r\n    #9  0x00007ffff68c928f in event_base_loop () at /usr/lib/x86_64-linux-gnu/libevent-2.1.so.7\r\n    #10 0x0000555555dacf1a in ThreadHTTP(event_base*) ()\r\n    #11 0x0000555555dc4f11 in void std::__invoke_impl<void, void (*)(event_base*), event_base*>(std::__invoke_other, void (*&&)(event_base*), event_base*&&) ()\r\n    #12 0x0000555555dc4b98 in std::__invoke_result<void (*)(event_base*), event_base*>::type std::__invoke<void (*)(event_base*), event_base*>(void (*&&)(event_base*), event_base*&&) ()\r\n    #13 0x0000555555dc48d4 in void std::thread::_Invoker<std::tuple<void (*)(event_base*), event_base*> >::_M_invoke<0ul, 1ul>(std::_Index_tuple<0ul, 1ul>) ()\r\n    #14 0x0000555555dc47d7 in std::thread::_Invoker<std::tuple<void (*)(event_base*), event_base*> >::operator()() ()\r\n    #15 0x0000555555dc460f in std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(event_base*), event_base*> > >::_M_run() ()\r\n    #16 0x00007ffff6663ed0 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n    #17 0x00007ffff641aea7 in start_thread (arg=<optimized out>) at pthread_create.c:477\r\n    #18 0x00007ffff633aa2f in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\r\n    (gdb) \r\n\r\nI can't tell what the value of n is, because I don't compile with debug enabled any more. But I guess it isn't 1!\r\n\r\n",
      "created_at" : "2023-06-28T19:27:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1611979215",
      "id" : 1611979215,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585gFNnP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1611979215/reactions"
      },
      "updated_at" : "2023-06-28T19:27:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1611979215",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=4",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "node_id" : "MDQ6VXNlcjU3MzM1Ng==",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> [Thread 0x7ffec0f4b700 (LWP 1828755) exited]\r\n> bitcoin-qt: httpserver.cpp:223: http_request_cb(evhttp_request*\r\n\r\nDo you happen to know what libevent version you were on?",
      "created_at" : "2023-07-02T00:53:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1616244103",
      "id" : 1616244103,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585gVe2H",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1616244103/reactions"
      },
      "updated_at" : "2023-07-02T00:53:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1616244103",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Do you happen to know what libevent version you were on?\r\n\r\nIt looks like version 2.1.12.\r\n\r\n```\r\n$ dpkg -l | grep libevent\r\nii  libev4:amd64                                                1:4.33-1                           amd64        high-performance event loop library modelled after libevent\r\nii  libevent-2.1-7:amd64                                        2.1.12-stable-1                    amd64        Asynchronous event notification library\r\nii  libevent-core-2.1-7:amd64                                   2.1.12-stable-1                    amd64        Asynchronous event notification library (core)\r\nii  libevent-dev                                                2.1.12-stable-1                    amd64        Asynchronous event notification library (development files)\r\nii  libevent-extra-2.1-7:amd64                                  2.1.12-stable-1                    amd64        Asynchronous event notification library (extra)\r\nii  libevent-openssl-2.1-7:amd64                                2.1.12-stable-1                    amd64        Asynchronous event notification library (openssl)\r\nii  libevent-pthreads-2.1-7:amd64                               2.1.12-stable-1                    amd64        Asynchronous event notification library (pthreads)\r\n$ apt policy libevent-dev\r\nlibevent-dev:\r\n  Installed: 2.1.12-stable-1\r\n  Candidate: 2.1.12-stable-1\r\n  Version table:\r\n *** 2.1.12-stable-1 500\r\n        500 http://deb.debian.org/debian bullseye/main amd64 Packages\r\n        100 /var/lib/dpkg/status\r\n$ ldd bitcoin-qt | grep event\r\n\tlibevent_pthreads-2.1.so.7 => /usr/lib/x86_64-linux-gnu/libevent_pthreads-2.1.so.7 (0x00007f3ceafca000)\r\n\tlibevent-2.1.so.7 => /usr/lib/x86_64-linux-gnu/libevent-2.1.so.7 (0x00007f3ceaf71000)\r\n\tlibevent_core-2.1.so.7 => /usr/lib/x86_64-linux-gnu/libevent_core-2.1.so.7 (0x00007f3ce9eaa000)\r\n\r\n$ apt-file search libevent-2.1.so.7\r\nlibevent-2.1-7: /usr/lib/x86_64-linux-gnu/libevent-2.1.so.7\r\nlibevent-2.1-7: /usr/lib/x86_64-linux-gnu/libevent-2.1.so.7.0.1\r\n$ dpkg -l libevent-2.1-7\r\nDesired=Unknown/Install/Remove/Purge/Hold\r\n| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend\r\n|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)\r\n||/ Name                 Version         Architecture Description\r\n+++-====================-===============-============-=======================================\r\nii  libevent-2.1-7:amd64 2.1.12-stable-1 amd64        Asynchronous event notification library\r\n$ \r\n```",
      "created_at" : "2023-07-04T16:36:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1620521045",
      "id" : 1620521045,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585glzBV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1620521045/reactions"
      },
      "updated_at" : "2023-07-04T16:36:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1620521045",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=4",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "node_id" : "MDQ6VXNlcjU3MzM1Ng==",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I am experiencing this shutdown hang as well. Just upgraded to v25 on my iMac (running Catalina 10.15.7). Has been hung for over an hour. Last entry in debug.log is \"opencon thread exit.\"\r\n\r\nmy question is, is it safe to force quit the application in this state? I have been resynchronizing the blockchain for weeks now and it's about 97% complete so I'm a little paranoid about killing the process. Any info would be appreciated. Thanks\r\n\r\nedit: should also add that prior to trying to quit the application (Bitcoin-QT, btw) it had not processed any new blocks for a few hours. Peers were still connected and data was being transferred in and out but for some reason it wasn't making any progress.",
      "created_at" : "2023-10-25T20:51:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1780035364",
      "id" : 1780035364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585qGS8k",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1780035364/reactions"
      },
      "updated_at" : "2023-10-25T20:55:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1780035364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/49337095?v=4",
         "events_url" : "https://api.github.com/users/anarchymachines/events{/privacy}",
         "followers_url" : "https://api.github.com/users/anarchymachines/followers",
         "following_url" : "https://api.github.com/users/anarchymachines/following{/other_user}",
         "gists_url" : "https://api.github.com/users/anarchymachines/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/anarchymachines",
         "id" : 49337095,
         "login" : "anarchymachines",
         "node_id" : "MDQ6VXNlcjQ5MzM3MDk1",
         "organizations_url" : "https://api.github.com/users/anarchymachines/orgs",
         "received_events_url" : "https://api.github.com/users/anarchymachines/received_events",
         "repos_url" : "https://api.github.com/users/anarchymachines/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/anarchymachines/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/anarchymachines/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/anarchymachines"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Just upgraded to v25 on my iMac\n\nI would suggest upgrading to 25.1, which has fixed this issue.",
      "created_at" : "2023-10-25T20:54:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1780038905",
      "id" : 1780038905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585qGTz5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1780038905/reactions"
      },
      "updated_at" : "2023-10-25T20:54:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1780038905",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Silly me...I downloaded it from bitcoin.org and didn't even think to look here. Will download right away...but...do you think killing the existing hanging process will most likely be ok?",
      "created_at" : "2023-10-25T20:59:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1780045561",
      "id" : 1780045561,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585qGVb5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1780045561/reactions"
      },
      "updated_at" : "2023-10-25T20:59:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1780045561",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/49337095?v=4",
         "events_url" : "https://api.github.com/users/anarchymachines/events{/privacy}",
         "followers_url" : "https://api.github.com/users/anarchymachines/followers",
         "following_url" : "https://api.github.com/users/anarchymachines/following{/other_user}",
         "gists_url" : "https://api.github.com/users/anarchymachines/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/anarchymachines",
         "id" : 49337095,
         "login" : "anarchymachines",
         "node_id" : "MDQ6VXNlcjQ5MzM3MDk1",
         "organizations_url" : "https://api.github.com/users/anarchymachines/orgs",
         "received_events_url" : "https://api.github.com/users/anarchymachines/received_events",
         "repos_url" : "https://api.github.com/users/anarchymachines/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/anarchymachines/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/anarchymachines/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/anarchymachines"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I tried to kill the process but it had no effect. Then I tried again with \"kill -9 (PID)\" and that of course did the trick. Didnt seem to do any harm. However, I installed 25.1 and it seemed to hang on block 813831 while synchronizing headers. Debug.log is full of \"New outbound peer connected\" (with blocks=813831) and after trying to quit via command + q it has been hung for about 15 minutes on \"Bitcoin Core is shutting down...\"\r\n\r\nLast message in debug.log is \"msghand thread exit\"",
      "created_at" : "2023-10-26T05:19:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1780432274",
      "id" : 1780432274,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
      "node_id" : "IC_kwDOABII585qHz2S",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1780432274/reactions"
      },
      "updated_at" : "2023-10-26T05:19:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1780432274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/49337095?v=4",
         "events_url" : "https://api.github.com/users/anarchymachines/events{/privacy}",
         "followers_url" : "https://api.github.com/users/anarchymachines/followers",
         "following_url" : "https://api.github.com/users/anarchymachines/following{/other_user}",
         "gists_url" : "https://api.github.com/users/anarchymachines/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/anarchymachines",
         "id" : 49337095,
         "login" : "anarchymachines",
         "node_id" : "MDQ6VXNlcjQ5MzM3MDk1",
         "organizations_url" : "https://api.github.com/users/anarchymachines/orgs",
         "received_events_url" : "https://api.github.com/users/anarchymachines/received_events",
         "repos_url" : "https://api.github.com/users/anarchymachines/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/anarchymachines/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/anarchymachines/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/anarchymachines"
      }
   }
]
