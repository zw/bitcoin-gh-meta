[
   {
      "body" : "Travis fails with `/sbin/start-stop-daemon: unable to stat /usr/bin/Xvfb (No such file or directory)`.\r\n\r\ntail from https://api.travis-ci.org/jobs/238751025/log.txt?deansi=true:\r\n```\r\n$ if [ \"$RUN_TESTS\" = \"true\" -a \"${DEP_OPTS#*NO_QT=1}\" = \"$DEP_OPTS\" ]; then export DISPLAY=:99.0; /sbin/start-stop-daemon --start --pidfile /tmp/custom_xvfb_99.pid --make-pidfile --background --exec /usr/bin/Xvfb -- :99 -ac; fi\r\n/sbin/start-stop-daemon: unable to stat /usr/bin/Xvfb (No such file or directory)\r\n\r\n\r\nThe command \"if [ \"$RUN_TESTS\" = \"true\" -a \"${DEP_OPTS#*NO_QT=1}\" = \"$DEP_OPTS\" ]; then export DISPLAY=:99.0; /sbin/start-stop-daemon --start --pidfile /tmp/custom_xvfb_99.pid --make-pidfile --background --exec /usr/bin/Xvfb -- :99 -ac; fi\" failed and exited with 2 during .\r\n\r\nYour build has been stopped.\r\n```",
      "created_at" : "2017-06-02T15:22:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10508#issuecomment-305819629",
      "id" : 305819629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10508",
      "updated_at" : "2017-06-02T15:22:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305819629",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Updated 030a9e9112073c083f9cfed0b0f6268d4c351bec -> 019ac7bb66ad2c8304c24e1c72361eeb811ae40e ([pr/travqt.1](https://github.com/ryanofsky/bitcoin/commits/pr/travqt.1) -> [pr/travqt.2](https://github.com/ryanofsky/bitcoin/commits/pr/travqt.2))\r\n",
      "created_at" : "2017-06-02T15:58:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10508#issuecomment-305831150",
      "id" : 305831150,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10508",
      "updated_at" : "2017-06-02T15:58:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305831150",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "We only have a 50 minute time slot to run one entry of the matrix. It turns out that functional tests can not be run after compiling depends/qt from scratch.",
      "created_at" : "2017-06-03T13:38:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10508#issuecomment-305975663",
      "id" : 305975663,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10508",
      "updated_at" : "2017-06-03T13:38:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305975663",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "> It turns out that functional tests can not be run after compiling depends/qt from scratch.\r\n\r\nIt sounds like the only way to deal with this would be to split the `RUN_TESTS` variable into separate variables for python rpc and c++ tests, and then add a new travis configuration enabling wallet and Qt and `RUN_TESTS` for c++ but not python.\r\n\r\n**Is there a cost to creating a new travis configuration, and do people think this is worth doing?** If so, I can update the PR to implement this. If not, I will close this PR, and create a new one just documenting why `NO_QT` is set here.\r\n\r\nAlso, rebased 019ac7bb66ad2c8304c24e1c72361eeb811ae40e -> 76f303a5f601b4855fd13c35fda0080d9dd04387 ([pr/travqt.2](https://github.com/ryanofsky/bitcoin/commits/pr/travqt.2) -> [pr/travqt.3](https://github.com/ryanofsky/bitcoin/commits/pr/travqt.3)) after #10509 merge.",
      "created_at" : "2017-06-05T16:11:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10508#issuecomment-306230463",
      "id" : 306230463,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10508",
      "updated_at" : "2017-06-05T16:11:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306230463",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "The cost would be that each push takes a bit longer to run through travis. As ccache is enabled on travis, we are probably talking about 3-5 minutes + whatever it takes to run the tests.\r\n\r\nIf we are going to add a new configuration, I'd prefer a [qt4, wallet, qt_tests, no_functional_tests] config. You might take a look at #7142, which adds the qt4 stuff only.",
      "created_at" : "2017-06-05T16:28:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10508#issuecomment-306235003",
      "id" : 306235003,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10508",
      "updated_at" : "2017-06-05T16:28:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306235003",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Wild thoughts: what about using PPA qt5 via apt instead of a depends build for this configuration?",
      "created_at" : "2017-06-05T16:35:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10508#issuecomment-306236977",
      "id" : 306236977,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10508",
      "updated_at" : "2017-06-05T16:35:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306236977",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "> The cost would be that each push takes a bit longer to run through travis. As ccache is enabled on travis, we are probably talking about 3-5 minutes + whatever it takes to run the tests.\r\n\r\nI'm confused about whether different travis configurations run in parallel or not. If so, would adding a new configuration necessarily slow down travis pushes? And would parallel builds share the same ccache?\r\n\r\n`CCACHE_SIZE` is also set to 100M on travis, which seems small. ccache on my machine after just one non-depends build fills up to 900M so I wonder if we are actually using ccache for much on travis.\r\n\r\n> Wild thoughts: what about using PPA qt5 via apt instead of a depends build for this configuration?\r\n\r\n#7142 seems to use the `qt4-dev-tools` package without a PPA.",
      "created_at" : "2017-06-05T16:59:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10508#issuecomment-306243183",
      "id" : 306243183,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10508",
      "updated_at" : "2017-06-05T16:59:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306243183",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "Indeed, one qt5 depends build should be enough. We can use packages for the other qt configurations.\r\n\r\nEdit: Also note  that the ccache is compressed, so 100M is likely enough. (The size is about 68-89M)",
      "created_at" : "2017-06-05T17:44:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10508#issuecomment-306254945",
      "id" : 306254945,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10508",
      "updated_at" : "2017-06-05T18:17:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306254945",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : ">I'm confused about whether different travis configurations run in parallel or not. If so, would adding a new configuration necessarily slow down travis pushes? And would parallel builds share the same ccache?\r\n\r\nThere are 5 workers running in parallel, so if the build matrix has 7 entries, at least 2 jobs are executed with a slight delay.\r\n\r\nAlso, the cache folder/url should be unique for each configuration in the matrix.",
      "created_at" : "2017-06-06T10:55:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10508#issuecomment-306451402",
      "id" : 306451402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10508",
      "updated_at" : "2017-06-06T10:55:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306451402",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Got this working without having to add a new build configuration using jonasschnelli's idea and making travis build bitcoin against a packaged Qt instead of no Qt at all.\r\n\r\nDoing this required adding a new `HOST_PKG` depends option so the generated `config.site` file would allow `pkg-config` to return information about locally installed libraries. The `HOST_PKG` option works, but I'm not sure that the naming or mechanics are very intuitive, so I'd appreciate any suggestions on improving or replacing it.\r\n\r\nUpdated 76f303a5f601b4855fd13c35fda0080d9dd04387 -> cd986ea66c824e3fce564a85b0de67447a0e363e ([pr/travqt.3](https://github.com/ryanofsky/bitcoin/commits/pr/travqt.3) -> [pr/travqt.5](https://github.com/ryanofsky/bitcoin/commits/pr/travqt.5))\r\n",
      "created_at" : "2017-06-06T21:54:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10508#issuecomment-306628876",
      "id" : 306628876,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10508",
      "updated_at" : "2017-06-06T21:54:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306628876",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "Tested ACK cd986ea66c824e3fce564a85b0de67447a0e363e, though I can't comment on the build system changes.",
      "created_at" : "2017-06-19T14:04:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10508#issuecomment-309449610",
      "id" : 309449610,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10508",
      "updated_at" : "2017-06-19T14:04:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/309449610",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "ping @theuni for build system changes",
      "created_at" : "2017-06-22T19:00:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10508#issuecomment-310471856",
      "id" : 310471856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10508",
      "updated_at" : "2017-06-22T19:00:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/310471856",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
