[
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/192cc910ec7cade1d0dce7f3b111e7fc7720e607 for binaries and test log.",
      "created_at" : "2013-01-18T19:11:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2188#issuecomment-12436569",
      "id" : 12436569,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2188",
      "updated_at" : "2013-01-18T19:11:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12436569",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/2188#discussion_r2703506"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2188"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2703506"
         }
      },
      "body" : "I like such constants and think we have too many hard-coded numbers in the code.",
      "commit_id" : "192cc910ec7cade1d0dce7f3b111e7fc7720e607",
      "created_at" : "2013-01-18T23:17:10Z",
      "diff_hunk" : "@@ -17,6 +17,8 @@\n class CCoins;\n class CTransaction;\n \n+static const unsigned int MAX_SCRIPT_ELEMENT_SIZE = 520; // bytes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2188#discussion_r2703506",
      "id" : 2703506,
      "original_commit_id" : "192cc910ec7cade1d0dce7f3b111e7fc7720e607",
      "original_position" : 4,
      "path" : "src/script.h",
      "position" : 4,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2188",
      "updated_at" : "2013-01-18T23:17:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2703506",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/2188#discussion_r2703551"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2188"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2703551"
         }
      },
      "body" : "Yea, sorry I forgot to do this before it got merged (when you asked for it).",
      "commit_id" : "192cc910ec7cade1d0dce7f3b111e7fc7720e607",
      "created_at" : "2013-01-18T23:23:40Z",
      "diff_hunk" : "@@ -17,6 +17,8 @@\n class CCoins;\n class CTransaction;\n \n+static const unsigned int MAX_SCRIPT_ELEMENT_SIZE = 520; // bytes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2188#discussion_r2703551",
      "id" : 2703551,
      "original_commit_id" : "192cc910ec7cade1d0dce7f3b111e7fc7720e607",
      "original_position" : 4,
      "path" : "src/script.h",
      "position" : 4,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2188",
      "updated_at" : "2013-01-18T23:23:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2703551",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "ACK",
      "created_at" : "2013-01-21T18:08:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2188#issuecomment-12509938",
      "id" : 12509938,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2188",
      "updated_at" : "2013-01-21T18:08:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12509938",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "I have no problems with this change or its implementation specifically, but I think it shows how much the protocol locks us into a specific implementation. I think it would be cleaner if there was no special casing to work around the latency problem, and txids sent as filtered blocks were treated as normal invs, with their data being stored in the relay cache (ready to be getdata'd the normal way). That doesn't have the latency advantages, though.",
      "created_at" : "2013-01-22T11:08:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2188#issuecomment-12539827",
      "id" : 12539827,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2188",
      "updated_at" : "2013-01-22T11:08:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12539827",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Given that performance is the primary reason for this change, I'm not very keen on adding latency for cleanness reasons. Anyway, this work is done for now. Better protocols can come in future. Let's get it merged and launched so end users can benefit.",
      "created_at" : "2013-01-22T21:42:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2188#issuecomment-12568248",
      "id" : 12568248,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2188",
      "updated_at" : "2013-01-22T21:42:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12568248",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@mikehern this response make it feel to me that you're now railroading the change.  Personally, this is triggering a reflexive negative reaction. I think the fact that you feel the need to defend it this way is a sign that it may be too immature to include.  Better protocols can come in the future, but old ones need to be supported a long time.\r\n\r\nWRT latency, you're talking about 1x RTT for an event that happens once per ten minutes in the steady state. Or an overhead or a 0.01% performance difference for 100ms RTT.  Am I missing something there?\r\n",
      "created_at" : "2013-01-22T21:55:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2188#issuecomment-12568902",
      "id" : 12568902,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2188",
      "updated_at" : "2013-01-22T21:55:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12568902",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "The standard way to use SPV clients, at least for now, is to start them up when you need them and shut them down when done. Keeping it running 24/7 doesn't make a whole lot of sense especially on a phone. So the steady state is synchronizing the chain as fast as possible. That's why latency matters.\r\n",
      "created_at" : "2013-01-22T22:40:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2188#issuecomment-12571062",
      "id" : 12571062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2188",
      "updated_at" : "2013-01-22T22:40:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12571062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@gmaxwell Im not so sure that the whole bloom filter stuff is/was railroaded...actually it was pretty well thought/implemented through.  This pull itself one could argue is being railroaded, but only because it doesnt make sense for the bloom code as-is to be included in any releases (in part due to changes to bitcoinj that are also only just now happening).  Also, the minute difference that this pull represents, IMHO, is really not something that merits a large discussion.",
      "created_at" : "2013-01-22T22:49:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2188#issuecomment-12571490",
      "id" : 12571490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2188",
      "updated_at" : "2013-01-22T22:49:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12571490",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "If you're bulk pulling the chain why do you need to serialize getting the transactions with getting the next block?",
      "created_at" : "2013-01-22T22:50:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2188#issuecomment-12571525",
      "id" : 12571525,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2188",
      "updated_at" : "2013-01-22T22:50:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12571525",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "It reduces memory requirements during chain sync. Anyway, I disagree that requiring a getdata is better. The node knows exactly what comes next after sending the filtered blocks. A getdata is superfluous.\r\n\r\nWRT \"railroading\". The code we have works fine. This tweak is not essential but simplifies the code on the client side when various changes that I just posted about to bitcoin-security are implemented. There's no reason not to do it. More generally - perfect is the enemy of the good. Bitcoin does not have infinite time. It isn't something to polish in an ivory tower, after all, Bitcoin already came to the world in a far from perfect state. If SPV clients have acceptable performance 5 years from now it will be irrelevant, people will have either given up on Bitcoin or all be using ad-hoc protocols that talk to different kinds of servers, Electrum style. Forward progress is essential and these changes have taken too long already.",
      "created_at" : "2013-01-22T23:01:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2188#issuecomment-12571951",
      "id" : 12571951,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2188",
      "updated_at" : "2013-01-22T23:01:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12571951",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "As I didn't want to restart the discussion about this, I probably shouldn't have brought it up again. I believe the Bloom filtering was well thought-out, and the reason for sending transactions immediately was also clear. Reducing latency for mobile clients was a design goal, and that outweighs neatness. I'm fine with this change (to be honest, I assumed this was how it was implemented in the first place). I just wanted to mention that the fact that we need to change something like this because of an implementation issue, makes me feel uneasy. But perhaps there are others who feel the same way...",
      "created_at" : "2013-01-22T23:40:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2188#issuecomment-12573412",
      "id" : 12573412,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2188",
      "updated_at" : "2013-01-22T23:40:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12573412",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
