[
   {
      "body" : "Line 3205 of main.cpp: if (tx.AcceptToMemoryPool(true, false, &fMissingInputs2)) doesÃÂ´t look good.\r\nYou are skipping any fee check for orphans to enter the memory pool.\r\nThen an attacker can easily penny-flood by creating a huge orphan transaction (with a single missing parent), and then releasing the parent transaction (that will pass the rate limit test because it is very small).\r\n\r\nIt would be better to do: if (tx.AcceptToMemoryPool(true, true, &fMissingInputs2)). \r\n\r\nTo keep a clear meaning, dFreeCount  should be understood as the maximum OUTPUT bytes/second a peer can request from me, instead as maximum INPUT bytes/second a peer can send.\r\n",
      "created_at" : "2013-01-15T03:16:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2182#issuecomment-12251760",
      "id" : 12251760,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2182",
      "updated_at" : "2013-01-15T03:16:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12251760",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "You can't fee-check orphan transactions: without the parent, the value of the inputs are unknown.",
      "created_at" : "2013-01-15T04:00:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2182#issuecomment-12252556",
      "id" : 12252556,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2182",
      "updated_at" : "2013-01-15T04:00:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12252556",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "When (tx.AcceptToMemoryPool(true, xxx, &fMissingInputs2)) is executed, then it means that at least one of their inputs have been received, so it may be complete. So it is correct to try to check the fees at that time.",
      "created_at" : "2013-01-15T13:48:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2182#issuecomment-12267303",
      "id" : 12267303,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2182",
      "updated_at" : "2013-01-15T13:48:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12267303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "Look at the code surrounding line 3205.",
      "created_at" : "2013-01-15T13:49:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2182#issuecomment-12267351",
      "id" : 12267351,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2182",
      "updated_at" : "2013-01-15T13:49:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12267351",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "Sergio's correct, if we get a transaction that fulfills an orphan's missing inputs, we should treat the orphan as if we just received it over the wire.\r\n\r\nChanged the true to a false, and fixed the comment and message for the \"orphan now has all inputs, but is rejected by the free transaction ratelimiter\" else clause.\r\n",
      "created_at" : "2013-01-15T14:11:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2182#issuecomment-12268351",
      "id" : 12268351,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2182",
      "updated_at" : "2013-01-15T14:11:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12268351",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Revised test plan:\r\n\r\nOn PRE-PATCH bitcoind:\r\n\r\nRun testnet-in-a-box setup, with 'bc1' and 'bc2' nodes, both with -limitfreerelay=0\r\n\r\nsend a zero-fee transaction from bc2, sending coins to bc1\r\nEXPECT: transaction ends up in bc1's memory pool (use getrawmempool to verify)\r\n\r\nApply this patch, re-run test:\r\nEXPECT: transaction does not end up in bc1's memory pool or in bc1's listtransactions\r\n\r\n",
      "created_at" : "2013-01-23T21:03:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2182#issuecomment-12622133",
      "id" : 12622133,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2182",
      "updated_at" : "2013-01-23T21:40:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12622133",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Results of testing successful, but I did have to tweak the free-transaction code so limitfreerelay=0 did what I wanted it to do (it was letting the first free transaction into the memory pool).",
      "created_at" : "2013-01-24T01:26:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2182#issuecomment-12632680",
      "id" : 12632680,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2182",
      "updated_at" : "2013-01-24T01:26:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12632680",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/9c9f5c1303dff0c010e9e68ba7b5619330edfb68 for binaries and test log.",
      "created_at" : "2013-01-24T05:13:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2182#issuecomment-12637669",
      "id" : 12637669,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2182",
      "updated_at" : "2013-01-24T05:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12637669",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   }
]
