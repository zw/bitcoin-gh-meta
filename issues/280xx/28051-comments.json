[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28051).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/28051#pullrequestreview-1778364556), [maflcko](https://github.com/bitcoin/bitcoin/pull/28051#pullrequestreview-1779599067), [stickies-v](https://github.com/bitcoin/bitcoin/pull/28051#pullrequestreview-1780105857), [achow101](https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1856505048) |\n| Concept ACK | [fanquake](https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1667535093) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28960](https://github.com/bitcoin/bitcoin/pull/28960) (kernel: Remove dependency on CScheduler by TheCharlatan)\n* [#28956](https://github.com/bitcoin/bitcoin/pull/28956) (Nuke adjusted time (attempt 2) by dergoegge)\n* [#28863](https://github.com/bitcoin/bitcoin/pull/28863) (wallet, mempool: propagete `checkChainLimits` error message to wallet by ismaelsadeeq)\n* [#28843](https://github.com/bitcoin/bitcoin/pull/28843) ([refactor] Remove BlockAssembler m_mempool member by TheCharlatan)\n* [#28830](https://github.com/bitcoin/bitcoin/pull/28830) ([refactor] Check CTxMemPool options in ctor by TheCharlatan)\n* [#28792](https://github.com/bitcoin/bitcoin/pull/28792) (Embedding ASMap files as binary dump header file by fjahr)\n* [#28228](https://github.com/bitcoin/bitcoin/pull/28228) (kernel: Run sanity checks on context construction by TheCharlatan)\n* [#28052](https://github.com/bitcoin/bitcoin/pull/28052) (blockstorage: XOR blocksdir *.dat files by maflcko)\n* [#27253](https://github.com/bitcoin/bitcoin/pull/27253) (httpserver, rest: improving URI validation by pablomartin4btc)\n* [#26966](https://github.com/bitcoin/bitcoin/pull/26966) (index: blockfilter initial sync speedup, parallelize process by furszy)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-07-07T22:26:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1626306397",
      "id" : 1626306397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585g73dd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1626306397/reactions"
      },
      "updated_at" : "2023-12-14T20:03:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1626306397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I have the same question here: https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1255496707",
      "created_at" : "2023-07-08T10:44:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1627094953",
      "id" : 1627094953,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585g-3-p",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1627094953/reactions"
      },
      "updated_at" : "2023-07-08T10:44:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1627094953",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1257259643"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257259643"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why not use `EnsureAnyNodeContext` here as done in many other places?",
      "commit_id" : "c7bbca13da3c569358632fa7cc2d2040aa86a06b",
      "created_at" : "2023-07-08T12:45:06Z",
      "diff_hunk" : "@@ -179,7 +181,8 @@ static RPCHelpMan stop()\n {\n     // Event loop will exit after current HTTP requests have been handled, so\n     // this reply will get back to the client.\n-    StartShutdown();\n+    auto node_context = CHECK_NONFATAL(util::AnyPtr<node::NodeContext>(jsonRequest.context));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1257259643",
      "id" : 1257259643,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585K8EJ7",
      "original_commit_id" : "d9453bddd6ce5446552e844f4d5b65368d831656",
      "original_line" : 184,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/rpc/server.cpp",
      "position" : null,
      "pull_request_review_id" : 1520702348,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257259643/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-08T19:53:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257259643",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1257286292"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257286292"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think we might have introduced a bug here before. This may be possible to trigger when running the GUI before the kernel context is initialized with `app.baseInitialize()`. We could just move it to after `baseInitialize` (see my [patch here](https://github.com/TheCharlatan/bitcoin/commit/2df7a669a07be01ef2cce0d22891617bc19060d7)), but I am not sure if that would be correct either. Maybe `app.baseInitialize()` can be moved up a bit instead?",
      "commit_id" : "c7bbca13da3c569358632fa7cc2d2040aa86a06b",
      "created_at" : "2023-07-08T14:47:15Z",
      "diff_hunk" : "@@ -25,7 +27,7 @@ bool WinShutdownMonitor::nativeEventFilter(const QByteArray &eventType, void *pM\n            {\n                // Initiate a client shutdown after receiving a WM_QUERYENDSESSION and block\n                // Windows session end until we have finished client shutdown.\n-               StartShutdown();\n+               Assert(kernel::g_context)->interrupt();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1257286292",
      "id" : 1257286292,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585K8KqU",
      "original_commit_id" : "d9453bddd6ce5446552e844f4d5b65368d831656",
      "original_line" : 30,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/qt/winshutdownmonitor.cpp",
      "position" : null,
      "pull_request_review_id" : 1520702348,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257286292/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-08T19:53:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257286292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1257291194"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257291194"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I was looking at the initialization order here and noticed that I might have introduced more unsafe behavior here in e2d680a32d757de0ef8eb836047a0daa1d82e3c4. These handlers are registered in `AppInitBasicSetup`. But if you look in bitcoind.cpp, the kernel context is created after `AppInitBasicSetup` is called.",
      "commit_id" : "c7bbca13da3c569358632fa7cc2d2040aa86a06b",
      "created_at" : "2023-07-08T15:03:00Z",
      "diff_hunk" : "@@ -376,7 +374,7 @@ static void HandleSIGHUP(int)\n #else\n static BOOL WINAPI consoleCtrlHandler(DWORD dwCtrlType)\n {\n-    StartShutdown();\n+    Assert(kernel::g_context)->interrupt();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1257291194",
      "id" : 1257291194,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585K8L26",
      "original_commit_id" : "d9453bddd6ce5446552e844f4d5b65368d831656",
      "original_line" : 376,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1520702348,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257291194/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-10T08:20:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257291194",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1257346188"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257346188"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1257259643\r\n\r\n> Why not use `EnsureAnyNodeContext` here as done in many other places?\r\n\r\nThanks switched to that. I was trying to find the function and couldn't find it. I just assumed it had been lost in some refactoring.",
      "commit_id" : "c7bbca13da3c569358632fa7cc2d2040aa86a06b",
      "created_at" : "2023-07-08T20:07:07Z",
      "diff_hunk" : "@@ -179,7 +181,8 @@ static RPCHelpMan stop()\n {\n     // Event loop will exit after current HTTP requests have been handled, so\n     // this reply will get back to the client.\n-    StartShutdown();\n+    auto node_context = CHECK_NONFATAL(util::AnyPtr<node::NodeContext>(jsonRequest.context));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1257346188",
      "id" : 1257346188,
      "in_reply_to_id" : 1257259643,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585K8ZSM",
      "original_commit_id" : "d9453bddd6ce5446552e844f4d5b65368d831656",
      "original_line" : 184,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/rpc/server.cpp",
      "position" : null,
      "pull_request_review_id" : 1520779536,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257346188/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-10T23:57:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257346188",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-07-10T17:30:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1629406540",
      "id" : 1629406540,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585hHsVM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1629406540/reactions"
      },
      "updated_at" : "2023-07-10T17:30:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1629406540",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-07-14T18:45:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1636260467",
      "id" : 1636260467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585hh1pz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1636260467/reactions"
      },
      "updated_at" : "2023-07-14T18:45:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1636260467",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2023-08-07T09:41:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1667535093",
      "id" : 1667535093,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585jZJD1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1667535093/reactions"
      },
      "updated_at" : "2023-08-07T09:41:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1667535093",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Making this into a draft because I want to do more work to avoid the uncaught exceptions that Marco mentioned [#27861 (comment)](https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1255496707), and address initialization order issues TheCharlatan mentioned [#28051 (comment)](https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1257286292) and [#28051 (comment)](https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1257291194)\r\n\r\nRemoved draft state and rebased 0dce0042687d2f7151ff9596295ed0b7f84aadd5 -> eccea15a88d0b1ea29847ff6a1f7683459516139 ([`pr/noshut.4`](https://github.com/ryanofsky/bitcoin/commits/pr/noshut.4) -> [`pr/noshut.5`](https://github.com/ryanofsky/bitcoin/commits/pr/noshut.5), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/noshut.4-rebase..pr/noshut.5)) removing all the SignalInterrupt exceptions, fixing initialization order issues that were mentioned, getting rid of the `kernel::g_context` variable, and rebasing to fix conflicts with #28048 and #28244",
      "created_at" : "2023-08-21T20:29:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1686998476",
      "id" : 1686998476,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585kjY3M",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1686998476/reactions"
      },
      "updated_at" : "2023-08-21T20:29:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1686998476",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Windows builds are currently unhappy:\r\n```bash\r\n  CXX      kernel/libbitcoin_node_a-mempool_persist.o\r\ninit.cpp: In function âBOOL consoleCtrlHandler(DWORD)â:\r\ninit.cpp:386:15: error: ignoring return value of âbool util::SignalInterrupt::operator()()â, declared with attribute ânodiscardâ [-Werror=unused-result]\r\n  386 |     g_shutdown();\r\n      |     ~~~~~~~~~~^~\r\nIn file included from ./kernel/context.h:8,\r\n                 from ./node/context.h:8,\r\n                 from init.cpp:48:\r\n./util/signalinterrupt.h:32:24: note: declared here\r\n   32 |     [[nodiscard]] bool operator()();\r\n      |                        ^~~~~~~~\r\ncc1plus: all warnings being treated as errors\r\nmake[2]: *** [Makefile:10167: libbitcoin_node_a-init.o] Error 1\r\n```",
      "created_at" : "2023-08-22T09:17:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1687800034",
      "id" : 1687800034,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585kmcji",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1687800034/reactions"
      },
      "updated_at" : "2023-08-22T09:17:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1687800034",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Does tsan pass locally, if you run the fun tests with it?",
      "created_at" : "2023-08-23T09:47:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1689644209",
      "id" : 1689644209,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585kteyx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1689644209/reactions"
      },
      "updated_at" : "2023-08-23T09:47:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1689644209",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Does tsan pass locally, if you run the fun tests with it?\r\n\r\nTsan seems to output warnings so the test runner fails. I was able to reproduce the CI error from https://cirrus-ci.com/task/5608405029617664 locally by running\r\n\r\n ```bash\r\ncd /ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu\r\ntest/functional/test_runner.py\r\n```\r\n\r\nI am a little confused though because even though testrunner fails on the create_cache step, running it manually with \r\n\r\n```bash\r\ntest/functional/create_cache.py --cachedir=test/cache --tmpdir=/tmp/cache\r\n```\r\n\r\nseems to succeed.\r\n\r\nI also found that if I ran `src/bitcoind -regtest` and `src/bitcoin-cli -regtest stop`, shutdown would work, but with the tsan warnings, which I'll try to debug:\r\n\r\n```c++\r\nWARNING: ThreadSanitizer: data race (pid=102057)\r\n  Read of size 4 at 0x558be9794bd8 by thread T10:\r\n    #0 TokenPipeEnd::IsOpen() src/./util/tokenpipe.h:53:28 (bitcoind+0xab59e2) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #1 util::SignalInterrupt::open() src/util/signalinterrupt.cpp:21:19 (bitcoind+0xab59e2)\r\n    #2 util::SignalInterrupt::operator()() src/util/signalinterrupt.cpp:47:10 (bitcoind+0xab5cfb) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #3 stop()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const src/rpc/server.cpp:184:10 (bitcoind+0x4ddc70) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #4 decltype(std::declval<stop()::$_0&>()(std::declval<RPCHelpMan const&>(), std::declval<JSONRPCRequest const&>())) std::__1::__invoke[abi:v160000]<stop()::$_0&, RPCHelpMan const&, JSONRPCRequest const&>(stop()::$_0&, RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/invoke.h:394:23 (bitcoind+0x4ddc70)\r\n    #5 UniValue std::__1::__invoke_void_return_wrapper<UniValue, false>::__call<stop()::$_0&, RPCHelpMan const&, JSONRPCRequest const&>(stop()::$_0&, RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/invoke.h:478:16 (bitcoind+0x4ddc70)\r\n    #6 std::__1::__function::__alloc_func<stop()::$_0, std::__1::allocator<stop()::$_0>, UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()[abi:v160000](RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:185:16 (bitcoind+0x4ddc70)\r\n    #7 std::__1::__function::__func<stop()::$_0, std::__1::allocator<stop()::$_0>, UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()(RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:356:12 (bitcoind+0x4ddc70)\r\n    #8 std::__1::__function::__value_func<UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()[abi:v160000](RPCHelpMan const&, JSONRPCRequest const&) const /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:510:16 (bitcoind+0x9ce48f) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #9 std::__1::function<UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()(RPCHelpMan const&, JSONRPCRequest const&) const /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:1156:12 (bitcoind+0x9ce48f)\r\n    #10 RPCHelpMan::HandleRequest(JSONRPCRequest const&) const src/rpc/util.cpp:612:20 (bitcoind+0x9ce48f)\r\n    #11 CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)::operator()(JSONRPCRequest const&, UniValue&, bool) const src/./rpc/server.h:109:91 (bitcoind+0x3aad0d) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #12 decltype(std::declval<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&>()(std::declval<JSONRPCRequest const&>(), std::declval<UniValue&>(), std::declval<bool>())) std::__1::__invoke[abi:v160000]<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/invoke.h:394:23 (bitcoind+0x3aabbb) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #13 bool std::__1::__invoke_void_return_wrapper<bool, false>::__call<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/invoke.h:478:16 (bitcoind+0x3aabbb)\r\n    #14 std::__1::__function::__alloc_func<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:v160000](JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:185:16 (bitcoind+0x3aabbb)\r\n    #15 std::__1::__function::__func<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:356:12 (bitcoind+0x3aabbb)\r\n    #16 std::__1::__function::__value_func<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:v160000](JSONRPCRequest const&, UniValue&, bool&&) const /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:510:16 (bitcoind+0x4d91e1) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #17 std::__1::function<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool) const /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:1156:12 (bitcoind+0x4d91e1)\r\n    #18 ExecuteCommand(CRPCCommand const&, JSONRPCRequest const&, UniValue&, bool) src/rpc/server.cpp:541:20 (bitcoind+0x4d91e1)\r\n    #19 ExecuteCommands(std::__1::vector<CRPCCommand const*, std::__1::allocator<CRPCCommand const*>> const&, JSONRPCRequest const&, UniValue&) src/rpc/server.cpp:506:13 (bitcoind+0x4d91e1)\r\n    #20 CRPCTable::execute(JSONRPCRequest const&) const src/rpc/server.cpp:526:13 (bitcoind+0x4d8dd2) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #21 HTTPReq_JSONRPC(std::__1::any const&, HTTPRequest*) src/httprpc.cpp:202:40 (bitcoind+0x6210f4) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #22 StartHTTPRPC(std::__1::any const&)::$_0::operator()(HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) const src/httprpc.cpp:301:80 (bitcoind+0x6210f4)\r\n    #23 decltype(std::declval<StartHTTPRPC(std::__1::any const&)::$_0&>()(std::declval<HTTPRequest*>(), std::declval<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>())) std::__1::__invoke[abi:v160000]<StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>(StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/invoke.h:394:23 (bitcoind+0x6210f4)\r\n    #24 bool std::__1::__invoke_void_return_wrapper<bool, false>::__call<StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>(StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/invoke.h:478:16 (bitcoind+0x6210f4)\r\n    #25 std::__1::__function::__alloc_func<StartHTTPRPC(std::__1::any const&)::$_0, std::__1::allocator<StartHTTPRPC(std::__1::any const&)::$_0>, bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()[abi:v160000](HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:185:16 (bitcoind+0x6210f4)\r\n    #26 std::__1::__function::__func<StartHTTPRPC(std::__1::any const&)::$_0, std::__1::allocator<StartHTTPRPC(std::__1::any const&)::$_0>, bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()(HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:356:12 (bitcoind+0x6210f4)\r\n    #27 std::__1::__function::__value_func<bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()[abi:v160000](HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) const /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:510:16 (bitcoind+0x632d80) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #28 std::__1::function<bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()(HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) const /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:1156:12 (bitcoind+0x632d80)\r\n    #29 HTTPWorkItem::operator()() src/httpserver.cpp:59:9 (bitcoind+0x632d80)\r\n    #30 WorkQueue<HTTPClosure>::Run() src/httpserver.cpp:114:13 (bitcoind+0x634b37) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #31 HTTPWorkQueueRun(WorkQueue<HTTPClosure>*, int) src/httpserver.cpp:353:12 (bitcoind+0x62b7ea) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #32 decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:v160000]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(void (*&&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/invoke.h:394:23 (bitcoind+0x6354f7) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #33 void std::__1::__thread_execute[abi:v160000]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>&, std::__1::__tuple_indices<2ul, 3ul>) /usr/lib/llvm-16/bin/../include/c++/v1/thread:282:5 (bitcoind+0x6354f7)\r\n    #34 void* std::__1::__thread_proxy[abi:v160000]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(void*) /usr/lib/llvm-16/bin/../include/c++/v1/thread:293:5 (bitcoind+0x6354f7)\r\n\r\n  Previous write of size 4 at 0x558be9794bd8 by main thread:\r\n    #0 TokenPipeEnd::Close() src/util/tokenpipe.cpp:81:10 (bitcoind+0xad379f) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #1 TokenPipeEnd::operator=(TokenPipeEnd&&) src/./util/tokenpipe.h:63:9 (bitcoind+0xab5a28) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #2 util::SignalInterrupt::open() src/util/signalinterrupt.cpp:24:18 (bitcoind+0xab5a28)\r\n    #3 util::SignalInterrupt::wait() src/util/signalinterrupt.cpp:69:10 (bitcoind+0xab5c6b) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #4 main src/bitcoind.cpp:274:51 (bitcoind+0x16b99d) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n\r\n  Location is global 'g_shutdown' of size 12 at 0x558be9794bd4 (bitcoind+0x25b1bd8)\r\n\r\n  Thread T10 'b-httpworker.0' (tid=102068, running) created by main thread at:\r\n    #0 pthread_create <null> (bitcoind+0xe1beb) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #1 std::__1::__libcpp_thread_create[abi:v160000](unsigned long*, void* (*)(void*), void*) /usr/lib/llvm-16/bin/../include/c++/v1/__threading_support:378:10 (bitcoind+0x6353ab) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #2 std::__1::thread::thread<void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&, void>(void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-16/bin/../include/c++/v1/thread:309:16 (bitcoind+0x6353ab)\r\n    #3 void std::__1::allocator<std::__1::thread>::construct[abi:v160000]<std::__1::thread, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&>(std::__1::thread*, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-16/bin/../include/c++/v1/__memory/allocator.h:168:28 (bitcoind+0x635126) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #4 void std::__1::allocator_traits<std::__1::allocator<std::__1::thread>>::construct[abi:v160000]<std::__1::thread, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&, void>(std::__1::allocator<std::__1::thread>&, std::__1::thread*, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-16/bin/../include/c++/v1/__memory/allocator_traits.h:296:13 (bitcoind+0x635126)\r\n    #5 void std::__1::vector<std::__1::thread, std::__1::allocator<std::__1::thread>>::__emplace_back_slow_path<void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&>(void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-16/bin/../include/c++/v1/vector:1582:5 (bitcoind+0x635126)\r\n    #6 std::__1::thread& std::__1::vector<std::__1::thread, std::__1::allocator<std::__1::thread>>::emplace_back<void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&>(void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-16/bin/../include/c++/v1/vector:1603:9 (bitcoind+0x62b2f4) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #7 StartHTTPServer() src/httpserver.cpp:443:31 (bitcoind+0x62b2f4)\r\n    #8 AppInitServers(node::NodeContext&) src/init.cpp:693:5 (bitcoind+0x19138b) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #9 AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) src/init.cpp:1173:14 (bitcoind+0x18697a) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #10 AppInit(node::NodeContext&) src/bitcoind.cpp:228:43 (bitcoind+0x16b0ce) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #11 main src/bitcoind.cpp:274:10 (bitcoind+0x16b0ce)\r\n\r\nSUMMARY: ThreadSanitizer: data race src/./util/tokenpipe.h:53:28 in TokenPipeEnd::IsOpen()\r\n==================\r\n==================\r\nWARNING: ThreadSanitizer: data race (pid=102057)\r\n  Read of size 8 at 0x7bb000000320 by thread T10:\r\n    #0 write <null> (bitcoind+0xef7cf) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #1 TokenPipeEnd::TokenWrite(unsigned char) src/util/tokenpipe.cpp:43:26 (bitcoind+0xad3846) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #2 util::SignalInterrupt::operator()() src/util/signalinterrupt.cpp:58:28 (bitcoind+0xab5d26) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #3 stop()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const src/rpc/server.cpp:184:10 (bitcoind+0x4ddc70) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #4 decltype(std::declval<stop()::$_0&>()(std::declval<RPCHelpMan const&>(), std::declval<JSONRPCRequest const&>())) std::__1::__invoke[abi:v160000]<stop()::$_0&, RPCHelpMan const&, JSONRPCRequest const&>(stop()::$_0&, RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/invoke.h:394:23 (bitcoind+0x4ddc70)\r\n    #5 UniValue std::__1::__invoke_void_return_wrapper<UniValue, false>::__call<stop()::$_0&, RPCHelpMan const&, JSONRPCRequest const&>(stop()::$_0&, RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/invoke.h:478:16 (bitcoind+0x4ddc70)\r\n    #6 std::__1::__function::__alloc_func<stop()::$_0, std::__1::allocator<stop()::$_0>, UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()[abi:v160000](RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:185:16 (bitcoind+0x4ddc70)\r\n    #7 std::__1::__function::__func<stop()::$_0, std::__1::allocator<stop()::$_0>, UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()(RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:356:12 (bitcoind+0x4ddc70)\r\n    #8 std::__1::__function::__value_func<UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()[abi:v160000](RPCHelpMan const&, JSONRPCRequest const&) const /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:510:16 (bitcoind+0x9ce48f) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #9 std::__1::function<UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()(RPCHelpMan const&, JSONRPCRequest const&) const /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:1156:12 (bitcoind+0x9ce48f)\r\n    #10 RPCHelpMan::HandleRequest(JSONRPCRequest const&) const src/rpc/util.cpp:612:20 (bitcoind+0x9ce48f)\r\n    #11 CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)::operator()(JSONRPCRequest const&, UniValue&, bool) const src/./rpc/server.h:109:91 (bitcoind+0x3aad0d) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #12 decltype(std::declval<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&>()(std::declval<JSONRPCRequest const&>(), std::declval<UniValue&>(), std::declval<bool>())) std::__1::__invoke[abi:v160000]<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/invoke.h:394:23 (bitcoind+0x3aabbb) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #13 bool std::__1::__invoke_void_return_wrapper<bool, false>::__call<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/invoke.h:478:16 (bitcoind+0x3aabbb)\r\n    #14 std::__1::__function::__alloc_func<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:v160000](JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:185:16 (bitcoind+0x3aabbb)\r\n    #15 std::__1::__function::__func<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:356:12 (bitcoind+0x3aabbb)\r\n    #16 std::__1::__function::__value_func<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:v160000](JSONRPCRequest const&, UniValue&, bool&&) const /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:510:16 (bitcoind+0x4d91e1) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #17 std::__1::function<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool) const /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:1156:12 (bitcoind+0x4d91e1)\r\n    #18 ExecuteCommand(CRPCCommand const&, JSONRPCRequest const&, UniValue&, bool) src/rpc/server.cpp:541:20 (bitcoind+0x4d91e1)\r\n    #19 ExecuteCommands(std::__1::vector<CRPCCommand const*, std::__1::allocator<CRPCCommand const*>> const&, JSONRPCRequest const&, UniValue&) src/rpc/server.cpp:506:13 (bitcoind+0x4d91e1)\r\n    #20 CRPCTable::execute(JSONRPCRequest const&) const src/rpc/server.cpp:526:13 (bitcoind+0x4d8dd2) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #21 HTTPReq_JSONRPC(std::__1::any const&, HTTPRequest*) src/httprpc.cpp:202:40 (bitcoind+0x6210f4) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #22 StartHTTPRPC(std::__1::any const&)::$_0::operator()(HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) const src/httprpc.cpp:301:80 (bitcoind+0x6210f4)\r\n    #23 decltype(std::declval<StartHTTPRPC(std::__1::any const&)::$_0&>()(std::declval<HTTPRequest*>(), std::declval<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>())) std::__1::__invoke[abi:v160000]<StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>(StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/invoke.h:394:23 (bitcoind+0x6210f4)\r\n    #24 bool std::__1::__invoke_void_return_wrapper<bool, false>::__call<StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>(StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/invoke.h:478:16 (bitcoind+0x6210f4)\r\n    #25 std::__1::__function::__alloc_func<StartHTTPRPC(std::__1::any const&)::$_0, std::__1::allocator<StartHTTPRPC(std::__1::any const&)::$_0>, bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()[abi:v160000](HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:185:16 (bitcoind+0x6210f4)\r\n    #26 std::__1::__function::__func<StartHTTPRPC(std::__1::any const&)::$_0, std::__1::allocator<StartHTTPRPC(std::__1::any const&)::$_0>, bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()(HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:356:12 (bitcoind+0x6210f4)\r\n    #27 std::__1::__function::__value_func<bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()[abi:v160000](HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) const /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:510:16 (bitcoind+0x632d80) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #28 std::__1::function<bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()(HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) const /usr/lib/llvm-16/bin/../include/c++/v1/__functional/function.h:1156:12 (bitcoind+0x632d80)\r\n    #29 HTTPWorkItem::operator()() src/httpserver.cpp:59:9 (bitcoind+0x632d80)\r\n    #30 WorkQueue<HTTPClosure>::Run() src/httpserver.cpp:114:13 (bitcoind+0x634b37) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #31 HTTPWorkQueueRun(WorkQueue<HTTPClosure>*, int) src/httpserver.cpp:353:12 (bitcoind+0x62b7ea) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #32 decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:v160000]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(void (*&&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&&) /usr/lib/llvm-16/bin/../include/c++/v1/__functional/invoke.h:394:23 (bitcoind+0x6354f7) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #33 void std::__1::__thread_execute[abi:v160000]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>&, std::__1::__tuple_indices<2ul, 3ul>) /usr/lib/llvm-16/bin/../include/c++/v1/thread:282:5 (bitcoind+0x6354f7)\r\n    #34 void* std::__1::__thread_proxy[abi:v160000]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(void*) /usr/lib/llvm-16/bin/../include/c++/v1/thread:293:5 (bitcoind+0x6354f7)\r\n\r\n  Previous write of size 8 at 0x7bb000000320 by main thread:\r\n    #0 pipe2 <null> (bitcoind+0xe7fcd) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #1 TokenPipe::Make() src/util/tokenpipe.cpp:88:9 (bitcoind+0xad39d6) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #2 util::SignalInterrupt::open() src/util/signalinterrupt.cpp:22:41 (bitcoind+0xab5a08) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #3 util::SignalInterrupt::wait() src/util/signalinterrupt.cpp:69:10 (bitcoind+0xab5c6b) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #4 main src/bitcoind.cpp:274:51 (bitcoind+0x16b99d) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n\r\n  Location is file descriptor 25 created by main thread at:\r\n    #0 pipe2 <null> (bitcoind+0xe7fcd) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #1 TokenPipe::Make() src/util/tokenpipe.cpp:88:9 (bitcoind+0xad39d6) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #2 util::SignalInterrupt::open() src/util/signalinterrupt.cpp:22:41 (bitcoind+0xab5a08) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #3 util::SignalInterrupt::wait() src/util/signalinterrupt.cpp:69:10 (bitcoind+0xab5c6b) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #4 main src/bitcoind.cpp:274:51 (bitcoind+0x16b99d) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n\r\n  Thread T10 'b-httpworker.0' (tid=102068, running) created by main thread at:\r\n    #0 pthread_create <null> (bitcoind+0xe1beb) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #1 std::__1::__libcpp_thread_create[abi:v160000](unsigned long*, void* (*)(void*), void*) /usr/lib/llvm-16/bin/../include/c++/v1/__threading_support:378:10 (bitcoind+0x6353ab) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #2 std::__1::thread::thread<void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&, void>(void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-16/bin/../include/c++/v1/thread:309:16 (bitcoind+0x6353ab)\r\n    #3 void std::__1::allocator<std::__1::thread>::construct[abi:v160000]<std::__1::thread, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&>(std::__1::thread*, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-16/bin/../include/c++/v1/__memory/allocator.h:168:28 (bitcoind+0x635126) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #4 void std::__1::allocator_traits<std::__1::allocator<std::__1::thread>>::construct[abi:v160000]<std::__1::thread, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&, void>(std::__1::allocator<std::__1::thread>&, std::__1::thread*, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-16/bin/../include/c++/v1/__memory/allocator_traits.h:296:13 (bitcoind+0x635126)\r\n    #5 void std::__1::vector<std::__1::thread, std::__1::allocator<std::__1::thread>>::__emplace_back_slow_path<void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&>(void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-16/bin/../include/c++/v1/vector:1582:5 (bitcoind+0x635126)\r\n    #6 std::__1::thread& std::__1::vector<std::__1::thread, std::__1::allocator<std::__1::thread>>::emplace_back<void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&>(void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-16/bin/../include/c++/v1/vector:1603:9 (bitcoind+0x62b2f4) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #7 StartHTTPServer() src/httpserver.cpp:443:31 (bitcoind+0x62b2f4)\r\n    #8 AppInitServers(node::NodeContext&) src/init.cpp:693:5 (bitcoind+0x19138b) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #9 AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) src/init.cpp:1173:14 (bitcoind+0x18697a) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #10 AppInit(node::NodeContext&) src/bitcoind.cpp:228:43 (bitcoind+0x16b0ce) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa)\r\n    #11 main src/bitcoind.cpp:274:10 (bitcoind+0x16b0ce)\r\n\r\nSUMMARY: ThreadSanitizer: data race (/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/bitcoind+0xef7cf) (BuildId: 33b1022354bfa28e1e3d045e0355f280a1c0eeaa) in write\r\n==================\r\n2023-08-23T16:08:28Z tor: Thread interrupt\r\n2023-08-23T16:08:28Z torcontrol thread exit\r\n2023-08-23T16:08:28Z addcon thread exit\r\n2023-08-23T16:08:28Z opencon thread exit\r\n2023-08-23T16:08:28Z Shutdown: In progress...\r\n2023-08-23T16:08:28Z net thread exit\r\n2023-08-23T16:08:28Z msghand thread exit\r\n2023-08-23T16:08:28Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\r\n2023-08-23T16:08:28Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.00s)\r\n2023-08-23T16:08:28Z scheduler thread exit\r\n2023-08-23T16:08:28Z Writing 0 unbroadcast transactions to disk.\r\n2023-08-23T16:08:28Z Dumped mempool: 3.8938e-05s to copy, 0.00434593s to dump\r\n2023-08-23T16:08:28Z Flushed fee estimates to fee_estimates.dat.\r\n2023-08-23T16:08:28Z Shutdown: done\r\nThreadSanitizer: reported 2 warnings\r\nroot@7b5296fd879e:/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu# src/bitcoind -regtest\r\n```\r\n",
      "created_at" : "2023-08-23T16:20:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1690257829",
      "id" : 1690257829,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585kv0ml",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1690257829/reactions"
      },
      "updated_at" : "2023-08-23T16:20:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1690257829",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated c1ff72ae3c72bba1ed0e5c70364b7832ae6059ef -> 7bfe4a42de7822695da2fb0838a31d0d0d1ffa6d ([`pr/noshut.6`](https://github.com/ryanofsky/bitcoin/commits/pr/noshut.6) -> [`pr/noshut.7`](https://github.com/ryanofsky/bitcoin/commits/pr/noshut.7), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/noshut.6..pr/noshut.7)) to fix tsan warnings",
      "created_at" : "2023-08-23T17:09:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1690330644",
      "id" : 1690330644,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585kwGYU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1690330644/reactions"
      },
      "updated_at" : "2023-08-23T17:09:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1690330644",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304008075"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304008075"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm still not sure if this is safe. The passed in node's shutdown is still a nullptr at this point, because `app.baseInitialize()` has not been called yet, which would in turn call the required initialization functions. I'll have to requisition a windows machine to test this out though.",
      "commit_id" : "c7bbca13da3c569358632fa7cc2d2040aa86a06b",
      "created_at" : "2023-08-24T08:45:51Z",
      "diff_hunk" : "@@ -630,7 +630,7 @@ int GuiMain(int argc, char* argv[])\n     app.installEventFilter(new GUIUtil::LabelOutOfFocusEventFilter(&app));\n #if defined(Q_OS_WIN)\n     // Install global event filter for processing Windows session related Windows messages (WM_QUERYENDSESSION and WM_ENDSESSION)\n-    qApp->installNativeEventFilter(new WinShutdownMonitor());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304008075",
      "id" : 1304008075,
      "line" : 633,
      "node_id" : "PRRC_kwDOABII585NuZWL",
      "original_commit_id" : "c7bbca13da3c569358632fa7cc2d2040aa86a06b",
      "original_line" : 633,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/qt/bitcoin.cpp",
      "position" : 4,
      "pull_request_review_id" : 1593092999,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304008075/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-24T08:45:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304008075",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304430827"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304430827"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304008075\r\n\r\n> I'm still not sure if this is safe.\r\n\r\nGood catch, It's not safe. The initialization order was fixed by the rewrite https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1686998476 but then got broken again by the tsan update: https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1690330644. Should be fixed again now.\r\n",
      "commit_id" : "dcadcfcc81078465aedcaf480668efca81c5bbcc",
      "created_at" : "2023-08-24T14:31:34Z",
      "diff_hunk" : "@@ -630,7 +630,7 @@ int GuiMain(int argc, char* argv[])\n     app.installEventFilter(new GUIUtil::LabelOutOfFocusEventFilter(&app));\n #if defined(Q_OS_WIN)\n     // Install global event filter for processing Windows session related Windows messages (WM_QUERYENDSESSION and WM_ENDSESSION)\n-    qApp->installNativeEventFilter(new WinShutdownMonitor());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304430827",
      "id" : 1304430827,
      "in_reply_to_id" : 1304008075,
      "line" : 633,
      "node_id" : "PRRC_kwDOABII585NwAjr",
      "original_commit_id" : "c7bbca13da3c569358632fa7cc2d2040aa86a06b",
      "original_line" : 633,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/qt/bitcoin.cpp",
      "position" : 4,
      "pull_request_review_id" : 1593761135,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304430827/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-24T14:36:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304430827",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304496033"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304496033"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "If an exception is thrown during construction here,  the program will core dump. How about adding a try-catch block in the various `MakeNodeInit` that populates the correct `exit_status` and returns a `nullptr`?",
      "commit_id" : "dcadcfcc81078465aedcaf480668efca81c5bbcc",
      "created_at" : "2023-08-24T15:19:22Z",
      "diff_hunk" : "@@ -175,6 +174,17 @@ static fs::path GetPidFile(const ArgsManager& args)\n     }\n }\n \n+static std::optional<util::SignalInterrupt> g_shutdown;\n+\n+void InitContext(NodeContext& node)\n+{\n+    assert(!g_shutdown);\n+    g_shutdown.emplace();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304496033",
      "id" : 1304496033,
      "line" : 182,
      "node_id" : "PRRC_kwDOABII585NwQeh",
      "original_commit_id" : "1fb571973dc5da8d79fafa23e3484541fb12bbf9",
      "original_line" : 182,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 17,
      "pull_request_review_id" : 1593866804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304496033/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-24T15:19:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304496033",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304554122"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304554122"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304496033\r\n\r\n> If an exception is thrown during construction here, the program will core dump. How about adding a try-catch block in the various `MakeNodeInit` that populates the correct `exit_status` and returns a `nullptr`?\r\n\r\nThis is not a good place to handle exceptions, because this function is intended to be called by `interfaces::Init` constructors, and in constructors exceptions are a more natural error handling mechanism than return codes. The best thing to do here is let any exception bubble up, and the best place to catch exceptions would be around the `interfaces::MakeNodeInit` and `interfaces::MakeGuiInit` functions (which can already throw `bad_alloc`) which call this.\r\n\r\nExceptions are not currently caught around the `interfaces::MakeNodeInit` and `interfaces::MakeGuiInit` calls and I do not think it would make sense to change that now. These calls are the very first calls that get made in the `bitcoind` and `bitcoin-qt` `main()` functions before anything else happens: before any threads are created, before any libraries are initialized, even before any command line arguments are parsed. So it should be impossible for these functions to fail unless the operating environment is unusable, and if they do fail there is no cleanup or logging that could be done, and it would be doubtful if even printing would work. So there would only by drawbacks trying to intercept the failure there as well. \r\n\r\nBasically this is a long way of saying if core dumps are enabled by the OS, it would be safe and appropriate to core dump here.",
      "commit_id" : "dcadcfcc81078465aedcaf480668efca81c5bbcc",
      "created_at" : "2023-08-24T15:56:29Z",
      "diff_hunk" : "@@ -175,6 +174,17 @@ static fs::path GetPidFile(const ArgsManager& args)\n     }\n }\n \n+static std::optional<util::SignalInterrupt> g_shutdown;\n+\n+void InitContext(NodeContext& node)\n+{\n+    assert(!g_shutdown);\n+    g_shutdown.emplace();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304554122",
      "id" : 1304554122,
      "in_reply_to_id" : 1304496033,
      "line" : 182,
      "node_id" : "PRRC_kwDOABII585NweqK",
      "original_commit_id" : "1fb571973dc5da8d79fafa23e3484541fb12bbf9",
      "original_line" : 182,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 17,
      "pull_request_review_id" : 1593957521,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304554122/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-24T15:56:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304554122",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304822985"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304822985"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This must have snuck in during one of the revisions.",
      "commit_id" : "dcadcfcc81078465aedcaf480668efca81c5bbcc",
      "created_at" : "2023-08-24T20:17:49Z",
      "diff_hunk" : "@@ -10,6 +10,7 @@\n #include <flatfile.h>\n #include <hash.h>\n #include <kernel/chainparams.h>\n+#include <kernel/context.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304822985",
      "id" : 1304822985,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585NxgTJ",
      "original_commit_id" : "1fb571973dc5da8d79fafa23e3484541fb12bbf9",
      "original_line" : 13,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1594392313,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304822985/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-24T20:51:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304822985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304824364"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304824364"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "MIght this be a regression in case of the `chainman` reference being eventually removed from the `chainstate`?",
      "commit_id" : "dcadcfcc81078465aedcaf480668efca81c5bbcc",
      "created_at" : "2023-08-24T20:19:13Z",
      "diff_hunk" : "@@ -55,14 +56,14 @@ static ChainstateLoadResult CompleteChainstateInitialization(\n         }\n     }\n \n-    if (options.check_interrupt && options.check_interrupt()) return {ChainstateLoadStatus::INTERRUPTED, {}};\n+    if (chainman.m_interrupt) return {ChainstateLoadStatus::INTERRUPTED, {}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304824364",
      "id" : 1304824364,
      "line" : 59,
      "node_id" : "PRRC_kwDOABII585Nxgos",
      "original_commit_id" : "1fb571973dc5da8d79fafa23e3484541fb12bbf9",
      "original_line" : 59,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : 13,
      "pull_request_review_id" : 1594392313,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304824364/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-24T20:51:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304824364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304835728"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304835728"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This also seems to come from a previous revision.",
      "commit_id" : "dcadcfcc81078465aedcaf480668efca81c5bbcc",
      "created_at" : "2023-08-24T20:32:28Z",
      "diff_hunk" : "@@ -21,6 +21,7 @@\n #include <flatfile.h>\n #include <hash.h>\n #include <kernel/chainparams.h>\n+#include <kernel/context.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304835728",
      "id" : 1304835728,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585NxjaQ",
      "original_commit_id" : "1fb571973dc5da8d79fafa23e3484541fb12bbf9",
      "original_line" : 24,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 1594392313,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304835728/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-24T20:51:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304835728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304928979"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304928979"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304822985\r\n\r\n> This must have snuck in during one of the revisions.\r\n\r\nThanks, reverted",
      "commit_id" : "dcadcfcc81078465aedcaf480668efca81c5bbcc",
      "created_at" : "2023-08-24T22:20:17Z",
      "diff_hunk" : "@@ -10,6 +10,7 @@\n #include <flatfile.h>\n #include <hash.h>\n #include <kernel/chainparams.h>\n+#include <kernel/context.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304928979",
      "id" : 1304928979,
      "in_reply_to_id" : 1304822985,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Nx6LT",
      "original_commit_id" : "1fb571973dc5da8d79fafa23e3484541fb12bbf9",
      "original_line" : 13,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1594548297,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304928979/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-24T22:32:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304928979",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304931624"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304931624"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304824364\r\n\r\n> MIght this be a regression in case of the `chainman` reference being eventually removed from the `chainstate`?\r\n\r\nIs this referencing https://github.com/bitcoin/bitcoin/pull/28218#discussion_r1291351347? If so, I don't think I understand the connection because there isn't a Chainstate object here.",
      "commit_id" : "dcadcfcc81078465aedcaf480668efca81c5bbcc",
      "created_at" : "2023-08-24T22:23:49Z",
      "diff_hunk" : "@@ -55,14 +56,14 @@ static ChainstateLoadResult CompleteChainstateInitialization(\n         }\n     }\n \n-    if (options.check_interrupt && options.check_interrupt()) return {ChainstateLoadStatus::INTERRUPTED, {}};\n+    if (chainman.m_interrupt) return {ChainstateLoadStatus::INTERRUPTED, {}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304931624",
      "id" : 1304931624,
      "in_reply_to_id" : 1304824364,
      "line" : 59,
      "node_id" : "PRRC_kwDOABII585Nx60o",
      "original_commit_id" : "1fb571973dc5da8d79fafa23e3484541fb12bbf9",
      "original_line" : 59,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : 13,
      "pull_request_review_id" : 1594548297,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304931624/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-24T22:32:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304931624",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304931900"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304931900"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304835728\r\n\r\n> This also seems to come from a previous revision.\r\n\r\nThanks, reverted",
      "commit_id" : "dcadcfcc81078465aedcaf480668efca81c5bbcc",
      "created_at" : "2023-08-24T22:24:24Z",
      "diff_hunk" : "@@ -21,6 +21,7 @@\n #include <flatfile.h>\n #include <hash.h>\n #include <kernel/chainparams.h>\n+#include <kernel/context.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1304931900",
      "id" : 1304931900,
      "in_reply_to_id" : 1304835728,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Nx648",
      "original_commit_id" : "1fb571973dc5da8d79fafa23e3484541fb12bbf9",
      "original_line" : 24,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 1594548297,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304931900/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-24T22:32:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1304931900",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1305157205"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305157205"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah, right. I don't think this applies here either now. Please resolve.",
      "commit_id" : "dcadcfcc81078465aedcaf480668efca81c5bbcc",
      "created_at" : "2023-08-25T05:29:55Z",
      "diff_hunk" : "@@ -55,14 +56,14 @@ static ChainstateLoadResult CompleteChainstateInitialization(\n         }\n     }\n \n-    if (options.check_interrupt && options.check_interrupt()) return {ChainstateLoadStatus::INTERRUPTED, {}};\n+    if (chainman.m_interrupt) return {ChainstateLoadStatus::INTERRUPTED, {}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1305157205",
      "id" : 1305157205,
      "in_reply_to_id" : 1304824364,
      "line" : 59,
      "node_id" : "PRRC_kwDOABII585Nyx5V",
      "original_commit_id" : "1fb571973dc5da8d79fafa23e3484541fb12bbf9",
      "original_line" : 59,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : 13,
      "pull_request_review_id" : 1594885118,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305157205/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-25T05:29:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1305157205",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-09-05T11:40:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1706456692",
      "id" : 1706456692,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585ltnZ0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1706456692/reactions"
      },
      "updated_at" : "2023-09-05T11:40:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1706456692",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Split this into commits so it is easier to review, also rebased due to conflict\r\n\r\nRebased dcadcfcc81078465aedcaf480668efca81c5bbcc -> 860911a72a771bce72cdee88726b37bd37495c49 ([`pr/noshut.11`](https://github.com/ryanofsky/bitcoin/commits/pr/noshut.11) -> [`pr/noshut.12`](https://github.com/ryanofsky/bitcoin/commits/pr/noshut.12), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/noshut.11-rebase..pr/noshut.12)) due to conflict with #28195\r\n",
      "created_at" : "2023-09-07T18:21:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1710592505",
      "id" : 1710592505,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585l9ZH5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1710592505/reactions"
      },
      "updated_at" : "2023-09-07T18:21:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1710592505",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re-ACK 860911a72a771bce72cdee88726b37bd37495c49\r\n\r\nOnly net change is the split into separate commits.",
      "created_at" : "2023-09-07T19:11:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1710646580",
      "id" : 1710646580,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585l9mU0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1710646580/reactions"
      },
      "updated_at" : "2023-09-07T19:11:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1710646580",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 860911a72a771bce72cdee88726b37bd37495c49 -> b34e064c2c4ec343dac63ca3b985155ca00ed535 ([`pr/noshut.12`](https://github.com/ryanofsky/bitcoin/commits/pr/noshut.12) -> [`pr/noshut.13`](https://github.com/ryanofsky/bitcoin/commits/pr/noshut.13), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/noshut.12..pr/noshut.13)) fixing bug in intermediate commit (no change overall)\r\n",
      "created_at" : "2023-09-11T14:45:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1714038472",
      "id" : 1714038472,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585mKibI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1714038472/reactions"
      },
      "updated_at" : "2023-09-11T14:45:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1714038472",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1331635202"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331635202"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1257286292\r\n\r\n> I think we might have introduced a bug here before. This may be possible to trigger when running the GUI before the kernel context is initialized with `app.baseInitialize()`. We could just move it to after `baseInitialize` (see my [patch here](https://github.com/TheCharlatan/bitcoin/commit/2df7a669a07be01ef2cce0d22891617bc19060d7)), but I am not sure if that would be correct either. Maybe `app.baseInitialize()` can be moved up a bit instead?\r\n\r\nThis bug was resolved by moving the signalinterrupt object from the kernel context to the node context and initializing it earlier. Also by abstracting this code and having it call interfaces::Node::startShutdown()\r\n",
      "commit_id" : "b34e064c2c4ec343dac63ca3b985155ca00ed535",
      "created_at" : "2023-09-20T13:28:38Z",
      "diff_hunk" : "@@ -25,7 +27,7 @@ bool WinShutdownMonitor::nativeEventFilter(const QByteArray &eventType, void *pM\n            {\n                // Initiate a client shutdown after receiving a WM_QUERYENDSESSION and block\n                // Windows session end until we have finished client shutdown.\n-               StartShutdown();\n+               Assert(kernel::g_context)->interrupt();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1331635202",
      "id" : 1331635202,
      "in_reply_to_id" : 1257286292,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585PXyQC",
      "original_commit_id" : "d9453bddd6ce5446552e844f4d5b65368d831656",
      "original_line" : 30,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/qt/winshutdownmonitor.cpp",
      "position" : null,
      "pull_request_review_id" : 1635646506,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331635202/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-20T13:34:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331635202",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1331635415"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331635415"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1257291194\r\n\r\n> I was looking at the initialization order here and noticed that I might have introduced more unsafe behavior here in [e2d680a](https://github.com/bitcoin/bitcoin/commit/e2d680a32d757de0ef8eb836047a0daa1d82e3c4). These handlers are registered in `AppInitBasicSetup`. But if you look in bitcoind.cpp, the kernel context is created after `AppInitBasicSetup` is called.\r\n\r\nYes this is now fixed by having ctrl-c and signal handler use a g_shutdown global instead of using the kernel context.\r\n",
      "commit_id" : "b34e064c2c4ec343dac63ca3b985155ca00ed535",
      "created_at" : "2023-09-20T13:28:47Z",
      "diff_hunk" : "@@ -376,7 +374,7 @@ static void HandleSIGHUP(int)\n #else\n static BOOL WINAPI consoleCtrlHandler(DWORD dwCtrlType)\n {\n-    StartShutdown();\n+    Assert(kernel::g_context)->interrupt();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1331635415",
      "id" : 1331635415,
      "in_reply_to_id" : 1257291194,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585PXyTX",
      "original_commit_id" : "d9453bddd6ce5446552e844f4d5b65368d831656",
      "original_line" : 376,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1635646506,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331635415/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-20T13:34:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331635415",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased b34e064c2c4ec343dac63ca3b985155ca00ed535 -> 19e9781364891c45941007c086211d5659334b39 ([`pr/noshut.13`](https://github.com/ryanofsky/bitcoin/commits/pr/noshut.13) -> [`pr/noshut.14`](https://github.com/ryanofsky/bitcoin/commits/pr/noshut.14), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/noshut.13-rebase..pr/noshut.14)) to fix silent conflict with #27850: https://cirrus-ci.com/task/5572474910277632?logs=ci#L2460\r\nRebased 19e9781364891c45941007c086211d5659334b39 -> dde5736c10d663958f4b6fba3ed7214a2b806ffa ([`pr/noshut.14`](https://github.com/ryanofsky/bitcoin/commits/pr/noshut.14) -> [`pr/noshut.15`](https://github.com/ryanofsky/bitcoin/commits/pr/noshut.15), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/noshut.14-rebase..pr/noshut.15)) due to minor conflict with #28551",
      "created_at" : "2023-09-20T23:15:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1728542559",
      "id" : 1728542559,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585nB3df",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1728542559/reactions"
      },
      "updated_at" : "2023-10-04T19:24:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1728542559",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase if still relevant",
      "created_at" : "2023-10-16T16:11:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1764820884",
      "id" : 1764820884,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585pMQeU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1764820884/reactions"
      },
      "updated_at" : "2023-10-16T16:11:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1764820884",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased dde5736c10d663958f4b6fba3ed7214a2b806ffa -> d7477b1c9cde1e795e006d1788c79b8985970eee ([`pr/noshut.15`](https://github.com/ryanofsky/bitcoin/commits/pr/noshut.15) -> [`pr/noshut.16`](https://github.com/ryanofsky/bitcoin/commits/pr/noshut.16), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/noshut.15-rebase..pr/noshut.16)) due to silent conflict with #26331",
      "created_at" : "2023-10-18T18:27:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1769100622",
      "id" : 1769100622,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585pclVO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1769100622/reactions"
      },
      "updated_at" : "2023-10-18T18:27:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1769100622",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1364373784"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1364373784"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "NIt: s/namespaces/namespace/",
      "commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "created_at" : "2023-10-18T18:58:22Z",
      "diff_hunk" : "@@ -13,14 +13,22 @@\n \n #include <QAbstractNativeEventFilter>\n \n+namespace interfaces {\n+class Node;\n+} // namespaces interfaces",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1364373784",
      "id" : 1364373784,
      "line" : 18,
      "node_id" : "PRRC_kwDOABII585RUrEY",
      "original_commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "original_line" : 18,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/qt/winshutdownmonitor.h",
      "position" : 6,
      "pull_request_review_id" : 1685879169,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1364373784/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-18T20:34:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1364373784",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1377678893"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377678893"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "note for other reviewers (and future self): `NodeImpl::startShutDown()` does have [this additional code block](https://github.com/bitcoin/bitcoin/blob/d51fb9caa622add96c6b594e162da5584eb927fc/src/node/interfaces.cpp#L124-L128), but the `InterruptRPC()` and `StopRPC()` calls are executed only once regardless and I think the ordering remains the same too, so I don't see (but am not at all familiar with the GUI code) how this could cause issues",
      "commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "created_at" : "2023-10-31T14:26:46Z",
      "diff_hunk" : "@@ -25,7 +25,7 @@ bool WinShutdownMonitor::nativeEventFilter(const QByteArray &eventType, void *pM\n            {\n                // Initiate a client shutdown after receiving a WM_QUERYENDSESSION and block\n                // Windows session end until we have finished client shutdown.\n-               StartShutdown();\n+               m_node.startShutdown();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1377678893",
      "id" : 1377678893,
      "line" : 28,
      "node_id" : "PRRC_kwDOABII585SHbYt",
      "original_commit_id" : "dc7be790fa3eb64add6edf5a0feac253921b42f6",
      "original_line" : 28,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/qt/winshutdownmonitor.cpp",
      "position" : 14,
      "pull_request_review_id" : 1706454012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377678893/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-01T22:10:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377678893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1377685958"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377685958"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This seems a bit brittle and probably better handled by having `LoadBlockIndex()` return e.g. a `util::Result` (especially after https://github.com/bitcoin/bitcoin/pull/25665), but orthogonal to this refactor so I think it's best to leave as is here.",
      "commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "created_at" : "2023-10-31T14:31:27Z",
      "diff_hunk" : "@@ -55,14 +56,14 @@ static ChainstateLoadResult CompleteChainstateInitialization(\n         }\n     }\n \n-    if (options.check_interrupt && options.check_interrupt()) return {ChainstateLoadStatus::INTERRUPTED, {}};\n+    if (chainman.m_interrupt) return {ChainstateLoadStatus::INTERRUPTED, {}};\n \n     // LoadBlockIndex will load m_have_pruned if we've ever removed a\n     // block file from disk.\n     // Note that it also sets fReindex global based on the disk flag!\n     // From here on, fReindex and options.reindex values may be different!\n     if (!chainman.LoadBlockIndex()) {\n-        if (options.check_interrupt && options.check_interrupt()) return {ChainstateLoadStatus::INTERRUPTED, {}};\n+        if (chainman.m_interrupt) return {ChainstateLoadStatus::INTERRUPTED, {}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1377685958",
      "id" : 1377685958,
      "line" : 66,
      "node_id" : "PRRC_kwDOABII585SHdHG",
      "original_commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "original_line" : 66,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : 21,
      "pull_request_review_id" : 1706454012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377685958/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-01T22:10:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377685958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1377746899"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377746899"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: missing `#include <util/check.h>`",
      "commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "created_at" : "2023-10-31T15:08:45Z",
      "diff_hunk" : "@@ -168,7 +168,7 @@ ChainTestingSetup::ChainTestingSetup(const ChainType chainType, const std::vecto\n \n     m_cache_sizes = CalculateCacheSizes(m_args);\n \n-    m_node.notifications = std::make_unique<KernelNotifications>(m_node.exit_status);\n+    m_node.notifications = std::make_unique<KernelNotifications>(*Assert(m_node.shutdown), m_node.exit_status);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1377746899",
      "id" : 1377746899,
      "line" : 171,
      "node_id" : "PRRC_kwDOABII585SHr_T",
      "original_commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "original_line" : 171,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.cpp",
      "position" : 21,
      "pull_request_review_id" : 1706454012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377746899/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-01T22:10:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377746899",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1377777492"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377777492"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: long line",
      "commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "created_at" : "2023-10-31T15:28:20Z",
      "diff_hunk" : "@@ -580,7 +580,7 @@ void HTTPEvent::trigger(struct timeval* tv)\n     else\n         evtimer_add(ev, tv); // trigger after timeval passed\n }\n-HTTPRequest::HTTPRequest(struct evhttp_request* _req, bool _replySent) : req(_req), replySent(_replySent)\n+HTTPRequest::HTTPRequest(struct evhttp_request* _req, const util::SignalInterrupt& interrupt, bool _replySent) : req(_req), m_interrupt(interrupt), replySent(_replySent)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1377777492",
      "id" : 1377777492,
      "line" : 583,
      "node_id" : "PRRC_kwDOABII585SHzdU",
      "original_commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "original_line" : 583,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/httpserver.cpp",
      "position" : 43,
      "pull_request_review_id" : 1706454012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377777492/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-01T22:10:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377777492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1379378726"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1379378726"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think we need to expose those internal error details. Also, I know we exclude `server.cpp` from the CHECK_NONFATAL linter, but given that this is an RPC method I think it would be preferable here?\r\n```suggestion\r\n    CHECK_NONFATAL((*CHECK_NONFATAL(EnsureAnyNodeContext(jsonRequest.context).shutdown))());\r\n```",
      "commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "created_at" : "2023-11-01T22:05:40Z",
      "diff_hunk" : "@@ -179,7 +181,9 @@ static RPCHelpMan stop()\n {\n     // Event loop will exit after current HTTP requests have been handled, so\n     // this reply will get back to the client.\n-    StartShutdown();\n+    if (!(*Assert(EnsureAnyNodeContext(jsonRequest.context).shutdown))()) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Failed to send shutdown signal\");\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1379378726",
      "id" : 1379378726,
      "line" : 186,
      "node_id" : "PRRC_kwDOABII585SN6Ym",
      "original_commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "original_line" : 186,
      "original_position" : 20,
      "original_start_line" : 184,
      "path" : "src/rpc/server.cpp",
      "position" : 20,
      "pull_request_review_id" : 1706454012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1379378726/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 184,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-11-01T22:10:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1379378726",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1387982522"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387982522"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1377777492\r\n\r\n> nit: long line\r\n\r\nThanks, added line break",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-11-09T13:12:18Z",
      "diff_hunk" : "@@ -580,7 +580,7 @@ void HTTPEvent::trigger(struct timeval* tv)\n     else\n         evtimer_add(ev, tv); // trigger after timeval passed\n }\n-HTTPRequest::HTTPRequest(struct evhttp_request* _req, bool _replySent) : req(_req), replySent(_replySent)\n+HTTPRequest::HTTPRequest(struct evhttp_request* _req, const util::SignalInterrupt& interrupt, bool _replySent) : req(_req), m_interrupt(interrupt), replySent(_replySent)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1387982522",
      "id" : 1387982522,
      "in_reply_to_id" : 1377777492,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Suu66",
      "original_commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "original_line" : 583,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/httpserver.cpp",
      "position" : null,
      "pull_request_review_id" : 1722504219,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387982522/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-09T13:50:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387982522",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1387982956"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387982956"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1377678893\r\n\r\n> note for other reviewers (and future self): `NodeImpl::startShutDown()` does have [this additional code block](https://github.com/bitcoin/bitcoin/blob/d51fb9caa622add96c6b594e162da5584eb927fc/src/node/interfaces.cpp#L124-L128)\r\n\r\nThere is a change in behavior here but the new behavior should be more correct. RPC calls should be interrupted whenever the GUI is shut down, regardless of how it is shut down. Calls to `StartShutdown` in GUI code were replaced with calls to `interfaces::Node::startShutdown` a long time ago, and I think this call was just missed because the replacement was done by searching for gui->node link symbol dependencies in a non-windows build, and this file is windows-only.",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-11-09T13:12:42Z",
      "diff_hunk" : "@@ -25,7 +25,7 @@ bool WinShutdownMonitor::nativeEventFilter(const QByteArray &eventType, void *pM\n            {\n                // Initiate a client shutdown after receiving a WM_QUERYENDSESSION and block\n                // Windows session end until we have finished client shutdown.\n-               StartShutdown();\n+               m_node.startShutdown();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1387982956",
      "id" : 1387982956,
      "in_reply_to_id" : 1377678893,
      "line" : 28,
      "node_id" : "PRRC_kwDOABII585SuvBs",
      "original_commit_id" : "dc7be790fa3eb64add6edf5a0feac253921b42f6",
      "original_line" : 28,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/qt/winshutdownmonitor.cpp",
      "position" : 14,
      "pull_request_review_id" : 1722504219,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387982956/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-09T13:50:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387982956",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1387983151"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387983151"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1364373784\r\n\r\n> NIt: s/namespaces/namespace/\r\n\r\nThanks, fixed",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-11-09T13:12:52Z",
      "diff_hunk" : "@@ -13,14 +13,22 @@\n \n #include <QAbstractNativeEventFilter>\n \n+namespace interfaces {\n+class Node;\n+} // namespaces interfaces",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1387983151",
      "id" : 1387983151,
      "in_reply_to_id" : 1364373784,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585SuvEv",
      "original_commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "original_line" : 18,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/qt/winshutdownmonitor.h",
      "position" : null,
      "pull_request_review_id" : 1722504219,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387983151/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-09T13:50:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387983151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1387983370"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387983370"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1379378726\r\n\r\n> I don't think we need to expose those internal error details. Also, I know we exclude `server.cpp` from the CHECK_NONFATAL linter, but given that this is an RPC method I think it would be preferable here?\r\n\r\nThanks, replaced JSONRPCError exception with nonfatal exception",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-11-09T13:13:04Z",
      "diff_hunk" : "@@ -179,7 +181,9 @@ static RPCHelpMan stop()\n {\n     // Event loop will exit after current HTTP requests have been handled, so\n     // this reply will get back to the client.\n-    StartShutdown();\n+    if (!(*Assert(EnsureAnyNodeContext(jsonRequest.context).shutdown))()) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Failed to send shutdown signal\");\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1387983370",
      "id" : 1387983370,
      "in_reply_to_id" : 1379378726,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585SuvIK",
      "original_commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "original_line" : 186,
      "original_position" : 20,
      "original_start_line" : 184,
      "path" : "src/rpc/server.cpp",
      "position" : null,
      "pull_request_review_id" : 1722504219,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387983370/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-11-09T13:50:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387983370",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1387983586"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387983586"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1377746899\r\n\r\n> nit: missing `#include <util/check.h>`\r\n\r\nThanks, fixed",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-11-09T13:13:18Z",
      "diff_hunk" : "@@ -168,7 +168,7 @@ ChainTestingSetup::ChainTestingSetup(const ChainType chainType, const std::vecto\n \n     m_cache_sizes = CalculateCacheSizes(m_args);\n \n-    m_node.notifications = std::make_unique<KernelNotifications>(m_node.exit_status);\n+    m_node.notifications = std::make_unique<KernelNotifications>(*Assert(m_node.shutdown), m_node.exit_status);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1387983586",
      "id" : 1387983586,
      "in_reply_to_id" : 1377746899,
      "line" : 182,
      "node_id" : "PRRC_kwDOABII585SuvLi",
      "original_commit_id" : "d7477b1c9cde1e795e006d1788c79b8985970eee",
      "original_line" : 182,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.cpp",
      "position" : 21,
      "pull_request_review_id" : 1722504219,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387983586/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-09T13:50:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1387983586",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388185765"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388185765"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I think this needs to be included in `validation.h` instead of here since `ChainstateManager::m_interrupt` is a `const util::SignalInterrupt&`",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-11-09T15:37:28Z",
      "diff_hunk" : "@@ -17,6 +17,7 @@\n #include <txdb.h>\n #include <uint256.h>\n #include <util/fs.h>\n+#include <util/signalinterrupt.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388185765",
      "id" : 1388185765,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII585Svgil",
      "original_commit_id" : "437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69",
      "original_line" : 20,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : 4,
      "pull_request_review_id" : 1722838313,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388185765/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-09T19:56:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388185765",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388253872"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388253872"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: would ~`interrupt`~ -> `shutdown` be more appropriate and consistent name?\r\n\r\n(same for `node::AbortNode()`)",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-11-09T16:27:08Z",
      "diff_hunk" : "@@ -5,16 +5,16 @@\n #include <test/util/index.h>\n \n #include <index/base.h>\n-#include <shutdown.h>\n #include <util/check.h>\n+#include <util/signalinterrupt.h>\n #include <util/time.h>\n \n-void IndexWaitSynced(const BaseIndex& index)\n+void IndexWaitSynced(const BaseIndex& index, const util::SignalInterrupt& interrupt)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388253872",
      "id" : 1388253872,
      "line" : 12,
      "node_id" : "PRRC_kwDOABII585SvxKw",
      "original_commit_id" : "437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69",
      "original_line" : 12,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/test/util/index.cpp",
      "position" : 10,
      "pull_request_review_id" : 1722838313,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388253872/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-09T19:56:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388253872",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388335574"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388335574"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: on Windows, I don't think the failure code path is ever reached, since `SignalInterrupt::operator()()` always returns true for `#ifdef WIN32`. But perhaps that would be overly relying on the implementation of `SignalInterrupt`.",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-11-09T17:24:48Z",
      "diff_hunk" : "@@ -378,7 +393,10 @@ static void HandleSIGHUP(int)\n #else\n static BOOL WINAPI consoleCtrlHandler(DWORD dwCtrlType)\n {\n-    StartShutdown();\n+    if (!(*Assert(g_shutdown))()) {\n+        LogPrintf(\"Error: failed to send shutdown signal on Ctrl-C\\n\");\n+        return false;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388335574",
      "id" : 1388335574,
      "line" : 412,
      "node_id" : "PRRC_kwDOABII585SwFHW",
      "original_commit_id" : "437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69",
      "original_line" : 412,
      "original_position" : 72,
      "original_start_line" : 396,
      "path" : "src/init.cpp",
      "position" : 71,
      "pull_request_review_id" : 1722838313,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388335574/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 409,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-11-09T19:56:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388335574",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388407695"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388407695"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This interface of dealing with shutdown failures feels a bit awkward to me. It's verbose and quite difficult to parse. These shutdown failures aren't really related to the callsite, and it looks like mostly we just log and then ignore them anyway. \r\n\r\nWhat do you think about adding failure callbacks to `SignalInterrupt`? It still allows the caller to individually handle shutdown failures when it makes sense (still returning bools), but in most cases the generic callback will probably suffice?\r\n\r\nhttps://github.com/bitcoin/bitcoin/compare/437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69...stickies-v:bitcoin:pr/28051-use-cbs\r\n\r\nI think the first commit can be used ~as is, the second would probably have to be split across multiple existing commits. I think this PR could be an appropriate place to implement it, but otherwise (if you think the approach makes sense) I'm also happy to open a follow-up pull.",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-11-09T18:14:47Z",
      "diff_hunk" : "@@ -1139,11 +1158,13 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     }, std::chrono::minutes{1});\n \n     // Check disk space every 5 minutes to avoid db corruption.\n-    node.scheduler->scheduleEvery([&args]{\n+    node.scheduler->scheduleEvery([&args, &node]{\n         constexpr uint64_t min_disk_space = 50 << 20; // 50 MB\n         if (!CheckDiskSpace(args.GetBlocksDirPath(), min_disk_space)) {\n             LogPrintf(\"Shutting down due to lack of disk space!\\n\");\n-            StartShutdown();\n+            if (!(*Assert(node.shutdown))()) {\n+                LogPrintf(\"Error: failed to send shutdown signal after disk space check\\n\");\n+            }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388407695",
      "id" : 1388407695,
      "line" : 1167,
      "node_id" : "PRRC_kwDOABII585SwWuP",
      "original_commit_id" : "437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69",
      "original_line" : 1167,
      "original_position" : 99,
      "original_start_line" : 1165,
      "path" : "src/init.cpp",
      "position" : 98,
      "pull_request_review_id" : 1722838313,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388407695/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1165,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-11-09T19:56:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388407695",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388706239"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388706239"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388335574\r\n\r\n> nit: on Windows, I don't think the failure code path is ever reached, since `SignalInterrupt::operator()()` always returns true for `#ifdef WIN32`. But perhaps that would be overly relying on the implementation of `SignalInterrupt`.\r\n\r\nYes, that is the reasoning. There is an interface for sending the signal that returns success or failure, and I want this code to just call the interface without making assumptions about how the signal is sent. The way the signal is sent could change in the future if #10102 progresses and code running in separate processes. If this log print is a problem I can replace it with an Assert. But I think just making the call and logging an error when the call fails is the most straightforward approach.",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-11-09T23:42:21Z",
      "diff_hunk" : "@@ -378,7 +393,10 @@ static void HandleSIGHUP(int)\n #else\n static BOOL WINAPI consoleCtrlHandler(DWORD dwCtrlType)\n {\n-    StartShutdown();\n+    if (!(*Assert(g_shutdown))()) {\n+        LogPrintf(\"Error: failed to send shutdown signal on Ctrl-C\\n\");\n+        return false;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388706239",
      "id" : 1388706239,
      "in_reply_to_id" : 1388335574,
      "line" : 412,
      "node_id" : "PRRC_kwDOABII585Sxfm_",
      "original_commit_id" : "437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69",
      "original_line" : 412,
      "original_position" : 72,
      "original_start_line" : 396,
      "path" : "src/init.cpp",
      "position" : 71,
      "pull_request_review_id" : 1723692798,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388706239/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 409,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-11-28T21:51:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388706239",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388718767"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388718767"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388407695\r\n\r\n> This interface of dealing with shutdown failures feels a bit awkward to me. It's verbose and quite difficult to parse. These shutdown failures aren't really related to the callsite, and it looks like mostly we just log and then ignore them anyway.\r\n\r\nThis is intentional. The problem is that we have low-level code scattered in the codebase that is able to send shutdown signals, and this is not a good design. Lower level code should just be returning errors and notifications, and high level code should be using that information to decide whether to shut down, not reacting to shutdowns that could be triggered anywhere. The fact that bad code sending shutdown signals is more verbose now does not seem a problem, since code like this shoudl be discouraged and cleaned up anyway. This PR takes a step in that direction by removing the global `StartShutdown` function and discouraging more code like this from being written in the future.\r\n\r\nAnother thing this PR is trying to do is add appropriate error handling when sending shutdown signals fails, instead of crashing or ignoring the failures. The right way to handle these errors depends on where the errors happen. If an error happens in the `stop` RPC, an error should be returned to the RPC caller. If the error happens in a windows ctrl-c handler, the handler should log the failure and return false. If the error happens in a unix signal handler, the only thing that can be done without triggering undefined behavior is to ignore it. The problem with the suggested `use-cbs` branch is that it doesn't treat different errors differently. I think also it complicates control flow without a good justification. It is true that `[[nodiscard]] bool` error handling is a little verbose, but it's also more straightforward than `std::function` callbacks. And the verbosity can go away if more code changed to send status information instead of shutdown signals, which is something that should happen anyway.",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-11-10T00:04:43Z",
      "diff_hunk" : "@@ -1139,11 +1158,13 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     }, std::chrono::minutes{1});\n \n     // Check disk space every 5 minutes to avoid db corruption.\n-    node.scheduler->scheduleEvery([&args]{\n+    node.scheduler->scheduleEvery([&args, &node]{\n         constexpr uint64_t min_disk_space = 50 << 20; // 50 MB\n         if (!CheckDiskSpace(args.GetBlocksDirPath(), min_disk_space)) {\n             LogPrintf(\"Shutting down due to lack of disk space!\\n\");\n-            StartShutdown();\n+            if (!(*Assert(node.shutdown))()) {\n+                LogPrintf(\"Error: failed to send shutdown signal after disk space check\\n\");\n+            }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388718767",
      "id" : 1388718767,
      "in_reply_to_id" : 1388407695,
      "line" : 1167,
      "node_id" : "PRRC_kwDOABII585Sxiqv",
      "original_commit_id" : "437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69",
      "original_line" : 1167,
      "original_position" : 99,
      "original_start_line" : 1165,
      "path" : "src/init.cpp",
      "position" : 98,
      "pull_request_review_id" : 1723692798,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388718767/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1165,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-11-28T21:51:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1388718767",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1406898720"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406898720"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388185765\r\n\r\n> nit: I think this needs to be included in `validation.h` instead of here since `ChainstateManager::m_interrupt` is a `const util::SignalInterrupt&`\r\n\r\nIn commit \"refactor: Remove call to ShutdownRequested from chainstate init\" (970fba3988036e0eb8dbccdabd8578a3759eb013)\r\n\r\nI think this is doing the right thing currently. `validation.h` has a forward declaration, which works because the class member is never used in `validation.h` and is a reference, so the layout of the `ChainstateManager` class does not depend on the `SignalInterrupt` definition. And the #include is needed in this file (according to IWYU rules) because code in this file is calling the `operator bool` method defined in the `signalinterrupt.h` header.",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-11-27T23:40:16Z",
      "diff_hunk" : "@@ -17,6 +17,7 @@\n #include <txdb.h>\n #include <uint256.h>\n #include <util/fs.h>\n+#include <util/signalinterrupt.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1406898720",
      "id" : 1406898720,
      "in_reply_to_id" : 1388185765,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII585T25Ig",
      "original_commit_id" : "437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69",
      "original_line" : 20,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : 4,
      "pull_request_review_id" : 1723692798,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406898720/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-28T21:51:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406898720",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1406909934"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406909934"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388253872\r\n\r\nIn commit \"refactor: Remove call to ShutdownRequested from IndexWaitSynced\" (ca6c67229f851303c204616a64de4886d2a754a8)\r\n\r\n> nit: would ~`interrupt`~ -> `shutdown` be more appropriate and consistent name?\r\n> \r\n> (same for `node::AbortNode()`)\r\n\r\nI don't think it would be more appropriate. `shutdown` is the name being used in high-level code managing the node state and _sending_ the interrupt signal (for example in the `NodeContext::shutdown` variable). The name `shutdown` describes the purpose of the signal. But in lower level code _receiving_ the signal the signal is just called `interrupt` because the only thing this code needs to do is stop processing and return when the signal is received. It should not know why the signal is being sent.\r\n\r\nFor example in indexing code right now the interrupt signal is only sent when the node is shut down, but in the future indexes could be enabled, interrupted, and disabled at runtime by RPC or GUI commands without requiring a shutdown. In validation code, the interrupt signal is currently sent when the node is shuttting down, but in the future, the signal could be sent when there is no node at all and the signal is just being sent by a user of the libbitcoinkernel library to stop an operation.\r\n\r\nSo the variable used to request shutdowns is called `shutdown` and the variables used to receive interruptions are called `interrupt` because the variables are being used for different things. The variables could actually have different types, but since `SignalInterrupt` is modeled off of `CThreadInterrupt` just one type is used.",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-11-27T23:53:55Z",
      "diff_hunk" : "@@ -5,16 +5,16 @@\n #include <test/util/index.h>\n \n #include <index/base.h>\n-#include <shutdown.h>\n #include <util/check.h>\n+#include <util/signalinterrupt.h>\n #include <util/time.h>\n \n-void IndexWaitSynced(const BaseIndex& index)\n+void IndexWaitSynced(const BaseIndex& index, const util::SignalInterrupt& interrupt)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1406909934",
      "id" : 1406909934,
      "in_reply_to_id" : 1388253872,
      "line" : 12,
      "node_id" : "PRRC_kwDOABII585T273u",
      "original_commit_id" : "437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69",
      "original_line" : 12,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/test/util/index.cpp",
      "position" : 10,
      "pull_request_review_id" : 1723692798,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406909934/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-28T21:51:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406909934",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1415149823"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415149823"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "That makes sense, and I agree with your rationale, so I think my suggestion here in `test/util/index.cpp` indeed should be disregarded. In `node::AbortNode()` though, we are sending an interrupt signal to shutdown the node, so I still think it would make sense [there](https://github.com/bitcoin/bitcoin/pull/28051/files#diff-01b4a8b64504f4f4879e9a7fbac613d882a54975c9629c814e844463fb786a8fR19-R25)? (non-blocking nit, ofc)",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-12-05T08:46:17Z",
      "diff_hunk" : "@@ -5,16 +5,16 @@\n #include <test/util/index.h>\n \n #include <index/base.h>\n-#include <shutdown.h>\n #include <util/check.h>\n+#include <util/signalinterrupt.h>\n #include <util/time.h>\n \n-void IndexWaitSynced(const BaseIndex& index)\n+void IndexWaitSynced(const BaseIndex& index, const util::SignalInterrupt& interrupt)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1415149823",
      "id" : 1415149823,
      "in_reply_to_id" : 1388253872,
      "line" : 12,
      "node_id" : "PRRC_kwDOABII585UWXj_",
      "original_commit_id" : "437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69",
      "original_line" : 12,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/test/util/index.cpp",
      "position" : 10,
      "pull_request_review_id" : 1764382859,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415149823/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T09:12:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415149823",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1415150781"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415150781"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You're right, I didn't think about the `operator bool`. Thanks.",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-12-05T08:47:06Z",
      "diff_hunk" : "@@ -17,6 +17,7 @@\n #include <txdb.h>\n #include <uint256.h>\n #include <util/fs.h>\n+#include <util/signalinterrupt.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1415150781",
      "id" : 1415150781,
      "in_reply_to_id" : 1388185765,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII585UWXy9",
      "original_commit_id" : "437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69",
      "original_line" : 20,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : 4,
      "pull_request_review_id" : 1764382859,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415150781/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T09:12:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415150781",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1415152306"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415152306"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> But I think just making the call and logging an error when the call fails is the most straightforward approach.\r\n\r\nAgreed, can be marked as resolved.",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-12-05T08:48:27Z",
      "diff_hunk" : "@@ -378,7 +393,10 @@ static void HandleSIGHUP(int)\n #else\n static BOOL WINAPI consoleCtrlHandler(DWORD dwCtrlType)\n {\n-    StartShutdown();\n+    if (!(*Assert(g_shutdown))()) {\n+        LogPrintf(\"Error: failed to send shutdown signal on Ctrl-C\\n\");\n+        return false;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1415152306",
      "id" : 1415152306,
      "in_reply_to_id" : 1388335574,
      "line" : 412,
      "node_id" : "PRRC_kwDOABII585UWYKy",
      "original_commit_id" : "437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69",
      "original_line" : 412,
      "original_position" : 72,
      "original_start_line" : 396,
      "path" : "src/init.cpp",
      "position" : 71,
      "pull_request_review_id" : 1764382859,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415152306/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 409,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-12-05T09:12:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415152306",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1415185397"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415185397"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Lower level code should just be returning errors and notifications, and high level code should be using that information to decide whether to shut down\r\n\r\nThat does seem like a better design, indeed. I agree then that having the bad approach be more verbose is not something to worry about, and my suggestion should be discarded. Thank you for providing the rationale, I think this might be useful to add to the PR description?",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-12-05T09:09:19Z",
      "diff_hunk" : "@@ -1139,11 +1158,13 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     }, std::chrono::minutes{1});\n \n     // Check disk space every 5 minutes to avoid db corruption.\n-    node.scheduler->scheduleEvery([&args]{\n+    node.scheduler->scheduleEvery([&args, &node]{\n         constexpr uint64_t min_disk_space = 50 << 20; // 50 MB\n         if (!CheckDiskSpace(args.GetBlocksDirPath(), min_disk_space)) {\n             LogPrintf(\"Shutting down due to lack of disk space!\\n\");\n-            StartShutdown();\n+            if (!(*Assert(node.shutdown))()) {\n+                LogPrintf(\"Error: failed to send shutdown signal after disk space check\\n\");\n+            }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1415185397",
      "id" : 1415185397,
      "in_reply_to_id" : 1388407695,
      "line" : 1167,
      "node_id" : "PRRC_kwDOABII585UWgP1",
      "original_commit_id" : "437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69",
      "original_line" : 1167,
      "original_position" : 99,
      "original_start_line" : 1165,
      "path" : "src/init.cpp",
      "position" : 98,
      "pull_request_review_id" : 1764382859,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415185397/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1165,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-12-05T09:12:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415185397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1417160346"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417160346"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Calling `app.node()` here before `app.createNode` results in a crash on windows when running `bitcoin-qt.exe`. I think the most straight forward way to resolve this would be to move this block of code to after `createNode` is called.\r\n\r\nAlternatively, to keep the current control flow, the way I read it, `make_node` does not actually manipulate the node context, besides eventually setting it in the `NodeImpl` further down the call stack. So I think the call to it could be moved further up:\r\n```diff\r\ndiff --git a/src/qt/bitcoin.cpp b/src/qt/bitcoin.cpp\r\nindex 8d4ca4ea92..a195db550f 100644\r\n--- a/src/qt/bitcoin.cpp\r\n+++ b/src/qt/bitcoin.cpp\r\n@@ -301,0 +302,2 @@ void BitcoinApplication::createSplashScreen(const NetworkStyle *networkStyle)\r\n+    assert(m_node);\r\n+    m_splash->setNode(*m_node);\r\n@@ -658,0 +661 @@ int GuiMain(int argc, char* argv[])\r\n+    app.createNode(*init);\r\n@@ -675,2 +677,0 @@ int GuiMain(int argc, char* argv[])\r\n-    app.createNode(*init);\r\n```\r\n\r\n\r\nWould be nice if we had tests that would exercise this code. Maybe a quick start and kill routine can be added to the windows native CI job?\r\n",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-12-06T11:49:30Z",
      "diff_hunk" : "@@ -661,7 +661,7 @@ int GuiMain(int argc, char* argv[])\n     app.installEventFilter(new GUIUtil::LabelOutOfFocusEventFilter(&app));\n #if defined(Q_OS_WIN)\n     // Install global event filter for processing Windows session related Windows messages (WM_QUERYENDSESSION and WM_ENDSESSION)\n-    qApp->installNativeEventFilter(new WinShutdownMonitor());\n+    qApp->installNativeEventFilter(new WinShutdownMonitor(app.node()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1417160346",
      "id" : 1417160346,
      "line" : 664,
      "node_id" : "PRRC_kwDOABII585UeCaa",
      "original_commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "original_line" : 664,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/qt/bitcoin.cpp",
      "position" : 5,
      "pull_request_review_id" : 1767356599,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417160346/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-06T11:52:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417160346",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1417160672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417160672"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit: Could this be private?",
      "commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "created_at" : "2023-12-06T11:49:52Z",
      "diff_hunk" : "@@ -13,14 +13,22 @@\n \n #include <QAbstractNativeEventFilter>\n \n+namespace interfaces {\n+class Node;\n+} // namespace interfaces\n+\n class WinShutdownMonitor : public QAbstractNativeEventFilter\n {\n public:\n+    WinShutdownMonitor(interfaces::Node& node) : m_node(node) {}\n+\n     /** Implements QAbstractNativeEventFilter interface for processing Windows messages */\n     bool nativeEventFilter(const QByteArray &eventType, void *pMessage, long *pnResult) override;\n \n     /** Register the reason for blocking shutdown on Windows to allow clean client exit */\n     static void registerShutdownBlockReason(const QString& strReason, const HWND& mainWinId);\n+\n+    interfaces::Node& m_node;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1417160672",
      "id" : 1417160672,
      "line" : 31,
      "node_id" : "PRRC_kwDOABII585UeCfg",
      "original_commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "original_line" : 31,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/qt/winshutdownmonitor.h",
      "position" : 19,
      "pull_request_review_id" : 1767356599,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417160672/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-06T11:52:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417160672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1417585924"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417585924"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1417160346\r\n\r\n> Calling `app.node()` here before `app.createNode` results in a crash on windows when running `bitcoin-qt.exe`.\r\n\r\nGreat catch! This should be fixed now by passing a shutdown callback and delaying the call to app.node(). I didn't want to move the createNode call, because the interfaces::Node object is intentionally created after the splash screen, so the splash screen can show up without a delay. The delay wouldn't be significant now, but with #10102 creating the node requires an IPC round trip, so might be noticeable.\r\n\r\nAlso agree with you it's a shame this part of the Qt codebase doesn't have CI test coverage. Your suggestion to add a CI step starting and stopping bitcoin-qt on windows (and probably all platforms bitcoin-qt is built for) would be a nice thing to implement. I think it would be most easily implemented as a python test.\r\n\r\nOther ways to get more test coverage for this code might be to change one of the existing CI jobs to run existing python tests with `bitcoin-qt` instead of `bitcoind`. Or to refactor the GuiMain function and write unit tests for it. But unlike your suggestion, these approaches would be unlikely to trigger this particular bug since it is windows-specific.",
      "commit_id" : "4a3a2651420ca1808cb25aed8a33d57dfcd627f5",
      "created_at" : "2023-12-06T16:00:48Z",
      "diff_hunk" : "@@ -661,7 +661,7 @@ int GuiMain(int argc, char* argv[])\n     app.installEventFilter(new GUIUtil::LabelOutOfFocusEventFilter(&app));\n #if defined(Q_OS_WIN)\n     // Install global event filter for processing Windows session related Windows messages (WM_QUERYENDSESSION and WM_ENDSESSION)\n-    qApp->installNativeEventFilter(new WinShutdownMonitor());\n+    qApp->installNativeEventFilter(new WinShutdownMonitor(app.node()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1417585924",
      "id" : 1417585924,
      "in_reply_to_id" : 1417160346,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585UfqUE",
      "original_commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "original_line" : 664,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/qt/bitcoin.cpp",
      "position" : null,
      "pull_request_review_id" : 1767990381,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417585924/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-06T18:45:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417585924",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1417833003"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417833003"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1417160672\r\n\r\n> Nit: Could this be private?\r\n\r\nSure, switched to a private member in the latest push",
      "commit_id" : "4a3a2651420ca1808cb25aed8a33d57dfcd627f5",
      "created_at" : "2023-12-06T18:42:33Z",
      "diff_hunk" : "@@ -13,14 +13,22 @@\n \n #include <QAbstractNativeEventFilter>\n \n+namespace interfaces {\n+class Node;\n+} // namespace interfaces\n+\n class WinShutdownMonitor : public QAbstractNativeEventFilter\n {\n public:\n+    WinShutdownMonitor(interfaces::Node& node) : m_node(node) {}\n+\n     /** Implements QAbstractNativeEventFilter interface for processing Windows messages */\n     bool nativeEventFilter(const QByteArray &eventType, void *pMessage, long *pnResult) override;\n \n     /** Register the reason for blocking shutdown on Windows to allow clean client exit */\n     static void registerShutdownBlockReason(const QString& strReason, const HWND& mainWinId);\n+\n+    interfaces::Node& m_node;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1417833003",
      "id" : 1417833003,
      "in_reply_to_id" : 1417160672,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Ugmor",
      "original_commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "original_line" : 31,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/qt/winshutdownmonitor.h",
      "position" : null,
      "pull_request_review_id" : 1767990381,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417833003/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-06T18:45:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417833003",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1418034290"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1418034290"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the rationale, I indeed did not think of the future IPC delay. If we only start processing events after `app.exec()`, why not move this to just before `registerShutdownBlockReason`? Looking at the history it looks to me like this was put where it is to be in the general vicinity of the `installEvent*` calls.",
      "commit_id" : "4a3a2651420ca1808cb25aed8a33d57dfcd627f5",
      "created_at" : "2023-12-06T22:11:06Z",
      "diff_hunk" : "@@ -661,7 +661,7 @@ int GuiMain(int argc, char* argv[])\n     app.installEventFilter(new GUIUtil::LabelOutOfFocusEventFilter(&app));\n #if defined(Q_OS_WIN)\n     // Install global event filter for processing Windows session related Windows messages (WM_QUERYENDSESSION and WM_ENDSESSION)\n-    qApp->installNativeEventFilter(new WinShutdownMonitor());\n+    qApp->installNativeEventFilter(new WinShutdownMonitor(app.node()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1418034290",
      "id" : 1418034290,
      "in_reply_to_id" : 1417160346,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585UhXxy",
      "original_commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "original_line" : 664,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/qt/bitcoin.cpp",
      "position" : null,
      "pull_request_review_id" : 1768713310,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1418034290/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-06T22:11:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1418034290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1418077030"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1418077030"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Thanks for the rationale, I indeed did not think of the future IPC delay. If we only start processing events after `app.exec()`, why not move this to just before `registerShutdownBlockReason`? Looking at the history it looks to me like this was put where it is to be in the general vicinity of the `installEvent*` calls.\r\n\r\nI can make this change if you still think it's a good idea after this, but I think it's reasonable to want to keep the installEvent calls together. I also didn't want to just move the install event call when it's not necessary.\r\n\r\nI think the current approach of passing a lambda argument to shutdownmonitor instead of passing a `interfaces::Node` pointer like the previous approach is better in any case, because it makes it obvious that the only thing shutdownmonitor can do is call the startShutdown function, and that it is not going to interact with the node in some other way. It also makes the shutdown monitor class more future-proof so it the WM_QUERYENDSESSION / WM_ENDSESSION code shouldn't need to change when there are changes to the node interface.",
      "commit_id" : "4a3a2651420ca1808cb25aed8a33d57dfcd627f5",
      "created_at" : "2023-12-06T23:00:42Z",
      "diff_hunk" : "@@ -661,7 +661,7 @@ int GuiMain(int argc, char* argv[])\n     app.installEventFilter(new GUIUtil::LabelOutOfFocusEventFilter(&app));\n #if defined(Q_OS_WIN)\n     // Install global event filter for processing Windows session related Windows messages (WM_QUERYENDSESSION and WM_ENDSESSION)\n-    qApp->installNativeEventFilter(new WinShutdownMonitor());\n+    qApp->installNativeEventFilter(new WinShutdownMonitor(app.node()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1418077030",
      "id" : 1418077030,
      "in_reply_to_id" : 1417160346,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585UhiNm",
      "original_commit_id" : "8a02ce59ffa16c73611aeda6caf8b54d85c6208f",
      "original_line" : 664,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/qt/bitcoin.cpp",
      "position" : null,
      "pull_request_review_id" : 1768807340,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1418077030/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-06T23:00:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1418077030",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423078042"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423078042"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1415185397\r\n\r\n> Thank you for providing the rationale, I think this might be useful to add to the PR description?\r\n\r\nDefinitely, and the PR description was pretty bad so I rewrote it. This is mentioned now at the end.",
      "commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "created_at" : "2023-12-11T20:17:31Z",
      "diff_hunk" : "@@ -1139,11 +1158,13 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     }, std::chrono::minutes{1});\n \n     // Check disk space every 5 minutes to avoid db corruption.\n-    node.scheduler->scheduleEvery([&args]{\n+    node.scheduler->scheduleEvery([&args, &node]{\n         constexpr uint64_t min_disk_space = 50 << 20; // 50 MB\n         if (!CheckDiskSpace(args.GetBlocksDirPath(), min_disk_space)) {\n             LogPrintf(\"Shutting down due to lack of disk space!\\n\");\n-            StartShutdown();\n+            if (!(*Assert(node.shutdown))()) {\n+                LogPrintf(\"Error: failed to send shutdown signal after disk space check\\n\");\n+            }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423078042",
      "id" : 1423078042,
      "in_reply_to_id" : 1388407695,
      "line" : 1167,
      "node_id" : "PRRC_kwDOABII585U0nKa",
      "original_commit_id" : "437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69",
      "original_line" : 1167,
      "original_position" : 99,
      "original_start_line" : 1165,
      "path" : "src/init.cpp",
      "position" : 98,
      "pull_request_review_id" : 1776092295,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423078042/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1165,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-12-11T21:41:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423078042",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423078819"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423078819"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1388253872\r\n\r\n> In `node::AbortNode()` though, we are sending an interrupt signal to shutdown the node, so I still think it would make sense [there](https://github.com/bitcoin/bitcoin/pull/28051/files#diff-01b4a8b64504f4f4879e9a7fbac613d882a54975c9629c814e844463fb786a8fR19-R25)? (non-blocking nit, ofc)\r\n\r\nSorry I missed this comment before, and you are right about AbortNode. I renamed interrupt to shutdown there now and in the KernelNotifications class as well.",
      "commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "created_at" : "2023-12-11T20:18:09Z",
      "diff_hunk" : "@@ -5,16 +5,16 @@\n #include <test/util/index.h>\n \n #include <index/base.h>\n-#include <shutdown.h>\n #include <util/check.h>\n+#include <util/signalinterrupt.h>\n #include <util/time.h>\n \n-void IndexWaitSynced(const BaseIndex& index)\n+void IndexWaitSynced(const BaseIndex& index, const util::SignalInterrupt& interrupt)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423078819",
      "id" : 1423078819,
      "in_reply_to_id" : 1388253872,
      "line" : 12,
      "node_id" : "PRRC_kwDOABII585U0nWj",
      "original_commit_id" : "437a0c2aa1f0c6b55bdc4a2d91d2b7f0b1cb8e69",
      "original_line" : 12,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/test/util/index.cpp",
      "position" : 10,
      "pull_request_review_id" : 1776092295,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423078819/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-11T21:38:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423078819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423738157"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423738157"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ae6642973dead188514aceec30ae5d73404ebcdf: Is it required to change the behavior here? Why not keep the abort?",
      "commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "created_at" : "2023-12-12T09:48:41Z",
      "diff_hunk" : "@@ -16,12 +16,14 @@\n \n namespace node {\n \n-void AbortNode(std::atomic<int>& exit_status, const std::string& debug_message, const bilingual_str& user_message, bool shutdown)\n+void AbortNode(util::SignalInterrupt* shutdown, std::atomic<int>& exit_status, const std::string& debug_message, const bilingual_str& user_message)\n {\n     SetMiscWarning(Untranslated(debug_message));\n     LogPrintf(\"*** %s\\n\", debug_message);\n     InitError(user_message.empty() ? _(\"A fatal internal error occurred, see debug.log for details\") : user_message);\n     exit_status.store(EXIT_FAILURE);\n-    if (shutdown) StartShutdown();\n+    if (shutdown && !(*shutdown)()) {\n+        LogPrintf(\"Error: failed to send shutdown signal\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423738157",
      "id" : 1423738157,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII585U3IUt",
      "original_commit_id" : "ae6642973dead188514aceec30ae5d73404ebcdf",
      "original_line" : 26,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/node/abort.cpp",
      "position" : 22,
      "pull_request_review_id" : 1777064592,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423738157/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T10:05:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423738157",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423738990"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423738990"
         }
      },
      "author_association" : "MEMBER",
      "body" : "same",
      "commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "created_at" : "2023-12-12T09:49:17Z",
      "diff_hunk" : "@@ -62,7 +61,9 @@ kernel::InterruptResult KernelNotifications::blockTip(SynchronizationState state\n {\n     uiInterface.NotifyBlockTip(state, &index);\n     if (m_stop_at_height && index.nHeight >= m_stop_at_height) {\n-        StartShutdown();\n+        if (!m_shutdown()) {\n+            LogPrintf(\"Error: failed to send shutdown signal after reaching stop height\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423738990",
      "id" : 1423738990,
      "line" : 65,
      "node_id" : "PRRC_kwDOABII585U3Ihu",
      "original_commit_id" : "ae6642973dead188514aceec30ae5d73404ebcdf",
      "original_line" : 65,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/node/kernel_notifications.cpp",
      "position" : 14,
      "pull_request_review_id" : 1777064592,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423738990/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T10:05:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423738990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423753937"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423753937"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit in eaf915d61d470372e63f41f11d6a873c1936f73f: \"*the* main thread\"",
      "commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "created_at" : "2023-12-12T09:59:25Z",
      "diff_hunk" : "@@ -208,11 +213,9 @@ void InitContext(NodeContext& node)\n // The network-processing threads are all part of a thread group\n // created by AppInit() or the Qt main() function.\n //\n-// A clean exit happens when StartShutdown() or the SIGTERM\n-// signal handler sets ShutdownRequested(), which makes main thread's\n-// WaitForShutdown() interrupts the thread group.\n-// And then, WaitForShutdown() makes all other on-going threads\n-// in the thread group join the main thread.\n+// A clean exit happens when the SignalInterrupt object is triggered, which\n+// makes main thread's SignalInterrupt::wait() call return, and join all other",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423753937",
      "id" : 1423753937,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585U3MLR",
      "original_commit_id" : "eaf915d61d470372e63f41f11d6a873c1936f73f",
      "original_line" : 217,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1777064592,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423753937/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T10:05:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423753937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423755089"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423755089"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit in eaf915d61d470372e63f41f11d6a873c1936f73f: Can drop the `()` around `Assert()`?",
      "commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "created_at" : "2023-12-12T10:00:15Z",
      "diff_hunk" : "@@ -222,6 +225,11 @@ void InitContext(NodeContext& node)\n // shutdown thing.\n //\n \n+bool ShutdownRequested(node::NodeContext& node)\n+{\n+    return bool{*(Assert(node.shutdown))};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423755089",
      "id" : 1423755089,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585U3MdR",
      "original_commit_id" : "eaf915d61d470372e63f41f11d6a873c1936f73f",
      "original_line" : 230,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1777064592,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423755089/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T10:05:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423755089",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1424007995"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424007995"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423753937\r\n\r\n> nit in [eaf915d](https://github.com/bitcoin/bitcoin/commit/eaf915d61d470372e63f41f11d6a873c1936f73f): \"_the_ main thread\"\r\n\r\nFixed, thank you!",
      "commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "created_at" : "2023-12-12T13:39:42Z",
      "diff_hunk" : "@@ -208,11 +213,9 @@ void InitContext(NodeContext& node)\n // The network-processing threads are all part of a thread group\n // created by AppInit() or the Qt main() function.\n //\n-// A clean exit happens when StartShutdown() or the SIGTERM\n-// signal handler sets ShutdownRequested(), which makes main thread's\n-// WaitForShutdown() interrupts the thread group.\n-// And then, WaitForShutdown() makes all other on-going threads\n-// in the thread group join the main thread.\n+// A clean exit happens when the SignalInterrupt object is triggered, which\n+// makes main thread's SignalInterrupt::wait() call return, and join all other",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1424007995",
      "id" : 1424007995,
      "in_reply_to_id" : 1423753937,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585U4KM7",
      "original_commit_id" : "eaf915d61d470372e63f41f11d6a873c1936f73f",
      "original_line" : 217,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1777495734,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424007995/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T19:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424007995",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1424008398"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424008398"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423755089\r\n\r\n> nit in [eaf915d](https://github.com/bitcoin/bitcoin/commit/eaf915d61d470372e63f41f11d6a873c1936f73f): Can drop the `()` around `Assert()`?\r\n\r\nGood catch, fixed",
      "commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "created_at" : "2023-12-12T13:40:01Z",
      "diff_hunk" : "@@ -222,6 +225,11 @@ void InitContext(NodeContext& node)\n // shutdown thing.\n //\n \n+bool ShutdownRequested(node::NodeContext& node)\n+{\n+    return bool{*(Assert(node.shutdown))};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1424008398",
      "id" : 1424008398,
      "in_reply_to_id" : 1423755089,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585U4KTO",
      "original_commit_id" : "eaf915d61d470372e63f41f11d6a873c1936f73f",
      "original_line" : 230,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1777495734,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424008398/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T19:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424008398",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1424008653"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424008653"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423738157\r\n\r\n> [ae66429](https://github.com/bitcoin/bitcoin/commit/ae6642973dead188514aceec30ae5d73404ebcdf): Is it required to change the behavior here? Why not keep the abort?\r\n\r\nIn general, I don't think dumping core is a good way to handle errors. I think it can be a reasonable thing to do if inconsistent internal state is detected or if a precondition is violated, and halting right away will provide better debug information. Or it could make sense if it's likely that data corruption or other bad outcomes will happen if execution doesn't stop as quickly as possible.\r\n\r\nBut in this case when an ordinary system call that is not saving data returns an error code, I think it it is better to log the failure and move on than to crash the entire process abruptly when we don't know what other threads are running, what wallets might be loaded, what data might be lost, etc, as a result of an abort().",
      "commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "created_at" : "2023-12-12T13:40:11Z",
      "diff_hunk" : "@@ -16,12 +16,14 @@\n \n namespace node {\n \n-void AbortNode(std::atomic<int>& exit_status, const std::string& debug_message, const bilingual_str& user_message, bool shutdown)\n+void AbortNode(util::SignalInterrupt* shutdown, std::atomic<int>& exit_status, const std::string& debug_message, const bilingual_str& user_message)\n {\n     SetMiscWarning(Untranslated(debug_message));\n     LogPrintf(\"*** %s\\n\", debug_message);\n     InitError(user_message.empty() ? _(\"A fatal internal error occurred, see debug.log for details\") : user_message);\n     exit_status.store(EXIT_FAILURE);\n-    if (shutdown) StartShutdown();\n+    if (shutdown && !(*shutdown)()) {\n+        LogPrintf(\"Error: failed to send shutdown signal\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1424008653",
      "id" : 1424008653,
      "in_reply_to_id" : 1423738157,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII585U4KXN",
      "original_commit_id" : "ae6642973dead188514aceec30ae5d73404ebcdf",
      "original_line" : 26,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/node/abort.cpp",
      "position" : 22,
      "pull_request_review_id" : 1777495734,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424008653/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T19:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424008653",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1424008835"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424008835"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423738990\r\n\r\n> same\r\n\r\nI'd give the same answer (https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1423738157) here too\r\n",
      "commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "created_at" : "2023-12-12T13:40:19Z",
      "diff_hunk" : "@@ -62,7 +61,9 @@ kernel::InterruptResult KernelNotifications::blockTip(SynchronizationState state\n {\n     uiInterface.NotifyBlockTip(state, &index);\n     if (m_stop_at_height && index.nHeight >= m_stop_at_height) {\n-        StartShutdown();\n+        if (!m_shutdown()) {\n+            LogPrintf(\"Error: failed to send shutdown signal after reaching stop height\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1424008835",
      "id" : 1424008835,
      "in_reply_to_id" : 1423738990,
      "line" : 65,
      "node_id" : "PRRC_kwDOABII585U4KaD",
      "original_commit_id" : "ae6642973dead188514aceec30ae5d73404ebcdf",
      "original_line" : 65,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/node/kernel_notifications.cpp",
      "position" : 14,
      "pull_request_review_id" : 1777495734,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424008835/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T19:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424008835",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1424554648"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424554648"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I guess this code will never be hit, so it doesn't matter much. If it was hit, I don't see how the user would shutdown the process without an unclean termination, so might as well do an abort. Generally, it should be fine to abort Bitcoin Core at any time, because any critical data should always be flushed atomically to storage.\r\n\r\nBut as this code should never be hit, it also seems fine to give the user the option to call RPCs to unload wallets, flush the chainstate, and disconnect peers, etc, before doing the unclean termination.",
      "commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "created_at" : "2023-12-12T20:44:43Z",
      "diff_hunk" : "@@ -16,12 +16,14 @@\n \n namespace node {\n \n-void AbortNode(std::atomic<int>& exit_status, const std::string& debug_message, const bilingual_str& user_message, bool shutdown)\n+void AbortNode(util::SignalInterrupt* shutdown, std::atomic<int>& exit_status, const std::string& debug_message, const bilingual_str& user_message)\n {\n     SetMiscWarning(Untranslated(debug_message));\n     LogPrintf(\"*** %s\\n\", debug_message);\n     InitError(user_message.empty() ? _(\"A fatal internal error occurred, see debug.log for details\") : user_message);\n     exit_status.store(EXIT_FAILURE);\n-    if (shutdown) StartShutdown();\n+    if (shutdown && !(*shutdown)()) {\n+        LogPrintf(\"Error: failed to send shutdown signal\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1424554648",
      "id" : 1424554648,
      "in_reply_to_id" : 1423738157,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII585U6PqY",
      "original_commit_id" : "ae6642973dead188514aceec30ae5d73404ebcdf",
      "original_line" : 26,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/node/abort.cpp",
      "position" : 22,
      "pull_request_review_id" : 1778405806,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424554648/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T20:44:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424554648",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1425340275"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1425340275"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit in the last commit: Shouldn't new node code be in the node namespace? Otherwise it will have to be touched again when it is moved into the node namespace later?",
      "commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "created_at" : "2023-12-13T13:15:53Z",
      "diff_hunk" : "@@ -26,6 +26,11 @@ namespace node {\n struct NodeContext;\n } // namespace node\n \n+/** Initialize node context shutdown and args variables. */\n+void InitContext(node::NodeContext& node);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1425340275",
      "id" : 1425340275,
      "line" : 30,
      "node_id" : "PRRC_kwDOABII585U9Pdz",
      "original_commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "original_line" : 30,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.h",
      "position" : 5,
      "pull_request_review_id" : 1779599067,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1425340275/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-13T13:29:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1425340275",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1425860646"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1425860646"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1425340275\r\n\r\n> Nit in the last commit: Shouldn't new node code be in the node namespace? Otherwise it will have to be touched again when it is moved into the node namespace later?\r\n\r\nThis is true, but it is not different from other init.h methods. Logically init.h and init.cpp belong in node subdirectory and should use the node namespace, so I didn't want to make this one function stand out. The function also does need to be located in this file because it is accesses a static variable. So just keeping the Init functions in the same namespace seemed like the most straightforward approach for now.",
      "commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "created_at" : "2023-12-13T20:38:42Z",
      "diff_hunk" : "@@ -26,6 +26,11 @@ namespace node {\n struct NodeContext;\n } // namespace node\n \n+/** Initialize node context shutdown and args variables. */\n+void InitContext(node::NodeContext& node);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#discussion_r1425860646",
      "id" : 1425860646,
      "in_reply_to_id" : 1425340275,
      "line" : 30,
      "node_id" : "PRRC_kwDOABII585U_Ogm",
      "original_commit_id" : "6db04be102807ee0120981a9b8de62a55439dabb",
      "original_line" : 30,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.h",
      "position" : 5,
      "pull_request_review_id" : 1780450856,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28051",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1425860646/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-13T20:41:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1425860646",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 6db04be102807ee0120981a9b8de62a55439dabb\r\n\r\nCode seems fine, but I'm not familiar enough with this area to say whether this is the right approach or if there are any side effects that haven't been thought of.",
      "created_at" : "2023-12-14T20:03:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28051#issuecomment-1856505048",
      "id" : 1856505048,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28051",
      "node_id" : "IC_kwDOABII585uqATY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856505048/reactions"
      },
      "updated_at" : "2023-12-14T20:03:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856505048",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
