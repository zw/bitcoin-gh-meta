[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28016).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [itornaza](https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-2016551125) |\n| Stale ACK | [cbergqvist](https://github.com/bitcoin/bitcoin/pull/28016#pullrequestreview-1928238964), [tdb3](https://github.com/bitcoin/bitcoin/pull/28016#pullrequestreview-1932896265), [davidgumberg](https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-2000573613) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo/LogDebug over LogPrintf/LogPrint by maflcko)\n* [#29605](https://github.com/bitcoin/bitcoin/pull/29605) (net: Favor peers from addrman over fetching seednodes by sr-gi)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-06-30T14:23:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1614729128",
      "id" : 1614729128,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII585gPs-o",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1614729128/reactions"
      },
      "updated_at" : "2024-03-25T04:13:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1614729128",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I wanted to have an exit early strategy that will hand the logic back to `dnsseed` if all `seednodes` have been tried and no data has been added to the `addrman`. However, looks like checking if both `m_nodes` and `m_addr_fetch` are empty may not be sufficient (i.e. a node can be removed from `m_addr_fetch`, tried but not yet put at `m_nodes`. This seems to be specifically sensitive for privacy networks where the latency may be higher)",
      "created_at" : "2023-06-30T14:31:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1614740856",
      "id" : 1614740856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII585gPv14",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1614740856/reactions"
      },
      "updated_at" : "2023-06-30T14:31:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1614740856",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1247939565"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1247939565"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Could use `NodeClock::now()` for new code? Also `30s` should work for the constant.",
      "commit_id" : "ac7ce2403d630cc5b94ffa8d58a7cf78bfa4f5bf",
      "created_at" : "2023-06-30T14:33:26Z",
      "diff_hunk" : "@@ -1397,7 +1397,31 @@ void CConnman::ThreadDNSAddressSeed()\n     std::vector<std::string> seeds = Params().DNSSeeds();\n     Shuffle(seeds.begin(), seeds.end(), rng);\n     int seeds_right_now = 0; // Number of seeds left before testing if we have enough connections\n-    int found = 0;\n+    int target_outbound_connections = 2;\n+    int outbound_connection_count = 0;\n+\n+    auto start = GetTime<std::chrono::microseconds>();\n+    if (gArgs.IsArgSet(\"-seednode\")) {\n+        LogPrintf(\"-seednode enabled. Trying the provided seeds before defaulting to the dnsseeds.\\n\");\n+        while (!interruptNet) {\n+            if (!interruptNet.sleep_for(std::chrono::milliseconds(500)))\n+                return;\n+\n+            // Abort if we have spent enough time without reaching our target.\n+            // Giving seed nodes 30 seconds so this does not become a race against fixedseeds (which\n+            // triggers after a minute)\n+            if (GetTime<std::chrono::seconds>() > start + std::chrono::seconds{30}) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1247939565",
      "id" : 1247939565,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585KYgvt",
      "original_commit_id" : "f86cb3c668e1ee3c654caeafd2966099dd84843c",
      "original_line" : 1413,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1507314838,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1247939565/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-30T14:33:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1247939565",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1248003587"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1248003587"
         }
      },
      "author_association" : "NONE",
      "body" : "Should be fixed in ac7ce24",
      "commit_id" : "ac7ce2403d630cc5b94ffa8d58a7cf78bfa4f5bf",
      "created_at" : "2023-06-30T15:32:53Z",
      "diff_hunk" : "@@ -1397,7 +1397,31 @@ void CConnman::ThreadDNSAddressSeed()\n     std::vector<std::string> seeds = Params().DNSSeeds();\n     Shuffle(seeds.begin(), seeds.end(), rng);\n     int seeds_right_now = 0; // Number of seeds left before testing if we have enough connections\n-    int found = 0;\n+    int target_outbound_connections = 2;\n+    int outbound_connection_count = 0;\n+\n+    auto start = GetTime<std::chrono::microseconds>();\n+    if (gArgs.IsArgSet(\"-seednode\")) {\n+        LogPrintf(\"-seednode enabled. Trying the provided seeds before defaulting to the dnsseeds.\\n\");\n+        while (!interruptNet) {\n+            if (!interruptNet.sleep_for(std::chrono::milliseconds(500)))\n+                return;\n+\n+            // Abort if we have spent enough time without reaching our target.\n+            // Giving seed nodes 30 seconds so this does not become a race against fixedseeds (which\n+            // triggers after a minute)\n+            if (GetTime<std::chrono::seconds>() > start + std::chrono::seconds{30}) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1248003587",
      "id" : 1248003587,
      "in_reply_to_id" : 1247939565,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585KYwYD",
      "original_commit_id" : "f86cb3c668e1ee3c654caeafd2966099dd84843c",
      "original_line" : 1413,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1507426180,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1248003587/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-30T15:32:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1248003587",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "If both are provided, I would expect both to be active in parallel, and complete even if the other succeeds...",
      "created_at" : "2023-07-04T15:17:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1620432636",
      "id" : 1620432636,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII585gldb8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1620432636/reactions"
      },
      "updated_at" : "2023-07-04T15:17:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1620432636",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-09-14T10:42:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1719210019",
      "id" : 1719210019,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII585meRAj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1719210019/reactions"
      },
      "updated_at" : "2023-09-14T10:42:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1719210019",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> If both are provided, I would expect both to be active in parallel, and complete even if the other succeeds...\r\n\r\nKindly add some rationale for that? \r\n\r\nAs I see it, if the user is changing a default (adding a `seednode` in this case) I'd make sense to prioritize that, especially in this case where the `dnsseeds` are more likely to provide a higher number of addresses for the node to pick up. Hence, the odds of the user selecting a peer from the `seednode`(s) that he has manually specified are lower",
      "created_at" : "2023-09-14T15:51:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1719715935",
      "id" : 1719715935,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII585mgMhf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1719715935/reactions"
      },
      "updated_at" : "2023-09-14T15:51:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1719715935",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">>If both are provided, I would expect both to be active in parallel, and complete even if the other succeeds...\r\n\r\n>Kindly add some rationale for that?\r\n\r\nIf the user has specified both, presumably he wants both to be used...",
      "created_at" : "2023-09-15T17:47:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1721636751",
      "id" : 1721636751,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII585mnheP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1721636751/reactions"
      },
      "updated_at" : "2023-09-15T17:47:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1721636751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> > > If both are provided, I would expect both to be active in parallel, and complete even if the other succeeds...\r\n> \r\n> > Kindly add some rationale for that?\r\n> \r\n> If the user has specified both, presumably he wants both to be used...\r\n\r\nAnd they are, just not at the same time. \r\n\r\nThe same rationale applies to #27577, yet seednodes are prioritized over fixed seeds",
      "created_at" : "2023-09-15T18:23:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1721675839",
      "id" : 1721675839,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII585mnrA_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1721675839/reactions"
      },
      "updated_at" : "2023-09-15T18:23:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1721675839",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased to fix CI",
      "created_at" : "2024-01-29T22:07:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1915660249",
      "id" : 1915660249,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII585yLqfZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915660249/reactions"
      },
      "updated_at" : "2024-01-29T22:07:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915660249",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2024-01-31T18:13:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1919652483",
      "id" : 1919652483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII585ya5KD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919652483/reactions"
      },
      "updated_at" : "2024-01-31T18:13:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919652483",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1500860485"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1500860485"
         }
      },
      "author_association" : "NONE",
      "body" : "Is there a particular rationale for this chosen target of 2?\r\nnit: Recommend adding comment with rationale (perhaps I overlooked this).",
      "commit_id" : "206094a73e23c3e6c09f21a4888b1a8edb217aab",
      "created_at" : "2024-02-23T15:54:24Z",
      "diff_hunk" : "@@ -2189,7 +2189,30 @@ void CConnman::ThreadDNSAddressSeed()\n     std::vector<std::string> seeds = m_params.DNSSeeds();\n     Shuffle(seeds.begin(), seeds.end(), rng);\n     int seeds_right_now = 0; // Number of seeds left before testing if we have enough connections\n-    int found = 0;\n+    int target_outbound_connections = 2;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1500860485",
      "id" : 1500860485,
      "line" : 2192,
      "node_id" : "PRRC_kwDOABII585ZdVBF",
      "original_commit_id" : "206094a73e23c3e6c09f21a4888b1a8edb217aab",
      "original_line" : 2192,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 5,
      "pull_request_review_id" : 1898431958,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1500860485/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-23T15:55:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1500860485",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/106488469?v=4",
         "events_url" : "https://api.github.com/users/tdb3/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tdb3/followers",
         "following_url" : "https://api.github.com/users/tdb3/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tdb3/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tdb3",
         "id" : 106488469,
         "login" : "tdb3",
         "node_id" : "U_kgDOBljilQ",
         "organizations_url" : "https://api.github.com/users/tdb3/orgs",
         "received_events_url" : "https://api.github.com/users/tdb3/received_events",
         "repos_url" : "https://api.github.com/users/tdb3/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tdb3/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tdb3/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tdb3"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1506680713"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506680713"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We are just keeping it consistent with what `nRelevant` used to be",
      "commit_id" : "87be4abd33eb6c539a5f953db2f4be3248a86dd0",
      "created_at" : "2024-02-28T21:21:45Z",
      "diff_hunk" : "@@ -2189,7 +2189,30 @@ void CConnman::ThreadDNSAddressSeed()\n     std::vector<std::string> seeds = m_params.DNSSeeds();\n     Shuffle(seeds.begin(), seeds.end(), rng);\n     int seeds_right_now = 0; // Number of seeds left before testing if we have enough connections\n-    int found = 0;\n+    int target_outbound_connections = 2;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1506680713",
      "id" : 1506680713,
      "in_reply_to_id" : 1500860485,
      "line" : 2192,
      "node_id" : "PRRC_kwDOABII585Zzh-J",
      "original_commit_id" : "206094a73e23c3e6c09f21a4888b1a8edb217aab",
      "original_line" : 2192,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 5,
      "pull_request_review_id" : 1907452770,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506680713/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-28T21:21:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506680713",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> nit: What are your thoughts on informing the user of seednode prioritization behavior in help output? Welcome to cherry pick the commit here: [tdb3@c83d32e](https://github.com/tdb3/bitcoin/commit/c83d32e86cf40ceec1a0cf53b435e0fd8a3dabfe)\r\n\r\nThat makes sense to me",
      "created_at" : "2024-02-28T21:22:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1969943448",
      "id" : 1969943448,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII5851avOY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1969943448/reactions"
      },
      "updated_at" : "2024-02-28T21:23:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1969943448",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1507284771"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1507284771"
         }
      },
      "author_association" : "NONE",
      "body" : "Suggestion to change to:\r\n```C++\r\nconstexpr int TARGET_OUTBOUND_CONNECTIONS = 2;\r\n```",
      "commit_id" : "87be4abd33eb6c539a5f953db2f4be3248a86dd0",
      "created_at" : "2024-02-29T09:38:55Z",
      "diff_hunk" : "@@ -2189,7 +2189,30 @@ void CConnman::ThreadDNSAddressSeed()\n     std::vector<std::string> seeds = m_params.DNSSeeds();\n     Shuffle(seeds.begin(), seeds.end(), rng);\n     int seeds_right_now = 0; // Number of seeds left before testing if we have enough connections\n-    int found = 0;\n+    int target_outbound_connections = 2;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1507284771",
      "id" : 1507284771,
      "in_reply_to_id" : 1500860485,
      "line" : 2192,
      "node_id" : "PRRC_kwDOABII585Z11cj",
      "original_commit_id" : "206094a73e23c3e6c09f21a4888b1a8edb217aab",
      "original_line" : 2192,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 5,
      "pull_request_review_id" : 1908397309,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1507284771/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-03T21:54:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1507284771",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/581308?v=4",
         "events_url" : "https://api.github.com/users/cbergqvist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cbergqvist/followers",
         "following_url" : "https://api.github.com/users/cbergqvist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cbergqvist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cbergqvist",
         "id" : 581308,
         "login" : "cbergqvist",
         "node_id" : "MDQ6VXNlcjU4MTMwOA==",
         "organizations_url" : "https://api.github.com/users/cbergqvist/orgs",
         "received_events_url" : "https://api.github.com/users/cbergqvist/received_events",
         "repos_url" : "https://api.github.com/users/cbergqvist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cbergqvist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cbergqvist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cbergqvist"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> > If the user has specified both, presumably he wants both to be used...\r\n> \r\n> And they are, just not at the same time.\r\n> \r\n> The same rationale applies to #27577, yet seednodes are prioritized over fixed seeds\r\n\r\nAttempt to clarify:\r\n#27577 postpones the possible usage of fixed seeds if `-seednode` is specified. It does not prioritize `-seednode` over `-dnsseed`.\r\n\r\nI started out agreeing with @luke-jr that if one specifies both `-seednode` and `-dnsseed` one probably wants both. But `net.h` states:\r\n```C++\r\nstatic constexpr bool DEFAULT_DNSSEED{true};\r\n```\r\nSo most nodes have it enabled by default. Makes sense to prioritize `-seednode` if specified.",
      "created_at" : "2024-02-29T12:51:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1971075082",
      "id" : 1971075082,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII5851fDgK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1971075082/reactions"
      },
      "updated_at" : "2024-02-29T12:51:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1971075082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/581308?v=4",
         "events_url" : "https://api.github.com/users/cbergqvist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cbergqvist/followers",
         "following_url" : "https://api.github.com/users/cbergqvist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cbergqvist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cbergqvist",
         "id" : 581308,
         "login" : "cbergqvist",
         "node_id" : "MDQ6VXNlcjU4MTMwOA==",
         "organizations_url" : "https://api.github.com/users/cbergqvist/orgs",
         "received_events_url" : "https://api.github.com/users/cbergqvist/received_events",
         "repos_url" : "https://api.github.com/users/cbergqvist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cbergqvist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cbergqvist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cbergqvist"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1507551723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1507551723"
         }
      },
      "author_association" : "NONE",
      "body" : "Consider moving these variable declarations (including `rng`) after the new `if (gArgs.IsArgSet(\"-seednode\"))`-block since they aren't used until later.",
      "commit_id" : "87be4abd33eb6c539a5f953db2f4be3248a86dd0",
      "created_at" : "2024-02-29T13:10:58Z",
      "diff_hunk" : "@@ -2189,7 +2189,30 @@ void CConnman::ThreadDNSAddressSeed()\n     std::vector<std::string> seeds = m_params.DNSSeeds();\n     Shuffle(seeds.begin(), seeds.end(), rng);\n     int seeds_right_now = 0; // Number of seeds left before testing if we have enough connections",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1507551723",
      "id" : 1507551723,
      "line" : 2191,
      "node_id" : "PRRC_kwDOABII585Z22nr",
      "original_commit_id" : "87be4abd33eb6c539a5f953db2f4be3248a86dd0",
      "original_line" : 2191,
      "original_position" : 3,
      "original_start_line" : 2189,
      "path" : "src/net.cpp",
      "position" : 3,
      "pull_request_review_id" : 1908397309,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1507551723/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 2189,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-03-03T21:54:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1507551723",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/581308?v=4",
         "events_url" : "https://api.github.com/users/cbergqvist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cbergqvist/followers",
         "following_url" : "https://api.github.com/users/cbergqvist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cbergqvist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cbergqvist",
         "id" : 581308,
         "login" : "cbergqvist",
         "node_id" : "MDQ6VXNlcjU4MTMwOA==",
         "organizations_url" : "https://api.github.com/users/cbergqvist/orgs",
         "received_events_url" : "https://api.github.com/users/cbergqvist/received_events",
         "repos_url" : "https://api.github.com/users/cbergqvist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cbergqvist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cbergqvist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cbergqvist"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Attempt to clarify: #27577 postpones the possible usage of fixed seeds if `-seednode` is specified. It does not prioritize `-seednode` over `-dnsseed`.\r\n\r\nFrom where I see it that is literally prioritizing one over the other. Before the aforementioned change, both would race, after the change, `seednode` was given a 1 min headstart before defaulting to `dnsseed`",
      "created_at" : "2024-02-29T14:40:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1971286932",
      "id" : 1971286932,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII5851f3OU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1971286932/reactions"
      },
      "updated_at" : "2024-02-29T14:40:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1971286932",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> From where I see it that is literally prioritizing one over the other. Before the aforementioned change, both would race, after the change, `seednode` was given a 1 min headstart before defaulting to `dnsseed`\r\n\r\nUnless I've misunderstood, #27577 is concerned about what happens to `-seednode` when `-dnsseed` is *turned off*:\r\n> However, when disabling dns seeds and specifiying -seednode \r\n> ...\r\n\r\nThat's when the race condition *that* PR is concerned about occurs. Both before and after #27577, `ThreadOpenConnections()` had an if-condition with `std::chrono::minutes{1}`, but that's literally to set `add_fixed_seeds_now = true;`, so `CChainParams::vFixedSeeds`, *not* for DNS seeds `CChainParams::vSeeds`.",
      "created_at" : "2024-02-29T17:11:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1971591320",
      "id" : 1971591320,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII5851hBiY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1971591320/reactions"
      },
      "updated_at" : "2024-02-29T17:15:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1971591320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/581308?v=4",
         "events_url" : "https://api.github.com/users/cbergqvist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cbergqvist/followers",
         "following_url" : "https://api.github.com/users/cbergqvist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cbergqvist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cbergqvist",
         "id" : 581308,
         "login" : "cbergqvist",
         "node_id" : "MDQ6VXNlcjU4MTMwOA==",
         "organizations_url" : "https://api.github.com/users/cbergqvist/orgs",
         "received_events_url" : "https://api.github.com/users/cbergqvist/received_events",
         "repos_url" : "https://api.github.com/users/cbergqvist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cbergqvist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cbergqvist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cbergqvist"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > From where I see it that is literally prioritizing one over the other. Before the aforementioned change, both would race, after the change, `seednode` was given a 1 min headstart before defaulting to `dnsseed`\r\n> \r\n> Unless I've misunderstood, #27577 is concerned about what happens to `-seednode` when `-dnsseed` is _turned off_:\r\n> \r\n> > However, when disabling dns seeds and specifiying -seednode\r\n> > ...\r\n> \r\n> That's when the race condition _that_ PR is concerned about occurs. Both before and after #27577, `ThreadOpenConnections()` had an if-condition with `std::chrono::minutes{1}`, but that's literally to set `add_fixed_seeds_now = true;`, so `CChainParams::vFixedSeeds`, _not_ for DNS seeds `CChainParams::vSeeds`.\r\n\r\nSorry, I meant fixed seeds, not dnsseeds",
      "created_at" : "2024-02-29T17:24:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1971613276",
      "id" : 1971613276,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII5851hG5c",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1971613276/reactions"
      },
      "updated_at" : "2024-02-29T17:24:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1971613276",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1509988505"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1509988505"
         }
      },
      "author_association" : "NONE",
      "body" : "nit: indentation",
      "commit_id" : "87be4abd33eb6c539a5f953db2f4be3248a86dd0",
      "created_at" : "2024-03-02T14:55:51Z",
      "diff_hunk" : "@@ -2189,7 +2189,30 @@ void CConnman::ThreadDNSAddressSeed()\n     std::vector<std::string> seeds = m_params.DNSSeeds();\n     Shuffle(seeds.begin(), seeds.end(), rng);\n     int seeds_right_now = 0; // Number of seeds left before testing if we have enough connections\n-    int found = 0;\n+    int target_outbound_connections = 2;\n+    int outbound_connection_count = 0;\n+\n+    auto start = NodeClock::now();\n+    if (gArgs.IsArgSet(\"-seednode\")) {\n+        LogPrintf(\"-seednode enabled. Trying the provided seeds before defaulting to the dnsseeds.\\n\");\n+        while (!interruptNet) {\n+            if (!interruptNet.sleep_for(std::chrono::milliseconds(500)))\n+                return;\n+\n+            // Abort if we have spent enough time without reaching our target.\n+            // Giving seed nodes 30 seconds so this does not become a race against fixedseeds (which triggers after 1 min)\n+            if (NodeClock::now() > start + 30s) {\n+                LogPrintf(\"Couldn't connect to enough peers via seed nodes. Handing fetch logic to the DNS seeds.\\n\");\n+                break;\n+            }\n+\n+            outbound_connection_count = GetFullOutboundConnCount();\n+            if (outbound_connection_count >= target_outbound_connections) {\n+                    LogPrintf(\"P2P peers available. Finished fetching data from seed nodes.\\n\");\n+                break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1509988505",
      "id" : 1509988505,
      "line" : 2212,
      "node_id" : "PRRC_kwDOABII585aAJiZ",
      "original_commit_id" : "87be4abd33eb6c539a5f953db2f4be3248a86dd0",
      "original_line" : 2212,
      "original_position" : 25,
      "original_start_line" : 2211,
      "path" : "src/net.cpp",
      "position" : 25,
      "pull_request_review_id" : 1908397309,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1509988505/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 2211,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-03-03T21:54:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1509988505",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/581308?v=4",
         "events_url" : "https://api.github.com/users/cbergqvist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cbergqvist/followers",
         "following_url" : "https://api.github.com/users/cbergqvist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cbergqvist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cbergqvist",
         "id" : 581308,
         "login" : "cbergqvist",
         "node_id" : "MDQ6VXNlcjU4MTMwOA==",
         "organizations_url" : "https://api.github.com/users/cbergqvist/orgs",
         "received_events_url" : "https://api.github.com/users/cbergqvist/received_events",
         "repos_url" : "https://api.github.com/users/cbergqvist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cbergqvist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cbergqvist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cbergqvist"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "re ACK for 87be4abd33eb6c539a5f953db2f4be3248a86dd0",
      "created_at" : "2024-03-02T22:58:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1974932810",
      "id" : 1974932810,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII5851txVK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1974932810/reactions"
      },
      "updated_at" : "2024-03-02T22:58:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1974932810",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/106488469?v=4",
         "events_url" : "https://api.github.com/users/tdb3/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tdb3/followers",
         "following_url" : "https://api.github.com/users/tdb3/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tdb3/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tdb3",
         "id" : 106488469,
         "login" : "tdb3",
         "node_id" : "U_kgDOBljilQ",
         "organizations_url" : "https://api.github.com/users/tdb3/orgs",
         "received_events_url" : "https://api.github.com/users/tdb3/received_events",
         "repos_url" : "https://api.github.com/users/tdb3/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tdb3/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tdb3/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tdb3"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1510418552"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1510418552"
         }
      },
      "author_association" : "NONE",
      "body" : "Only additional nit is that DNS seeds and fixed seeds output the number of seconds, might be nice & consistent to do so here too. Consider breaking out a ```constexpr std::chrono::seconds SEEDNODE_TIMEOUT = 30s;``` and `%d`-ing it into the message.\r\n\r\nCompare with DNS seeds:\r\n```\r\nWaiting 300 seconds before querying DNS seeds.\r\n```\r\nAnd fixed seeds:\r\n```\r\nAdding fixed seeds as 60 seconds have passed and addrman is empty for at least one reachable network\r\n```",
      "commit_id" : "87be4abd33eb6c539a5f953db2f4be3248a86dd0",
      "created_at" : "2024-03-03T22:49:45Z",
      "diff_hunk" : "@@ -2189,7 +2189,30 @@ void CConnman::ThreadDNSAddressSeed()\n     std::vector<std::string> seeds = m_params.DNSSeeds();\n     Shuffle(seeds.begin(), seeds.end(), rng);\n     int seeds_right_now = 0; // Number of seeds left before testing if we have enough connections\n-    int found = 0;\n+    int target_outbound_connections = 2;\n+    int outbound_connection_count = 0;\n+\n+    auto start = NodeClock::now();\n+    if (gArgs.IsArgSet(\"-seednode\")) {\n+        LogPrintf(\"-seednode enabled. Trying the provided seeds before defaulting to the dnsseeds.\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1510418552",
      "id" : 1510418552,
      "line" : 2197,
      "node_id" : "PRRC_kwDOABII585aByh4",
      "original_commit_id" : "87be4abd33eb6c539a5f953db2f4be3248a86dd0",
      "original_line" : 2197,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 10,
      "pull_request_review_id" : 1913140932,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1510418552/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-03T22:56:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1510418552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/581308?v=4",
         "events_url" : "https://api.github.com/users/cbergqvist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cbergqvist/followers",
         "following_url" : "https://api.github.com/users/cbergqvist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cbergqvist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cbergqvist",
         "id" : 581308,
         "login" : "cbergqvist",
         "node_id" : "MDQ6VXNlcjU4MTMwOA==",
         "organizations_url" : "https://api.github.com/users/cbergqvist/orgs",
         "received_events_url" : "https://api.github.com/users/cbergqvist/received_events",
         "repos_url" : "https://api.github.com/users/cbergqvist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cbergqvist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cbergqvist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cbergqvist"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Addressed comments from @cbergqvist \r\n\r\n> Future PR idea: `-seednode` does actually have a similar privacy issue to the hardcoded DNS seed nodes in that if a `bitcoin.conf` was shared around containing a fixed set of seednodes, that could make nodes easier to monitor. Another PR should probably actually de-prioritize `-seednode` in a similar way to increase privacy through preferring `peers.dat` and `anchors.dat`.\r\n\r\nI like this idea. Actually, it's not just if a config file is shared, in the current version of `ThreadOpenConnections` we will query all provided seednodes even if we don't need to further populate our `AddrMan`, that could even signal when we have restarted our node, which is not good. \r\n\r\nI'll work in a follow-up to query seednodes only if we don't have peers to connect to.\r\n",
      "created_at" : "2024-03-07T20:58:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1984448937",
      "id" : 1984448937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII5852SEmp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 2,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1984448937/reactions"
      },
      "updated_at" : "2024-03-07T21:19:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1984448937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Did ~7 runs of this, not sure why it's usually NOT able to connect to 2 valid peers before the 30 second timeout. Maybe it gets blocked because of disconnecting and reconnecting to nodes within a certain time-interval.\r\n\r\nAccording to your logs, it doesn't even look like any connection is attempted after the addr-fetch and defaulting to DNS seed. Are you sure your fetched node has any data to provide to the requester?",
      "created_at" : "2024-03-11T19:55:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1989319006",
      "id" : 1989319006,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII5852kple",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1989319006/reactions"
      },
      "updated_at" : "2024-03-11T19:55:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1989319006",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> According to your logs, it doesn't even look like any connection is attempted after the addr-fetch and defaulting to DNS seed. Are you sure your fetched node has any data to provide to the requester?\r\n\r\nRan with `-debug=net` and some extra logging around connection failure/success. Got a bunch of timing out (offline?) peers + one \"No route to host (113)\" overlapping with the 30s timeout for `-seednode`.\r\n\r\nWe only try one new connection at a time, waiting 5 seconds for timeout before moving on to the next. Might be good to at least try 2 connections in parallel?\r\n\r\nMaybe there would be some way for the second node to better prioritize which addresses it propagates so they're a bit less likely to fail. But also, maybe failures are to be expected if my two nodes are running behind the same external IP.\r\n```\r\n2024-03-14T10:16:22Z init message: Starting network threadsâ¦\r\n2024-03-14T10:16:22Z dnsseed thread start\r\n2024-03-14T10:16:22Z -seednode enabled. Trying the provided seeds for 30 seconds before defaulting to the dnsseeds.\r\n2024-03-14T10:16:22Z opencon thread start\r\n2024-03-14T10:16:22Z net thread start\r\n2024-03-14T10:16:22Z addcon thread start\r\n2024-03-14T10:16:22Z init message: Done loading\r\n2024-03-14T10:16:22Z msghand thread start\r\n2024-03-14T10:16:22Z [net] trying v2 connection 127.0.0.1 lastseen=0.0hrs\r\n2024-03-14T10:16:22Z [net] Added connection peer=0\r\n2024-03-14T10:16:22Z @@@@@@@@@@@@@@@@@@: OpenNetworkConnection succeeded connecting to ::! id: 0\r\n2024-03-14T10:16:22Z [net] sending version (103 bytes) peer=0\r\n2024-03-14T10:16:22Z [net] send version message: version 70016, blocks=0, txrelay=1, peer=0\r\n2024-03-14T10:16:23Z [net] start sending v2 handshake to peer=0\r\n2024-03-14T10:16:23Z [net] received: version (103 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] sending wtxidrelay (0 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] sending sendaddrv2 (0 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] sending verack (0 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] sending getaddr (0 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] receive version message: /Satoshi:26.99.0/: version 70016, blocks=834648, us=[::]:0, txrelay=1, peer=0\r\n2024-03-14T10:16:23Z [net] added time data, samples 2, offset +0 (+0 minutes)\r\n2024-03-14T10:16:23Z [net] received: wtxidrelay (0 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] received: sendaddrv2 (0 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] received: verack (0 bytes) peer=0\r\n2024-03-14T10:16:23Z New addr-fetch v2 peer connected: version: 70016, blocks=834648, peer=0\r\n2024-03-14T10:16:23Z [net] sending sendcmpct (9 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] sending ping (8 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] sending feefilter (8 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] received: sendcmpct (9 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] received: ping (8 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] sending pong (8 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] received: getheaders (1029 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] Ignoring getheaders from peer=0 because active chain has too little work; sending empty response\r\n2024-03-14T10:16:23Z [net] sending headers (1 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] received: feefilter (8 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] received: feefilter of 0.00001000 BTC/kvB from peer=0\r\n2024-03-14T10:16:23Z [net] received: addrv2 (17493 bytes) peer=0\r\n2024-03-14T10:16:23Z [net] Received addr: 1000 addresses (1000 processed, 0 rate-limited) from peer=0\r\n2024-03-14T10:16:23Z [net] addrfetch connection completed peer=0; disconnecting\r\n2024-03-14T10:16:23Z [net] disconnecting peer=0\r\n2024-03-14T10:16:23Z [net] Cleared nodestate for peer=0\r\n2024-03-14T10:16:23Z @@@@@@@@@@@@@@@@@@: Destroying 0!\r\n2024-03-14T10:16:23Z [net] trying v1 connection 207.136.119.136:8333 lastseen=88.5hrs\r\n2024-03-14T10:16:28Z [net] connection attempt to 207.136.119.136:8333 timed out\r\n2024-03-14T10:16:28Z @@@@@@@@@@@@@@@@@@: Failed connecting to 207.136.119.136!\r\n2024-03-14T10:16:28Z [net] trying v1 connection 114.226.60.193:8333 lastseen=510.2hrs\r\n2024-03-14T10:16:33Z [net] connection attempt to 114.226.60.193:8333 timed out\r\n2024-03-14T10:16:33Z @@@@@@@@@@@@@@@@@@: Failed connecting to 114.226.60.193!\r\n2024-03-14T10:16:34Z [net] trying v1 connection 20.48.9.203:8333 lastseen=401.2hrs\r\n2024-03-14T10:16:39Z [net] connection attempt to 20.48.9.203:8333 timed out\r\n2024-03-14T10:16:39Z @@@@@@@@@@@@@@@@@@: Failed connecting to 20.48.9.203!\r\n2024-03-14T10:16:39Z [net] trying v1 connection 47.24.20.126:8333 lastseen=169.5hrs\r\n2024-03-14T10:16:44Z [net] connection attempt to 47.24.20.126:8333 timed out\r\n2024-03-14T10:16:44Z @@@@@@@@@@@@@@@@@@: Failed connecting to 47.24.20.126!\r\n2024-03-14T10:16:45Z [net] trying v1 connection 46.114.181.32:8333 lastseen=139.3hrs\r\n2024-03-14T10:16:50Z [net] connection attempt to 46.114.181.32:8333 timed out\r\n2024-03-14T10:16:50Z @@@@@@@@@@@@@@@@@@: Failed connecting to 46.114.181.32!\r\n2024-03-14T10:16:50Z [net] trying v1 connection 217.195.164.4:8333 lastseen=142.8hrs\r\n2024-03-14T10:16:52Z Couldn't connect to enough peers via seed nodes. Handing fetch logic to the DNS seeds.\r\n2024-03-14T10:16:52Z 0 addresses found from DNS seeds\r\n2024-03-14T10:16:52Z dnsseed thread exit\r\n2024-03-14T10:16:54Z [net] connect() to 217.195.164.4:8333 failed after wait: No route to host (113)\r\n2024-03-14T10:16:54Z @@@@@@@@@@@@@@@@@@: Failed connecting to 217.195.164.4!\r\n2024-03-14T10:16:54Z [net] trying v1 connection 82.135.80.45:8333 lastseen=467.3hrs\r\n2024-03-14T10:16:59Z [net] connection attempt to 82.135.80.45:8333 timed out\r\n2024-03-14T10:16:59Z @@@@@@@@@@@@@@@@@@: Failed connecting to 82.135.80.45!\r\n2024-03-14T10:17:00Z [net] trying v1 connection 78.94.29.85:8333 lastseen=164.0hrs\r\n2024-03-14T10:17:00Z [net] Added connection peer=1\r\n2024-03-14T10:17:00Z @@@@@@@@@@@@@@@@@@: OpenNetworkConnection succeeded connecting to 78.94.29.85! id: 1\r\n2024-03-14T10:17:00Z [net] sending version (103 bytes) peer=1\r\n2024-03-14T10:17:00Z [net] send version message: version 70016, blocks=0, txrelay=1, peer=1\r\n2024-03-14T10:17:00Z [net] trying v1 connection 174.51.168.163:8333 lastseen=644.8hrs\r\n2024-03-14T10:17:03Z [net] socket closed for peer=1\r\n2024-03-14T10:17:03Z [net] disconnecting peer=1\r\n2024-03-14T10:17:03Z [net] Cleared nodestate for peer=1\r\n2024-03-14T10:17:03Z @@@@@@@@@@@@@@@@@@: Destroying 1!\r\n2024-03-14T10:17:05Z [net] connection attempt to 174.51.168.163:8333 timed out\r\n2024-03-14T10:17:05Z @@@@@@@@@@@@@@@@@@: Failed connecting to 174.51.168.163!\r\n2024-03-14T10:17:06Z [net] trying v1 connection 185.130.44.59:8333 lastseen=136.9hrs\r\n2024-03-14T10:17:06Z [net] connect() to 185.130.44.59:8333 failed after wait: Connection refused (111)\r\n2024-03-14T10:17:06Z @@@@@@@@@@@@@@@@@@: Failed connecting to 185.130.44.59!\r\n2024-03-14T10:17:06Z [net] trying v1 connection 101.44.81.22:8333 lastseen=248.6hrs\r\n2024-03-14T10:17:11Z [net] connection attempt to 101.44.81.22:8333 timed out\r\n2024-03-14T10:17:11Z @@@@@@@@@@@@@@@@@@: Failed connecting to 101.44.81.22!\r\n2024-03-14T10:17:12Z [net] trying v1 connection 177.42.111.146:8333 lastseen=72.0hrs\r\n2024-03-14T10:17:17Z [net] connection attempt to 177.42.111.146:8333 timed out\r\n2024-03-14T10:17:17Z @@@@@@@@@@@@@@@@@@: Failed connecting to 177.42.111.146!\r\n2024-03-14T10:17:17Z [net] trying v1 connection 149.50.101.18:8333 lastseen=271.1hrs\r\n2024-03-14T10:17:17Z [net] Added connection peer=2\r\n2024-03-14T10:17:17Z @@@@@@@@@@@@@@@@@@: OpenNetworkConnection succeeded connecting to 149.50.101.18! id: 2\r\n2024-03-14T10:17:17Z [net] sending version (103 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] send version message: version 70016, blocks=0, txrelay=1, peer=2\r\n2024-03-14T10:17:17Z [net] received: version (102 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] sending wtxidrelay (0 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] sending sendaddrv2 (0 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] sending verack (0 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] sending getaddr (0 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] receive version message: /Satoshi:26.0.0/: version 70016, blocks=834648, us=84.216.185.21:51030, txrelay=1, peer=2\r\n2024-03-14T10:17:17Z [net] added time data, samples 3, offset +0 (+0 minutes)\r\n2024-03-14T10:17:17Z [net] received: wtxidrelay (0 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] received: sendaddrv2 (0 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] received: verack (0 bytes) peer=2\r\n2024-03-14T10:17:17Z New outbound-full-relay v1 peer connected: version: 70016, blocks=834648, peer=2\r\n2024-03-14T10:17:17Z [net] sending sendcmpct (9 bytes) peer=2\r\n2024-03-14T10:17:17Z @@@@@@@@@@@@@@@@@@: successfully connected to 2!\r\n2024-03-14T10:17:17Z [net] sending ping (8 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] sending getheaders (69 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] initial getheaders (0) to peer=2 (startheight:834648)\r\n2024-03-14T10:17:17Z [net] sending feefilter (8 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] received: sendcmpct (9 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] received: ping (8 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] sending pong (8 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] received: getheaders (1029 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] Ignoring getheaders from peer=2 because active chain has too little work; sending empty response\r\n2024-03-14T10:17:17Z [net] sending headers (1 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] received: feefilter (8 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] received: feefilter of 0.00001000 BTC/kvB from peer=2\r\n2024-03-14T10:17:17Z [net] received: addrv2 (17699 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] Received addr: 1000 addresses (1000 processed, 0 rate-limited) from peer=2\r\n2024-03-14T10:17:17Z [net] received: pong (8 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] received: headers (162003 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] Initial headers sync started with peer=2: height=0, max_commitments=4746654, min_work=000000000000000000000000000000000000000052b2559353df4117b7348b64\r\n2024-03-14T10:17:17Z [net] sending getheaders (101 bytes) peer=2\r\n2024-03-14T10:17:17Z [net] more getheaders (from 00000000dfd5d65c9d8561b4b8f60a63018fe3933ecb131fb37f905f87da951a) to peer=2\r\n2024-03-14T10:17:17Z Pre-synchronizing blockheaders, height: 2000 (~0.25%)\r\n```",
      "created_at" : "2024-03-14T10:41:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1997145016",
      "id" : 1997145016,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII5853CgO4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1997145016/reactions"
      },
      "updated_at" : "2024-03-14T10:41:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1997145016",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/581308?v=4",
         "events_url" : "https://api.github.com/users/cbergqvist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cbergqvist/followers",
         "following_url" : "https://api.github.com/users/cbergqvist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cbergqvist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cbergqvist",
         "id" : 581308,
         "login" : "cbergqvist",
         "node_id" : "MDQ6VXNlcjU4MTMwOA==",
         "organizations_url" : "https://api.github.com/users/cbergqvist/orgs",
         "received_events_url" : "https://api.github.com/users/cbergqvist/received_events",
         "repos_url" : "https://api.github.com/users/cbergqvist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cbergqvist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cbergqvist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cbergqvist"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1526788396"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1526788396"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit:\r\n```suggestion\r\n    if (gArgs.IsArgSet(\"-seednode\")) {\r\n        auto start = NodeClock::now();\r\n```",
      "commit_id" : "78482a09e06beb841e70781eb509c2b2fdea8bd9",
      "created_at" : "2024-03-15T20:13:50Z",
      "diff_hunk" : "@@ -2185,11 +2185,36 @@ void CConnman::WakeMessageHandler()\n \n void CConnman::ThreadDNSAddressSeed()\n {\n+    constexpr int TARGET_OUTBOUND_CONNECTIONS = 2;\n+    int outbound_connection_count = 0;\n+\n+    auto start = NodeClock::now();\n+    if (gArgs.IsArgSet(\"-seednode\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1526788396",
      "id" : 1526788396,
      "line" : 2192,
      "node_id" : "PRRC_kwDOABII585bAPEs",
      "original_commit_id" : "78482a09e06beb841e70781eb509c2b2fdea8bd9",
      "original_line" : 2192,
      "original_position" : 8,
      "original_start_line" : 2191,
      "path" : "src/net.cpp",
      "position" : 8,
      "pull_request_review_id" : 1940456720,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1526788396/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 2191,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-03-15T20:13:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1526788396",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2257631?v=4",
         "events_url" : "https://api.github.com/users/davidgumberg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/davidgumberg/followers",
         "following_url" : "https://api.github.com/users/davidgumberg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/davidgumberg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/davidgumberg",
         "id" : 2257631,
         "login" : "davidgumberg",
         "node_id" : "MDQ6VXNlcjIyNTc2MzE=",
         "organizations_url" : "https://api.github.com/users/davidgumberg/orgs",
         "received_events_url" : "https://api.github.com/users/davidgumberg/received_events",
         "repos_url" : "https://api.github.com/users/davidgumberg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/davidgumberg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/davidgumberg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/davidgumberg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1526840921"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1526840921"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm open to being wrong about this if you think `start` may be useful outside of the `-seednode` logic. If we refactored the dns seed `seeds_wait_time` sleep loop to resemble this part, maybe we'd want to reinitialize the variable anyways:\r\n```diff\r\n  const std::chrono::seconds seeds_wait_time = (addrman.Size() >= DNSSEEDS_DELAY_PEER_THRESHOLD ? DNSSEEDS_DELAY_MANY_PEERS : DNSSEEDS_DELAY_FEW_PEERS);\r\n+ auto start = NodeClock::now();\r\n```",
      "commit_id" : "78482a09e06beb841e70781eb509c2b2fdea8bd9",
      "created_at" : "2024-03-15T21:07:03Z",
      "diff_hunk" : "@@ -2185,11 +2185,36 @@ void CConnman::WakeMessageHandler()\n \n void CConnman::ThreadDNSAddressSeed()\n {\n+    constexpr int TARGET_OUTBOUND_CONNECTIONS = 2;\n+    int outbound_connection_count = 0;\n+\n+    auto start = NodeClock::now();\n+    if (gArgs.IsArgSet(\"-seednode\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1526840921",
      "id" : 1526840921,
      "in_reply_to_id" : 1526788396,
      "line" : 2192,
      "node_id" : "PRRC_kwDOABII585bAb5Z",
      "original_commit_id" : "78482a09e06beb841e70781eb509c2b2fdea8bd9",
      "original_line" : 2192,
      "original_position" : 8,
      "original_start_line" : 2191,
      "path" : "src/net.cpp",
      "position" : 8,
      "pull_request_review_id" : 1940623925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1526840921/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 2191,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-03-15T21:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1526840921",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2257631?v=4",
         "events_url" : "https://api.github.com/users/davidgumberg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/davidgumberg/followers",
         "following_url" : "https://api.github.com/users/davidgumberg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/davidgumberg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/davidgumberg",
         "id" : 2257631,
         "login" : "davidgumberg",
         "node_id" : "MDQ6VXNlcjIyNTc2MzE=",
         "organizations_url" : "https://api.github.com/users/davidgumberg/orgs",
         "received_events_url" : "https://api.github.com/users/davidgumberg/received_events",
         "repos_url" : "https://api.github.com/users/davidgumberg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/davidgumberg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/davidgumberg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/davidgumberg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK https://github.com/bitcoin/bitcoin/commit/78482a09e06beb841e70781eb509c2b2fdea8bd9\r\n\r\nI ran into this issue with the existing behavior when testing `-seednode` over v2. To state more explicitly the problem with allowing both to run in parallel, it seems to me that populating from the dns seeds will almost always be faster than the time it takes to handshake and `getaddr` from a `-seednode` \r\n\r\nTesting with a fresh signet node:\r\n```console\r\n$ bitcoind -signet -seednode=bitcoin.achow101.com:38333 -datadir=/tmp/28016/\r\n```\r\n\r\nOn master\r\n\r\n<details>\r\n\r\n<summary>\r\n\r\n```console\r\n$ bitcoind -signet -seednode=bitcoin.achow101.com:38333 -datadir=/tmp/28016/\r\n```\r\n\r\n</summary>\r\n\r\n```console\r\n2024-03-15T21:22:57Z init message: Starting network threadsâ¦\r\n2024-03-15T21:22:57Z net thread start\r\n2024-03-15T21:22:57Z addcon thread start\r\n2024-03-15T21:22:57Z dnsseed thread start\r\n2024-03-15T21:22:57Z Loading addresses from DNS seed seed.signet.bitcoin.sprovoost.nl.\r\n2024-03-15T21:22:57Z opencon thread start\r\n2024-03-15T21:22:57Z [net] trying v2 connection bitcoin.achow101.com:38333 lastseen=0.0hrs\r\n2024-03-15T21:22:57Z init message: Done loading\r\n2024-03-15T21:22:57Z msghand thread start\r\n2024-03-15T21:22:57Z Loading addresses from DNS seed 178.128.221.177\r\n2024-03-15T21:22:57Z Loading addresses from DNS seed v7ajjeirttkbnt32wpy3c6w3emwnfr3fkla7hpxcfokr3ysd3kqtzmqd.onion:38333\r\n2024-03-15T21:22:57Z 34 addresses found from DNS seeds\r\n2024-03-15T21:22:57Z dnsseed thread exit\r\n2024-03-15T21:22:57Z [net] Added connection peer=0\r\n2024-03-15T21:22:57Z [net] sending version (103 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] send version message: version 70016, blocks=0, txrelay=1, peer=0\r\n2024-03-15T21:22:57Z [net] start sending v2 handshake to peer=0\r\n2024-03-15T21:22:57Z [net] received: version (103 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] sending wtxidrelay (0 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] sending sendaddrv2 (0 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] sending verack (0 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] sending getaddr (0 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] receive version message: /Satoshi:27.99.0/: version 70016, blocks=186938, us=192.12.14.3:16482, txrelay=1, peer=0\r\n2024-03-15T21:22:57Z [net] added time data, samples 2, offset +0 (+0 minutes)\r\n2024-03-15T21:22:57Z [net] received: wtxidrelay (0 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] received: sendaddrv2 (0 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] received: verack (0 bytes) peer=0\r\n2024-03-15T21:22:57Z New addr-fetch v2 peer connected: version: 70016, blocks=186938, peer=0\r\n2024-03-15T21:22:57Z [net] sending sendcmpct (9 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] sending ping (8 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] sending feefilter (8 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] received: sendcmpct (9 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] received: ping (8 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] sending pong (8 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] received: getheaders (965 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] Ignoring getheaders from peer=0 because active chain has too little work; sending empty response\r\n2024-03-15T21:22:57Z [net] sending headers (1 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] received: feefilter (8 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] received: feefilter of 0.00001000 BTC/kvB from peer=0\r\n2024-03-15T21:22:57Z [net] received: addrv2 (19609 bytes) peer=0\r\n2024-03-15T21:22:57Z [net] Received addr: 1000 addresses (1000 processed, 0 rate-limited) from peer=0\r\n2024-03-15T21:22:57Z [net] addrfetch connection completed peer=0; disconnecting\r\n2024-03-15T21:22:57Z [net] disconnecting peer=0\r\n2024-03-15T21:22:57Z [net] Cleared nodestate for peer=0\r\n```\r\n\r\n</details>\r\n\r\nOn this branch:\r\n\r\n<details>\r\n\r\n<summary>\r\n\r\n```console\r\n$ bitcoind -signet -seednode=bitcoin.achow101.com:38333 -datadir=/tmp/28016/\r\n```\r\n\r\n</summary>\r\n\r\n```console\r\n2024-03-15T21:31:46Z -seednode enabled. Trying the provided seeds for 30 seconds before defaulting to the dnsseeds.\r\n2024-03-15T21:31:46Z addcon thread start\r\n2024-03-15T21:31:46Z opencon thread start\r\n2024-03-15T21:31:46Z init message: Done loading\r\n2024-03-15T21:31:46Z [net] trying v2 connection bitcoin.achow101.com:38333 lastseen=0.0hrs\r\n2024-03-15T21:31:46Z msghand thread start\r\n2024-03-15T21:31:46Z [net] Added connection peer=0\r\n2024-03-15T21:31:46Z [net] sending version (103 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] send version message: version 70016, blocks=0, txrelay=1, peer=0\r\n2024-03-15T21:31:46Z [net] start sending v2 handshake to peer=0\r\n2024-03-15T21:31:46Z [net] received: version (103 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] sending wtxidrelay (0 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] sending sendaddrv2 (0 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] sending verack (0 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] sending getaddr (0 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] receive version message: /Satoshi:27.99.0/: version 70016, blocks=186940, us=192.12.14.3:44748, txrelay=1, peer=0\r\n2024-03-15T21:31:46Z [net] added time data, samples 2, offset +0 (+0 minutes)\r\n2024-03-15T21:31:46Z [net] received: wtxidrelay (0 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] received: sendaddrv2 (0 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] received: verack (0 bytes) peer=0\r\n2024-03-15T21:31:46Z New addr-fetch v2 peer connected: version: 70016, blocks=186940, peer=0\r\n2024-03-15T21:31:46Z [net] sending sendcmpct (9 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] sending ping (8 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] sending feefilter (8 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] received: sendcmpct (9 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] received: ping (8 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] sending pong (8 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] received: getheaders (965 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] Ignoring getheaders from peer=0 because active chain has too little work; sending empty response\r\n2024-03-15T21:31:46Z [net] sending headers (1 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] received: feefilter (8 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] received: feefilter of 0.00001000 BTC/kvB from peer=0\r\n2024-03-15T21:31:46Z [net] received: addrv2 (19594 bytes) peer=0\r\n2024-03-15T21:31:46Z [net] Received addr: 999 addresses (999 processed, 0 rate-limited) from peer=0\r\n2024-03-15T21:31:46Z [net] addrfetch connection completed peer=0; disconnecting\r\n2024-03-15T21:31:46Z [net] disconnecting peer=0\r\n2024-03-15T21:31:46Z [net] Cleared nodestate for peer=0\r\n2024-03-15T21:31:47Z [net] trying v1 connection [2620:0:e00:400f::2c5]:38333 lastseen=196.1hrs\r\n2024-03-15T21:31:47Z [net] connect() to [2620:0:e00:400f::2c5]:38333 failed: Network is unreachable (101)\r\n2024-03-15T21:31:47Z [net] trying v1 connection [2a01:4f9:3a:2dd2::2]:38333 lastseen=15.0hrs\r\n# [Later...]\r\n2024-03-15T21:31:55Z P2P peers available. Finished fetching data from seed nodes.\r\n2024-03-15T21:31:55Z Skipping DNS seeds. Enough peers have been found\r\n2024-03-15T21:31:55Z dnsseed thread exit\r\n```\r\n\r\n</details>",
      "created_at" : "2024-03-15T22:14:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-2000573613",
      "id" : 2000573613,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII5853PlSt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 2,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2000573613/reactions"
      },
      "updated_at" : "2024-03-16T13:24:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2000573613",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2257631?v=4",
         "events_url" : "https://api.github.com/users/davidgumberg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/davidgumberg/followers",
         "following_url" : "https://api.github.com/users/davidgumberg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/davidgumberg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/davidgumberg",
         "id" : 2257631,
         "login" : "davidgumberg",
         "node_id" : "MDQ6VXNlcjIyNTc2MzE=",
         "organizations_url" : "https://api.github.com/users/davidgumberg/orgs",
         "received_events_url" : "https://api.github.com/users/davidgumberg/received_events",
         "repos_url" : "https://api.github.com/users/davidgumberg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/davidgumberg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/davidgumberg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/davidgumberg"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> We only try one new connection at a time, waiting 5 seconds for timeout before moving on to the next. Might be good to at least try 2 connections in parallel?\r\n\r\nI'm not too familiar with the underlying logic for making the actual connection, but the higher level logic is designed around always having a max number of connections, that is: there is logic for filling the connections slots, and the logic to maintain, evict, and favor different kind of connections once the limit is reached. I don't think there is a real rush to fill the outbound connection slots, it happens rather quickly under normal conditions (with a populated addrman), so the case that it may take slightly longer on the first bootstrap shouldn't be an issue.\r\n\r\n> Maybe there would be some way for the second node to better prioritize which addresses it propagates so they're a bit less likely to fail. But also, maybe failures are to be expected if my two nodes are running behind the same external IP.\r\n\r\nI don't think this would be a good idea. The collection of addresses that other peers feed you when requested is purposely \"untested\" (as in, not giving you information of whether they are good, or not giving you only good addresses is a feature). The reason for that is that if a seed only provides valid/tested addresses, you could tell what peers the node is connected to/has been connected to, which is undesirable",
      "created_at" : "2024-03-18T15:36:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-2004240467",
      "id" : 2004240467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII5853dkhT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2004240467/reactions"
      },
      "updated_at" : "2024-03-18T15:36:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2004240467",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1528799665"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528799665"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this makes sense. I wouldn't repurpose `seeds_wait_time` though. Despite both being `chrono::seconds`, they are semantically different (one is supposed to be a timestamp, while the other is a delta to be added to a timestamp, so even though we may simplify one variable, the code may be harder to read)",
      "commit_id" : "2842e51a246b162a586941184b7694f187d7aee7",
      "created_at" : "2024-03-18T15:38:27Z",
      "diff_hunk" : "@@ -2185,11 +2185,36 @@ void CConnman::WakeMessageHandler()\n \n void CConnman::ThreadDNSAddressSeed()\n {\n+    constexpr int TARGET_OUTBOUND_CONNECTIONS = 2;\n+    int outbound_connection_count = 0;\n+\n+    auto start = NodeClock::now();\n+    if (gArgs.IsArgSet(\"-seednode\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1528799665",
      "id" : 1528799665,
      "in_reply_to_id" : 1526788396,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bH6Gx",
      "original_commit_id" : "78482a09e06beb841e70781eb509c2b2fdea8bd9",
      "original_line" : 2191,
      "original_position" : 8,
      "original_start_line" : 2191,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1943457030,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528799665/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-03-18T15:38:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528799665",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Addresses review comments by @davidgumberg ",
      "created_at" : "2024-03-18T15:40:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-2004255723",
      "id" : 2004255723,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII5853doPr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2004255723/reactions"
      },
      "updated_at" : "2024-03-18T15:40:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2004255723",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1529316003"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529316003"
         }
      },
      "author_association" : "NONE",
      "body" : "Sorry for the late realization, but maybe this should be\r\n```suggestion\r\n    const int target_outbound_connections = std::clamp(args.GetIntArg(\"-maxconnections\", DEFAULT_MAX_PEER_CONNECTIONS), 1, 2);\r\n```\r\nThis would be done in order to minimize unnecessarily waiting for 30s if we don't allow more than 1 connection, but simultaneously wait for 2.\r\n\r\nMake it at least 1 since we shouldn't get here if maxconnections is `<= 0` as that would turn off `-dnsseed` and `ThreadDNSAddressSeed()`.",
      "commit_id" : "2842e51a246b162a586941184b7694f187d7aee7",
      "created_at" : "2024-03-18T21:36:04Z",
      "diff_hunk" : "@@ -2185,11 +2185,36 @@ void CConnman::WakeMessageHandler()\n \n void CConnman::ThreadDNSAddressSeed()\n {\n+    constexpr int TARGET_OUTBOUND_CONNECTIONS = 2;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1529316003",
      "id" : 1529316003,
      "line" : 2188,
      "node_id" : "PRRC_kwDOABII585bJ4Kj",
      "original_commit_id" : "2842e51a246b162a586941184b7694f187d7aee7",
      "original_line" : 2188,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 4,
      "pull_request_review_id" : 1944254499,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529316003/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-18T21:36:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529316003",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/581308?v=4",
         "events_url" : "https://api.github.com/users/cbergqvist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cbergqvist/followers",
         "following_url" : "https://api.github.com/users/cbergqvist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cbergqvist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cbergqvist",
         "id" : 581308,
         "login" : "cbergqvist",
         "node_id" : "MDQ6VXNlcjU4MTMwOA==",
         "organizations_url" : "https://api.github.com/users/cbergqvist/orgs",
         "received_events_url" : "https://api.github.com/users/cbergqvist/received_events",
         "repos_url" : "https://api.github.com/users/cbergqvist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cbergqvist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cbergqvist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cbergqvist"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1530559573"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530559573"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I kind of agree, even though that was already the case before this PR.\r\n\r\nI'd like to hear your thoughts on this @mzumsande ",
      "commit_id" : "2842e51a246b162a586941184b7694f187d7aee7",
      "created_at" : "2024-03-19T14:58:56Z",
      "diff_hunk" : "@@ -2185,11 +2185,36 @@ void CConnman::WakeMessageHandler()\n \n void CConnman::ThreadDNSAddressSeed()\n {\n+    constexpr int TARGET_OUTBOUND_CONNECTIONS = 2;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1530559573",
      "id" : 1530559573,
      "in_reply_to_id" : 1529316003,
      "line" : 2188,
      "node_id" : "PRRC_kwDOABII585bOnxV",
      "original_commit_id" : "2842e51a246b162a586941184b7694f187d7aee7",
      "original_line" : 2188,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 4,
      "pull_request_review_id" : 1946525730,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530559573/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T14:58:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530559573",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "tested ACK 2842e51a246b162a586941184b7694f187d7aee7\r\n\r\n## Standard tests\r\n\r\n- Did a code review\r\n- Configured with `--with-incompatible-bdb` and `--enable-suppress-external-warnings`\r\n- Run unit tests with `make check` and all tests pass\r\n- Run all functional tests with no extra flags and all tests pass\r\n- Run all functional tests with `--extended` and all tests pass\r\n\r\n## Manual functional test\r\n\r\nRepeated a similar manual functional testing methodology to @davidgumberg and @cbergqvist on both testnet and signet, and again the expected behavior described in this PR is confirmed. For brevity I only include the testnet examples.\r\n\r\n### Test case 1: Valid seed node\r\n\r\n- Removed the `peers.dat`, `anchors.dat` and `debug.log` to start on a clean state with no known peers.\r\n- Run `bitcoind` with the following parameters set in `bitcoin.conf` for a run with a valid seed node.\r\n\r\n```\r\ntestnet=1\r\nseednode=testnet-seed.bitcoin.jonasschnelli.ch\r\ndebug=net\r\n```\r\n\r\n<details>\r\n\r\n<summary>The seed node provided is used upfront and subsequent connections to peers follow suit</summary>\r\n\r\n```\r\n2024-03-23T13:30:08Z Bitcoin Core version v26.99.0-2842e51a246b (release build)\r\n2024-03-23T13:30:08Z Config file arg: debug=\"net\"\r\n2024-03-23T13:30:08Z Config file arg: loglevel=\"debug\"\r\n2024-03-23T13:30:08Z Config file arg: seednode=\"testnet-seed.bitcoin.jonasschnelli.ch\"\r\n2024-03-23T13:30:08Z Config file arg: testnet=\"1\"\r\n...\r\n2024-03-23T13:30:15Z net thread start\r\n2024-03-23T13:30:15Z dnsseed thread start\r\n2024-03-23T13:30:15Z opencon thread start\r\n**2024-03-23T13:30:15Z -seednode enabled. Trying the provided seeds for 30 seconds before defaulting to the dnsseeds.**\r\n2024-03-23T13:30:15Z init message: Done loading\r\n2024-03-23T13:30:15Z Progress loading mempool transactions from disk: 71% (tried 5, 2 remaining)\r\n**2024-03-23T13:30:15Z [net] trying v2 connection testnet-seed.bitcoin.jonasschnelli.ch lastseen=0.0hrs**\r\n2024-03-23T13:30:15Z addcon thread start\r\n2024-03-23T13:30:15Z msghand thread start\r\n2024-03-23T13:30:15Z Progress loading mempool transactions from disk: 85% (tried 6, 1 remaining)\r\n2024-03-23T13:30:15Z Imported mempool transactions from disk: 7 succeeded, 0 failed, 0 expired, 0 already there, 0 waiting for initial broadcast\r\n2024-03-23T13:30:15Z initload thread exit\r\n2024-03-23T13:30:15Z [net] Added connection peer=0\r\n2024-03-23T13:30:15Z [net] sending version (103 bytes) peer=0\r\n2024-03-23T13:30:15Z [net] send version message: version 70016, blocks=2582929, txrelay=1, peer=0\r\n2024-03-23T13:30:15Z [net] start sending v2 handshake to peer=0\r\n2024-03-23T13:30:15Z [net] socket closed for peer=0\r\n2024-03-23T13:30:15Z [net] disconnecting peer=0\r\n2024-03-23T13:30:15Z [net] retrying with v1 transport protocol for peer=0\r\n2024-03-23T13:30:15Z [net] Cleared nodestate for peer=0\r\n2024-03-23T13:30:16Z [net] trying v1 connection testnet-seed.bitcoin.jonasschnelli.ch lastseen=0.0hrs\r\n2024-03-23T13:30:16Z [net] Added connection peer=1\r\n2024-03-23T13:30:16Z [net] sending version (103 bytes) peer=1\r\n2024-03-23T13:30:16Z [net] send version message: version 70016, blocks=2582929, txrelay=1, peer=1\r\n2024-03-23T13:30:16Z [net] received: version (102 bytes) peer=1\r\n2024-03-23T13:30:16Z [net] sending wtxidrelay (0 bytes) peer=1\r\n2024-03-23T13:30:16Z [net] sending sendaddrv2 (0 bytes) peer=1\r\n2024-03-23T13:30:16Z [net] sending verack (0 bytes) peer=1\r\n2024-03-23T13:30:16Z [net] sending getaddr (0 bytes) peer=1\r\n2024-03-23T13:30:16Z [net] receive version message: /Satoshi:25.1.0/: version 70016, blocks=2583188, us=185.51.134.196:54427, txrelay=1, peer=1\r\n2024-03-23T13:30:16Z [net] added time data, samples 2, offset +0 (+0 minutes)\r\n2024-03-23T13:30:16Z [net] received: wtxidrelay (0 bytes) peer=1\r\n2024-03-23T13:30:16Z [net] received: sendaddrv2 (0 bytes) peer=1\r\n2024-03-23T13:30:16Z [net] received: verack (0 bytes) peer=1\r\n2024-03-23T13:30:16Z New addr-fetch v1 peer connected: version: 70016, blocks=2583188, peer=1\r\n...\r\n```\r\n\r\n</details>\r\n\r\n### Test case 2: Invalid seed node\r\n\r\n- Again, removed the `peers.dat`, `anchors.dat` and `debug.log` to start on a clean state with no known peers.\r\n- Run `bitcoind` with the following parameters set in `bitcoin.conf` for a run with an invalid seed node.\r\n\r\n```\r\ntestnet=1\r\nseednode=192.168.1.46\r\ndebug=net\r\n```\r\n\r\n<details>\r\n\r\n<summary>Connection to the seed node is given 30 sec to connect but it fails as it is invalid. Upon the expiration of this delay control is handed over to DNS seeds</summary>\r\n\r\n```\r\n2024-03-23T13:33:59Z Bitcoin Core version v26.99.0-2842e51a246b (release build)\r\n...\r\n2024-03-23T13:33:59Z Config file arg: debug=\"net\"\r\n2024-03-23T13:33:59Z Config file arg: loglevel=\"debug\"\r\n2024-03-23T13:33:59Z Config file arg: seednode=\"192.168.1.46\"\r\n2024-03-23T13:33:59Z Config file arg: testnet=\"1\"\r\n...\r\n2024-03-23T13:34:06Z net thread start\r\n2024-03-23T13:34:06Z addcon thread start\r\n2024-03-23T13:34:06Z dnsseed thread start\r\n2024-03-23T13:34:06Z opencon thread start\r\n2024-03-23T13:34:06Z init message: Done loading\r\n2024-03-23T13:34:06Z -seednode enabled. Trying the provided seeds for 30 seconds before defaulting to the dnsseeds.\r\n2024-03-23T13:34:06Z [net] trying v2 connection 192.168.1.46 lastseen=0.0hrs\r\n2024-03-23T13:34:06Z msghand thread start\r\n2024-03-23T13:34:06Z [net] connect() to 192.168.1.46:18333 failed after wait: Connection refused (61)\r\n...\r\n...           ***  the process waits for 30s until handing over to DNS seed ***\r\n...           ***  as is evident by the previous and next timestamps     ***\r\n...\r\n2024-03-23T13:34:36Z Couldn't connect to enough peers via seed nodes. Handing fetch logic to the DNS seeds.\r\n...\r\n2024-03-23T13:34:36Z Loading addresses from DNS seed testnet-seed.bitcoin.jonasschnelli.ch.\r\n2024-03-23T13:34:36Z Loading addresses from DNS seed testnet-seed.bluematt.me.\r\n2024-03-23T13:34:36Z Loading addresses from DNS seed seed.testnet.bitcoin.sprovoost.nl.\r\n2024-03-23T13:34:36Z Loading addresses from DNS seed seed.tbtc.petertodd.net.\r\n2024-03-23T13:34:36Z 46 addresses found from DNS seeds\r\n2024-03-23T13:34:36Z dnsseed thread exit\r\n...\r\n```\r\n\r\n</details>",
      "created_at" : "2024-03-23T17:13:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-2016551125",
      "id" : 2016551125,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII5854MiDV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2016551125/reactions"
      },
      "updated_at" : "2024-03-23T17:13:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2016551125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/11520757?v=4",
         "events_url" : "https://api.github.com/users/itornaza/events{/privacy}",
         "followers_url" : "https://api.github.com/users/itornaza/followers",
         "following_url" : "https://api.github.com/users/itornaza/following{/other_user}",
         "gists_url" : "https://api.github.com/users/itornaza/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/itornaza",
         "id" : 11520757,
         "login" : "itornaza",
         "node_id" : "MDQ6VXNlcjExNTIwNzU3",
         "organizations_url" : "https://api.github.com/users/itornaza/orgs",
         "received_events_url" : "https://api.github.com/users/itornaza/received_events",
         "repos_url" : "https://api.github.com/users/itornaza/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/itornaza/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/itornaza/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/itornaza"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1543537977"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543537977"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> I'd like to hear your thoughts on this @mzumsande\r\n\r\nI think it doesn't really make sense to try and improve the user experience of `-maxconnections=1` - doing that is stupid and dangerous, it's basically begging to be eclipsed. If someone wants just one peer they should use `-connect` to at least pick one that they trust. It has been suggested before to disable a very low `-maxconnections` or at least print out a big warning.\r\n",
      "commit_id" : "2842e51a246b162a586941184b7694f187d7aee7",
      "created_at" : "2024-03-28T19:33:38Z",
      "diff_hunk" : "@@ -2185,11 +2185,36 @@ void CConnman::WakeMessageHandler()\n \n void CConnman::ThreadDNSAddressSeed()\n {\n+    constexpr int TARGET_OUTBOUND_CONNECTIONS = 2;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#discussion_r1543537977",
      "id" : 1543537977,
      "in_reply_to_id" : 1529316003,
      "line" : 2188,
      "node_id" : "PRRC_kwDOABII585cAIU5",
      "original_commit_id" : "2842e51a246b162a586941184b7694f187d7aee7",
      "original_line" : 2188,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 4,
      "pull_request_review_id" : 1967105602,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28016",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543537977/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-28T19:38:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543537977",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I wonder if it wouldn't be simpler to just disable dns seeds in InitParameterInteraction if `-seednode` was specified:\r\n\r\nMy main use case for `-seenode` would beÂ as a backup option to use if I thought that there was something wrong with the dns seeds,Â e.g. if I thought they might be compromised or not working. In that case, having the DNS seeds as a backup option for seednode wouldn't really make sense: I'd rather not find any peers and be able to manually select another seednode if the `-seednode` peer I specified wasn't available.\r\n\r\nIn general, results from working dns seeds will be of better quality (in terms of percentage of peers you can actually connect to), because those specifically return peers that were reachable during the last minutes / hours, whereas `GETADDR` / `ADDR` does not filter for that.\r\n\r\nI'm not sure about other people's use case though, so I wonder if there is a common use case for DNS seeds being backup to `-seednode`?",
      "created_at" : "2024-03-28T19:38:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-2025973702",
      "id" : 2025973702,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28016",
      "node_id" : "IC_kwDOABII5854wefG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2025973702/reactions"
      },
      "updated_at" : "2024-03-28T19:38:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2025973702",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   }
]
