[
   {
      "author_association" : "OWNER",
      "body" : "Concept ACK - haven't reviewed yet but this looks like a lot of changes for just an additional input shuffle step?",
      "created_at" : "2018-03-15T18:56:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373486222",
      "id" : 373486222,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12699",
      "updated_at" : "2018-03-15T19:07:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/373486222",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok, I can make this smaller. ~~Just realized that the inner-use of the inputs doesn't actually require proper ordering for transaction size estimation, so it should just be a single shuffle before signing.~~\r\n\r\nA bit annoying due to inner-loop behavior, but I'll see what I can do.",
      "created_at" : "2018-03-15T19:00:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373487510",
      "id" : 373487510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12699",
      "updated_at" : "2018-03-15T19:03:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/373487510",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Related discussion: https://botbot.me/freenode/bitcoin-core-dev/msg/97851598/",
      "created_at" : "2018-03-15T19:01:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373487917",
      "id" : 373487917,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12699",
      "updated_at" : "2018-03-15T19:01:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/373487917",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Maybe just use the same ordering as [BIP-69](https://github.com/bitcoin/bips/blob/master/bip-0069.mediawiki#Transaction_Inputs)?",
      "created_at" : "2018-03-15T19:04:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373488813",
      "id" : 373488813,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12699",
      "updated_at" : "2018-03-15T19:04:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/373488813",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors I'd prefer to something slightly less bad now, and converge on a standard later. I have some quibbles with BIP69, which I think are out of scope for this thread.",
      "created_at" : "2018-03-15T19:16:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373492289",
      "id" : 373492289,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12699",
      "updated_at" : "2018-03-15T19:16:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/373492289",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "TIL the Core wallet doesn't use BIP-69 (which is a separate discussion), so that does weaken the case for using it here. (and TIL coin selection function also determines the order, not just the set)\r\n\r\nSee also #12457",
      "created_at" : "2018-03-15T19:22:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373493770",
      "id" : 373493770,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12699",
      "updated_at" : "2018-03-15T19:38:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/373493770",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Smaller changeset now, had to move the final input creation further output to avoid storing shuffle ordering.",
      "created_at" : "2018-03-15T20:19:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373509731",
      "id" : 373509731,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12699",
      "updated_at" : "2018-03-15T20:19:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/373509731",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Turns out that we're ~this far away(in master) from having the input part compliant with BIP69:\r\n\r\n>struct bip69_compare {\r\n>    bool operator() (const uint256& lhs, const uint256& rhs) const\r\n>    {\r\n>        uint256 lhs_hash = rhs;\r\n>        uint256 rhs_hash = lhs;\r\n>        std::reverse(lhs_hash.begin(), lhs_hash.end());\r\n>        std::reverse(rhs_hash.begin(), rhs_hash.end());\r\n>        return rhs_hash < lhs_hash;\r\n>    }\r\n>};`\r\n\r\nThe inputs are being sorted by BE rather than LE as per the BIP.\r\n\r\nWe also currently aren't really shuffling outputs randomly(except the case of 2 outputs, 1 destination and 1 change. This is fixed by a single shuffle line. BIP69 compliance would be another comparison struct.\r\n\r\nI still prefer this changeset for the time being, due to ease of implementation and complementary nature with #12709",
      "created_at" : "2018-03-16T18:09:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373798999",
      "id" : 373798999,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12699",
      "updated_at" : "2018-03-16T18:59:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/373798999",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "BIP 69 contradicts SIGHASH_SINGLE usage, and its concerns seem unrealistic (if you use malicious closed source wallet software, you're already compromised regardless). Randomising seems fine.",
      "created_at" : "2018-03-16T21:44:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373853389",
      "id" : 373853389,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12699",
      "updated_at" : "2018-03-16T21:44:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/373853389",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/12699/commits/8712bbd6f0f643359b5e6dd090cf247bee3dd087",
      "created_at" : "2018-03-17T11:54:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-373914457",
      "id" : 373914457,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12699",
      "updated_at" : "2018-03-17T11:54:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/373914457",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6394033?v=4",
         "events_url" : "https://api.github.com/users/donaloconnor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/donaloconnor/followers",
         "following_url" : "https://api.github.com/users/donaloconnor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/donaloconnor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/donaloconnor",
         "id" : 6394033,
         "login" : "donaloconnor",
         "organizations_url" : "https://api.github.com/users/donaloconnor/orgs",
         "received_events_url" : "https://api.github.com/users/donaloconnor/received_events",
         "repos_url" : "https://api.github.com/users/donaloconnor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/donaloconnor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/donaloconnor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/donaloconnor"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased onto https://github.com/bitcoin/bitcoin/pull/12742 to avoid code churn",
      "created_at" : "2018-03-21T19:04:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-375060610",
      "id" : 375060610,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12699",
      "updated_at" : "2018-03-21T19:04:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375060610",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "utACK 2fb9c1e6681370478e24a19172ed6d78d95d50d3",
      "created_at" : "2018-03-21T23:39:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12699#issuecomment-375131022",
      "id" : 375131022,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12699",
      "updated_at" : "2018-03-21T23:39:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375131022",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
