[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2018-03-12T19:11:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#issuecomment-372429252",
      "id" : 372429252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12678",
      "updated_at" : "2018-03-12T19:11:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372429252",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild Have you submitted any of these boost m4 changes upstream?",
      "created_at" : "2018-03-13T02:25:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#issuecomment-372525259",
      "id" : 372525259,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12678",
      "updated_at" : "2018-03-13T04:40:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372525259",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'd really rather not go down this path. We can't expect to find only warning-free headers, especially with system libs that we can't control.\r\n\r\nHave you tried using ```--enable-werror``` rather than adding directly to *FLAGS? That option is there to solve exactly this issue, as well as to whitelist no-false-positive warnings. We could probably stand to be more aggressive with those.",
      "created_at" : "2018-03-13T04:39:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#issuecomment-372544817",
      "id" : 372544817,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12678",
      "updated_at" : "2018-03-13T04:39:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372544817",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@theuni But the `net_processing.h` change is OK?",
      "created_at" : "2018-03-13T06:59:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#issuecomment-372565796",
      "id" : 372565796,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12678",
      "updated_at" : "2018-03-13T06:59:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372565796",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@fanquake \r\n> Have you submitted any of these boost m4 changes upstream?\r\n\r\nNo. I noticed these files are imported from another project (boost), but saw that there are already some local mods, so decided that it may be ok to change them.\r\n\r\nAnyway, I should submit these to boost.",
      "created_at" : "2018-03-13T08:20:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#issuecomment-372582722",
      "id" : 372582722,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12678",
      "updated_at" : "2018-03-13T08:20:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372582722",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@theuni \r\n> We can't expect to find only warning-free headers, especially with system libs that we can't control.\r\n\r\nYes, that is true. But notice that in this case the warnings do not come from system headers or from headers that are outside of our control. They come from files within the bitcoin codebase: `configure.ac`, `build-aux/m4/ax_boost_chrono.m4` and `build-aux/m4/ax_boost_unit_test_framework.m4`.\r\n\r\nIf we are more relaxed during configure-time checks (e.g. no -Werror), then there is a chance that we pronounce a library which produces warnings as \"available\" and later if we build with stricter flags (e.g. -Werror), then the build itself would choke when it tries to use that library.\r\n\r\n> Have you tried using --enable-werror rather than adding directly to *FLAGS? That option is there to solve exactly this issue, as well as to whitelist no-false-positive warnings.\r\n\r\nYes, it only uses the stricter flags when compiling files from `src/` and not during the configure checks. I was upset that it only adds `-Werror=vla -Werror=thread-safety-analysis`.\r\n\r\n> We could probably stand to be more aggressive with those.\r\n\r\nYes. I would suggest to use just `-Werror` instead of `-Werror=vla -Werror=thread-safety-analysis`. That could make it fail in environments where it previously succeeded. I guess it would need more extensive testing - at least with all supported compilers, right?\r\n\r\nShould I adjust this pull request to do that - use just `-Werror`?\r\n\r\nRegardless of that, I think the changes to `configure.ac` are good and can/should go in. The changes to `build-aux/` have the issue of modifying imported source from boost and the risk of those changes being wiped away in case of re-import of a newer version (but there is a project to ditch boost altogether).\r\n\r\nHow to proceed?",
      "created_at" : "2018-03-13T09:05:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#issuecomment-372594372",
      "id" : 372594372,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12678",
      "updated_at" : "2018-03-13T09:05:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372594372",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12678#discussion_r174072853"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12678"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174072853"
         }
      },
      "author_association" : "OWNER",
      "body" : "ACK, also seen this warning.",
      "commit_id" : "af01308678aa8f619ae9336c08a2bc7c45d0b4bf",
      "created_at" : "2018-03-13T10:04:34Z",
      "diff_hunk" : "@@ -42,6 +42,8 @@ class PeerLogicValidation : public CValidationInterface, public NetEventsInterfa\n public:\n     explicit PeerLogicValidation(CConnman* connman, CScheduler &scheduler);\n \n+    virtual ~PeerLogicValidation() = default;\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#discussion_r174072853",
      "id" : 174072853,
      "original_commit_id" : "9c31753d62b2fe008130007518757d04027cf19b",
      "original_position" : 5,
      "path" : "src/net_processing.h",
      "position" : null,
      "pull_request_review_id" : 103361921,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12678",
      "updated_at" : "2018-03-13T20:00:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174072853",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@fanquake \r\n> Have you submitted any of these boost m4 changes upstream?\r\n\r\nThere you go: https://github.com/peti/autoconf-archive/pull/148",
      "created_at" : "2018-03-13T11:17:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#issuecomment-372631341",
      "id" : 372631341,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12678",
      "updated_at" : "2018-03-13T11:17:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372631341",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What about submitting the uncontroversial `PeerLogicValidation` fix as a separate PR? I've seen that warning myself and it would be nice to get rid of it :-) The m4 changes seem to require more discussion.",
      "created_at" : "2018-03-13T16:15:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#issuecomment-372723949",
      "id" : 372723949,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12678",
      "updated_at" : "2018-03-13T16:15:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372723949",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@practicalswift\r\n\r\n> What about submitting the uncontroversial PeerLogicValidation fix as a separate PR? I've seen that warning myself and it would be nice to get rid of it :-)\r\n\r\nthere you go: https://github.com/bitcoin/bitcoin/pull/12680\r\n\r\n> The m4 changes seem to require more discussion.\r\n\r\nYes. The m4 boost changes have been taken upstream, so I have changed this pull request to apply/take all changes from upstream to those two files. I guess those should now be ok, because it just updates from upstream, @theuni?\r\n\r\nIf the two changes in `configure.ac` are undesirable (`MSG_*` and `libminiupnpc` check) I could ditch them away from this pull request.\r\n\r\nUnrelated to the outcome of the above, I will consider changing `--enable-werror` to use just `-Werror` instead of `-Werror=vla -Werror=thread-safety-analysis`.\r\n\r\nCheers!",
      "created_at" : "2018-03-13T20:07:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#issuecomment-372800893",
      "id" : 372800893,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12678",
      "updated_at" : "2018-03-13T20:07:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372800893",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12678#discussion_r174688295"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12678"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174688295"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't see how this is related to Clang 7, this is checking for the visibility of a symbol. This might be needed on your version of upnp but if so that should be another PR in my opinion.",
      "commit_id" : "af01308678aa8f619ae9336c08a2bc7c45d0b4bf",
      "created_at" : "2018-03-15T06:38:45Z",
      "diff_hunk" : "@@ -771,7 +771,7 @@ dnl Check for libminiupnpc (optional)\n if test x$use_upnp != xno; then\n   AC_CHECK_HEADERS(\n     [miniupnpc/miniwget.h miniupnpc/miniupnpc.h miniupnpc/upnpcommands.h miniupnpc/upnperrors.h],\n-    [AC_CHECK_LIB([miniupnpc], [main],[MINIUPNPC_LIBS=-lminiupnpc], [have_miniupnpc=no])],\n+    [AC_CHECK_LIB([miniupnpc], [upnpDiscover], [MINIUPNPC_LIBS=-lminiupnpc], [have_miniupnpc=no])],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#discussion_r174688295",
      "id" : 174688295,
      "original_commit_id" : "af01308678aa8f619ae9336c08a2bc7c45d0b4bf",
      "original_position" : 23,
      "path" : "configure.ac",
      "position" : 23,
      "pull_request_review_id" : 104087956,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12678",
      "updated_at" : "2018-03-15T06:41:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174688295",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2734?v=4",
         "events_url" : "https://api.github.com/users/eklitzke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eklitzke/followers",
         "following_url" : "https://api.github.com/users/eklitzke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eklitzke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eklitzke",
         "id" : 2734,
         "login" : "eklitzke",
         "organizations_url" : "https://api.github.com/users/eklitzke/orgs",
         "received_events_url" : "https://api.github.com/users/eklitzke/received_events",
         "repos_url" : "https://api.github.com/users/eklitzke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eklitzke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eklitzke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12678#discussion_r174688576"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12678"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174688576"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This seems broken to me in the first place, isn't `MSG_NOSIGNAL` a preprocessor define? If so there's no need to check for it in configure.ac, we can just use `#if defined()` in `net.cpp` and `netbase.cpp`.",
      "commit_id" : "af01308678aa8f619ae9336c08a2bc7c45d0b4bf",
      "created_at" : "2018-03-15T06:40:57Z",
      "diff_hunk" : "@@ -646,15 +646,15 @@ AC_CHECK_DECLS([__builtin_clz, __builtin_clzl, __builtin_clzll])\n dnl Check for MSG_NOSIGNAL\n AC_MSG_CHECKING(for MSG_NOSIGNAL)\n AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <sys/socket.h>]],\n- [[ int f = MSG_NOSIGNAL; ]])],\n+ [[ return MSG_NOSIGNAL; ]])],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#discussion_r174688576",
      "id" : 174688576,
      "original_commit_id" : "af01308678aa8f619ae9336c08a2bc7c45d0b4bf",
      "original_position" : 5,
      "path" : "configure.ac",
      "position" : 5,
      "pull_request_review_id" : 104087956,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12678",
      "updated_at" : "2018-03-15T06:41:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174688576",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2734?v=4",
         "events_url" : "https://api.github.com/users/eklitzke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eklitzke/followers",
         "following_url" : "https://api.github.com/users/eklitzke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eklitzke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eklitzke",
         "id" : 2734,
         "login" : "eklitzke",
         "organizations_url" : "https://api.github.com/users/eklitzke/orgs",
         "received_events_url" : "https://api.github.com/users/eklitzke/received_events",
         "repos_url" : "https://api.github.com/users/eklitzke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eklitzke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eklitzke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12678#discussion_r174708596"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12678"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174708596"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The commit message of that change reads:\r\n\r\n```\r\n    Do not check for main() in libminiupnpc\r\n    \r\n    main() { main(); } causes \"infinite recursion\" compilation warning\r\n    which with -Werror fails the check.\r\n```\r\n\r\nMaybe that is not clear enough, let me elaborate: `AC_CHECK_LIB([lib], [func], ...)` generates a test program like `main() { func(); ... }`  and tries to link it with `-llib`. The idea being that if `func()` is not present in `lib` it will fail to link with an undefined reference error. So the current usage leads to a test program like `main() { main(); ... }` which generates a legit compiler warning of \"infinite recursion\". At least Clang 7 emits that warning, maybe other compilers do so too.\r\n\r\nAnyway, I think checking for function `main()` in `libminiupnpc` is a misuse of `AC_CHECK_LIB` because `main()` does not exist in `libminiupnpc` and it passes because it relies on how the check is performed internally. If `AC_CHECK_LIB` starts using another method of checking if a function is present in a library (e.g. `nm(1)`) then the check may as well fail.",
      "commit_id" : "af01308678aa8f619ae9336c08a2bc7c45d0b4bf",
      "created_at" : "2018-03-15T08:40:54Z",
      "diff_hunk" : "@@ -771,7 +771,7 @@ dnl Check for libminiupnpc (optional)\n if test x$use_upnp != xno; then\n   AC_CHECK_HEADERS(\n     [miniupnpc/miniwget.h miniupnpc/miniupnpc.h miniupnpc/upnpcommands.h miniupnpc/upnperrors.h],\n-    [AC_CHECK_LIB([miniupnpc], [main],[MINIUPNPC_LIBS=-lminiupnpc], [have_miniupnpc=no])],\n+    [AC_CHECK_LIB([miniupnpc], [upnpDiscover], [MINIUPNPC_LIBS=-lminiupnpc], [have_miniupnpc=no])],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#discussion_r174708596",
      "id" : 174708596,
      "in_reply_to_id" : 174688295,
      "original_commit_id" : "af01308678aa8f619ae9336c08a2bc7c45d0b4bf",
      "original_position" : 23,
      "path" : "configure.ac",
      "position" : 23,
      "pull_request_review_id" : 104111591,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12678",
      "updated_at" : "2018-03-15T08:40:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174708596",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12678#discussion_r174711965"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12678"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174711965"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`MSG_NOSIGNAL` is a macro in my environment and maybe in lots of other environments too. So this check can be wiped away from `configure.ac` and `#ifdef MSG_NOSIGNAL` be used instead of `#ifdef HAVE_MSG_NOSIGNAL` in the source code. On my environment that will work.\r\n\r\nI guess the reason for this check in `configure.ac` is that we are not guaranteed that it will be a macro. Maybe somewhere it could be `const int MSG_NOSIGNAL = ...`?\r\n\r\nMy change intends to fix an \"unused variable\" warning, with a minimum chance of breaking something else.",
      "commit_id" : "af01308678aa8f619ae9336c08a2bc7c45d0b4bf",
      "created_at" : "2018-03-15T08:54:58Z",
      "diff_hunk" : "@@ -646,15 +646,15 @@ AC_CHECK_DECLS([__builtin_clz, __builtin_clzl, __builtin_clzll])\n dnl Check for MSG_NOSIGNAL\n AC_MSG_CHECKING(for MSG_NOSIGNAL)\n AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <sys/socket.h>]],\n- [[ int f = MSG_NOSIGNAL; ]])],\n+ [[ return MSG_NOSIGNAL; ]])],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#discussion_r174711965",
      "id" : 174711965,
      "in_reply_to_id" : 174688576,
      "original_commit_id" : "af01308678aa8f619ae9336c08a2bc7c45d0b4bf",
      "original_position" : 5,
      "path" : "configure.ac",
      "position" : 5,
      "pull_request_review_id" : 104115683,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12678",
      "updated_at" : "2018-03-15T08:54:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174711965",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12678#discussion_r174776534"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12678"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174776534"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I believe all of these options are required to be macros by the standard (precisely for reasons like this). Also note that `const int FOO = 1` and `#define FOO 1` are not the same, using a const value is strictly worse as it requires declaring an extern value that gets storage space allocated in the program. So there's no reason an implementation would ever do things that way.\r\n\r\nThe problem with keeping logic like this \"just in case\" is that these `AC_COMPILE_IFELSE` checks are relatively expensive, so we should only be using them for features that actually require compilation.",
      "commit_id" : "af01308678aa8f619ae9336c08a2bc7c45d0b4bf",
      "created_at" : "2018-03-15T13:15:05Z",
      "diff_hunk" : "@@ -646,15 +646,15 @@ AC_CHECK_DECLS([__builtin_clz, __builtin_clzl, __builtin_clzll])\n dnl Check for MSG_NOSIGNAL\n AC_MSG_CHECKING(for MSG_NOSIGNAL)\n AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <sys/socket.h>]],\n- [[ int f = MSG_NOSIGNAL; ]])],\n+ [[ return MSG_NOSIGNAL; ]])],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#discussion_r174776534",
      "id" : 174776534,
      "in_reply_to_id" : 174688576,
      "original_commit_id" : "af01308678aa8f619ae9336c08a2bc7c45d0b4bf",
      "original_position" : 5,
      "path" : "configure.ac",
      "position" : 5,
      "pull_request_review_id" : 104194156,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12678",
      "updated_at" : "2018-03-15T13:15:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174776534",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2734?v=4",
         "events_url" : "https://api.github.com/users/eklitzke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eklitzke/followers",
         "following_url" : "https://api.github.com/users/eklitzke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eklitzke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eklitzke",
         "id" : 2734,
         "login" : "eklitzke",
         "organizations_url" : "https://api.github.com/users/eklitzke/orgs",
         "received_events_url" : "https://api.github.com/users/eklitzke/received_events",
         "repos_url" : "https://api.github.com/users/eklitzke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eklitzke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eklitzke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12678#discussion_r174776775"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12678"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174776775"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That makes sense, thanks for clarifying.",
      "commit_id" : "af01308678aa8f619ae9336c08a2bc7c45d0b4bf",
      "created_at" : "2018-03-15T13:16:01Z",
      "diff_hunk" : "@@ -771,7 +771,7 @@ dnl Check for libminiupnpc (optional)\n if test x$use_upnp != xno; then\n   AC_CHECK_HEADERS(\n     [miniupnpc/miniwget.h miniupnpc/miniupnpc.h miniupnpc/upnpcommands.h miniupnpc/upnperrors.h],\n-    [AC_CHECK_LIB([miniupnpc], [main],[MINIUPNPC_LIBS=-lminiupnpc], [have_miniupnpc=no])],\n+    [AC_CHECK_LIB([miniupnpc], [upnpDiscover], [MINIUPNPC_LIBS=-lminiupnpc], [have_miniupnpc=no])],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12678#discussion_r174776775",
      "id" : 174776775,
      "in_reply_to_id" : 174688295,
      "original_commit_id" : "af01308678aa8f619ae9336c08a2bc7c45d0b4bf",
      "original_position" : 23,
      "path" : "configure.ac",
      "position" : 23,
      "pull_request_review_id" : 104194452,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12678",
      "updated_at" : "2018-03-15T13:16:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/174776775",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2734?v=4",
         "events_url" : "https://api.github.com/users/eklitzke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eklitzke/followers",
         "following_url" : "https://api.github.com/users/eklitzke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eklitzke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eklitzke",
         "id" : 2734,
         "login" : "eklitzke",
         "organizations_url" : "https://api.github.com/users/eklitzke/orgs",
         "received_events_url" : "https://api.github.com/users/eklitzke/received_events",
         "repos_url" : "https://api.github.com/users/eklitzke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eklitzke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eklitzke"
      }
   }
]
