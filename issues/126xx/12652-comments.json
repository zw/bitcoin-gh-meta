[
   {
      "author_association" : "MEMBER",
      "body" : "I guess you need to fix the `interface_bitcoin_cli.py` test.",
      "created_at" : "2018-03-09T06:33:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12652#issuecomment-371726383",
      "id" : 371726383,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12652",
      "updated_at" : "2018-03-09T06:33:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371726383",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonasschnelli Oh, thanks! Fixed. Please re-review :-)",
      "created_at" : "2018-03-09T14:54:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12652#issuecomment-371834916",
      "id" : 371834916,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12652",
      "updated_at" : "2018-03-09T14:54:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371834916",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/12652/commits/de04fde534997f15235ded46912806d47c615c23",
      "created_at" : "2018-03-09T17:40:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12652#issuecomment-371886237",
      "id" : 371886237,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12652",
      "updated_at" : "2018-03-09T17:40:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371886237",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK de04fde",
      "created_at" : "2018-03-09T17:54:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12652#issuecomment-371891731",
      "id" : 371891731,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12652",
      "updated_at" : "2018-03-09T17:54:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371891731",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/120117?v=4",
         "events_url" : "https://api.github.com/users/cdecker/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cdecker/followers",
         "following_url" : "https://api.github.com/users/cdecker/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cdecker/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cdecker",
         "id" : 120117,
         "login" : "cdecker",
         "organizations_url" : "https://api.github.com/users/cdecker/orgs",
         "received_events_url" : "https://api.github.com/users/cdecker/received_events",
         "repos_url" : "https://api.github.com/users/cdecker/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cdecker/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cdecker/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cdecker"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Concept ACK.\r\n\r\nHowever I remember making the code like this to avoid certain edge cases around the authentication credentials and connectability.\r\n\r\nCan we please add tests for this? This logic was already complicated, and this makes it even more complicated.\r\n",
      "created_at" : "2018-03-10T12:31:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12652#issuecomment-372026306",
      "id" : 372026306,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12652",
      "updated_at" : "2018-03-10T12:33:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372026306",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12652#discussion_r173671232"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12652"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173671232"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Mind to add a test for this?",
      "commit_id" : "de04fde534997f15235ded46912806d47c615c23",
      "created_at" : "2018-03-11T21:52:09Z",
      "diff_hunk" : "@@ -358,11 +356,21 @@ static UniValue CallRPC(BaseRequestHandler *rh, const std::string& strMethod, co\n \n     event_base_dispatch(base.get());\n \n-    if (response.status == 0)\n-        throw CConnectionFailed(strprintf(\"couldn't connect to server: %s (code %d)\\n(make sure server is running and you are connecting to the correct RPC port)\", http_errorstring(response.error), response.error));\n-    else if (response.status == HTTP_UNAUTHORIZED)\n-        throw std::runtime_error(\"incorrect rpcuser or rpcpassword (authorization failed)\");\n-    else if (response.status >= 400 && response.status != HTTP_BAD_REQUEST && response.status != HTTP_NOT_FOUND && response.status != HTTP_INTERNAL_SERVER_ERROR)\n+    if (response.status == 0) {\n+        std::string responseErrorMessage;\n+        if (response.error != -1) {\n+            responseErrorMessage = strprintf(\" (error code %d - \\\"%s\\\")\", response.error, http_errorstring(response.error));\n+        }\n+        throw CConnectionFailed(strprintf(\"Could not connect to the server %s:%d%s\\n\\nMake sure the bitcoind server is running and that you are connecting to the correct RPC port.\", host, port, responseErrorMessage));\n+    } else if (response.status == HTTP_UNAUTHORIZED) {\n+        if (failedToGetAuthCookie) {\n+            throw std::runtime_error(strprintf(\n+                _(\"Could not locate RPC credentials. No authentication cookie could be found, and RPC password is not set.  See -rpcpassword and -stdinrpcpass.  Configuration file: (%s)\"),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12652#discussion_r173671232",
      "id" : 173671232,
      "original_commit_id" : "de04fde534997f15235ded46912806d47c615c23",
      "original_position" : 34,
      "path" : "src/bitcoin-cli.cpp",
      "position" : 34,
      "pull_request_review_id" : 102897802,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12652",
      "updated_at" : "2018-03-11T21:52:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173671232",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12652#discussion_r173671280"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12652"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173671280"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same here. Should come with a test.",
      "commit_id" : "de04fde534997f15235ded46912806d47c615c23",
      "created_at" : "2018-03-11T21:53:26Z",
      "diff_hunk" : "@@ -358,11 +356,21 @@ static UniValue CallRPC(BaseRequestHandler *rh, const std::string& strMethod, co\n \n     event_base_dispatch(base.get());\n \n-    if (response.status == 0)\n-        throw CConnectionFailed(strprintf(\"couldn't connect to server: %s (code %d)\\n(make sure server is running and you are connecting to the correct RPC port)\", http_errorstring(response.error), response.error));\n-    else if (response.status == HTTP_UNAUTHORIZED)\n-        throw std::runtime_error(\"incorrect rpcuser or rpcpassword (authorization failed)\");\n-    else if (response.status >= 400 && response.status != HTTP_BAD_REQUEST && response.status != HTTP_NOT_FOUND && response.status != HTTP_INTERNAL_SERVER_ERROR)\n+    if (response.status == 0) {\n+        std::string responseErrorMessage;\n+        if (response.error != -1) {\n+            responseErrorMessage = strprintf(\" (error code %d - \\\"%s\\\")\", response.error, http_errorstring(response.error));\n+        }\n+        throw CConnectionFailed(strprintf(\"Could not connect to the server %s:%d%s\\n\\nMake sure the bitcoind server is running and that you are connecting to the correct RPC port.\", host, port, responseErrorMessage));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12652#discussion_r173671280",
      "id" : 173671280,
      "original_commit_id" : "de04fde534997f15235ded46912806d47c615c23",
      "original_position" : 30,
      "path" : "src/bitcoin-cli.cpp",
      "position" : 30,
      "pull_request_review_id" : 102897849,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12652",
      "updated_at" : "2018-03-11T21:53:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173671280",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
