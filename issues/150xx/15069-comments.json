[
   {
      "author_association" : "MEMBER",
      "body" : "/cc #12804",
      "created_at" : "2018-12-31T22:53:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15069#issuecomment-450697068",
      "id" : 450697068,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15069",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MDY5NzA2OA==",
      "updated_at" : "2018-12-31T22:53:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/450697068",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15069#discussion_r244635490"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15069"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/244635490"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Instead of `and`, could split them into separate lines with separate `wait_until`s to see what condition actually fails (if one does)?",
      "commit_id" : "de23739b22fefd7a409f6cb0a4d6128c176fa229",
      "created_at" : "2019-01-01T12:07:27Z",
      "diff_hunk" : "@@ -62,8 +62,11 @@ def _test_getnettotals(self):\n         # the bytes sent/received should change\n         # note ping and pong are 32 bytes each\n         self.nodes[0].ping()\n-        wait_until(lambda: (self.nodes[0].getnettotals()['totalbytessent'] >= net_totals_after['totalbytessent'] + 32 * 2), timeout=1)\n-        wait_until(lambda: (self.nodes[0].getnettotals()['totalbytesrecv'] >= net_totals_after['totalbytesrecv'] + 32 * 2), timeout=1)\n+        wait_until(lambda: (\n+            self.nodes[0].getnettotals()['totalbytessent'] >= net_totals_after['totalbytessent'] + 32 * 2\n+            and self.nodes[0].getnettotals()['totalbytesrecv'] >= net_totals_after['totalbytesrecv'] + 32 * 2\n+            and ('pong' in self.nodes[0].getpeerinfo()[0]['bytesrecv_per_msg'])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15069#discussion_r244635490",
      "id" : 244635490,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NDYzNTQ5MA==",
      "original_commit_id" : "39130dedcdd66390b7d8bf28fb1eec8581ba67f0",
      "original_position" : 9,
      "path" : "test/functional/rpc_net.py",
      "position" : null,
      "pull_request_review_id" : 188554801,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15069",
      "updated_at" : "2019-01-01T21:13:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/244635490",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15069#discussion_r244647331"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15069"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/244647331"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah, right, didn't consider that. Fixed.",
      "commit_id" : "de23739b22fefd7a409f6cb0a4d6128c176fa229",
      "created_at" : "2019-01-01T20:50:17Z",
      "diff_hunk" : "@@ -62,8 +62,11 @@ def _test_getnettotals(self):\n         # the bytes sent/received should change\n         # note ping and pong are 32 bytes each\n         self.nodes[0].ping()\n-        wait_until(lambda: (self.nodes[0].getnettotals()['totalbytessent'] >= net_totals_after['totalbytessent'] + 32 * 2), timeout=1)\n-        wait_until(lambda: (self.nodes[0].getnettotals()['totalbytesrecv'] >= net_totals_after['totalbytesrecv'] + 32 * 2), timeout=1)\n+        wait_until(lambda: (\n+            self.nodes[0].getnettotals()['totalbytessent'] >= net_totals_after['totalbytessent'] + 32 * 2\n+            and self.nodes[0].getnettotals()['totalbytesrecv'] >= net_totals_after['totalbytesrecv'] + 32 * 2\n+            and ('pong' in self.nodes[0].getpeerinfo()[0]['bytesrecv_per_msg'])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15069#discussion_r244647331",
      "id" : 244647331,
      "in_reply_to_id" : 244635490,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NDY0NzMzMQ==",
      "original_commit_id" : "39130dedcdd66390b7d8bf28fb1eec8581ba67f0",
      "original_position" : 9,
      "path" : "test/functional/rpc_net.py",
      "position" : null,
      "pull_request_review_id" : 188567411,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15069",
      "updated_at" : "2019-01-01T21:13:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/244647331",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke makes sense to me to show them, given its an rpc command / programmatic interface as well as a human one. zero-values have been excluded since introduction in ca188c629e. /cc @jonasschnelli ",
      "created_at" : "2019-01-01T20:56:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15069#issuecomment-450756342",
      "id" : 450756342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15069",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MDc1NjM0Mg==",
      "updated_at" : "2019-01-01T20:58:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/450756342",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Need help understanding how the ingress works\n\n\nOn Mon, Dec 31, 2018, 4:53 PM Ben Woosley <notifications@github.com wrote:\n\n> Prior to this change, the test fails with KeyError if pong has\n> a zero value at the time this is called, as getpeerinfo's\n> bytesrecv_per_msg result excludes zero-values.\n>\n> Combined these to a single wait_until as well, which will be a bit more\n> forgiving re the timeout while still enforcing the same 2 seconds\n> overall.\n>\n> https://ci.appveyor.com/project/DrahtBot/bitcoin/builds/21310881#L62\n> ------------------------------\n> You can view, comment on, or merge this pull request online at:\n>\n>   https://github.com/bitcoin/bitcoin/pull/15069\n> Commit Summary\n>\n>    - test: Fix rpc_net.py \"pong\" race condition\n>\n> File Changes\n>\n>    - *M* test/functional/rpc_net.py\n>    <https://github.com/bitcoin/bitcoin/pull/15069/files#diff-0> (7)\n>\n> Patch Links:\n>\n>    - https://github.com/bitcoin/bitcoin/pull/15069.patch\n>    - https://github.com/bitcoin/bitcoin/pull/15069.diff\n>\n> Ã¢ÂÂ\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/15069>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AeLJKZxgnYN1xUPTnDacy3Ik8zwLPYzpks5u-pVhgaJpZM4ZlsVy>\n> .\n>\n",
      "created_at" : "2019-01-01T21:04:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15069#issuecomment-450756783",
      "id" : 450756783,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15069",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MDc1Njc4Mw==",
      "updated_at" : "2019-01-01T21:04:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/450756783",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/31639849?v=4",
         "events_url" : "https://api.github.com/users/Horus33/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Horus33/followers",
         "following_url" : "https://api.github.com/users/Horus33/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Horus33/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Horus33",
         "id" : 31639849,
         "login" : "Horus33",
         "node_id" : "MDQ6VXNlcjMxNjM5ODQ5",
         "organizations_url" : "https://api.github.com/users/Horus33/orgs",
         "received_events_url" : "https://api.github.com/users/Horus33/received_events",
         "repos_url" : "https://api.github.com/users/Horus33/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Horus33/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Horus33/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Horus33"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "On reflection, seems the before case is the more likely culprit, which calls for using `get` rather than regular key access, to guard against the 0 case.",
      "created_at" : "2019-01-01T21:14:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15069#issuecomment-450757333",
      "id" : 450757333,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15069",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MDc1NzMzMw==",
      "updated_at" : "2019-01-01T21:14:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/450757333",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/15069/commits/de23739b22fefd7a409f6cb0a4d6128c176fa229, I prefer this solution to  #15077",
      "created_at" : "2019-01-02T09:32:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15069#issuecomment-450818724",
      "id" : 450818724,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15069",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MDgxODcyNA==",
      "updated_at" : "2019-01-02T09:32:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/450818724",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
