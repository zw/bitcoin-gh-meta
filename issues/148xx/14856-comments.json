[
   {
      "author_association" : "MEMBER",
      "body" : "Looks like not all of the new commits are compiling",
      "created_at" : "2018-12-03T16:49:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-443781122",
      "id" : 443781122,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0Mzc4MTEyMg==",
      "updated_at" : "2018-12-03T16:49:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/443781122",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15976](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15976.html) (refactor: move methods under CChainState (pt. 1) by jamesob)\n* [#15759](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15759.html) ([p2p] Add 2 outbound blocks-only connections by sdaftuar)\n* [#15651](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15651.html) (torcontrol: Use the default/standard network port for Tor hidden services, even if the internal port is set differently by luke-jr)\n* [#15558](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15558.html) (Don't query all DNS seeds at once by sipa)\n* [#15421](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15421.html) (torcontrol: Launch a private Tor instance when not already running by luke-jr)\n* [#15112](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15112.html) (build: Optionally enable -Wzero-as-null-pointer-constant by Empact)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-12-03T17:04:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-443786672",
      "id" : 443786672,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0Mzc4NjY3Mg==",
      "updated_at" : "2019-05-09T00:12:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/443786672",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r238392304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/238392304"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why is this needed?",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2018-12-03T18:51:40Z",
      "diff_hunk" : "@@ -20,6 +20,7 @@\n #include <boost/algorithm/string/split.hpp>\n #include <boost/algorithm/string/classification.hpp>\n #include <boost/algorithm/string/replace.hpp>\n+#include <boost/thread.hpp>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r238392304",
      "id" : 238392304,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzODM5MjMwNA==",
      "original_commit_id" : "b9fa99f650e8af6039a5c40b8a2ae4ebebd27787",
      "original_position" : 4,
      "path" : "src/torcontrol.cpp",
      "position" : null,
      "pull_request_review_id" : 180922975,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/238392304",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r238508382"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/238508382"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed. Thanks for spotting it!",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2018-12-04T02:11:08Z",
      "diff_hunk" : "@@ -20,6 +20,7 @@\n #include <boost/algorithm/string/split.hpp>\n #include <boost/algorithm/string/classification.hpp>\n #include <boost/algorithm/string/replace.hpp>\n+#include <boost/thread.hpp>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r238508382",
      "id" : 238508382,
      "in_reply_to_id" : 238392304,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzODUwODM4Mg==",
      "original_commit_id" : "b9fa99f650e8af6039a5c40b8a2ae4ebebd27787",
      "original_position" : 4,
      "path" : "src/torcontrol.cpp",
      "position" : null,
      "pull_request_review_id" : 181065944,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/238508382",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r238615455"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/238615455"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: how about check against <1 values here? `src/qt/optionsdialog.cpp` does so:\r\nhttps://github.com/bitcoin/bitcoin/blob/42653570373dad1fb431de2889764297d59ebcc0/src/qt/optionsdialog.cpp#L59",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2018-12-04T10:59:31Z",
      "diff_hunk" : "@@ -1363,9 +1363,16 @@ bool AppInitMain(InitInterfaces& interfaces)\n     fDiscover = gArgs.GetBoolArg(\"-discover\", true);\n     fRelayTxes = !gArgs.GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY);\n \n+    int listen_port = chainparams.GetDefaultPort();\n+    assert(listen_port <= 0xffff);\n+    listen_port = gArgs.GetArg(\"-port\", listen_port);\n+    if (listen_port > 0xffff) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r238615455",
      "id" : 238615455,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzODYxNTQ1NQ==",
      "original_commit_id" : "389d7e36f48cfab823c15d22f0fb13a6e356f04e",
      "original_position" : 7,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 181197993,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/238615455",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2018-12-04T11:00:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-444060571",
      "id" : 444060571,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NDA2MDU3MQ==",
      "updated_at" : "2018-12-04T11:00:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/444060571",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2018-12-04T12:45:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-444087523",
      "id" : 444087523,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NDA4NzUyMw==",
      "updated_at" : "2018-12-04T12:45:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/444087523",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r239593516"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/239593516"
         }
      },
      "author_association" : "MEMBER",
      "body" : "+1. Good catch.",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2018-12-06T19:58:17Z",
      "diff_hunk" : "@@ -1363,9 +1363,16 @@ bool AppInitMain(InitInterfaces& interfaces)\n     fDiscover = gArgs.GetBoolArg(\"-discover\", true);\n     fRelayTxes = !gArgs.GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY);\n \n+    int listen_port = chainparams.GetDefaultPort();\n+    assert(listen_port <= 0xffff);\n+    listen_port = gArgs.GetArg(\"-port\", listen_port);\n+    if (listen_port > 0xffff) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r239593516",
      "id" : 239593516,
      "in_reply_to_id" : 238615455,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzOTU5MzUxNg==",
      "original_commit_id" : "389d7e36f48cfab823c15d22f0fb13a6e356f04e",
      "original_position" : 7,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 182421314,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/239593516",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r239594844"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/239594844"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Format string should be %i.",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2018-12-06T20:02:16Z",
      "diff_hunk" : "@@ -1363,6 +1363,13 @@ bool AppInitMain(InitInterfaces& interfaces)\n     fDiscover = gArgs.GetBoolArg(\"-discover\", true);\n     fRelayTxes = !gArgs.GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY);\n \n+    int listen_port = chainparams.GetDefaultPort();\n+    assert(listen_port <= 0xffff);\n+    listen_port = gArgs.GetArg(\"-port\", listen_port);\n+    if (listen_port > 0xffff) {\n+        return InitError(strprintf(_(\"Invalid port specified in -port: '%s'\"), listen_port));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r239594844",
      "id" : 239594844,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzOTU5NDg0NA==",
      "original_commit_id" : "1f3a5b4282088360390ccf3545f254d3235ab6fd",
      "original_position" : 8,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 182421314,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/239594844",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK after rebasing and fixing my bugs :p",
      "created_at" : "2018-12-06T20:14:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-445014410",
      "id" : 445014410,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NTAxNDQxMA==",
      "updated_at" : "2018-12-06T20:14:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/445014410",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased, fixed bugs, and added port check!",
      "created_at" : "2019-01-03T12:57:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-451135622",
      "id" : 451135622,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MTEzNTYyMg==",
      "updated_at" : "2019-01-03T12:57:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/451135622",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r244991445"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/244991445"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@Empact Any reason why port 0 isn't valid?",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-01-03T12:57:44Z",
      "diff_hunk" : "@@ -1363,9 +1363,16 @@ bool AppInitMain(InitInterfaces& interfaces)\n     fDiscover = gArgs.GetBoolArg(\"-discover\", true);\n     fRelayTxes = !gArgs.GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY);\n \n+    int listen_port = chainparams.GetDefaultPort();\n+    assert(listen_port <= 0xffff);\n+    listen_port = gArgs.GetArg(\"-port\", listen_port);\n+    if (listen_port > 0xffff) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r244991445",
      "id" : 244991445,
      "in_reply_to_id" : 238615455,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NDk5MTQ0NQ==",
      "original_commit_id" : "389d7e36f48cfab823c15d22f0fb13a6e356f04e",
      "original_position" : 7,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 189000578,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/244991445",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "If anyone can help with the [error here](https://travis-ci.org/bitcoin/bitcoin/jobs/474841712#L2769) it would be much appreciated. I'm not sure what the proper way is to pass `listen_port` to the `qt` modules so that it can be specified here.",
      "created_at" : "2019-01-03T16:40:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-451200652",
      "id" : 451200652,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MTIwMDY1Mg==",
      "updated_at" : "2019-01-03T16:40:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/451200652",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> If anyone can help with the error here it would be much appreciated.\r\n\r\nFrom https://travis-ci.org/bitcoin/bitcoin/jobs/474841712#L2792\r\n\r\n```\r\nqt/optionsmodel.cpp: In member function Ã¢ÂÂvirtual bool OptionsModel::setData(const QModelIndex&, const QVariant&, int)Ã¢ÂÂ:\r\nqt/optionsmodel.cpp:334:42: error: no matching function for call to Ã¢ÂÂinterfaces::Node::mapPort(bool)Ã¢ÂÂ\r\n             m_node.mapPort(value.toBool());\r\n```\r\n\r\nLots of ways to fix this error. I'd probably bring back the deleted `GetListenPort()` function (and nice `cnode_listen_port` test) and call it two places: 1) In `AppInitMain` to set `listen_port` local variable. 2) In NodeImpl::mapPort method to get rid of `uint16_t port` argument.\r\n\r\nAnother option would be to store listen_port permanently somewhere, like a global variable, or in some network class as a member. But you might not want to do that since this code is going in opposite direction. Also, it is pretty common in bitcoin code to parse command line arguments as needed instead of storing them.",
      "created_at" : "2019-01-03T17:26:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-451215446",
      "id" : 451215446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MTIxNTQ0Ng==",
      "updated_at" : "2019-01-03T17:26:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/451215446",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I'd probably bring back the deleted GetListenPort() function (and nice cnode_listen_port test) and call it two places: 1) In AppInitMain to set listen_port local variable. 2) In NodeImpl::mapPort method to get rid of uint16_t port argument.\r\n\r\nThat seems acceptable to me, @theuni any thoughts?",
      "created_at" : "2019-01-04T00:56:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-451325980",
      "id" : 451325980,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MTMyNTk4MA==",
      "updated_at" : "2019-01-04T00:56:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/451325980",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r246273201"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246273201"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not that I know of, for `proxyPort` it was disallowed in #1571.\r\n\r\n\"It is defined as an invalid port number.\" according to https://www.grc.com/port_0.htm\r\n\r\n> Port 0 carries special significance in network programming, particularly in the Unix OS when it comes to socket programming where the port is used for requesting system-allocated, dynamic ports. Port 0 is like a wildcard port that tells the system to find a suitable port number.\r\nhttps://www.lifewire.com/port-0-in-tcp-and-udp-818145",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-01-09T06:43:55Z",
      "diff_hunk" : "@@ -1363,9 +1363,16 @@ bool AppInitMain(InitInterfaces& interfaces)\n     fDiscover = gArgs.GetBoolArg(\"-discover\", true);\n     fRelayTxes = !gArgs.GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY);\n \n+    int listen_port = chainparams.GetDefaultPort();\n+    assert(listen_port <= 0xffff);\n+    listen_port = gArgs.GetArg(\"-port\", listen_port);\n+    if (listen_port > 0xffff) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r246273201",
      "id" : 246273201,
      "in_reply_to_id" : 238615455,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjI3MzIwMQ==",
      "original_commit_id" : "389d7e36f48cfab823c15d22f0fb13a6e356f04e",
      "original_position" : 7,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 190589497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246273201",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think I found an answer that maintains the separation here: you can pull the default listen port through `m_node` via `g_connman`. https://github.com/Empact/bitcoin/commit/3859f2aaa\r\nhttps://travis-ci.org/Empact/bitcoin/builds/477278546\r\n\r\nI also looked at adding a field for the port to the form but ran into some issues there:\r\nhttps://github.com/Empact/bitcoin/commit/77cc6218b144b3de6d9bdcd4e438a659c87adf16",
      "created_at" : "2019-01-09T08:28:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-452612061",
      "id" : 452612061,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MjYxMjA2MQ==",
      "updated_at" : "2019-01-09T10:42:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/452612061",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-01-14T14:20:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-454020537",
      "id" : 454020537,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NDAyMDUzNw==",
      "updated_at" : "2019-01-14T14:20:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/454020537",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I think I found an answer that maintains the separation here: you can pull the default listen port through `m_node` via `g_connman`. [Empact@3859f2a](https://github.com/Empact/bitcoin/commit/3859f2aaa)\r\n> [travis-ci.org/Empact/bitcoin/builds/477278546](https://travis-ci.org/Empact/bitcoin/builds/477278546)\r\n> \r\n> I also looked at adding a field for the port to the form but ran into some issues there:\r\n> [Empact@77cc621](https://github.com/Empact/bitcoin/commit/77cc6218b144b3de6d9bdcd4e438a659c87adf16)\r\n\r\nThat sounds promising! I'll try it out. Thanks for the help!",
      "created_at" : "2019-01-14T14:45:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-454028821",
      "id" : 454028821,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NDAyODgyMQ==",
      "updated_at" : "2019-01-14T14:45:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/454028821",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Many thanks to @Empact for his [suggestion above](https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-452612061), I've reorganized the commits to make things work.\r\n\r\nAs @theuni mentioned here: https://github.com/bitcoin/bitcoin/pull/14605#discussion_r238849008, a followup PR should pass `CConnman` and `Banman` into `NodeImpl`'s constructor so that we can stop using globals.",
      "created_at" : "2019-01-14T23:45:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-454207179",
      "id" : 454207179,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NDIwNzE3OQ==",
      "updated_at" : "2019-01-14T23:45:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/454207179",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased!",
      "created_at" : "2019-02-01T15:59:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-459771087",
      "id" : 459771087,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1OTc3MTA4Nw==",
      "updated_at" : "2019-02-01T15:59:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/459771087",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r253109218"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253109218"
         }
      },
      "author_association" : "MEMBER",
      "body" : "style-nit: in commit 4d0cac7be150145ec45119188458a9625f882b29\r\n\r\nAny reason to not use a lambda? It might make this easier to read.",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-02-01T16:19:22Z",
      "diff_hunk" : "@@ -1490,11 +1485,11 @@ static void ThreadMapPort()\n     }\n }\n \n-void StartMapPort()\n+void StartMapPort(uint16_t port)\n {\n     if (!g_upnp_thread.joinable()) {\n         assert(!g_upnp_interrupt);\n-        g_upnp_thread = std::thread((std::bind(&TraceThread<void (*)()>, \"upnp\", &ThreadMapPort)));\n+        g_upnp_thread = std::thread(&TraceThread<std::function<void()> >, \"upnp\", std::bind(&ThreadMapPort, port));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r253109218",
      "id" : 253109218,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MzEwOTIxOA==",
      "original_commit_id" : "4d0cac7be150145ec45119188458a9625f882b29",
      "original_position" : 43,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 199151406,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253109218",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r253109493"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253109493"
         }
      },
      "author_association" : "MEMBER",
      "body" : "style-nit: in commit 8f9062a84d01a709d9303d21f25e244a1dbd0044\r\n\r\nsame",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-02-01T16:20:10Z",
      "diff_hunk" : "@@ -752,7 +753,7 @@ void StartTorControl()\n         return;\n     }\n \n-    torControlThread = std::thread(std::bind(&TraceThread<void (*)()>, \"torcontrol\", &TorControlThread));\n+    torControlThread = std::thread(&TraceThread<std::function<void()> >, \"torcontrol\", std::bind(&TorControlThread, target, default_port));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r253109493",
      "id" : 253109493,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MzEwOTQ5Mw==",
      "original_commit_id" : "8f9062a84d01a709d9303d21f25e244a1dbd0044",
      "original_position" : 71,
      "path" : "src/torcontrol.cpp",
      "position" : null,
      "pull_request_review_id" : 199151406,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253109493",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r253185008"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253185008"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"tor: pass in Tor control port rather than using globals\" (8f9062a84d01a709d9303d21f25e244a1dbd0044)\r\n\r\nIt seems like you should `s/default_port/listen_port/` everywhere in this commit. If I understand correctly, the value starts off being called `listen_port` in `AppInitMain`, then is called `default_port` in `StartTorControl`, then is called `m_listen_port` again in `TorController`. `default_port` just seems like a seems like confusing and undescriptive name here.",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-02-01T20:12:27Z",
      "diff_hunk" : "@@ -409,7 +409,7 @@ static bool WriteBinaryFile(const fs::path &filename, const std::string &data)\n class TorController\n {\n public:\n-    TorController(struct event_base* base, const std::string& target);\n+    TorController(struct event_base* base, const std::string& target, uint16_t default_port);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r253185008",
      "id" : 253185008,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MzE4NTAwOA==",
      "original_commit_id" : "8f9062a84d01a709d9303d21f25e244a1dbd0044",
      "original_position" : 5,
      "path" : "src/torcontrol.cpp",
      "position" : null,
      "pull_request_review_id" : 199248804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253185008",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r253187338"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253187338"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"net: pass listen port into CConnman\" (dcf461abdb9ad6c769aab072b7522d1e5c189b20)\r\n\r\nThroughout this commit I'm confused why `default_listen_port` and `DefaultListenPort` are used instead of just `listen_port` and `ListenPort`. It seems like these names are referring to the actual, active listening port, not the network default port.",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-02-01T20:20:51Z",
      "diff_hunk" : "@@ -378,6 +381,8 @@ class CConnman\n     unsigned int nSendBufferMaxSize{0};\n     unsigned int nReceiveFloodSize{0};\n \n+    uint16_t m_default_listen_port;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r253187338",
      "id" : 253187338,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MzE4NzMzOA==",
      "original_commit_id" : "dcf461abdb9ad6c769aab072b7522d1e5c189b20",
      "original_position" : 28,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_review_id" : 199248804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253187338",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r253188244"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253188244"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"net: pass port into MapPort/Discover rather than using globals\" (4d0cac7be150145ec45119188458a9625f882b29)\r\n\r\nI think it instead of adding `&& g_connman` here, it would make more sense to `assert(g_connman)`, or just do nothing if `g_connman` is null. Falling back to the else condition and having a `mapPort(use_upnp=true)` trigger `StopMapPort` in this case doesn't seem like it could be helpful.",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-02-01T20:24:17Z",
      "diff_hunk" : "@@ -83,8 +83,8 @@ class NodeImpl : public Node\n     bool shutdownRequested() override { return ShutdownRequested(); }\n     void mapPort(bool use_upnp) override\n     {\n-        if (use_upnp) {\n-            StartMapPort();\n+        if (use_upnp && g_connman) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r253188244",
      "id" : 253188244,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MzE4ODI0NA==",
      "original_commit_id" : "4d0cac7be150145ec45119188458a9625f882b29",
      "original_position" : 6,
      "path" : "src/interfaces/node.cpp",
      "position" : null,
      "pull_request_review_id" : 199248804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253188244",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed concerns, @ryanofsky I went with doing nothing for when `g_connman` is null.",
      "created_at" : "2019-02-04T14:26:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-460267692",
      "id" : 460267692,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDI2NzY5Mg==",
      "updated_at" : "2019-02-04T14:26:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460267692",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r253600872"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253600872"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"net: pass listen port into CConnman\" (f2ad517e131142de1d28670d759c07bdf5466b3f)\r\n\r\nShould be `port` or `listen_port`, not `default_listen_port` as far as I can tell. There are also some other uses of `default_listen_port` in this commit that look like they should be changed.",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-02-04T19:02:43Z",
      "diff_hunk" : "@@ -159,9 +159,9 @@ static std::vector<CAddress> convertSeed6(const std::vector<SeedSpec6> &vSeedsIn\n // Otherwise, return the unroutable 0.0.0.0 but filled in with\n // the normal parameters, since the IP may be changed to a useful\n // one by discovery.\n-CAddress GetLocalAddress(const CNetAddr *paddrPeer, ServiceFlags nLocalServices)\n+CAddress GetLocalAddress(const CNetAddr *paddrPeer, ServiceFlags nLocalServices, uint16_t default_listen_port)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r253600872",
      "id" : 253600872,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MzYwMDg3Mg==",
      "original_commit_id" : "f2ad517e131142de1d28670d759c07bdf5466b3f",
      "original_position" : 5,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 199752847,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253600872",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r253606310"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253606310"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"net: pass in default outgoing port\" (f01ebc1a8f0a1e5845c90d6a156ccc05b2c366eb):\r\n\r\nI'd maybe `s/outbound_port/connect_port/` in this commit. I could be off, but  \"outbound\" to me suggests the port connected _from_ not the port connecting _to_.",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-02-04T19:17:00Z",
      "diff_hunk" : "@@ -1728,6 +1728,7 @@ bool AppInitMain(InitInterfaces& interfaces)\n     connOptions.nMaxOutboundLimit = nMaxOutboundLimit;\n     connOptions.m_peer_connect_timeout = peer_connect_timeout;\n     connOptions.m_listen_port = listen_port;\n+    connOptions.m_default_outbound_port = chainparams.GetDefaultPort();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r253606310",
      "id" : 253606310,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MzYwNjMxMA==",
      "original_commit_id" : "f01ebc1a8f0a1e5845c90d6a156ccc05b2c366eb",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 199752847,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253606310",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed comments and rebased. Thank you @ryanofsky!",
      "created_at" : "2019-02-05T17:56:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-460738353",
      "id" : 460738353,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDczODM1Mw==",
      "updated_at" : "2019-02-05T17:56:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460738353",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r254030168"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/254030168"
         }
      },
      "author_association" : "MEMBER",
      "body" : "; :eyes: ",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-02-05T20:17:37Z",
      "diff_hunk" : "@@ -1478,11 +1467,11 @@ static void ThreadMapPort()\n     }\n }\n \n-void StartMapPort()\n+void StartMapPort(uint16_t port)\n {\n     if (!g_upnp_thread.joinable()) {\n         assert(!g_upnp_interrupt);\n-        g_upnp_thread = std::thread((std::bind(&TraceThread<void (*)()>, \"upnp\", &ThreadMapPort)));\n+        g_upnp_thread = std::thread(&TraceThread<std::function<void()> >, \"upnp\", [port] { ThreadMapPort(port) });",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r254030168",
      "id" : 254030168,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1NDAzMDE2OA==",
      "original_commit_id" : "bca901843e5747b927f8642c441ef866955b07a8",
      "original_position" : 106,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 200282664,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/254030168",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed.",
      "created_at" : "2019-02-07T15:19:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-461465254",
      "id" : 461465254,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MTQ2NTI1NA==",
      "updated_at" : "2019-02-07T15:19:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/461465254",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Let's maybe add this to the high priority https://github.com/bitcoin/bitcoin/projects/8 list. It's a pretty simple change which has been around for a while and (as I understand it) is blocking work on better connman testing.",
      "created_at" : "2019-03-11T16:35:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-471618073",
      "id" : 471618073,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MTYxODA3Mw==",
      "updated_at" : "2019-03-11T16:35:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/471618073",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r264327974"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/264327974"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in commit c1595190ee6daa8f85c202e3dbdda927fc5d6067\r\n\r\nstyle-nit: Could extract into a helper `IsValidPort` or similar",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-03-11T16:51:26Z",
      "diff_hunk" : "@@ -1373,6 +1373,13 @@ bool AppInitMain(InitInterfaces& interfaces)\n     fDiscover = gArgs.GetBoolArg(\"-discover\", true);\n     fRelayTxes = !gArgs.GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY);\n \n+    int listen_port = chainparams.GetDefaultPort();\n+    assert((0 < listen_port) && (listen_port <= 0xffff));\n+    listen_port = gArgs.GetArg(\"-port\", listen_port);\n+    if ((listen_port <= 0) || (0xffff < listen_port)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r264327974",
      "id" : 264327974,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NDMyNzk3NA==",
      "original_commit_id" : "c1595190ee6daa8f85c202e3dbdda927fc5d6067",
      "original_position" : 7,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 212957629,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/264327974",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r264335837"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/264335837"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In commit 8055e8770a4f43a6381542042d5e54d1a48f54e\r\n\r\nThis seems fragile. What happens if this interface method is called before `CConnman::Start`?",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-03-11T17:08:45Z",
      "diff_hunk" : "@@ -83,8 +83,11 @@ class NodeImpl : public Node\n     bool shutdownRequested() override { return ShutdownRequested(); }\n     void mapPort(bool use_upnp) override\n     {\n+        // TODO: pass in CConnman and Banman into NodeImpl's constructor\n+        if (!g_connman) return;\n+\n         if (use_upnp) {\n-            StartMapPort();\n+            StartMapPort(g_connman->GetListenPort());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r264335837",
      "id" : 264335837,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NDMzNTgzNw==",
      "original_commit_id" : "8055e8770a4f43a6381542042d5e54d1a48f54ea",
      "original_position" : 9,
      "path" : "src/interfaces/node.cpp",
      "position" : null,
      "pull_request_review_id" : 212957629,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/264335837",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r264338286"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/264338286"
         }
      },
      "author_association" : "MEMBER",
      "body" : "style-nit: Should use `int64_t`, otherwise it might wrap with `GetArg`?\r\n\r\n```suggestion\r\n    int64_t listen_port = chainparams.GetDefaultPort();\r\n```",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-03-11T17:14:38Z",
      "diff_hunk" : "@@ -1373,9 +1373,16 @@ bool AppInitMain(InitInterfaces& interfaces)\n     fDiscover = gArgs.GetBoolArg(\"-discover\", true);\n     fRelayTxes = !gArgs.GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY);\n \n+    int listen_port = chainparams.GetDefaultPort();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r264338286",
      "id" : 264338286,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NDMzODI4Ng==",
      "original_commit_id" : "e4b08081520023d5f5c30e209a5ac2f1b45c4d1c",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 212970947,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/264338286",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r264820188"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/264820188"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "AppInitMain",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-03-12T18:19:11Z",
      "diff_hunk" : "@@ -83,8 +83,11 @@ class NodeImpl : public Node\n     bool shutdownRequested() override { return ShutdownRequested(); }\n     void mapPort(bool use_upnp) override\n     {\n+        // TODO: pass in CConnman and Banman into NodeImpl's constructor\n+        if (!g_connman) return;\n+\n         if (use_upnp) {\n-            StartMapPort();\n+            StartMapPort(g_connman->GetListenPort());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r264820188",
      "id" : 264820188,
      "in_reply_to_id" : 264335837,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NDgyMDE4OA==",
      "original_commit_id" : "8055e8770a4f43a6381542042d5e54d1a48f54ea",
      "original_position" : 9,
      "path" : "src/interfaces/node.cpp",
      "position" : null,
      "pull_request_review_id" : 213569169,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/264820188",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r264825110"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/264825110"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/14856#discussion_r264335837\r\n\r\nI agree with Marco, this is more fragile. It doesn't seem like it should be necessary to rely on connman here just to retrieve a static setting, and there isn't much in the current code organization that would guarantee connman is initialized with the right port number before this call. I think it'd be better to bring back the `GetListenPort()` function and test and call it here and `AppInitMain`. This should also make the diff a little smaller.",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-03-12T18:30:47Z",
      "diff_hunk" : "@@ -83,8 +83,11 @@ class NodeImpl : public Node\n     bool shutdownRequested() override { return ShutdownRequested(); }\n     void mapPort(bool use_upnp) override\n     {\n+        // TODO: pass in CConnman and Banman into NodeImpl's constructor\n+        if (!g_connman) return;\n+\n         if (use_upnp) {\n-            StartMapPort();\n+            StartMapPort(g_connman->GetListenPort());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r264825110",
      "id" : 264825110,
      "in_reply_to_id" : 264335837,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NDgyNTExMA==",
      "original_commit_id" : "8055e8770a4f43a6381542042d5e54d1a48f54ea",
      "original_position" : 9,
      "path" : "src/interfaces/node.cpp",
      "position" : null,
      "pull_request_review_id" : 213569169,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/264825110",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Brought back deleted `GetListenPort()` function, checks port before casting.\r\n\r\n",
      "created_at" : "2019-03-14T19:05:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-473016240",
      "id" : 473016240,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MzAxNjI0MA==",
      "updated_at" : "2019-03-14T19:05:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/473016240",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r265746735"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/265746735"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"tor: pass in Tor control port rather than using globals\" (7e314526e7c4bb5bbf0e351f92cab940158eae24)\r\n\r\nIt's not a good idea to validate user input with an assert, because it causes the program to crash suddenly and different environments to display the error in confusing ways (in stderr, system logs, or popup windows, without the full context).\r\n\r\nSimplest thing to do here would be to drop this assert, change the function return value to int64_t, and restore the error checking code in `init.cpp` where this function is called:\r\n\r\n```c++\r\nif ((listen_port <= 0) || (0xffff < listen_port)) {\r\n    return InitError(strprintf(_(\"Invalid port specified in -port: '%i'\"), listen_port));\r\n}\r\n```\r\n\r\nKeeping the other assert for `default_port` should be ok, since that value is compiled into the program, and if it is out of range it indicates there's probably a bug.",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-03-14T20:10:52Z",
      "diff_hunk" : "@@ -93,7 +93,13 @@ void CConnman::AddOneShot(const std::string& strDest)\n \n unsigned short GetListenPort()\n {\n-    return (unsigned short)(gArgs.GetArg(\"-port\", Params().GetDefaultPort()));\n+    int default_port = Params().GetDefaultPort();\n+    assert((0 < default_port) && (default_port <= UINT16_MAX));\n+    // An int that fits in uint16 always fits in int64_t\n+    int64_t listen_port = gArgs.GetArg(\"-port\", default_port);\n+    // We don't support the reserved port 0 for system-allocated dynamic ports yet.\n+    assert((0 < listen_port) && (listen_port <= UINT16_MAX));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r265746735",
      "id" : 265746735,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NTc0NjczNQ==",
      "original_commit_id" : "7e314526e7c4bb5bbf0e351f92cab940158eae24",
      "original_position" : 10,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 214738351,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-03-26T19:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/265746735",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> [15:29:49] \\<cfields> dongcarl / ryanofsky: there's a lot of history in 14856 about GetDefaultPort() that I can't quite follow. Maybe you could briefly explain why it's still needed?\r\n> [15:30:48] \\<cfields> Sorry, GetListenPort()\r\n\r\nReason for adding back `GetListenPort()` was to make GUI initialization less fragile. Querying connman for the port is less reliable than just reading the config value directly, because connman gets initialized relatively late, and querying it at the wrong time would silently return the wrong value. It also seemed nice to decouple portmapping code from connman. If you think it is better to query connman, though, that is fine with me. I actually just suggested this in response to Marco's question https://github.com/bitcoin/bitcoin/pull/14856#discussion_r264335837.",
      "created_at" : "2019-03-15T22:10:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-473456980",
      "id" : 473456980,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MzQ1Njk4MA==",
      "updated_at" : "2019-03-15T22:10:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/473456980",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re: http://www.erisian.com.au/bitcoin-core-dev/log-2019-03-15.html#l-403\r\n> [15:38:27] \\<cfields> Sure. As-is, the change seems like a lateral move at best :(\r\n\r\nI don't think this is true. Previously GetListenPort was called 4 different places: twice in network code, twice in init code. Now it is only called twice in init code and passed into network code. I think this is what you'd want under the original rationale for #11387, which was supporting multiple instantiations of network code to \"test instances against themselves.\"",
      "created_at" : "2019-03-18T16:17:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-473985470",
      "id" : 473985470,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3Mzk4NTQ3MA==",
      "updated_at" : "2019-03-18T16:17:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/473985470",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-03-18T17:02:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-474008890",
      "id" : 474008890,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3NDAwODg5MA==",
      "updated_at" : "2019-03-18T17:02:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/474008890",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Removed from high-priority for review as I need some time to think about how to structure this.",
      "created_at" : "2019-03-20T19:31:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#issuecomment-474995098",
      "id" : 474995098,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14856",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3NDk5NTA5OA==",
      "updated_at" : "2019-03-20T19:31:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/474995098",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r271595261"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/271595261"
         }
      },
      "author_association" : "MEMBER",
      "body" : "~Do you want to capture `target` and `listen_port` by reference?~",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-04-03T06:33:45Z",
      "diff_hunk" : "@@ -752,7 +753,7 @@ void StartTorControl()\n         return;\n     }\n \n-    torControlThread = std::thread(std::bind(&TraceThread<void (*)()>, \"torcontrol\", &TorControlThread));\n+    torControlThread = std::thread(&TraceThread<std::function<void()> >, \"torcontrol\", [target, listen_port] { TorControlThread(target, listen_port); });",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r271595261",
      "id" : 271595261,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3MTU5NTI2MQ==",
      "original_commit_id" : "143a8debb2df3a8e2f21e4c0135bef5ad2fc0750",
      "original_position" : 71,
      "path" : "src/torcontrol.cpp",
      "position" : 71,
      "pull_request_review_id" : 222025014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-04-05T20:12:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/271595261",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r272671389"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/272671389"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/14856#discussion_r271595261\r\n\r\n> Do you want to capture target and listen_port by reference?\r\n\r\nDefinitely not `listen_port` because it will go out of scope. Probably not `target` because it is a reference to an object this has no control over. In C++14, the better thing would be to pass `target` by value then capture-by-move. But the current code is reasonable and the simplest correct implementation for C++11.",
      "commit_id" : "4302c8ba37172ee365ed5d3dd380e3d025c91b0d",
      "created_at" : "2019-04-05T17:04:44Z",
      "diff_hunk" : "@@ -752,7 +753,7 @@ void StartTorControl()\n         return;\n     }\n \n-    torControlThread = std::thread(std::bind(&TraceThread<void (*)()>, \"torcontrol\", &TorControlThread));\n+    torControlThread = std::thread(&TraceThread<std::function<void()> >, \"torcontrol\", [target, listen_port] { TorControlThread(target, listen_port); });",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14856#discussion_r272671389",
      "id" : 272671389,
      "in_reply_to_id" : 271595261,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3MjY3MTM4OQ==",
      "original_commit_id" : "143a8debb2df3a8e2f21e4c0135bef5ad2fc0750",
      "original_position" : 71,
      "path" : "src/torcontrol.cpp",
      "position" : 71,
      "pull_request_review_id" : 223383530,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14856",
      "updated_at" : "2019-04-05T17:05:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/272671389",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
