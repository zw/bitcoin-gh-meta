[
   {
      "author_association" : "MEMBER",
      "body" : "NAK.  Network IsStandard rules prohibit multiple op_returns (https://github.com/bitcoin/bitcoin/blob/master/src/policy/policy.cpp#L135), additional bloat on the blockchain is also not desired. The inputs to this RPC are also an array, so duplicating inputs is also pretty broken.",
      "created_at" : "2018-12-06T19:07:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14888#issuecomment-444991074",
      "id" : 444991074,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14888",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NDk5MTA3NA==",
      "updated_at" : "2018-12-06T19:07:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/444991074",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@gmaxwell so maybe we should raise an error? Because actually it's producing a strange thing\r\n```\r\nbitcoin-cli createrawtransaction \"[]\" \"{\\\"data\\\":\\\"ee\\\", \\\"data\\\":\\\"ff\\\"}\"\r\n0200000000020000000000000000036a01ee0000000000000000036a01ee00000000\r\n```\r\n",
      "created_at" : "2018-12-06T19:17:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14888#issuecomment-444994824",
      "id" : 444994824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14888",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NDk5NDgyNA==",
      "updated_at" : "2018-12-06T19:17:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/444994824",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1006078?v=4",
         "events_url" : "https://api.github.com/users/isghe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/isghe/followers",
         "following_url" : "https://api.github.com/users/isghe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/isghe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/isghe",
         "id" : 1006078,
         "login" : "isghe",
         "node_id" : "MDQ6VXNlcjEwMDYwNzg=",
         "organizations_url" : "https://api.github.com/users/isghe/orgs",
         "received_events_url" : "https://api.github.com/users/isghe/received_events",
         "repos_url" : "https://api.github.com/users/isghe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/isghe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/isghe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/isghe"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@isghe you can help review by making your PR minimal:\r\n> Patchsets should always be focused. For example, a pull request could add a feature, fix a bug, or refactor code; but not a mixture.\r\nhttps://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#pull-request-philosophy",
      "created_at" : "2018-12-06T21:08:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14888#issuecomment-445030078",
      "id" : 445030078,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14888",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NTAzMDA3OA==",
      "updated_at" : "2018-12-06T21:08:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/445030078",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#14890](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14890.html) (rpc: Avoid creating non-standard raw transactions by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-12-06T21:34:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14888#issuecomment-445037612",
      "id" : 445037612,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14888",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NTAzNzYxMg==",
      "updated_at" : "2018-12-06T21:34:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/445037612",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "https://github.com/isghe/bitcoin/commits/raise-error-createrawtransaction-multi-OP_RETURN \r\njust adding on this PR\r\n```c++\r\n    const CTransaction rawTxCopy (rawTx);\r\n    std::string error;\r\n    if (!IsStandardTx (rawTxCopy, error)) {\r\n        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter combination: \" + error);\r\n    }\r\n```\r\nobtaining:\r\n```\r\n$ ./src/bitcoin-cli createrawtransaction \"[]\" \"[{\\\"mguLQ6eGCHpnmRrDwAjbPpYAHjxY6GneeQ\\\":\\\"0.1\\\"}, {\\\"data\\\":\\\"ee\\\"}, {\\\"muLYgM1L3gCzLs1bPX5cVzx3ax1f4vBcpN\\\":\\\"0.2\\\"},{\\\"data\\\":\\\"ff\\\"}]\" | xargs ./src/bitcoin-cli decoderawtransaction\r\nerror code: -8\r\nerror message:\r\nInvalid parameter combination: multi-op-return\r\n```",
      "created_at" : "2018-12-06T23:08:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14888#issuecomment-445063560",
      "id" : 445063560,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14888",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NTA2MzU2MA==",
      "updated_at" : "2018-12-06T23:08:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/445063560",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1006078?v=4",
         "events_url" : "https://api.github.com/users/isghe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/isghe/followers",
         "following_url" : "https://api.github.com/users/isghe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/isghe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/isghe",
         "id" : 1006078,
         "login" : "isghe",
         "node_id" : "MDQ6VXNlcjEwMDYwNzg=",
         "organizations_url" : "https://api.github.com/users/isghe/orgs",
         "received_events_url" : "https://api.github.com/users/isghe/received_events",
         "repos_url" : "https://api.github.com/users/isghe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/isghe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/isghe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/isghe"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "5987b7cadd15cd1b524fec430868ee0c174f06da makes sense to me, independent of this issue. Calls for another PR IMO.",
      "created_at" : "2018-12-06T23:23:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14888#issuecomment-445066983",
      "id" : 445066983,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14888",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NTA2Njk4Mw==",
      "updated_at" : "2018-12-06T23:23:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/445066983",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@Empact my idea, is that `createrawtransaction` should check if a transaction is standard or not, just delegating to `IsStandardTx` function. If not, we are spreading the rules in the source code, and  doesn't sound good. At this point I think it would be better to create a PR removing hard-coded rules written in `createrawtransaction`, delegating the all things to `IsStandardTx`. I'll work on it, in the weekend.",
      "created_at" : "2018-12-06T23:42:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14888#issuecomment-445071021",
      "id" : 445071021,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14888",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NTA3MTAyMQ==",
      "updated_at" : "2018-12-06T23:44:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/445071021",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1006078?v=4",
         "events_url" : "https://api.github.com/users/isghe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/isghe/followers",
         "following_url" : "https://api.github.com/users/isghe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/isghe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/isghe",
         "id" : 1006078,
         "login" : "isghe",
         "node_id" : "MDQ6VXNlcjEwMDYwNzg=",
         "organizations_url" : "https://api.github.com/users/isghe/orgs",
         "received_events_url" : "https://api.github.com/users/isghe/received_events",
         "repos_url" : "https://api.github.com/users/isghe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/isghe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/isghe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/isghe"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "anyway, `createrawtransaction` could be created as an external tool, without affecting the consensus rules\r\n",
      "created_at" : "2018-12-07T01:38:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14888#issuecomment-445092688",
      "id" : 445092688,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14888",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NTA5MjY4OA==",
      "updated_at" : "2018-12-07T01:39:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/445092688",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1006078?v=4",
         "events_url" : "https://api.github.com/users/isghe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/isghe/followers",
         "following_url" : "https://api.github.com/users/isghe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/isghe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/isghe",
         "id" : 1006078,
         "login" : "isghe",
         "node_id" : "MDQ6VXNlcjEwMDYwNzg=",
         "organizations_url" : "https://api.github.com/users/isghe/orgs",
         "received_events_url" : "https://api.github.com/users/isghe/received_events",
         "repos_url" : "https://api.github.com/users/isghe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/isghe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/isghe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/isghe"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@isghe to get this done safely and most easily, I recommend approaching this incrementally, e.g.:\r\n1) fixing the immediate issue\r\n2) applying the `IsStandardTx` check to `createrawtransaction`\r\n3) removing the then-redundant checks",
      "created_at" : "2018-12-07T02:07:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14888#issuecomment-445097754",
      "id" : 445097754,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14888",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NTA5Nzc1NA==",
      "updated_at" : "2018-12-07T02:07:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/445097754",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rejecting duplicate data fields instead of mangling them is the right thing to do regardless of standardness rules:  as I pointed out, the input is a dictionary...  and also even if standardness permitted multiple op_returns we probably would not support it. \r\n\r\nIsStandard probably shouldn't be run on non-final/signed transactions so it isn't a solution here.  (It might actually work, but if so that's largely an accident.)  The standardness behaviour of the wallet and the network are disjoint in any case:  lets imagine that the network standardness rule changed, we still wouldn't want the wallet creating things the old behaviour would reject until the new behaviour were widely deployed. Sometimes code/behavior that looks the same isn't really the same and isn't a duplicate due to how the code needs to be maintained or modified.",
      "created_at" : "2018-12-07T09:26:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14888#issuecomment-445173267",
      "id" : 445173267,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14888",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NTE3MzI2Nw==",
      "updated_at" : "2018-12-07T09:26:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/445173267",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "NACK, this changes nothing.",
      "created_at" : "2018-12-07T09:48:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14888#issuecomment-445178982",
      "id" : 445178982,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14888",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NTE3ODk4Mg==",
      "updated_at" : "2018-12-07T09:48:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/445178982",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
