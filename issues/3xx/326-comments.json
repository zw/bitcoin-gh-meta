[
   {
      "body" : "How can we test this to make sure it makes connectivity better instead of the same or worse?",
      "created_at" : "2011-06-18T14:58:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/326#issuecomment-1393549",
      "id" : 1393549,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/326",
      "updated_at" : "2011-06-18T14:58:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1393549",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "I'm not sure how to test it well, but it makes sense. Preferring nodes that just happen to be in the same irc channel we are is always going to leave a large chunk of good connectable nodes out of the list of possible outbound connections and could eventually lead to island networks in some cases.",
      "created_at" : "2011-06-18T15:17:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/326#issuecomment-1393601",
      "id" : 1393601,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/326",
      "updated_at" : "2011-06-18T15:17:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1393601",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48147?v=3",
         "events_url" : "https://api.github.com/users/jrmithdobbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrmithdobbs/followers",
         "following_url" : "https://api.github.com/users/jrmithdobbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrmithdobbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrmithdobbs",
         "id" : 48147,
         "login" : "jrmithdobbs",
         "organizations_url" : "https://api.github.com/users/jrmithdobbs/orgs",
         "received_events_url" : "https://api.github.com/users/jrmithdobbs/received_events",
         "repos_url" : "https://api.github.com/users/jrmithdobbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrmithdobbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrmithdobbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrmithdobbs"
      }
   },
   {
      "body" : "I've been running it on a node for a week after I observed that it was only had outbound connections to hosts in the same IRC channel.   It has two now.  \r\n\r\nIt doesn't completely fix the behavior. Because IRC updates the addr.nTime and the time since then is used to control the retry interval it makes nodes much more likely to connect within the channel they are in.  But at least with this patch they won't have a zero chance (after the first connection). \r\n\r\nOne piece of evidence of this patch's probable safety is that this check also doesn't run for nodes which have IRC disabled, and isn't applied when there is only one connection.  Also, the significant majority of nodes listed on IRC (which would get included by this check) are not listening already. So the fact that this check may cause a few more long unreachable nodes to be tried shouldn't be harmful.\r\n\r\nMore needs to be done wrt. pruning addr.dat, excluding non-listening nodes, connection rotation, etc. If IRC is retained by default (I don't know what the core dev's plans are for that) then I'll go ahead and submit patches for multi-join (listening nodes should join two channels) and periodic channel hop (every n-hours switch to another channel), both of which I have working but didn't bother cleaning up for submission because I didn't expect bitcoin to keep IRC on by default for long.\r\n\r\n\r\n\r\n\r\n\r\n",
      "created_at" : "2011-06-18T15:30:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/326#issuecomment-1393625",
      "id" : 1393625,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/326",
      "updated_at" : "2011-06-18T15:30:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1393625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Er. github lost the last comment I wrote.\r\n\r\nI'm closing this for now because I also want to fix another issue at the same time where the client can get stuck unable to make new outgoing connections, as I'm concerned that it may be worse in the no IRC case (and after this patch). I think whats happening there is that once all remaining nodes have last tried greater than the minimum used in the score, that the ranking becomes completely stationary and it only ever tries one node (until some lucky IRC activity perturbs the order).\r\n\r\nIt's going to take me a day to to collect data from an instrumented node to confirm I understand that bug, and a day to confirm that my fix is correct. So I suppose this should wait until then. Sorry for the premature request.\r\n\r\n",
      "created_at" : "2011-06-18T18:07:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/326#issuecomment-1394084",
      "id" : 1394084,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/326",
      "updated_at" : "2011-06-18T18:07:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1394084",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   }
]
