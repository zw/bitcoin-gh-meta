[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "See #16779\r\nConcept ACK",
      "created_at" : "2019-09-05T14:48:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-528407251",
      "id" : 528407251,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyODQwNzI1MQ==",
      "updated_at" : "2019-09-05T14:48:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/528407251",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/12272949?v=4",
         "events_url" : "https://api.github.com/users/emilengler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/emilengler/followers",
         "following_url" : "https://api.github.com/users/emilengler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/emilengler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/emilengler",
         "id" : 12272949,
         "login" : "emilengler",
         "node_id" : "MDQ6VXNlcjEyMjcyOTQ5",
         "organizations_url" : "https://api.github.com/users/emilengler/orgs",
         "received_events_url" : "https://api.github.com/users/emilengler/received_events",
         "repos_url" : "https://api.github.com/users/emilengler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/emilengler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/emilengler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/emilengler"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23545](https://github.com/bitcoin/bitcoin/pull/23545) (scripted-diff: Use clang-tidy syntax for C++ named arguments [WIP; TOO MANY CONFLICTS] by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-09-05T16:17:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-528445415",
      "id" : 528445415,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyODQ0NTQxNQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/528445415/reactions"
      },
      "updated_at" : "2021-11-19T17:19:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/528445415",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r321506966"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/321506966"
         }
      },
      "author_association" : "MEMBER",
      "body" : "9d91c4a046d990d7f648328dfed982ad38c87ff1\r\n\r\nShould be first test?",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2019-09-05T22:18:31Z",
      "diff_hunk" : "@@ -189,4 +376,96 @@ std::pair<std::string, data> Decode(const std::string& str) {\n     return {hrp, data(values.begin(), values.end() - 6)};\n }\n \n+/** Find index of an incorrect character in a Bech32 string. */\n+int LocateError(const std::string& str, std::string& error) {\n+    int ind = CheckCharacters(str);\n+    if (ind != -1) {\n+        error = \"Invalid character\";\n+        return ind;\n+    }\n+    if (str.size() > 90) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r321506966",
      "id" : 321506966,
      "line" : 406,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMTUwNjk2Ng==",
      "original_commit_id" : "9d91c4a046d990d7f648328dfed982ad38c87ff1",
      "original_line" : 406,
      "original_position" : 241,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : 253,
      "pull_request_review_id" : 284572157,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/321506966",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r321508485"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/321508485"
         }
      },
      "author_association" : "MEMBER",
      "body" : "9d91c4a046d990d7f648328dfed982ad38c87ff1\r\n\r\nCould add at the top:\r\n```cpp\r\nstatic_assert(sizeof(GF1024_LOG) / sizeof(GF1024_LOG[0]) == 2014, \"GF1024_LOG length should be 1024\");\r\n```\r\nSame for `GF1024_EXP`.",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2019-09-05T22:23:52Z",
      "diff_hunk" : "@@ -189,4 +376,96 @@ std::pair<std::string, data> Decode(const std::string& str) {\n     return {hrp, data(values.begin(), values.end() - 6)};\n }\n \n+/** Find index of an incorrect character in a Bech32 string. */\n+int LocateError(const std::string& str, std::string& error) {\n+    int ind = CheckCharacters(str);\n+    if (ind != -1) {\n+        error = \"Invalid character\";\n+        return ind;\n+    }\n+    if (str.size() > 90) {\n+        error = \"String too long\";\n+        return 90;\n+    }\n+    size_t pos = str.rfind('1');\n+    if (pos == str.npos) {\n+        error = \"Missing separator\";\n+        return 0;\n+    }\n+    if (pos == 0 || pos + 7 > str.size()) {\n+        error = \"Invalid separator position\";\n+        return pos;\n+    }\n+    std::string hrp;\n+    for (size_t i = 0; i < pos; ++i) {\n+        hrp += LowerCase(str[i]);\n+    }\n+    data values(str.size() - 1 - pos);\n+    for (size_t i = 0; i < str.size() - 1 - pos; ++i) {\n+        unsigned char c = str[i + pos + 1];\n+        int8_t rev = CHARSET_REV[c];\n+        if (rev == -1) {\n+            error = \"Invalid Base 32 character\";\n+            return i + pos + 1;\n+        }\n+        values[i] = rev;\n+    }\n+\n+    uint32_t residue = PolyMod(Cat(ExpandHRP(hrp), values)) ^ 1;\n+    if (residue != 0) {\n+        int length = str.size() - 1;\n+        uint32_t syn = Syndrome(residue);\n+        int s0 = syn & 0x3FF;\n+        int s1 = (syn >> 10) & 0x3FF;\n+        int s2 = syn >> 20;\n+        int l_s0 = GF1024_LOG[s0];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r321508485",
      "id" : 321508485,
      "line" : 446,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMTUwODQ4NQ==",
      "original_commit_id" : "9d91c4a046d990d7f648328dfed982ad38c87ff1",
      "original_line" : 446,
      "original_position" : 276,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : 293,
      "pull_request_review_id" : 284572157,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/321508485",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r321508956"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/321508956"
         }
      },
      "author_association" : "MEMBER",
      "body" : "9d91c4a046d990d7f648328dfed982ad38c87ff1\r\n\r\nCould add some tests to `src/test/bech32_tests.cpp`?",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2019-09-05T22:25:37Z",
      "diff_hunk" : "@@ -25,6 +25,9 @@ std::string Encode(const std::string& hrp, const std::vector<uint8_t>& values);\n /** Decode a Bech32 string. Returns (hrp, data). Empty hrp means failure. */\n std::pair<std::string, std::vector<uint8_t>> Decode(const std::string& str);\n \n+/** Return the position of an error in a Bech32 string. If no errors are present, return -1. */\n+int LocateError(const std::string& str, std::string& error);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r321508956",
      "id" : 321508956,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMTUwODk1Ng==",
      "original_commit_id" : "9d91c4a046d990d7f648328dfed982ad38c87ff1",
      "original_line" : 29,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/bech32.h",
      "position" : null,
      "pull_request_review_id" : 284572157,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/321508956",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r321509052"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/321509052"
         }
      },
      "author_association" : "MEMBER",
      "body" : "9d91c4a046d990d7f648328dfed982ad38c87ff1\r\n\r\nnit, `++p1`.",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2019-09-05T22:26:04Z",
      "diff_hunk" : "@@ -189,4 +376,96 @@ std::pair<std::string, data> Decode(const std::string& str) {\n     return {hrp, data(values.begin(), values.end() - 6)};\n }\n \n+/** Find index of an incorrect character in a Bech32 string. */\n+int LocateError(const std::string& str, std::string& error) {\n+    int ind = CheckCharacters(str);\n+    if (ind != -1) {\n+        error = \"Invalid character\";\n+        return ind;\n+    }\n+    if (str.size() > 90) {\n+        error = \"String too long\";\n+        return 90;\n+    }\n+    size_t pos = str.rfind('1');\n+    if (pos == str.npos) {\n+        error = \"Missing separator\";\n+        return 0;\n+    }\n+    if (pos == 0 || pos + 7 > str.size()) {\n+        error = \"Invalid separator position\";\n+        return pos;\n+    }\n+    std::string hrp;\n+    for (size_t i = 0; i < pos; ++i) {\n+        hrp += LowerCase(str[i]);\n+    }\n+    data values(str.size() - 1 - pos);\n+    for (size_t i = 0; i < str.size() - 1 - pos; ++i) {\n+        unsigned char c = str[i + pos + 1];\n+        int8_t rev = CHARSET_REV[c];\n+        if (rev == -1) {\n+            error = \"Invalid Base 32 character\";\n+            return i + pos + 1;\n+        }\n+        values[i] = rev;\n+    }\n+\n+    uint32_t residue = PolyMod(Cat(ExpandHRP(hrp), values)) ^ 1;\n+    if (residue != 0) {\n+        int length = str.size() - 1;\n+        uint32_t syn = Syndrome(residue);\n+        int s0 = syn & 0x3FF;\n+        int s1 = (syn >> 10) & 0x3FF;\n+        int s2 = syn >> 20;\n+        int l_s0 = GF1024_LOG[s0];\n+        int l_s1 = GF1024_LOG[s1];\n+        int l_s2 = GF1024_LOG[s2];\n+\n+        if (l_s0 != -1 && l_s1 != -1 && l_s2 != -1 && (2 * l_s1 - l_s2 - l_s0 + 2046) % 1023 == 0) {\n+            int p1 = (l_s1 - l_s0 + 1023) % 1023;\n+            if (p1 < length) {\n+                int l_e1 = l_s0 + (1023 - 997) * p1;\n+                error = \"Invalid\";\n+                if (l_e1 % 33) {\n+                    return 0;\n+                }\n+                return str.size() - p1 - (p1 >= values.size() ? 2 : 1);\n+            }\n+        }\n+        for (int p1 = 0; p1 < length; p1++) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r321509052",
      "id" : 321509052,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMTUwOTA1Mg==",
      "original_commit_id" : "9d91c4a046d990d7f648328dfed982ad38c87ff1",
      "original_line" : 436,
      "original_position" : 291,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : null,
      "pull_request_review_id" : 284572157,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/321509052",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r321513126"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/321513126"
         }
      },
      "author_association" : "MEMBER",
      "body" : "f877a9b4af7da6632430eff898b957107514e6de\r\n\r\nCould include only when prefix matches `CChainParams::Bech32HRP`?",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2019-09-05T22:43:14Z",
      "diff_hunk" : "@@ -39,6 +40,8 @@ static UniValue validateaddress(const JSONRPCRequest& request)\n             \"  \\\"iswitness\\\" : true|false,     (boolean) If the address is a witness address\\n\"\n             \"  \\\"witness_version\\\" : version   (numeric, optional) The version number of the witness program\\n\"\n             \"  \\\"witness_program\\\" : \\\"hex\\\"     (string, optional) The hex value of the witness program\\n\"\n+            \"  \\\"error\\\" : \\\"message\\\"           (string, optional) The error message if the address is an invalid bech32 address\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r321513126",
      "id" : 321513126,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMTUxMzEyNg==",
      "original_commit_id" : "f877a9b4af7da6632430eff898b957107514e6de",
      "original_line" : 43,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 284572157,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/321513126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Would it be possible to add functions to key_io that provide this functionality for all addresses (with just basic error messages for anything but bech32)? That way the RPC code doesn't need to directly invoke the bech32 module.",
      "created_at" : "2019-09-05T22:46:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-528620663",
      "id" : 528620663,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyODYyMDY2Mw==",
      "updated_at" : "2019-09-05T22:46:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/528620663",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "+1 @sipa suggestion, something like\r\n```cpp\r\nCTxDestination DecodeDestination(const std::string& str, std::string& error);\r\nCTxDestination DecodeDestination(const std::string& str)\r\n{\r\n    const std::string& error;\r\n    return DecodeDestination(str, error);\r\n}\r\n```\r\nAnd maybe also embed the error index in the message for now.",
      "created_at" : "2019-09-05T22:55:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-528623272",
      "id" : 528623272,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyODYyMzI3Mg==",
      "updated_at" : "2019-09-05T22:55:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/528623272",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r321524216"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/321524216"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I thought about this but I wasn't sure, because one of the checks is that the HRP is present and valid too. You're probably right, that would be better for the user.",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2019-09-05T23:23:56Z",
      "diff_hunk" : "@@ -39,6 +40,8 @@ static UniValue validateaddress(const JSONRPCRequest& request)\n             \"  \\\"iswitness\\\" : true|false,     (boolean) If the address is a witness address\\n\"\n             \"  \\\"witness_version\\\" : version   (numeric, optional) The version number of the witness program\\n\"\n             \"  \\\"witness_program\\\" : \\\"hex\\\"     (string, optional) The hex value of the witness program\\n\"\n+            \"  \\\"error\\\" : \\\"message\\\"           (string, optional) The error message if the address is an invalid bech32 address\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r321524216",
      "id" : 321524216,
      "in_reply_to_id" : 321513126,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMTUyNDIxNg==",
      "original_commit_id" : "f877a9b4af7da6632430eff898b957107514e6de",
      "original_line" : 43,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 284591468,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/321524216",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've added boost tests, fixed the above nits, and added a final commit with one implementation of the above idea. I can drop the final commit if it's not a good approach, but this is the cleanest way I could come up with",
      "created_at" : "2019-09-06T05:14:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-528711286",
      "id" : 528711286,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyODcxMTI4Ng==",
      "updated_at" : "2019-09-06T05:14:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/528711286",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-10-18T15:48:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-543805679",
      "id" : 543805679,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzgwNTY3OQ==",
      "updated_at" : "2019-10-18T15:48:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543805679",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased",
      "created_at" : "2019-10-21T10:45:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-544458872",
      "id" : 544458872,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NDQ1ODg3Mg==",
      "updated_at" : "2019-10-21T10:45:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/544458872",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-10-28T12:32:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-546925705",
      "id" : 546925705,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NjkyNTcwNQ==",
      "updated_at" : "2019-10-28T12:32:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546925705",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. I would prefer to make `address_type` an optional hint, and instead guess the address type.\r\n\r\nDistinguishing between base58 and bech32 could be done by counting how many characters of the address are part of the base58/bech32 character set. You can then use `error_index` to indicate the position of a character that doesn't belong in the set.",
      "created_at" : "2019-10-29T09:34:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-547334348",
      "id" : 547334348,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NzMzNDM0OA==",
      "updated_at" : "2019-10-29T09:34:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547334348",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r345524975"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345524975"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why can't this be detected from the input?",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2019-11-13T01:04:58Z",
      "diff_hunk" : "@@ -28,6 +29,7 @@ static UniValue validateaddress(const JSONRPCRequest& request)\n                 \"\\nReturn information about the given bitcoin address.\\n\",\n                 {\n                     {\"address\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The bitcoin address to validate\"},\n+                    {\"address_type\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"The address type provided, used to detect errors. Options are \\\"legacy\\\", \\\"p2sh-segwit\\\", and \\\"bech32\\\".\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r345524975",
      "id" : 345524975,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTUyNDk3NQ==",
      "original_commit_id" : "19e9def6902026680081f5f1d78cf2ae2c24ba1d",
      "original_line" : 35,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 315944943,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345524975",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r345547050"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345547050"
         }
      },
      "author_association" : "MEMBER",
      "body" : "File needs +x permission",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2019-11-13T02:45:45Z",
      "diff_hunk" : "@@ -0,0 +1,130 @@\n+#!/usr/bin/env python3",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r345547050",
      "id" : 345547050,
      "line" : 1,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTU0NzA1MA==",
      "original_commit_id" : "19e9def6902026680081f5f1d78cf2ae2c24ba1d",
      "original_line" : 1,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "test/functional/rpc_validateaddress.py",
      "position" : 1,
      "pull_request_review_id" : 315971649,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345547050",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r349770688"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/349770688"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Because if we assume it has errors in it, then we can't rely on checks like whether all the characters are bech32 or base58 or whatever. But I like Sjors' suggestion of counting the characters to find the most likely. I'll try that when I rebase this.",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2019-11-22T19:59:19Z",
      "diff_hunk" : "@@ -28,6 +29,7 @@ static UniValue validateaddress(const JSONRPCRequest& request)\n                 \"\\nReturn information about the given bitcoin address.\\n\",\n                 {\n                     {\"address\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The bitcoin address to validate\"},\n+                    {\"address_type\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"The address type provided, used to detect errors. Options are \\\"legacy\\\", \\\"p2sh-segwit\\\", and \\\"bech32\\\".\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r349770688",
      "id" : 349770688,
      "in_reply_to_id" : 345524975,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0OTc3MDY4OA==",
      "original_commit_id" : "19e9def6902026680081f5f1d78cf2ae2c24ba1d",
      "original_line" : 35,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 321777902,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/349770688",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Once this is merged, I have the GUI changes ready to go...",
      "created_at" : "2020-02-13T15:02:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-585800893",
      "id" : 585800893,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NTgwMDg5Mw==",
      "updated_at" : "2020-02-13T15:02:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/585800893",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r378916865"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/378916865"
         }
      },
      "author_association" : "MEMBER",
      "body" : "FWIW, for Knots I am just checking for the Bech32HRP to match",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2020-02-13T15:04:16Z",
      "diff_hunk" : "@@ -28,6 +29,7 @@ static UniValue validateaddress(const JSONRPCRequest& request)\n                 \"\\nReturn information about the given bitcoin address.\\n\",\n                 {\n                     {\"address\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The bitcoin address to validate\"},\n+                    {\"address_type\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"The address type provided, used to detect errors. Options are \\\"legacy\\\", \\\"p2sh-segwit\\\", and \\\"bech32\\\".\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r378916865",
      "id" : 378916865,
      "in_reply_to_id" : 345524975,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkxNjg2NQ==",
      "original_commit_id" : "19e9def6902026680081f5f1d78cf2ae2c24ba1d",
      "original_line" : 35,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 358289121,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/378916865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r378935889"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/378935889"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That sounds simple enough.",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2020-02-13T15:33:05Z",
      "diff_hunk" : "@@ -28,6 +29,7 @@ static UniValue validateaddress(const JSONRPCRequest& request)\n                 \"\\nReturn information about the given bitcoin address.\\n\",\n                 {\n                     {\"address\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The bitcoin address to validate\"},\n+                    {\"address_type\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"The address type provided, used to detect errors. Options are \\\"legacy\\\", \\\"p2sh-segwit\\\", and \\\"bech32\\\".\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r378935889",
      "id" : 378935889,
      "in_reply_to_id" : 345524975,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkzNTg4OQ==",
      "original_commit_id" : "19e9def6902026680081f5f1d78cf2ae2c24ba1d",
      "original_line" : 35,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 358314237,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/378935889",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r378944439"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/378944439"
         }
      },
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoinknots/bitcoin/commit/65b45fa8f852a6d375061929e6c943c2afbbe681",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2020-02-13T15:45:46Z",
      "diff_hunk" : "@@ -28,6 +29,7 @@ static UniValue validateaddress(const JSONRPCRequest& request)\n                 \"\\nReturn information about the given bitcoin address.\\n\",\n                 {\n                     {\"address\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The bitcoin address to validate\"},\n+                    {\"address_type\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"The address type provided, used to detect errors. Options are \\\"legacy\\\", \\\"p2sh-segwit\\\", and \\\"bech32\\\".\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r378944439",
      "id" : 378944439,
      "in_reply_to_id" : 345524975,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODk0NDQzOQ==",
      "original_commit_id" : "19e9def6902026680081f5f1d78cf2ae2c24ba1d",
      "original_line" : 35,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 358325175,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/378944439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2020-03-04T14:28:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-594555847",
      "id" : 594555847,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NDU1NTg0Nw==",
      "updated_at" : "2020-03-04T14:28:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/594555847",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Why is this limited to only returning a single error position? Fairly simple code can give up-to two, and it's not hard to imagine fancier code that can sometimes return more than that.",
      "created_at" : "2020-03-08T22:22:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-596259697",
      "id" : 596259697,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NjI1OTY5Nw==",
      "updated_at" : "2020-03-17T04:54:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/596259697",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@meshcollider  ?",
      "created_at" : "2020-03-15T20:43:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-599262188",
      "id" : 599262188,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5OTI2MjE4OA==",
      "updated_at" : "2020-03-15T20:43:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/599262188",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK to adding Bech32 error location to `validateaddress`, but echoing earlier comments:\r\n* Why only one error? The reference code in https://github.com/sipa/bech32 finds two, and I don't think just returning one makes things meaningfully simpler. Even if not implemented, the interface should probably return an array of error positions.\r\n* It feels unnecessary to pass an address type. Just only run the bech32 error location code when the HRP matches (and treat as base58 otherwise).",
      "created_at" : "2020-03-16T04:30:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-599339709",
      "id" : 599339709,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5OTMzOTcwOQ==",
      "updated_at" : "2020-03-16T04:30:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/599339709",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Fair points, I'll modify to return more than one error. Re. address type, we discussed it a while back in IRC, I can't remember if there was a reason we didn't base it solely on HRP or not, but I am happy to do it that way if you want because I can't see a real downside now. I still have to fix the current error and rebase too.",
      "created_at" : "2020-04-07T06:29:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-610201388",
      "id" : 610201388,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMDIwMTM4OA==",
      "updated_at" : "2020-04-07T06:31:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/610201388",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r443686062"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443686062"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This legacy address produces the error \"Invalid Base58 character in address\".",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2020-06-22T16:33:28Z",
      "diff_hunk" : "@@ -0,0 +1,136 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018-2019 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the deriveaddresses rpc call.\"\"\"\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class ValidateaddressTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def run_test(self):\n+\n+        # Valid address\n+        address = \"bcrt1q049ldschfnwystcqnsvyfpj23mpsg3jcedq9xv\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], True)\n+        assert 'error' not in res\n+        assert 'error_index' not in res\n+\n+        # Valid capitalised address\n+        address = \"BCRT1QPLMTZKC2XHARPPZDLNPAQL78RSHJ68U33RAH7R\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], True)\n+        assert 'error' not in res\n+        assert 'error_index' not in res\n+\n+        # Invalid address without type specified\n+        address = \"bcrtq049ldschfnwystcqnsvyfpj23mpsg3jcedq9xv\"\n+        res = self.nodes[0].validateaddress(address)\n+        assert_equal(res['isvalid'], False)\n+        assert 'error' not in res\n+        assert 'error_index' not in res\n+\n+        # Address with no '1' separator\n+        address = \"bcrtq049ldschfnwystcqnsvyfpj23mpsg3jcedq9xv\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 0)\n+        assert_equal(res['error'], \"Missing separator\")\n+\n+        # Address with no HRP\n+        address = \"1q049ldschfnwystcqnsvyfpj23mpsg3jcedq9xv\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 0)\n+        assert_equal(res['error'], \"Invalid separator position\")\n+\n+        # Address with an invalid bech32 encoding character\n+        address = \"bcrt1q04oldschfnwystcqnsvyfpj23mpsg3jcedq9xv\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 8)\n+        assert_equal(res['error'], \"Invalid Base 32 character\")\n+\n+        # Address with one error\n+        address = \"bcrt1q049edschfnwystcqnsvyfpj23mpsg3jcedq9xv\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 9)\n+        assert_equal(res['error'], \"Invalid\")\n+\n+        # Capitalised address with one error\n+        address = \"BCRT1QPLMTZKC2XHARPPZDLNPAQL78RSHJ68U32RAH7R\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 38)\n+        assert_equal(res['error'], \"Invalid\")\n+\n+        # Valid multisig address\n+        address = \"bcrt1qdg3myrgvzw7ml9q0ejxhlkyxm7vl9r56yzkfgvzclrf4hkpx9yfqhpsuks\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], True)\n+\n+        # Multisig address with 2 errors\n+        address = \"bcrt1qdg3myrgvzw7ml8q0ejxhlkyxn7vl9r56yzkfgvzclrf4hkpx9yfqhpsuks\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 19)\n+        assert_equal(res['error'], \"Invalid\")\n+\n+        # Address with 2 errors\n+        address = \"bcrt1qfsawymtaadjet5sl7p9zw273wpvu9rgwq93y52\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 22)\n+        assert_equal(res['error'], \"Invalid\")\n+\n+        # Invalid but also too long\n+        address = \"bcrt1q049edschfnwystcqnsvyfpj23mpsg3jcedq9xv049edschfnwystcqnsvyfpj23mpsg3jcedq9xv049edschfnwystcqnsvyfpj23m\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 90)\n+        assert_equal(res['error'], \"String too long\")\n+\n+        # Legacy address with no errors\n+        address = \"muehQnn2P5NiiRCGg9HewAWrXLRy2d7TZE\"\n+        res = self.nodes[0].validateaddress(address, \"legacy\")\n+        assert_equal(res['isvalid'], True)\n+\n+        # Legacy address which is too long\n+        address = \"muehQnn2P5NiiRCGO9HewAWrXLRy2d7TZEaaaaaaa\"\n+        res = self.nodes[0].validateaddress(address, \"legacy\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error'], \"Length exceeds maximum for legacy and P2SH addresses\")\n+\n+        # Legacy address with one error\n+        address = \"muehQnn2P5NhiRCGg9HewAWrXLRy2d7TZE\"\n+        res = self.nodes[0].validateaddress(address, \"legacy\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error'], \"Invalid checksum for Base58 address\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r443686062",
      "id" : 443686062,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY4NjA2Mg==",
      "original_commit_id" : "54e107add411d102574ba5f58627629ca6f794b7",
      "original_line" : 112,
      "original_position" : 112,
      "original_start_line" : null,
      "path" : "test/functional/rpc_validateaddress.py",
      "position" : null,
      "pull_request_review_id" : 435092744,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443686062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r443686267"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443686267"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same here - this address produces the error \"Invalid Base58 character in address\".",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2020-06-22T16:33:48Z",
      "diff_hunk" : "@@ -0,0 +1,136 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018-2019 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the deriveaddresses rpc call.\"\"\"\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class ValidateaddressTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def run_test(self):\n+\n+        # Valid address\n+        address = \"bcrt1q049ldschfnwystcqnsvyfpj23mpsg3jcedq9xv\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], True)\n+        assert 'error' not in res\n+        assert 'error_index' not in res\n+\n+        # Valid capitalised address\n+        address = \"BCRT1QPLMTZKC2XHARPPZDLNPAQL78RSHJ68U33RAH7R\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], True)\n+        assert 'error' not in res\n+        assert 'error_index' not in res\n+\n+        # Invalid address without type specified\n+        address = \"bcrtq049ldschfnwystcqnsvyfpj23mpsg3jcedq9xv\"\n+        res = self.nodes[0].validateaddress(address)\n+        assert_equal(res['isvalid'], False)\n+        assert 'error' not in res\n+        assert 'error_index' not in res\n+\n+        # Address with no '1' separator\n+        address = \"bcrtq049ldschfnwystcqnsvyfpj23mpsg3jcedq9xv\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 0)\n+        assert_equal(res['error'], \"Missing separator\")\n+\n+        # Address with no HRP\n+        address = \"1q049ldschfnwystcqnsvyfpj23mpsg3jcedq9xv\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 0)\n+        assert_equal(res['error'], \"Invalid separator position\")\n+\n+        # Address with an invalid bech32 encoding character\n+        address = \"bcrt1q04oldschfnwystcqnsvyfpj23mpsg3jcedq9xv\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 8)\n+        assert_equal(res['error'], \"Invalid Base 32 character\")\n+\n+        # Address with one error\n+        address = \"bcrt1q049edschfnwystcqnsvyfpj23mpsg3jcedq9xv\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 9)\n+        assert_equal(res['error'], \"Invalid\")\n+\n+        # Capitalised address with one error\n+        address = \"BCRT1QPLMTZKC2XHARPPZDLNPAQL78RSHJ68U32RAH7R\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 38)\n+        assert_equal(res['error'], \"Invalid\")\n+\n+        # Valid multisig address\n+        address = \"bcrt1qdg3myrgvzw7ml9q0ejxhlkyxm7vl9r56yzkfgvzclrf4hkpx9yfqhpsuks\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], True)\n+\n+        # Multisig address with 2 errors\n+        address = \"bcrt1qdg3myrgvzw7ml8q0ejxhlkyxn7vl9r56yzkfgvzclrf4hkpx9yfqhpsuks\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 19)\n+        assert_equal(res['error'], \"Invalid\")\n+\n+        # Address with 2 errors\n+        address = \"bcrt1qfsawymtaadjet5sl7p9zw273wpvu9rgwq93y52\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 22)\n+        assert_equal(res['error'], \"Invalid\")\n+\n+        # Invalid but also too long\n+        address = \"bcrt1q049edschfnwystcqnsvyfpj23mpsg3jcedq9xv049edschfnwystcqnsvyfpj23mpsg3jcedq9xv049edschfnwystcqnsvyfpj23m\"\n+        res = self.nodes[0].validateaddress(address, \"bech32\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error_index'], 90)\n+        assert_equal(res['error'], \"String too long\")\n+\n+        # Legacy address with no errors\n+        address = \"muehQnn2P5NiiRCGg9HewAWrXLRy2d7TZE\"\n+        res = self.nodes[0].validateaddress(address, \"legacy\")\n+        assert_equal(res['isvalid'], True)\n+\n+        # Legacy address which is too long\n+        address = \"muehQnn2P5NiiRCGO9HewAWrXLRy2d7TZEaaaaaaa\"\n+        res = self.nodes[0].validateaddress(address, \"legacy\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error'], \"Length exceeds maximum for legacy and P2SH addresses\")\n+\n+        # Legacy address with one error\n+        address = \"muehQnn2P5NhiRCGg9HewAWrXLRy2d7TZE\"\n+        res = self.nodes[0].validateaddress(address, \"legacy\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error'], \"Invalid checksum for Base58 address\")\n+        assert 'error_index' not in res\n+\n+        # Legacy address with a non-Base58 character\n+        address = \"muehQnn2P5NiiRCGO9HewAWrXLRy2d7TZE\"\n+        res = self.nodes[0].validateaddress(address, \"legacy\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error'], \"Invalid Base58 character in address\")\n+\n+        # Legacy address with incorrect prefix for current network\n+        address = \"1BvBMSEYstWetqTFn5Au4m4GFg7xJaNVN2\"\n+        res = self.nodes[0].validateaddress(address, \"legacy\")\n+        assert_equal(res['isvalid'], False)\n+        assert_equal(res['error'], \"Invalid prefix for Base58 address\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r443686267",
      "id" : 443686267,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY4NjI2Nw==",
      "original_commit_id" : "54e107add411d102574ba5f58627629ca6f794b7",
      "original_line" : 125,
      "original_position" : 125,
      "original_start_line" : null,
      "path" : "test/functional/rpc_validateaddress.py",
      "position" : null,
      "pull_request_review_id" : 435092744,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-20T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443686267",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase",
      "created_at" : "2021-01-06T12:27:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-755271596",
      "id" : 755271596,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1NTI3MTU5Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-06T12:27:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/755271596",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased + reworked to include Bech32m and to allow multiple error indices to be returned as discussed above.",
      "created_at" : "2021-04-20T08:03:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-823068533",
      "id" : 823068533,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMzA2ODUzMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-20T08:03:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/823068533",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased again on 21736 to fix CI",
      "created_at" : "2021-04-20T08:47:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-823100230",
      "id" : 823100230,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMzEwMDIzMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-20T08:47:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/823100230",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "From ci:\r\n\r\nAssertionError: not(Invalid HRP or Base58 character in address == Invalid address format)",
      "created_at" : "2021-04-20T10:09:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-823154380",
      "id" : 823154380,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMzE1NDM4MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-20T10:09:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/823154380",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r618158717"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618158717"
         }
      },
      "author_association" : "MEMBER",
      "body" : "56b90c86d7d4c1a353cc365126a7900b5bb61da9  I'm having a hard time reaching this error condition (when running this commit). E.g. just swapping a random character tends to result in `Invalid HRP or Base58 character in address` rather than a checksum error. It might be useful to introduce `rpc_validate_address.py` earlier and add some base58 examples to it. ",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2021-04-22T07:42:41Z",
      "diff_hunk" : "@@ -264,3 +266,29 @@ bool IsValidDestinationString(const std::string& str)\n {\n     return IsValidDestinationString(str, Params());\n }\n+\n+std::string LocateErrorsInDestinationString(const std::string& str, std::vector<int>& error_locations)\n+{\n+    // If DecodeDestination failed to diagnose the error, we shall assume the address is typed\n+    // incorrectly, and give more specific error information for Bech32 addresses based on their HRP\n+\n+    // Note this will fail if it is a valid Bech32 address for a different network\n+    if (ToLower(str.substr(0, Params().Bech32HRP().size())) == Params().Bech32HRP()) {\n+        // Bech32 encoding\n+        auto bech = bech32::Decode(str);\n+        if (bech.data.size() == 0) {\n+            //TODO: locate Bech32 errors\n+            return \"Error in Bech32 encoding\";\n+        }\n+    } else {\n+        // Assume base58 encoding\n+        std::vector<unsigned char> data;\n+        if (!DecodeBase58(str, data, 21)) {\n+            return \"Invalid HRP or Base58 character in address\";\n+        }\n+        if (!DecodeBase58Check(str, data, 21)) {\n+            return \"Invalid checksum for Base58 address\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r618158717",
      "id" : 618158717,
      "line" : 289,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxODE1ODcxNw==",
      "original_commit_id" : "56b90c86d7d4c1a353cc365126a7900b5bb61da9",
      "original_line" : 290,
      "original_position" : 49,
      "original_start_line" : null,
      "path" : "src/key_io.cpp",
      "position" : 48,
      "pull_request_review_id" : 641874794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-22T08:15:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618158717",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r618160087"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618160087"
         }
      },
      "author_association" : "MEMBER",
      "body" : "56b90c86d7d4c1a353cc365126a7900b5bb61da9 nit:  it might be better to introduce this result field, as well as `std::vector<int>& error_locations)` in the next commit.",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2021-04-22T07:44:40Z",
      "diff_hunk" : "@@ -46,6 +46,7 @@ static RPCHelpMan validateaddress()\n                         {RPCResult::Type::NUM, \"witness_version\", /* optional */ true, \"The version number of the witness program\"},\n                         {RPCResult::Type::STR_HEX, \"witness_program\", /* optional */ true, \"The hex value of the witness program\"},\n                         {RPCResult::Type::STR, \"error\", /* optional */ true, \"Error message, if any\"},\n+                        {RPCResult::Type::STR, \"error_locations\", /* optional */ true, \"Indices of errors locations in address, if known (e.g. Bech32 errors)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r618160087",
      "id" : 618160087,
      "line" : 49,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxODE2MDA4Nw==",
      "original_commit_id" : "56b90c86d7d4c1a353cc365126a7900b5bb61da9",
      "original_line" : 49,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : 4,
      "pull_request_review_id" : 641874794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-22T08:15:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/618160087",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r630576329"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630576329"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 3bc568d67537e1725ea0d7472412fe9e4331d01c \"Add functional test for validateaddress\"\r\n\r\nA lot of this test is repetitive, would be nice to add a check function (maybe `self.assert_valid` and `self.assert_invalid`) that you can just give it all of the different scenarios rather than copying the same 5 lines.",
      "commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "created_at" : "2021-05-11T22:17:55Z",
      "diff_hunk" : "@@ -0,0 +1,88 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018-2019 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the deriveaddresses rpc call.\"\"\"\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class ValidateaddressTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def run_test(self):\n+        # Valid address\n+        address = \"bcrt1q049ldschfnwystcqnsvyfpj23mpsg3jcedq9xv\"\n+        res = self.nodes[0].validateaddress(address)\n+        assert_equal(res['isvalid'], True)\n+        assert 'error' not in res\n+        assert 'error_locations' not in res",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r630576329",
      "id" : 630576329,
      "line" : 19,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMDU3NjMyOQ==",
      "original_commit_id" : "3bc568d67537e1725ea0d7472412fe9e4331d01c",
      "original_line" : 19,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "test/functional/rpc_validateaddress.py",
      "position" : 19,
      "pull_request_review_id" : 657276577,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-11T22:32:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/630576329",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Pushed a substantial rebase + rework. Addresses all comments and suggestions above. Notably this now makes DecodeAddress return the error locations rather than creating a separate function as @achow101 suggested.",
      "created_at" : "2021-10-01T01:45:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-931828044",
      "id" : 931828044,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "IC_kwDOABII5843ipFM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/931828044/reactions"
      },
      "updated_at" : "2021-10-01T01:45:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/931828044",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 1414005c5b24f13bb4da850c62c7c3cdc6436ad1\r\n\r\nReviewed everything except the actual bech32(m) error location code as I currently don't understand the math there. Also tested manually with a few addresses.",
      "created_at" : "2021-10-01T19:51:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-932508171",
      "id" : 932508171,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "IC_kwDOABII5843lPIL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932508171/reactions"
      },
      "updated_at" : "2021-10-01T19:51:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932508171",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r720504922"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720504922"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In C++17 you can use `std::size(GF1024_EXP) == 1023`.",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-01T19:53:52Z",
      "diff_hunk" : "@@ -30,6 +30,155 @@ const int8_t CHARSET_REV[128] = {\n      1,  0,  3, 16, 11, 28, 12, 14,  6,  4,  2, -1, -1, -1, -1, -1\n };\n \n+\n+const int16_t GF1024_EXP[] = {\n+    1, 303, 635, 446, 997, 640, 121, 142, 959, 420, 350, 438, 166, 39, 543,\n+    335, 831, 691, 117, 632, 719, 97, 107, 374, 558, 797, 54, 150, 858, 877,\n+    724, 1013, 294, 23, 354, 61, 164, 633, 992, 538, 469, 659, 174, 868, 184,\n+    809, 766, 563, 866, 851, 257, 520, 45, 770, 535, 524, 408, 213, 436, 760,\n+    472, 330, 933, 799, 616, 361, 15, 391, 756, 814, 58, 608, 554, 680, 993,\n+    821, 942, 813, 843, 484, 193, 935, 321, 919, 572, 741, 423, 559, 562,\n+    589, 296, 191, 493, 685, 891, 665, 435, 60, 395, 2, 606, 511, 853, 746,\n+    32, 219, 284, 631, 840, 661, 837, 332, 78, 311, 670, 887, 111, 195, 505,\n+    190, 194, 214, 709, 380, 819, 69, 261, 957, 1018, 161, 739, 588, 7, 708,\n+    83, 328, 507, 736, 317, 899, 47, 348, 1000, 345, 882, 245, 367, 996, 943,\n+    514, 304, 90, 804, 295, 312, 793, 387, 833, 249, 921, 660, 618, 823, 496,\n+    722, 30, 782, 225, 892, 93, 480, 372, 112, 738, 867, 636, 890, 950, 968,\n+    386, 622, 642, 551, 369, 234, 846, 382, 365, 442, 592, 343, 986, 122,\n+    1023, 59, 847, 81, 790, 4, 437, 983, 931, 244, 64, 415, 529, 487, 944,\n+    35, 938, 664, 156, 583, 53, 999, 222, 390, 987, 341, 388, 389, 170, 721,\n+    879, 138, 522, 627, 765, 322, 230, 440, 14, 168, 143, 656, 991, 224, 595,\n+    550, 94, 657, 752, 667, 1005, 451, 734, 744, 638, 292, 585, 157, 872,\n+    590, 601, 827, 774, 930, 475, 571, 33, 500, 871, 969, 173, 21, 828, 450,\n+    1009, 147, 960, 705, 201, 228, 998, 497, 1021, 613, 688, 772, 508, 36,\n+    366, 715, 468, 956, 725, 730, 861, 425, 647, 701, 221, 759, 95, 958, 139,\n+    805, 8, 835, 679, 614, 449, 128, 791, 299, 974, 617, 70, 628, 57, 273,\n+    430, 67, 750, 405, 780, 703, 643, 776, 778, 340, 171, 1022, 276, 308,\n+    495, 243, 644, 460, 857, 28, 336, 286, 41, 695, 448, 431, 364, 149, 43,\n+    233, 63, 762, 902, 181, 240, 501, 584, 434, 275, 1008, 444, 443, 895,\n+    812, 612, 927, 383, 66, 961, 1006, 690, 346, 3, 881, 900, 747, 271, 672,\n+    162, 402, 456, 748, 971, 755, 490, 105, 808, 977, 72, 732, 182, 897, 625,\n+    163, 189, 947, 850, 46, 115, 403, 231, 151, 629, 278, 874, 16, 934, 110,\n+    492, 898, 256, 807, 598, 700, 498, 140, 481, 91, 523, 860, 134, 252, 771,\n+    824, 119, 38, 816, 820, 641, 342, 757, 513, 577, 990, 463, 40, 920, 955,\n+    17, 649, 533, 82, 103, 896, 862, 728, 259, 86, 466, 87, 253, 556, 323,\n+    457, 963, 432, 845, 527, 745, 849, 863, 1015, 888, 488, 567, 727, 132,\n+    674, 764, 109, 669, 6, 1003, 552, 246, 542, 96, 324, 781, 912, 248, 694,\n+    239, 980, 210, 880, 683, 144, 177, 325, 546, 491, 326, 339, 623, 941, 92,\n+    207, 783, 462, 263, 483, 517, 1012, 9, 620, 220, 984, 548, 512, 878, 421,\n+    113, 973, 280, 962, 159, 310, 945, 268, 465, 806, 889, 199, 76, 873, 865,\n+    34, 645, 227, 290, 418, 693, 926, 80, 569, 639, 11, 50, 291, 141, 206,\n+    544, 949, 185, 518, 133, 909, 135, 467, 376, 646, 914, 678, 841, 954,\n+    318, 242, 939, 951, 743, 1017, 976, 359, 167, 264, 100, 241, 218, 51, 12,\n+    758, 368, 453, 309, 192, 648, 826, 553, 473, 101, 478, 673, 397, 1001,\n+    118, 265, 331, 650, 356, 982, 652, 655, 510, 634, 145, 414, 830, 924,\n+    526, 966, 298, 737, 18, 504, 401, 697, 360, 288, 1020, 842, 203, 698,\n+    537, 676, 279, 581, 619, 536, 907, 876, 1019, 398, 152, 1010, 994, 68,\n+    42, 454, 580, 836, 99, 565, 137, 379, 503, 22, 77, 582, 282, 412, 352,\n+    611, 347, 300, 266, 570, 270, 911, 729, 44, 557, 108, 946, 637, 597, 461,\n+    630, 615, 238, 763, 681, 718, 334, 528, 200, 459, 413, 79, 24, 229, 713,\n+    906, 579, 384, 48, 893, 370, 923, 202, 917, 98, 794, 754, 197, 530, 662,\n+    52, 712, 677, 56, 62, 981, 509, 267, 789, 885, 561, 316, 684, 596, 226,\n+    13, 985, 779, 123, 720, 576, 753, 948, 406, 125, 315, 104, 519, 426, 502,\n+    313, 566, 1016, 767, 796, 281, 749, 740, 136, 84, 908, 424, 936, 198,\n+    355, 274, 735, 967, 5, 154, 428, 541, 785, 704, 486, 671, 600, 532, 381,\n+    540, 574, 187, 88, 378, 216, 621, 499, 419, 922, 485, 494, 476, 255, 114,\n+    188, 668, 297, 400, 918, 787, 158, 25, 458, 178, 564, 422, 768, 73, 1011,\n+    717, 575, 404, 547, 196, 829, 237, 394, 301, 37, 65, 176, 106, 89, 85,\n+    675, 979, 534, 803, 995, 363, 593, 120, 417, 452, 26, 699, 822, 223, 169,\n+    416, 235, 609, 773, 211, 607, 208, 302, 852, 965, 603, 357, 761, 247,\n+    817, 539, 250, 232, 272, 129, 568, 848, 624, 396, 710, 525, 183, 686, 10,\n+    285, 856, 307, 811, 160, 972, 55, 441, 289, 723, 305, 373, 351, 153, 733,\n+    409, 506, 975, 838, 573, 970, 988, 913, 471, 205, 337, 49, 594, 777, 549,\n+    815, 277, 27, 916, 333, 353, 844, 800, 146, 751, 186, 375, 769, 358, 392,\n+    883, 474, 788, 602, 74, 130, 329, 212, 155, 131, 102, 687, 293, 870, 742,\n+    726, 427, 217, 834, 904, 29, 127, 869, 407, 338, 832, 470, 482, 810, 399,\n+    439, 393, 604, 929, 682, 447, 714, 251, 455, 875, 319, 477, 464, 521,\n+    258, 377, 937, 489, 792, 172, 314, 327, 124, 20, 531, 953, 591, 886, 320,\n+    696, 71, 859, 578, 175, 587, 707, 663, 283, 179, 795, 989, 702, 940, 371,\n+    692, 689, 555, 903, 410, 651, 75, 429, 818, 362, 894, 515, 31, 545, 666,\n+    706, 952, 864, 269, 254, 349, 711, 802, 716, 784, 1007, 925, 801, 445,\n+    148, 260, 658, 385, 287, 262, 204, 126, 586, 1004, 236, 165, 854, 411,\n+    932, 560, 19, 215, 1002, 775, 653, 928, 901, 964, 884, 798, 839, 786,\n+    433, 610, 116, 855, 180, 479, 910, 1014, 599, 915, 905, 306, 516, 731,\n+    626, 978, 825, 344, 605, 654, 209\n+};\n+static_assert(sizeof(GF1024_EXP) / sizeof(GF1024_EXP[0]) == 1023, \"GF1024_EXP length should be 1023\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r720504922",
      "id" : 720504922,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584q8gha",
      "original_commit_id" : "1e5709ef4a42efb3820a741a523ab472d195fc92",
      "original_line" : 106,
      "original_position" : 77,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : null,
      "pull_request_review_id" : 769328576,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720504922/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-01T19:59:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720504922",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r720505961"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720505961"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What if there is a typo in the witness version character?\r\n\r\nBIP350 actually spells out a strategy for locating errors in this case: https://github.com/bitcoin/bips/blob/master/bip-0350.mediawiki#addresses-for-segregated-witness-outputs",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-01T19:56:04Z",
      "diff_hunk" : "@@ -227,4 +431,96 @@ DecodeResult Decode(const std::string& str) {\n     return {result, std::move(hrp), data(values.begin(), values.end() - 6)};\n }\n \n+/** Find index of an incorrect character in a Bech32 string. */\n+std::string LocateErrors(const std::string& str, std::vector<int>& error_locations) {\n+    if (str.size() > 90) {\n+        push_range(90, str.size(), error_locations);\n+        return \"Bech32 string too long\";\n+    }\n+    if (!CheckCharacters(str, error_locations)){\n+        return \"Invalid character or mixed case\";\n+    }\n+    size_t pos = str.rfind('1');\n+    if (pos == str.npos) {\n+        return \"Missing separator\";\n+    }\n+    if (pos == 0 || pos + 7 > str.size()) {\n+        error_locations.push_back(pos);\n+        return \"Invalid separator position\";\n+    }\n+    std::string hrp;\n+    for (size_t i = 0; i < pos; ++i) {\n+        hrp += LowerCase(str[i]);\n+    }\n+\n+    size_t length = str.size() - 1 - pos; // length of data part\n+    data values(length);\n+    for (size_t i = pos + 1; i < str.size(); ++i) {\n+        unsigned char c = str[i];\n+        int8_t rev = CHARSET_REV[c];\n+        if (rev == -1) {\n+            error_locations.push_back(i);\n+            return \"Invalid Base 32 character\";\n+        }\n+        values[i - pos - 1] = rev;\n+    }\n+\n+    // Base the polymod value off the witness version\n+    Encoding encoding = values[0] > 0 ? Encoding::BECH32M : Encoding::BECH32;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r720505961",
      "id" : 720505961,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584q8gxp",
      "original_commit_id" : "1e5709ef4a42efb3820a741a523ab472d195fc92",
      "original_line" : 469,
      "original_position" : 286,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : null,
      "pull_request_review_id" : 769328576,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720505961/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-01T19:59:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720505961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r720506961"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720506961"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe say \"likely error locations\"; if you have too many errors, there is no telling where they are.",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-01T19:57:54Z",
      "diff_hunk" : "@@ -51,6 +51,10 @@ static RPCHelpMan validateaddress()\n                         {RPCResult::Type::NUM, \"witness_version\", /* optional */ true, \"The version number of the witness program\"},\n                         {RPCResult::Type::STR_HEX, \"witness_program\", /* optional */ true, \"The hex value of the witness program\"},\n                         {RPCResult::Type::STR, \"error\", /* optional */ true, \"Error message, if any\"},\n+                        {RPCResult::Type::ARR, \"error_locations\", \"Indices of error locations in address, if known (e.g. Bech32 errors)\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r720506961",
      "id" : 720506961,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584q8hBR",
      "original_commit_id" : "9c0406a611161ad030c1134b3cbb4a8febf9d8e3",
      "original_line" : 54,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 769328576,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720506961/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-01T19:59:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/720506961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Addressed @sipa's comments, thanks!",
      "created_at" : "2021-10-02T00:55:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-932650684",
      "id" : 932650684,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "IC_kwDOABII5843lx68",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932650684/reactions"
      },
      "updated_at" : "2021-10-02T00:55:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932650684",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\n This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-10-11T11:23:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-939938073",
      "id" : 939938073,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "IC_kwDOABII5844BlEZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939938073/reactions"
      },
      "updated_at" : "2021-10-11T11:23:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939938073",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased 974227bb4576288795984085387ae0802fc3066e -> befad5eef168a193b142c4e6a1d0f120a85aae65 to fix conflict with #22794\r\n\r\n\r\n",
      "created_at" : "2021-10-11T12:36:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-939990697",
      "id" : 939990697,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "IC_kwDOABII5844Bx6p",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939990697/reactions"
      },
      "updated_at" : "2021-10-11T12:36:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939990697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Also added a new commit 9048249bf003891573e60bf9b8c8ddd4a4cefa1a (\"Add lots of comments to Bech32\") which, as the name suggests, adds a lot of explanatory comments to the Bech32 code to assist reviewers and better document the behaviour - up til this point, there was no documentation of how this process works or how to verify the constants.",
      "created_at" : "2021-10-11T12:40:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-939992979",
      "id" : 939992979,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "IC_kwDOABII5844ByeT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939992979/reactions"
      },
      "updated_at" : "2021-10-11T12:40:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939992979",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Btw, if you leave the \"Needs rebase\" label for me to remove, I will also remove all my previous rebase comments, keeping the discussion thread clean.",
      "created_at" : "2021-10-11T12:40:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-939993269",
      "id" : 939993269,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "IC_kwDOABII5844Byi1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 3,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 3,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939993269/reactions"
      },
      "updated_at" : "2021-10-11T12:40:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/939993269",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@gmaxwell you may also like to review  ",
      "created_at" : "2021-10-11T22:42:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-940496844",
      "id" : 940496844,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "IC_kwDOABII5844DtfM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940496844/reactions"
      },
      "updated_at" : "2021-10-11T22:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940496844",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r732987884"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732987884"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Add Bech32 error location function\" (b62b67e06cc406fdad68da4c091168fb5f11c1d4)\r\n\r\nComment is out of date",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-20T17:14:22Z",
      "diff_hunk" : "@@ -127,12 +276,73 @@ uint32_t PolyMod(const data& v)\n     return c;\n }\n \n+uint32_t Syndrome(const uint32_t residue) {\n+    uint32_t low = residue & 0x1f;\n+    return low ^ (low << 10) ^ (low << 20) ^\n+        ((residue >> 5) & 1 ? 0x31edd3c4 : 0) ^\n+        ((residue >> 6) & 1 ? 0x335f86a8 : 0) ^\n+        ((residue >> 7) & 1 ? 0x363b8870 : 0) ^\n+        ((residue >> 8) & 1 ? 0x3e6390c9 : 0) ^\n+        ((residue >> 9) & 1 ? 0x2ec72192 : 0) ^\n+        ((residue >> 10) & 1 ? 0x1046f79d : 0) ^\n+        ((residue >> 11) & 1 ? 0x208d4e33 : 0) ^\n+        ((residue >> 12) & 1 ? 0x130ebd6f : 0) ^\n+        ((residue >> 13) & 1 ? 0x2499fade : 0) ^\n+        ((residue >> 14) & 1 ? 0x1b27d4b5 : 0) ^\n+        ((residue >> 15) & 1 ? 0x04be1eb4 : 0) ^\n+        ((residue >> 16) & 1 ? 0x0968b861 : 0) ^\n+        ((residue >> 17) & 1 ? 0x1055f0c2 : 0) ^\n+        ((residue >> 18) & 1 ? 0x20ab4584 : 0) ^\n+        ((residue >> 19) & 1 ? 0x1342af08 : 0) ^\n+        ((residue >> 20) & 1 ? 0x24f1f318 : 0) ^\n+        ((residue >> 21) & 1 ? 0x1be34739 : 0) ^\n+        ((residue >> 22) & 1 ? 0x35562f7b : 0) ^\n+        ((residue >> 23) & 1 ? 0x3a3c5bff : 0) ^\n+        ((residue >> 24) & 1 ? 0x266c96f7 : 0) ^\n+        ((residue >> 25) & 1 ? 0x25c78b65 : 0) ^\n+        ((residue >> 26) & 1 ? 0x1b1f13ea : 0) ^\n+        ((residue >> 27) & 1 ? 0x34baa2f4 : 0) ^\n+        ((residue >> 28) & 1 ? 0x3b61c0e1 : 0) ^\n+        ((residue >> 29) & 1 ? 0x265325c2 : 0);\n+}\n+\n /** Convert to lower case. */\n inline unsigned char LowerCase(unsigned char c)\n {\n     return (c >= 'A' && c <= 'Z') ? (c - 'A') + 'a' : c;\n }\n \n+void push_range(int from, int to, std::vector<int>& vec)\n+{\n+    for (int i = from; i < to; i++) {\n+        vec.push_back(i);\n+    }\n+}\n+\n+/** Return index of first invalid character in a Bech32 string. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r732987884",
      "id" : 732987884,
      "line" : 394,
      "node_id" : "PRRC_kwDOABII584rsIHs",
      "original_commit_id" : "b62b67e06cc406fdad68da4c091168fb5f11c1d4",
      "original_line" : 322,
      "original_position" : 203,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : 280,
      "pull_request_review_id" : 784779513,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732987884/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-21T03:12:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732987884",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r732993382"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732993382"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Add Bech32 error location function\" (b62b67e06cc406fdad68da4c091168fb5f11c1d4)\r\n\r\nThese lines could be moved into a function and deduplicated with lines 415-424 above.\r\n\r\nMaybe not worth it because a PR that affects address decoding is more dangerous than a PR that just changes error detection.",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-20T17:21:53Z",
      "diff_hunk" : "@@ -227,4 +431,103 @@ DecodeResult Decode(const std::string& str) {\n     return {result, std::move(hrp), data(values.begin(), values.end() - 6)};\n }\n \n+/** Find index of an incorrect character in a Bech32 string. */\n+std::string LocateErrors(const std::string& str, std::vector<int>& error_locations) {\n+    if (str.size() > 90) {\n+        push_range(90, str.size(), error_locations);\n+        return \"Bech32 string too long\";\n+    }\n+    if (!CheckCharacters(str, error_locations)){\n+        return \"Invalid character or mixed case\";\n+    }\n+    size_t pos = str.rfind('1');\n+    if (pos == str.npos) {\n+        return \"Missing separator\";\n+    }\n+    if (pos == 0 || pos + 7 > str.size()) {\n+        error_locations.push_back(pos);\n+        return \"Invalid separator position\";\n+    }\n+    std::string hrp;\n+    for (size_t i = 0; i < pos; ++i) {\n+        hrp += LowerCase(str[i]);\n+    }\n+\n+    size_t length = str.size() - 1 - pos; // length of data part\n+    data values(length);\n+    for (size_t i = pos + 1; i < str.size(); ++i) {\n+        unsigned char c = str[i];\n+        int8_t rev = CHARSET_REV[c];\n+        if (rev == -1) {\n+            error_locations.push_back(i);\n+            return \"Invalid Base 32 character\";\n+        }\n+        values[i - pos - 1] = rev;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r732993382",
      "id" : 732993382,
      "line" : 538,
      "node_id" : "PRRC_kwDOABII584rsJdm",
      "original_commit_id" : "b62b67e06cc406fdad68da4c091168fb5f11c1d4",
      "original_line" : 466,
      "original_position" : 283,
      "original_start_line" : 456,
      "path" : "src/bech32.cpp",
      "position" : 360,
      "pull_request_review_id" : 784779513,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732993382/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 528,
      "start_side" : "RIGHT",
      "updated_at" : "2021-10-21T03:13:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732993382",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733076803"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733076803"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Add lots of comments to Bech32\" (5599813b80e53a1539c66625b4320ab1b4fb4848)\r\n\r\nCould write a unit test or constexpr compile time test to check this",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-20T19:19:17Z",
      "diff_hunk" : "@@ -30,6 +30,33 @@ const int8_t CHARSET_REV[128] = {\n      1,  0,  3, 16, 11, 28, 12, 14,  6,  4,  2, -1, -1, -1, -1, -1\n };\n \n+// We work with the finite field GF(1024) defined as a degree 2 extension of the base field GF(32)\n+// The defining polynomial of the extension is x^2 + 9x + 23\n+// Let (e) be a primitive element of GF(1024), that is, a generator of the field.\n+// Every non-zero element of the field can then be represented as (e)^k for some power k.\n+// The array GF1024_EXP contains all these powers of (e) - GF1024_EXP[k] = (e)^k in GF(1024).\n+// Conversely, GF1024_LOG contains the discrete logarithms of these powers, so\n+// GF1024_LOG[GF1024_EXP[k]] == k",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733076803",
      "id" : 733076803,
      "line" : 40,
      "node_id" : "PRRC_kwDOABII584rsd1D",
      "original_commit_id" : "5599813b80e53a1539c66625b4320ab1b4fb4848",
      "original_line" : 39,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : 16,
      "pull_request_review_id" : 784779513,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733076803/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-21T03:12:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733076803",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733182597"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733182597"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"More detailed error checking for base58 addresses\" (0b06e720c0182dee8b560d2e8d3891b036f63ea7)\r\n\r\nIs there something which guarantees `data` size is greater or equal to `script_prefix` and `pubkey_prefix` sizes? If not then, it seems like this can read uninitialized memory.\r\n\r\nWould suggest either adding `assert`'s to make it clear these cases won't happen, or else adding size checks to the `if` statement to handle these cases.",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-20T22:10:26Z",
      "diff_hunk" : "@@ -98,15 +102,27 @@ CTxDestination DecodeDestination(const std::string& str, const CChainParams& par\n             return ScriptHash(hash);\n         }\n \n-        // Set potential error message.\n-        // This message may be changed if the address can also be interpreted as a Bech32 address.\n-        error_str = \"Invalid prefix for Base58-encoded address\";\n+        if (!std::equal(script_prefix.begin(), script_prefix.end(), data.begin()) &&",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733182597",
      "id" : 733182597,
      "line" : 105,
      "node_id" : "PRRC_kwDOABII584rs3qF",
      "original_commit_id" : "0b06e720c0182dee8b560d2e8d3891b036f63ea7",
      "original_line" : 105,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/key_io.cpp",
      "position" : 26,
      "pull_request_review_id" : 784779513,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733182597/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-21T03:12:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733182597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733187173"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733187173"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"More detailed error checking for base58 addresses\" (0b06e720c0182dee8b560d2e8d3891b036f63ea7)\r\n\r\nIMO previous error message \"Invalid address format\" seems more understandable if you aren't an address format guru than \"Invalid HRP or Base58 character in address\". Maybe consider keeping the existing message or switching to something in between like \"Not a valid BECH32 or Base58 encoding\"",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-20T22:19:23Z",
      "diff_hunk" : "@@ -98,15 +102,27 @@ CTxDestination DecodeDestination(const std::string& str, const CChainParams& par\n             return ScriptHash(hash);\n         }\n \n-        // Set potential error message.\n-        // This message may be changed if the address can also be interpreted as a Bech32 address.\n-        error_str = \"Invalid prefix for Base58-encoded address\";\n+        if (!std::equal(script_prefix.begin(), script_prefix.end(), data.begin()) &&\n+            !std::equal(pubkey_prefix.begin(), pubkey_prefix.end(), data.begin())) {\n+            error_str = \"Invalid prefix for Base58-encoded address\";\n+        } else {\n+            error_str = \"Invalid length for Base58 address\";\n+        }\n+        return CNoDestination();\n+    } else if (!is_bech32) {\n+        // Try Base58 decoding without the checksum, using a much larger max length\n+        if (!DecodeBase58(str, data, 100)) {\n+            error_str = \"Invalid HRP or Base58 character in address\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733187173",
      "id" : 733187173,
      "line" : 115,
      "node_id" : "PRRC_kwDOABII584rs4xl",
      "original_commit_id" : "0b06e720c0182dee8b560d2e8d3891b036f63ea7",
      "original_line" : 115,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/key_io.cpp",
      "position" : 36,
      "pull_request_review_id" : 784779513,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733187173/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-21T03:12:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733187173",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733208374"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733208374"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Add Bech32 error location function\" (b62b67e06cc406fdad68da4c091168fb5f11c1d4)\r\n\r\nThis code doesn't seem particularly performance critical. Maybe it would be safer to use bounds checked array lookups instead of direct pointer accesses.",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-20T23:09:41Z",
      "diff_hunk" : "@@ -227,4 +431,103 @@ DecodeResult Decode(const std::string& str) {\n     return {result, std::move(hrp), data(values.begin(), values.end() - 6)};\n }\n \n+/** Find index of an incorrect character in a Bech32 string. */\n+std::string LocateErrors(const std::string& str, std::vector<int>& error_locations) {\n+    if (str.size() > 90) {\n+        push_range(90, str.size(), error_locations);\n+        return \"Bech32 string too long\";\n+    }\n+    if (!CheckCharacters(str, error_locations)){\n+        return \"Invalid character or mixed case\";\n+    }\n+    size_t pos = str.rfind('1');\n+    if (pos == str.npos) {\n+        return \"Missing separator\";\n+    }\n+    if (pos == 0 || pos + 7 > str.size()) {\n+        error_locations.push_back(pos);\n+        return \"Invalid separator position\";\n+    }\n+    std::string hrp;\n+    for (size_t i = 0; i < pos; ++i) {\n+        hrp += LowerCase(str[i]);\n+    }\n+\n+    size_t length = str.size() - 1 - pos; // length of data part\n+    data values(length);\n+    for (size_t i = pos + 1; i < str.size(); ++i) {\n+        unsigned char c = str[i];\n+        int8_t rev = CHARSET_REV[c];\n+        if (rev == -1) {\n+            error_locations.push_back(i);\n+            return \"Invalid Base 32 character\";\n+        }\n+        values[i - pos - 1] = rev;\n+    }\n+\n+    // We attempt error detection with both bech32 and bech32m, and choose the one with the fewest errors\n+    // We can't simply use the segwit version, because that may be one of the errors\n+    for (Encoding encoding : {Encoding::BECH32, Encoding::BECH32M}) {\n+        std::vector<int> possible_errors;\n+        uint32_t residue = PolyMod(Cat(ExpandHRP(hrp), values)) ^ EncodingConstant(encoding);\n+        if (residue != 0) {\n+            uint32_t syn = Syndrome(residue);\n+            int s0 = syn & 0x3FF;\n+            int s1 = (syn >> 10) & 0x3FF;\n+            int s2 = syn >> 20;\n+            int l_s0 = GF1024_LOG[s0];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733208374",
      "id" : 733208374,
      "line" : 561,
      "node_id" : "PRRC_kwDOABII584rs982",
      "original_commit_id" : "b62b67e06cc406fdad68da4c091168fb5f11c1d4",
      "original_line" : 478,
      "original_position" : 295,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : 383,
      "pull_request_review_id" : 784779513,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733208374/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-21T03:12:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733208374",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733211648"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733211648"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Add boost tests for bech32 error detection\" (c4979f77c1264f0099d1dfa278b1d9c18340b5f9)\r\n\r\nCould be good to `static_assert` that ERRORS and CASES arrays are the same size.",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-20T23:18:42Z",
      "diff_hunk" : "@@ -68,10 +68,36 @@ BOOST_AUTO_TEST_CASE(bech32_testvectors_invalid)\n         \"1qzzfhee\",\n         \"a12UEL5L\",\n         \"A12uEL5L\",\n+        \"abcdef1qpzrz9x8gf2tvdw0s3jn54khce6mua7lmqqqxw\",\n     };\n+    static const std::pair<std::string, int> ERRORS[] = {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733211648",
      "id" : 733211648,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII584rs-wA",
      "original_commit_id" : "c4979f77c1264f0099d1dfa278b1d9c18340b5f9",
      "original_line" : 73,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/test/bech32_tests.cpp",
      "position" : 12,
      "pull_request_review_id" : 784779513,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733211648/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-21T03:12:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733211648",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733268345"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733268345"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Add boost tests for bech32 error detection\" (c4979f77c1264f0099d1dfa278b1d9c18340b5f9)\r\n\r\nCould be good to `BOOST_CHECK_EQUAL(error_locations.size(), 1))`.\r\n\r\nCould also be good to add cases with size > 1 here, but less important since python tests cover some of these.\r\n\r\nSame suggestions could apply to bech32m test below",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-21T02:12:59Z",
      "diff_hunk" : "@@ -68,10 +68,36 @@ BOOST_AUTO_TEST_CASE(bech32_testvectors_invalid)\n         \"1qzzfhee\",\n         \"a12UEL5L\",\n         \"A12uEL5L\",\n+        \"abcdef1qpzrz9x8gf2tvdw0s3jn54khce6mua7lmqqqxw\",\n     };\n+    static const std::pair<std::string, int> ERRORS[] = {\n+        {\"Invalid character or mixed case\", 0},\n+        {\"Invalid character or mixed case\", 0},\n+        {\"Invalid character or mixed case\", 0},\n+        {\"Bech32 string too long\", 90},\n+        {\"Missing separator\", -1},\n+        {\"Invalid separator position\", 0},\n+        {\"Invalid Base 32 character\", 2},\n+        {\"Invalid separator position\", 2},\n+        {\"Invalid character or mixed case\", 8},\n+        {\"Invalid checksum\", -1}, // The checksum is calculated using the uppercase form so the entire string is invalid, not just a few characters\n+        {\"Invalid separator position\", 0},\n+        {\"Invalid separator position\", 0},\n+        {\"Invalid character or mixed case\", 3},\n+        {\"Invalid character or mixed case\", 3},\n+        {\"Invalid checksum\", 11}\n+    };\n+    int i = 0;\n     for (const std::string& str : CASES) {\n+        const auto& err = ERRORS[i];\n         const auto dec = bech32::Decode(str);\n         BOOST_CHECK(dec.encoding == bech32::Encoding::INVALID);\n+        std::vector<int> error_locations;\n+        std::string error = bech32::LocateErrors(str, error_locations);\n+        BOOST_CHECK_EQUAL(err.first, error);\n+        if (err.second == -1) BOOST_CHECK(error_locations.empty());\n+        else BOOST_CHECK_EQUAL(err.second, error_locations[0]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733268345",
      "id" : 733268345,
      "line" : 100,
      "node_id" : "PRRC_kwDOABII584rtMl5",
      "original_commit_id" : "c4979f77c1264f0099d1dfa278b1d9c18340b5f9",
      "original_line" : 99,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/test/bech32_tests.cpp",
      "position" : 38,
      "pull_request_review_id" : 784779513,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733268345/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-21T03:12:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733268345",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733273384"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733273384"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Add lots of comments to Bech32\" (5599813b80e53a1539c66625b4320ab1b4fb4848)\r\n\r\nIf check below is supposed to be a sanity check, shouldn't there be an assert, or a log, or a `push_back(-1)`, or some other indication if it fails? \r\n\r\nSame comment applies to other sanity checks and continue statements below. The descriptions here seem like they could be clearer about which of these conditions are possible to hit and which should be impossible.",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-21T02:29:22Z",
      "diff_hunk" : "@@ -469,44 +540,104 @@ std::string LocateErrors(const std::string& str, std::vector<int>& error_locatio\n     // We can't simply use the segwit version, because that may be one of the errors\n     for (Encoding encoding : {Encoding::BECH32, Encoding::BECH32M}) {\n         std::vector<int> possible_errors;\n+        // Recall that (ExpandHRP(hrp) ++ values) is interpreted as a list of coefficients of a polynomial\n+        // over GF(32). PolyMod computes the \"remainder\" of this polynomial modulo the generator G(x).\n         uint32_t residue = PolyMod(Cat(ExpandHRP(hrp), values)) ^ EncodingConstant(encoding);\n+\n+        // All valid codewords should be multiples of G(x), so this remainder (after XORing with the encoding\n+        // constant) should be 0 - hence 0 indicates there are no errors present.\n         if (residue != 0) {\n+            // If errors are present, our polynomial must be of the form C(x) + E(x) where C is the valid\n+            // codeword (a multiple of G(x)), and E encodes the errors.\n             uint32_t syn = Syndrome(residue);\n+\n+            // Unpack the three 10-bit syndrome values\n             int s0 = syn & 0x3FF;\n             int s1 = (syn >> 10) & 0x3FF;\n             int s2 = syn >> 20;\n+\n+            // Get the discrete logs of these values in GF1024 for more efficient computation\n             int l_s0 = GF1024_LOG[s0];\n             int l_s1 = GF1024_LOG[s1];\n             int l_s2 = GF1024_LOG[s2];\n \n+            // First, suppose there is only a single error. Then E(x) = e1*x^p1 for some position p1\n+            // Then s0 = E((e)^997) = e1*(e)^(997*p1) and s1 = E((e)^998) = e1*(e)^(998*p1)\n+            // Therefore s1/s0 = (e)^p1, and by the same logic, s2/s1 = (e)^p1 too.\n+            // Hence, s1^2 == s0*s2, which is exactly the condition we check first:\n             if (l_s0 != -1 && l_s1 != -1 && l_s2 != -1 && (2 * l_s1 - l_s2 - l_s0 + 2046) % 1023 == 0) {\n-                size_t p1 = (l_s1 - l_s0 + 1023) % 1023;\n+                // Compute the error position p1 as l_s1 - l_s0 = p1 (mod 1023)\n+                size_t p1 = (l_s1 - l_s0 + 1023) % 1023; // the +1023 ensures it is positive\n+                // Now because s0 = e1*(e)^(997*p1), we get e1 = s0/((e)^(997*p1)). Remember that (e)^1023 = 1,\n+                // so 1/((e)^997) = (e)^(1023-997).\n                 int l_e1 = l_s0 + (1023 - 997) * p1;\n+                // Finally, some sanity checks on the result:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733273384",
      "id" : 733273384,
      "line" : 575,
      "node_id" : "PRRC_kwDOABII584rtN0o",
      "original_commit_id" : "5599813b80e53a1539c66625b4320ab1b4fb4848",
      "original_line" : 574,
      "original_position" : 130,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : 397,
      "pull_request_review_id" : 784779513,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733273384/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-21T03:12:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733273384",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733280210"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733280210"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Add Bech32 error location function\" (b62b67e06cc406fdad68da4c091168fb5f11c1d4)\r\n\r\nMight be nice if this mentioned the encoding that was detected. I.e. add an `optional<Encoding> error_encoding` variable, and set: \r\n\r\n```c++\r\nerror_locations = std::move(possible_errors);\r\nerror_encoding = encoding;\r\n```\r\n\r\nand return:\r\n\r\n```c++\r\nreturn error_encoding == BECH32M ? \"Invalid bech32m checksum\" : error_encoding == BECH32 ? \"Invalid bech32 checksum\" : \"Invalid checksum\"\r\n```",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-21T02:49:51Z",
      "diff_hunk" : "@@ -227,4 +431,103 @@ DecodeResult Decode(const std::string& str) {\n     return {result, std::move(hrp), data(values.begin(), values.end() - 6)};\n }\n \n+/** Find index of an incorrect character in a Bech32 string. */\n+std::string LocateErrors(const std::string& str, std::vector<int>& error_locations) {\n+    if (str.size() > 90) {\n+        push_range(90, str.size(), error_locations);\n+        return \"Bech32 string too long\";\n+    }\n+    if (!CheckCharacters(str, error_locations)){\n+        return \"Invalid character or mixed case\";\n+    }\n+    size_t pos = str.rfind('1');\n+    if (pos == str.npos) {\n+        return \"Missing separator\";\n+    }\n+    if (pos == 0 || pos + 7 > str.size()) {\n+        error_locations.push_back(pos);\n+        return \"Invalid separator position\";\n+    }\n+    std::string hrp;\n+    for (size_t i = 0; i < pos; ++i) {\n+        hrp += LowerCase(str[i]);\n+    }\n+\n+    size_t length = str.size() - 1 - pos; // length of data part\n+    data values(length);\n+    for (size_t i = pos + 1; i < str.size(); ++i) {\n+        unsigned char c = str[i];\n+        int8_t rev = CHARSET_REV[c];\n+        if (rev == -1) {\n+            error_locations.push_back(i);\n+            return \"Invalid Base 32 character\";\n+        }\n+        values[i - pos - 1] = rev;\n+    }\n+\n+    // We attempt error detection with both bech32 and bech32m, and choose the one with the fewest errors\n+    // We can't simply use the segwit version, because that may be one of the errors\n+    for (Encoding encoding : {Encoding::BECH32, Encoding::BECH32M}) {\n+        std::vector<int> possible_errors;\n+        uint32_t residue = PolyMod(Cat(ExpandHRP(hrp), values)) ^ EncodingConstant(encoding);\n+        if (residue != 0) {\n+            uint32_t syn = Syndrome(residue);\n+            int s0 = syn & 0x3FF;\n+            int s1 = (syn >> 10) & 0x3FF;\n+            int s2 = syn >> 20;\n+            int l_s0 = GF1024_LOG[s0];\n+            int l_s1 = GF1024_LOG[s1];\n+            int l_s2 = GF1024_LOG[s2];\n+\n+            if (l_s0 != -1 && l_s1 != -1 && l_s2 != -1 && (2 * l_s1 - l_s2 - l_s0 + 2046) % 1023 == 0) {\n+                size_t p1 = (l_s1 - l_s0 + 1023) % 1023;\n+                int l_e1 = l_s0 + (1023 - 997) * p1;\n+                if (p1 < length && !(l_e1 % 33)) {\n+                    possible_errors.push_back(str.size() - p1 - 1);\n+                }\n+            } else {\n+                for (size_t p1 = 0; p1 < length; ++p1) {\n+                    int s2_s1p1 = s2 ^ (s1 == 0 ? 0 : GF1024_EXP[(l_s1 + p1) % 1023]);\n+                    if (s2_s1p1 == 0) continue;\n+\n+                    int s1_s0p1 = s1 ^ (s0 == 0 ? 0 : GF1024_EXP[(l_s0 + p1) % 1023]);\n+                    if (s1_s0p1 == 0) continue;\n+\n+                    int l_s1_s0p1 = GF1024_LOG[s1_s0p1];\n+                    size_t p2 = (GF1024_LOG[s2_s1p1] - l_s1_s0p1 + 1023) % 1023;\n+                    if (p2 >= length || p1 == p2) continue;\n+\n+                    int s1_s0p2 = s1 ^ (s0 == 0 ? 0 : GF1024_EXP[(l_s0 + p2) % 1023]);\n+                    if (s1_s0p2 == 0) continue;\n+\n+                    int inv_p1_p2 = 1023 - GF1024_LOG[GF1024_EXP[p1] ^ GF1024_EXP[p2]];\n+                    int l_e2 = l_s1_s0p1 + inv_p1_p2 + (1023 - 997) * p2;\n+                    if (l_e2 % 33) continue;\n+\n+                    int l_e1 = GF1024_LOG[s1_s0p2] + inv_p1_p2 + (1023 - 997) * p1;\n+                    if (l_e1 % 33) continue;\n+\n+                    if (p1 > p2) {\n+                        possible_errors.push_back(str.size() - p1 - 1);\n+                        possible_errors.push_back(str.size() - p2 - 1);\n+                    } else {\n+                        possible_errors.push_back(str.size() - p2 - 1);\n+                        possible_errors.push_back(str.size() - p1 - 1);\n+                    }\n+                    break;\n+                }\n+            }\n+        } else {\n+            // No errors\n+            error_locations.clear();\n+            return \"\";\n+        }\n+\n+        if (error_locations.empty() || (!possible_errors.empty() && possible_errors.size() < error_locations.size())) {\n+            error_locations = std::move(possible_errors);\n+        }\n+    }\n+    return \"Invalid checksum\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733280210",
      "id" : 733280210,
      "line" : 662,
      "node_id" : "PRRC_kwDOABII584rtPfS",
      "original_commit_id" : "b62b67e06cc406fdad68da4c091168fb5f11c1d4",
      "original_line" : 530,
      "original_position" : 347,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : 484,
      "pull_request_review_id" : 784779513,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733280210/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-21T03:12:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733280210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733282751"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733282751"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Add release notes for validateaddress Bech32 error detection\" (2eb5792ec7bbeaf7138420b6c85c5cd0a0404946)\r\n\r\nMaybe mention that validateaddress returns new more specific error strings if an address can't be decoded.\r\n\r\nAlso \"optionally returns\" here seems a little misleading since this isn't an option the caller can control. Would maybe just say it returns error locations whenever it's possible to determine them.",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-21T02:57:34Z",
      "diff_hunk" : "@@ -0,0 +1,6 @@\n+Updated RPCs\n+------------\n+\n+- The `validateaddress` RPC now optionally returns an `error_locations` array, with the indices of",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733282751",
      "id" : 733282751,
      "line" : 4,
      "node_id" : "PRRC_kwDOABII584rtQG_",
      "original_commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "original_line" : 4,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/release-notes-16807.md",
      "position" : 4,
      "pull_request_review_id" : 784779513,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733282751/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-21T03:12:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733282751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733423395"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733423395"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This would be simple to add yep  ",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-21T08:07:24Z",
      "diff_hunk" : "@@ -30,6 +30,33 @@ const int8_t CHARSET_REV[128] = {\n      1,  0,  3, 16, 11, 28, 12, 14,  6,  4,  2, -1, -1, -1, -1, -1\n };\n \n+// We work with the finite field GF(1024) defined as a degree 2 extension of the base field GF(32)\n+// The defining polynomial of the extension is x^2 + 9x + 23\n+// Let (e) be a primitive element of GF(1024), that is, a generator of the field.\n+// Every non-zero element of the field can then be represented as (e)^k for some power k.\n+// The array GF1024_EXP contains all these powers of (e) - GF1024_EXP[k] = (e)^k in GF(1024).\n+// Conversely, GF1024_LOG contains the discrete logarithms of these powers, so\n+// GF1024_LOG[GF1024_EXP[k]] == k",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733423395",
      "id" : 733423395,
      "in_reply_to_id" : 733076803,
      "line" : 40,
      "node_id" : "PRRC_kwDOABII584rtycj",
      "original_commit_id" : "5599813b80e53a1539c66625b4320ab1b4fb4848",
      "original_line" : 39,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : 16,
      "pull_request_review_id" : 785345905,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733423395/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-21T08:07:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733423395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for the detailed review and suggestions @ryanofsky. I'll definitely either incorporate them here or in a follow-up :)",
      "created_at" : "2021-10-21T08:10:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-948365748",
      "id" : 948365748,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "IC_kwDOABII5844hum0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/948365748/reactions"
      },
      "updated_at" : "2021-10-21T08:10:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/948365748",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r735354483"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/735354483"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Consider another `DecodeDestination` overload to avoid pointer to vector: https://github.com/promag/bitcoin/commit/94ca6b403e221f12830ea50158547f1142c67230",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-25T08:08:52Z",
      "diff_hunk" : "@@ -23,7 +23,7 @@ std::string EncodeExtPubKey(const CExtPubKey& extpubkey);\n \n std::string EncodeDestination(const CTxDestination& dest);\n CTxDestination DecodeDestination(const std::string& str);\n-CTxDestination DecodeDestination(const std::string& str, std::string& error_msg);\n+CTxDestination DecodeDestination(const std::string& str, std::string& error_msg, std::vector<int>* error_locations = nullptr);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r735354483",
      "id" : 735354483,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII584r1J5z",
      "original_commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "original_line" : 26,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/key_io.h",
      "position" : 5,
      "pull_request_review_id" : 787784298,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/735354483/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-25T08:08:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/735354483",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r735594827"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/735594827"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Suggestion seems fine, but no reasoning is given, and it's not clearly an improvement. Google's  \"[Use non-const pointers to represent optional outputs](https://google.github.io/styleguide/cppguide.html#Inputs_and_Outputs)\" which is what current code is doing does make it easier to distinguish output arguments from input arguments at call sites.",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-10-25T13:24:06Z",
      "diff_hunk" : "@@ -23,7 +23,7 @@ std::string EncodeExtPubKey(const CExtPubKey& extpubkey);\n \n std::string EncodeDestination(const CTxDestination& dest);\n CTxDestination DecodeDestination(const std::string& str);\n-CTxDestination DecodeDestination(const std::string& str, std::string& error_msg);\n+CTxDestination DecodeDestination(const std::string& str, std::string& error_msg, std::vector<int>* error_locations = nullptr);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r735594827",
      "id" : 735594827,
      "in_reply_to_id" : 735354483,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII584r2ElL",
      "original_commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "original_line" : 26,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/key_io.h",
      "position" : 5,
      "pull_request_review_id" : 788114045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/735594827/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-25T13:24:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/735594827",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r750689669"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750689669"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@ryanofsky Agree, I think this needs a length check.",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-11-16T21:50:01Z",
      "diff_hunk" : "@@ -98,15 +102,27 @@ CTxDestination DecodeDestination(const std::string& str, const CChainParams& par\n             return ScriptHash(hash);\n         }\n \n-        // Set potential error message.\n-        // This message may be changed if the address can also be interpreted as a Bech32 address.\n-        error_str = \"Invalid prefix for Base58-encoded address\";\n+        if (!std::equal(script_prefix.begin(), script_prefix.end(), data.begin()) &&",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r750689669",
      "id" : 750689669,
      "in_reply_to_id" : 733182597,
      "line" : 105,
      "node_id" : "PRRC_kwDOABII584svp2F",
      "original_commit_id" : "0b06e720c0182dee8b560d2e8d3891b036f63ea7",
      "original_line" : 105,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/key_io.cpp",
      "position" : 26,
      "pull_request_review_id" : 807873214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750689669/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-22T13:38:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750689669",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r750703750"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750703750"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Instead of this function, it may be worth just using [`std::iota`](https://en.cppreference.com/w/cpp/algorithm/iota).\r\n\r\nThe function is equivalent to:\r\n\r\n```c++\r\nvoid push_range(int from, int to, std::vector<int>& vec)\r\n{\r\n    vec.resize(to - from);\r\n    std::iota(vec.begin(), vec.end(), from);\r\n}\r\n```\r\n\r\nBut I suggest just doing that directly in the call sites.",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-11-16T22:12:56Z",
      "diff_hunk" : "@@ -127,12 +276,73 @@ uint32_t PolyMod(const data& v)\n     return c;\n }\n \n+uint32_t Syndrome(const uint32_t residue) {\n+    uint32_t low = residue & 0x1f;\n+    return low ^ (low << 10) ^ (low << 20) ^\n+        ((residue >> 5) & 1 ? 0x31edd3c4 : 0) ^\n+        ((residue >> 6) & 1 ? 0x335f86a8 : 0) ^\n+        ((residue >> 7) & 1 ? 0x363b8870 : 0) ^\n+        ((residue >> 8) & 1 ? 0x3e6390c9 : 0) ^\n+        ((residue >> 9) & 1 ? 0x2ec72192 : 0) ^\n+        ((residue >> 10) & 1 ? 0x1046f79d : 0) ^\n+        ((residue >> 11) & 1 ? 0x208d4e33 : 0) ^\n+        ((residue >> 12) & 1 ? 0x130ebd6f : 0) ^\n+        ((residue >> 13) & 1 ? 0x2499fade : 0) ^\n+        ((residue >> 14) & 1 ? 0x1b27d4b5 : 0) ^\n+        ((residue >> 15) & 1 ? 0x04be1eb4 : 0) ^\n+        ((residue >> 16) & 1 ? 0x0968b861 : 0) ^\n+        ((residue >> 17) & 1 ? 0x1055f0c2 : 0) ^\n+        ((residue >> 18) & 1 ? 0x20ab4584 : 0) ^\n+        ((residue >> 19) & 1 ? 0x1342af08 : 0) ^\n+        ((residue >> 20) & 1 ? 0x24f1f318 : 0) ^\n+        ((residue >> 21) & 1 ? 0x1be34739 : 0) ^\n+        ((residue >> 22) & 1 ? 0x35562f7b : 0) ^\n+        ((residue >> 23) & 1 ? 0x3a3c5bff : 0) ^\n+        ((residue >> 24) & 1 ? 0x266c96f7 : 0) ^\n+        ((residue >> 25) & 1 ? 0x25c78b65 : 0) ^\n+        ((residue >> 26) & 1 ? 0x1b1f13ea : 0) ^\n+        ((residue >> 27) & 1 ? 0x34baa2f4 : 0) ^\n+        ((residue >> 28) & 1 ? 0x3b61c0e1 : 0) ^\n+        ((residue >> 29) & 1 ? 0x265325c2 : 0);\n+}\n+\n /** Convert to lower case. */\n inline unsigned char LowerCase(unsigned char c)\n {\n     return (c >= 'A' && c <= 'Z') ? (c - 'A') + 'a' : c;\n }\n \n+void push_range(int from, int to, std::vector<int>& vec)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r750703750",
      "id" : 750703750,
      "line" : 387,
      "node_id" : "PRRC_kwDOABII584svtSG",
      "original_commit_id" : "b62b67e06cc406fdad68da4c091168fb5f11c1d4",
      "original_line" : 315,
      "original_position" : 196,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : 273,
      "pull_request_review_id" : 807873214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750703750/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-22T13:38:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750703750",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r750715504"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750715504"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Well, you can reject (and not return) candidates for which the checksum type mismatches the witness version (bech32 for 0, bech32m for 1+) AND the character that identifies the witness version is not one of the error locations.",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-11-16T22:33:03Z",
      "diff_hunk" : "@@ -227,4 +431,103 @@ DecodeResult Decode(const std::string& str) {\n     return {result, std::move(hrp), data(values.begin(), values.end() - 6)};\n }\n \n+/** Find index of an incorrect character in a Bech32 string. */\n+std::string LocateErrors(const std::string& str, std::vector<int>& error_locations) {\n+    if (str.size() > 90) {\n+        push_range(90, str.size(), error_locations);\n+        return \"Bech32 string too long\";\n+    }\n+    if (!CheckCharacters(str, error_locations)){\n+        return \"Invalid character or mixed case\";\n+    }\n+    size_t pos = str.rfind('1');\n+    if (pos == str.npos) {\n+        return \"Missing separator\";\n+    }\n+    if (pos == 0 || pos + 7 > str.size()) {\n+        error_locations.push_back(pos);\n+        return \"Invalid separator position\";\n+    }\n+    std::string hrp;\n+    for (size_t i = 0; i < pos; ++i) {\n+        hrp += LowerCase(str[i]);\n+    }\n+\n+    size_t length = str.size() - 1 - pos; // length of data part\n+    data values(length);\n+    for (size_t i = pos + 1; i < str.size(); ++i) {\n+        unsigned char c = str[i];\n+        int8_t rev = CHARSET_REV[c];\n+        if (rev == -1) {\n+            error_locations.push_back(i);\n+            return \"Invalid Base 32 character\";\n+        }\n+        values[i - pos - 1] = rev;\n+    }\n+\n+    // We attempt error detection with both bech32 and bech32m, and choose the one with the fewest errors\n+    // We can't simply use the segwit version, because that may be one of the errors",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r750715504",
      "id" : 750715504,
      "line" : 541,
      "node_id" : "PRRC_kwDOABII584svwJw",
      "original_commit_id" : "b62b67e06cc406fdad68da4c091168fb5f11c1d4",
      "original_line" : 469,
      "original_position" : 286,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : 363,
      "pull_request_review_id" : 807873214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750715504/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-22T13:38:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750715504",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r750716346"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750716346"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@ryanofsky Alternatively, would it help if there was an (additional) `& 0x3FF` inside the `[]`?",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-11-16T22:34:41Z",
      "diff_hunk" : "@@ -227,4 +431,103 @@ DecodeResult Decode(const std::string& str) {\n     return {result, std::move(hrp), data(values.begin(), values.end() - 6)};\n }\n \n+/** Find index of an incorrect character in a Bech32 string. */\n+std::string LocateErrors(const std::string& str, std::vector<int>& error_locations) {\n+    if (str.size() > 90) {\n+        push_range(90, str.size(), error_locations);\n+        return \"Bech32 string too long\";\n+    }\n+    if (!CheckCharacters(str, error_locations)){\n+        return \"Invalid character or mixed case\";\n+    }\n+    size_t pos = str.rfind('1');\n+    if (pos == str.npos) {\n+        return \"Missing separator\";\n+    }\n+    if (pos == 0 || pos + 7 > str.size()) {\n+        error_locations.push_back(pos);\n+        return \"Invalid separator position\";\n+    }\n+    std::string hrp;\n+    for (size_t i = 0; i < pos; ++i) {\n+        hrp += LowerCase(str[i]);\n+    }\n+\n+    size_t length = str.size() - 1 - pos; // length of data part\n+    data values(length);\n+    for (size_t i = pos + 1; i < str.size(); ++i) {\n+        unsigned char c = str[i];\n+        int8_t rev = CHARSET_REV[c];\n+        if (rev == -1) {\n+            error_locations.push_back(i);\n+            return \"Invalid Base 32 character\";\n+        }\n+        values[i - pos - 1] = rev;\n+    }\n+\n+    // We attempt error detection with both bech32 and bech32m, and choose the one with the fewest errors\n+    // We can't simply use the segwit version, because that may be one of the errors\n+    for (Encoding encoding : {Encoding::BECH32, Encoding::BECH32M}) {\n+        std::vector<int> possible_errors;\n+        uint32_t residue = PolyMod(Cat(ExpandHRP(hrp), values)) ^ EncodingConstant(encoding);\n+        if (residue != 0) {\n+            uint32_t syn = Syndrome(residue);\n+            int s0 = syn & 0x3FF;\n+            int s1 = (syn >> 10) & 0x3FF;\n+            int s2 = syn >> 20;\n+            int l_s0 = GF1024_LOG[s0];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r750716346",
      "id" : 750716346,
      "in_reply_to_id" : 733208374,
      "line" : 561,
      "node_id" : "PRRC_kwDOABII584svwW6",
      "original_commit_id" : "b62b67e06cc406fdad68da4c091168fb5f11c1d4",
      "original_line" : 478,
      "original_position" : 295,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : 383,
      "pull_request_review_id" : 807873214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750716346/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-22T13:38:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750716346",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r750717990"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750717990"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Even nicer would be to have the tables be generated at compile time using a `constexpr` algorithm...",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-11-16T22:37:48Z",
      "diff_hunk" : "@@ -30,6 +30,33 @@ const int8_t CHARSET_REV[128] = {\n      1,  0,  3, 16, 11, 28, 12, 14,  6,  4,  2, -1, -1, -1, -1, -1\n };\n \n+// We work with the finite field GF(1024) defined as a degree 2 extension of the base field GF(32)\n+// The defining polynomial of the extension is x^2 + 9x + 23\n+// Let (e) be a primitive element of GF(1024), that is, a generator of the field.\n+// Every non-zero element of the field can then be represented as (e)^k for some power k.\n+// The array GF1024_EXP contains all these powers of (e) - GF1024_EXP[k] = (e)^k in GF(1024).\n+// Conversely, GF1024_LOG contains the discrete logarithms of these powers, so\n+// GF1024_LOG[GF1024_EXP[k]] == k",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r750717990",
      "id" : 750717990,
      "in_reply_to_id" : 733076803,
      "line" : 40,
      "node_id" : "PRRC_kwDOABII584svwwm",
      "original_commit_id" : "5599813b80e53a1539c66625b4320ab1b4fb4848",
      "original_line" : 39,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : 16,
      "pull_request_review_id" : 807873214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750717990/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-22T13:38:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750717990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r754169798"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754169798"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agree with @ryanofsky here. References are hard to read as output arguments.\r\nIf you're going to make a separate function declaration, I'd prefer a function that returns it as part of the return value. E.g. as a pair or tuple.\r\nBut this is fine as-is.",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-11-22T11:11:33Z",
      "diff_hunk" : "@@ -23,7 +23,7 @@ std::string EncodeExtPubKey(const CExtPubKey& extpubkey);\n \n std::string EncodeDestination(const CTxDestination& dest);\n CTxDestination DecodeDestination(const std::string& str);\n-CTxDestination DecodeDestination(const std::string& str, std::string& error_msg);\n+CTxDestination DecodeDestination(const std::string& str, std::string& error_msg, std::vector<int>* error_locations = nullptr);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r754169798",
      "id" : 754169798,
      "in_reply_to_id" : 735354483,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII584s87fG",
      "original_commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "original_line" : 26,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/key_io.h",
      "position" : 5,
      "pull_request_review_id" : 812378786,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754169798/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-22T11:11:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754169798",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review and manually tested ACK 88cc4810926e4f5af6757ee1b0eed61abda3d746\r\nThanks for adding all the bech32 comments.",
      "created_at" : "2021-11-22T12:17:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-975463270",
      "id" : 975463270,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "IC_kwDOABII5846JGNm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 1,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/975463270/reactions"
      },
      "updated_at" : "2021-11-22T12:17:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/975463270",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for the review comments (and the merge)! I will open a follow-up PR today.",
      "created_at" : "2021-11-23T00:09:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#issuecomment-976025599",
      "id" : 976025599,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16807",
      "node_id" : "IC_kwDOABII5846LPf_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/976025599/reactions"
      },
      "updated_at" : "2021-11-23T00:10:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/976025599",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r754747203"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754747203"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/16807#discussion_r733208374\r\n\r\n> @ryanofsky Alternatively, would it help if there was an (additional) `& 0x3FF` inside the `[]`?\r\n\r\nI think most ideal thing would be for it to use something like [`std::array::at`](https://en.cppreference.com/w/cpp/container/array/at) and throw an exception in case of a bug. Alternative of adding `& 0x3FF` to lookups could help avoid undefined behavior, but also clutter the code and mask potential bugs. What's best just depends on what your priorities are. No strong opinions from me!\r\n",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-11-23T01:20:56Z",
      "diff_hunk" : "@@ -227,4 +431,103 @@ DecodeResult Decode(const std::string& str) {\n     return {result, std::move(hrp), data(values.begin(), values.end() - 6)};\n }\n \n+/** Find index of an incorrect character in a Bech32 string. */\n+std::string LocateErrors(const std::string& str, std::vector<int>& error_locations) {\n+    if (str.size() > 90) {\n+        push_range(90, str.size(), error_locations);\n+        return \"Bech32 string too long\";\n+    }\n+    if (!CheckCharacters(str, error_locations)){\n+        return \"Invalid character or mixed case\";\n+    }\n+    size_t pos = str.rfind('1');\n+    if (pos == str.npos) {\n+        return \"Missing separator\";\n+    }\n+    if (pos == 0 || pos + 7 > str.size()) {\n+        error_locations.push_back(pos);\n+        return \"Invalid separator position\";\n+    }\n+    std::string hrp;\n+    for (size_t i = 0; i < pos; ++i) {\n+        hrp += LowerCase(str[i]);\n+    }\n+\n+    size_t length = str.size() - 1 - pos; // length of data part\n+    data values(length);\n+    for (size_t i = pos + 1; i < str.size(); ++i) {\n+        unsigned char c = str[i];\n+        int8_t rev = CHARSET_REV[c];\n+        if (rev == -1) {\n+            error_locations.push_back(i);\n+            return \"Invalid Base 32 character\";\n+        }\n+        values[i - pos - 1] = rev;\n+    }\n+\n+    // We attempt error detection with both bech32 and bech32m, and choose the one with the fewest errors\n+    // We can't simply use the segwit version, because that may be one of the errors\n+    for (Encoding encoding : {Encoding::BECH32, Encoding::BECH32M}) {\n+        std::vector<int> possible_errors;\n+        uint32_t residue = PolyMod(Cat(ExpandHRP(hrp), values)) ^ EncodingConstant(encoding);\n+        if (residue != 0) {\n+            uint32_t syn = Syndrome(residue);\n+            int s0 = syn & 0x3FF;\n+            int s1 = (syn >> 10) & 0x3FF;\n+            int s2 = syn >> 20;\n+            int l_s0 = GF1024_LOG[s0];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r754747203",
      "id" : 754747203,
      "in_reply_to_id" : 733208374,
      "line" : 561,
      "node_id" : "PRRC_kwDOABII584s_IdD",
      "original_commit_id" : "b62b67e06cc406fdad68da4c091168fb5f11c1d4",
      "original_line" : 478,
      "original_position" : 295,
      "original_start_line" : null,
      "path" : "src/bech32.cpp",
      "position" : 383,
      "pull_request_review_id" : 813160004,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754747203/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-23T01:20:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754747203",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r756879880"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/756879880"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Error: attempt to subscript a past-the-end iterator 1 step from its current \r\nposition, which falls outside its dereferenceable range.\r\n\r\nhttps://bugs.chromium.org/p/oss-fuzz/issues/detail?id=41364",
      "commit_id" : "88cc4810926e4f5af6757ee1b0eed61abda3d746",
      "created_at" : "2021-11-25T13:14:51Z",
      "diff_hunk" : "@@ -98,15 +102,27 @@ CTxDestination DecodeDestination(const std::string& str, const CChainParams& par\n             return ScriptHash(hash);\n         }\n \n-        // Set potential error message.\n-        // This message may be changed if the address can also be interpreted as a Bech32 address.\n-        error_str = \"Invalid prefix for Base58-encoded address\";\n+        if (!std::equal(script_prefix.begin(), script_prefix.end(), data.begin()) &&",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16807#discussion_r756879880",
      "id" : 756879880,
      "in_reply_to_id" : 733182597,
      "line" : 105,
      "node_id" : "PRRC_kwDOABII584tHRII",
      "original_commit_id" : "0b06e720c0182dee8b560d2e8d3891b036f63ea7",
      "original_line" : 105,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/key_io.cpp",
      "position" : 26,
      "pull_request_review_id" : 815975191,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/756879880/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-25T13:14:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/756879880",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
