[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@practicalswift I'm sorry this took so long. Ready for review.",
      "created_at" : "2020-09-05T17:23:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-687638781",
      "id" : 687638781,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NzYzODc4MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-05T17:23:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687638781",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@n-thumann Thank you, for the prompt review.",
      "created_at" : "2020-09-05T17:24:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-687638879",
      "id" : 687638879,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NzYzODg3OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-05T17:24:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687638879",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483972811"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483972811"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit:\r\n\r\n```suggestion\r\n        const bool dnsseed = gArgs.GetBoolArg(\"-dnsseed\", DEFAULT_DNSSEED);\r\n```",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-09-05T17:52:08Z",
      "diff_hunk" : "@@ -1841,19 +1841,22 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         if (interruptNet)\n             return;\n \n-        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).\n-        // Note that we only do this if we started with an empty peers.dat,\n-        // (in which case we will query DNS seeds immediately) *and* the DNS\n-        // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n-            static bool done = false;\n-            if (!done) {\n+        // If we started with an empty peers.dat, we will query DNS seeds immediately.\n+        // Here we allow 60 seconds for the DNS seeds to return results. If they do not\n+        // return any results, or if they were disabled with -dnsseed=0, we add\n+        // the fixed seeds.\n+        bool dnsseed = gArgs.GetBoolArg(\"-dnsseed\", DEFAULT_DNSSEED);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483972811",
      "id" : 483972811,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk3MjgxMQ==",
      "original_commit_id" : "bcbd637bcfe45d94fbe27688a35d071e6bcd8411",
      "original_line" : 1848,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 483069579,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483972811",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483973013"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483973013"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: Personally I find `if-else` logic easier to read if starting with the truthy case. In this specific case: starting with the `if (dnsseed) {` case and handle the `!dnsseed` case in the `else` block :)",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-09-05T17:54:47Z",
      "diff_hunk" : "@@ -1841,19 +1841,22 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         if (interruptNet)\n             return;\n \n-        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).\n-        // Note that we only do this if we started with an empty peers.dat,\n-        // (in which case we will query DNS seeds immediately) *and* the DNS\n-        // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n-            static bool done = false;\n-            if (!done) {\n+        // If we started with an empty peers.dat, we will query DNS seeds immediately.\n+        // Here we allow 60 seconds for the DNS seeds to return results. If they do not\n+        // return any results, or if they were disabled with -dnsseed=0, we add\n+        // the fixed seeds.\n+        bool dnsseed = gArgs.GetBoolArg(\"-dnsseed\", DEFAULT_DNSSEED);\n+        if (addrman.size() == 0 &&\n+            ((GetTime() - nStart > 60) || !dnsseed)) {\n+            if (!dnsseed) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483973013",
      "id" : 483973013,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk3MzAxMw==",
      "original_commit_id" : "bcbd637bcfe45d94fbe27688a35d071e6bcd8411",
      "original_line" : 1851,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 483069736,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483973013",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483973781"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483973781"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Might be outside the scope of this PR, but ISTM`GetTime()` is deprecated; see `src/util/time.h`.",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-09-05T18:02:41Z",
      "diff_hunk" : "@@ -1841,19 +1841,22 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         if (interruptNet)\n             return;\n \n-        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).\n-        // Note that we only do this if we started with an empty peers.dat,\n-        // (in which case we will query DNS seeds immediately) *and* the DNS\n-        // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n-            static bool done = false;\n-            if (!done) {\n+        // If we started with an empty peers.dat, we will query DNS seeds immediately.\n+        // Here we allow 60 seconds for the DNS seeds to return results. If they do not\n+        // return any results, or if they were disabled with -dnsseed=0, we add\n+        // the fixed seeds.\n+        bool dnsseed = gArgs.GetBoolArg(\"-dnsseed\", DEFAULT_DNSSEED);\n+        if (addrman.size() == 0 &&\n+            ((GetTime() - nStart > 60) || !dnsseed)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483973781",
      "id" : 483973781,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk3Mzc4MQ==",
      "original_commit_id" : "bcbd637bcfe45d94fbe27688a35d071e6bcd8411",
      "original_line" : 1850,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 483070228,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483973781",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483974114"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483974114"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        if (addrman.empty() &&\r\n```",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-09-05T18:06:39Z",
      "diff_hunk" : "@@ -1841,19 +1841,22 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         if (interruptNet)\n             return;\n \n-        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).\n-        // Note that we only do this if we started with an empty peers.dat,\n-        // (in which case we will query DNS seeds immediately) *and* the DNS\n-        // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n-            static bool done = false;\n-            if (!done) {\n+        // If we started with an empty peers.dat, we will query DNS seeds immediately.\n+        // Here we allow 60 seconds for the DNS seeds to return results. If they do not\n+        // return any results, or if they were disabled with -dnsseed=0, we add\n+        // the fixed seeds.\n+        bool dnsseed = gArgs.GetBoolArg(\"-dnsseed\", DEFAULT_DNSSEED);\n+        if (addrman.size() == 0 &&",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483974114",
      "id" : 483974114,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk3NDExNA==",
      "original_commit_id" : "bcbd637bcfe45d94fbe27688a35d071e6bcd8411",
      "original_line" : 1849,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 483070228,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483974114",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483974410"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483974410"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done. Thanks for the catch.",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-09-05T18:10:23Z",
      "diff_hunk" : "@@ -1841,19 +1841,22 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         if (interruptNet)\n             return;\n \n-        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).\n-        // Note that we only do this if we started with an empty peers.dat,\n-        // (in which case we will query DNS seeds immediately) *and* the DNS\n-        // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n-            static bool done = false;\n-            if (!done) {\n+        // If we started with an empty peers.dat, we will query DNS seeds immediately.\n+        // Here we allow 60 seconds for the DNS seeds to return results. If they do not\n+        // return any results, or if they were disabled with -dnsseed=0, we add\n+        // the fixed seeds.\n+        bool dnsseed = gArgs.GetBoolArg(\"-dnsseed\", DEFAULT_DNSSEED);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483974410",
      "id" : 483974410,
      "in_reply_to_id" : 483972811,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk3NDQxMA==",
      "original_commit_id" : "bcbd637bcfe45d94fbe27688a35d071e6bcd8411",
      "original_line" : 1848,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 483070623,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483974410",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483974433"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483974433"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-09-05T18:10:31Z",
      "diff_hunk" : "@@ -1841,19 +1841,22 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         if (interruptNet)\n             return;\n \n-        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).\n-        // Note that we only do this if we started with an empty peers.dat,\n-        // (in which case we will query DNS seeds immediately) *and* the DNS\n-        // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n-            static bool done = false;\n-            if (!done) {\n+        // If we started with an empty peers.dat, we will query DNS seeds immediately.\n+        // Here we allow 60 seconds for the DNS seeds to return results. If they do not\n+        // return any results, or if they were disabled with -dnsseed=0, we add\n+        // the fixed seeds.\n+        bool dnsseed = gArgs.GetBoolArg(\"-dnsseed\", DEFAULT_DNSSEED);\n+        if (addrman.size() == 0 &&\n+            ((GetTime() - nStart > 60) || !dnsseed)) {\n+            if (!dnsseed) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483974433",
      "id" : 483974433,
      "in_reply_to_id" : 483973013,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk3NDQzMw==",
      "original_commit_id" : "bcbd637bcfe45d94fbe27688a35d071e6bcd8411",
      "original_line" : 1851,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 483070623,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483974433",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@dhruv I saw you removed the `done` logic: are you sure that `!addrman.empty()` is _guaranteed_ after `addrman.Add(convertSeed6(Params().FixedSeeds()), local);`? AFAICT that condition must be hold for the new code to be equivalent to the old code.",
      "created_at" : "2020-09-05T18:49:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-687647828",
      "id" : 687647828,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NzY0NzgyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-05T18:51:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687647828",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483995432"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483995432"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "no member named `empty` in `CAddrMan`. \r\n\r\nHappy to create one if that's what you are suggesting.",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-09-05T22:23:47Z",
      "diff_hunk" : "@@ -1841,19 +1841,22 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         if (interruptNet)\n             return;\n \n-        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).\n-        // Note that we only do this if we started with an empty peers.dat,\n-        // (in which case we will query DNS seeds immediately) *and* the DNS\n-        // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n-            static bool done = false;\n-            if (!done) {\n+        // If we started with an empty peers.dat, we will query DNS seeds immediately.\n+        // Here we allow 60 seconds for the DNS seeds to return results. If they do not\n+        // return any results, or if they were disabled with -dnsseed=0, we add\n+        // the fixed seeds.\n+        bool dnsseed = gArgs.GetBoolArg(\"-dnsseed\", DEFAULT_DNSSEED);\n+        if (addrman.size() == 0 &&",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483995432",
      "id" : 483995432,
      "in_reply_to_id" : 483974114,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk5NTQzMg==",
      "original_commit_id" : "bcbd637bcfe45d94fbe27688a35d071e6bcd8411",
      "original_line" : 1849,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 483098330,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483995432",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483997224"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483997224"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed.",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-09-05T22:49:02Z",
      "diff_hunk" : "@@ -1841,19 +1841,22 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         if (interruptNet)\n             return;\n \n-        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).\n-        // Note that we only do this if we started with an empty peers.dat,\n-        // (in which case we will query DNS seeds immediately) *and* the DNS\n-        // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n-            static bool done = false;\n-            if (!done) {\n+        // If we started with an empty peers.dat, we will query DNS seeds immediately.\n+        // Here we allow 60 seconds for the DNS seeds to return results. If they do not\n+        // return any results, or if they were disabled with -dnsseed=0, we add\n+        // the fixed seeds.\n+        bool dnsseed = gArgs.GetBoolArg(\"-dnsseed\", DEFAULT_DNSSEED);\n+        if (addrman.size() == 0 &&\n+            ((GetTime() - nStart > 60) || !dnsseed)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r483997224",
      "id" : 483997224,
      "in_reply_to_id" : 483973781,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk5NzIyNA==",
      "original_commit_id" : "bcbd637bcfe45d94fbe27688a35d071e6bcd8411",
      "original_line" : 1850,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 483098330,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483997224",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @dhruv I saw you removed the `done` logic: are you sure that `!addrman.empty()` is _guaranteed_ after `addrman.Add(convertSeed6(Params().FixedSeeds()), local);`? AFAICT that condition must be hold for the new code to be equivalent to the old code.\r\n\r\n@practicalswift Thank you for catching that. I overlooked the implication of the `static` qualifier on `done` and mistakenly thought the code was redundant. It is now added back in.\r\n\r\nIt seems that the `done` logic is used to make sure that `addrman.Add(convertSeed6(Params().FixedSeeds()), local);` gets called no more than once regardless of the outcome. When I followed the code in `CAddrMan`, it seems that the invocation just adds the fixed seeds to the address tables so long as the seeds are well-formed. So invoking the deterministic function more than once is unnecessary. I'm new around here, so I'm hoping you can confirm my understanding.",
      "created_at" : "2020-09-06T00:37:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-687681036",
      "id" : 687681036,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NzY4MTAzNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-06T00:37:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687681036",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Appveyor has [passed](https://ci.appveyor.com/project/DrahtBot/bitcoin/builds/35050140) on `e7de5b5`, Github is just not reflecting it.",
      "created_at" : "2020-09-07T05:38:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-688047889",
      "id" : 688047889,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4ODA0Nzg4OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-07T05:38:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688047889",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r486430763"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486430763"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oops, you are right. Probably out of scope to create it unless you want to.",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-09-10T15:22:37Z",
      "diff_hunk" : "@@ -1841,19 +1841,22 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         if (interruptNet)\n             return;\n \n-        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).\n-        // Note that we only do this if we started with an empty peers.dat,\n-        // (in which case we will query DNS seeds immediately) *and* the DNS\n-        // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n-            static bool done = false;\n-            if (!done) {\n+        // If we started with an empty peers.dat, we will query DNS seeds immediately.\n+        // Here we allow 60 seconds for the DNS seeds to return results. If they do not\n+        // return any results, or if they were disabled with -dnsseed=0, we add\n+        // the fixed seeds.\n+        bool dnsseed = gArgs.GetBoolArg(\"-dnsseed\", DEFAULT_DNSSEED);\n+        if (addrman.size() == 0 &&",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r486430763",
      "id" : 486430763,
      "in_reply_to_id" : 483974114,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzMDc2Mw==",
      "original_commit_id" : "bcbd637bcfe45d94fbe27688a35d071e6bcd8411",
      "original_line" : 1849,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 486050804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486430763",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r486438754"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486438754"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: clang format while touching this\r\n```diff\r\n-    int64_t nNextFeeler = PoissonNextSend(nStart.count()*1000*1000, FEELER_INTERVAL);\r\n-    while (!interruptNet)\r\n-    {\r\n+    int64_t nNextFeeler = PoissonNextSend(nStart.count() * 1000 * 1000, FEELER_INTERVAL);\r\n+    while (!interruptNet) {\r\n```",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-09-10T15:33:31Z",
      "diff_hunk" : "@@ -1826,10 +1826,10 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n     }\n \n     // Initiate network connections\n-    int64_t nStart = GetTime();\n+    auto nStart = GetTime<std::chrono::seconds>();\n \n     // Minimum time before next feeler connection (in microseconds).\n-    int64_t nNextFeeler = PoissonNextSend(nStart*1000*1000, FEELER_INTERVAL);\n+    int64_t nNextFeeler = PoissonNextSend(nStart.count()*1000*1000, FEELER_INTERVAL);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r486438754",
      "id" : 486438754,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzODc1NA==",
      "original_commit_id" : "e7de5b53e7b4433d41b519ca04d4c3aad0b6e186",
      "original_line" : 1832,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 486061184,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486438754",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r486528823"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486528823"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n                '0 addresses found from DNS seeds', \"Adding fixed seed nodes as DNS doesn't seem to be available.\"],\r\n```",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-09-10T17:54:54Z",
      "diff_hunk" : "@@ -138,11 +139,36 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers')\n+        default_data_dir = self.nodes[0].datadir\n+\n+        # No peers.dat exists and -dnsseed=1\n+        # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n+        # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=['Loaded 0 addresses from peers.dat',\n+                '0 addresses found from DNS seeds', 'Adding fixed seed nodes as DNS doesn\\'t seem to be available.'],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r486528823",
      "id" : 486528823,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUyODgyMw==",
      "original_commit_id" : "e7de5b53e7b4433d41b519ca04d4c3aad0b6e186",
      "original_line" : 152,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : null,
      "pull_request_review_id" : 486061184,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486528823",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> If `peers.dat` is empty and `-dnsseed=0`\r\n\r\nIs this a use case worth optimising for? The linked issue doesn't really provide a reason why this use case is worthwhile, as far as I can see, just that the filer thought it was surprising.\r\n\r\nThe only case I can see where you'd want to set `-dnsseed=0` is if you somehow don't have DNS despite being connected to the real internet, or if you're really worried about privacy. But if you're really worried about privacy, connecting to fixed seeds is probably worse than doing a dns query, and if you were doing something clever, like triggering an outbound/inbound connection to your own node, losing the 60 second delay might also drop privacy.",
      "created_at" : "2020-09-10T23:24:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-690783125",
      "id" : 690783125,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MDc4MzEyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-10T23:24:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/690783125",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Is this a use case worth optimising for? The linked issue doesn't really provide a reason why this use case is worthwhile, as far as I can see, just that the filer thought it was surprising.\r\n\r\nFair question, @ajtowns. Let's page @practicalswift and see if he can shed light on his original use case.",
      "created_at" : "2020-09-11T04:20:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-690864559",
      "id" : 690864559,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MDg2NDU1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-11T04:20:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/690864559",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The only case I can see where you'd want to set `-dnsseed=0` is if you somehow don't have DNS despite being connected to the real internet, or if you're really worried about privacy. But if you're really worried about privacy, connecting to fixed seeds is probably worse than doing a dns query, and if you were doing something clever, like triggering an outbound/inbound connection to your own node, losing the 60 second delay might also drop privacy.\r\n\r\nThere are multiple important use cases for `-dnsseed=0`:\r\n* You don't want to use clearnet at all (`-dnsseed=0 -onlynet=onion -listen=0`)\r\n* You don't want to broadcast to the DNS seed operators (or anyone listening on the path to those DNS seed operators) that you're starting a new node (`-dnsseed=0 -listen=0`)\r\n* You want to test how Bitcoin Core behaves if the DNS seeds are unavailable\r\n\r\nI hope you're not advocating the removal of `-dnsseed=0` :)\r\n\r\n> Is this a use case worth optimising for? The linked issue doesn't really provide a reason why this use case is worthwhile, as far as I can see, just that the filer thought it was surprising.\r\n\r\nI'm not sure I would call removal of a 60 second sleep an optimization. To me it is clearly a bug fix :)\r\n\r\nAlso, please note that the behaviour is unchanged if `-dnsseed=0` is not set.\r\n\r\nThe only effect of this change is that users of `-dnsseed=0` won't have to wait an extra 60 seconds for their node to start.\r\n\r\nGiven the above clarification: do your skepticism to this bug fix remain? :)",
      "created_at" : "2020-09-11T06:01:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-690894217",
      "id" : 690894217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MDg5NDIxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-11T06:05:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/690894217",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> You don't want to use clearnet at all (-dnsseed=0 -onlynet=onion -listen=0)\r\n\r\nFWIW, if you use `-proxy`, DNS seeding happens over the proxy (which in the case of Tor means the exit node will do the resolving for you).",
      "created_at" : "2020-09-11T06:16:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-690899470",
      "id" : 690899470,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MDg5OTQ3MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-11T06:18:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/690899470",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > You don't want to use clearnet at all (-dnsseed=0 -onlynet=onion -listen=0)\r\n> \r\n> FWIW, if you use `-proxy`, DNS seeding happens over the proxy (which in the case of Tor means the exit node will do the resolving for you).\r\n\r\nYes I know, but then you'll have to trust the exit node operator not to tamper with the DNS responses :)\r\n\r\n`-dnsseed=0 -onlynet=onion -listen=0` avoids that.",
      "created_at" : "2020-09-11T06:21:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-690901032",
      "id" : 690901032,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MDkwMTAzMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-11T06:21:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/690901032",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Of course, and I'm not commenting on the validity of the use case in general. Just that \"You don't want to use clearnet at all\" on its own is not a reason to use -dnsseed=0.",
      "created_at" : "2020-09-11T06:23:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-690901769",
      "id" : 690901769,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MDkwMTc2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-11T06:23:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/690901769",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Of course, and I'm not commenting on the validity of the use case in general. Just that \"You don't want to use clearnet at all\" on its own is not a reason to use -dnsseed=0.\r\n\r\nFair point. I should have written \"You don't want to use clearnet at all and you don't trust exit node operators\" :)",
      "created_at" : "2020-09-11T06:25:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-690902428",
      "id" : 690902428,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MDkwMjQyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-11T06:25:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/690902428",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> FWIW, if you use `-proxy`, DNS seeding happens over the proxy (which in the case of Tor means the exit node will do the resolving for you).\r\n\r\nBy \"DNS seeding\" you're in this context referring to the \"establish `ADDR_FETCH` connections via proxy to seed nodes\"-logic, right?\r\n\r\nAFAICT we've never supported sending actual DNS queries to the DNS seed nodes via proxy.\r\n\r\nFrom the `SetNameProxy` documentation: _\"SOCKS5's support for UDP-over-SOCKS5 has been considered, but no SOCK5 server in common use (most notably Tor) actually implements UDP support, and a DNS resolver is beyond the scope of this project.\"_",
      "created_at" : "2020-09-11T09:07:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-690972388",
      "id" : 690972388,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MDk3MjM4OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-11T09:12:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/690972388",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift Yes, when -proxy is enabled, no actual DNS seeding is done, but ADDR_FETCH connections are established to the seeder's names instead. That was the reason for introducing ADDR_FETCH connections (formerly called oneshot connections) initially.",
      "created_at" : "2020-09-11T17:20:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-691217511",
      "id" : 691217511,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MTIxNzUxMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-11T17:20:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/691217511",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Fair point. I should have written \"You don't want to use clearnet at all and you don't trust exit node operators\" :)\r\n\r\nAh, and are thus only connecting to the ~89 fixed seeds with onion addresses, and not going via exit nodes at all? That makes more sense.\r\n\r\nI think that currently, if you do `-onlynet=onion -listen=0 -dnsseed=0 -addnode=mytrustedpeer.onion`,  and you successfully connect to mytrustedpeer.onion within 60 seconds, you won't add the fixed seeds (your addrman will contain mypeer.onion rather than being empty), whereas with this change you will add the fixed seeds. Not sure that's a change for the better?\r\n\r\nPerhaps rather than a time check, it would be better to check for something like \"if addrman is empty, there are no ADDR_FETCH nodes left to try, no open connections and no added nodes to keep trying\" ?\r\n\r\nOTOH, if it is a change for the better, it might make sense to move the add fixed nodes code to its own function, and call it from ThreadDNSAddressSeed directly (after trying all the dns seeds, with addrman still empty, and only after the opencon thread as processed any ADDR_FETCH nodes that got queued up), and from CConnman::Start when  `-dnsseed=0` and addrman is empty. That way you avoid unnecessary waiting in all cases, I think.\r\n\r\n(edit: ADDR_FETCH not oneshot)",
      "created_at" : "2020-09-12T22:20:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-691561273",
      "id" : 691561273,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MTU2MTI3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-12T22:21:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/691561273",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20729 (p2p: standardize outbound full/block relay connection type naming by jonatack)\n* #20018 (p2p: ProcessAddrFetch(-seednode) is unnecessary if -connect is specified by dhruv)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-09-19T13:53:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-695216251",
      "id" : 695216251,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NTIxNjI1MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-11T20:25:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/695216251",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "My apologies for the delay in response. I needed to study all the ways seeding is done before I felt like I could have an opinion. I audited the code and found 6 ways `addrman` grows. I want to document them here for future readers. Reviewers well-versed in seeding can skip to the next section.\r\n\r\n### Peer seeding sources\r\n1. `-connect=node`: If the user runs the node in this configuration, `bitcoind` will only ever make outbound connections with nodes specified in `-connect`. It will still send `getaddr` messages to them and `addrman` will grow, but no other outbound connections will be made. `-dnsseed` and `-listen` are disabled unless overridden by the user.\r\n2. `peers.dat`: `addrman` flushes to `peers.dat`. When not in `-connect` mode, the node will use it's pre-existing knowledge of possible peers from `peers.dat`. Each peer will be queried using `getaddr` and `addrman` will grow further.\r\n3. `-dnsseed`: defaults to true. Uses some domain names owned by Bitcoin contributors to expand the peers in `addrman`. Domains can be found in `CMainParams`. If `-proxy` is set, or if the domain does not support `x9.domain` (which tests for `NODE_NETWORK | NODE_WITNESS`), `getaddr` messages are sent to the dns seed itself as a peer. i.e. connections are of type `ADDR_FETCH` to an address like `dnsseed.emzy.de`. Otherwise (and this is mostly the case), DNS _resolved_ addresses are used as peer candidates in `addrman`. So, sometimes, DNS seeds act as seednodes (eg. `-proxy`) requiring a further `getaddr` message, and sometimes, they directly dns resolve to peers which support `NODE_NETWORK | NODE_WITNESS`.\r\n4. `-seednode=node`: User-specified `ADDR_FETCH` connections. \r\n5. `-addnode=node`: Like `-connect`, except when `addrman` grows, new outbound peers will be established. (This won't happen if `-connect` is also specified).\r\n6. Fixed seeds: If all else fails, there are hardcoded seeds in `chainparamsseeds.h` that the node can try to seed peers from. It's important to have a good definition of \"when all else fails\".\r\n\r\n### Continued PR discussion\r\n- `-connect` is not relevant as seeding does not really matter in that case.\r\n- We are solving for the case when `peers.dat` is empty\r\n- We are solving for the case when `-dnsseed=0`\r\n- That leaves us to deal with `-seednode` and `-addnode`\r\n\r\n@ajtowns has made a great observation that in the case that `-seednode` or `-addnode` are provided, removing the 60 second delay before trying the fixed seeds makes it so that we are relying on a last-resort mechanism before giving the nodes in `-seednode` and `-addnode` a chance to help us grow `addrman`. I've updated the code to reflect this. We will now try to use fixed seeds when:\r\n\r\n```\r\n-connect is not provided\r\n\r\nAND peers.dat is empty\r\n\r\nAND ((-dnsseed=0 AND all_ADDR_FETCH_processed AND -addnode=[]) OR 60 seconds have passed)\r\n```\r\n\r\nThis gives DNS seeds(ADDR_FETCH), -seednode connections(also ADDR_FETCH) and -addnode peers 60 seconds to help us find peers IF they are specified. Note that we explicitly need to check if `-dnsseed=0` even though it may seem like `all_ADDR_FETCH_processed` covers that case. This is because when `-dnsseed=1`, `ThreadDNSAddressSeed` will add ADDR_FETCH connections almost instantaneously, but `ThreadOpenConnections` may check this condition before the DNS seeds are added. \r\n\r\n@ajtowns Please note that I was not able to do this:\r\n> OTOH, if it is a change for the better, it might make sense to move the add fixed nodes code to its own function, and call it from ThreadDNSAddressSeed directly (after trying all the dns seeds, with addrman still empty, and only after the opencon thread as processed any ADDR_FETCH nodes that got queued up), and from CConnman::Start when -dnsseed=0 and addrman is empty. That way you avoid unnecessary waiting in all cases, I think.\r\n\r\nbecause I don't understand how we decide we are giving up on `-addnode` manual connections being able to grow `addrman` without a timeout (in this case, 60 seconds).\r\n\r\nThis PR is ready for re-review.",
      "created_at" : "2020-10-01T17:59:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-702302429",
      "id" : 702302429,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjMwMjQyOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-04T05:37:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702302429",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "`addnode` is also a RPC method. It is quite plausible that an external peer discovery mechanism might launch bitcoind and use it to get connections started within that 60 seconds...",
      "created_at" : "2020-10-24T14:58:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-715926782",
      "id" : 715926782,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNTkyNjc4Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-24T14:58:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/715926782",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> >  it might make sense to move the add fixed nodes code to its own function, ...\r\n\r\nI was thinking something like https://github.com/ajtowns/bitcoin/commits/202010-fixed-seeds \r\n\r\n> I don't understand how we decide we are giving up on -addnode manual connections being able to grow addrman without a timeout (in this case, 60 seconds).\r\n\r\nThe above makes adding fixed seeds always be an immediate decision -- either because it's the only way of connecting to the network at startup, or because you tried DNS seeds and they all failed. If you want to disable that because you're doing `-addnode` later via RPC, you could specify `-dnsseed=0 -seednode=127.0.0.1`, though perhaps adding a `-fixedseeds=0` param would be better.\r\n\r\nI think the argument for removing the timeout is just that if you end up adding fixed seeds, the entire time before you did that is wasted because you weren't able to connect to the p2p network (if you _were_ able to, you wouldn't have ended up adding the fixed seeds), so rather than waste people's time, just make the decision earlier.\r\n\r\nI think that's probably better behaviour for the edge cases too -- if you're doing `-addnode` to a trusted peer in order to avoid untrusted seeds, then you probably don't want to fall back to the untrusted peers if you happen to not be able to connect to your trusted peer in the first minute of trying.",
      "created_at" : "2020-10-26T03:24:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-716281186",
      "id" : 716281186,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNjI4MTE4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-26T03:24:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/716281186",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r511702318"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511702318"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Use `count_microseconds`",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-10-26T03:25:09Z",
      "diff_hunk" : "@@ -1826,10 +1826,10 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n     }\n \n     // Initiate network connections\n-    int64_t nStart = GetTime();\n+    auto nStart = GetTime<std::chrono::seconds>();\n \n     // Minimum time before next feeler connection (in microseconds).\n-    int64_t nNextFeeler = PoissonNextSend(nStart*1000*1000, FEELER_INTERVAL);\n+    int64_t nNextFeeler = PoissonNextSend(nStart.count() * 1000 * 1000, FEELER_INTERVAL);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r511702318",
      "id" : 511702318,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTcwMjMxOA==",
      "original_commit_id" : "c731275ed0d751fc073e5e2b52ac5211ad6a3e8c",
      "original_line" : 1832,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 516448778,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511702318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r511702900"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511702900"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`GetBoolArg` takes the `cs_args` lock, so probably better to move this check outside of the loop if you care about that\r\n",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-10-26T03:28:14Z",
      "diff_hunk" : "@@ -1841,18 +1841,35 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         if (interruptNet)\n             return;\n \n-        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).\n-        // Note that we only do this if we started with an empty peers.dat,\n-        // (in which case we will query DNS seeds immediately) *and* the DNS\n-        // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n-            static bool done = false;\n-            if (!done) {\n-                LogPrintf(\"Adding fixed seed nodes as DNS doesn't seem to be available.\\n\");\n+        // Static bool makes sure we only add fixed seeds once in binary lifetime.\n+        static bool fixedSeedsAdded = false;\n+        if (!fixedSeedsAdded && addrman.size() == 0) {\n+            // When the node starts with an empty peers.dat, there are a few other sources of peers before\n+            // we fallback on to fixed seeds: -dnsseed, -seednode, -addnode\n+            // If none of those are available, we fallback on to fixed seeds immediately, else we allow\n+            // 60 seconds for any of those sources to populate addrman.\n+            bool addFixedSeeds = false;\n+            // It is cheapest to check if enough time has passed first.\n+            if (GetTime<std::chrono::seconds>() > nStart + std::chrono::minutes{1}) {\n+                addFixedSeeds = true;\n+                LogPrintf(\"Adding fixed seeds as 60 seconds have passed and addrman is empty.\\n\");\n+            }\n+\n+            const bool dnsseed = gArgs.GetBoolArg(\"-dnsseed\", DEFAULT_DNSSEED);\n+            // Checking !dnsseed is cheaper before locking 2 mutexes.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r511702900",
      "id" : 511702900,
      "line" : 1808,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTcwMjkwMA==",
      "original_commit_id" : "c731275ed0d751fc073e5e2b52ac5211ad6a3e8c",
      "original_line" : 1808,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 47,
      "pull_request_review_id" : 516448778,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511702900",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r511702957"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511702957"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`if (` -- needs a space",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-10-26T03:28:29Z",
      "diff_hunk" : "@@ -1841,18 +1841,35 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         if (interruptNet)\n             return;\n \n-        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).\n-        // Note that we only do this if we started with an empty peers.dat,\n-        // (in which case we will query DNS seeds immediately) *and* the DNS\n-        // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n-            static bool done = false;\n-            if (!done) {\n-                LogPrintf(\"Adding fixed seed nodes as DNS doesn't seem to be available.\\n\");\n+        // Static bool makes sure we only add fixed seeds once in binary lifetime.\n+        static bool fixedSeedsAdded = false;\n+        if (!fixedSeedsAdded && addrman.size() == 0) {\n+            // When the node starts with an empty peers.dat, there are a few other sources of peers before\n+            // we fallback on to fixed seeds: -dnsseed, -seednode, -addnode\n+            // If none of those are available, we fallback on to fixed seeds immediately, else we allow\n+            // 60 seconds for any of those sources to populate addrman.\n+            bool addFixedSeeds = false;\n+            // It is cheapest to check if enough time has passed first.\n+            if (GetTime<std::chrono::seconds>() > nStart + std::chrono::minutes{1}) {\n+                addFixedSeeds = true;\n+                LogPrintf(\"Adding fixed seeds as 60 seconds have passed and addrman is empty.\\n\");\n+            }\n+\n+            const bool dnsseed = gArgs.GetBoolArg(\"-dnsseed\", DEFAULT_DNSSEED);\n+            // Checking !dnsseed is cheaper before locking 2 mutexes.\n+            if (!addFixedSeeds && !dnsseed) {\n+                LOCK2(m_addr_fetches_mutex, cs_vAddedNodes);\n+                if(!dnsseed && m_addr_fetches.empty() && vAddedNodes.empty()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r511702957",
      "id" : 511702957,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTcwMjk1Nw==",
      "original_commit_id" : "c731275ed0d751fc073e5e2b52ac5211ad6a3e8c",
      "original_line" : 1862,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 516448778,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511702957",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2020-10-27T10:00:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-717126960",
      "id" : 717126960,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNzEyNjk2MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-27T10:00:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717126960",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r532097694"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/532097694"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-11-28T19:33:24Z",
      "diff_hunk" : "@@ -1826,10 +1826,10 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n     }\n \n     // Initiate network connections\n-    int64_t nStart = GetTime();\n+    auto nStart = GetTime<std::chrono::seconds>();\n \n     // Minimum time before next feeler connection (in microseconds).\n-    int64_t nNextFeeler = PoissonNextSend(nStart*1000*1000, FEELER_INTERVAL);\n+    int64_t nNextFeeler = PoissonNextSend(nStart.count() * 1000 * 1000, FEELER_INTERVAL);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r532097694",
      "id" : 532097694,
      "in_reply_to_id" : 511702318,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjA5NzY5NA==",
      "original_commit_id" : "c731275ed0d751fc073e5e2b52ac5211ad6a3e8c",
      "original_line" : 1832,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 540412771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/532097694",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r532097699"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/532097699"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2020-11-28T19:33:30Z",
      "diff_hunk" : "@@ -1841,18 +1841,35 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         if (interruptNet)\n             return;\n \n-        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).\n-        // Note that we only do this if we started with an empty peers.dat,\n-        // (in which case we will query DNS seeds immediately) *and* the DNS\n-        // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n-            static bool done = false;\n-            if (!done) {\n-                LogPrintf(\"Adding fixed seed nodes as DNS doesn't seem to be available.\\n\");\n+        // Static bool makes sure we only add fixed seeds once in binary lifetime.\n+        static bool fixedSeedsAdded = false;\n+        if (!fixedSeedsAdded && addrman.size() == 0) {\n+            // When the node starts with an empty peers.dat, there are a few other sources of peers before\n+            // we fallback on to fixed seeds: -dnsseed, -seednode, -addnode\n+            // If none of those are available, we fallback on to fixed seeds immediately, else we allow\n+            // 60 seconds for any of those sources to populate addrman.\n+            bool addFixedSeeds = false;\n+            // It is cheapest to check if enough time has passed first.\n+            if (GetTime<std::chrono::seconds>() > nStart + std::chrono::minutes{1}) {\n+                addFixedSeeds = true;\n+                LogPrintf(\"Adding fixed seeds as 60 seconds have passed and addrman is empty.\\n\");\n+            }\n+\n+            const bool dnsseed = gArgs.GetBoolArg(\"-dnsseed\", DEFAULT_DNSSEED);\n+            // Checking !dnsseed is cheaper before locking 2 mutexes.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r532097699",
      "id" : 532097699,
      "in_reply_to_id" : 511702900,
      "line" : 1808,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjA5NzY5OQ==",
      "original_commit_id" : "c731275ed0d751fc073e5e2b52ac5211ad6a3e8c",
      "original_line" : 1808,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 47,
      "pull_request_review_id" : 540412775,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/532097699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you, for the review and for taking the time to teach me via your branch, @ajtowns.\r\n\r\nI've added a new command line flag: `-fixedseeds`. A user can run `-dnsseed=0 -fixedseeds=0` and then issue a `addnode` RPC to satisfy the use case @luke-jr mentioned. `-dnsseed=0 -fixedseeds=0 -addnode=X` will provide the trusted peer only behavior @ajtowns mentioned. I also added a functional test. \r\n\r\nI definitely see the appeal of not having any wait, but I chose not to split up adding fixed seeds into `CConnman::Start` and `ThreadDNSAddressSeed` yet. If the user runs `-dnsseed=0 -seednode=X` or `-dnsseed=0 -addnode=X`, `CConnMan::Start` will not add fixed seeds, and `ThreadDNSAddressSeed` will not run at all. Then, in case the node at X is unreachable/censored, our node would never fall back to fixed seeds. This would be a departure from how things work today as fallback to untrusted peers is the default behavior. Perhaps we can allow for the trusted-peer-only behavior using `-dnsseed=0 -fixedseeds=0 -addnode=X`, but not impose it? In addition, `-connect` already provides a similar and more limited option. If other reviewers also agree that we should default to the trusted-peer-only behavior, I am open to changing it.\r\n\r\nThe changes to use chrono for feelers are included in #20044 and nicely bundled with other chrono types, so I did not include it.\r\n\r\nReady for further review.",
      "created_at" : "2020-11-28T19:53:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-735282991",
      "id" : 735282991,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczNTI4Mjk5MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-28T20:44:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/735282991",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\n This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-12-11T09:44:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-743090611",
      "id" : 743090611,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MzA5MDYxMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-11T09:44:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/743090611",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased",
      "created_at" : "2020-12-11T15:57:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-743275853",
      "id" : 743275853,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MzI3NTg1Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-11T15:57:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/743275853",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r551626078"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551626078"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    argsman.AddArg(\"-dnsseed\", strprintf(\"Query for peer addresses via DNS lookup, if low on addresses (default: %u unless -connect used)\", DEFAULT_DNSSEED), ArgsManager::ALLOW_BOOL, OptionsCategory::CONNECTION);\r\n```",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-01-04T23:20:33Z",
      "diff_hunk" : "@@ -435,8 +435,9 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-connect=<ip>\", \"Connect only to the specified node; -noconnect disables automatic connections (the rules for this peer are the same as for -addnode). This option can be specified multiple times to connect to multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-discover\", \"Discover own IP addresses (default: 1 when listening and no -externalip or -proxy)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-dns\", strprintf(\"Allow DNS lookups for -addnode, -seednode and -connect (default: %u)\", DEFAULT_NAME_LOOKUP), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-dnsseed\", \"Query for peer addresses via DNS lookup, if low on addresses (default: 1 unless -connect used)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-dnsseed\", strprintf(\"Query for peer addresses via DNS lookup, if low on addresses (default: %u unless -connect used)\", DEFAULT_DNSSEED), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r551626078",
      "id" : 551626078,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTYyNjA3OA==",
      "original_commit_id" : "eb1eef4e21fda019a9d309656aac1ffaf04b262d",
      "original_line" : 438,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 561415401,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551626078",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r551626209"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551626209"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    argsman.AddArg(\"-fixedseeds\", strprintf(\"Allow fixed seeds if DNS seeds don't provide peers (default: %u)\", DEFAULT_FIXEDSEEDS), ArgsManager::ALLOW_BOOL, OptionsCategory::CONNECTION);\r\n```",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-01-04T23:20:55Z",
      "diff_hunk" : "@@ -435,8 +435,9 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-connect=<ip>\", \"Connect only to the specified node; -noconnect disables automatic connections (the rules for this peer are the same as for -addnode). This option can be specified multiple times to connect to multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-discover\", \"Discover own IP addresses (default: 1 when listening and no -externalip or -proxy)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-dns\", strprintf(\"Allow DNS lookups for -addnode, -seednode and -connect (default: %u)\", DEFAULT_NAME_LOOKUP), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-dnsseed\", \"Query for peer addresses via DNS lookup, if low on addresses (default: 1 unless -connect used)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-dnsseed\", strprintf(\"Query for peer addresses via DNS lookup, if low on addresses (default: %u unless -connect used)\", DEFAULT_DNSSEED), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-externalip=<ip>\", \"Specify your own public address\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-fixedseeds\", strprintf(\"Allow fixed seeds if DNS seeds don't provide peers (default: %u)\", DEFAULT_FIXEDSEEDS), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r551626209",
      "id" : 551626209,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTYyNjIwOQ==",
      "original_commit_id" : "eb1eef4e21fda019a9d309656aac1ffaf04b262d",
      "original_line" : 440,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 561415401,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551626209",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r551658604"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551658604"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I like this renaming of the variable `done` to `fixedSeedsDone`, but maybe we can take the opportunity to remove this `static`? Static variables are scope-limited global variables (in general, globals should be avoided). \r\n<details>\r\n<summary>suggestion</summary>\r\n\r\n```diff\r\n-    const bool disableFixedSeeds = !gArgs.GetBoolArg(\"-fixedseeds\", DEFAULT_FIXEDSEEDS);\r\n+    bool addFixedSeeds = gArgs.GetBoolArg(\"-fixedseeds\", DEFAULT_FIXEDSEEDS);\r\n \r\n-    if (disableFixedSeeds) {\r\n+    if (!addFixedSeeds) {\r\n         LogPrintf(\"Fixed seeds are disabled\\n\");\r\n     }\r\n \r\n     while (!interruptNet)\r\n     {\r\n         ProcessAddrFetch();\r\n \r\n         if (!interruptNet.sleep_for(std::chrono::milliseconds(500)))\r\n             return;\r\n \r\n         CSemaphoreGrant grant(*semOutbound);\r\n         if (interruptNet)\r\n             return;\r\n \r\n         // Static bool makes sure we only add fixed seeds once in binary lifetime.\r\n-        static bool fixedSeedsDone = disableFixedSeeds;\r\n-        if (!fixedSeedsDone && addrman.size() == 0) {\r\n+        if (addFixedSeeds && addrman.size() == 0) {\r\n             // When the node starts with an empty peers.dat, there are a few other sources of peers before\r\n             // we fallback on to fixed seeds: -dnsseed, -seednode, -addnode\r\n             // If none of those are available, we fallback on to fixed seeds immediately, else we allow\r\n             // 60 seconds for any of those sources to populate addrman.\r\n-            bool addFixedSeeds = false;\r\n+            bool addFixedSeedsNow = false;\r\n             // It is cheapest to check if enough time has passed first.\r\n             if (GetTime<std::chrono::seconds>() > nStart + std::chrono::minutes{1}) {\r\n-                addFixedSeeds = true;\r\n+                addFixedSeedsNow = true;\r\n                 LogPrintf(\"Adding fixed seeds as 60 seconds have passed and addrman is empty\\n\");\r\n             }\r\n \r\n             // Checking !dnsseed is cheaper before locking 2 mutexes.\r\n-            if (!addFixedSeeds && !dnsseed) {\r\n+            if (!addFixedSeedsNow && !dnsseed) {\r\n                 LOCK2(m_addr_fetches_mutex, cs_vAddedNodes);\r\n                 if (m_addr_fetches.empty() && vAddedNodes.empty()) {\r\n-                    addFixedSeeds = true;\r\n+                    addFixedSeedsNow = true;\r\n                     LogPrintf(\"Adding fixed seeds as -dnsseed=0, -addnode is not provided and and all -seednode(s) attempted\\n\");\r\n                 }\r\n             }\r\n \r\n-            if (addFixedSeeds) {\r\n+            if (addFixedSeedsNow) {\r\n                 CNetAddr local;\r\n                 local.SetInternal(\"fixedseeds\");\r\n                 addrman.Add(convertSeed6(Params().FixedSeeds()), local);\r\n-                fixedSeedsDone = true;\r\n+                addFixedSeeds = false;\r\n             }\r\n         }\r\n```\r\n</details>\r\n\r\nShould new variables be written in `snake_case`?",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-01-05T01:04:30Z",
      "diff_hunk" : "@@ -1895,18 +1903,34 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         if (interruptNet)\n             return;\n \n-        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).\n-        // Note that we only do this if we started with an empty peers.dat,\n-        // (in which case we will query DNS seeds immediately) *and* the DNS\n-        // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n-            static bool done = false;\n-            if (!done) {\n-                LogPrintf(\"Adding fixed seed nodes as DNS doesn't seem to be available.\\n\");\n+        // Static bool makes sure we only add fixed seeds once in binary lifetime.\n+        static bool fixedSeedsDone = disableFixedSeeds;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r551658604",
      "id" : 551658604,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTY1ODYwNA==",
      "original_commit_id" : "eb1eef4e21fda019a9d309656aac1ffaf04b262d",
      "original_line" : 1907,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 561415401,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551658604",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r551661774"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551661774"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        with self.nodes[0].assert_debug_log(expected_msgs=[\r\n                \"Loaded 0 addresses from peers.dat\",\r\n                \"0 addresses found from DNS seeds\",\r\n                \"Adding fixed seeds as 60 seconds have passed and addrman is empty\",\r\n            ],\r\n                timeout=80):\r\n```\r\n(and similarly below)",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-01-05T01:16:05Z",
      "diff_hunk" : "@@ -145,11 +146,61 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers')\n+        default_data_dir = self.nodes[0].datadir\n+\n+        # No peers.dat exists and -dnsseed=1\n+        # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n+        # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\"Loaded 0 addresses from peers.dat\",\n+                \"0 addresses found from DNS seeds\", \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"],\n+                timeout=80):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r551661774",
      "id" : 551661774,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTY2MTc3NA==",
      "original_commit_id" : "eb1eef4e21fda019a9d309656aac1ffaf04b262d",
      "original_line" : 160,
      "original_position" : 23,
      "original_start_line" : 158,
      "path" : "test/functional/feature_config_args.py",
      "position" : null,
      "pull_request_review_id" : 561415401,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551661774",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r551663712"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551663712"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        self.log.info('Test seed peers, this will take about 2 minutes')\r\n```",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-01-05T01:23:51Z",
      "diff_hunk" : "@@ -145,11 +146,61 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r551663712",
      "id" : 551663712,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTY2MzcxMg==",
      "original_commit_id" : "eb1eef4e21fda019a9d309656aac1ffaf04b262d",
      "original_line" : 150,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : null,
      "pull_request_review_id" : 561415401,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551663712",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r551664701"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551664701"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You can also check for the absence of debug.log messages (I'm not sure if it's worth it in this case):\r\n```suggestion\r\n        with self.nodes[0].assert_debug_log(expected_msgs=[\r\n                \"Loaded 0 addresses from peers.dat\",\r\n                \"DNS seeding disabled\",\r\n                \"Adding fixed seeds as -dnsseed=0, -addnode is not provided and and all -seednode(s) attempted\\n\"\r\n            ], unexpected_msgs=[\"60 seconds\"]):\r\n```",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-01-05T01:27:20Z",
      "diff_hunk" : "@@ -145,11 +146,61 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers')\n+        default_data_dir = self.nodes[0].datadir\n+\n+        # No peers.dat exists and -dnsseed=1\n+        # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n+        # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\"Loaded 0 addresses from peers.dat\",\n+                \"0 addresses found from DNS seeds\", \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"],\n+                timeout=80):\n+            self.start_node(0, extra_args=['-dnsseed=1'])\n+        assert time.time() - start >= 60\n+        self.stop_node(0)\n+\n+        # No peers.dat exists and -dnsseed=0\n+        # We expect the node will fallback immediately to fixed seeds\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\"Loaded 0 addresses from peers.dat\",\n+                \"DNS seeding disabled\",\n+                \"Adding fixed seeds as -dnsseed=0, -addnode is not provided and and all -seednode(s) attempted\\n\"]):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r551664701",
      "id" : 551664701,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTY2NDcwMQ==",
      "original_commit_id" : "eb1eef4e21fda019a9d309656aac1ffaf04b262d",
      "original_line" : 175,
      "original_position" : 34,
      "original_start_line" : 169,
      "path" : "test/functional/feature_config_args.py",
      "position" : null,
      "pull_request_review_id" : 561415401,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551664701",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r571333395"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571333395"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done. Thanks!",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-06T01:33:22Z",
      "diff_hunk" : "@@ -435,8 +435,9 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-connect=<ip>\", \"Connect only to the specified node; -noconnect disables automatic connections (the rules for this peer are the same as for -addnode). This option can be specified multiple times to connect to multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-discover\", \"Discover own IP addresses (default: 1 when listening and no -externalip or -proxy)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-dns\", strprintf(\"Allow DNS lookups for -addnode, -seednode and -connect (default: %u)\", DEFAULT_NAME_LOOKUP), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-dnsseed\", \"Query for peer addresses via DNS lookup, if low on addresses (default: 1 unless -connect used)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-dnsseed\", strprintf(\"Query for peer addresses via DNS lookup, if low on addresses (default: %u unless -connect used)\", DEFAULT_DNSSEED), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r571333395",
      "id" : 571333395,
      "in_reply_to_id" : 551626078,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTMzMzM5NQ==",
      "original_commit_id" : "eb1eef4e21fda019a9d309656aac1ffaf04b262d",
      "original_line" : 438,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 584804709,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571333395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r571333425"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571333425"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-06T01:33:30Z",
      "diff_hunk" : "@@ -435,8 +435,9 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-connect=<ip>\", \"Connect only to the specified node; -noconnect disables automatic connections (the rules for this peer are the same as for -addnode). This option can be specified multiple times to connect to multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-discover\", \"Discover own IP addresses (default: 1 when listening and no -externalip or -proxy)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-dns\", strprintf(\"Allow DNS lookups for -addnode, -seednode and -connect (default: %u)\", DEFAULT_NAME_LOOKUP), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-dnsseed\", \"Query for peer addresses via DNS lookup, if low on addresses (default: 1 unless -connect used)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-dnsseed\", strprintf(\"Query for peer addresses via DNS lookup, if low on addresses (default: %u unless -connect used)\", DEFAULT_DNSSEED), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-externalip=<ip>\", \"Specify your own public address\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-fixedseeds\", strprintf(\"Allow fixed seeds if DNS seeds don't provide peers (default: %u)\", DEFAULT_FIXEDSEEDS), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r571333425",
      "id" : 571333425,
      "in_reply_to_id" : 551626209,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTMzMzQyNQ==",
      "original_commit_id" : "eb1eef4e21fda019a9d309656aac1ffaf04b262d",
      "original_line" : 440,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 584804730,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571333425",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r571333593"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571333593"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done! I too prefer the elimination of the static variable. Wasn't sure reviewers would be keen on it, but I agree it is cleaner.",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-06T01:34:44Z",
      "diff_hunk" : "@@ -1895,18 +1903,34 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         if (interruptNet)\n             return;\n \n-        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).\n-        // Note that we only do this if we started with an empty peers.dat,\n-        // (in which case we will query DNS seeds immediately) *and* the DNS\n-        // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n-            static bool done = false;\n-            if (!done) {\n-                LogPrintf(\"Adding fixed seed nodes as DNS doesn't seem to be available.\\n\");\n+        // Static bool makes sure we only add fixed seeds once in binary lifetime.\n+        static bool fixedSeedsDone = disableFixedSeeds;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r571333593",
      "id" : 571333593,
      "in_reply_to_id" : 551658604,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTMzMzU5Mw==",
      "original_commit_id" : "eb1eef4e21fda019a9d309656aac1ffaf04b262d",
      "original_line" : 1907,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 584804913,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571333593",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r571333619"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571333619"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-06T01:34:55Z",
      "diff_hunk" : "@@ -145,11 +146,61 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers')\n+        default_data_dir = self.nodes[0].datadir\n+\n+        # No peers.dat exists and -dnsseed=1\n+        # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n+        # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\"Loaded 0 addresses from peers.dat\",\n+                \"0 addresses found from DNS seeds\", \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"],\n+                timeout=80):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r571333619",
      "id" : 571333619,
      "in_reply_to_id" : 551661774,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTMzMzYxOQ==",
      "original_commit_id" : "eb1eef4e21fda019a9d309656aac1ffaf04b262d",
      "original_line" : 160,
      "original_position" : 23,
      "original_start_line" : 158,
      "path" : "test/functional/feature_config_args.py",
      "position" : null,
      "pull_request_review_id" : 584804928,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571333619",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r571333850"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571333850"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Changed the indentation. I did not add the `unexpected_msgs=[\"60 seconds\"]` as it is implicit in the 2 second timeout for `assert_debug_log`.",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-06T01:35:58Z",
      "diff_hunk" : "@@ -145,11 +146,61 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers')\n+        default_data_dir = self.nodes[0].datadir\n+\n+        # No peers.dat exists and -dnsseed=1\n+        # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n+        # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\"Loaded 0 addresses from peers.dat\",\n+                \"0 addresses found from DNS seeds\", \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"],\n+                timeout=80):\n+            self.start_node(0, extra_args=['-dnsseed=1'])\n+        assert time.time() - start >= 60\n+        self.stop_node(0)\n+\n+        # No peers.dat exists and -dnsseed=0\n+        # We expect the node will fallback immediately to fixed seeds\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\"Loaded 0 addresses from peers.dat\",\n+                \"DNS seeding disabled\",\n+                \"Adding fixed seeds as -dnsseed=0, -addnode is not provided and and all -seednode(s) attempted\\n\"]):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r571333850",
      "id" : 571333850,
      "in_reply_to_id" : 551664701,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTMzMzg1MA==",
      "original_commit_id" : "eb1eef4e21fda019a9d309656aac1ffaf04b262d",
      "original_line" : 175,
      "original_position" : 34,
      "original_start_line" : 169,
      "path" : "test/functional/feature_config_args.py",
      "position" : null,
      "pull_request_review_id" : 584805072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571333850",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the review @LarryRuane, and my apologies for the long wait.\r\n\r\nComments addressed. Rebased. Ready for further review.",
      "created_at" : "2021-02-06T01:36:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-774373319",
      "id" : 774373319,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NDM3MzMxOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-06T01:36:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/774373319",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed failing linter.",
      "created_at" : "2021-02-06T01:46:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-774375341",
      "id" : 774375341,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NDM3NTM0MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-06T01:46:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/774375341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re-reviewed, re-tested\r\nACK 3fdea1f77b7afa07789139f17c0e03ee55f3ee02",
      "created_at" : "2021-02-11T02:39:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-777170935",
      "id" : 777170935,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NzE3MDkzNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-11T02:39:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/777170935",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK 3fdea1f77b7afa07789139f17c0e03ee55f3ee02",
      "created_at" : "2021-02-11T18:23:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-777694643",
      "id" : 777694643,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NzY5NDY0Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-11T18:23:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/777694643",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r574729254"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574729254"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It's slightly risky to have a test that depends on real time instead of mocked times. CI environments can be extremely slow, so this bound might introduce random failures.",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-11T18:25:48Z",
      "diff_hunk" : "@@ -147,11 +148,67 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers, this will take about 2 minutes')\n+        default_data_dir = self.nodes[0].datadir\n+\n+        # No peers.dat exists and -dnsseed=1\n+        # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n+        # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Loaded 0 addresses from peers.dat\",\n+                \"0 addresses found from DNS seeds\",\n+                \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"], timeout=80):\n+            self.start_node(0, extra_args=['-dnsseed=1'])\n+        assert time.time() - start >= 60\n+        self.stop_node(0)\n+\n+        # No peers.dat exists and -dnsseed=0\n+        # We expect the node will fallback immediately to fixed seeds\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Loaded 0 addresses from peers.dat\",\n+                \"DNS seeding disabled\",\n+                \"Adding fixed seeds as -dnsseed=0, -addnode is not provided and and all -seednode(s) attempted\\n\"]):\n+            self.start_node(0, extra_args=['-dnsseed=0'])\n+        assert time.time() - start < 5",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r574729254",
      "id" : 574729254,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NDcyOTI1NA==",
      "original_commit_id" : "3fdea1f77b7afa07789139f17c0e03ee55f3ee02",
      "original_line" : 177,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : null,
      "pull_request_review_id" : 588860205,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574729254",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r574915432"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574915432"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You're right - that could make for a flaky test. I picked 5 seconds as an arbitrary bound. What I _really_ wanted to check was that the node did not wait 60 seconds to use fixed seeds.\r\n\r\n```suggestion\r\n        assert time.time() - start < 60\r\n```\r\n\r\naccomplished that. And if CI is so slow that 60 seconds pass, the test will fail anyway because the logs will say \"Adding fixed seeds as 60 seconds have passed and addrman is empty\" instead of \"Adding fixed seeds as -dnsseed=0, -addnode is not provided and and all -seednode(s) attempted\".",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-12T00:12:58Z",
      "diff_hunk" : "@@ -147,11 +148,67 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers, this will take about 2 minutes')\n+        default_data_dir = self.nodes[0].datadir\n+\n+        # No peers.dat exists and -dnsseed=1\n+        # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n+        # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Loaded 0 addresses from peers.dat\",\n+                \"0 addresses found from DNS seeds\",\n+                \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"], timeout=80):\n+            self.start_node(0, extra_args=['-dnsseed=1'])\n+        assert time.time() - start >= 60\n+        self.stop_node(0)\n+\n+        # No peers.dat exists and -dnsseed=0\n+        # We expect the node will fallback immediately to fixed seeds\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Loaded 0 addresses from peers.dat\",\n+                \"DNS seeding disabled\",\n+                \"Adding fixed seeds as -dnsseed=0, -addnode is not provided and and all -seednode(s) attempted\\n\"]):\n+            self.start_node(0, extra_args=['-dnsseed=0'])\n+        assert time.time() - start < 5",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r574915432",
      "id" : 574915432,
      "in_reply_to_id" : 574729254,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NDkxNTQzMg==",
      "original_commit_id" : "3fdea1f77b7afa07789139f17c0e03ee55f3ee02",
      "original_line" : 177,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : null,
      "pull_request_review_id" : 589094769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T00:12:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574915432",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re-ACK fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-12T00:23:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-777885140",
      "id" : 777885140,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3Nzg4NTE0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-12T00:23:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/777885140",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated tests for CI stability. Ready for further review.",
      "created_at" : "2021-02-12T02:42:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#issuecomment-777931616",
      "id" : 777931616,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19884",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NzkzMTYxNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-12T02:42:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/777931616",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r575130415"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575130415"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, good idea!\r\n\r\nIn the longer term I think we should change this to use mock time but for this PR that would be too much of a hassle.",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-12T10:37:40Z",
      "diff_hunk" : "@@ -147,11 +148,67 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers, this will take about 2 minutes')\n+        default_data_dir = self.nodes[0].datadir\n+\n+        # No peers.dat exists and -dnsseed=1\n+        # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n+        # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Loaded 0 addresses from peers.dat\",\n+                \"0 addresses found from DNS seeds\",\n+                \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"], timeout=80):\n+            self.start_node(0, extra_args=['-dnsseed=1'])\n+        assert time.time() - start >= 60\n+        self.stop_node(0)\n+\n+        # No peers.dat exists and -dnsseed=0\n+        # We expect the node will fallback immediately to fixed seeds\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Loaded 0 addresses from peers.dat\",\n+                \"DNS seeding disabled\",\n+                \"Adding fixed seeds as -dnsseed=0, -addnode is not provided and and all -seednode(s) attempted\\n\"]):\n+            self.start_node(0, extra_args=['-dnsseed=0'])\n+        assert time.time() - start < 5",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r575130415",
      "id" : 575130415,
      "in_reply_to_id" : 574729254,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTEzMDQxNQ==",
      "original_commit_id" : "3fdea1f77b7afa07789139f17c0e03ee55f3ee02",
      "original_line" : 177,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : null,
      "pull_request_review_id" : 589344070,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T10:40:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575130415",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r575335817"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575335817"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`and and`",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-12T16:13:37Z",
      "diff_hunk" : "@@ -147,11 +148,67 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers, this will take about 2 minutes')\n+        default_data_dir = self.nodes[0].datadir\n+\n+        # No peers.dat exists and -dnsseed=1\n+        # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n+        # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Loaded 0 addresses from peers.dat\",\n+                \"0 addresses found from DNS seeds\",\n+                \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"], timeout=80):\n+            self.start_node(0, extra_args=['-dnsseed=1'])\n+        assert time.time() - start >= 60\n+        self.stop_node(0)\n+\n+        # No peers.dat exists and -dnsseed=0\n+        # We expect the node will fallback immediately to fixed seeds\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Loaded 0 addresses from peers.dat\",\n+                \"DNS seeding disabled\",\n+                \"Adding fixed seeds as -dnsseed=0, -addnode is not provided and and all -seednode(s) attempted\\n\"]):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r575335817",
      "id" : 575335817,
      "line" : 175,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTMzNTgxNw==",
      "original_commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "original_line" : 175,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : 36,
      "pull_request_review_id" : 589610721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T16:14:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575335817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r575336503"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575336503"
         }
      },
      "author_association" : "MEMBER",
      "body" : "wouldn't it work to use `setmocktime` inside the context manager above and check here: `node.uptime() >= 60` to speed up the test?",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-12T16:14:43Z",
      "diff_hunk" : "@@ -147,11 +148,67 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers, this will take about 2 minutes')\n+        default_data_dir = self.nodes[0].datadir\n+\n+        # No peers.dat exists and -dnsseed=1\n+        # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n+        # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Loaded 0 addresses from peers.dat\",\n+                \"0 addresses found from DNS seeds\",\n+                \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"], timeout=80):\n+            self.start_node(0, extra_args=['-dnsseed=1'])\n+        assert time.time() - start >= 60",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r575336503",
      "id" : 575336503,
      "line" : 165,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTMzNjUwMw==",
      "original_commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "original_line" : 165,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : 26,
      "pull_request_review_id" : 589610721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T16:14:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575336503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r575340874"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575340874"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I looked at this last September (https://github.com/bitcoin/bitcoin/pull/19884#pullrequestreview-486061184) and it didn't look feasible, interesting if it is.",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-12T16:20:57Z",
      "diff_hunk" : "@@ -147,11 +148,67 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers, this will take about 2 minutes')\n+        default_data_dir = self.nodes[0].datadir\n+\n+        # No peers.dat exists and -dnsseed=1\n+        # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n+        # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Loaded 0 addresses from peers.dat\",\n+                \"0 addresses found from DNS seeds\",\n+                \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"], timeout=80):\n+            self.start_node(0, extra_args=['-dnsseed=1'])\n+        assert time.time() - start >= 60",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r575340874",
      "id" : 575340874,
      "in_reply_to_id" : 575336503,
      "line" : 165,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTM0MDg3NA==",
      "original_commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "original_line" : 165,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : 26,
      "pull_request_review_id" : 589617223,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T16:20:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575340874",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r575369141"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575369141"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```\r\n$ time test/functional/feature_config_args.py \r\n2021-02-12T17:02:39.647000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_kuphxowf\r\n2021-02-12T17:02:45.294000Z TestFramework (INFO): Test config args logging\r\n2021-02-12T17:02:45.605000Z TestFramework (INFO): Test seed peers, this will take about 2 minutes\r\n2021-02-12T17:02:48.587000Z TestFramework (INFO): Test -networkactive option\r\n2021-02-12T17:02:54.023000Z TestFramework (INFO): Stopping nodes\r\n2021-02-12T17:02:54.127000Z TestFramework (INFO): Cleaning up /tmp/bitcoin_func_test_kuphxowf on exit\r\n2021-02-12T17:02:54.127000Z TestFramework (INFO): Tests successful\r\n\r\nreal\t0m14.682s\r\nuser\t0m3.842s\r\nsys\t0m0.745s\r\n",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-12T17:03:17Z",
      "diff_hunk" : "@@ -147,11 +148,67 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers, this will take about 2 minutes')\n+        default_data_dir = self.nodes[0].datadir\n+\n+        # No peers.dat exists and -dnsseed=1\n+        # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n+        # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Loaded 0 addresses from peers.dat\",\n+                \"0 addresses found from DNS seeds\",\n+                \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"], timeout=80):\n+            self.start_node(0, extra_args=['-dnsseed=1'])\n+        assert time.time() - start >= 60",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r575369141",
      "id" : 575369141,
      "in_reply_to_id" : 575336503,
      "line" : 165,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTM2OTE0MQ==",
      "original_commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "original_line" : 165,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : 26,
      "pull_request_review_id" : 589653486,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T17:03:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575369141",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r575392544"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575392544"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Please see #21165",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-12T17:40:20Z",
      "diff_hunk" : "@@ -147,11 +148,67 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers, this will take about 2 minutes')\n+        default_data_dir = self.nodes[0].datadir\n+\n+        # No peers.dat exists and -dnsseed=1\n+        # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n+        # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Loaded 0 addresses from peers.dat\",\n+                \"0 addresses found from DNS seeds\",\n+                \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"], timeout=80):\n+            self.start_node(0, extra_args=['-dnsseed=1'])\n+        assert time.time() - start >= 60\n+        self.stop_node(0)\n+\n+        # No peers.dat exists and -dnsseed=0\n+        # We expect the node will fallback immediately to fixed seeds\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Loaded 0 addresses from peers.dat\",\n+                \"DNS seeding disabled\",\n+                \"Adding fixed seeds as -dnsseed=0, -addnode is not provided and and all -seednode(s) attempted\\n\"]):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r575392544",
      "id" : 575392544,
      "in_reply_to_id" : 575335817,
      "line" : 175,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTM5MjU0NA==",
      "original_commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "original_line" : 175,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : 36,
      "pull_request_review_id" : 589692177,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T17:40:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575392544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r575392771"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575392771"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Please see #21165",
      "commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "created_at" : "2021-02-12T17:40:47Z",
      "diff_hunk" : "@@ -147,11 +148,67 @@ def test_networkactive(self):\n             self.start_node(0, extra_args=['-nonetworkactive=1'])\n         self.stop_node(0)\n \n+    def test_seed_peers(self):\n+        self.log.info('Test seed peers, this will take about 2 minutes')\n+        default_data_dir = self.nodes[0].datadir\n+\n+        # No peers.dat exists and -dnsseed=1\n+        # We expect the node will use DNS Seeds, but Regtest mode has 0 DNS seeds\n+        # So after 60 seconds, the node should fallback to fixed seeds (this is a slow test)\n+        assert not os.path.exists(os.path.join(default_data_dir, \"peers.dat\"))\n+        start = time.time()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\n+                \"Loaded 0 addresses from peers.dat\",\n+                \"0 addresses found from DNS seeds\",\n+                \"Adding fixed seeds as 60 seconds have passed and addrman is empty\"], timeout=80):\n+            self.start_node(0, extra_args=['-dnsseed=1'])\n+        assert time.time() - start >= 60",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19884#discussion_r575392771",
      "id" : 575392771,
      "in_reply_to_id" : 575336503,
      "line" : 165,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTM5Mjc3MQ==",
      "original_commit_id" : "fe3e993968d6b46777d5a16a662cd22790ddf5bb",
      "original_line" : 165,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "test/functional/feature_config_args.py",
      "position" : 26,
      "pull_request_review_id" : 589693006,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19884",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-12T17:40:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575392771",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   }
]
