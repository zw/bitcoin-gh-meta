[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. Interesting idea. Note that we do a similar thing for Tor by creating a new circuit for every outgoing connection (by providing random SOCKS5 auth).",
      "created_at" : "2022-06-13T13:41:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1153930002",
      "id" : 1153930002,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585Ex5MS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1153930002/reactions"
      },
      "updated_at" : "2022-06-13T13:41:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1153930002",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2022-06-13T20:11:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1154382480",
      "id" : 1154382480,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585EznqQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1154382480/reactions"
      },
      "updated_at" : "2022-06-13T20:11:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1154382480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Are there some noticable tradeoffs / downsides with this? Why not just enable this by default?",
      "created_at" : "2022-06-14T10:24:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1155000669",
      "id" : 1155000669,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585E1-ld",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1155000669/reactions"
      },
      "updated_at" : "2022-06-14T10:24:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1155000669",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-06-14T11:01:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1155033794",
      "id" : 1155033794,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585E2GrC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1155033794/reactions"
      },
      "updated_at" : "2022-06-14T11:01:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1155033794",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I was just thinking the same.\r\n\r\nThe reason I set the default value of `i2ptransientout` to `0` is in case somebody is too attached to the persistent addresses or if the new code has a bug - let it mature for a release or two and then flip the default.\r\n\r\nI don't have a strong opinion, maybe it is ok to introduce it as `i2ptransientout=1` as well.\r\n\r\nOn the low-level, each session requires an extra control socket:\r\n* with `i2ptransientout=0` we need `1 + n_incoming + n_outgoing` (one control socket to rule them all)\r\n* with `i2ptransientout=1` we need `1 + n_incoming + 2 * n_outgoing` (one control socket for all incoming + one control socket for each outgoing).\r\n\r\nI think this is ok wrt max open sockets on the system because we don't have 100s or 1000s of outgoing connections.",
      "created_at" : "2022-06-14T11:14:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1155045303",
      "id" : 1155045303,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585E2Je3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1155045303/reactions"
      },
      "updated_at" : "2022-06-14T11:14:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1155045303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r896722000"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896722000"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> This creates an opportunity to\r\nwhite-list given nodes or treat them differently based on their I2P address.\r\nHowever, this also creates an opportunity to fingerprint or analyze a given node\r\nbecause it always uses the same I2P address when it connects to other nodes.\r\n\r\nWhy is this not possible with incoming connections and only outgoing connections? A node that accepts incoming connection with i2p can also be analyzed IMO",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-06-14T11:54:03Z",
      "diff_hunk" : "@@ -47,9 +53,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the host that receives the connection knows the I2P address\n+of the connection initiator. This is unlike the Tor network where the recipient\n+does not know who is connecting to them, not even the initiator's Tor address.\n+\n+So, even if an I2P node is not accepting incoming connections, they are known\n+to other nodes by their outgoing I2P address. This creates an opportunity to\n+white-list given nodes or treat them differently based on their I2P address.\n+However, this also creates an opportunity to fingerprint or analyze a given node\n+because it always uses the same I2P address when it connects to other nodes. If\n+this is undesirable, then a node operator can use `-i2ptransientout` to generate",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r896722000",
      "id" : 896722000,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII5841cuRQ",
      "original_commit_id" : "277111acc16fd8bd3ff590e80fc2e78e384f3f07",
      "original_line" : 74,
      "original_position" : 38,
      "original_start_line" : 69,
      "path" : "doc/i2p.md",
      "position" : 38,
      "pull_request_review_id" : 1005723122,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896722000/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 69,
      "start_side" : "RIGHT",
      "updated_at" : "2022-06-14T11:54:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896722000",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r896722870"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896722870"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "How often can this be changed if a user wants to do it?",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-06-14T11:54:59Z",
      "diff_hunk" : "@@ -47,9 +53,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the host that receives the connection knows the I2P address\n+of the connection initiator. This is unlike the Tor network where the recipient\n+does not know who is connecting to them, not even the initiator's Tor address.\n+\n+So, even if an I2P node is not accepting incoming connections, they are known\n+to other nodes by their outgoing I2P address. This creates an opportunity to\n+white-list given nodes or treat them differently based on their I2P address.\n+However, this also creates an opportunity to fingerprint or analyze a given node\n+because it always uses the same I2P address when it connects to other nodes. If\n+this is undesirable, then a node operator can use `-i2ptransientout` to generate\n+a transient (disposable), one-time I2P address for each new outgoing connection.\n+That address is never going to be reused again, not even if reconnecting to the\n+same peer later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+This is because the address for accepting connections is advertised to the\n+Bitcoin network and it takes time for it to propagate and be known by other\n+nodes. So, it does not make sense to change it often - it must be persistent.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r896722870",
      "id" : 896722870,
      "line" : 83,
      "node_id" : "PRRC_kwDOABII5841cue2",
      "original_commit_id" : "277111acc16fd8bd3ff590e80fc2e78e384f3f07",
      "original_line" : 83,
      "original_position" : 47,
      "original_start_line" : 81,
      "path" : "doc/i2p.md",
      "position" : 47,
      "pull_request_review_id" : 1005724296,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896722870/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 81,
      "start_side" : "RIGHT",
      "updated_at" : "2022-06-14T11:54:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896722870",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Add support for generating a transient, one-time I2P address for ourselves when making I2P outbound connection and discard it once the connection is closed.\r\n\r\nConcept ACK",
      "created_at" : "2022-06-14T11:59:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1155087954",
      "id" : 1155087954,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585E2T5S",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1155087954/reactions"
      },
      "updated_at" : "2022-06-14T11:59:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1155087954",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r896732171"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896732171"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Oh, well, it is also possible to analyze a node by connecting to it. That is kind of unavoidable and a node that wants to avoid this should not be listening.",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-06-14T12:05:35Z",
      "diff_hunk" : "@@ -47,9 +53,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the host that receives the connection knows the I2P address\n+of the connection initiator. This is unlike the Tor network where the recipient\n+does not know who is connecting to them, not even the initiator's Tor address.\n+\n+So, even if an I2P node is not accepting incoming connections, they are known\n+to other nodes by their outgoing I2P address. This creates an opportunity to\n+white-list given nodes or treat them differently based on their I2P address.\n+However, this also creates an opportunity to fingerprint or analyze a given node\n+because it always uses the same I2P address when it connects to other nodes. If\n+this is undesirable, then a node operator can use `-i2ptransientout` to generate",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r896732171",
      "id" : 896732171,
      "in_reply_to_id" : 896722000,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII5841cwwL",
      "original_commit_id" : "277111acc16fd8bd3ff590e80fc2e78e384f3f07",
      "original_line" : 74,
      "original_position" : 38,
      "original_start_line" : 69,
      "path" : "doc/i2p.md",
      "position" : 38,
      "pull_request_review_id" : 1005737420,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896732171/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 69,
      "start_side" : "RIGHT",
      "updated_at" : "2022-06-14T12:05:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896732171",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r896744873"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896744873"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It is hard to give a concrete answer but it could be _days_ before one's address is well propagated through the network.\r\n\r\nYou can measure for yourself in your environment: delete `~/.bitcoin/i2p_private_key` and restart `bitcoind` - it will generate a fresh I2P address for listening. Then monitor the incoming connections with something like `bitcoin-cli getpeerinfo |jq 'map(select(.network == \"i2p\" and .inbound)) |length'` or by enabling `-debug=net` and grepping `debug.log` for something like `connection from.*i2p accepted`.",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-06-14T12:19:39Z",
      "diff_hunk" : "@@ -47,9 +53,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the host that receives the connection knows the I2P address\n+of the connection initiator. This is unlike the Tor network where the recipient\n+does not know who is connecting to them, not even the initiator's Tor address.\n+\n+So, even if an I2P node is not accepting incoming connections, they are known\n+to other nodes by their outgoing I2P address. This creates an opportunity to\n+white-list given nodes or treat them differently based on their I2P address.\n+However, this also creates an opportunity to fingerprint or analyze a given node\n+because it always uses the same I2P address when it connects to other nodes. If\n+this is undesirable, then a node operator can use `-i2ptransientout` to generate\n+a transient (disposable), one-time I2P address for each new outgoing connection.\n+That address is never going to be reused again, not even if reconnecting to the\n+same peer later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+This is because the address for accepting connections is advertised to the\n+Bitcoin network and it takes time for it to propagate and be known by other\n+nodes. So, it does not make sense to change it often - it must be persistent.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r896744873",
      "id" : 896744873,
      "in_reply_to_id" : 896722870,
      "line" : 83,
      "node_id" : "PRRC_kwDOABII5841cz2p",
      "original_commit_id" : "277111acc16fd8bd3ff590e80fc2e78e384f3f07",
      "original_line" : 83,
      "original_position" : 47,
      "original_start_line" : 81,
      "path" : "doc/i2p.md",
      "position" : 47,
      "pull_request_review_id" : 1005756457,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896744873/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 81,
      "start_side" : "RIGHT",
      "updated_at" : "2022-06-14T12:19:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896744873",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`ab9172846f...9be11f7496`: rebase due to conflicts",
      "created_at" : "2022-06-16T11:56:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1157574600",
      "id" : 1157574600,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585E_y_I",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1157574600/reactions"
      },
      "updated_at" : "2022-06-16T11:56:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1157574600",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25619](https://github.com/bitcoin/bitcoin/pull/25619) (net: avoid overriding non-virtual ToString() in CService and use better naming by vasild)\n* [#25572](https://github.com/bitcoin/bitcoin/pull/25572) (refactor: Introduce EvictionManager and use it for the inbound eviction logic by dergoegge)\n* [#25174](https://github.com/bitcoin/bitcoin/pull/25174) (net/net_processing: Add thread safety related annotations for CNode and Peer by ajtowns)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-06-16T15:29:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1157797559",
      "id" : 1157797559,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585FApa3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1157797559/reactions"
      },
      "updated_at" : "2022-08-13T03:58:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1157797559",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I suggest enabling it by default, and having a net permission flag to use the \"real\" source address (requires #17167 I guess?).",
      "created_at" : "2022-06-18T21:11:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1159564198",
      "id" : 1159564198,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585FHYum",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1159564198/reactions"
      },
      "updated_at" : "2022-06-18T21:11:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1159564198",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`9be11f7496...a69528c9f6`: rebase and change the default of `-i2ptransientout` to `true`.",
      "created_at" : "2022-06-28T11:28:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1168598807",
      "id" : 1168598807,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585Fp2cX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1168598807/reactions"
      },
      "updated_at" : "2022-06-28T11:28:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1168598807",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Further idea (out of the scope of this PR): periodically disconnect long lived outbound connections to Tor and to I2P if `-i2ptransientout=1`. Having a prolonged outbound connection to an adversary is the same as not changing our address for the duration of the connection. Even if, by chance, we reconnect to the same peer after the disconnect, they would not know it is us again.",
      "created_at" : "2022-07-14T07:05:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1184074821",
      "id" : 1184074821,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585Gk4xF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1184074821/reactions"
      },
      "updated_at" : "2022-07-14T07:05:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1184074821",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It may be desirable to have this in 24.0, [feature freeze in mid August](https://github.com/bitcoin/bitcoin/issues/24987).",
      "created_at" : "2022-07-15T07:47:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1185274241",
      "id" : 1185274241,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585GpdmB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1185274241/reactions"
      },
      "updated_at" : "2022-07-15T07:47:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1185274241",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Will have a look!\n\n> It may be desirable to have this in 24.0, feature freeze in mid August\n",
      "created_at" : "2022-07-15T08:23:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1185303534",
      "id" : 1185303534,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585Gpkvu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1185303534/reactions"
      },
      "updated_at" : "2022-07-15T11:55:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1185303534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-07-19T08:37:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1188765695",
      "id" : 1188765695,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585G2x__",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1188765695/reactions"
      },
      "updated_at" : "2022-07-19T08:37:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1188765695",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`a69528c9f6...153ce63b98`: rebase due to conflicts",
      "created_at" : "2022-07-19T13:05:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1189028880",
      "id" : 1189028880,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585G3yQQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189028880/reactions"
      },
      "updated_at" : "2022-07-19T13:05:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189028880",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926524948"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926524948"
         }
      },
      "author_association" : "MEMBER",
      "body" : "88af514 the help could perhaps be shorter and more focused on *what* it does from a user's point of view rather than on *how*\r\n```suggestion\r\nargsman.AddArg(\"-i2ptransientout\", strprintf(\"Announce a new, transient I2P address to each outbound I2P connection (default: %u). The address for accepting incoming I2P connections is unaffected and persistent. This option is ignored if -i2psam is not set.\", DEFAULT_I2P_TRANSIENT_OUT), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\r\n```",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-07-21T10:38:48Z",
      "diff_hunk" : "@@ -471,6 +471,7 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-onion=<ip:port>\", \"Use separate SOCKS5 proxy to reach peers via Tor onion services, set -noonion to disable (default: -proxy)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-i2psam=<ip:port>\", \"I2P SAM proxy to reach I2P peers and accept I2P connections (default: none)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-i2pacceptincoming\", \"If set and -i2psam is also set then incoming I2P connections are accepted via the SAM proxy. If this is not set but -i2psam is set then only outgoing connections will be made to the I2P network. Ignored if -i2psam is not set. Listening for incoming I2P connections is done through the SAM proxy, not by binding to a local address and port (default: 1)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-i2ptransientout\", strprintf(\"Generate a transient, one-time I2P address for ourselves when making I2P outbound connection and discard it once the connection is closed. Does not affect the address for accepting incoming I2P connections which is persistent. Ignored if -i2psam is not set. (default: %u)\", DEFAULT_I2P_TRANSIENT_OUT), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926524948",
      "id" : 926524948,
      "line" : 474,
      "node_id" : "PRRC_kwDOABII5843OaYU",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 474,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 4,
      "pull_request_review_id" : 1046314981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926524948/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-21T12:47:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926524948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926530653"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926530653"
         }
      },
      "author_association" : "MEMBER",
      "body" : "88af5140702ddd425f1da11126b9e799e7585d38 nit, I realize you're following the surrounding code style, but for new code `m_` prefixing (to distinguish data members from local vars in a class) seems unnecessary and needlessly verbose in this struct (feel free to ignore).",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-07-21T10:45:51Z",
      "diff_hunk" : "@@ -667,6 +687,7 @@ class CConnman\n         std::vector<std::string> m_specified_outgoing;\n         std::vector<std::string> m_added_nodes;\n         bool m_i2p_accept_incoming;\n+        bool m_i2p_transient_out = DEFAULT_I2P_TRANSIENT_OUT;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926530653",
      "id" : 926530653,
      "line" : 690,
      "node_id" : "PRRC_kwDOABII5843Obxd",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 690,
      "original_position" : 53,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 53,
      "pull_request_review_id" : 1046314981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926530653/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-21T12:47:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926530653",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926534737"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926534737"
         }
      },
      "author_association" : "MEMBER",
      "body" : "88af5140702ddd425f1da11126b9e799e7585d38 I realize you're following the surrounding code style, but for new code IIRC to describe a member we use  `//! Description...` or `/// Description...`\r\n\r\n1667347 same for the documentation of `const bool m_transient;`\r\n \r\n04648910 and for `std::unique_ptr<i2p::sam::Session> m_i2p_session`",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-07-21T10:50:51Z",
      "diff_hunk" : "@@ -1072,10 +1094,15 @@ class CConnman\n \n     /**\n      * I2P SAM session.\n-     * Used to accept incoming and make outgoing I2P connections.\n+     * Used to accept incoming and make outgoing I2P connections from a persistent I2P address.\n      */\n     std::unique_ptr<i2p::sam::Session> m_i2p_sam_session;\n \n+    /**\n+     * Whether to make outbound I2P connections from a transient, one-time I2P address.\n+     */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926534737",
      "id" : 926534737,
      "line" : 1103,
      "node_id" : "PRRC_kwDOABII5843OcxR",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 1103,
      "original_position" : 76,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 76,
      "pull_request_review_id" : 1046314981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926534737/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-21T12:48:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926534737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926540525"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926540525"
         }
      },
      "author_association" : "MEMBER",
      "body" : "71c4e62 and fe3df51d the diff on these two style commits is small enough to fold them into the other changes (-0 on whether they should be done)",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-07-21T10:58:09Z",
      "diff_hunk" : "@@ -115,8 +115,19 @@ namespace sam {\n Session::Session(const fs::path& private_key_file,\n                  const CService& control_host,\n                  CThreadInterrupt* interrupt)\n-    : m_private_key_file(private_key_file), m_control_host(control_host), m_interrupt(interrupt),\n-      m_control_sock(std::make_unique<Sock>(INVALID_SOCKET))\n+    : m_private_key_file{private_key_file},\n+      m_control_host{control_host},\n+      m_interrupt{interrupt},\n+      m_control_sock{std::make_unique<Sock>(INVALID_SOCKET)},\n+      m_transient{false}\n+{\n+}\n+\n+Session::Session(const CService& control_host, CThreadInterrupt* interrupt)\n+    : m_control_host{control_host},\n+      m_interrupt{interrupt},\n+      m_control_sock{std::make_unique<Sock>(INVALID_SOCKET)},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926540525",
      "id" : 926540525,
      "line" : 129,
      "node_id" : "PRRC_kwDOABII5843OeLt",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 129,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 17,
      "pull_request_review_id" : 1046314981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926540525/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-21T12:47:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926540525",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926549209"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926549209"
         }
      },
      "author_association" : "MEMBER",
      "body" : "1667347 maybe just inline `m_transient ? \"transient\" : \"persistent\"` in the Log call and avoid creating a temporary+move",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-07-21T11:09:30Z",
      "diff_hunk" : "@@ -355,29 +366,48 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+\n+    Log(\"Creating %s SAM session with %s\", session_type, m_control_host.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926549209",
      "id" : 926549209,
      "line" : 371,
      "node_id" : "PRRC_kwDOABII5843OgTZ",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 371,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 38,
      "pull_request_review_id" : 1046314981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926549209/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-21T12:47:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926549209",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926566358"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926566358"
         }
      },
      "author_association" : "MEMBER",
      "body" : "1667347a22bdd4b66824fce2231fb2ca9bbdc3ef leaving the logging as-is would avoid conflicts with #25203 ",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-07-21T11:31:31Z",
      "diff_hunk" : "@@ -355,29 +366,48 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+\n+    Log(\"Creating %s SAM session with %s\", session_type, m_control_host.ToString());\n \n     auto sock = Hello();\n \n-    const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n-    if (read_ok) {\n-        m_private_key.assign(data.begin(), data.end());\n+    const std::string& session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs\n+\n+    if (m_transient) {\n+        // The destination (private key) is generated upon session creation and returned\n+        // in the reply in DESTINATION=.\n+        const Reply& reply = SendRequestAndGetReply(\n+            *sock,\n+            strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=TRANSIENT\", session_id));\n+\n+        m_private_key = DecodeI2PBase64(reply.Get(\"DESTINATION\"));\n     } else {\n-        GenerateAndSavePrivateKey(*sock);\n-    }\n+        // Read our persistent destination (private key) from disk or generate\n+        // one and save it to disk. Then use it when creating the session.\n+        const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n+        if (read_ok) {\n+            m_private_key.assign(data.begin(), data.end());\n+        } else {\n+            GenerateAndSavePrivateKey(*sock);\n+        }\n \n-    const std::string& session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs\n-    const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n+        const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n \n-    SendRequestAndGetReply(*sock, strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n-                                            session_id, private_key_b64));\n+        SendRequestAndGetReply(*sock,\n+                               strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n+                                         session_id,\n+                                         private_key_b64));\n+    }\n \n     m_my_addr = CService(DestBinToAddr(MyDestination()), I2P_SAM31_PORT);\n     m_session_id = session_id;\n     m_control_sock = std::move(sock);\n \n-    LogPrintfCategory(BCLog::I2P, \"SAM session created: session id=%s, my address=%s\\n\",\n-                      m_session_id, m_my_addr.ToString());\n+    Log(\"%s SAM session created: session id=%s, my address=%s\",\n+        session_type,\n+        m_session_id,\n+        m_my_addr.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926566358",
      "id" : 926566358,
      "line" : 410,
      "node_id" : "PRRC_kwDOABII5843OkfW",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 410,
      "original_position" : 88,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 88,
      "pull_request_review_id" : 1046314981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926566358/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-21T12:47:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926566358",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926591214"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926591214"
         }
      },
      "author_association" : "MEMBER",
      "body" : "0d82a1c3 would it be better to drop `sess` and the pointer juggling and just have two `Connect()` calls?",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-07-21T12:02:50Z",
      "diff_hunk" : "@@ -486,18 +486,28 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n     Proxy proxy;\n     CAddress addr_bind;\n     assert(!addr_bind.IsValid());\n+    std::unique_ptr<i2p::sam::Session> i2p_transient_session;\n \n     if (addrConnect.IsValid()) {\n+        const bool use_proxy{GetProxy(addrConnect.GetNetwork(), proxy)};\n         bool proxyConnectionFailed = false;\n \n-        if (addrConnect.GetNetwork() == NET_I2P && m_i2p_sam_session.get() != nullptr) {\n+        if (addrConnect.GetNetwork() == NET_I2P && use_proxy) {\n+            auto sess = &m_i2p_sam_session;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926591214",
      "id" : 926591214,
      "line" : 496,
      "node_id" : "PRRC_kwDOABII5843Oqju",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 496,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 12,
      "pull_request_review_id" : 1046314981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926591214/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-21T12:47:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926591214",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926608753"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926608753"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In line with the suggestion in `src/init.cpp`\r\n```diff\r\n-     Generate a transient, one-time I2P address for ourselves when making\r\n-     I2P outbound connection and discard it once the connection is\r\n-     closed. Does not affect the address for accepting incoming I2P\r\n-     connections which is persistent. Ignored if -i2psam is not set.\r\n+     Announce a new, transient I2P address to each outbound I2P connection\r\n+     (default: 1). The address for accepting incoming I2P connections\r\n+     is unaffected and persistent. This option is ignored if -i2psam\r\n+     is not set.\r\n```\r\n",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-07-21T12:22:59Z",
      "diff_hunk" : "@@ -39,6 +39,12 @@ Core configuration options:\n      Ignored if -i2psam is not set. Listening for incoming I2P\n      connections is done through the SAM proxy, not by binding to a\n      local address and port (default: 1)\n+\n+-i2ptransientout\n+     Generate a transient, one-time I2P address for ourselves when making\n+     I2P outbound connection and discard it once the connection is\n+     closed. Does not affect the address for accepting incoming I2P\n+     connections which is persistent. Ignored if -i2psam is not set.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926608753",
      "id" : 926608753,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII5843Ou1x",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 47,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : 9,
      "pull_request_review_id" : 1046314981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926608753/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-21T12:47:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926608753",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926622482"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926622482"
         }
      },
      "author_association" : "MEMBER",
      "body" : "suggestions\r\n\r\n```diff\r\n-In I2P connections, the host that receives the connection knows the I2P address\r\n-of the connection initiator. This is unlike the Tor network where the recipient\r\n-does not know who is connecting to them, not even the initiator's Tor address.\r\n-\r\n-So, even if an I2P node is not accepting incoming connections, they are known\r\n-to other nodes by their outgoing I2P address. This creates an opportunity to\r\n-white-list given nodes or treat them differently based on their I2P address.\r\n-However, this also creates an opportunity to fingerprint or analyze a given node\r\n-because it always uses the same I2P address when it connects to other nodes. If\r\n-this is undesirable, then a node operator can use `-i2ptransientout` to generate\r\n-a transient (disposable), one-time I2P address for each new outgoing connection.\r\n-That address is never going to be reused again, not even if reconnecting to the\r\n-same peer later.\r\n-\r\n-`-i2ptransientout` only affects addresses for outgoing connections and not the\r\n-address for accepting incoming connections (if `-i2pacceptincoming` is given).\r\n-This is because the address for accepting connections is advertised to the\r\n-Bitcoin network and it takes time for it to propagate and be known by other\r\n-nodes. So, it does not make sense to change it often - it must be persistent.\r\n+With I2P connections, the connection receiver sees the I2P address of the\r\n+connection initiator, unlike the Tor network where the receiver does\r\n+not know who is connecting to them, not even the initiator's Tor address.\r\n+\r\n+Even if an I2P node does not accept incoming connections, it is known to other\r\n+nodes by its outgoing I2P address. If this address is always the same when it\r\n+connects to other nodes, this creates an opportunity to discriminate,\r\n+fingerprint or analyze it based on its I2P address.\r\n+\r\n+For this reason, the `-i2ptransientout` configuration option generates and\r\n+announces a new, transient I2P address for each new outbound connection. The\r\n+address will never be reused, not even if reconnecting to the same peer later.\r\n+\r\n+`-i2ptransientout` only affects addresses announced to outbound connections and\r\n+not the address for accepting inbound connections (provided that\r\n+`-i2pacceptincoming` is on).  This is done because the address for accepting\r\n+connections is advertised to the Bitcoin network and it takes time for it to\r\n+propagate and be known by other nodes. It does not make sense to change it\r\n+often -- it must be persistent.\r\n```",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-07-21T12:36:52Z",
      "diff_hunk" : "@@ -47,9 +53,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the host that receives the connection knows the I2P address\n+of the connection initiator. This is unlike the Tor network where the recipient\n+does not know who is connecting to them, not even the initiator's Tor address.\n+\n+So, even if an I2P node is not accepting incoming connections, they are known\n+to other nodes by their outgoing I2P address. This creates an opportunity to\n+white-list given nodes or treat them differently based on their I2P address.\n+However, this also creates an opportunity to fingerprint or analyze a given node\n+because it always uses the same I2P address when it connects to other nodes. If\n+this is undesirable, then a node operator can use `-i2ptransientout` to generate\n+a transient (disposable), one-time I2P address for each new outgoing connection.\n+That address is never going to be reused again, not even if reconnecting to the\n+same peer later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+This is because the address for accepting connections is advertised to the\n+Bitcoin network and it takes time for it to propagate and be known by other\n+nodes. So, it does not make sense to change it often - it must be persistent.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926622482",
      "id" : 926622482,
      "line" : 83,
      "node_id" : "PRRC_kwDOABII5843OyMS",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 83,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : 47,
      "pull_request_review_id" : 1046314981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926622482/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-21T12:47:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926622482",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926628187"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926628187"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It seems important to first announce the change of default behavior (maybe in the Notable Changes or P2P section): With I2P connections, a new, transient address is announced to each outbound peer by default. And then that a config option is added to allow toggling back to the previous behavior.\r\n\r\n```suggestion\r\nA new `-i2ptransientout` configuration option has been added...\r\n```\r\n\r\n",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-07-21T12:42:48Z",
      "diff_hunk" : "@@ -0,0 +1,5 @@\n+New settings\n+------------\n+\n+`-i2ptransientout` has been added to generate a new I2P address for each",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r926628187",
      "id" : 926628187,
      "line" : 4,
      "node_id" : "PRRC_kwDOABII5843Ozlb",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 4,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/release-notes-25355.md",
      "position" : 4,
      "pull_request_review_id" : 1046314981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926628187/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-21T12:47:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/926628187",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928109439"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928109439"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Running bitcoind on this branch\r\n```\r\n2022-07-23T10:29:26Z [i2p] persistent SAM session created: session id=21c6f9ca06, my address=zsxwyo6qcn3chqzwxnseusqgsnuw3maqnztkiypyfxtya4snkoka.b32.i2p:0\r\n2022-07-23T10:29:26Z AddLocal(zsxwyo6qcn3chqzwxnseusqgsnuw3maqnztkiypyfxtya4snkoka.b32.i2p:0,4)\r\n\r\n2022-07-23T10:29:32Z [i2p] transient SAM session created: session id=28dd7f10d7, my address=5rkqw4u7fieeaw5uq6opg3mnbxn362zc3djkttgxdxholykvugpa.b32.i2p:0\r\n2022-07-23T10:29:34Z [i2p] Creating transient SAM session with 127.0.0.1:7656\r\n```\r\n```suggestion\r\n        m_transient ? \"Transient\" : \"Persistent\"\r\n```\r\n",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-07-23T10:51:36Z",
      "diff_hunk" : "@@ -355,29 +366,48 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+\n+    Log(\"Creating %s SAM session with %s\", session_type, m_control_host.ToString());\n \n     auto sock = Hello();\n \n-    const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n-    if (read_ok) {\n-        m_private_key.assign(data.begin(), data.end());\n+    const std::string& session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs\n+\n+    if (m_transient) {\n+        // The destination (private key) is generated upon session creation and returned\n+        // in the reply in DESTINATION=.\n+        const Reply& reply = SendRequestAndGetReply(\n+            *sock,\n+            strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=TRANSIENT\", session_id));\n+\n+        m_private_key = DecodeI2PBase64(reply.Get(\"DESTINATION\"));\n     } else {\n-        GenerateAndSavePrivateKey(*sock);\n-    }\n+        // Read our persistent destination (private key) from disk or generate\n+        // one and save it to disk. Then use it when creating the session.\n+        const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n+        if (read_ok) {\n+            m_private_key.assign(data.begin(), data.end());\n+        } else {\n+            GenerateAndSavePrivateKey(*sock);\n+        }\n \n-    const std::string& session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs\n-    const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n+        const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n \n-    SendRequestAndGetReply(*sock, strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n-                                            session_id, private_key_b64));\n+        SendRequestAndGetReply(*sock,\n+                               strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n+                                         session_id,\n+                                         private_key_b64));\n+    }\n \n     m_my_addr = CService(DestBinToAddr(MyDestination()), I2P_SAM31_PORT);\n     m_session_id = session_id;\n     m_control_sock = std::move(sock);\n \n-    LogPrintfCategory(BCLog::I2P, \"SAM session created: session id=%s, my address=%s\\n\",\n-                      m_session_id, m_my_addr.ToString());\n+    Log(\"%s SAM session created: session id=%s, my address=%s\",\n+        session_type,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928109439",
      "id" : 928109439,
      "line" : 408,
      "node_id" : "PRRC_kwDOABII5843UdN_",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 408,
      "original_position" : 86,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 86,
      "pull_request_review_id" : 1048526330,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928109439/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-23T10:51:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928109439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Been running this branch for a couple days and haven't noticed any issues.\r\n\r\n```\r\n2022-07-24T13:39:38Z [i2p] Creating transient SAM session with 127.0.0.1:7656\r\n2022-07-24T13:40:18Z [i2p] transient SAM session created: session id=1386b9ab4d, my address=oqdzoox4z6apbi6zey6ijztpxhl4c7ia2rlgmlyvn6gh5y3f7qma.b32.i2p:0\r\n2022-07-24T13:40:27Z [i2p] Creating transient SAM session with 127.0.0.1:7656\r\n2022-07-24T13:40:47Z [i2p] transient SAM session created: session id=5c4ad011cc, my address=edj6fribfj3vg5k6rw36lqdrvoclwpxkwbrig632t25nnrzjfrza.b32.i2p:0\r\n2022-07-24T13:41:00Z [i2p] Destroying session 5c4ad011cc\r\n2022-07-24T13:41:20Z [i2p] Destroying session 1386b9ab4d\r\n2022-07-24T13:41:20Z [i2p] Destroying session b0efeb7424\r\n2022-07-24T13:42:01Z [i2p] Creating transient SAM session with 127.0.0.1:7656\r\n2022-07-24T13:42:21Z [i2p] transient SAM session created: session id=cf078d4a94, my address=3mfzrp3idd73axoiinsbnq5kjrnsgqhmhw3y7ndr5ctwg47rlora.b32.i2p:0\r\n2022-07-24T13:42:30Z [i2p] Creating transient SAM session with 127.0.0.1:7656\r\n2022-07-24T13:43:10Z [i2p] transient SAM session created: session id=36935751c5, my address=igdzgnvdqfu2yb7br4qvnvdlfpqdkkdagdton44mza7gwys4ulya.b32.i2p:0\r\n2022-07-24T13:43:20Z New outbound peer connected: version: 70016, blocks=746321, peer=639, peeraddr={xxx].b32.i2p:0 (manual)\r\n2022-07-24T13:43:21Z New outbound peer connected: version: 70015, blocks=746321, peer=640, peeraddr=157.230.233.211:8333 (outbound-full-relay)\r\n2022-07-24T13:43:23Z [i2p] Creating transient SAM session with 127.0.0.1:7656\r\n2022-07-24T13:43:37Z [i2p] Destroying session 36935751c5\r\n2022-07-24T13:44:03Z [i2p] transient SAM session created: session id=ff1aaed962, my address=4gk6orbh5tf6cyc3l43nb6inxgvfcqu4pmteaigh3qpgbuxadayq.b32.i2p:0\r\n2022-07-24T13:44:04Z [i2p] Creating transient SAM session with 127.0.0.1:7656\r\n2022-07-24T13:44:24Z [i2p] transient SAM session created: session id=1f85a9eb0f, my address=yxl7j666clruej6qj6qyccr2jqkxo3lt5b4mhhqoczchyvg3hfma.b32.i2p:0\r\n2022-07-24T13:44:42Z [i2p] Error connecting to jz3s4eurm5vzjresf4mwo7oni4bk36daolwxh4iqtewakylgkxmq.b32.i2p:0: \"STREAM STATUS RESULT=CANT_REACH_PEER\"\r\n2022-07-24T13:44:42Z [i2p] Destroying session 1f85a9eb0f\r\n```\r\n",
      "created_at" : "2022-07-24T13:49:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1193322292",
      "id" : 1193322292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585HIKc0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1193322292/reactions"
      },
      "updated_at" : "2022-07-24T13:50:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1193322292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928263323"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928263323"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It might be handy to log the session id in this message to make it easier to match the session messages in a busy i2p log.",
      "commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "created_at" : "2022-07-24T14:06:00Z",
      "diff_hunk" : "@@ -355,29 +366,48 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+\n+    Log(\"Creating %s SAM session with %s\", session_type, m_control_host.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928263323",
      "id" : 928263323,
      "line" : 371,
      "node_id" : "PRRC_kwDOABII5843VCyb",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 371,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 38,
      "pull_request_review_id" : 1048647827,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928263323/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-24T14:06:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928263323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`153ce63b98...506d59e2e1`: rebase and address suggestions\r\n\r\n> I think it would make sense to add the user-facing configuration option after the functionality has been added rather than before.\r\n\r\nThat would require adding a line (the functionality) and changing it in the next commit (to make it conditional). That would be more work for reviewers and for history gazers (git blame). Should I?",
      "created_at" : "2022-07-25T10:29:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1193867388",
      "id" : 1193867388,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585HKPh8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1193867388/reactions"
      },
      "updated_at" : "2022-07-25T11:00:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1193867388",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928728291"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928728291"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Took some of this. \"use\" is better than \"announce\" here because we do not actually announce our I2P address anywhere (for outgoing connections). The peer has knowledge of it from the underlying networking layer.",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-25T10:39:23Z",
      "diff_hunk" : "@@ -471,6 +471,7 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-onion=<ip:port>\", \"Use separate SOCKS5 proxy to reach peers via Tor onion services, set -noonion to disable (default: -proxy)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-i2psam=<ip:port>\", \"I2P SAM proxy to reach I2P peers and accept I2P connections (default: none)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-i2pacceptincoming\", \"If set and -i2psam is also set then incoming I2P connections are accepted via the SAM proxy. If this is not set but -i2psam is set then only outgoing connections will be made to the I2P network. Ignored if -i2psam is not set. Listening for incoming I2P connections is done through the SAM proxy, not by binding to a local address and port (default: 1)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-i2ptransientout\", strprintf(\"Generate a transient, one-time I2P address for ourselves when making I2P outbound connection and discard it once the connection is closed. Does not affect the address for accepting incoming I2P connections which is persistent. Ignored if -i2psam is not set. (default: %u)\", DEFAULT_I2P_TRANSIENT_OUT), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928728291",
      "id" : 928728291,
      "in_reply_to_id" : 926524948,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843W0Tj",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 474,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1049232297,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928728291/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-25T10:39:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928728291",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928729722"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928729722"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I will leave it as `m_` - for consistency with surrounding and also, the developer notes just say: \"Class member variables have a `m_` prefix\".",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-25T10:40:56Z",
      "diff_hunk" : "@@ -667,6 +687,7 @@ class CConnman\n         std::vector<std::string> m_specified_outgoing;\n         std::vector<std::string> m_added_nodes;\n         bool m_i2p_accept_incoming;\n+        bool m_i2p_transient_out = DEFAULT_I2P_TRANSIENT_OUT;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928729722",
      "id" : 928729722,
      "in_reply_to_id" : 926530653,
      "line" : 690,
      "node_id" : "PRRC_kwDOABII5843W0p6",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 690,
      "original_position" : 53,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 53,
      "pull_request_review_id" : 1049234456,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928729722/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-25T10:40:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928729722",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928740873"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928740873"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Any doxygen-compatible comment should be fine. The code already uses a rich mix of them.",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-25T10:50:59Z",
      "diff_hunk" : "@@ -1072,10 +1094,15 @@ class CConnman\n \n     /**\n      * I2P SAM session.\n-     * Used to accept incoming and make outgoing I2P connections.\n+     * Used to accept incoming and make outgoing I2P connections from a persistent I2P address.\n      */\n     std::unique_ptr<i2p::sam::Session> m_i2p_sam_session;\n \n+    /**\n+     * Whether to make outbound I2P connections from a transient, one-time I2P address.\n+     */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928740873",
      "id" : 928740873,
      "in_reply_to_id" : 926534737,
      "line" : 1103,
      "node_id" : "PRRC_kwDOABII5843W3YJ",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 1103,
      "original_position" : 76,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 76,
      "pull_request_review_id" : 1049251351,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928740873/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-25T10:50:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928740873",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928742317"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928742317"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Reviewers have asked before, and I think it is good practice to have style and logical changes in separate commits (most of the time).",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-25T10:52:40Z",
      "diff_hunk" : "@@ -115,8 +115,19 @@ namespace sam {\n Session::Session(const fs::path& private_key_file,\n                  const CService& control_host,\n                  CThreadInterrupt* interrupt)\n-    : m_private_key_file(private_key_file), m_control_host(control_host), m_interrupt(interrupt),\n-      m_control_sock(std::make_unique<Sock>(INVALID_SOCKET))\n+    : m_private_key_file{private_key_file},\n+      m_control_host{control_host},\n+      m_interrupt{interrupt},\n+      m_control_sock{std::make_unique<Sock>(INVALID_SOCKET)},\n+      m_transient{false}\n+{\n+}\n+\n+Session::Session(const CService& control_host, CThreadInterrupt* interrupt)\n+    : m_control_host{control_host},\n+      m_interrupt{interrupt},\n+      m_control_sock{std::make_unique<Sock>(INVALID_SOCKET)},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928742317",
      "id" : 928742317,
      "in_reply_to_id" : 926540525,
      "line" : 129,
      "node_id" : "PRRC_kwDOABII5843W3ut",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 129,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 30,
      "pull_request_review_id" : 1049253555,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928742317/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-25T10:52:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928742317",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928743230"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928743230"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done, it looks more straight-forward now.",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-25T10:53:11Z",
      "diff_hunk" : "@@ -486,18 +486,28 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n     Proxy proxy;\n     CAddress addr_bind;\n     assert(!addr_bind.IsValid());\n+    std::unique_ptr<i2p::sam::Session> i2p_transient_session;\n \n     if (addrConnect.IsValid()) {\n+        const bool use_proxy{GetProxy(addrConnect.GetNetwork(), proxy)};\n         bool proxyConnectionFailed = false;\n \n-        if (addrConnect.GetNetwork() == NET_I2P && m_i2p_sam_session.get() != nullptr) {\n+        if (addrConnect.GetNetwork() == NET_I2P && use_proxy) {\n+            auto sess = &m_i2p_sam_session;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928743230",
      "id" : 928743230,
      "in_reply_to_id" : 926591214,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843W38-",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 496,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1049255311,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928743230/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-25T10:53:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928743230",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928743495"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928743495"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done (some of it).",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-25T10:53:27Z",
      "diff_hunk" : "@@ -39,6 +39,12 @@ Core configuration options:\n      Ignored if -i2psam is not set. Listening for incoming I2P\n      connections is done through the SAM proxy, not by binding to a\n      local address and port (default: 1)\n+\n+-i2ptransientout\n+     Generate a transient, one-time I2P address for ourselves when making\n+     I2P outbound connection and discard it once the connection is\n+     closed. Does not affect the address for accepting incoming I2P\n+     connections which is persistent. Ignored if -i2psam is not set.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928743495",
      "id" : 928743495,
      "in_reply_to_id" : 926608753,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843W4BH",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 47,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : null,
      "pull_request_review_id" : 1049255680,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928743495/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-25T10:53:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928743495",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928743671"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928743671"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Took some of this.",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-25T10:53:37Z",
      "diff_hunk" : "@@ -47,9 +53,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the host that receives the connection knows the I2P address\n+of the connection initiator. This is unlike the Tor network where the recipient\n+does not know who is connecting to them, not even the initiator's Tor address.\n+\n+So, even if an I2P node is not accepting incoming connections, they are known\n+to other nodes by their outgoing I2P address. This creates an opportunity to\n+white-list given nodes or treat them differently based on their I2P address.\n+However, this also creates an opportunity to fingerprint or analyze a given node\n+because it always uses the same I2P address when it connects to other nodes. If\n+this is undesirable, then a node operator can use `-i2ptransientout` to generate\n+a transient (disposable), one-time I2P address for each new outgoing connection.\n+That address is never going to be reused again, not even if reconnecting to the\n+same peer later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+This is because the address for accepting connections is advertised to the\n+Bitcoin network and it takes time for it to propagate and be known by other\n+nodes. So, it does not make sense to change it often - it must be persistent.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928743671",
      "id" : 928743671,
      "in_reply_to_id" : 926622482,
      "line" : 83,
      "node_id" : "PRRC_kwDOABII5843W4D3",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 83,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : 47,
      "pull_request_review_id" : 1049255918,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928743671/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-25T10:53:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928743671",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928744164"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928744164"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done, using `Capitalize()`.",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-25T10:54:12Z",
      "diff_hunk" : "@@ -355,29 +366,48 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+\n+    Log(\"Creating %s SAM session with %s\", session_type, m_control_host.ToString());\n \n     auto sock = Hello();\n \n-    const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n-    if (read_ok) {\n-        m_private_key.assign(data.begin(), data.end());\n+    const std::string& session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs\n+\n+    if (m_transient) {\n+        // The destination (private key) is generated upon session creation and returned\n+        // in the reply in DESTINATION=.\n+        const Reply& reply = SendRequestAndGetReply(\n+            *sock,\n+            strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=TRANSIENT\", session_id));\n+\n+        m_private_key = DecodeI2PBase64(reply.Get(\"DESTINATION\"));\n     } else {\n-        GenerateAndSavePrivateKey(*sock);\n-    }\n+        // Read our persistent destination (private key) from disk or generate\n+        // one and save it to disk. Then use it when creating the session.\n+        const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n+        if (read_ok) {\n+            m_private_key.assign(data.begin(), data.end());\n+        } else {\n+            GenerateAndSavePrivateKey(*sock);\n+        }\n \n-    const std::string& session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs\n-    const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n+        const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n \n-    SendRequestAndGetReply(*sock, strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n-                                            session_id, private_key_b64));\n+        SendRequestAndGetReply(*sock,\n+                               strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n+                                         session_id,\n+                                         private_key_b64));\n+    }\n \n     m_my_addr = CService(DestBinToAddr(MyDestination()), I2P_SAM31_PORT);\n     m_session_id = session_id;\n     m_control_sock = std::move(sock);\n \n-    LogPrintfCategory(BCLog::I2P, \"SAM session created: session id=%s, my address=%s\\n\",\n-                      m_session_id, m_my_addr.ToString());\n+    Log(\"%s SAM session created: session id=%s, my address=%s\",\n+        session_type,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928744164",
      "id" : 928744164,
      "in_reply_to_id" : 928109439,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843W4Lk",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 408,
      "original_position" : 86,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : null,
      "pull_request_review_id" : 1049256568,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928744164/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-25T10:54:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928744164",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928744880"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928744880"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nice, done!",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-25T10:54:49Z",
      "diff_hunk" : "@@ -355,29 +366,48 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+\n+    Log(\"Creating %s SAM session with %s\", session_type, m_control_host.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928744880",
      "id" : 928744880,
      "in_reply_to_id" : 928263323,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843W4Ww",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 371,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : null,
      "pull_request_review_id" : 1049257690,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928744880/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-25T10:54:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928744880",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928763177"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928763177"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-25T11:13:34Z",
      "diff_hunk" : "@@ -0,0 +1,5 @@\n+New settings\n+------------\n+\n+`-i2ptransientout` has been added to generate a new I2P address for each",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r928763177",
      "id" : 928763177,
      "in_reply_to_id" : 926628187,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843W80p",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 4,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/release-notes-25355.md",
      "position" : null,
      "pull_request_review_id" : 1049285770,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928763177/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-25T11:13:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/928763177",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933116586"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933116586"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It might be be good to standardize between `session <id>` and `session id=<id>` in the logging.\r\n\r\n```\r\n2022-07-29T10:48:31Z [i2p] Creating transient SAM session 402ba97b02 with 127.0.0.1:7656\r\n2022-07-29T10:48:51Z [i2p] Transient SAM session created: session id=402ba97b02, my address=3fuk2uj65qgnlxacjwnyde5v2b36ztorub3a2gzxrhzzswy56c3q.b32.i2p:0\r\n2022-07-29T10:49:05Z [i2p] Persistent SAM session created: session id=2debde9a21, my address=zsxwyo6qcn3chqzwxnseusqgsnuw3maqnztkiypyfxtya4snkoka.b32.i2p:0\r\n2022-07-29T10:49:05Z AddLocal(zsxwyo6qcn3chqzwxnseusqgsnuw3maqnztkiypyfxtya4snkoka.b32.i2p:0,4)\r\n2022-07-29T10:51:31Z Syncing coinstatsindex with block chain from height 548451\r\n2022-07-29T10:51:31Z [i2p] Destroying session 402ba97b02\r\n2022-07-29T10:51:32Z [i2p] Creating transient SAM session 8b04293706 with 127.0.0.1:7656\r\n```\r\n\r\nnit, I think it would be more readable and a better use of screen space if these 3 args remained on one line.",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-29T10:57:22Z",
      "diff_hunk" : "@@ -355,29 +366,47 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+    const auto session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs\n+\n+    Log(\"Creating %s SAM session %s with %s\", session_type, session_id, m_control_host.ToString());\n \n     auto sock = Hello();\n \n-    const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n-    if (read_ok) {\n-        m_private_key.assign(data.begin(), data.end());\n+    if (m_transient) {\n+        // The destination (private key) is generated upon session creation and returned\n+        // in the reply in DESTINATION=.\n+        const Reply& reply = SendRequestAndGetReply(\n+            *sock,\n+            strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=TRANSIENT\", session_id));\n+\n+        m_private_key = DecodeI2PBase64(reply.Get(\"DESTINATION\"));\n     } else {\n-        GenerateAndSavePrivateKey(*sock);\n-    }\n+        // Read our persistent destination (private key) from disk or generate\n+        // one and save it to disk. Then use it when creating the session.\n+        const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n+        if (read_ok) {\n+            m_private_key.assign(data.begin(), data.end());\n+        } else {\n+            GenerateAndSavePrivateKey(*sock);\n+        }\n \n-    const std::string& session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs\n-    const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n+        const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n \n-    SendRequestAndGetReply(*sock, strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n-                                            session_id, private_key_b64));\n+        SendRequestAndGetReply(*sock,\n+                               strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n+                                         session_id,\n+                                         private_key_b64));\n+    }\n \n     m_my_addr = CService(DestBinToAddr(MyDestination()), I2P_SAM31_PORT);\n     m_session_id = session_id;\n     m_control_sock = std::move(sock);\n \n-    LogPrintfCategory(BCLog::I2P, \"SAM session created: session id=%s, my address=%s\\n\",\n-                      m_session_id, m_my_addr.ToString());\n+    Log(\"%s SAM session created: session id=%s, my address=%s\",\n+        Capitalize(session_type),\n+        m_session_id,\n+        m_my_addr.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933116586",
      "id" : 933116586,
      "line" : 409,
      "node_id" : "PRRC_kwDOABII5843njqq",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 409,
      "original_position" : 100,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 100,
      "pull_request_review_id" : 1055363694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933116586/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T11:48:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933116586",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933124931"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933124931"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\nthere is an opportunity to whitelist a given node. However, this also creates an\r\n```\r\n\r\n----\r\n\r\nWould suggest shortening this and avoiding repeating \"a given node\" (also, ISTM we've been avoiding the term \"whitelist\" the past couple years, e.g. with net permissions flag \"noban\" instead) with:\r\n\r\n```\r\nEven if an I2P node does not accept incoming connections, it is known to other\r\nnodes by its outgoing I2P address. If the address is always the same when it\r\nconnects to other nodes, this creates an opportunity to discriminate,\r\nfingerprint or analyze it based on its I2P address.\r\n```",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-29T11:09:59Z",
      "diff_hunk" : "@@ -47,9 +52,35 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to white-list a give node. However, this also creates an",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933124931",
      "id" : 933124931,
      "line" : 70,
      "node_id" : "PRRC_kwDOABII5843nltD",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 70,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : 34,
      "pull_request_review_id" : 1055363694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933124931/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T11:53:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933124931",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933126441"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933126441"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Don't begin a sentence with \"This is because...\" (suggest dropping it: \"The address...\")\r\n\r\nIdem for \"So, ...\" (suggest dropping)\r\n\r\nAn [emdash](https://www.thepunctuationguide.com/em-dash.html) (\" â \" or \" --- \") should be used here, not a hyphen. An emdash can optionally be set off with spaces.\r\n\r\n```suggestion\r\nnodes. It does not make sense to change it often â it must be persistent.\r\n```",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-29T11:12:17Z",
      "diff_hunk" : "@@ -47,9 +52,35 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to white-list a give node. However, this also creates an\n+opportunity to discriminate, fingerprint or analyze a given node based on its\n+I2P address.\n+\n+For this reason, the `-i2ptransientout` configuration option generates and\n+uses a new, transient (disposable) I2P address for each new outbound connection.\n+The address will never be reused, not even if reconnecting to the same peer\n+later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+This is because the address for accepting connections is advertised to the\n+Bitcoin network and it takes time for it to propagate and be known by other\n+nodes. So, it does not make sense to change it often - it must be persistent.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933126441",
      "id" : 933126441,
      "line" : 83,
      "node_id" : "PRRC_kwDOABII5843nmEp",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 83,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : 47,
      "pull_request_review_id" : 1055363694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933126441/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T11:41:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933126441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933132493"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933132493"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    const auto session_id{GetRandHash().GetHex().substr(0, 10)}; // a full id would be overly verbose in the logs\r\n```\r\n\r\n(not sure if braced initialization is better here)\r\n\r\n(in any case: `s/an overkill/overkill/`)",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-29T11:21:33Z",
      "diff_hunk" : "@@ -355,29 +366,47 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+    const auto session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933132493",
      "id" : 933132493,
      "line" : 370,
      "node_id" : "PRRC_kwDOABII5843nnjN",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 370,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 50,
      "pull_request_review_id" : 1055363694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933132493/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T11:41:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933132493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933149034"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933149034"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> the developer notes just say: \"Class member variables have a `m_` prefix\".\r\n\r\nWhile that is true, I've read a number of comments that suggest updating the dev notes with the feedback above (anyway, no big deal.)",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-29T11:42:06Z",
      "diff_hunk" : "@@ -667,6 +687,7 @@ class CConnman\n         std::vector<std::string> m_specified_outgoing;\n         std::vector<std::string> m_added_nodes;\n         bool m_i2p_accept_incoming;\n+        bool m_i2p_transient_out = DEFAULT_I2P_TRANSIENT_OUT;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933149034",
      "id" : 933149034,
      "in_reply_to_id" : 926530653,
      "line" : 690,
      "node_id" : "PRRC_kwDOABII5843nrlq",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 690,
      "original_position" : 53,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 53,
      "pull_request_review_id" : 1055438345,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933149034/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T11:42:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933149034",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933149565"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933149565"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe the style guide on doxygen docs should be removed if it is pointless (though I have been asked to follow it by reviewers). Anyway, only a nit.",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-29T11:42:46Z",
      "diff_hunk" : "@@ -1072,10 +1094,15 @@ class CConnman\n \n     /**\n      * I2P SAM session.\n-     * Used to accept incoming and make outgoing I2P connections.\n+     * Used to accept incoming and make outgoing I2P connections from a persistent I2P address.\n      */\n     std::unique_ptr<i2p::sam::Session> m_i2p_sam_session;\n \n+    /**\n+     * Whether to make outbound I2P connections from a transient, one-time I2P address.\n+     */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933149565",
      "id" : 933149565,
      "in_reply_to_id" : 926534737,
      "line" : 1103,
      "node_id" : "PRRC_kwDOABII5843nrt9",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 1103,
      "original_position" : 76,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 76,
      "pull_request_review_id" : 1055438978,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933149565/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T11:42:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933149565",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933150352"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933150352"
         }
      },
      "author_association" : "MEMBER",
      "body" : "For larger changes, yes. YMMV; I've only ever been asked to do the opposite and squash them.",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-29T11:43:41Z",
      "diff_hunk" : "@@ -115,8 +115,19 @@ namespace sam {\n Session::Session(const fs::path& private_key_file,\n                  const CService& control_host,\n                  CThreadInterrupt* interrupt)\n-    : m_private_key_file(private_key_file), m_control_host(control_host), m_interrupt(interrupt),\n-      m_control_sock(std::make_unique<Sock>(INVALID_SOCKET))\n+    : m_private_key_file{private_key_file},\n+      m_control_host{control_host},\n+      m_interrupt{interrupt},\n+      m_control_sock{std::make_unique<Sock>(INVALID_SOCKET)},\n+      m_transient{false}\n+{\n+}\n+\n+Session::Session(const CService& control_host, CThreadInterrupt* interrupt)\n+    : m_control_host{control_host},\n+      m_interrupt{interrupt},\n+      m_control_sock{std::make_unique<Sock>(INVALID_SOCKET)},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933150352",
      "id" : 933150352,
      "in_reply_to_id" : 926540525,
      "line" : 129,
      "node_id" : "PRRC_kwDOABII5843nr6Q",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 129,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 30,
      "pull_request_review_id" : 1055439815,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933150352/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T11:43:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933150352",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933152811"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933152811"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n- An `-i2ptransientout` configuration option has been added to opt out of the new default behavior of creating a new, transient I2P address\r\n```",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-29T11:46:40Z",
      "diff_hunk" : "@@ -0,0 +1,14 @@\n+Notable changes\n+===============\n+\n+P2P and network changes\n+-----------------------\n+\n+- With I2P connections, a new, transient address is used for each outbound\n+  connection by default. (#25355)\n+\n+New settings\n+------------\n+\n+- The `-i2ptransientout` option has been added to generate a new I2P address",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933152811",
      "id" : 933152811,
      "line" : 13,
      "node_id" : "PRRC_kwDOABII5843nsgr",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "doc/release-notes-25355.md",
      "position" : 13,
      "pull_request_review_id" : 1055442605,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933152811/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T11:47:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933152811",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933156141"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933156141"
         }
      },
      "author_association" : "MEMBER",
      "body" : "maybe s/generates and uses/creates/",
      "commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "created_at" : "2022-07-29T11:50:18Z",
      "diff_hunk" : "@@ -47,9 +52,35 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to white-list a give node. However, this also creates an\n+opportunity to discriminate, fingerprint or analyze a given node based on its\n+I2P address.\n+\n+For this reason, the `-i2ptransientout` configuration option generates and\n+uses a new, transient (disposable) I2P address for each new outbound connection.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933156141",
      "id" : 933156141,
      "line" : 75,
      "node_id" : "PRRC_kwDOABII5843ntUt",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 75,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : 39,
      "pull_request_review_id" : 1055446092,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933156141/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T11:50:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933156141",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`506d59e2e1...acae0543fc`: address suggestions\r\n\r\nInvalidates ACK from @jonatack \r\n",
      "created_at" : "2022-07-29T13:14:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1199271984",
      "id" : 1199271984,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585He3Aw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1199271984/reactions"
      },
      "updated_at" : "2022-07-29T13:14:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1199271984",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933250630"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933250630"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done, now we print \"SAM session xyz\" from everywhere.\r\n\r\n(clang-format formats it like that, given a line length limit)",
      "commit_id" : "acae0543fc8fb7954eadbd7019e446f31112211e",
      "created_at" : "2022-07-29T13:14:54Z",
      "diff_hunk" : "@@ -355,29 +366,47 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+    const auto session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs\n+\n+    Log(\"Creating %s SAM session %s with %s\", session_type, session_id, m_control_host.ToString());\n \n     auto sock = Hello();\n \n-    const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n-    if (read_ok) {\n-        m_private_key.assign(data.begin(), data.end());\n+    if (m_transient) {\n+        // The destination (private key) is generated upon session creation and returned\n+        // in the reply in DESTINATION=.\n+        const Reply& reply = SendRequestAndGetReply(\n+            *sock,\n+            strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=TRANSIENT\", session_id));\n+\n+        m_private_key = DecodeI2PBase64(reply.Get(\"DESTINATION\"));\n     } else {\n-        GenerateAndSavePrivateKey(*sock);\n-    }\n+        // Read our persistent destination (private key) from disk or generate\n+        // one and save it to disk. Then use it when creating the session.\n+        const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n+        if (read_ok) {\n+            m_private_key.assign(data.begin(), data.end());\n+        } else {\n+            GenerateAndSavePrivateKey(*sock);\n+        }\n \n-    const std::string& session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs\n-    const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n+        const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n \n-    SendRequestAndGetReply(*sock, strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n-                                            session_id, private_key_b64));\n+        SendRequestAndGetReply(*sock,\n+                               strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n+                                         session_id,\n+                                         private_key_b64));\n+    }\n \n     m_my_addr = CService(DestBinToAddr(MyDestination()), I2P_SAM31_PORT);\n     m_session_id = session_id;\n     m_control_sock = std::move(sock);\n \n-    LogPrintfCategory(BCLog::I2P, \"SAM session created: session id=%s, my address=%s\\n\",\n-                      m_session_id, m_my_addr.ToString());\n+    Log(\"%s SAM session created: session id=%s, my address=%s\",\n+        Capitalize(session_type),\n+        m_session_id,\n+        m_my_addr.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933250630",
      "id" : 933250630,
      "in_reply_to_id" : 933116586,
      "line" : 409,
      "node_id" : "PRRC_kwDOABII5843oEZG",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 409,
      "original_position" : 100,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 100,
      "pull_request_review_id" : 1055554241,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933250630/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T13:15:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933250630",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933252776"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933252776"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Took the suggestion, but left the \"whitelist\" text.",
      "commit_id" : "acae0543fc8fb7954eadbd7019e446f31112211e",
      "created_at" : "2022-07-29T13:16:44Z",
      "diff_hunk" : "@@ -47,9 +52,35 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to white-list a give node. However, this also creates an",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933252776",
      "id" : 933252776,
      "in_reply_to_id" : 933124931,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843oE6o",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 70,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : null,
      "pull_request_review_id" : 1055556568,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933252776/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T13:16:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933252776",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933254047"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933254047"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done, changed the minus to em-_and_ :laughing:",
      "commit_id" : "acae0543fc8fb7954eadbd7019e446f31112211e",
      "created_at" : "2022-07-29T13:17:48Z",
      "diff_hunk" : "@@ -47,9 +52,35 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to white-list a give node. However, this also creates an\n+opportunity to discriminate, fingerprint or analyze a given node based on its\n+I2P address.\n+\n+For this reason, the `-i2ptransientout` configuration option generates and\n+uses a new, transient (disposable) I2P address for each new outbound connection.\n+The address will never be reused, not even if reconnecting to the same peer\n+later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+This is because the address for accepting connections is advertised to the\n+Bitcoin network and it takes time for it to propagate and be known by other\n+nodes. So, it does not make sense to change it often - it must be persistent.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933254047",
      "id" : 933254047,
      "in_reply_to_id" : 933126441,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843oFOf",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 83,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : null,
      "pull_request_review_id" : 1055557929,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933254047/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T13:17:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933254047",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933256063"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933256063"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`{}` forces stricter type checks. E.g. `Foo x{expression_that_returns_Bar};` but it is pointless when `auto` is used. I find it more readable to use `=`.\r\n\r\nRemoved the \"an \".",
      "commit_id" : "acae0543fc8fb7954eadbd7019e446f31112211e",
      "created_at" : "2022-07-29T13:19:38Z",
      "diff_hunk" : "@@ -355,29 +366,47 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+    const auto session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933256063",
      "id" : 933256063,
      "in_reply_to_id" : 933132493,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843oFt_",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 370,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : null,
      "pull_request_review_id" : 1055560213,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933256063/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T13:19:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933256063",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933259452"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933259452"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "acae0543fc8fb7954eadbd7019e446f31112211e",
      "created_at" : "2022-07-29T13:22:29Z",
      "diff_hunk" : "@@ -47,9 +52,35 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to white-list a give node. However, this also creates an\n+opportunity to discriminate, fingerprint or analyze a given node based on its\n+I2P address.\n+\n+For this reason, the `-i2ptransientout` configuration option generates and\n+uses a new, transient (disposable) I2P address for each new outbound connection.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933259452",
      "id" : 933259452,
      "in_reply_to_id" : 933156141,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843oGi8",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 75,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : null,
      "pull_request_review_id" : 1055563860,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933259452/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T13:22:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933259452",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933261730"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933261730"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I find the suggestion unnecessary long. Maybe append \"(default: true)\" to the current text?",
      "commit_id" : "acae0543fc8fb7954eadbd7019e446f31112211e",
      "created_at" : "2022-07-29T13:24:35Z",
      "diff_hunk" : "@@ -0,0 +1,14 @@\n+Notable changes\n+===============\n+\n+P2P and network changes\n+-----------------------\n+\n+- With I2P connections, a new, transient address is used for each outbound\n+  connection by default. (#25355)\n+\n+New settings\n+------------\n+\n+- The `-i2ptransientout` option has been added to generate a new I2P address",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933261730",
      "id" : 933261730,
      "in_reply_to_id" : 933152811,
      "line" : 13,
      "node_id" : "PRRC_kwDOABII5843oHGi",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "doc/release-notes-25355.md",
      "position" : 13,
      "pull_request_review_id" : 1055566603,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933261730/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T13:24:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933261730",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933384769"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933384769"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could drop \"of the new default behavior\" for brevity if you prefer, but opting out of the new default is the only reason for adding the config option so it seems best to describe it in this way. ",
      "commit_id" : "acae0543fc8fb7954eadbd7019e446f31112211e",
      "created_at" : "2022-07-29T15:26:47Z",
      "diff_hunk" : "@@ -0,0 +1,14 @@\n+Notable changes\n+===============\n+\n+P2P and network changes\n+-----------------------\n+\n+- With I2P connections, a new, transient address is used for each outbound\n+  connection by default. (#25355)\n+\n+New settings\n+------------\n+\n+- The `-i2ptransientout` option has been added to generate a new I2P address",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933384769",
      "id" : 933384769,
      "in_reply_to_id" : 933152811,
      "line" : 13,
      "node_id" : "PRRC_kwDOABII5843olJB",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "doc/release-notes-25355.md",
      "position" : 13,
      "pull_request_review_id" : 1055730215,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933384769/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T15:26:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933384769",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933392577"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933392577"
         }
      },
      "author_association" : "MEMBER",
      "body" : "maybe s/const auto/const auto&/ (I'm not sure if compilers curerntly detect and optimize this to avoid a copy)",
      "commit_id" : "acae0543fc8fb7954eadbd7019e446f31112211e",
      "created_at" : "2022-07-29T15:36:09Z",
      "diff_hunk" : "@@ -355,29 +366,47 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+    const auto session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933392577",
      "id" : 933392577,
      "in_reply_to_id" : 933132493,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5843onDB",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 370,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : null,
      "pull_request_review_id" : 1055743108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933392577/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T15:36:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933392577",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933411983"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933411983"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe unrelated, but twice now while testing this branch bitcoind hangs on shutdown at \"addcon thread exit\" and the peers.dat is corrupt on next startup: \"Invalid or corrupt peers.dat (Checksum mismatch, data corrupted).\"\r\n\r\nEdit: to be clear, it doesn't happen every time, so it may be something else. I just now shut down bitcoind fine, but it was only up for a few minutes.\r\n\r\n```\r\n^C2022-07-29T16:02:19Z tor: Thread interrupt\r\n2022-07-29T16:02:19Z torcontrol thread exit\r\n2022-07-29T16:02:19Z Shutdown: In progress...\r\n2022-07-29T16:02:22Z addcon thread exit\r\n2022-07-29T16:02:58Z loadblk thread exit\r\n2022-07-29T16:02:58Z Syncing coinstatsindex with block chain from height 551618\r\n2022-07-29T16:02:58Z opencon thread exit\r\n2022-07-29T16:02:58Z i2paccept thread exit\r\n2022-07-29T16:02:58Z net thread exit\r\n2022-07-29T16:02:58Z msghand thread exit\r\n2022-07-29T16:03:00Z coinstatsindex thread exit\r\n2022-07-29T16:03:01Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\r\n2022-07-29T16:03:01Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.01s)\r\n2022-07-29T16:03:01Z [i2p] Destroying SAM session 4fbf4af0dd\r\n2022-07-29T16:03:01Z [i2p] Destroying SAM session 3521c380e9\r\n2022-07-29T16:03:01Z [i2p] Destroying SAM session f26b987665\r\n2022-07-29T16:03:01Z scheduler thread exit\r\n2022-07-29T16:03:01Z [i2p] Destroying SAM session 7ad0f61fe0\r\n2022-07-29T16:03:06Z [test] Releasing wallet\r\n2022-07-29T16:03:06Z [sqlite2] Releasing wallet\r\n2022-07-29T16:03:06Z [sqlite] Releasing wallet\r\n2022-07-29T16:03:06Z [default wallet] Releasing wallet\r\n2022-07-29T16:03:06Z Shutdown: done\r\n```\r\n",
      "commit_id" : "acae0543fc8fb7954eadbd7019e446f31112211e",
      "created_at" : "2022-07-29T15:57:12Z",
      "diff_hunk" : "@@ -565,6 +576,7 @@ void CNode::CloseSocketDisconnect()\n         LogPrint(BCLog::NET, \"disconnecting peer=%d\\n\", id);\n         m_sock.reset();\n     }\n+    m_i2p_session.reset();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933411983",
      "id" : 933411983,
      "line" : 579,
      "node_id" : "PRRC_kwDOABII5843oryP",
      "original_commit_id" : "acae0543fc8fb7954eadbd7019e446f31112211e",
      "original_line" : 579,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 47,
      "pull_request_review_id" : 1055772568,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933411983/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T16:05:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933411983",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933415255"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933415255"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Done, now we print \"SAM session xyz\" from everywhere.\r\n\r\nTested, nice!\r\n \r\n> (clang-format formats it like that, given a line length limit)\r\n\r\nDon't give it such a low limit :D ",
      "commit_id" : "acae0543fc8fb7954eadbd7019e446f31112211e",
      "created_at" : "2022-07-29T16:01:28Z",
      "diff_hunk" : "@@ -355,29 +366,47 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+    const auto session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs\n+\n+    Log(\"Creating %s SAM session %s with %s\", session_type, session_id, m_control_host.ToString());\n \n     auto sock = Hello();\n \n-    const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n-    if (read_ok) {\n-        m_private_key.assign(data.begin(), data.end());\n+    if (m_transient) {\n+        // The destination (private key) is generated upon session creation and returned\n+        // in the reply in DESTINATION=.\n+        const Reply& reply = SendRequestAndGetReply(\n+            *sock,\n+            strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=TRANSIENT\", session_id));\n+\n+        m_private_key = DecodeI2PBase64(reply.Get(\"DESTINATION\"));\n     } else {\n-        GenerateAndSavePrivateKey(*sock);\n-    }\n+        // Read our persistent destination (private key) from disk or generate\n+        // one and save it to disk. Then use it when creating the session.\n+        const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n+        if (read_ok) {\n+            m_private_key.assign(data.begin(), data.end());\n+        } else {\n+            GenerateAndSavePrivateKey(*sock);\n+        }\n \n-    const std::string& session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs\n-    const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n+        const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n \n-    SendRequestAndGetReply(*sock, strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n-                                            session_id, private_key_b64));\n+        SendRequestAndGetReply(*sock,\n+                               strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n+                                         session_id,\n+                                         private_key_b64));\n+    }\n \n     m_my_addr = CService(DestBinToAddr(MyDestination()), I2P_SAM31_PORT);\n     m_session_id = session_id;\n     m_control_sock = std::move(sock);\n \n-    LogPrintfCategory(BCLog::I2P, \"SAM session created: session id=%s, my address=%s\\n\",\n-                      m_session_id, m_my_addr.ToString());\n+    Log(\"%s SAM session created: session id=%s, my address=%s\",\n+        Capitalize(session_type),\n+        m_session_id,\n+        m_my_addr.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933415255",
      "id" : 933415255,
      "in_reply_to_id" : 933116586,
      "line" : 409,
      "node_id" : "PRRC_kwDOABII5843oslX",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 409,
      "original_position" : 100,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 100,
      "pull_request_review_id" : 1055777286,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933415255/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-29T16:01:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933415255",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933617054"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933617054"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe mention that we'll still self-advertise the persistent address on outbound connections if `-i2pacceptincoming=1` and `-i2ptransientout=1`?\r\nIn this case, making outbound connections transient doesn't really add any privacy because we'll self-advertise our persistent address on each connection, even though we create a transient address to connect with.",
      "commit_id" : "2dc46836308e184faf7930b56fd208d00d33d6dd",
      "created_at" : "2022-07-29T21:05:40Z",
      "diff_hunk" : "@@ -47,9 +52,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to whitelist a given node. However, this also creates an\n+opportunity to discriminate, fingerprint or analyze a given node based on its\n+I2P address.\n+\n+For this reason, the `-i2ptransientout` configuration option creates a new,\n+transient (disposable) I2P address for each new outbound connection. The address\n+will never be reused, not even if reconnecting to the same peer later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+The address for accepting connections is advertised to the Bitcoin network and",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933617054",
      "id" : 933617054,
      "line" : 80,
      "node_id" : "PRRC_kwDOABII5843pd2e",
      "original_commit_id" : "1eb601d6f8a5a8817f13bde8a19c93fdc74a20da",
      "original_line" : 80,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : 44,
      "pull_request_review_id" : 1056062318,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933617054/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-01T22:09:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933617054",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933621106"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933621106"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "22997f5c3443acb853cbb84a4ce27f0ac634ee14 could maybe be squashed, this line already moved in an earlier commit.",
      "commit_id" : "2dc46836308e184faf7930b56fd208d00d33d6dd",
      "created_at" : "2022-07-29T21:14:05Z",
      "diff_hunk" : "@@ -367,13 +367,12 @@ void Session::CreateIfNotCreatedAlready()\n     }\n \n     const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+    const auto session_id = GetRandHash().GetHex().substr(0, 10); // full is overkill, too verbose in the logs",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933621106",
      "id" : 933621106,
      "line" : 370,
      "node_id" : "PRRC_kwDOABII5843pe1y",
      "original_commit_id" : "22997f5c3443acb853cbb84a4ce27f0ac634ee14",
      "original_line" : 370,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 41,
      "pull_request_review_id" : 1056062318,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933621106/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-01T22:09:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/933621106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK acae0543fc8fb7954eadbd7019e446f31112211e\r\n\r\nsuggestions:\r\n- https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933384769\r\n- commit message \"i2p: log the session id in the \"Creating seesion\" message\" -> \"session\"\r\n- squash or drop the small style commits\r\n\r\n> > I think it would make sense to add the user-facing configuration option after the functionality has been added rather than before.\r\n> \r\n> That would require adding a line (the functionality) and changing it in the next commit (to make it conditional). That would be more work for reviewers and for history gazers (git blame). Should I?\r\n\r\nAt this point, no, to avoid re-reviewing, unless others request it.",
      "created_at" : "2022-07-30T09:37:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1200125144",
      "id" : 1200125144,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585HiHTY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1200125144/reactions"
      },
      "updated_at" : "2022-07-30T09:37:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1200125144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941235373"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941235373"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Squashed, I find it hard to review this way, but you are the reviewer after all ð§",
      "commit_id" : "2dc46836308e184faf7930b56fd208d00d33d6dd",
      "created_at" : "2022-08-09T11:41:47Z",
      "diff_hunk" : "@@ -115,8 +115,19 @@ namespace sam {\n Session::Session(const fs::path& private_key_file,\n                  const CService& control_host,\n                  CThreadInterrupt* interrupt)\n-    : m_private_key_file(private_key_file), m_control_host(control_host), m_interrupt(interrupt),\n-      m_control_sock(std::make_unique<Sock>(INVALID_SOCKET))\n+    : m_private_key_file{private_key_file},\n+      m_control_host{control_host},\n+      m_interrupt{interrupt},\n+      m_control_sock{std::make_unique<Sock>(INVALID_SOCKET)},\n+      m_transient{false}\n+{\n+}\n+\n+Session::Session(const CService& control_host, CThreadInterrupt* interrupt)\n+    : m_control_host{control_host},\n+      m_interrupt{interrupt},\n+      m_control_sock{std::make_unique<Sock>(INVALID_SOCKET)},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941235373",
      "id" : 941235373,
      "in_reply_to_id" : 926540525,
      "line" : 129,
      "node_id" : "PRRC_kwDOABII5844Ghyt",
      "original_commit_id" : "153ce63b986eb51c1aa0616f4bb4aee481b0d1b0",
      "original_line" : 129,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 30,
      "pull_request_review_id" : 1066573791,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941235373/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-09T11:41:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941235373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941240172"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941240172"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "If there is an option to opt out of X, I would expect enabling that option to opt out of X. This is not the case with `-i2ptransientout`, thus I think the above suggestion could be misleading. That option is to enable the usage of transient addresses. To opt out of that the user has to disable the option.",
      "commit_id" : "2dc46836308e184faf7930b56fd208d00d33d6dd",
      "created_at" : "2022-08-09T11:47:35Z",
      "diff_hunk" : "@@ -0,0 +1,14 @@\n+Notable changes\n+===============\n+\n+P2P and network changes\n+-----------------------\n+\n+- With I2P connections, a new, transient address is used for each outbound\n+  connection by default. (#25355)\n+\n+New settings\n+------------\n+\n+- The `-i2ptransientout` option has been added to generate a new I2P address",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941240172",
      "id" : 941240172,
      "in_reply_to_id" : 933152811,
      "line" : 13,
      "node_id" : "PRRC_kwDOABII5844Gi9s",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "doc/release-notes-25355.md",
      "position" : 13,
      "pull_request_review_id" : 1066580661,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941240172/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-09T11:47:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941240172",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941245634"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941245634"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good point! That behavior would be surprising and documenting it is sub-optimal. Better don't advertise our persistent address over I2P outgoing connections that use transient addresses. I extended the commit `net: create a transient I2P session if -i2ptransientout is given` with the following diff to achieve that:\r\n\r\n<details>\r\n<summary>[patch] don't self-advertise</summary>\r\n\r\n```diff\r\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\r\nindex 74d1bf44d2..17c67ae7a5 100644\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -2773,12 +2773,32 @@ void PeerManagerImpl::ProcessBlock(CNode& node, const std::shared_ptr<const CBlo\r\n     } else {\r\n         LOCK(cs_main);\r\n         mapBlockSource.erase(block->GetHash());\r\n     }\r\n }\r\n \r\n+/**\r\n+ * Decide if we should send our own address to a given peer as a self-advertisement.\r\n+ * We do the self-advertisement:\r\n+ * - initially after establishing the connection and\r\n+ * - periodically every ~24h (AVG_LOCAL_ADDRESS_BROADCAST_INTERVAL).\r\n+ */\r\n+static bool ShouldSelfAdvertiseTo(const CNode& node)\r\n+{\r\n+    if (!fListen) {\r\n+        return false;\r\n+    }\r\n+\r\n+    // Don't self-advertise if this is an I2P outbound connection and -i2ptransientout=1.\r\n+    // If we do so, then we would self-advertise our persistent I2P address, used for\r\n+    // accepting incoming connections, which would defeat the purpose of using transient\r\n+    // addresses for outgoing connections.\r\n+    return !node.addrBind.IsI2P() || node.IsInboundConn() ||\r\n+           !gArgs.GetBoolArg(\"-i2ptransientout\", DEFAULT_I2P_TRANSIENT_OUT);\r\n+}\r\n+\r\n void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDataStream& vRecv,\r\n                                      const std::chrono::microseconds time_received,\r\n                                      const std::atomic<bool>& interruptMsgProc)\r\n {\r\n     LogPrint(BCLog::NET, \"received: %s (%u bytes) peer=%d\\n\", SanitizeString(msg_type), vRecv.size(), pfrom.GetId());\r\n \r\n@@ -2924,14 +2944,14 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\r\n             // empty and no one will know who we are, so these mechanisms are\r\n             // important to help us connect to the network.\r\n             //\r\n             // We skip this for block-relay-only peers. We want to avoid\r\n             // potentially leaking addr information and we do not want to\r\n             // indicate to the peer that we will participate in addr relay.\r\n-            if (fListen && !m_chainman.ActiveChainstate().IsInitialBlockDownload())\r\n-            {\r\n+            if (ShouldSelfAdvertiseTo(pfrom) && !m_chainman.ActiveChainstate().IsInitialBlockDownload()) {\r\n+\r\n                 CAddress addr{GetLocalAddress(pfrom.addr), peer->m_our_services, (uint32_t)GetAdjustedTime()};\r\n                 FastRandomContext insecure_rand;\r\n                 if (addr.IsRoutable())\r\n                 {\r\n                     LogPrint(BCLog::NET, \"ProcessMessages: advertising address %s\\n\", addr.ToString());\r\n                     PushAddress(*peer, addr, insecure_rand);\r\n@@ -4670,13 +4690,13 @@ void PeerManagerImpl::MaybeSendAddr(CNode& node, Peer& peer, std::chrono::micros\r\n {\r\n     // Nothing to do for non-address-relay peers\r\n     if (!peer.m_addr_relay_enabled) return;\r\n \r\n     LOCK(peer.m_addr_send_times_mutex);\r\n     // Periodically advertise our local address to the peer.\r\n-    if (fListen && !m_chainman.ActiveChainstate().IsInitialBlockDownload() &&\r\n+    if (ShouldSelfAdvertiseTo(node) && !m_chainman.ActiveChainstate().IsInitialBlockDownload() &&\r\n         peer.m_next_local_addr_send < current_time) {\r\n         // If we've sent before, clear the bloom filter for the peer, so that our\r\n         // self-announcement will actually go out.\r\n         // This might be unnecessary if the bloom filter has already rolled\r\n         // over since our last self-announcement, but there is only a small\r\n         // bandwidth cost that we can incur by doing this (which happens\r\n```\r\n</details>\r\n\r\nSince this PR had two ACKs without the above, let me know if it is ok or if I should remove it (@jonatack, @mzumsande).",
      "commit_id" : "2dc46836308e184faf7930b56fd208d00d33d6dd",
      "created_at" : "2022-08-09T11:54:14Z",
      "diff_hunk" : "@@ -47,9 +52,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to whitelist a given node. However, this also creates an\n+opportunity to discriminate, fingerprint or analyze a given node based on its\n+I2P address.\n+\n+For this reason, the `-i2ptransientout` configuration option creates a new,\n+transient (disposable) I2P address for each new outbound connection. The address\n+will never be reused, not even if reconnecting to the same peer later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+The address for accepting connections is advertised to the Bitcoin network and",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941245634",
      "id" : 941245634,
      "in_reply_to_id" : 933617054,
      "line" : 80,
      "node_id" : "PRRC_kwDOABII5844GkTC",
      "original_commit_id" : "1eb601d6f8a5a8817f13bde8a19c93fdc74a20da",
      "original_line" : 80,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : 44,
      "pull_request_review_id" : 1066588555,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941245634/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-09T11:54:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941245634",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941245817"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941245817"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Squashed.",
      "commit_id" : "2dc46836308e184faf7930b56fd208d00d33d6dd",
      "created_at" : "2022-08-09T11:54:24Z",
      "diff_hunk" : "@@ -367,13 +367,12 @@ void Session::CreateIfNotCreatedAlready()\n     }\n \n     const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+    const auto session_id = GetRandHash().GetHex().substr(0, 10); // full is overkill, too verbose in the logs",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941245817",
      "id" : 941245817,
      "in_reply_to_id" : 933621106,
      "line" : 370,
      "node_id" : "PRRC_kwDOABII5844GkV5",
      "original_commit_id" : "22997f5c3443acb853cbb84a4ce27f0ac634ee14",
      "original_line" : 370,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 41,
      "pull_request_review_id" : 1066588729,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941245817/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-09T11:54:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941245817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`acae0543fc...2dc4683630`: address suggestions\r\n\r\nInvalidates ACKs from @jonatack, @mzumsande ",
      "created_at" : "2022-08-09T11:54:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1209283331",
      "id" : 1209283331,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585IFDMD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209283331/reactions"
      },
      "updated_at" : "2022-08-09T11:55:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209283331",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`2dc4683630...18ee27ce7f`: rebase due to conflicts\r\n\r\nPreviously invalidated ACKs from @jonatack, @mzumsande",
      "created_at" : "2022-08-09T12:09:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1209298156",
      "id" : 1209298156,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585IFGzs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209298156/reactions"
      },
      "updated_at" : "2022-08-09T12:09:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209298156",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-08-09T12:09:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1209298321",
      "id" : 1209298321,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585IFG2R",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209298321/reactions"
      },
      "updated_at" : "2022-08-09T12:09:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209298321",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941348848"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941348848"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No need for a reference: https://stackoverflow.com/questions/38043319/how-does-guaranteed-copy-elision-work#38043447",
      "commit_id" : "18ee27ce7f9bda199255137b2c4f617279650625",
      "created_at" : "2022-08-09T13:35:12Z",
      "diff_hunk" : "@@ -355,29 +366,47 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+    const auto session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941348848",
      "id" : 941348848,
      "in_reply_to_id" : 933132493,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5844G9fw",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 370,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : null,
      "pull_request_review_id" : 1066736894,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941348848/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-09T13:35:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941348848",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941370054"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941370054"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This seems problematic to me: A new node with `-i2pacceptincoming=1` (that doesn't change the default `-i2ptransientout` value) will have a hard time getting inbound peers if it only self-advertises to inbound peers, but only receives inbound peers once it has successfully self-advertised.\r\n\r\nMaybe it makes sense to instead soft-set `-i2ptransientout` to false if `-i2pacceptincoming` was chosen? Or, alternatively, just document this behavior, because, as you wrote above, \"a node that wants to avoid this should not be listening.\"",
      "commit_id" : "18ee27ce7f9bda199255137b2c4f617279650625",
      "created_at" : "2022-08-09T13:52:27Z",
      "diff_hunk" : "@@ -47,9 +52,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to whitelist a given node. However, this also creates an\n+opportunity to discriminate, fingerprint or analyze a given node based on its\n+I2P address.\n+\n+For this reason, the `-i2ptransientout` configuration option creates a new,\n+transient (disposable) I2P address for each new outbound connection. The address\n+will never be reused, not even if reconnecting to the same peer later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+The address for accepting connections is advertised to the Bitcoin network and",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941370054",
      "id" : 941370054,
      "in_reply_to_id" : 933617054,
      "line" : 80,
      "node_id" : "PRRC_kwDOABII5844HCrG",
      "original_commit_id" : "1eb601d6f8a5a8817f13bde8a19c93fdc74a20da",
      "original_line" : 80,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : 44,
      "pull_request_review_id" : 1066767048,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941370054/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-09T13:52:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941370054",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941565243"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941565243"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "A node could self-advertise its I2P address to an IPv4 peer if it only listens on I2P. However, if it also listens on IPv4 then it would prefer its IPv4 address. I guess that for the discussion here we should assume that I2P addresses get self-advertised only (mostly) over I2P connections.\r\n\r\nFrom what you have pointed out it seems that `-i2pacceptincoming=1` is kind of incompatible with `-i2ptransientout=1` because if both are set, then:\r\n\r\n* if we self-advertise our persistent address in outgoing I2P connections, then that is very easy to detect and the same as `-i2ptransientout=0` wrt privacy\r\n* if we don't self-advertise in outgoing I2P connections then nobody is going to learn our listening I2P address and we will not get incoming connections, like `-i2pacceptincoming=0`\r\n\r\nIn current code we have `-i2pacceptincoming` default to `1`. Assuming we don't want to change that, then maybe introduce `-i2ptransientout` with a default of `0` and hard fail the startup if both are explicitly/manually set to `1` by the user? And flip `-i2ptransientout` to `1` if `-i2pacceptincoming` is switched off by the user?\r\n\r\nHow does this work for Tor? From what I read in the code, if a node is listening on a Tor service, then it would self-advertise its listening Tor address in outbound Tor connections. So, \"the Tor peer does not know who is connecting to them\" is not true in this case - the peer knows the connecting node's Tor address (which is persistent).",
      "commit_id" : "18ee27ce7f9bda199255137b2c4f617279650625",
      "created_at" : "2022-08-09T16:38:38Z",
      "diff_hunk" : "@@ -47,9 +52,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to whitelist a given node. However, this also creates an\n+opportunity to discriminate, fingerprint or analyze a given node based on its\n+I2P address.\n+\n+For this reason, the `-i2ptransientout` configuration option creates a new,\n+transient (disposable) I2P address for each new outbound connection. The address\n+will never be reused, not even if reconnecting to the same peer later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+The address for accepting connections is advertised to the Bitcoin network and",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941565243",
      "id" : 941565243,
      "in_reply_to_id" : 933617054,
      "line" : 80,
      "node_id" : "PRRC_kwDOABII5844HyU7",
      "original_commit_id" : "1eb601d6f8a5a8817f13bde8a19c93fdc74a20da",
      "original_line" : 80,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : 44,
      "pull_request_review_id" : 1067048639,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941565243/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-09T16:38:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941565243",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941709948"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941709948"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> From what you have pointed out it seems that `-i2pacceptincoming=1` is kind of incompatible with `-i2ptransientout=1` \r\n\r\nYes, I think that's correct.\r\n\r\n> In current code we have `-i2pacceptincoming` default to `1`. Assuming we don't want to change that, then maybe introduce `-i2ptransientout` with a default of `0` and hard fail the startup if both are explicitly/manually set to `1` by the user? And flip `-i2ptransientout` to `1` if `-i2pacceptincoming` is switched off by the user?\r\n\r\nThat looks sensible to me. \r\n\r\nAs an alternative thought, I wonder if we would lose much if we'd instead tie the creation of transient addresses to `-i2pacceptincoming=0` and not introduce a `-i2ptransientout` option at all. That would make things much simpler, but we wouldn't support the use case of `-i2pacceptincoming=0`, `-i2ptransientout=0` anymore (so that potential peers couldn't  whitelist our permanent address). But is there a lot utility in whitelisting i2p peers like that? I'm asking because if out peer doesn't know who we are, they don't really have a reason to whitelist us, and if they actually do know us, why would we need to connect to them via i2p in the first place?\r\n\r\n> How does this work for Tor? From what I read in the code, if a node is listening on a Tor service, then it would self-advertise its listening Tor address in outbound Tor connections. So, \"the Tor peer does not know who is connecting to them\" is not true in this case - the peer knows the connecting node's Tor address (which is persistent).\r\n\r\nThat looks right, although I didn't test it. But I think that if you want to have Tor inbound connections, it is not unreasonable to assume that you might want to let the network (including your outbound peers) know about that.\r\n\r\n",
      "commit_id" : "18ee27ce7f9bda199255137b2c4f617279650625",
      "created_at" : "2022-08-09T19:07:06Z",
      "diff_hunk" : "@@ -47,9 +52,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to whitelist a given node. However, this also creates an\n+opportunity to discriminate, fingerprint or analyze a given node based on its\n+I2P address.\n+\n+For this reason, the `-i2ptransientout` configuration option creates a new,\n+transient (disposable) I2P address for each new outbound connection. The address\n+will never be reused, not even if reconnecting to the same peer later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+The address for accepting connections is advertised to the Bitcoin network and",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r941709948",
      "id" : 941709948,
      "in_reply_to_id" : 933617054,
      "line" : 80,
      "node_id" : "PRRC_kwDOABII5844IVp8",
      "original_commit_id" : "1eb601d6f8a5a8817f13bde8a19c93fdc74a20da",
      "original_line" : 80,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : 44,
      "pull_request_review_id" : 1067252345,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941709948/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-09T19:07:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/941709948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r942360732"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/942360732"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> As an alternative thought...\r\n\r\nThat sounds even better to me. I like _not_ adding new options :) Use transient addresses if `-i2pacceptincoming=0`, simple. That would make it work similar to Tor - if we are listening then we reveal our (Tor or I2P) listening address to the peers we connect to (outbound).\r\n\r\nAs for the downside of not being able to whitelist if `-i2pacceptincoming=0` (and thus transient addresses are being used), that can be done later if https://github.com/bitcoin/bitcoin/pull/17167 gets in, and/or use the persistent address for making outbound connections to nodes given to `-addnode=` or `-connect=` even if transient ones are being used for other outbound connections (due to `-i2pacceptincoming=0`).\r\n\r\nMakes sense?",
      "commit_id" : "18ee27ce7f9bda199255137b2c4f617279650625",
      "created_at" : "2022-08-10T11:56:46Z",
      "diff_hunk" : "@@ -47,9 +52,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to whitelist a given node. However, this also creates an\n+opportunity to discriminate, fingerprint or analyze a given node based on its\n+I2P address.\n+\n+For this reason, the `-i2ptransientout` configuration option creates a new,\n+transient (disposable) I2P address for each new outbound connection. The address\n+will never be reused, not even if reconnecting to the same peer later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+The address for accepting connections is advertised to the Bitcoin network and",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r942360732",
      "id" : 942360732,
      "in_reply_to_id" : 933617054,
      "line" : 80,
      "node_id" : "PRRC_kwDOABII5844K0ic",
      "original_commit_id" : "1eb601d6f8a5a8817f13bde8a19c93fdc74a20da",
      "original_line" : 80,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : 44,
      "pull_request_review_id" : 1068149283,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/942360732/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-10T11:57:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/942360732",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r942586103"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/942586103"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Makes sense?\r\n\r\nYes, I also like that option best! (and the transient address behavior could then be mentioned in the  `-i2pacceptincoming` RPC help).",
      "commit_id" : "18ee27ce7f9bda199255137b2c4f617279650625",
      "created_at" : "2022-08-10T15:18:54Z",
      "diff_hunk" : "@@ -47,9 +52,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to whitelist a given node. However, this also creates an\n+opportunity to discriminate, fingerprint or analyze a given node based on its\n+I2P address.\n+\n+For this reason, the `-i2ptransientout` configuration option creates a new,\n+transient (disposable) I2P address for each new outbound connection. The address\n+will never be reused, not even if reconnecting to the same peer later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+The address for accepting connections is advertised to the Bitcoin network and",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r942586103",
      "id" : 942586103,
      "in_reply_to_id" : 933617054,
      "line" : 80,
      "node_id" : "PRRC_kwDOABII5844Lrj3",
      "original_commit_id" : "1eb601d6f8a5a8817f13bde8a19c93fdc74a20da",
      "original_line" : 80,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : 44,
      "pull_request_review_id" : 1068481250,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/942586103/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-10T15:18:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/942586103",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r942595096"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/942595096"
         }
      },
      "author_association" : "MEMBER",
      "body" : "On initial read this SGTM, sensible defaults and not adding the configuration option would also be my preference. Will re-review with this discussion in mind.",
      "commit_id" : "18ee27ce7f9bda199255137b2c4f617279650625",
      "created_at" : "2022-08-10T15:26:51Z",
      "diff_hunk" : "@@ -47,9 +52,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to whitelist a given node. However, this also creates an\n+opportunity to discriminate, fingerprint or analyze a given node based on its\n+I2P address.\n+\n+For this reason, the `-i2ptransientout` configuration option creates a new,\n+transient (disposable) I2P address for each new outbound connection. The address\n+will never be reused, not even if reconnecting to the same peer later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+The address for accepting connections is advertised to the Bitcoin network and",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r942595096",
      "id" : 942595096,
      "in_reply_to_id" : 933617054,
      "line" : 80,
      "node_id" : "PRRC_kwDOABII5844LtwY",
      "original_commit_id" : "1eb601d6f8a5a8817f13bde8a19c93fdc74a20da",
      "original_line" : 80,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : 44,
      "pull_request_review_id" : 1068494071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/942595096/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-10T15:26:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/942595096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`18ee27ce7f...6f3e418908`: ditch `-i2ptransientout` and use transient addresses if `-i2pacceptincoming=0`. Based on the discussion in https://github.com/bitcoin/bitcoin/pull/25355#discussion_r933617054.",
      "created_at" : "2022-08-11T16:52:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1212238976",
      "id" : 1212238976,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585IQUyA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1212238976/reactions"
      },
      "updated_at" : "2022-08-11T16:52:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1212238976",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r943717510"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/943717510"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done!\r\n\r\nJust to answer that one:\r\n\r\n> if they actually do know us, why would we need to connect to them via i2p in the first place?\r\n\r\nBecause we may want to hide the fact that Bitcoin nodes are running on either machine. Also, for the added encryption and authentication based on the I2P address' private key. For example, white-listing IPv4 addresses could be dangerous because, if spoofed, you may end up white-listing a malicious actor who has \"taken\" that IPv4 address. This is not possible with I2P. To spoof an I2P address one would have to steal the private key from the owner's machine.",
      "commit_id" : "6f3e418908b1bc5fc39d9232b8c65b6141ba7634",
      "created_at" : "2022-08-11T16:58:35Z",
      "diff_hunk" : "@@ -47,9 +52,34 @@ In a typical situation, this suffices:\n bitcoind -i2psam=127.0.0.1:7656\n ```\n \n-The first time Bitcoin Core connects to the I2P router, its I2P address (and\n-corresponding private key) will be automatically generated and saved in a file\n-named `i2p_private_key` in the Bitcoin Core data directory.\n+The first time Bitcoin Core connects to the I2P router, if a persistent I2P\n+address is to be used, then it (and its corresponding private key) will be\n+automatically generated and saved in a file named `i2p_private_key` in the\n+Bitcoin Core data directory. A persistent I2P address is used for accepting\n+incoming connections (`-i2pacceptincoming`) and for making outgoing connections\n+if `-i2ptransientout` is not used.\n+\n+## Persistent vs transient I2P addresses\n+\n+In I2P connections, the connection receiver sees the I2P address of the\n+connection initiator. This is unlike the Tor network where the recipient does\n+not know who is connecting to them, not even the initiator's Tor address.\n+\n+Even if an I2P node is not accepting incoming connections, it is known to other\n+nodes by its outgoing I2P address. If this address is always the same, then\n+there is an opportunity to whitelist a given node. However, this also creates an\n+opportunity to discriminate, fingerprint or analyze a given node based on its\n+I2P address.\n+\n+For this reason, the `-i2ptransientout` configuration option creates a new,\n+transient (disposable) I2P address for each new outbound connection. The address\n+will never be reused, not even if reconnecting to the same peer later.\n+\n+`-i2ptransientout` only affects addresses for outgoing connections and not the\n+address for accepting incoming connections (if `-i2pacceptincoming` is given).\n+The address for accepting connections is advertised to the Bitcoin network and",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r943717510",
      "id" : 943717510,
      "in_reply_to_id" : 933617054,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5844P_yG",
      "original_commit_id" : "1eb601d6f8a5a8817f13bde8a19c93fdc74a20da",
      "original_line" : 80,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "doc/i2p.md",
      "position" : null,
      "pull_request_review_id" : 1070051108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/943717510/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-11T16:58:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/943717510",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r943717865"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/943717865"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Closing as not relevant anymore - `-i2ptransientout` was dropped.",
      "commit_id" : "6f3e418908b1bc5fc39d9232b8c65b6141ba7634",
      "created_at" : "2022-08-11T16:59:01Z",
      "diff_hunk" : "@@ -0,0 +1,14 @@\n+Notable changes\n+===============\n+\n+P2P and network changes\n+-----------------------\n+\n+- With I2P connections, a new, transient address is used for each outbound\n+  connection by default. (#25355)\n+\n+New settings\n+------------\n+\n+- The `-i2ptransientout` option has been added to generate a new I2P address",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r943717865",
      "id" : 943717865,
      "in_reply_to_id" : 933152811,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5844P_3p",
      "original_commit_id" : "506d59e2e18278635c9b55181415cc140caf82ae",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "doc/release-notes-25355.md",
      "position" : null,
      "pull_request_review_id" : 1070051637,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/943717865/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-11T16:59:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/943717865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r944824365"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/944824365"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The old codepath where `m_i2p_sam_session` exists  was not conditional on `use_proxy` before. Am I right that this is not a change in behavior, because for I2P, the existence of `m_i2p_sam_session` implies that use_proxy is true so it was just not necessary to check before?",
      "commit_id" : "6f3e418908b1bc5fc39d9232b8c65b6141ba7634",
      "created_at" : "2022-08-12T20:32:41Z",
      "diff_hunk" : "@@ -485,18 +485,27 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n     Proxy proxy;\n     CAddress addr_bind;\n     assert(!addr_bind.IsValid());\n+    std::unique_ptr<i2p::sam::Session> i2p_transient_session;\n \n     if (addrConnect.IsValid()) {\n+        const bool use_proxy{GetProxy(addrConnect.GetNetwork(), proxy)};\n         bool proxyConnectionFailed = false;\n \n-        if (addrConnect.GetNetwork() == NET_I2P && m_i2p_sam_session.get() != nullptr) {\n+        if (addrConnect.GetNetwork() == NET_I2P && use_proxy) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r944824365",
      "id" : 944824365,
      "line" : 494,
      "node_id" : "PRRC_kwDOABII5844UOAt",
      "original_commit_id" : "86370232311b7eb9f5a26a332c3dea2643eefc30",
      "original_line" : 494,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 11,
      "pull_request_review_id" : 1071743849,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/944824365/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-12T20:34:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/944824365",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r946085815"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946085815"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In a9d2d2c5eb2bdfbb2ca0b0e46ea9633492382a7e \"net: store an optional I2P session is CNode\"\r\n\r\nnit:\r\n\r\n```suggestion\r\n          std::unique_ptr<i2p::sam::Session>&& i2p_sam_session = nullptr;\r\n```",
      "commit_id" : "6f3e418908b1bc5fc39d9232b8c65b6141ba7634",
      "created_at" : "2022-08-15T20:09:17Z",
      "diff_hunk" : "@@ -513,10 +513,16 @@ class CNode\n      * criterium in CConnman::AttemptToEvictConnection. */\n     std::atomic<std::chrono::microseconds> m_min_ping_time{std::chrono::microseconds::max()};\n \n-    CNode(NodeId id, std::shared_ptr<Sock> sock, const CAddress& addrIn,\n-          uint64_t nKeyedNetGroupIn, uint64_t nLocalHostNonceIn,\n-          const CAddress& addrBindIn, const std::string& addrNameIn,\n-          ConnectionType conn_type_in, bool inbound_onion);\n+    CNode(NodeId id,\n+          std::shared_ptr<Sock> sock,\n+          const CAddress& addrIn,\n+          uint64_t nKeyedNetGroupIn,\n+          uint64_t nLocalHostNonceIn,\n+          const CAddress& addrBindIn,\n+          const std::string& addrNameIn,\n+          ConnectionType conn_type_in,\n+          bool inbound_onion,\n+          std::unique_ptr<i2p::sam::Session>&& i2p_sam_session = std::unique_ptr<i2p::sam::Session>());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r946085815",
      "id" : 946085815,
      "line" : 525,
      "node_id" : "PRRC_kwDOABII5844ZB-3",
      "original_commit_id" : "a9d2d2c5eb2bdfbb2ca0b0e46ea9633492382a7e",
      "original_line" : 525,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 17,
      "pull_request_review_id" : 1073146739,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946085815/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-15T20:18:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946085815",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r946621947"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946621947"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You are right. (`s/implies/implied/` in your comment above)\r\n\r\nThe code before this PR would set `m_i2p_sam_session` IFF there is a proxy for `NET_I2P`, so `m_i2p_sam_session.get() != nullptr` was equivalent to `GetProxy(NET_I2P, ...) == true` and checking just the former sufficed.\r\n\r\nIn the code after this PR we may have a situation where there is a proxy for `NET_I2P`, but `m_i2p_sam_session` is empty. Thus we check if a proxy is set and either use `m_i2p_sam_session` or make a transient session.",
      "commit_id" : "59aa54f7312f3441692c89feed86b8756d9d6b7a",
      "created_at" : "2022-08-16T10:50:59Z",
      "diff_hunk" : "@@ -485,18 +485,27 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n     Proxy proxy;\n     CAddress addr_bind;\n     assert(!addr_bind.IsValid());\n+    std::unique_ptr<i2p::sam::Session> i2p_transient_session;\n \n     if (addrConnect.IsValid()) {\n+        const bool use_proxy{GetProxy(addrConnect.GetNetwork(), proxy)};\n         bool proxyConnectionFailed = false;\n \n-        if (addrConnect.GetNetwork() == NET_I2P && m_i2p_sam_session.get() != nullptr) {\n+        if (addrConnect.GetNetwork() == NET_I2P && use_proxy) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r946621947",
      "id" : 946621947,
      "in_reply_to_id" : 944824365,
      "line" : 494,
      "node_id" : "PRRC_kwDOABII5844bE37",
      "original_commit_id" : "86370232311b7eb9f5a26a332c3dea2643eefc30",
      "original_line" : 494,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 11,
      "pull_request_review_id" : 1073896030,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946621947/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-16T10:50:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946621947",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`6f3e418908...59aa54f731`: address minor suggestions (hopefully trivial to re-ack)\r\n\r\nInvalidates ACKs from @mzumsande, @achow101 \r\n\r\nPreviously invalidated ACK from @jonatack \r\n",
      "created_at" : "2022-08-16T11:09:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1216489146",
      "id" : 1216489146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585Igia6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1216489146/reactions"
      },
      "updated_at" : "2022-08-16T11:09:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1216489146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r946637615"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946637615"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done, thanks!",
      "commit_id" : "59aa54f7312f3441692c89feed86b8756d9d6b7a",
      "created_at" : "2022-08-16T11:09:30Z",
      "diff_hunk" : "@@ -513,10 +513,16 @@ class CNode\n      * criterium in CConnman::AttemptToEvictConnection. */\n     std::atomic<std::chrono::microseconds> m_min_ping_time{std::chrono::microseconds::max()};\n \n-    CNode(NodeId id, std::shared_ptr<Sock> sock, const CAddress& addrIn,\n-          uint64_t nKeyedNetGroupIn, uint64_t nLocalHostNonceIn,\n-          const CAddress& addrBindIn, const std::string& addrNameIn,\n-          ConnectionType conn_type_in, bool inbound_onion);\n+    CNode(NodeId id,\n+          std::shared_ptr<Sock> sock,\n+          const CAddress& addrIn,\n+          uint64_t nKeyedNetGroupIn,\n+          uint64_t nLocalHostNonceIn,\n+          const CAddress& addrBindIn,\n+          const std::string& addrNameIn,\n+          ConnectionType conn_type_in,\n+          bool inbound_onion,\n+          std::unique_ptr<i2p::sam::Session>&& i2p_sam_session = std::unique_ptr<i2p::sam::Session>());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r946637615",
      "id" : 946637615,
      "in_reply_to_id" : 946085815,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5844bIsv",
      "original_commit_id" : "a9d2d2c5eb2bdfbb2ca0b0e46ea9633492382a7e",
      "original_line" : 525,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_review_id" : 1073919124,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946637615/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-16T11:09:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/946637615",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 59aa54f7312f3441692c89feed86b8756d9d6b7a (verified via range-diff that just a typo / `unique_ptr` initialisation were fixed)",
      "created_at" : "2022-08-16T18:24:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1216994201",
      "id" : 1216994201,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585IiduZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1216994201/reactions"
      },
      "updated_at" : "2022-08-16T18:24:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1216994201",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 59aa54f7312f3441692c89feed86b8756d9d6b7a",
      "created_at" : "2022-08-16T20:31:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#issuecomment-1217129615",
      "id" : 1217129615,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25355",
      "node_id" : "IC_kwDOABII585Ii-yP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1217129615/reactions"
      },
      "updated_at" : "2022-08-16T20:31:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1217129615",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r947250711"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947250711"
         }
      },
      "author_association" : "MEMBER",
      "body" : "2b781ad6 [Don't make data members `const`](https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#c12-dont-make-data-members-const-or-references).\r\n\r\n```suggestion\r\n    bool m_transient;\r\n```\r\n\r\n",
      "commit_id" : "59aa54f7312f3441692c89feed86b8756d9d6b7a",
      "created_at" : "2022-08-16T21:07:04Z",
      "diff_hunk" : "@@ -262,6 +275,12 @@ class Session\n      * SAM session id.\n      */\n     std::string m_session_id GUARDED_BY(m_mutex);\n+\n+    /**\n+     * Whether this is a transient session (the I2P private key will not be\n+     * read or written to disk).\n+     */\n+    const bool m_transient;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r947250711",
      "id" : 947250711,
      "line" : 283,
      "node_id" : "PRRC_kwDOABII5844deYX",
      "original_commit_id" : "59aa54f7312f3441692c89feed86b8756d9d6b7a",
      "original_line" : 283,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/i2p.h",
      "position" : 29,
      "pull_request_review_id" : 1074778101,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947250711/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-16T22:02:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947250711",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r947720613"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947720613"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Tested with -i2pacceptincoming on and off.\r\n\r\nWhen logging the creation of a transient SAM session, it might be helpful to log to which peer, i.e. something like\r\n\r\n`Transient SAM session 74fc489e60 created to peer=<id>, peeraddr=<ip>, my address=4ejzt3gyxn3icwcn2s473tqayt32ti55e7zlliwusuzlppgagypq.b32.i2p:0`\r\n\r\notherwise in a log with many i2p peers, it's unclear to which peer the transient address is connecting to.  \r\n```\r\n2022-08-17T09:54:26Z [i2p] Transient SAM session 74fc489e60 created, my address=4ejzt3gyxn3icwcn2s473tqayt32ti55e7zlliwusuzlppgagypq.b32.i2p:0\r\n2022-08-17T09:54:28Z New outbound peer connected: version: 70016, blocks=749823, peer=8, peeraddr=83.240...6:8333 (outbound-full-relay)\r\n2022-08-17T09:54:28Z New outbound peer connected: version: 70016, blocks=749823, peer=9, peeraddr=190.2...4:8333 (outbound-full-relay)\r\n2022-08-17T09:54:34Z New outbound peer connected: version: 70016, blocks=749823, peer=13, peeraddr=31.42....9:8333 (outbound-full-relay)\r\n2022-08-17T09:54:34Z [i2p] Creating transient SAM session 15cf78cf17 with 127.0.0.1:7656\r\n2022-08-17T09:54:39Z New outbound peer connected: version: 70016, blocks=749823, peer=14, peeraddr=76.89....:8333 (outbound-full-relay)\r\n2022-08-17T09:54:54Z [i2p] Transient SAM session 15cf78cf17 created, my address=vnugpix23m4inijbw24d2s6nha6u3rzqpkfsvz3r2sonxvx7o6ma.b32.i2p:0\r\n2022-08-17T09:54:57Z [i2p] Destroying SAM session 15cf78cf17\r\n2022-08-17T09:54:58Z [i2p] Creating transient SAM session 6d503018cc with 127.0.0.1:7656\r\n2022-08-17T09:55:16Z New outbound peer connected: version: 70016, blocks=749823, peer=15, peeraddr=wwbw7nqr....7tpoqjswvcwa.b32.i2p:0 (manual)\r\n2022-08-17T09:55:18Z [i2p] Transient SAM session 6d503018cc created, my address=h75ad7btqhxbkyapqsrnaprhtots5xxoq7yp6qjl3z77idzazg6q.b32.i2p:0\r\n2022-08-17T09:55:33Z New outbound peer connected: version: 70016, blocks=749823, peer=17, peeraddr=jz3s4eurm5vzj...wakylgkxmq.b32.i2p:0 (manual)\r\n```\r\nPerhaps also similar for the `Destroying SAM session <id> to peer=<id>, peeraddr=<addr>` log message.",
      "commit_id" : "59aa54f7312f3441692c89feed86b8756d9d6b7a",
      "created_at" : "2022-08-17T10:02:11Z",
      "diff_hunk" : "@@ -355,29 +366,47 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+    const auto session_id = GetRandHash().GetHex().substr(0, 10); // full is overkill, too verbose in the logs\n+\n+    Log(\"Creating %s SAM session %s with %s\", session_type, session_id, m_control_host.ToString());\n \n     auto sock = Hello();\n \n-    const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n-    if (read_ok) {\n-        m_private_key.assign(data.begin(), data.end());\n+    if (m_transient) {\n+        // The destination (private key) is generated upon session creation and returned\n+        // in the reply in DESTINATION=.\n+        const Reply& reply = SendRequestAndGetReply(\n+            *sock,\n+            strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=TRANSIENT\", session_id));\n+\n+        m_private_key = DecodeI2PBase64(reply.Get(\"DESTINATION\"));\n     } else {\n-        GenerateAndSavePrivateKey(*sock);\n-    }\n+        // Read our persistent destination (private key) from disk or generate\n+        // one and save it to disk. Then use it when creating the session.\n+        const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n+        if (read_ok) {\n+            m_private_key.assign(data.begin(), data.end());\n+        } else {\n+            GenerateAndSavePrivateKey(*sock);\n+        }\n \n-    const std::string& session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs\n-    const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n+        const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n \n-    SendRequestAndGetReply(*sock, strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n-                                            session_id, private_key_b64));\n+        SendRequestAndGetReply(*sock,\n+                               strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n+                                         session_id,\n+                                         private_key_b64));\n+    }\n \n     m_my_addr = CService(DestBinToAddr(MyDestination()), I2P_SAM31_PORT);\n     m_session_id = session_id;\n     m_control_sock = std::move(sock);\n \n-    LogPrintfCategory(BCLog::I2P, \"SAM session created: session id=%s, my address=%s\\n\",\n-                      m_session_id, m_my_addr.ToString());\n+    Log(\"%s SAM session %s created, my address=%s\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r947720613",
      "id" : 947720613,
      "line" : 406,
      "node_id" : "PRRC_kwDOABII5844fRGl",
      "original_commit_id" : "59aa54f7312f3441692c89feed86b8756d9d6b7a",
      "original_line" : 406,
      "original_position" : 88,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 88,
      "pull_request_review_id" : 1075424108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947720613/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-17T10:07:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/947720613",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r948938985"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/948938985"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I agree that would be helpful. It would require seeping knowledge of the peer's address from the higher level code in `net.cpp` down to `i2p::sam::Session`. However, a transient session may as well be used for more than one connection. We may at some point decide to use one transient session for all connections over 5 minutes, then ditch it and roll to another one.\r\n\r\nThe higher level code in `net.cpp` already logs the peer address just before creating the I2P session:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/a8f69541ad53a76d5f69044ba829069d225a4af1/src/net.cpp#L454-L456\r\n\r\nSo, it should already be possible to link the session id with the peer address, the two messages will be adjacent in the log:\r\n\r\n```\r\ntrying connection foozt3gyxn3icwcn2s473tqayt32ti55e7zlliwusuzlppgagypq.b32.i2p:0 ...\r\nCreating transient SAM session 15cf78cf17 ...\r\n```",
      "commit_id" : "59aa54f7312f3441692c89feed86b8756d9d6b7a",
      "created_at" : "2022-08-18T10:08:49Z",
      "diff_hunk" : "@@ -355,29 +366,47 @@ void Session::CreateIfNotCreatedAlready()\n         return;\n     }\n \n-    Log(\"Creating SAM session with %s\", m_control_host.ToString());\n+    const auto session_type = m_transient ? \"transient\" : \"persistent\";\n+    const auto session_id = GetRandHash().GetHex().substr(0, 10); // full is overkill, too verbose in the logs\n+\n+    Log(\"Creating %s SAM session %s with %s\", session_type, session_id, m_control_host.ToString());\n \n     auto sock = Hello();\n \n-    const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n-    if (read_ok) {\n-        m_private_key.assign(data.begin(), data.end());\n+    if (m_transient) {\n+        // The destination (private key) is generated upon session creation and returned\n+        // in the reply in DESTINATION=.\n+        const Reply& reply = SendRequestAndGetReply(\n+            *sock,\n+            strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=TRANSIENT\", session_id));\n+\n+        m_private_key = DecodeI2PBase64(reply.Get(\"DESTINATION\"));\n     } else {\n-        GenerateAndSavePrivateKey(*sock);\n-    }\n+        // Read our persistent destination (private key) from disk or generate\n+        // one and save it to disk. Then use it when creating the session.\n+        const auto& [read_ok, data] = ReadBinaryFile(m_private_key_file);\n+        if (read_ok) {\n+            m_private_key.assign(data.begin(), data.end());\n+        } else {\n+            GenerateAndSavePrivateKey(*sock);\n+        }\n \n-    const std::string& session_id = GetRandHash().GetHex().substr(0, 10); // full is an overkill, too verbose in the logs\n-    const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n+        const std::string& private_key_b64 = SwapBase64(EncodeBase64(m_private_key));\n \n-    SendRequestAndGetReply(*sock, strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n-                                            session_id, private_key_b64));\n+        SendRequestAndGetReply(*sock,\n+                               strprintf(\"SESSION CREATE STYLE=STREAM ID=%s DESTINATION=%s\",\n+                                         session_id,\n+                                         private_key_b64));\n+    }\n \n     m_my_addr = CService(DestBinToAddr(MyDestination()), I2P_SAM31_PORT);\n     m_session_id = session_id;\n     m_control_sock = std::move(sock);\n \n-    LogPrintfCategory(BCLog::I2P, \"SAM session created: session id=%s, my address=%s\\n\",\n-                      m_session_id, m_my_addr.ToString());\n+    Log(\"%s SAM session %s created, my address=%s\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r948938985",
      "id" : 948938985,
      "in_reply_to_id" : 947720613,
      "line" : 406,
      "node_id" : "PRRC_kwDOABII5844j6jp",
      "original_commit_id" : "59aa54f7312f3441692c89feed86b8756d9d6b7a",
      "original_line" : 406,
      "original_position" : 88,
      "original_start_line" : null,
      "path" : "src/i2p.cpp",
      "position" : 88,
      "pull_request_review_id" : 1077083319,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/948938985/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-18T10:08:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/948938985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r948958069"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/948958069"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "That guideline says \"They are not useful\" (`const` data members), but they improve readability - at a glance one can tell that this variable is only assigned in the constructor and never modified afterwards. Without the `const` one would have to manually check all references to the variable to find the places where it is modified.\r\n\r\nThen the guideline says that `const` data members make the type difficult to use because it is not copy-assignable. But this is a feature and exactly what we want - to avoid copying a persistent session to a transient one, effectively converting it. Anyway, `i2p::sam::Session` is already non-copy-able, so adding a `const` data member does not change its copy-ability.\r\n",
      "commit_id" : "59aa54f7312f3441692c89feed86b8756d9d6b7a",
      "created_at" : "2022-08-18T10:25:06Z",
      "diff_hunk" : "@@ -262,6 +275,12 @@ class Session\n      * SAM session id.\n      */\n     std::string m_session_id GUARDED_BY(m_mutex);\n+\n+    /**\n+     * Whether this is a transient session (the I2P private key will not be\n+     * read or written to disk).\n+     */\n+    const bool m_transient;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25355#discussion_r948958069",
      "id" : 948958069,
      "in_reply_to_id" : 947250711,
      "line" : 283,
      "node_id" : "PRRC_kwDOABII5844j_N1",
      "original_commit_id" : "59aa54f7312f3441692c89feed86b8756d9d6b7a",
      "original_line" : 283,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/i2p.h",
      "position" : 29,
      "pull_request_review_id" : 1077104525,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25355",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/948958069/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-18T10:25:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/948958069",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   }
]
