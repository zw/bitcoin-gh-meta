[
   {
      "author_association" : "MEMBER",
      "body" : "ACK abdaa251610569a346af55a1121c8ab385efb655",
      "created_at" : "2022-06-14T19:19:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#issuecomment-1155622258",
      "id" : 1155622258,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25351",
      "node_id" : "IC_kwDOABII585E4WVy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1155622258/reactions"
      },
      "updated_at" : "2022-06-14T19:19:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1155622258",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r897761716"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/897761716"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        \"of all descriptors being imported will be scanned as well as the mempool.\",\r\n```\r\n\r\nnit: The whitespace isn't needed and can be removed while touching this line. (If you need to retouch later)",
      "commit_id" : "abdaa251610569a346af55a1121c8ab385efb655",
      "created_at" : "2022-06-15T09:36:21Z",
      "diff_hunk" : "@@ -1592,7 +1600,7 @@ RPCHelpMan importdescriptors()\n         \"                                                              Use the string \\\"now\\\" to substitute the current synced blockchain time.\\n\"\n         \"                                                              \\\"now\\\" can be specified to bypass scanning, for outputs which are known to never have been used, and\\n\"\n         \"                                                              0 can be specified to scan the entire blockchain. Blocks up to 2 hours before the earliest timestamp\\n\"\n-        \"                                                              of all descriptors being imported will be scanned.\",\n+        \"                                                              of all descriptors being imported will be scanned as well as the mempool.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r897761716",
      "id" : 897761716,
      "line" : 1603,
      "node_id" : "PRRC_kwDOABII5841gsG0",
      "original_commit_id" : "abdaa251610569a346af55a1121c8ab385efb655",
      "original_line" : 1603,
      "original_position" : 80,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/backup.cpp",
      "position" : 80,
      "pull_request_review_id" : 1007188402,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/897761716/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-15T09:40:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/897761716",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2022-06-21T00:39:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#issuecomment-1160993881",
      "id" : 1160993881,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25351",
      "node_id" : "IC_kwDOABII585FM1xZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1160993881/reactions"
      },
      "updated_at" : "2022-06-21T08:34:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1160993881",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r904712757"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904712757"
         }
      },
      "author_association" : "MEMBER",
      "body" : "a43ee48e8e904764fc12f58f40e569c7f2208876: maybe add a comment to explain what those 3 transactions are: 2 `m_coinbase_txns` entries and `mempool_tx`?\r\n\r\nI'm confused why it's 3 here and 5 below.",
      "commit_id" : "abdaa251610569a346af55a1121c8ab385efb655",
      "created_at" : "2022-06-23T08:12:11Z",
      "diff_hunk" : "@@ -765,7 +765,7 @@ BOOST_FIXTURE_TEST_CASE(CreateWallet, TestChain100Setup)\n     // being blocked\n     wallet = TestLoadWallet(context);\n     BOOST_CHECK(rescan_completed);\n-    BOOST_CHECK_EQUAL(addtx_count, 2);\n+    BOOST_CHECK_EQUAL(addtx_count, 3);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r904712757",
      "id" : 904712757,
      "line" : 768,
      "node_id" : "PRRC_kwDOABII58417NI1",
      "original_commit_id" : "a43ee48e8e904764fc12f58f40e569c7f2208876",
      "original_line" : 768,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/test/wallet_tests.cpp",
      "position" : 5,
      "pull_request_review_id" : 1016572532,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904712757/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T09:00:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904712757",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r904768222"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904768222"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't see this notice in the log either.",
      "commit_id" : "abdaa251610569a346af55a1121c8ab385efb655",
      "created_at" : "2022-06-23T09:01:38Z",
      "diff_hunk" : "@@ -1797,6 +1798,10 @@ CWallet::ScanResult CWallet::ScanForWalletTransactions(const uint256& start_bloc\n             }\n         }\n     }\n+    if (!max_height) {\n+        WalletLogPrintf(\"Scanning current mempool transactions.\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r904768222",
      "id" : 904768222,
      "line" : 1802,
      "node_id" : "PRRC_kwDOABII58417are",
      "original_commit_id" : "abdaa251610569a346af55a1121c8ab385efb655",
      "original_line" : 1802,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 15,
      "pull_request_review_id" : 1016647545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904768222/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T09:01:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904768222",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@Sjors I was able to retrieve the mempool transactions by following these steps on regtest and signet.",
      "created_at" : "2022-06-23T12:17:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#issuecomment-1164335586",
      "id" : 1164335586,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25351",
      "node_id" : "IC_kwDOABII585FZlni",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1164335586/reactions"
      },
      "updated_at" : "2022-06-23T12:17:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1164335586",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r904996273"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904996273"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: this makes it explicit that it is one transaction per variant \r\n\r\n```suggestion\r\n        assert_equal(len(self.nodes[0].getrawmempool()), len(mempool_variants))\r\n```",
      "commit_id" : "8f59d58549ab8a9e7ecf8eb3ed2fb6d18b812a6d",
      "created_at" : "2022-06-23T13:03:23Z",
      "diff_hunk" : "@@ -223,6 +230,46 @@ def run_test(self):\n             variant.expected_txs += 1\n             variant.check(variant.sent_txid, variant.sent_amount, variant.confirmation_height)\n \n+        self.log.info('Test that the mempool is rescanned as well if the rescan parameter is set to true')\n+\n+        # The late timestamp and pruned variants are not necessary when testing mempool rescan\n+        mempool_variants = [variant for variant in IMPORT_VARIANTS if variant.rescan != Rescan.late_timestamp and not variant.prune]\n+        # No further blocks are mined so the timestamp will stay the same\n+        timestamp = self.nodes[0].getblockheader(self.nodes[0].getbestblockhash())[\"time\"]\n+\n+        # Create one transaction on node 0 with a unique amount for\n+        # each possible type of wallet import RPC.\n+        for i, variant in enumerate(mempool_variants):\n+            variant.label = \"mempool label {} {}\".format(i, variant)\n+            variant.address = self.nodes[1].getaddressinfo(self.nodes[1].getnewaddress(\n+                label=variant.label,\n+                address_type=variant.address_type.value,\n+            ))\n+            variant.key = self.nodes[1].dumpprivkey(variant.address[\"address\"])\n+            variant.initial_amount = get_rand_amount()\n+            variant.initial_txid = self.nodes[0].sendtoaddress(variant.address[\"address\"], variant.initial_amount)\n+            variant.confirmation_height = 0\n+            variant.timestamp = timestamp\n+\n+        assert_equal(len(self.nodes[0].getrawmempool()), 54)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r904996273",
      "id" : 904996273,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58418SWx",
      "original_commit_id" : "abdaa251610569a346af55a1121c8ab385efb655",
      "original_line" : 254,
      "original_position" : 78,
      "original_start_line" : null,
      "path" : "test/functional/wallet_import_rescan.py",
      "position" : null,
      "pull_request_review_id" : 1016970046,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904996273/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T14:09:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904996273",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @Sjors I was able to retrieve the mempool transactions by following these steps on regtest and signet.\r\n\r\nMmm, and without this PR you're able to reproduce the original issue?",
      "created_at" : "2022-06-23T13:07:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#issuecomment-1164386896",
      "id" : 1164386896,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25351",
      "node_id" : "IC_kwDOABII585FZyJQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1164386896/reactions"
      },
      "updated_at" : "2022-06-23T13:07:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1164386896",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r905069445"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905069445"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Perhaps the assertions below can be added.\r\nThey test that `importdescriptors` retrieved the mempool transaction.\r\n\r\nNot related to this PR, but transaction `send_txid` is confirmed in line 457, isn't it ? \r\nWhy is it still in the mempool in line 463 and 470?\r\n\r\n```suggestion\r\n        assert_equal(change_addr, 'bcrt1qzxl0qz2t88kljdnkzg4n4gapr6kte26390gttrg79x66nt4p04fssj53nl')\r\n        assert(any([x == send_txid for x in self.nodes[0].getrawmempool(True)]))\r\n        assert(any([x['txid'] == send_txid for x in wmulti_pub.listunspent(0)]))\r\n```",
      "commit_id" : "8f59d58549ab8a9e7ecf8eb3ed2fb6d18b812a6d",
      "created_at" : "2022-06-23T14:08:32Z",
      "diff_hunk" : "@@ -480,7 +480,7 @@ def run_test(self):\n         addr = wmulti_pub.getnewaddress('', 'bech32')\n         assert_equal(addr, 'bcrt1qp8s25ckjl7gr6x2q3dx3tn2pytwp05upkjztk6ey857tt50r5aeqn6mvr9') # Derived at m/84'/0'/0'/1\n         change_addr = wmulti_pub.getrawchangeaddress('bech32')\n-        assert_equal(change_addr, 'bcrt1qt9uhe3a9hnq7vajl7a094z4s3crm9ttf8zw3f5v9gr2nyd7e3lnsy44n8e')\n+        assert_equal(change_addr, 'bcrt1qzxl0qz2t88kljdnkzg4n4gapr6kte26390gttrg79x66nt4p04fssj53nl')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r905069445",
      "id" : 905069445,
      "line" : 483,
      "node_id" : "PRRC_kwDOABII58418kOF",
      "original_commit_id" : "abdaa251610569a346af55a1121c8ab385efb655",
      "original_line" : 483,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/wallet_importdescriptors.py",
      "position" : 5,
      "pull_request_review_id" : 1016970046,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905069445/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T14:09:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905069445",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r905070193"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905070193"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> https://github.com/bitcoin/bitcoin/commit/a43ee48e8e904764fc12f58f40e569c7f2208876: maybe add a comment to explain what those 3 transactions are: 2 m_coinbase_txns entries and mempool_tx?\r\nI'm confused why it's 3 here and 5 below.\r\n\r\nAgreed.",
      "commit_id" : "8f59d58549ab8a9e7ecf8eb3ed2fb6d18b812a6d",
      "created_at" : "2022-06-23T14:09:02Z",
      "diff_hunk" : "@@ -765,7 +765,7 @@ BOOST_FIXTURE_TEST_CASE(CreateWallet, TestChain100Setup)\n     // being blocked\n     wallet = TestLoadWallet(context);\n     BOOST_CHECK(rescan_completed);\n-    BOOST_CHECK_EQUAL(addtx_count, 2);\n+    BOOST_CHECK_EQUAL(addtx_count, 3);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r905070193",
      "id" : 905070193,
      "in_reply_to_id" : 904712757,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58418kZx",
      "original_commit_id" : "a43ee48e8e904764fc12f58f40e569c7f2208876",
      "original_line" : 768,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/test/wallet_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 1016970046,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905070193/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T14:10:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/905070193",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@Sjors Yes, without this PR (using the master branch), I am able to reproduce the issue.",
      "created_at" : "2022-06-23T18:12:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#issuecomment-1164721929",
      "id" : 1164721929,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25351",
      "node_id" : "IC_kwDOABII585FbD8J",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1164721929/reactions"
      },
      "updated_at" : "2022-06-23T18:12:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1164721929",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors and your second wallet was a watch-only wallet? Guess I'll have to retry to check my own sanity :-)",
      "created_at" : "2022-06-24T13:10:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#issuecomment-1165559742",
      "id" : 1165559742,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25351",
      "node_id" : "IC_kwDOABII585FeQe-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1165559742/reactions"
      },
      "updated_at" : "2022-06-24T13:10:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1165559742",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@Sjors the watch-only was created with `disable_private_keys=true blank=true` and the `tr(xpub...)` descriptors (internal and external) were imported from the first wallet.",
      "created_at" : "2022-06-24T21:40:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#issuecomment-1165961341",
      "id" : 1165961341,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25351",
      "node_id" : "IC_kwDOABII585Ffyh9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1165961341/reactions"
      },
      "updated_at" : "2022-06-24T21:40:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1165961341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r906851851"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906851851"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Strange, that may be a hint that the build didn't have this change? But I will go through your steps as well as an additional check.",
      "commit_id" : "8f59d58549ab8a9e7ecf8eb3ed2fb6d18b812a6d",
      "created_at" : "2022-06-26T17:52:01Z",
      "diff_hunk" : "@@ -1797,6 +1798,10 @@ CWallet::ScanResult CWallet::ScanForWalletTransactions(const uint256& start_bloc\n             }\n         }\n     }\n+    if (!max_height) {\n+        WalletLogPrintf(\"Scanning current mempool transactions.\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r906851851",
      "id" : 906851851,
      "in_reply_to_id" : 904768222,
      "line" : 1802,
      "node_id" : "PRRC_kwDOABII5842DXYL",
      "original_commit_id" : "abdaa251610569a346af55a1121c8ab385efb655",
      "original_line" : 1802,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 15,
      "pull_request_review_id" : 1019462105,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906851851/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-26T17:52:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906851851",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r906851945"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906851945"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Added\r\n\r\n> Not related to this PR, but transaction `send_txid` is confirmed in line 457, isn't it ? Why is it still in the mempool in line 463 and 470?\r\n\r\nHm, you are right that this shouldn't really work but it still does due to a race between the two nodes involved. I am kind of surprised that this doesn't lead flakiness in the CI but I couldn't find any related issue. I addressed this in #25476.",
      "commit_id" : "8f59d58549ab8a9e7ecf8eb3ed2fb6d18b812a6d",
      "created_at" : "2022-06-26T17:52:37Z",
      "diff_hunk" : "@@ -480,7 +480,7 @@ def run_test(self):\n         addr = wmulti_pub.getnewaddress('', 'bech32')\n         assert_equal(addr, 'bcrt1qp8s25ckjl7gr6x2q3dx3tn2pytwp05upkjztk6ey857tt50r5aeqn6mvr9') # Derived at m/84'/0'/0'/1\n         change_addr = wmulti_pub.getrawchangeaddress('bech32')\n-        assert_equal(change_addr, 'bcrt1qt9uhe3a9hnq7vajl7a094z4s3crm9ttf8zw3f5v9gr2nyd7e3lnsy44n8e')\n+        assert_equal(change_addr, 'bcrt1qzxl0qz2t88kljdnkzg4n4gapr6kte26390gttrg79x66nt4p04fssj53nl')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r906851945",
      "id" : 906851945,
      "in_reply_to_id" : 905069445,
      "line" : 483,
      "node_id" : "PRRC_kwDOABII5842DXZp",
      "original_commit_id" : "abdaa251610569a346af55a1121c8ab385efb655",
      "original_line" : 483,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/wallet_importdescriptors.py",
      "position" : 5,
      "pull_request_review_id" : 1019462156,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906851945/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-26T17:52:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906851945",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r906852033"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906852033"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "8f59d58549ab8a9e7ecf8eb3ed2fb6d18b812a6d",
      "created_at" : "2022-06-26T17:53:40Z",
      "diff_hunk" : "@@ -1592,7 +1600,7 @@ RPCHelpMan importdescriptors()\n         \"                                                              Use the string \\\"now\\\" to substitute the current synced blockchain time.\\n\"\n         \"                                                              \\\"now\\\" can be specified to bypass scanning, for outputs which are known to never have been used, and\\n\"\n         \"                                                              0 can be specified to scan the entire blockchain. Blocks up to 2 hours before the earliest timestamp\\n\"\n-        \"                                                              of all descriptors being imported will be scanned.\",\n+        \"                                                              of all descriptors being imported will be scanned as well as the mempool.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r906852033",
      "id" : 906852033,
      "in_reply_to_id" : 897761716,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842DXbB",
      "original_commit_id" : "abdaa251610569a346af55a1121c8ab385efb655",
      "original_line" : 1603,
      "original_position" : 80,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/backup.cpp",
      "position" : null,
      "pull_request_review_id" : 1019462226,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906852033/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-26T17:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906852033",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r906852070"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906852070"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "8f59d58549ab8a9e7ecf8eb3ed2fb6d18b812a6d",
      "created_at" : "2022-06-26T17:53:59Z",
      "diff_hunk" : "@@ -223,6 +230,46 @@ def run_test(self):\n             variant.expected_txs += 1\n             variant.check(variant.sent_txid, variant.sent_amount, variant.confirmation_height)\n \n+        self.log.info('Test that the mempool is rescanned as well if the rescan parameter is set to true')\n+\n+        # The late timestamp and pruned variants are not necessary when testing mempool rescan\n+        mempool_variants = [variant for variant in IMPORT_VARIANTS if variant.rescan != Rescan.late_timestamp and not variant.prune]\n+        # No further blocks are mined so the timestamp will stay the same\n+        timestamp = self.nodes[0].getblockheader(self.nodes[0].getbestblockhash())[\"time\"]\n+\n+        # Create one transaction on node 0 with a unique amount for\n+        # each possible type of wallet import RPC.\n+        for i, variant in enumerate(mempool_variants):\n+            variant.label = \"mempool label {} {}\".format(i, variant)\n+            variant.address = self.nodes[1].getaddressinfo(self.nodes[1].getnewaddress(\n+                label=variant.label,\n+                address_type=variant.address_type.value,\n+            ))\n+            variant.key = self.nodes[1].dumpprivkey(variant.address[\"address\"])\n+            variant.initial_amount = get_rand_amount()\n+            variant.initial_txid = self.nodes[0].sendtoaddress(variant.address[\"address\"], variant.initial_amount)\n+            variant.confirmation_height = 0\n+            variant.timestamp = timestamp\n+\n+        assert_equal(len(self.nodes[0].getrawmempool()), 54)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r906852070",
      "id" : 906852070,
      "in_reply_to_id" : 904996273,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842DXbm",
      "original_commit_id" : "abdaa251610569a346af55a1121c8ab385efb655",
      "original_line" : 254,
      "original_position" : 78,
      "original_start_line" : null,
      "path" : "test/functional/wallet_import_rescan.py",
      "position" : null,
      "pull_request_review_id" : 1019462248,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906852070/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-26T17:53:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906852070",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r906852618"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906852618"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah, I see what you mean. The `TestLoadWallet()` helper function had a call to `postInitProcess()` which meant that the mempool was checked twice. Removing that led to the numbers in the `CreateWallet` test being much more sensible and there seem to be no other negative effects from that change. At least the test isn't failing and I also didn't see any other reason to keep it. I added some comments as well.",
      "commit_id" : "8f59d58549ab8a9e7ecf8eb3ed2fb6d18b812a6d",
      "created_at" : "2022-06-26T17:59:26Z",
      "diff_hunk" : "@@ -765,7 +765,7 @@ BOOST_FIXTURE_TEST_CASE(CreateWallet, TestChain100Setup)\n     // being blocked\n     wallet = TestLoadWallet(context);\n     BOOST_CHECK(rescan_completed);\n-    BOOST_CHECK_EQUAL(addtx_count, 2);\n+    BOOST_CHECK_EQUAL(addtx_count, 3);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25351#discussion_r906852618",
      "id" : 906852618,
      "in_reply_to_id" : 904712757,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842DXkK",
      "original_commit_id" : "a43ee48e8e904764fc12f58f40e569c7f2208876",
      "original_line" : 768,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/test/wallet_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 1019462609,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25351",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906852618/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-26T17:59:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/906852618",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   }
]
