[
   {
      "body" : "This is the first time I am trying to collaborate on an open-source project, please feel free to point out when I am doing something wrong.",
      "created_at" : "2014-09-13T00:50:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-55476637",
      "id" : 55476637,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2014-09-13T00:50:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/55476637",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=3",
         "events_url" : "https://api.github.com/users/AlSzacrel/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AlSzacrel/followers",
         "following_url" : "https://api.github.com/users/AlSzacrel/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AlSzacrel/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AlSzacrel",
         "id" : 4060799,
         "login" : "AlSzacrel",
         "organizations_url" : "https://api.github.com/users/AlSzacrel/orgs",
         "received_events_url" : "https://api.github.com/users/AlSzacrel/received_events",
         "repos_url" : "https://api.github.com/users/AlSzacrel/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AlSzacrel/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AlSzacrel/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AlSzacrel"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4906_3b92ce7ad950ceba14f1cc6ad637923f71ca61be/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-09-13T01:02:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-55477064",
      "id" : 55477064,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2014-09-13T01:02:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/55477064",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "I was made aware by @sipa that a candidate set that ended up matching the targetValue with the addition of a dust UTXO would still be picked immediately. That seems to be correct.\r\n\r\nHowever, unless one is trying to make a minuscule payment, it seems that the likelihood to add a bigger UTXO at some point that would exceed the target should be sufficiently larger, than the chance that you'd only add inputs that inch closer and closer to the target to match it finally without exceeding it. It should rather be unlikely to even happen in 1000 iterations (gut feeling), so the patch should work fine in the majority of situations.",
      "created_at" : "2014-09-13T01:38:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-55478037",
      "id" : 55478037,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2014-09-13T01:39:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/55478037",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=3",
         "events_url" : "https://api.github.com/users/AlSzacrel/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AlSzacrel/followers",
         "following_url" : "https://api.github.com/users/AlSzacrel/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AlSzacrel/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AlSzacrel",
         "id" : 4060799,
         "login" : "AlSzacrel",
         "organizations_url" : "https://api.github.com/users/AlSzacrel/orgs",
         "received_events_url" : "https://api.github.com/users/AlSzacrel/received_events",
         "repos_url" : "https://api.github.com/users/AlSzacrel/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AlSzacrel/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AlSzacrel/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AlSzacrel"
      }
   },
   {
      "body" : "Have you simulated this, e.g. how a wallet progressed over time?  I would expect this to result in grinding down the wallet into lots of dust change over time even worse than the current approach. \r\n\r\nGenerally, so long as it doesn't result in bloating things up to the point where the transaction confirms slowly, we should generally prefer to make transactions bigger (under the rational that transaction fees will increase over time or at worst stay constant).  E.g. If you already have a change output, a pass that looks at the scriptpubkeys you're spending and keeps adding more inputs assigned to the same pubkeys until the fee increase is some threshold or the change exceeds 2x the payment value (or something like that) would probably result in lower total transaction fees over time. (and better privacy)",
      "created_at" : "2014-09-15T22:31:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-55669171",
      "id" : 55669171,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2014-09-15T22:31:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/55669171",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell I had not simulated it in advance. I will do so though, just haven't gotten around to it yet. Perhaps I'll get around to it this evening, otherwise I will probably get around to it tomorrow.",
      "created_at" : "2014-09-18T11:11:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-56024544",
      "id" : 56024544,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2014-09-18T11:11:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56024544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=3",
         "events_url" : "https://api.github.com/users/AlSzacrel/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AlSzacrel/followers",
         "following_url" : "https://api.github.com/users/AlSzacrel/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AlSzacrel/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AlSzacrel",
         "id" : 4060799,
         "login" : "AlSzacrel",
         "organizations_url" : "https://api.github.com/users/AlSzacrel/orgs",
         "received_events_url" : "https://api.github.com/users/AlSzacrel/received_events",
         "repos_url" : "https://api.github.com/users/AlSzacrel/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AlSzacrel/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AlSzacrel/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AlSzacrel"
      }
   },
   {
      "body" : "@gmaxwell So, I have done some simulations. \r\nMy approach was:\r\nÃ¢ÂÂ¢ To recreate the wallet logic in Python. \r\nÃ¢ÂÂ¢ To add the pruning feature conditionally\r\nÃ¢ÂÂ¢ To have a wallet of each type, starting wtih the same utxopool, execute and receive a number of payments.\r\nÃ¢ÂÂ¢ They obviously end up with the same amount, and I can compare the number and sizes of final utxo.\r\n\r\nSo far I have tried a few different scenarios, but I ended up being limited at around 10k utxo and 1000 operations, as my python implementation was not as fast as I had hoped.\r\nMy initial experiments suggest that the pruning wallet does end up with a slightly bigger number of utxo, but it's only slightly bigger than the regular wallet. (I'll be adding the results later, when I am on the right computer.)\r\nI have started implementing the simulation in a compiled language to speed it up in order to do some more and bigger experiments.",
      "created_at" : "2014-09-23T08:29:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-56489310",
      "id" : 56489310,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2014-09-23T08:29:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56489310",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=3",
         "events_url" : "https://api.github.com/users/AlSzacrel/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AlSzacrel/followers",
         "following_url" : "https://api.github.com/users/AlSzacrel/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AlSzacrel/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AlSzacrel",
         "id" : 4060799,
         "login" : "AlSzacrel",
         "organizations_url" : "https://api.github.com/users/AlSzacrel/orgs",
         "received_events_url" : "https://api.github.com/users/AlSzacrel/received_events",
         "repos_url" : "https://api.github.com/users/AlSzacrel/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AlSzacrel/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AlSzacrel/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AlSzacrel"
      }
   },
   {
      "body" : "Please keep us updated on your progress. If you'd like some more eyes on your testing code, feel free to point it out.",
      "created_at" : "2014-10-08T08:19:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-58324991",
      "id" : 58324991,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2014-10-08T08:19:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58324991",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell The code for my simulation can be found here: https://github.com/Xekyo/CoinSelectionSimulator\r\n\r\nIt is working now, and can be executed in bearable time, but the code could be a bit clearer. I am currently in my exam period and haven't had as much time to work on it, as I would like.\r\n\r\nI have tried a few different strategies to select coins, and have been experimenting with different distributions of incoming and outgoing payments.\r\n\r\nDifferent strategies:\r\n- \"Regular Wallet\" implements the algorithm currently in use as I understand it, to be used as a baseline.\r\n- \"Pruning Wallet\" selects the coins just like the regular wallet, but afterwards discards inputs that are smaller than the remaining change in the order they were selected.\r\n- \"Pruning Wallet with minimum number of Inputs\", like PW, but when pruning keeps at least the miminum number of Inputs.\r\n- \"Double Wallet\": Like PW, but when unable to directly match the target, aims for twice the target, in order to create change in the magnitude of what the user was trying to transfer instead of dust.\r\n\r\n-------------\r\nSome results:\r\n\r\nExperiment 1: \r\nStart: 5000 random UTXO from range(2500, 250000) satoshis\r\n10000 transactions (randomly 50/50 distributed incoming/outgoing) in the range(540,250000) satoshis\r\nRegular Wallet: 4853 changes created, in range(1,1591) satoshis, average change 63.01ÃÂ±97.78 satoshi, spent (1,12) inputs per transaction sent, average 1.44ÃÂ±1.15\r\n\r\n... writing up my results I realize that I will want to create a .csv instead of the current text-form result, sorry gonna go back to studying now, but I'll probably be able to do it in the next break.\r\n\r\n-------------\r\nSome questions I haven't been able to answer satisfyingly:\r\n- What would constitute realistic data for incoming and outgoing transactions of one wallet (how many incoming/outgoing transactions, what average size and distributions for each direction, is it necessary to regard the change in value over time)?\r\n- Haven't researched yet: When does the required transaction fee increase?",
      "created_at" : "2014-10-11T13:07:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-58748938",
      "id" : 58748938,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2015-07-21T22:14:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58748938",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=3",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "body" : "Hi,\r\nFinished with my exams for this semester, finally had time to pick this up again.\r\n\r\n(When I created the .csv files with my output, I realized that my random models would sometimes generate spending instructions that asked for more than the wallet's current value. While those were were ignored as impossible, they still got into the statistics, so I wanted to fix that first.)\r\n\r\nI've been thinking about what one might want to be optimizing for. This is what I got so far:\r\n1. **Non-dust change**: The creation of small change outputs should be avoided. They bloat the blockchain and are expensive to spend.\r\n-> If a change output has to be created, it would be preferable to create a change output of the magnitude of the payment value. (Which would also help obscure recipient output and change output.) \r\n2. **Privacy**: UTXO should be picked non-deterministically, and as few different pubkeys as possible should be involved.\r\n-> Whenever the CoinSelection selects a UTXO, any UTXO assigned to the same pubkey should be preferred in selection.\r\n-> Small inputs that are significantly smaller than the size of the change and don't share their pubkey with a larger input should be pruned, as they increase transaction fee and decrease privacy.\r\n3. **Minimize transaction fee** A transaction input set should be preferred when it costs less to send.\r\n-> If spending some input costs more than what it contributes to the outputs it should not be added. Also, inputs that are extraneous should be pruned if that would lower the transaction fee.\r\n\r\n4. **Consolidate small UTXO?**\r\nOnce created, very small UTXO are in the blockchain anyway. \r\nIs it preferable to spend very small UTXO, in order to remove them from the UTXO-pool, or to ignore them until they become valuable enough to spend in their own right?\r\n\r\nHere are the statistics from my latest experiment.\r\n![ex19](https://cloud.githubusercontent.com/assets/4060799/4693226/ade9123e-578f-11e4-8765-653d41acc720.png)",
      "created_at" : "2014-10-19T12:59:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-59649061",
      "id" : 59649061,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2014-10-19T12:59:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/59649061",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=3",
         "events_url" : "https://api.github.com/users/AlSzacrel/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AlSzacrel/followers",
         "following_url" : "https://api.github.com/users/AlSzacrel/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AlSzacrel/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AlSzacrel",
         "id" : 4060799,
         "login" : "AlSzacrel",
         "organizations_url" : "https://api.github.com/users/AlSzacrel/orgs",
         "received_events_url" : "https://api.github.com/users/AlSzacrel/received_events",
         "repos_url" : "https://api.github.com/users/AlSzacrel/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AlSzacrel/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AlSzacrel/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AlSzacrel"
      }
   },
   {
      "body" : "Very interesting results!",
      "created_at" : "2014-10-20T07:48:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-59697782",
      "id" : 59697782,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2014-10-20T07:48:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/59697782",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "> Consolidate small UTXO? Once created, very small UTXO are in the blockchain anyway. Is it preferable to spend very small UTXO, in order to remove them from the UTXO-pool\r\n\r\nIt's preferable to spend them: since it reduces the storage for a minimal full node (see the pruning patches in #4701)... subject to the restriction that you don't want someone to be able to gratitiously increase your transaction costs by sending you tiny utxo.",
      "created_at" : "2014-10-20T07:59:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-59698734",
      "id" : 59698734,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2014-10-20T07:59:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/59698734",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "> Some questions I haven't been able to answer satisfyingly:\r\n\r\n> What would constitute realistic data for incoming and outgoing transactions of one wallet (how many incoming/outgoing transactions, what average size and distributions for each direction, is it necessary to regard the change in value over time)?\r\n\r\nPerhaps I can help. I have data from MoneyPot.com's hot wallet which you can use for simulation: https://gist.github.com/RHavar/7cd6f3fcf2bd3e485458\r\n\r\nThe positive amounts are amounts deposited, the negative amounts are sends. The data is sorted over time  (oldest at the top, newest at the bottom) denominated in bitcoins. \r\n\r\nThings to note:\r\n   * deposits are only added to the list when they get 1 confirmation (so they tend to come in batches) and send amounts are added to the list instantly\r\n\r\n   * At various times, the cumulative total dips below 0. This happens when people have won enough money to be able to withdraw more than the total people have put in the site. For the purpose of simulation, you might want to assume there is an additional 50 BTC input at the very start, to avoid this case.",
      "created_at" : "2015-02-18T14:34:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-74872926",
      "id" : 74872926,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2015-02-18T14:58:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/74872926",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9326759?v=3",
         "events_url" : "https://api.github.com/users/RHavar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/RHavar/followers",
         "following_url" : "https://api.github.com/users/RHavar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/RHavar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/RHavar",
         "id" : 9326759,
         "login" : "RHavar",
         "organizations_url" : "https://api.github.com/users/RHavar/orgs",
         "received_events_url" : "https://api.github.com/users/RHavar/received_events",
         "repos_url" : "https://api.github.com/users/RHavar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/RHavar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/RHavar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/RHavar"
      }
   },
   {
      "body" : "This PR has been open for a while, but garnered no ACKs.  The author seems to have put a fair amount of time and thought into it.  However, this definitely needs more review and testing.\r\n\r\nPing, maintainers/testers/helpers?\r\n",
      "created_at" : "2015-07-23T18:15:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-124192303",
      "id" : 124192303,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2015-07-23T18:15:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/124192303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik: Hi Jeff,\r\nThanks for the ping. \r\nI had lost track of this, but I see now that @RHavar posted data that might help to explore what the patch would do with some realistic data for transaction sizes. I'll have a look this weekend.",
      "created_at" : "2015-07-23T21:28:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-124244795",
      "id" : 124244795,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2015-07-23T21:28:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/124244795",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=3",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "body" : "I've created another testcase using the MoneyPot.com data. On that one, I get different results yet again, this time the Regular wallet has the least UTXO in the end.\r\n\r\nLooking over the results, I noticed that all wallets created a change output in the single digit satoshis. Do I remember correctly that the wallet shouldn't create Dust Outputs? Shouldn't the change be at least 540 satoshis? If so, I should probably fix that behavior still and then have another look.\r\n\r\nHowever, if it ends up looking as promising as today, I would propose to just expire this Pull-Request.",
      "created_at" : "2015-09-01T07:52:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-136619231",
      "id" : 136619231,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2015-09-01T07:52:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/136619231",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=3",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "body" : "@Xekyo:\r\n> prune extraneous inputs\r\n\r\nWouldn't \"extraneous inputs\" imply an issue in the coin selection algorithm which should be fixed instead? I invite you to look at #6696 which is a different approach. I am happy to shoot up some simulations if anyone is interested. (Ping me at the other PR)",
      "created_at" : "2015-09-23T09:20:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-142539748",
      "id" : 142539748,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2015-09-23T09:20:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142539748",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "From what I understand ApproximateBestSubset is an approximate algorithm for the following:\r\n```\r\nInput: [sizes], nLow, nTarget\r\nOutput: X=subset([sizes]) for which nTargetValue <= sum(X) < nLow\r\n        and sum(X)-nTargetValue as small as possible\r\n```\r\nThe \"approximate\" part means that it may select a solution which is not the optimal one (e.g. sum(X)-nTargetValue is not really as small as possible).\r\n\r\nYour fix drops elements i from the result X for which sum(X)-i is still >= nTargetvalue, which if possible leads to a trivially better solution.\r\n\r\nFrom what I understand this can improve the result because vValue is sorted from low to high, and elements are added in that order, it can happen that an element is added to get the sum above nTargetValue, but makes earlier-added small elements redundant.\r\n\r\n- What about moving the post-processing step to the end? This removes the performance impact per checked subset, and still makes sure redundant outputs are removed from the final result.\r\n\r\nI've managed to reproduce this as well. For e.g. these input values:\r\n```\r\nvValues = [10, 10, 10, 10, 10, 10, 10, 10, 10, 100, 1000]\r\nnTargetValue = 251\r\n```\r\nApproximateBestSubset sometimes selects `[10, 10, 1000]`. Postprocessing like this can drop the redundant `10` inputs.\r\n\r\nConcept ACK - this cannot make things worse. Would be nice to have a unit test.\r\n",
      "created_at" : "2015-11-20T15:41:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-158436086",
      "id" : 158436086,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2015-11-20T15:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158436086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Great that you had a look at this.\r\n\r\n> vValue is sorted from low to high ...\r\n\r\nGuess I missed that during review.\r\n\r\n> unit test\r\n\r\n@Xekyo are you still working on this? Should I take over?",
      "created_at" : "2015-11-20T16:10:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4906#issuecomment-158445938",
      "id" : 158445938,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4906",
      "updated_at" : "2015-11-20T16:10:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158445938",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
