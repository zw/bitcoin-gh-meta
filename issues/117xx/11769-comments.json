[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It is not that requesting takes a long time, but that responding takes a long time. We currently are single-threaded in ProcessMessages and a node which receives a block will have its message processing thread blocked validating/connecting the block and will not be able to respond to a getblocktxn message until it finishes. While the spec allows us to fix this, and we should, doing so is a rather large change.",
      "created_at" : "2017-11-27T15:39:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11769#issuecomment-347220690",
      "id" : 347220690,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11769",
      "updated_at" : "2017-11-27T15:39:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347220690",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Is there a reason there's no obvious switch to turn this off for a high integrity mode? It's causing my nodes to fall behind by many minutes, seemingly regardless of what peers they're talking to. \r\n\r\n    2017-11-29 19:13:16.904552 Initialized PartiallyDownloadedBlock for block 000000000000000000a12d6acd91f0f09d1e816c7e31793020dc78680480f3fd using a cmpctblock of size 12601\r\n    2017-11-29 19:13:19.137350 Initialized PartiallyDownloadedBlock for block 000000000000000000a12d6acd91f0f09d1e816c7e31793020dc78680480f3fd using a cmpctblock of size 12601\r\n\r\n    ....\r\n\r\n    2017-11-29 19:22:07.759980 00a5265fa3cf38115f42e94f2e0e267758af6cc7a240fc37cf9e77fcad1c42be from peer=2 was not accepted: non-final (code 64)",
      "created_at" : "2017-11-29T19:22:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11769#issuecomment-347967761",
      "id" : 347967761,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11769",
      "updated_at" : "2017-11-29T19:22:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347967761",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/27994566?v=4",
         "events_url" : "https://api.github.com/users/6784/events{/privacy}",
         "followers_url" : "https://api.github.com/users/6784/followers",
         "following_url" : "https://api.github.com/users/6784/following{/other_user}",
         "gists_url" : "https://api.github.com/users/6784/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/6784",
         "id" : 27994566,
         "login" : "6784",
         "organizations_url" : "https://api.github.com/users/6784/orgs",
         "received_events_url" : "https://api.github.com/users/6784/received_events",
         "repos_url" : "https://api.github.com/users/6784/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/6784/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/6784/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/6784"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "    2017-11-29 19:23:16.971350 Timeout downloading block 000000000000000000a12d6acd91f0f09d1e816c7e31793020dc78680480f3fd from peer=10, disconnecting\r\n    2017-11-29 19:23:25.967184 UpdateTip: new best=000000000000000000a12d6acd91f0f09d1e816c7e31793020dc78680480f3fd height=496735 version=0x20000000 log2_work=87.556213 tx=276197095 date='2017-11-29 19:12:53' progress=0.999993 cache=239.5MiB(1755296txo) warning='1 of last 100 blocks have unexpected version'\r\n\r\n",
      "created_at" : "2017-11-29T19:24:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11769#issuecomment-347968440",
      "id" : 347968440,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11769",
      "updated_at" : "2017-11-29T19:24:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347968440",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/27994566?v=4",
         "events_url" : "https://api.github.com/users/6784/events{/privacy}",
         "followers_url" : "https://api.github.com/users/6784/followers",
         "following_url" : "https://api.github.com/users/6784/following{/other_user}",
         "gists_url" : "https://api.github.com/users/6784/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/6784",
         "id" : 27994566,
         "login" : "6784",
         "organizations_url" : "https://api.github.com/users/6784/orgs",
         "received_events_url" : "https://api.github.com/users/6784/received_events",
         "repos_url" : "https://api.github.com/users/6784/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/6784/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/6784/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/6784"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "That looks like a very different issue, and seems to indicate your peer is broken in some way, now that it was disconnected you should likely see the issue less. If it persists, maybe check if your node is repeatedly connecting to the same bad peer (eg via -connect or -addnode or otherwise compare getpeerinfo).",
      "created_at" : "2017-11-29T19:30:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11769#issuecomment-347970153",
      "id" : 347970153,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11769",
      "updated_at" : "2017-11-29T19:30:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347970153",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I understand why I'm seeing the `non-final` rejections, they're anti fee sniping transactions being broadcast with the expectation that I've already imported that block. The peer blocking the compact block reconstruction is a Tor exit, which makes it seem intentional. ",
      "created_at" : "2017-11-29T20:27:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11769#issuecomment-347985840",
      "id" : 347985840,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11769",
      "updated_at" : "2017-11-29T20:27:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347985840",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/27994566?v=4",
         "events_url" : "https://api.github.com/users/6784/events{/privacy}",
         "followers_url" : "https://api.github.com/users/6784/followers",
         "following_url" : "https://api.github.com/users/6784/following{/other_user}",
         "gists_url" : "https://api.github.com/users/6784/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/6784",
         "id" : 27994566,
         "login" : "6784",
         "organizations_url" : "https://api.github.com/users/6784/orgs",
         "received_events_url" : "https://api.github.com/users/6784/received_events",
         "repos_url" : "https://api.github.com/users/6784/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/6784/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/6784/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/6784"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Are you assuming the tor exit server is manipulating Bitcoin traffic? It could be a bad peer on the other end. In any case, not a ton we can do without blowing up bandwidth usage, #10984 will help resolve for the simple compact block case, so you may want to try with that.",
      "created_at" : "2017-11-29T21:35:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11769#issuecomment-348003903",
      "id" : 348003903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11769",
      "updated_at" : "2017-11-29T21:35:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/348003903",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@6784 - what's the current status of this issue? Are you still having problems?\r\n\r\nDid you try running with #10984 as Matt suggested?",
      "created_at" : "2018-03-27T21:25:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11769#issuecomment-376680788",
      "id" : 376680788,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11769",
      "updated_at" : "2018-03-27T21:25:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/376680788",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
