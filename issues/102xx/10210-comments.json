[
   {
      "body" : "Oh. 15 minutes later it shut down!\r\n\r\n    2017-04-14 11:34:27 UpdateTip: new best=000000000000000001b4904ab88cb6f13b1f8ccbb9f183db51894cc521fabf23 height=461467 version=0x20000002 log2_work=86.267608 tx=212458675 date='2017-04-11 18:23:05' progress=0.996478 cache=18.5MiB(21415tx)\r\n    2017-04-14 11:34:27 Shutdown: In progress...\r\n    2017-04-14 11:34:27 opencon thread exit\r\n    2017-04-14 11:34:27 msghand thread exit\r\n    2017-04-14 11:49:50 119 addresses found from DNS seeds\r\n    2017-04-14 11:49:50 dnsseed thread exit\r\n    2017-04-14 11:49:51 Shutdown: done",
      "created_at" : "2017-04-14T11:53:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-294141666",
      "id" : 294141666,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10210",
      "updated_at" : "2017-04-14T11:53:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294141666",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/573356?v=3",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "body" : "Looks like a duplicate of #10209.",
      "created_at" : "2017-04-14T11:58:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-294142238",
      "id" : 294142238,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10210",
      "updated_at" : "2017-04-14T11:58:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294142238",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Possibly, though the stack traces look quite different.",
      "created_at" : "2017-04-14T12:00:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-294142454",
      "id" : 294142454,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10210",
      "updated_at" : "2017-04-14T12:00:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294142454",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/573356?v=3",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "body" : "This one is on the 0.14 branch. Jonas saw it on master.",
      "created_at" : "2017-04-14T12:02:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-294142674",
      "id" : 294142674,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10210",
      "updated_at" : "2017-04-14T12:02:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294142674",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "The hanging thread here is the dnsseed thread. Because glibc's async dns lookup is horribly broken (see https://sourceware.org/bugzilla/show_bug.cgi?id=20874), we stopped using it in #9229. #10215 will make the dnsseed thread exit a bit faster, but until we move to libevent's dns lookup, we're stuck with this as the best we can do.",
      "created_at" : "2017-04-14T20:35:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-294231685",
      "id" : 294231685,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10210",
      "updated_at" : "2017-04-14T20:35:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294231685",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "What value do you have dbcache set to?",
      "created_at" : "2018-03-10T07:15:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-372009335",
      "id" : 372009335,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10210",
      "updated_at" : "2018-03-10T07:15:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372009335",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2734?v=4",
         "events_url" : "https://api.github.com/users/eklitzke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eklitzke/followers",
         "following_url" : "https://api.github.com/users/eklitzke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eklitzke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eklitzke",
         "id" : 2734,
         "login" : "eklitzke",
         "organizations_url" : "https://api.github.com/users/eklitzke/orgs",
         "received_events_url" : "https://api.github.com/users/eklitzke/received_events",
         "repos_url" : "https://api.github.com/users/eklitzke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eklitzke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eklitzke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "    dbcache=4000\r\n\r\n(but I think this is a DNS timeout issue, not a Berkeley DB issue)",
      "created_at" : "2018-03-10T14:44:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-372035116",
      "id" : 372035116,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10210",
      "updated_at" : "2018-03-10T14:45:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372035116",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/573356?v=4",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`dbcache=4000` is way too high and I would not recommend that setting. That means that you may need to flush up to 4GB of data to disk when shutting down. In practice the utxo cache is flushed every 24 hr, but that still works out to about 1 GB of data for a synced node. It regularly takes my cloud nodes ~5 min to shut down with `dbcache=2048`. You also have a LevelDB compaction thread in your back trace which is consistent with a flush to disk happening.\r\n\r\nIf this happens to you again more useful than a GDB backtrace would be to strace all of the threads to completion, which would make it more obvious what is blocking on what. And I would suggest lowering the `dbcache` setting anyway.",
      "created_at" : "2018-03-10T15:11:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10210#issuecomment-372037050",
      "id" : 372037050,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10210",
      "updated_at" : "2018-03-10T15:11:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372037050",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2734?v=4",
         "events_url" : "https://api.github.com/users/eklitzke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eklitzke/followers",
         "following_url" : "https://api.github.com/users/eklitzke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eklitzke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eklitzke",
         "id" : 2734,
         "login" : "eklitzke",
         "organizations_url" : "https://api.github.com/users/eklitzke/orgs",
         "received_events_url" : "https://api.github.com/users/eklitzke/received_events",
         "repos_url" : "https://api.github.com/users/eklitzke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eklitzke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eklitzke"
      }
   }
]
