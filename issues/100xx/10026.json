{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "At last IRC meeting we've discussed trying to speed up the unit tests, as they've become much too slow.\r\nFor this purpose I've run `test_bitcoin --log_level=test_suite` and picked out the slowest from the list.\r\n\r\nThe top 20 is:\r\n\r\n| Test                                     | Time (ÃÂ¼s) |\r\n| ---------------------------------------- | ---------:|\r\n| `test_big_witness_transaction`           |  39133014 |\r\n| `test_CheckQueue_Correct_Random`         |  14808019 |\r\n| `knapsack_solver_test`                   |   9304171 |\r\n| `checkinputs_test`                       |   6370348 |\r\n| `CreateNewBlock_validity`                |   6105558 |\r\n| `test_CheckQueue_Memory`                 |   4230330 |\r\n| `versionbits_test`                       |   3835090 |\r\n| `coins_cache_simulation_test`            |   3205869 |\r\n| `updatecoins_simulation_test`            |   2499840 |\r\n| `merkle_test`                            |   2391688 |\r\n| `rescan`                                 |   1900315 |\r\n| `SelectCoins_test`                       |   1731901 |\r\n| `passphrase`                             |   1730167 |\r\n| `ListCoins`                              |   1689793 |\r\n| `test_CheckQueue_Catches_Failure`        |   1563869 |\r\n| `test_CheckQueue_UniqueCheck`            |   1521864 |\r\n| `PrevectorTestInt`                       |   1409636 |\r\n| `test_CheckQueue_Correct_Max`            |   1401687 |\r\n| `bnb_search_test`                        |   1147974 |\r\n| `cuckoocache_generations`                |    978637 |\r\n\r\n(updated 2018-04-14 by @lucash-dev)\r\n\r\nI think (open for discussion, of course) it is unreasonable for a unit test case to take more than ~1s (mind you, we have 242 of them, so each test is supposed to be quick) so we should take a look at each of these up to `merkle_test`.\r\n\r\nIt could be as simple in some cases as getting rid of (reasonably heavy) `BOOST_*` tests in inner loops, moving the checks up to a higher level.\r\n\r\nEdit: I added the script to create this table to maintainer-tools: https://github.com/bitcoin-core/bitcoin-maintainer-tools/blob/master/unittest-statistics.py",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 21,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10026/comments",
   "created_at" : "2017-03-18T08:34:02Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10026/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/10026",
   "id" : 215175786,
   "labels" : [
      {
         "color" : "d4c5f9",
         "default" : false,
         "id" : 62963516,
         "name" : "Tests",
         "node_id" : "MDU6TGFiZWw2Mjk2MzUxNg==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10026/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUyMTUxNzU3ODY=",
   "number" : 10026,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Overview of slow unit tests",
   "updated_at" : "2018-06-15T22:14:06Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10026",
   "user" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   }
}
