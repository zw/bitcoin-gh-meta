[
   {
      "author_association" : "MEMBER",
      "body" : "A few comments here:\r\n\r\n- your node is probably running with the default limitancestorcount / limitdescendant count, which prevents chains of >25 transactions entering your mempool. You can override those with command line arguments.\r\n- when you send the 26th transaction, it gets added your wallet, but is rejected by your mempool. You should see something like this in debug.log:\r\n\r\n```\r\n2017-03-15 21:41:07 AddToWallet 4c1473ae23f8c087116beb04ccb8cf1ee01226bb5a77db4cba1c5a44c8b52de6  new\r\n2017-03-15 21:41:07 CommitTransaction(): Transaction cannot be broadcast immediately, too-long-mempool-chain\r\n```\r\n\r\n- after you generate the next block, the transaction does not get resubmitted to your mempool automatically. You can find the transaction in your wallet using `gettransaction`, but `getrawtransaction` won't show it (because it's not in the mempool):\r\n\r\n```\r\n[ubuntu] /home/ubuntu/bitcoin\r\nÃ¢ÂÂ bitcoin-cli getrawtransaction 4c1473ae23f8c087116beb04ccb8cf1ee01226bb5a77db4cba1c5a44c8b52de6\r\nerror code: -5\r\nerror message:\r\nNo such mempool or blockchain transaction. Use gettransaction for wallet transactions.\r\n[ubuntu] /home/ubuntu/bitcoin\r\nÃ¢ÂÂ bitcoin-cli gettransaction 4c1473ae23f8c087116beb04ccb8cf1ee01226bb5a77db4cba1c5a44c8b52de6\r\n{\r\n  \"amount\": -0.50000000,\r\n ...\r\n \"hex\": \"02000000015415b85a301a420bac34ec12d3786e1b9d8608c29c9a083306da5e0a0a065286010000006b483045022100ca16a86854d1c51c975bf3e55386bb9ca9929c252524eb1118cfb27121e4d97902206d6acedf4596b9edaea93f411474d39746cc3d5348c9de9f43d9c9c937310de5012103880da4e6b6451859b1eed794b76    7a2e5f2a8e7898aa4cc7a83f2aad8165faa13feffffff02a88e0492000000001976a9149e2f8afc219f0db384ce131d7c028753ac350a4a88ac80f0fa020000000017a914d396f368f3b4348ced0ed1f4138bb2906e12f7df8765000000\"\r\n}\r\n```\r\n- at this point, you *could* resubmit the transaction to your mempool by running `sendrawtransaction <tx hex serialization>`\r\n- persistent mempool has nothing to do with the transaction being readded after stop-start (since the transaction never made it into the mempool in the first place). The transaction is actually in your wallet file, so when you stop-start, that's where it's being found. You can prove this to yourself by deleting mempool.dat between stopping and starting.\r\n\r\nI think that the correct behaviour here is that the wallet should reject the transaction if it's in a chain that's too long to get accepted by the node's mempool.\r\n",
      "created_at" : "2017-03-15T21:56:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10004#issuecomment-286892237",
      "id" : 286892237,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10004",
      "updated_at" : "2017-03-16T14:33:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/286892237",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Ahhh thank you for the explanation! This makes sense. Yeah I suppose the expected behavior for me would be if `sendtoaddress` failed with a \"chain too long\" error before creating that last tx, leaving one last unspent output available for a retry or wait for confirmation... ",
      "created_at" : "2017-03-15T22:23:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10004#issuecomment-286898585",
      "id" : 286898585,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10004",
      "updated_at" : "2017-03-15T22:23:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/286898585",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/2084648?v=3",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "body" : "FYI there's some relevant context in #9262, #9302, and #9752.",
      "created_at" : "2017-03-16T01:59:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10004#issuecomment-286935417",
      "id" : 286935417,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10004",
      "updated_at" : "2017-03-16T01:59:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/286935417",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> your node is probably running with the default limitancestorcount / limitdescendant count, which prevents chains of >25 transactions entering your mempool  \r\n\r\n@jnewbery Isn't it 64? I don't have that set and I just got this error: `64: too-long-mempool-chain`, when I did this. (On the testnet.)",
      "created_at" : "2017-11-17T22:26:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10004#issuecomment-345382764",
      "id" : 345382764,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10004",
      "updated_at" : "2017-11-17T22:26:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345382764",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/9156103?v=4",
         "events_url" : "https://api.github.com/users/nopara73/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nopara73/followers",
         "following_url" : "https://api.github.com/users/nopara73/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nopara73/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nopara73",
         "id" : 9156103,
         "login" : "nopara73",
         "organizations_url" : "https://api.github.com/users/nopara73/orgs",
         "received_events_url" : "https://api.github.com/users/nopara73/received_events",
         "repos_url" : "https://api.github.com/users/nopara73/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nopara73/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nopara73/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nopara73"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "64 is the error code.",
      "created_at" : "2017-11-17T22:29:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10004#issuecomment-345383285",
      "id" : 345383285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10004",
      "updated_at" : "2017-11-17T22:29:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345383285",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> 64 is the error code.  \r\n\r\nThanks. That explains why the error message on my GUI had less than 64 transaction ids in it.",
      "created_at" : "2017-11-17T22:52:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10004#issuecomment-345387402",
      "id" : 345387402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10004",
      "updated_at" : "2017-11-17T22:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345387402",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/9156103?v=4",
         "events_url" : "https://api.github.com/users/nopara73/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nopara73/followers",
         "following_url" : "https://api.github.com/users/nopara73/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nopara73/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nopara73",
         "id" : 9156103,
         "login" : "nopara73",
         "organizations_url" : "https://api.github.com/users/nopara73/orgs",
         "received_events_url" : "https://api.github.com/users/nopara73/received_events",
         "repos_url" : "https://api.github.com/users/nopara73/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nopara73/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nopara73/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nopara73"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Linking to the relevant line in the code for reference: https://github.com/bitcoin/bitcoin/blob/a89221873a3ee2451c73b41bbe2d99d36f439d31/src/wallet/wallet.cpp#L3036-L3042",
      "created_at" : "2017-11-27T18:40:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10004#issuecomment-347281958",
      "id" : 347281958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10004",
      "updated_at" : "2017-11-27T18:40:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347281958",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Is there a solution using **LockUnspent** ?\r\n\r\nGenerate _24_ transactions with **SendToAddress**\r\nUsing TXID of the 24th transaction\r\n **GetRawTransaction txid, true** (or 1 if version before 0.14.0)\r\n - examine the _vout:_ array; in our case there should only be two, the spend and the change\r\n - find the vout: for the change\r\n\tthe amount is != the amount spent\r\n\tthe address is != the address the spend was to\r\n**LockUnspent false, txid, vout**\r\n - lock that vout: so it can not be used as the UTXO for any further spend.\r\n\r\nLather, rinse, repeat.\r\n\r\nSeems to me a lot simpler than loading amounts into multiple addresses, using the deprecated Account feature to identify them, and then SetAccount every group of 24 to force the wallet to move onto a different (confirmed) UTXO so that a new chain will be built.\r\n\r\n**Will this approach work ?**",
      "created_at" : "2018-04-06T20:14:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/10004#issuecomment-379364753",
      "id" : 379364753,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10004",
      "updated_at" : "2018-04-06T20:14:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379364753",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/8438931?v=4",
         "events_url" : "https://api.github.com/users/smartwombat/events{/privacy}",
         "followers_url" : "https://api.github.com/users/smartwombat/followers",
         "following_url" : "https://api.github.com/users/smartwombat/following{/other_user}",
         "gists_url" : "https://api.github.com/users/smartwombat/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/smartwombat",
         "id" : 8438931,
         "login" : "smartwombat",
         "organizations_url" : "https://api.github.com/users/smartwombat/orgs",
         "received_events_url" : "https://api.github.com/users/smartwombat/received_events",
         "repos_url" : "https://api.github.com/users/smartwombat/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/smartwombat/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/smartwombat/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/smartwombat"
      }
   }
]
