[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r865578194"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865578194"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not sure if we want a `kernel` folder for code that is shared between node and kernel. An alternative would be to name it `init/kernel.cpp` or `init/globals.cpp`?\r\n\r\nOtherwise it will be difficult to decide whether to put kernel code that is used elsewhere as well in `kernel` or in the \"normal\" hierarchy?  cc @ryanofsky ",
      "commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "created_at" : "2022-05-05T06:06:24Z",
      "diff_hunk" : "@@ -870,7 +872,7 @@ libbitcoinkernel_la_SOURCES = \\\n   index/base.cpp \\\n   index/blockfilterindex.cpp \\\n   index/coinstatsindex.cpp \\\n-  init/common.cpp \\\n+  kernel/init/common.cpp \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r865578194",
      "id" : 865578194,
      "line" : 875,
      "node_id" : "PRRC_kwDOABII584zl6zS",
      "original_commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "original_line" : 875,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/Makefile.am",
      "position" : 21,
      "pull_request_review_id" : 962889120,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865578194/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-05T06:07:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865578194",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r865578361"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865578361"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Pretty sure this is illegal according to iwyu?",
      "commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "created_at" : "2022-05-05T06:06:47Z",
      "diff_hunk" : "@@ -8,11 +8,11 @@\n #ifndef BITCOIN_INIT_COMMON_H\n #define BITCOIN_INIT_COMMON_H\n \n+#include <kernel/include/init/common.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r865578361",
      "id" : 865578361,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII584zl615",
      "original_commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "original_line" : 11,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/init/common.h",
      "position" : 4,
      "pull_request_review_id" : 962889120,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865578361/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-05T06:07:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865578361",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r865910970"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865910970"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think the main thing here is to have a name that clearly indicates that this contains \"only the common initialization code that the kernel needs\" so that people don't accidentally add non-kernel code to it (it would result in a linker error when building `bitcoin-chainstate`).\r\n\r\nOther PRs in the project (e.g. #24410) does this as well, since \"extracting only what the kernel needs\" is the main goal of this phase of the project. I like using the `kernel/` prefix since it makes the indication mentioned in the previous paragraph clear, and doesn't require inventing a new name.\r\n\r\nIn this particular case though, perhaps `kernel/init.cpp` would work.\r\n\r\nOne question is: do we keep the two functions moved in the `init::` namespace or the `kernel::` namespace.\r\n\r\nIn the longer run, I think eventually (very far off when `libbitcoinkernel` is very minimal) we could put everything that links into libbitcoinkernel into the `src/kernel/` folder.",
      "commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "created_at" : "2022-05-05T13:33:04Z",
      "diff_hunk" : "@@ -870,7 +872,7 @@ libbitcoinkernel_la_SOURCES = \\\n   index/base.cpp \\\n   index/blockfilterindex.cpp \\\n   index/coinstatsindex.cpp \\\n-  init/common.cpp \\\n+  kernel/init/common.cpp \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r865910970",
      "id" : 865910970,
      "in_reply_to_id" : 865578194,
      "line" : 875,
      "node_id" : "PRRC_kwDOABII584znMC6",
      "original_commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "original_line" : 875,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/Makefile.am",
      "position" : 21,
      "pull_request_review_id" : 963369916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865910970/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-05T13:42:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865910970",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r865917808"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865917808"
         }
      },
      "author_association" : "MEMBER",
      "body" : "So is the goal to eventually split validation into kernel/validation.cpp and node/validation.cpp ? What about util functions that are included in the kernel?",
      "commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "created_at" : "2022-05-05T13:39:38Z",
      "diff_hunk" : "@@ -870,7 +872,7 @@ libbitcoinkernel_la_SOURCES = \\\n   index/base.cpp \\\n   index/blockfilterindex.cpp \\\n   index/coinstatsindex.cpp \\\n-  init/common.cpp \\\n+  kernel/init/common.cpp \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r865917808",
      "id" : 865917808,
      "in_reply_to_id" : 865578194,
      "line" : 875,
      "node_id" : "PRRC_kwDOABII584znNtw",
      "original_commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "original_line" : 875,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/Makefile.am",
      "position" : 21,
      "pull_request_review_id" : 963379896,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865917808/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-05T13:39:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865917808",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r865918360"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865918360"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah right. Yeah the thought here (in general for the `libbitcoinkernel` project) is for the existing headers to export things from the \"kernel-extracted version of headers\" so that we don't have too much code churn adding `#include <kernel/*.h>` all over the place. (See my other comment here for more details: https://github.com/bitcoin/bitcoin/pull/25065#discussion_r865910970)\r\n\r\nI think a good solution would be to do:\r\n```\r\n#include <kernel/include/init/common.h> // IWYU pragma: export\r\n```",
      "commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "created_at" : "2022-05-05T13:40:13Z",
      "diff_hunk" : "@@ -8,11 +8,11 @@\n #ifndef BITCOIN_INIT_COMMON_H\n #define BITCOIN_INIT_COMMON_H\n \n+#include <kernel/include/init/common.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r865918360",
      "id" : 865918360,
      "in_reply_to_id" : 865578361,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII584znN2Y",
      "original_commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "original_line" : 11,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/init/common.h",
      "position" : 4,
      "pull_request_review_id" : 963380685,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865918360/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-05T13:40:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865918360",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r865932365"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865932365"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> So is the goal to eventually split validation into kernel/validation.cpp and node/validation.cpp ?\r\n\r\nYes, far off into the future we will likely do that (although I think in reality `node/validation.cpp` will likely be either: 1. a very very short file, or 2. deleted because what would be left belongs better in a differently named file).\r\n\r\n> What about util functions that are included in the kernel?\r\n\r\nI've discussed this with Ryan in #24352, and we came to the conclusion that we will move all the utils that `libbitcoinkernel` depends on to `libbitcoin_util`, now that's just w/re the libraries, we could do either one of two things for the hierarchy:\r\n\r\n1. `src/kernel/` and `src/util/`, or\r\n2. `src/kernel/` and `src/kernel/util/`\r\n\r\nEither is fine with me. See here for more discussion: https://github.com/bitcoin/bitcoin/pull/24352#issuecomment-1048231861",
      "commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "created_at" : "2022-05-05T13:52:59Z",
      "diff_hunk" : "@@ -870,7 +872,7 @@ libbitcoinkernel_la_SOURCES = \\\n   index/base.cpp \\\n   index/blockfilterindex.cpp \\\n   index/coinstatsindex.cpp \\\n-  init/common.cpp \\\n+  kernel/init/common.cpp \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r865932365",
      "id" : 865932365,
      "in_reply_to_id" : 865578194,
      "line" : 875,
      "node_id" : "PRRC_kwDOABII584znRRN",
      "original_commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "original_line" : 875,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/Makefile.am",
      "position" : 21,
      "pull_request_review_id" : 963400490,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865932365/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-05T13:52:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865932365",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#21763](https://github.com/bitcoin/bitcoin/pull/21763) (test: Run AppInitSanityChecks before all tests by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-05-05T14:14:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1118607839",
      "id" : 1118607839,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585CrJnf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1118607839/reactions"
      },
      "updated_at" : "2022-06-01T15:14:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1118607839",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r866028150"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866028150"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Hmm, so to recall the goals of kernel are:\r\n* Provide a self-contained thing for other projects to use.\r\n* Make it clear what code is consensus related and what code isn't.\r\n\r\n(Correct me if I am wrong)\r\n\r\nPutting *all* utils into the kernel util library helps neither goal. Though, at the same time anything used by kernel isn't strictly consensus code. For example logging is used, but it is not consensus critical. Still, anything *not* used by kernel can't be consensus code, so I am wondering if there should be two util libs? If yes, then it would make sense to have both `src/util` and `src/kernel/util`.  If not, then I don't care what is done.",
      "commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "created_at" : "2022-05-05T15:19:38Z",
      "diff_hunk" : "@@ -870,7 +872,7 @@ libbitcoinkernel_la_SOURCES = \\\n   index/base.cpp \\\n   index/blockfilterindex.cpp \\\n   index/coinstatsindex.cpp \\\n-  init/common.cpp \\\n+  kernel/init/common.cpp \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r866028150",
      "id" : 866028150,
      "in_reply_to_id" : 865578194,
      "line" : 875,
      "node_id" : "PRRC_kwDOABII584znop2",
      "original_commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "original_line" : 875,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/Makefile.am",
      "position" : 21,
      "pull_request_review_id" : 963540466,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866028150/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-05T15:19:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866028150",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r866035271"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866035271"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> so I am wondering if there should be two util libs? If yes, then it would make sense to have both `src/util` and `src/kernel/util`.  If not, then I don't care what is done.\r\n\r\nI think that the point of https://github.com/bitcoin/bitcoin/pull/24352#issuecomment-1048231861 is to establish exactly what you're saying. In effect:\r\n\r\n- `common` will be the non-kernel \"util lib\" (i.e. `src/util`), and\r\n- `util` will be the kernel \"util lib\" (i.e. `src/kernel/util`).",
      "commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "created_at" : "2022-05-05T15:25:35Z",
      "diff_hunk" : "@@ -870,7 +872,7 @@ libbitcoinkernel_la_SOURCES = \\\n   index/base.cpp \\\n   index/blockfilterindex.cpp \\\n   index/coinstatsindex.cpp \\\n-  init/common.cpp \\\n+  kernel/init/common.cpp \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r866035271",
      "id" : 866035271,
      "in_reply_to_id" : 865578194,
      "line" : 875,
      "node_id" : "PRRC_kwDOABII584znqZH",
      "original_commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "original_line" : 875,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/Makefile.am",
      "position" : 21,
      "pull_request_review_id" : 963550221,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866035271/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-05T15:25:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866035271",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed d5876d1efbf01f45fff2b42e0bcf2bc12eb25240 -> 13e65511dba702d115b7bea147b12eefaea9d53f\r\n- Adjusted according to https://github.com/bitcoin/bitcoin/pull/24410#issuecomment-1118984576",
      "created_at" : "2022-05-05T20:15:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1119005898",
      "id" : 1119005898,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585CsqzK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1119005898/reactions"
      },
      "updated_at" : "2022-05-05T20:15:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1119005898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r866282776"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866282776"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed as of: 31c21f3644f6f42f6e4c3c231e95bf0b87ab86f5",
      "commit_id" : "e4c35528e58a74138aa7e0560dd7f59f1086c765",
      "created_at" : "2022-05-05T20:19:38Z",
      "diff_hunk" : "@@ -8,11 +8,11 @@\n #ifndef BITCOIN_INIT_COMMON_H\n #define BITCOIN_INIT_COMMON_H\n \n+#include <kernel/include/init/common.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r866282776",
      "id" : 866282776,
      "in_reply_to_id" : 865578361,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zom0Y",
      "original_commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "original_line" : 11,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/init/common.h",
      "position" : null,
      "pull_request_review_id" : 963911523,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866282776/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-05T20:19:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866282776",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed 13e65511dba702d115b7bea147b12eefaea9d53f -> 708e2711e591ce4958900715348cb0313763f2cb\r\n- Addressed: https://github.com/bitcoin/bitcoin/pull/25065#discussion_r865578361",
      "created_at" : "2022-05-05T20:20:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1119009508",
      "id" : 1119009508,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585Csrrk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1119009508/reactions"
      },
      "updated_at" : "2022-05-05T20:20:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1119009508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed 708e2711e591ce4958900715348cb0313763f2cb -> e4c35528e58a74138aa7e0560dd7f59f1086c765\r\n- Fixed incorrect header `#ifdef`: https://github.com/bitcoin/bitcoin/runs/6313105188",
      "created_at" : "2022-05-05T22:10:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1119090388",
      "id" : 1119090388,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585Cs_bU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1119090388/reactions"
      },
      "updated_at" : "2022-05-05T22:10:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1119090388",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds\n\n| File | commit 225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f<br>(master) | commit a35aa55df7cab97be04bdae6cba6c7912f2d45be<br>(master and this pull) |\n|--|--|--|\n| SHA256SUMS.part | [`1b58b80ca65983b3...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/SHA256SUMS.part) | [`697fe8221c822555...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/SHA256SUMS.part) |\n| *-aarch64-linux-gnu-debug.tar.gz | [`26b50f702207b949...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-aarch64-linux-gnu-debug.tar.gz) | [`05f6440c047876da...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`93156ddbf46f81df...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-aarch64-linux-gnu.tar.gz) | [`67a244cd13c03670...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`448908d67e456427...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-arm-linux-gnueabihf-debug.tar.gz) | [`cb9335c39864cd59...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`595189752c32bf97...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-arm-linux-gnueabihf.tar.gz) | [`edfeeb3c6586e579...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-arm-linux-gnueabihf.tar.gz) |\n| *-arm64-apple-darwin-unsigned.dmg | [`8fe9a774204a88c7...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-arm64-apple-darwin-unsigned.dmg) | [`0efc857243f4834c...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-arm64-apple-darwin-unsigned.dmg) |\n| *-arm64-apple-darwin-unsigned.tar.gz | [`293f411c2dc51edb...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-arm64-apple-darwin-unsigned.tar.gz) | [`3def6f714f5c9ac2...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-arm64-apple-darwin-unsigned.tar.gz) |\n| *-arm64-apple-darwin.tar.gz | [`abca1d81d437a08a...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-arm64-apple-darwin.tar.gz) | [`c7ef8d7b1ffa0ff3...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-arm64-apple-darwin.tar.gz) |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`1744beebac78a5d6...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-powerpc64-linux-gnu-debug.tar.gz) | [`2ed359d1c868c668...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-powerpc64-linux-gnu-debug.tar.gz) |\n| *-powerpc64-linux-gnu.tar.gz | [`ec4d4712136dc767...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-powerpc64-linux-gnu.tar.gz) | [`6334b422a3a3e628...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-powerpc64-linux-gnu.tar.gz) |\n| *-powerpc64le-linux-gnu-debug.tar.gz | [`ac1890b8743df6a5...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-powerpc64le-linux-gnu-debug.tar.gz) | [`f63b456b18ad54e0...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-powerpc64le-linux-gnu-debug.tar.gz) |\n| *-powerpc64le-linux-gnu.tar.gz | [`b0ebc5e4120bf000...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-powerpc64le-linux-gnu.tar.gz) | [`bd14c28c65a5966e...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-powerpc64le-linux-gnu.tar.gz) |\n| *-riscv64-linux-gnu-debug.tar.gz | [`702be3dc495a5a10...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-riscv64-linux-gnu-debug.tar.gz) | [`434bec65cbf9eeed...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`ad1394d672c7b965...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-riscv64-linux-gnu.tar.gz) | [`b95c9bec21a376cb...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-riscv64-linux-gnu.tar.gz) |\n| *-win64-debug.zip | [`5464743530003d4d...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-win64-debug.zip) | [`1ed6bffb08973b9b...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-win64-debug.zip) |\n| *-win64-setup-unsigned.exe | [`955c755466eb2b07...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-win64-setup-unsigned.exe) | [`6cac9eed002e77df...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-win64-setup-unsigned.exe) |\n| *-win64-unsigned.tar.gz | [`0126640c2d061f14...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-win64-unsigned.tar.gz) | [`2f217181be03e5e8...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-win64-unsigned.tar.gz) |\n| *-win64.zip | [`5b07889e2dce9103...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-win64.zip) | [`1589a390a05ca335...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-win64.zip) |\n| *-x86_64-apple-darwin-unsigned.dmg | [`c5526437a0193c3b...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-x86_64-apple-darwin-unsigned.dmg) | [`061d5c7851f79fd4...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-x86_64-apple-darwin-unsigned.dmg) |\n| *-x86_64-apple-darwin-unsigned.tar.gz | [`e1d81f18176fab2e...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-x86_64-apple-darwin-unsigned.tar.gz) | [`2283101f6da8291c...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-x86_64-apple-darwin-unsigned.tar.gz) |\n| *-x86_64-apple-darwin.tar.gz | [`d34e5f7fe086c51f...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-x86_64-apple-darwin.tar.gz) | [`3b0e96d379306eda...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-x86_64-apple-darwin.tar.gz) |\n| *-x86_64-linux-gnu-debug.tar.gz | [`acb6561a5919c80f...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-x86_64-linux-gnu-debug.tar.gz) | [`e83da3071ae21cad...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`00bb67a5b4e29ca3...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee-x86_64-linux-gnu.tar.gz) | [`e947650852f0918d...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`ab4e54f5d920eb45...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/bitcoin-225e5b57b2ee.tar.gz) | [`6167eae7a1103d2c...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/bitcoin-a35aa55df7ca.tar.gz) |\n| guix_build.log | [`68d9a71f1973680b...`](https://drahtbot.space/guix/bitcoin/bitcoin/225e5b57b2ee2bc1acd7f09c89ccccc15ef8c85f/guix_build.log) | [`e17425caa820c218...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/guix_build.log) |\n| guix_build.log.diff |  | [`a2f6c50b1586c11b...`](https://drahtbot.space/guix/bitcoin/bitcoin/a35aa55df7cab97be04bdae6cba6c7912f2d45be/guix_build.log.diff) |\n\n",
      "created_at" : "2022-05-17T02:34:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1128337399",
      "id" : 1128337399,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585DQQ_3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1128337399/reactions"
      },
      "updated_at" : "2022-05-17T02:34:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1128337399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed e4c35528e58a74138aa7e0560dd7f59f1086c765 -> e6f8606007a1690dcf9265d15c7fe15cf5eb5239\r\n- Rebased over master after merge of #25064",
      "created_at" : "2022-05-20T21:31:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1133399292",
      "id" : 1133399292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585Djkz8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133399292/reactions"
      },
      "updated_at" : "2022-05-20T21:31:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133399292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r880568351"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880568351"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> I think that the point of https://github.com/bitcoin/bitcoin/pull/24352#issuecomment-1048231861 is to establish exactly what you're saying. In effect:\r\n\r\nSGTM\r\n\r\n> For example logging is used\r\n\r\nYes. Though, for the eventual libbitcoin kernel we need to find some way to do logging that doesn't make the client application depend on bitcoind's logging subsystem (say, a hook / notification registration). Out of scope here, of course.",
      "commit_id" : "6d93c443a44f06296e8014c65bc70f44cc494fca",
      "created_at" : "2022-05-24T14:14:25Z",
      "diff_hunk" : "@@ -870,7 +872,7 @@ libbitcoinkernel_la_SOURCES = \\\n   index/base.cpp \\\n   index/blockfilterindex.cpp \\\n   index/coinstatsindex.cpp \\\n-  init/common.cpp \\\n+  kernel/init/common.cpp \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r880568351",
      "id" : 880568351,
      "in_reply_to_id" : 865578194,
      "line" : 876,
      "node_id" : "PRRC_kwDOABII5840fGgf",
      "original_commit_id" : "d5876d1efbf01f45fff2b42e0bcf2bc12eb25240",
      "original_line" : 876,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/Makefile.am",
      "position" : 22,
      "pull_request_review_id" : 983310948,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880568351/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-24T14:14:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880568351",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Push e6f8606007a1690dcf9265d15c7fe15cf5eb5239 -> 6d93c443a44f06296e8014c65bc70f44cc494fca\r\n- Rebased over master after merge of #24410",
      "created_at" : "2022-05-24T14:16:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1135988493",
      "id" : 1135988493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585Dtc8N",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135988493/reactions"
      },
      "updated_at" : "2022-05-24T14:16:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135988493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r880647410"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880647410"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is the first of these pragmas I've seen. I suspect I'm out of the loop on something.\r\n\r\nI'm assuming this is some hint to IWYU, but I'm not sure what it means?",
      "commit_id" : "6d93c443a44f06296e8014c65bc70f44cc494fca",
      "created_at" : "2022-05-24T15:16:26Z",
      "diff_hunk" : "@@ -8,11 +8,11 @@\n #ifndef BITCOIN_INIT_COMMON_H\n #define BITCOIN_INIT_COMMON_H\n \n+#include <kernel/init/common.h> // IWYU pragma: export",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r880647410",
      "id" : 880647410,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII5840fZzy",
      "original_commit_id" : "46524a623e71ce4d7915a1657a71af3d767bb041",
      "original_line" : 11,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/init/common.h",
      "position" : 4,
      "pull_request_review_id" : 983427873,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880647410/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-24T15:42:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880647410",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r880668218"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880668218"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think it makes sense to move `SanityChecks` out as well, as it's effectively a runtime test for `SetGlobals` (and it depends on it too).",
      "commit_id" : "6d93c443a44f06296e8014c65bc70f44cc494fca",
      "created_at" : "2022-05-24T15:34:12Z",
      "diff_hunk" : "@@ -8,11 +8,11 @@\n #ifndef BITCOIN_INIT_COMMON_H\n #define BITCOIN_INIT_COMMON_H\n \n+#include <kernel/init/common.h> // IWYU pragma: export\n+\n class ArgsManager;\n \n namespace init {\n-void SetGlobals();\n-void UnsetGlobals();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r880668218",
      "id" : 880668218,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII5840fe46",
      "original_commit_id" : "6d93c443a44f06296e8014c65bc70f44cc494fca",
      "original_line" : 15,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/init/common.h",
      "position" : 10,
      "pull_request_review_id" : 983427873,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880668218/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-24T15:42:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880668218",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r880671194"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880671194"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't love the idea of chopping up and rearranging _and_ moving the static cruft to the new clean home.\r\n\r\nDo you have a next step in mind for this stuff?",
      "commit_id" : "6d93c443a44f06296e8014c65bc70f44cc494fca",
      "created_at" : "2022-05-24T15:36:58Z",
      "diff_hunk" : "@@ -0,0 +1,30 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <crypto/sha256.h>\n+#include <key.h>\n+#include <logging.h>\n+#include <pubkey.h>\n+#include <random.h>\n+\n+#include <memory>\n+\n+static std::unique_ptr<ECCVerifyHandle> globalVerifyHandle;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r880671194",
      "id" : 880671194,
      "line" : 13,
      "node_id" : "PRRC_kwDOABII5840ffna",
      "original_commit_id" : "6d93c443a44f06296e8014c65bc70f44cc494fca",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/init/common.cpp",
      "position" : 13,
      "pull_request_review_id" : 983427873,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880671194/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-24T15:42:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880671194",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Few suggestions (feel free to ignore):\r\n\r\n- Would squash 3 commits to 1 commit. There's like 7 lines of code moving in this PR. I don't think moving it in 3 parts instead of 1 part helps anyone!\r\n- Would rename `src/kernel/init/common.h,cpp` to `src/kernel/init.h,cpp`\r\n- Would rename `namespace init` to `namespace kernel` (namespace name not matching directory name is like a sign pointing in wrong direction, probably worse than not having the sign)\r\n- Maybe for followup, instead of `kernel::SetGlobals` `kernel::UnsetGlobals` call these `kernel::Init` `kernel::Destroy` or `Load`/`Unload` or similar. If you wanted to be really fancy you could call these `kernel::Context::Context()` and `kernel::Context::~Context()` but no need to go crazy with another context struct yet.",
      "created_at" : "2022-05-25T00:43:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1136567868",
      "id" : 1136567868,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585DvqY8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1136567868/reactions"
      },
      "updated_at" : "2022-05-25T00:43:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1136567868",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "To explain suggestions in https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1136567868 a little, I think the libbitcoin_kernel external interface should not use global variables. libbitcoin_kernel is supposed to be a library, and having used many libraries, I'd claim that libraries which use global variables or other implicit singletons are a pain to develop and test with.\r\n\r\nI understand bitcoin code uses global variables, and you don't want to make big changes to existing code to get rid of them. This is fine. But we shouldn't add kernel functions which require the implementation use to global variables, and make them difficult to get rid of in the future.\r\n\r\nYou can easily create a clean API that does not require other code to use global variables by defining a `kernel::Context` struct that owns whatever state is needed to run kernel functions, and passing `Context*` to functions in `src/kernel/` meant to be called externally. Internally (especially at first), `Context*` won't be accessible to a lot of existing code, so global variables should still be used. They just need to point to the context or to specific members of the context instead of owning the state directly. Not much existing code should have to change. The only code that might have to change is the lowest-level code directly referencing global variables that were moved. Only some of this code would have to change, and no code above it would have to change.\r\n\r\nAt a higher level, the `kernel::Context` struct could just be understood as a thing which lets libbitcoin_kernel code remember state between calls, and interact with the outside world without relying on globals. So it can ask where is the data dir? How do I log this message? How do I generate a random number? What time is it? And so on\r\n",
      "created_at" : "2022-05-25T12:34:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1137184248",
      "id" : 1137184248,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585DyA34",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137184248/reactions"
      },
      "updated_at" : "2022-05-25T12:34:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137184248",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "\r\n> I understand bitcoin code uses global variables, and you don't want to make big changes to existing code to get rid of them. This is fine. But we shouldn't add kernel functions which require the implementation use to global variables, and make them difficult to get rid of in the future.\r\n> \r\n\r\nTotally agree with this. I think I was pretty much complaining about the same thing here: https://github.com/bitcoin/bitcoin/pull/25065#discussion_r880671194\r\n\r\nI expect lots of weird in-between-ness at this stage. But I was generally hoping that for the most part, the stuff that gets moved into the library would be relatively clean and not in need of much more untangling. In that regard, this PR seems a bit regressive.\r\n\r\n> At a higher level, the `kernel::Context` struct could just be understood as a thing which lets libbitcoin_kernel code remember state between calls, and interact with the outside world without relying on globals. So it can ask where is the data dir? How do I log this message? How do I generate a random number? What time is it? And so on\r\n\r\n100% agree with this as well. I've been expecting a new Context struct to come into play and at this point it's a bit weird that we don't have one. This PR may be a good opportunity to introduce it.",
      "created_at" : "2022-05-25T14:27:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1137329161",
      "id" : 1137329161,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585DykQJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137329161/reactions"
      },
      "updated_at" : "2022-05-25T14:27:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137329161",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed 6d93c443a44f06296e8014c65bc70f44cc494fca -> 9bc9309bd61f36ac68b41fe2328d2e3f505397e1\r\n- Overhauled PR to introduce a `kernel::Context` and move the global initialization logic to its ctor/dtor. (Thanks Cory+Ryan)\r\n- Leaving `compat/glibcxx_sanity.cpp` in libbitcoinkernel for now until we figure out https://github.com/bitcoin/bitcoin/pull/25065#discussion_r880668218",
      "created_at" : "2022-05-25T19:06:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1137745142",
      "id" : 1137745142,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585D0Jz2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137745142/reactions"
      },
      "updated_at" : "2022-05-25T19:25:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137745142",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882022806"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882022806"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed as of 9bc9309bd61f36ac68b41fe2328d2e3f505397e1",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-25T19:07:00Z",
      "diff_hunk" : "@@ -0,0 +1,30 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <crypto/sha256.h>\n+#include <key.h>\n+#include <logging.h>\n+#include <pubkey.h>\n+#include <random.h>\n+\n+#include <memory>\n+\n+static std::unique_ptr<ECCVerifyHandle> globalVerifyHandle;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882022806",
      "id" : 882022806,
      "in_reply_to_id" : 880671194,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840kpmW",
      "original_commit_id" : "6d93c443a44f06296e8014c65bc70f44cc494fca",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/init/common.cpp",
      "position" : null,
      "pull_request_review_id" : 985342545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882022806/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-25T19:07:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882022806",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882022977"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882022977"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No longer relevant as of 9bc9309bd61f36ac68b41fe2328d2e3f505397e1",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-25T19:07:17Z",
      "diff_hunk" : "@@ -8,11 +8,11 @@\n #ifndef BITCOIN_INIT_COMMON_H\n #define BITCOIN_INIT_COMMON_H\n \n+#include <kernel/init/common.h> // IWYU pragma: export",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882022977",
      "id" : 882022977,
      "in_reply_to_id" : 880647410,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840kppB",
      "original_commit_id" : "46524a623e71ce4d7915a1657a71af3d767bb041",
      "original_line" : 11,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/init/common.h",
      "position" : null,
      "pull_request_review_id" : 985342789,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882022977/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-25T19:07:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882022977",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882023913"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882023913"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Do you mean something like `bool kernel::Context::SanityCheck()`? Doing that does mean we can't remove `compat/glibcxx_sanity.cpp` from libbitcoinkernel, but I'm fine with it either way so just lmk what you prefer.",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-25T19:08:32Z",
      "diff_hunk" : "@@ -8,11 +8,11 @@\n #ifndef BITCOIN_INIT_COMMON_H\n #define BITCOIN_INIT_COMMON_H\n \n+#include <kernel/init/common.h> // IWYU pragma: export\n+\n class ArgsManager;\n \n namespace init {\n-void SetGlobals();\n-void UnsetGlobals();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882023913",
      "id" : 882023913,
      "in_reply_to_id" : 880668218,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII5840kp3p",
      "original_commit_id" : "6d93c443a44f06296e8014c65bc70f44cc494fca",
      "original_line" : 15,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/init/common.h",
      "position" : 5,
      "pull_request_review_id" : 985344066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882023913/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-25T19:25:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882023913",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for all the feedback @ryanofsky and @theuni, I really appreciate them. I totally agree that in this case it was a great idea and easy to introduce the `kernel::Context` along with setting the globals, I actually discovered I had an old branch that did exactly this  \r\n\r\nAlthough in this case it was quite easy to make this change so we get the N I C E C O D E, it might be the case that in future PRs there will be instances where getting the N I C E C O D E will require very intrusive changes that doesn't serve the goal of Phase 1, which is just about decoupling modules. Should these cases arise, I hope we can decide to table them for later (although most of these cases are likely solved by introducing a `kernel::Context g_kernel`, but we'll do that when we get to it).",
      "created_at" : "2022-05-25T19:24:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1137763731",
      "id" : 1137763731,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585D0OWT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137763731/reactions"
      },
      "updated_at" : "2022-05-25T19:24:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137763731",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882101216"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882101216"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882023913\r\n\r\n> Do you mean something like `bool kernel::Context::SanityCheck()`? Doing that does mean we can't remove `compat/glibcxx_sanity.cpp` from libbitcoinkernel, but I'm fine with it either way so just lmk what you prefer.\r\n\r\nI'd agree it would be good to move sanity checks to the kernel assuming using `glibcxx_sanity.cpp` doesn't add costs or complications. (`glibcxx_sanity.cpp` is already part of libbitcoin_util so it seems fine at first glance). But it doesn't seem essential to add the checks if it is a problem.\r\n\r\nI do think if you add the checks, you should move them to a standalone function `bool SanityChecks(Context&)` in `src/kernel/checks.cpp` or similar. A `bool Context::SanityChecks()` method in `src/kernel/context.cpp` would make kernel code less modular, and risk sending Context object down a road where it becomes a disorganized `CWallet`-like object with methods that do many unrelated things.",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-25T20:46:19Z",
      "diff_hunk" : "@@ -8,11 +8,11 @@\n #ifndef BITCOIN_INIT_COMMON_H\n #define BITCOIN_INIT_COMMON_H\n \n+#include <kernel/init/common.h> // IWYU pragma: export\n+\n class ArgsManager;\n \n namespace init {\n-void SetGlobals();\n-void UnsetGlobals();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882101216",
      "id" : 882101216,
      "in_reply_to_id" : 880668218,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII5840k8vg",
      "original_commit_id" : "6d93c443a44f06296e8014c65bc70f44cc494fca",
      "original_line" : 15,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/init/common.h",
      "position" : 5,
      "pull_request_review_id" : 985450940,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882101216/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-25T21:01:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882101216",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882119648"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882119648"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882023913\r\n\r\n> Doing that does mean we can't remove `compat/glibcxx_sanity.cpp` from libbitcoinkernel\r\n\r\nLooking at current `SanityChecks()` function, maybe a bigger problem moving it into the kernel is that it is using\r\n`InitError` from  `ui_interface.cpp`. So might be worth postponing this or doing it separately if it would complicate this PR.\r\n",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-25T21:12:13Z",
      "diff_hunk" : "@@ -8,11 +8,11 @@\n #ifndef BITCOIN_INIT_COMMON_H\n #define BITCOIN_INIT_COMMON_H\n \n+#include <kernel/init/common.h> // IWYU pragma: export\n+\n class ArgsManager;\n \n namespace init {\n-void SetGlobals();\n-void UnsetGlobals();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882119648",
      "id" : 882119648,
      "in_reply_to_id" : 880668218,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII5840lBPg",
      "original_commit_id" : "6d93c443a44f06296e8014c65bc70f44cc494fca",
      "original_line" : 15,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/init/common.h",
      "position" : 5,
      "pull_request_review_id" : 985477439,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882119648/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-25T21:12:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882119648",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Push 9bc9309bd61f36ac68b41fe2328d2e3f505397e1 -> 9ac87854af62d271df2f383d8f2f798c70453448\r\n- Implemented: https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882101216\r\n\r\n-----\r\n\r\n@ryanofsky I know you don't like overly-split commits, happy to merge the last two if you wish.",
      "created_at" : "2022-05-25T22:27:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1137903217",
      "id" : 1137903217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585D0wZx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137903217/reactions"
      },
      "updated_at" : "2022-05-25T23:02:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137903217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882163656"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882163656"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed as of 9ac87854af62d271df2f383d8f2f798c70453448, feel free to reopen if still an issue.",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-25T22:28:32Z",
      "diff_hunk" : "@@ -8,11 +8,11 @@\n #ifndef BITCOIN_INIT_COMMON_H\n #define BITCOIN_INIT_COMMON_H\n \n+#include <kernel/init/common.h> // IWYU pragma: export\n+\n class ArgsManager;\n \n namespace init {\n-void SetGlobals();\n-void UnsetGlobals();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882163656",
      "id" : 882163656,
      "in_reply_to_id" : 880668218,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII5840lL_I",
      "original_commit_id" : "6d93c443a44f06296e8014c65bc70f44cc494fca",
      "original_line" : 15,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/init/common.h",
      "position" : 5,
      "pull_request_review_id" : 985535844,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882163656/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-25T22:28:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882163656",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882182549"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882182549"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nice, thanks.\r\n\r\nNow that we have the notion of a context, it would be possible to either:\r\n- Make it impossible to create an invalid context (sanity checks called at construction time)\r\n- Allow for \"invalid\" contexts, which api calls check for.\r\n\r\nBut those can be done much later when we start actually defining an api.",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-25T22:53:37Z",
      "diff_hunk" : "@@ -8,11 +8,11 @@\n #ifndef BITCOIN_INIT_COMMON_H\n #define BITCOIN_INIT_COMMON_H\n \n+#include <kernel/init/common.h> // IWYU pragma: export\n+\n class ArgsManager;\n \n namespace init {\n-void SetGlobals();\n-void UnsetGlobals();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882182549",
      "id" : 882182549,
      "in_reply_to_id" : 880668218,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII5840lQmV",
      "original_commit_id" : "6d93c443a44f06296e8014c65bc70f44cc494fca",
      "original_line" : 15,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/init/common.h",
      "position" : 5,
      "pull_request_review_id" : 985560361,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882182549/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-25T22:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882182549",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882189863"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882189863"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Though it's quite literal here, keeping with precedent, let's not reintroduce this language: https://github.com/bitcoin/bitcoin/pull/5727\r\n\r\nThe errors are already namespaced as part of the enum class anyway, how about just `SanityCheckError::ERROR_GLIBCXX` ?",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-25T23:10:13Z",
      "diff_hunk" : "@@ -5,14 +5,23 @@\n #ifndef BITCOIN_KERNEL_CHECKS_H\n #define BITCOIN_KERNEL_CHECKS_H\n \n+#include <optional>\n+\n namespace kernel {\n \n struct Context;\n \n+enum class SanityCheckError {\n+    ERROR_INITITALIZING_ECC,\n+    ERROR_GLIBCXX_INSANITY,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882189863",
      "id" : 882189863,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840lSYn",
      "original_commit_id" : "9ac87854af62d271df2f383d8f2f798c70453448",
      "original_line" : 16,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/kernel/checks.h",
      "position" : null,
      "pull_request_review_id" : 985569574,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882189863/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-25T23:10:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882189863",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed 9ac87854af62d271df2f383d8f2f798c70453448 -> 239501f5d0e1df8d36a62f10c4de4e9cdc913a9c\r\n- Addressed https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882189863",
      "created_at" : "2022-05-25T23:17:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1137939634",
      "id" : 1137939634,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585D05Sy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137939634/reactions"
      },
      "updated_at" : "2022-05-25T23:20:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137939634",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882192808"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882192808"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed as of 239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-25T23:17:26Z",
      "diff_hunk" : "@@ -5,14 +5,23 @@\n #ifndef BITCOIN_KERNEL_CHECKS_H\n #define BITCOIN_KERNEL_CHECKS_H\n \n+#include <optional>\n+\n namespace kernel {\n \n struct Context;\n \n+enum class SanityCheckError {\n+    ERROR_INITITALIZING_ECC,\n+    ERROR_GLIBCXX_INSANITY,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882192808",
      "id" : 882192808,
      "in_reply_to_id" : 882189863,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840lTGo",
      "original_commit_id" : "9ac87854af62d271df2f383d8f2f798c70453448",
      "original_line" : 16,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/kernel/checks.h",
      "position" : null,
      "pull_request_review_id" : 985573245,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882192808/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-25T23:20:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882192808",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883546672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883546672"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The commit message of the first commit `test: Use Set/UnsetGlobals in BasicTestingSetup` reads:\r\n\r\n> In a future PR, we will introduce a kernel::Context ...\r\n\r\nHowever, `kernel::Context` is introduced in this PR. Maybe `s/a future PR/the next commit/`.",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-27T11:55:48Z",
      "diff_hunk" : "@@ -0,0 +1,31 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CONTEXT_H\n+#define BITCOIN_KERNEL_CONTEXT_H\n+\n+#include <memory>\n+\n+class ECCVerifyHandle;\n+\n+namespace kernel {\n+//! Context struct holding global the kernel library's global state, and passed\n+//! to external libbitcoin_kernel functions which need access to this state. The\n+//! kernel libary API is a work in progress, so state organization and member\n+//! list will evolve over time.\n+//!\n+//! State stored directly in this struct should be simple. More complex state\n+//! should be stored to std::unique_ptr members pointing to opaque types.\n+struct Context {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883546672",
      "id" : 883546672,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII5840qdow",
      "original_commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "original_line" : 20,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/kernel/context.h",
      "position" : 20,
      "pull_request_review_id" : 987412670,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883546672/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T12:54:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883546672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883548414"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883548414"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n//! Context struct holding the kernel library's state, and passed\r\n```",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-27T11:58:23Z",
      "diff_hunk" : "@@ -0,0 +1,31 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CONTEXT_H\n+#define BITCOIN_KERNEL_CONTEXT_H\n+\n+#include <memory>\n+\n+class ECCVerifyHandle;\n+\n+namespace kernel {\n+//! Context struct holding global the kernel library's global state, and passed",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883548414",
      "id" : 883548414,
      "line" : 13,
      "node_id" : "PRRC_kwDOABII5840qeD-",
      "original_commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/context.h",
      "position" : 13,
      "pull_request_review_id" : 987412670,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883548414/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T12:54:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883548414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883553165"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883553165"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The variable of type `kernel::Context` is called `context` here and `kernel` inside `struct NodeContext`. `kernel_context`, `kernel_state` or `kernel_ctx` may be better.",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-27T12:05:58Z",
      "diff_hunk" : "@@ -49,7 +51,7 @@ int main(int argc, char* argv[])\n     SelectParams(CBaseChainParams::MAIN);\n     const CChainParams& chainparams = Params();\n \n-    init::SetGlobals(); // ECC_Start, etc.\n+    kernel::Context context{};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883553165",
      "id" : 883553165,
      "line" : 54,
      "node_id" : "PRRC_kwDOABII5840qfON",
      "original_commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "original_line" : 54,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 14,
      "pull_request_review_id" : 987412670,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883553165/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T12:54:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883553165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883580487"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883580487"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why bother introducing an argument if it is going to be unused?",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-27T12:45:30Z",
      "diff_hunk" : "@@ -0,0 +1,34 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <kernel/checks.h>\n+\n+#include <compat/sanity.h>\n+#include <key.h>\n+#include <random.h>\n+#include <util/time.h>\n+\n+namespace kernel {\n+\n+std::optional<SanityCheckError> SanityChecks(Context&)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883580487",
      "id" : 883580487,
      "line" : 14,
      "node_id" : "PRRC_kwDOABII5840ql5H",
      "original_commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "original_line" : 14,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/kernel/checks.cpp",
      "position" : 14,
      "pull_request_review_id" : 987412670,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883580487/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T12:54:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883580487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883582696"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883582696"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The word \"error\" is redundant in the enum name and in each enum value: \r\n\r\n```\r\nSanityCheckError::ERROR_ECC\r\n           ^^^^^  ^^^^^\r\n```\r\n\r\nMaybe strip the `ERROR_` prefix: `SanityCheckError::ECC`?",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-27T12:48:09Z",
      "diff_hunk" : "@@ -0,0 +1,28 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CHECKS_H\n+#define BITCOIN_KERNEL_CHECKS_H\n+\n+#include <optional>\n+\n+namespace kernel {\n+\n+struct Context;\n+\n+enum class SanityCheckError {\n+    ERROR_ECC,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883582696",
      "id" : 883582696,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII5840qmbo",
      "original_commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "original_line" : 15,
      "original_position" : 15,
      "original_start_line" : 14,
      "path" : "src/kernel/checks.h",
      "position" : 15,
      "pull_request_review_id" : 987412670,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883582696/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 14,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-27T12:54:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883582696",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883593347"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883593347"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Why bother introducing an argument if it is going to be unused?\r\n\r\nIt's because src/kernel/ is supposed to provide a library API, and the API should not have to change as we remove globals internally.",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-27T13:01:28Z",
      "diff_hunk" : "@@ -0,0 +1,34 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <kernel/checks.h>\n+\n+#include <compat/sanity.h>\n+#include <key.h>\n+#include <random.h>\n+#include <util/time.h>\n+\n+namespace kernel {\n+\n+std::optional<SanityCheckError> SanityChecks(Context&)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883593347",
      "id" : 883593347,
      "in_reply_to_id" : 883580487,
      "line" : 14,
      "node_id" : "PRRC_kwDOABII5840qpCD",
      "original_commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "original_line" : 14,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/kernel/checks.cpp",
      "position" : 14,
      "pull_request_review_id" : 987479392,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883593347/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T13:01:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883593347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883689055"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883689055"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Mmm, this whole function is a mess and doesn't really make much sense anymore.\r\n\r\nI really don't like the creation of the `kernel::Context` happening in here. That's not at all intuitive. I would much prefer to see the caller create and set it. Mind addressing that here?\r\n\r\nA few potential follow-ups for a later PR:\r\n- I'm hoping that the SanityChecks move into the `kernel::Context` creation as a next step.\r\n- I think it may make sense for `NodeContext` to take a `kernel::Context` in its constructor so that it always exists in the NodeContext. That might be much easier said than done though, I haven't looked deeply into it.\r\n- Those changes would leave only `LockDataDirectory` here, meaning that `AppInitSanityChecks` would just go away.",
      "commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "created_at" : "2022-05-27T14:49:40Z",
      "diff_hunk" : "@@ -1091,11 +1091,11 @@ static bool LockDataDirectory(bool probeOnly)\n     return true;\n }\n \n-bool AppInitSanityChecks()\n+bool AppInitSanityChecks(NodeContext& node)\n {\n     // ********************************************************* Step 4: sanity checks\n \n-    init::SetGlobals();\n+    node.kernel = std::make_unique<kernel::Context>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883689055",
      "id" : 883689055,
      "line" : 1100,
      "node_id" : "PRRC_kwDOABII5840rAZf",
      "original_commit_id" : "bdb0ce983eab5baa60e45efb52e161e70dbcf0b1",
      "original_line" : 1098,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 19,
      "pull_request_review_id" : 987619053,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883689055/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T14:52:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883689055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883897581"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883897581"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> I would much prefer to see the caller create and set it. Mind addressing that here?\r\n\r\nLet me know if you think 8d63a934cf4053851ba79d4a44326cd079bc8288 suffices. If so, I will squash it in.",
      "commit_id" : "8d63a934cf4053851ba79d4a44326cd079bc8288",
      "created_at" : "2022-05-27T18:42:45Z",
      "diff_hunk" : "@@ -1091,11 +1091,11 @@ static bool LockDataDirectory(bool probeOnly)\n     return true;\n }\n \n-bool AppInitSanityChecks()\n+bool AppInitSanityChecks(NodeContext& node)\n {\n     // ********************************************************* Step 4: sanity checks\n \n-    init::SetGlobals();\n+    node.kernel = std::make_unique<kernel::Context>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883897581",
      "id" : 883897581,
      "in_reply_to_id" : 883689055,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840rzTt",
      "original_commit_id" : "bdb0ce983eab5baa60e45efb52e161e70dbcf0b1",
      "original_line" : 1098,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 987958711,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883897581/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T18:45:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883897581",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883898546"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883898546"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Going to mark this as resolved, feel free to reopen if not!",
      "commit_id" : "8d63a934cf4053851ba79d4a44326cd079bc8288",
      "created_at" : "2022-05-27T18:44:29Z",
      "diff_hunk" : "@@ -0,0 +1,34 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <kernel/checks.h>\n+\n+#include <compat/sanity.h>\n+#include <key.h>\n+#include <random.h>\n+#include <util/time.h>\n+\n+namespace kernel {\n+\n+std::optional<SanityCheckError> SanityChecks(Context&)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883898546",
      "id" : 883898546,
      "in_reply_to_id" : 883580487,
      "line" : 14,
      "node_id" : "PRRC_kwDOABII5840rziy",
      "original_commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "original_line" : 14,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/kernel/checks.cpp",
      "position" : 14,
      "pull_request_review_id" : 987960114,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883898546/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T18:44:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883898546",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883898821"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883898821"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed in 319031b9798f1ed8f0a06e679284be26e0b42c92",
      "commit_id" : "8d63a934cf4053851ba79d4a44326cd079bc8288",
      "created_at" : "2022-05-27T18:44:56Z",
      "diff_hunk" : "@@ -49,7 +51,7 @@ int main(int argc, char* argv[])\n     SelectParams(CBaseChainParams::MAIN);\n     const CChainParams& chainparams = Params();\n \n-    init::SetGlobals(); // ECC_Start, etc.\n+    kernel::Context context{};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883898821",
      "id" : 883898821,
      "in_reply_to_id" : 883553165,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840rznF",
      "original_commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "original_line" : 54,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 987960474,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883898821/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T18:44:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883898821",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883898955"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883898955"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed in cae459cd9aa0da220da92e11b3a645b9980cdaf5",
      "commit_id" : "8d63a934cf4053851ba79d4a44326cd079bc8288",
      "created_at" : "2022-05-27T18:45:10Z",
      "diff_hunk" : "@@ -0,0 +1,31 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CONTEXT_H\n+#define BITCOIN_KERNEL_CONTEXT_H\n+\n+#include <memory>\n+\n+class ECCVerifyHandle;\n+\n+namespace kernel {\n+//! Context struct holding global the kernel library's global state, and passed",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883898955",
      "id" : 883898955,
      "in_reply_to_id" : 883548414,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840rzpL",
      "original_commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/context.h",
      "position" : null,
      "pull_request_review_id" : 987960657,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883898955/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T18:45:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883898955",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883899142"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883899142"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed in 4fa8d0b11aefa06f548013a35bbcfa9fdbed81ff",
      "commit_id" : "8d63a934cf4053851ba79d4a44326cd079bc8288",
      "created_at" : "2022-05-27T18:45:28Z",
      "diff_hunk" : "@@ -0,0 +1,31 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CONTEXT_H\n+#define BITCOIN_KERNEL_CONTEXT_H\n+\n+#include <memory>\n+\n+class ECCVerifyHandle;\n+\n+namespace kernel {\n+//! Context struct holding global the kernel library's global state, and passed\n+//! to external libbitcoin_kernel functions which need access to this state. The\n+//! kernel libary API is a work in progress, so state organization and member\n+//! list will evolve over time.\n+//!\n+//! State stored directly in this struct should be simple. More complex state\n+//! should be stored to std::unique_ptr members pointing to opaque types.\n+struct Context {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883899142",
      "id" : 883899142,
      "in_reply_to_id" : 883546672,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII5840rzsG",
      "original_commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "original_line" : 20,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/kernel/context.h",
      "position" : 20,
      "pull_request_review_id" : 987960953,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883899142/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T18:45:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883899142",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883899885"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883899885"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> A few potential follow-ups for a later PR:\r\n> ...\r\n\r\nI will open an issue after this PR is merged so we don't lose track of these!",
      "commit_id" : "8d63a934cf4053851ba79d4a44326cd079bc8288",
      "created_at" : "2022-05-27T18:46:40Z",
      "diff_hunk" : "@@ -1091,11 +1091,11 @@ static bool LockDataDirectory(bool probeOnly)\n     return true;\n }\n \n-bool AppInitSanityChecks()\n+bool AppInitSanityChecks(NodeContext& node)\n {\n     // ********************************************************* Step 4: sanity checks\n \n-    init::SetGlobals();\n+    node.kernel = std::make_unique<kernel::Context>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883899885",
      "id" : 883899885,
      "in_reply_to_id" : 883689055,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840rz3t",
      "original_commit_id" : "bdb0ce983eab5baa60e45efb52e161e70dbcf0b1",
      "original_line" : 1098,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 987961947,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883899885/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T18:46:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883899885",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed cf4c2043f592afe1d175f4c54e9728da38c0b184 -> 8d63a934cf4053851ba79d4a44326cd079bc8288\r\n- Addressed various review comments",
      "created_at" : "2022-05-27T18:47:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1139937992",
      "id" : 1139937992,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585D8hLI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139937992/reactions"
      },
      "updated_at" : "2022-05-27T18:47:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139937992",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883957341"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883957341"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah yes, this is much more straightforward imo. +1 for squashing that in.",
      "commit_id" : "ded2ef302cd29d3dc88a847f0fe8c947b3a6044a",
      "created_at" : "2022-05-27T20:21:29Z",
      "diff_hunk" : "@@ -1091,11 +1091,11 @@ static bool LockDataDirectory(bool probeOnly)\n     return true;\n }\n \n-bool AppInitSanityChecks()\n+bool AppInitSanityChecks(NodeContext& node)\n {\n     // ********************************************************* Step 4: sanity checks\n \n-    init::SetGlobals();\n+    node.kernel = std::make_unique<kernel::Context>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883957341",
      "id" : 883957341,
      "in_reply_to_id" : 883689055,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840sB5d",
      "original_commit_id" : "bdb0ce983eab5baa60e45efb52e161e70dbcf0b1",
      "original_line" : 1098,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 988074788,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883957341/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T20:21:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/883957341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed 8d63a934cf4053851ba79d4a44326cd079bc8288 -> ded2ef302cd29d3dc88a847f0fe8c947b3a6044a\r\n- Squashed in 8d63a934cf4053851ba79d4a44326cd079bc8288",
      "created_at" : "2022-05-27T21:01:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1140037184",
      "id" : 1140037184,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585D85ZA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140037184/reactions"
      },
      "updated_at" : "2022-05-27T21:01:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140037184",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r884001856"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884001856"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This also needs a `kernel::SanityChecks(kernel_context)`, no? Another argument for making it part of context creation.\r\n\r\n(It was also missing before, but presumably because it was still tangled up with the ui).",
      "commit_id" : "ded2ef302cd29d3dc88a847f0fe8c947b3a6044a",
      "created_at" : "2022-05-27T21:57:21Z",
      "diff_hunk" : "@@ -49,7 +51,7 @@ int main(int argc, char* argv[])\n     SelectParams(CBaseChainParams::MAIN);\n     const CChainParams& chainparams = Params();\n \n-    init::SetGlobals(); // ECC_Start, etc.\n+    kernel::Context kernel_context{};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r884001856",
      "id" : 884001856,
      "line" : 54,
      "node_id" : "PRRC_kwDOABII5840sMxA",
      "original_commit_id" : "d0cafa206e731d1c76e49c8e00c237d4d8958d3b",
      "original_line" : 54,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 14,
      "pull_request_review_id" : 988178091,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884001856/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T21:57:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884001856",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r884033919"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884033919"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Btw, I'm loving how this just untangled itself. Great suggestion from @ryanofsky [here](https://github.com/bitcoin/bitcoin/pull/25065#discussion_r882101216)!",
      "commit_id" : "ded2ef302cd29d3dc88a847f0fe8c947b3a6044a",
      "created_at" : "2022-05-27T23:52:19Z",
      "diff_hunk" : "@@ -49,7 +51,7 @@ int main(int argc, char* argv[])\n     SelectParams(CBaseChainParams::MAIN);\n     const CChainParams& chainparams = Params();\n \n-    init::SetGlobals(); // ECC_Start, etc.\n+    kernel::Context kernel_context{};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r884033919",
      "id" : 884033919,
      "in_reply_to_id" : 884001856,
      "line" : 54,
      "node_id" : "PRRC_kwDOABII5840sUl_",
      "original_commit_id" : "d0cafa206e731d1c76e49c8e00c237d4d8958d3b",
      "original_line" : 54,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 14,
      "pull_request_review_id" : 988238953,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884033919/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-27T23:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884033919",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r884553405"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884553405"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Now it is called `kernel_context` here and `kernel` elsewhere. Not a big deal, but I think it is better to be consistent if there are no other reasons for the naming.",
      "commit_id" : "ded2ef302cd29d3dc88a847f0fe8c947b3a6044a",
      "created_at" : "2022-05-30T08:22:54Z",
      "diff_hunk" : "@@ -49,7 +51,7 @@ int main(int argc, char* argv[])\n     SelectParams(CBaseChainParams::MAIN);\n     const CChainParams& chainparams = Params();\n \n-    init::SetGlobals(); // ECC_Start, etc.\n+    kernel::Context context{};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r884553405",
      "id" : 884553405,
      "in_reply_to_id" : 883553165,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840uTa9",
      "original_commit_id" : "239501f5d0e1df8d36a62f10c4de4e9cdc913a9c",
      "original_line" : 54,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 988968165,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884553405/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-30T08:22:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/884553405",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\n This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-05-30T09:10:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1140903283",
      "id" : 1140903283,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585EAM1z",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140903283/reactions"
      },
      "updated_at" : "2022-05-30T09:10:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140903283",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@vasild Your comment inspired me to make this, I think I'm going to use it in every `libbitcoinkernel` PR from now on!\r\n\r\n![kernel-disclaimer](https://user-images.githubusercontent.com/3445290/171222306-274faa75-87ca-4a85-a938-ff05bc129940.png)\r\n\r\n",
      "created_at" : "2022-05-31T16:17:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1142340699",
      "id" : 1142340699,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585EFrxb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 1,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142340699/reactions"
      },
      "updated_at" : "2022-05-31T16:17:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142340699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed ded2ef302cd29d3dc88a847f0fe8c947b3a6044a -> fa2ee7b12c0c15be8e9807444443b5bd2c91c3e5\r\n- Rebased over merge of #25233\r\n- Addressed https://github.com/bitcoin/bitcoin/pull/25065#discussion_r884001856\r\n- Fixed some `#include`s in `src/bitcoin-chainstate.cpp`",
      "created_at" : "2022-05-31T19:08:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1142542151",
      "id" : 1142542151,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585EGc9H",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142542151/reactions"
      },
      "updated_at" : "2022-05-31T19:08:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142542151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@vasild \r\n\r\n> I would expect the kernel API to be defined in `src/kernel/*.h` inside `namespace kernel` and those files to not define anything else. `src/kernel/chainstatemanager_opts.h` does not fit that pattern - it defines `ChainstateManagerOpts` outside of the `kernel` namespace. So, is `ChainstateManagerOpts` part of the kernel API? If yes, then it should be inside `namespace kernel`, if not then it should not be defined in `src/kernel/*.h`. `ChainstateManagerOpts` is only used in `validation.h`.\r\n\r\nSorry about my cheeky post above   To respond to your comment: yes it should eventually be in `namespace kernel`, so should most of `validation.cpp`. Haven't done it yet because it's not required by any of the \"PRs in the main thrust of libbitcoinkernel\".",
      "created_at" : "2022-05-31T19:15:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1142548043",
      "id" : 1142548043,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585EGeZL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142548043/reactions"
      },
      "updated_at" : "2022-05-31T19:15:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142548043",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r886046104"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886046104"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed as of: fa2ee7b12c0c15be8e9807444443b5bd2c91c3e5",
      "commit_id" : "fa2ee7b12c0c15be8e9807444443b5bd2c91c3e5",
      "created_at" : "2022-05-31T19:20:37Z",
      "diff_hunk" : "@@ -49,7 +51,7 @@ int main(int argc, char* argv[])\n     SelectParams(CBaseChainParams::MAIN);\n     const CChainParams& chainparams = Params();\n \n-    init::SetGlobals(); // ECC_Start, etc.\n+    kernel::Context kernel_context{};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r886046104",
      "id" : 886046104,
      "in_reply_to_id" : 884001856,
      "line" : 55,
      "node_id" : "PRRC_kwDOABII5840z_2Y",
      "original_commit_id" : "d0cafa206e731d1c76e49c8e00c237d4d8958d3b",
      "original_line" : 55,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 27,
      "pull_request_review_id" : 991041493,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886046104/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-31T19:20:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886046104",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r886809654"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886809654"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This should be const ref I think.",
      "commit_id" : "fa2ee7b12c0c15be8e9807444443b5bd2c91c3e5",
      "created_at" : "2022-06-01T13:30:20Z",
      "diff_hunk" : "@@ -1089,13 +1091,23 @@ static bool LockDataDirectory(bool probeOnly)\n     return true;\n }\n \n-bool AppInitSanityChecks()\n+bool AppInitSanityChecks(kernel::Context& kernel)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r886809654",
      "id" : 886809654,
      "line" : 1094,
      "node_id" : "PRRC_kwDOABII584026Q2",
      "original_commit_id" : "fa2ee7b12c0c15be8e9807444443b5bd2c91c3e5",
      "original_line" : 1094,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 23,
      "pull_request_review_id" : 991976064,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886809654/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-01T13:39:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886809654",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r886810741"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886810741"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Also const ref?",
      "commit_id" : "fa2ee7b12c0c15be8e9807444443b5bd2c91c3e5",
      "created_at" : "2022-06-01T13:31:22Z",
      "diff_hunk" : "@@ -0,0 +1,27 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CHECKS_H\n+#define BITCOIN_KERNEL_CHECKS_H\n+\n+#include <optional>\n+\n+namespace kernel {\n+\n+struct Context;\n+\n+enum class SanityCheckError {\n+    ERROR_ECC,\n+    ERROR_RANDOM,\n+    ERROR_CHRONO,\n+};\n+\n+/**\n+ *  Ensure a usable environment with all necessary library support.\n+ */\n+std::optional<SanityCheckError> SanityChecks(Context&);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r886810741",
      "id" : 886810741,
      "line" : 23,
      "node_id" : "PRRC_kwDOABII584026h1",
      "original_commit_id" : "fa2ee7b12c0c15be8e9807444443b5bd2c91c3e5",
      "original_line" : 23,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/kernel/checks.h",
      "position" : 23,
      "pull_request_review_id" : 991976064,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886810741/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-01T13:39:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886810741",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r886815297"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886815297"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Heh, this has gotten unwieldy and hard to read imo.\r\n\r\nHow about (untested)\r\n```c++\r\nif (!AppInitBasicSetup(gArgs)) return false;\r\nif (!AppInitParameterInteraction(gArgs, /*use_syscall_sandbox=*/false)) return false;\r\n\r\nm_context->kernel = std::make_unique<kernel::Context>();\r\nif (!AppInitSanityChecks(*m_context->kernel)) return false;\r\nif (!AppInitLockDataDirectory()) return false;\r\nif (!AppInitInterfaces(*m_context)) return false;\r\nreturn true;\r\n```",
      "commit_id" : "fa2ee7b12c0c15be8e9807444443b5bd2c91c3e5",
      "created_at" : "2022-06-01T13:35:25Z",
      "diff_hunk" : "@@ -90,8 +90,14 @@ class NodeImpl : public Node\n     uint32_t getLogCategories() override { return LogInstance().GetCategoryMask(); }\n     bool baseInitialize() override\n     {\n-        return AppInitBasicSetup(gArgs) && AppInitParameterInteraction(gArgs, /*use_syscall_sandbox=*/false) && AppInitSanityChecks() &&\n-               AppInitLockDataDirectory() && AppInitInterfaces(*m_context);\n+        return AppInitBasicSetup(gArgs) &&",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r886815297",
      "id" : 886815297,
      "line" : 93,
      "node_id" : "PRRC_kwDOABII584027pB",
      "original_commit_id" : "fa2ee7b12c0c15be8e9807444443b5bd2c91c3e5",
      "original_line" : 93,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/node/interfaces.cpp",
      "position" : 6,
      "pull_request_review_id" : 991976064,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886815297/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-01T13:39:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886815297",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r887954316"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887954316"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Hmm, it is strange to sanity-check a default constructed object:\r\n\r\n```cpp\r\nContext foo;\r\nassert(sanity_check(foo));\r\n```\r\n\r\nShouldn't a default constructor create a sane object? If sometimes it can produce insane object (based on what? it takes no arguments) then it is better to throw from the constructor instead of assert()ing immediately after object creation.",
      "commit_id" : "fa2ee7b12c0c15be8e9807444443b5bd2c91c3e5",
      "created_at" : "2022-06-02T13:30:02Z",
      "diff_hunk" : "@@ -49,7 +51,7 @@ int main(int argc, char* argv[])\n     SelectParams(CBaseChainParams::MAIN);\n     const CChainParams& chainparams = Params();\n \n-    init::SetGlobals(); // ECC_Start, etc.\n+    kernel::Context kernel_context{};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r887954316",
      "id" : 887954316,
      "in_reply_to_id" : 884001856,
      "line" : 55,
      "node_id" : "PRRC_kwDOABII58407RuM",
      "original_commit_id" : "d0cafa206e731d1c76e49c8e00c237d4d8958d3b",
      "original_line" : 55,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 27,
      "pull_request_review_id" : 993544182,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887954316/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-02T13:30:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887954316",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r887957547"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887957547"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I agree, it would be weird for a sanity-check function to modify the object it is checking.",
      "commit_id" : "fa2ee7b12c0c15be8e9807444443b5bd2c91c3e5",
      "created_at" : "2022-06-02T13:33:02Z",
      "diff_hunk" : "@@ -0,0 +1,27 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CHECKS_H\n+#define BITCOIN_KERNEL_CHECKS_H\n+\n+#include <optional>\n+\n+namespace kernel {\n+\n+struct Context;\n+\n+enum class SanityCheckError {\n+    ERROR_ECC,\n+    ERROR_RANDOM,\n+    ERROR_CHRONO,\n+};\n+\n+/**\n+ *  Ensure a usable environment with all necessary library support.\n+ */\n+std::optional<SanityCheckError> SanityChecks(Context&);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r887957547",
      "id" : 887957547,
      "in_reply_to_id" : 886810741,
      "line" : 23,
      "node_id" : "PRRC_kwDOABII58407Sgr",
      "original_commit_id" : "fa2ee7b12c0c15be8e9807444443b5bd2c91c3e5",
      "original_line" : 23,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/kernel/checks.h",
      "position" : 23,
      "pull_request_review_id" : 993548754,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887957547/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-02T13:33:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887957547",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed fa2ee7b12c0c15be8e9807444443b5bd2c91c3e5 -> a8cdeca079a362d2a021aaf7387fbb75a15ebc18\r\n- Addressed\r\n  - https://github.com/bitcoin/bitcoin/pull/25065#discussion_r886809654\r\n  - https://github.com/bitcoin/bitcoin/pull/25065#discussion_r886810741\r\n  - https://github.com/bitcoin/bitcoin/pull/25065#discussion_r886815297",
      "created_at" : "2022-06-02T15:49:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1145018830",
      "id" : 1145018830,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585EP5nO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1145018830/reactions"
      },
      "updated_at" : "2022-06-02T15:49:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1145018830",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@vasild \r\n\r\n> Ok, why not get it right from the first time, since it is trivial to do so:\r\n\r\nYeah sorry I should have done that in the first place. But it's unrelated to the current PR right now so we'll just do it later. I've added it as a TODO to the [umbrella issue](https://github.com/bitcoin/bitcoin/issues/24303)!",
      "created_at" : "2022-06-02T15:51:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1145021509",
      "id" : 1145021509,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585EP6RF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1145021509/reactions"
      },
      "updated_at" : "2022-06-02T15:52:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1145021509",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r888123820"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888123820"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```c++\r\ndefault:\r\n   assert(0)\r\n```\r\n?",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-02T15:59:23Z",
      "diff_hunk" : "@@ -1089,13 +1091,23 @@ static bool LockDataDirectory(bool probeOnly)\n     return true;\n }\n \n-bool AppInitSanityChecks()\n+bool AppInitSanityChecks(const kernel::Context& kernel)\n {\n     // ********************************************************* Step 4: sanity checks\n-\n-    init::SetGlobals();\n-\n-    if (!init::SanityChecks()) {\n+    auto maybe_error = kernel::SanityChecks(kernel);\n+\n+    if (maybe_error.has_value()) {\n+        switch (maybe_error.value()) {\n+        case kernel::SanityCheckError::ERROR_ECC:\n+            InitError(Untranslated(\"Elliptic curve cryptography sanity check failure. Aborting.\"));\n+            break;\n+        case kernel::SanityCheckError::ERROR_RANDOM:\n+            InitError(Untranslated(\"OS cryptographic RNG sanity check failure. Aborting.\"));\n+            break;\n+        case kernel::SanityCheckError::ERROR_CHRONO:\n+            InitError(Untranslated(\"Clock epoch mismatch. Aborting.\"));\n+            break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r888123820",
      "id" : 888123820,
      "line" : 1109,
      "node_id" : "PRRC_kwDOABII584077Gs",
      "original_commit_id" : "a8cdeca079a362d2a021aaf7387fbb75a15ebc18",
      "original_line" : 1109,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 38,
      "pull_request_review_id" : 993788279,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888123820/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-02T15:59:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888123820",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed a8cdeca079a362d2a021aaf7387fbb75a15ebc18 -> d87784ac87364fc977bbf9769c8bdb72dea8cbf9\r\n- Added comment about missing default case (thanks Jeremy!)",
      "created_at" : "2022-06-02T16:24:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#issuecomment-1145063132",
      "id" : 1145063132,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25065",
      "node_id" : "IC_kwDOABII585EQEbc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1145063132/reactions"
      },
      "updated_at" : "2022-06-02T16:24:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1145063132",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r888153456"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888153456"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed in d87784ac87364fc977bbf9769c8bdb72dea8cbf9, feel free to reopen this convo if not resolved!",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-02T16:25:02Z",
      "diff_hunk" : "@@ -1089,13 +1091,23 @@ static bool LockDataDirectory(bool probeOnly)\n     return true;\n }\n \n-bool AppInitSanityChecks()\n+bool AppInitSanityChecks(const kernel::Context& kernel)\n {\n     // ********************************************************* Step 4: sanity checks\n-\n-    init::SetGlobals();\n-\n-    if (!init::SanityChecks()) {\n+    auto maybe_error = kernel::SanityChecks(kernel);\n+\n+    if (maybe_error.has_value()) {\n+        switch (maybe_error.value()) {\n+        case kernel::SanityCheckError::ERROR_ECC:\n+            InitError(Untranslated(\"Elliptic curve cryptography sanity check failure. Aborting.\"));\n+            break;\n+        case kernel::SanityCheckError::ERROR_RANDOM:\n+            InitError(Untranslated(\"OS cryptographic RNG sanity check failure. Aborting.\"));\n+            break;\n+        case kernel::SanityCheckError::ERROR_CHRONO:\n+            InitError(Untranslated(\"Clock epoch mismatch. Aborting.\"));\n+            break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r888153456",
      "id" : 888153456,
      "in_reply_to_id" : 888123820,
      "line" : 1109,
      "node_id" : "PRRC_kwDOABII58408CVw",
      "original_commit_id" : "a8cdeca079a362d2a021aaf7387fbb75a15ebc18",
      "original_line" : 1109,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 38,
      "pull_request_review_id" : 993829541,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888153456/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-02T16:25:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888153456",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r888412210"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888412210"
         }
      },
      "author_association" : "MEMBER",
      "body" : "FWIW, gcc/clang have built-ins (`__builtin_unreachable`) for [expressing this explicitly](https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html).  \r\n\r\nLLVM even has a [macro for it](https://github.com/llvm/llvm-project/blob/main/llvm/include/llvm/Support/ErrorHandling.h#L143), and specifies the use of `llvm_unreachable` in its [coding standard](https://llvm.org/docs/CodingStandards.html).\r\n\r\nMaybe we should borrow the idea and add a similar macro. Not in this PR though, of course :)\r\n\r\nEdit: explanation of what `llvm_unreachable` does: \r\n\r\n> \"When assertions are enabled, this will print the message if its ever reached and then exit the program. When assertions are disabled (i.e. in release builds), llvm_unreachable becomes a hint to compilers to skip generating code for this branch. If the compiler does not support this, it will fall back to the abort implementation.\"",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-02T21:04:26Z",
      "diff_hunk" : "@@ -1089,13 +1091,23 @@ static bool LockDataDirectory(bool probeOnly)\n     return true;\n }\n \n-bool AppInitSanityChecks()\n+bool AppInitSanityChecks(const kernel::Context& kernel)\n {\n     // ********************************************************* Step 4: sanity checks\n-\n-    init::SetGlobals();\n-\n-    if (!init::SanityChecks()) {\n+    auto maybe_error = kernel::SanityChecks(kernel);\n+\n+    if (maybe_error.has_value()) {\n+        switch (maybe_error.value()) {\n+        case kernel::SanityCheckError::ERROR_ECC:\n+            InitError(Untranslated(\"Elliptic curve cryptography sanity check failure. Aborting.\"));\n+            break;\n+        case kernel::SanityCheckError::ERROR_RANDOM:\n+            InitError(Untranslated(\"OS cryptographic RNG sanity check failure. Aborting.\"));\n+            break;\n+        case kernel::SanityCheckError::ERROR_CHRONO:\n+            InitError(Untranslated(\"Clock epoch mismatch. Aborting.\"));\n+            break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r888412210",
      "id" : 888412210,
      "in_reply_to_id" : 888123820,
      "line" : 1109,
      "node_id" : "PRRC_kwDOABII58409Bgy",
      "original_commit_id" : "a8cdeca079a362d2a021aaf7387fbb75a15ebc18",
      "original_line" : 1109,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 38,
      "pull_request_review_id" : 994191442,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888412210/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-02T21:06:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888412210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r888417347"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888417347"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Completely agree it's wonky, I had a similar complaint here: https://github.com/bitcoin/bitcoin/pull/25065#discussion_r883689055\r\n\r\nI think it's fine as-is for now though, as context creation will definitely be changing in subsequent PRs.",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-02T21:11:35Z",
      "diff_hunk" : "@@ -49,7 +51,7 @@ int main(int argc, char* argv[])\n     SelectParams(CBaseChainParams::MAIN);\n     const CChainParams& chainparams = Params();\n \n-    init::SetGlobals(); // ECC_Start, etc.\n+    kernel::Context kernel_context{};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r888417347",
      "id" : 888417347,
      "in_reply_to_id" : 884001856,
      "line" : 55,
      "node_id" : "PRRC_kwDOABII58409CxD",
      "original_commit_id" : "d0cafa206e731d1c76e49c8e00c237d4d8958d3b",
      "original_line" : 55,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 27,
      "pull_request_review_id" : 994198183,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888417347/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-02T21:11:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888417347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r888430365"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888430365"
         }
      },
      "author_association" : "MEMBER",
      "body" : "A foot-gun-proof way to do this would be to inherit from a class that holds a node::NodeContext.",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-02T21:32:02Z",
      "diff_hunk" : "@@ -81,7 +81,7 @@ static constexpr CAmount CENT{1000000};\n  * This just configures logging, data dir and chain parameters.\n  */\n struct BasicTestingSetup {\n-    node::NodeContext m_node;\n+    node::NodeContext m_node; // keep as first member to be destructed last",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r888430365",
      "id" : 888430365,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII58409F8d",
      "original_commit_id" : "fed085a1a4cd2787202752b6a0d98e42dce97f09",
      "original_line" : 84,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.h",
      "position" : 5,
      "pull_request_review_id" : 994215419,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888430365/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-02T21:45:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888430365",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r888654563"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888654563"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Interesting, though I think we'd always want to abort, even in release builds. For example, it would be UB to skip `return` in a non-void function, no? This is also what the docs say:\r\n\r\n> llvm_unreachable() becomes an optimizer hint that the current location is not supposed to be reachable: the hint turns such code path into undefined behavior.\r\n\r\nhttps://github.com/llvm/llvm-project/blob/main/llvm/include/llvm/Support/ErrorHandling.h#L131\r\n\r\nFor reference, in https://github.com/bitcoin/bitcoin/pull/24812#discussion_r851597471 I argued that `assert(0)` is good enough for us. Also, I don't think there is a compiler that doesn't understand `assert(0)`?",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-03T06:37:44Z",
      "diff_hunk" : "@@ -1089,13 +1091,23 @@ static bool LockDataDirectory(bool probeOnly)\n     return true;\n }\n \n-bool AppInitSanityChecks()\n+bool AppInitSanityChecks(const kernel::Context& kernel)\n {\n     // ********************************************************* Step 4: sanity checks\n-\n-    init::SetGlobals();\n-\n-    if (!init::SanityChecks()) {\n+    auto maybe_error = kernel::SanityChecks(kernel);\n+\n+    if (maybe_error.has_value()) {\n+        switch (maybe_error.value()) {\n+        case kernel::SanityCheckError::ERROR_ECC:\n+            InitError(Untranslated(\"Elliptic curve cryptography sanity check failure. Aborting.\"));\n+            break;\n+        case kernel::SanityCheckError::ERROR_RANDOM:\n+            InitError(Untranslated(\"OS cryptographic RNG sanity check failure. Aborting.\"));\n+            break;\n+        case kernel::SanityCheckError::ERROR_CHRONO:\n+            InitError(Untranslated(\"Clock epoch mismatch. Aborting.\"));\n+            break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r888654563",
      "id" : 888654563,
      "in_reply_to_id" : 888123820,
      "line" : 1109,
      "node_id" : "PRRC_kwDOABII584098rj",
      "original_commit_id" : "a8cdeca079a362d2a021aaf7387fbb75a15ebc18",
      "original_line" : 1109,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 38,
      "pull_request_review_id" : 994502463,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888654563/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-03T06:37:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/888654563",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889022797"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889022797"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The only reason I suggested is because imo it's nice to be able to state \"shouldn't be able to get here\" differently than \"crash if ever here\", as not stating the former clearly leads to (good) questions in review like this one from @JeremyRubin.\r\n\r\nEven if `bitcoin_unreachable()` is just a macro defined as `assert(0)`, I think it'd be an improvement over nothing.",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-03T14:55:46Z",
      "diff_hunk" : "@@ -1089,13 +1091,23 @@ static bool LockDataDirectory(bool probeOnly)\n     return true;\n }\n \n-bool AppInitSanityChecks()\n+bool AppInitSanityChecks(const kernel::Context& kernel)\n {\n     // ********************************************************* Step 4: sanity checks\n-\n-    init::SetGlobals();\n-\n-    if (!init::SanityChecks()) {\n+    auto maybe_error = kernel::SanityChecks(kernel);\n+\n+    if (maybe_error.has_value()) {\n+        switch (maybe_error.value()) {\n+        case kernel::SanityCheckError::ERROR_ECC:\n+            InitError(Untranslated(\"Elliptic curve cryptography sanity check failure. Aborting.\"));\n+            break;\n+        case kernel::SanityCheckError::ERROR_RANDOM:\n+            InitError(Untranslated(\"OS cryptographic RNG sanity check failure. Aborting.\"));\n+            break;\n+        case kernel::SanityCheckError::ERROR_CHRONO:\n+            InitError(Untranslated(\"Clock epoch mismatch. Aborting.\"));\n+            break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889022797",
      "id" : 889022797,
      "in_reply_to_id" : 888123820,
      "line" : 1109,
      "node_id" : "PRRC_kwDOABII5840_WlN",
      "original_commit_id" : "a8cdeca079a362d2a021aaf7387fbb75a15ebc18",
      "original_line" : 1109,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 38,
      "pull_request_review_id" : 995028427,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889022797/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-03T14:55:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889022797",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889177391"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889177391"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Something like this?\r\n\r\n```diff\r\ndiff --git a/src/node/context.h b/src/node/context.h\r\nindex 31be308787..7ed1292180 100644\r\n--- a/src/node/context.h\r\n+++ b/src/node/context.h\r\n@@ -29,6 +29,16 @@ class Init;\r\n class WalletLoader;\r\n } // namespace interfaces\r\n \r\n+namespace {\r\n+/**\r\n+ * Dummy NodeContext to ensure that kernel::Context is always destructed last.\r\n+ */\r\n+struct BaseNodeContext {\r\n+    //! libbitcoin_kernel context\r\n+    std::unique_ptr<kernel::Context> kernel;\r\n+};\r\n+}\r\n+\r\n namespace node {\r\n //! NodeContext struct containing references to chain state and connection\r\n //! state.\r\n@@ -40,9 +50,7 @@ namespace node {\r\n //! and make code more modular and testable. The struct isn't intended to have\r\n //! any member functions. It should just be a collection of references that can\r\n //! be used without pulling in unwanted dependencies or functionality.\r\n-struct NodeContext {\r\n-    //! libbitcoin_kernel context\r\n-    std::unique_ptr<kernel::Context> kernel;\r\n+struct NodeContext : BaseNodeContext {\r\n     //! Init interface for initializing current process and connecting to other processes.\r\n     interfaces::Init* init{nullptr};\r\n     std::unique_ptr<AddrMan> addrman;\r\ndiff --git a/src/test/util/setup_common.h b/src/test/util/setup_common.h\r\nindex 5c31cfc22b..87d5d4a24b 100644\r\n--- a/src/test/util/setup_common.h\r\n+++ b/src/test/util/setup_common.h\r\n@@ -77,12 +77,20 @@ static inline bool InsecureRandBool() { return g_insecure_rand_ctx.randbool(); }\r\n \r\n static constexpr CAmount CENT{1000000};\r\n \r\n+namespace {\r\n+/**\r\n+ * Dummy TestingSetup to ensure that node::NodeContext (and by extension\r\n+ * kernel::Context) is always destructed last.\r\n+ */\r\n+struct BaseTestingSetup {\r\n+    node::NodeContext m_node;\r\n+};\r\n+}\r\n+\r\n /** Basic testing setup.\r\n  * This just configures logging, data dir and chain parameters.\r\n  */\r\n-struct BasicTestingSetup {\r\n-    node::NodeContext m_node; // keep as first member to be destructed last\r\n-\r\n+struct BasicTestingSetup : BaseTestingSetup {\r\n     explicit BasicTestingSetup(const std::string& chainName = CBaseChainParams::MAIN, const std::vector<const char*>& extra_args = {});\r\n     ~BasicTestingSetup();\r\n \r\n```",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-03T17:17:59Z",
      "diff_hunk" : "@@ -81,7 +81,7 @@ static constexpr CAmount CENT{1000000};\n  * This just configures logging, data dir and chain parameters.\n  */\n struct BasicTestingSetup {\n-    node::NodeContext m_node;\n+    node::NodeContext m_node; // keep as first member to be destructed last",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889177391",
      "id" : 889177391,
      "in_reply_to_id" : 888430365,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII5840_8Uv",
      "original_commit_id" : "fed085a1a4cd2787202752b6a0d98e42dce97f09",
      "original_line" : 84,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.h",
      "position" : 5,
      "pull_request_review_id" : 995239049,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889177391/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-03T17:18:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889177391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889203065"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889203065"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yep, pretty much!\r\n\r\nSorry, I didn't mean to imply that needed to be done as part of this PR though. It might be worth taking a look at doing it generically with a template, which could help communicate the intent more clearly:\r\n```c++\r\nBasicTestingSetup : MustDestructLast<node::NodeContext>\r\n```\r\n\r\nBut maybe that's over-engineering, idk.",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-03T17:53:21Z",
      "diff_hunk" : "@@ -81,7 +81,7 @@ static constexpr CAmount CENT{1000000};\n  * This just configures logging, data dir and chain parameters.\n  */\n struct BasicTestingSetup {\n-    node::NodeContext m_node;\n+    node::NodeContext m_node; // keep as first member to be destructed last",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889203065",
      "id" : 889203065,
      "in_reply_to_id" : 888430365,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII5841ACl5",
      "original_commit_id" : "fed085a1a4cd2787202752b6a0d98e42dce97f09",
      "original_line" : 84,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.h",
      "position" : 5,
      "pull_request_review_id" : 995277076,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889203065/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-03T17:53:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889203065",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889203843"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889203843"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> A foot-gun-proof way to do this would be to inherit from a class that holds a node::NodeContext.\r\n\r\nWould really encourage not doing this. There is no ambiguity about initialization order in the c++ language: earlier members are constructed first and destructed last, later members are constructed later and destructed earlier. Moving members into a base class to control what they are initialized here would seems mostly like a form of obfuscation.\r\n\r\nIt is true that if a future developer willingly wants to ignore a \"this member should be first\" comment it will be harder for them to do that if inheritance is involved, but it's true in general that if you obfuscate code it is harder to modify, and I don't think this logic leads to good places",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-03T17:54:26Z",
      "diff_hunk" : "@@ -81,7 +81,7 @@ static constexpr CAmount CENT{1000000};\n  * This just configures logging, data dir and chain parameters.\n  */\n struct BasicTestingSetup {\n-    node::NodeContext m_node;\n+    node::NodeContext m_node; // keep as first member to be destructed last",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889203843",
      "id" : 889203843,
      "in_reply_to_id" : 888430365,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII5841ACyD",
      "original_commit_id" : "fed085a1a4cd2787202752b6a0d98e42dce97f09",
      "original_line" : 84,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.h",
      "position" : 5,
      "pull_request_review_id" : 995278377,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889203843/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-03T17:54:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889203843",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889210409"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889210409"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@ryanofsky Points taken. I think the intents/relationships need to be made clear somehow. Programmatically is one way, but maybe a comment works just as well without all the obfuscation.\r\n\r\nIn any case, this definitely shouldn't slow down this PR.",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-03T18:03:16Z",
      "diff_hunk" : "@@ -81,7 +81,7 @@ static constexpr CAmount CENT{1000000};\n  * This just configures logging, data dir and chain parameters.\n  */\n struct BasicTestingSetup {\n-    node::NodeContext m_node;\n+    node::NodeContext m_node; // keep as first member to be destructed last",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889210409",
      "id" : 889210409,
      "in_reply_to_id" : 888430365,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII5841AEYp",
      "original_commit_id" : "fed085a1a4cd2787202752b6a0d98e42dce97f09",
      "original_line" : 84,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.h",
      "position" : 5,
      "pull_request_review_id" : 995288862,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889210409/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-03T18:03:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889210409",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889220279"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889220279"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I do agree relationship should be explicit if one thing depends on the other. Another safeguard that may be useful is if thing A needs to be destroyed after thing B, thing B destructor can assert that thing A is not destroyed yet (assuming relevant code will already have test coverage since it is part of the test setup)",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-03T18:18:30Z",
      "diff_hunk" : "@@ -81,7 +81,7 @@ static constexpr CAmount CENT{1000000};\n  * This just configures logging, data dir and chain parameters.\n  */\n struct BasicTestingSetup {\n-    node::NodeContext m_node;\n+    node::NodeContext m_node; // keep as first member to be destructed last",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889220279",
      "id" : 889220279,
      "in_reply_to_id" : 888430365,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII5841AGy3",
      "original_commit_id" : "fed085a1a4cd2787202752b6a0d98e42dce97f09",
      "original_line" : 84,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.h",
      "position" : 5,
      "pull_request_review_id" : 995303387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889220279/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-03T18:18:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889220279",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889344950"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889344950"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Okay, sounds like we're okay with leaving it as just a comment like in the latest push d87784ac87364fc977bbf9769c8bdb72dea8cbf9. Going to close this convo but feel free to re-open if further discussion is worth it.",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-03T20:57:45Z",
      "diff_hunk" : "@@ -81,7 +81,7 @@ static constexpr CAmount CENT{1000000};\n  * This just configures logging, data dir and chain parameters.\n  */\n struct BasicTestingSetup {\n-    node::NodeContext m_node;\n+    node::NodeContext m_node; // keep as first member to be destructed last",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889344950",
      "id" : 889344950,
      "in_reply_to_id" : 888430365,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII5841AlO2",
      "original_commit_id" : "fed085a1a4cd2787202752b6a0d98e42dce97f09",
      "original_line" : 84,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.h",
      "position" : 5,
      "pull_request_review_id" : 995521893,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889344950/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-03T20:57:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889344950",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889499471"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889499471"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think the primary question here was why there is no default case, to which the answer is that we happily accept a fallthrough to an InitError. No objection to a macro that just calls `assert(0)`, if ppl think it is useful.",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-04T07:38:11Z",
      "diff_hunk" : "@@ -1089,13 +1091,23 @@ static bool LockDataDirectory(bool probeOnly)\n     return true;\n }\n \n-bool AppInitSanityChecks()\n+bool AppInitSanityChecks(const kernel::Context& kernel)\n {\n     // ********************************************************* Step 4: sanity checks\n-\n-    init::SetGlobals();\n-\n-    if (!init::SanityChecks()) {\n+    auto maybe_error = kernel::SanityChecks(kernel);\n+\n+    if (maybe_error.has_value()) {\n+        switch (maybe_error.value()) {\n+        case kernel::SanityCheckError::ERROR_ECC:\n+            InitError(Untranslated(\"Elliptic curve cryptography sanity check failure. Aborting.\"));\n+            break;\n+        case kernel::SanityCheckError::ERROR_RANDOM:\n+            InitError(Untranslated(\"OS cryptographic RNG sanity check failure. Aborting.\"));\n+            break;\n+        case kernel::SanityCheckError::ERROR_CHRONO:\n+            InitError(Untranslated(\"Clock epoch mismatch. Aborting.\"));\n+            break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r889499471",
      "id" : 889499471,
      "in_reply_to_id" : 888123820,
      "line" : 1109,
      "node_id" : "PRRC_kwDOABII5841BK9P",
      "original_commit_id" : "a8cdeca079a362d2a021aaf7387fbb75a15ebc18",
      "original_line" : 1109,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 38,
      "pull_request_review_id" : 995782135,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889499471/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-04T07:38:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889499471",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r890028099"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890028099"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> ... why there is no default case ...\r\n\r\nMy favorite reason is that, because the switch value is an enum, we get a compile-time warning (or error with `-Werror` which is used by CI) if not all enum values are listed.",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-06T10:40:12Z",
      "diff_hunk" : "@@ -1089,13 +1091,23 @@ static bool LockDataDirectory(bool probeOnly)\n     return true;\n }\n \n-bool AppInitSanityChecks()\n+bool AppInitSanityChecks(const kernel::Context& kernel)\n {\n     // ********************************************************* Step 4: sanity checks\n-\n-    init::SetGlobals();\n-\n-    if (!init::SanityChecks()) {\n+    auto maybe_error = kernel::SanityChecks(kernel);\n+\n+    if (maybe_error.has_value()) {\n+        switch (maybe_error.value()) {\n+        case kernel::SanityCheckError::ERROR_ECC:\n+            InitError(Untranslated(\"Elliptic curve cryptography sanity check failure. Aborting.\"));\n+            break;\n+        case kernel::SanityCheckError::ERROR_RANDOM:\n+            InitError(Untranslated(\"OS cryptographic RNG sanity check failure. Aborting.\"));\n+            break;\n+        case kernel::SanityCheckError::ERROR_CHRONO:\n+            InitError(Untranslated(\"Clock epoch mismatch. Aborting.\"));\n+            break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r890028099",
      "id" : 890028099,
      "in_reply_to_id" : 888123820,
      "line" : 1109,
      "node_id" : "PRRC_kwDOABII5841DMBD",
      "original_commit_id" : "a8cdeca079a362d2a021aaf7387fbb75a15ebc18",
      "original_line" : 1109,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 38,
      "pull_request_review_id" : 996439404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890028099/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-06T10:40:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890028099",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r890149066"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890149066"
         }
      },
      "author_association" : "MEMBER",
      "body" : "unrelated: Probably a good time to get rid of `goto` instead of adding comments on why `goto` can't be used here. :sweat_smile: ",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-06T13:29:25Z",
      "diff_hunk" : "@@ -49,7 +52,11 @@ int main(int argc, char* argv[])\n     SelectParams(CBaseChainParams::MAIN);\n     const CChainParams& chainparams = Params();\n \n-    init::SetGlobals(); // ECC_Start, etc.\n+    kernel::Context kernel_context{};\n+    // We can't use a goto here, but we can use an assert since none of the",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r890149066",
      "id" : 890149066,
      "line" : 56,
      "node_id" : "PRRC_kwDOABII5841DpjK",
      "original_commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "original_line" : 56,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 28,
      "pull_request_review_id" : 996614232,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890149066/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-06T13:51:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890149066",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r890151077"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890151077"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fed085a1a4cd2787202752b6a0d98e42dce97f09 nit: Why not change to make_unique while changing the line?",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-06T13:31:41Z",
      "diff_hunk" : "@@ -0,0 +1,33 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <kernel/context.h>\n+\n+#include <crypto/sha256.h>\n+#include <key.h>\n+#include <logging.h>\n+#include <pubkey.h>\n+#include <random.h>\n+\n+#include <string>\n+\n+\n+namespace kernel {\n+\n+Context::Context()\n+{\n+    std::string sha256_algo = SHA256AutoDetect();\n+    LogPrintf(\"Using the '%s' SHA256 implementation\\n\", sha256_algo);\n+    RandomInit();\n+    ECC_Start();\n+    ecc_verify_handle.reset(new ECCVerifyHandle());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r890151077",
      "id" : 890151077,
      "line" : 24,
      "node_id" : "PRRC_kwDOABII5841DqCl",
      "original_commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "original_line" : 24,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/kernel/context.cpp",
      "position" : 24,
      "pull_request_review_id" : 996614232,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890151077/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-06T13:51:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890151077",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r890161249"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890161249"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fed085a1a4cd2787202752b6a0d98e42dce97f09: Looks like `m_node.kernel` isn't reset and left \"dangling\" until the end of `~BasicTestingSetup`, which only happens to be here? Seems both brittle and inconsistent with the shutdown sequence in bitcoind, no?",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-06T13:43:04Z",
      "diff_hunk" : "@@ -146,7 +146,6 @@ BasicTestingSetup::~BasicTestingSetup()\n     LogInstance().DisconnectTestLogger();\n     fs::remove_all(m_path_root);\n     gArgs.ClearArgs();\n-    init::UnsetGlobals();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r890161249",
      "id" : 890161249,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841Dshh",
      "original_commit_id" : "fed085a1a4cd2787202752b6a0d98e42dce97f09",
      "original_line" : 149,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.cpp",
      "position" : 13,
      "pull_request_review_id" : 996614232,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890161249/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-06T13:51:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890161249",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r890170373"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890170373"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Could have added new files to be checked by iwyu?\r\n\r\n```diff\r\ndiff --git a/ci/test/06_script_b.sh b/ci/test/06_script_b.sh\r\nindex e64af2ad5..f17d823ee 100755\r\n--- a/ci/test/06_script_b.sh\r\n+++ b/ci/test/06_script_b.sh\r\n@@ -43,2 +41,4 @@ if [ \"${RUN_TIDY}\" = \"true\" ]; then\r\n           \" src/init\"\\\r\n+          \" src/kernel/checks.cpp\"\\\r\n+          \" src/kernel/context.cpp\"\\\r\n           \" src/rpc/fees.cpp\"\\\r\n",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-06T13:51:32Z",
      "diff_hunk" : "@@ -0,0 +1,33 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r890170373",
      "id" : 890170373,
      "line" : 4,
      "node_id" : "PRRC_kwDOABII5841DuwF",
      "original_commit_id" : "265d6393bf9ef52e7ef7de97ca9c031da82a5ad1",
      "original_line" : 4,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/kernel/checks.cpp",
      "position" : 4,
      "pull_request_review_id" : 996614232,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890170373/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-06T13:51:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890170373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r890172670"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890172670"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```\r\nsrc/kernel/context.h:15: libary ==> library",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-06T13:53:49Z",
      "diff_hunk" : "@@ -0,0 +1,31 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CONTEXT_H\n+#define BITCOIN_KERNEL_CONTEXT_H\n+\n+#include <memory>\n+\n+class ECCVerifyHandle;\n+\n+namespace kernel {\n+//! Context struct holding the kernel library's logically global state, and\n+//! passed to external libbitcoin_kernel functions which need access to this\n+//! state. The kernel libary API is a work in progress, so state organization",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r890172670",
      "id" : 890172670,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII5841DvT-",
      "original_commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "original_line" : 15,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/kernel/context.h",
      "position" : 15,
      "pull_request_review_id" : 996648985,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890172670/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-06T13:53:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/890172670",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r893418811"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893418811"
         }
      },
      "author_association" : "MEMBER",
      "body" : "being done in #25307",
      "commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "created_at" : "2022-06-09T12:04:07Z",
      "diff_hunk" : "@@ -0,0 +1,31 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CONTEXT_H\n+#define BITCOIN_KERNEL_CONTEXT_H\n+\n+#include <memory>\n+\n+class ECCVerifyHandle;\n+\n+namespace kernel {\n+//! Context struct holding the kernel library's logically global state, and\n+//! passed to external libbitcoin_kernel functions which need access to this\n+//! state. The kernel libary API is a work in progress, so state organization",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25065#discussion_r893418811",
      "id" : 893418811,
      "in_reply_to_id" : 890172670,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII5841QH07",
      "original_commit_id" : "d87784ac87364fc977bbf9769c8bdb72dea8cbf9",
      "original_line" : 15,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/kernel/context.h",
      "position" : 15,
      "pull_request_review_id" : 1001208058,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25065",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893418811/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-09T12:04:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893418811",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
