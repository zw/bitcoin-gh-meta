[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Strange that this happens twice in a day suddenly, without any recent changes that look related. The linked CI runs fail at different subtests, one at (\"Check a timeout less than the limit\") and one at (\"Check a timeout greater than the limit\") - so a fix should probably also affect both. ",
      "created_at" : "2022-04-29T00:11:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1112766154",
      "id" : 1112766154,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585CU3bK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112766154/reactions"
      },
      "updated_at" : "2022-04-29T00:11:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112766154",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I can't see how this would happen unless the python clock is ahead of the system clock??",
      "created_at" : "2022-04-29T05:38:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1112894017",
      "id" : 1112894017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585CVWpB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112894017/reactions"
      },
      "updated_at" : "2022-04-29T05:38:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112894017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yeah, it's weird. Win64-only so far. Let's see if there are more failures.\r\n\r\nThanks @mzumsande, re-pushed with a smaller additional margin for both tests.\r\n\r\n",
      "created_at" : "2022-04-29T12:27:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1113254865",
      "id" : 1113254865,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585CWuvR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113254865/reactions"
      },
      "updated_at" : "2022-04-29T16:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113254865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Another one: https://cirrus-ci.com/task/4631236957175808\r\n\r\n```\r\n  File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\wallet_encryption.py\", line 93, in run_test\r\n    assert_greater_than(expected_time_with_buffer, actual_time)\r\n  File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\test_framework\\util.py\", line 56, in assert_greater_than\r\n    raise AssertionError(\"%s <= %s\" % (str(thing1), str(thing2)))\r\n\r\nAssertionError: 1751237054.993892 <= 1751237055\r\n```\r\n",
      "created_at" : "2022-04-29T16:35:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1113510073",
      "id" : 1113510073,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585CXtC5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113510073/reactions"
      },
      "updated_at" : "2022-04-29T16:35:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113510073",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Another: https://cirrus-ci.com/task/6179044738727936",
      "created_at" : "2022-05-03T14:15:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1116151722",
      "id" : 1116151722,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585Chx-q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1116151722/reactions"
      },
      "updated_at" : "2022-05-03T14:15:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1116151722",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think a possible explanation would be if the `GetTime()` in the C++ code on Windows ends up rounding _up_ to a whole second. So, for example:\r\n\r\n1. expected time = int(10.5) + MAX = 10 + MAX\r\n2. 0.1 second passes\r\n3. walletpassphrase RPC is executed, asking it to keep the phrase for MAX seconds, it calculates now=ceil(10.6) + MAX = 11 + MAX // ceil() wtf!?\r\n4. 0.1 second passes\r\n5. expected with buffer = 10.7 + MAX // not truncated to whole seconds\r\n\r\nSo, we end up with actual time (11 + MAX) < expected with buffer (10.7 + MAX).\r\n\r\nIf this guess is correct, then the following should fix it:\r\n\r\n```python\r\nbefore = math.floor(time.time()) + MAX_VALUE\r\nself.nodes[0].walletpassphrase(passphrase2, MAX_VALUE + 1000) \r\nafter = math.ceil(time.time()) + MAX_VALUE \r\nactual = self.nodes[0].getwalletinfo()['unlocked_until'] \r\nassert_greater_than_or_equal(actual, before)\r\nassert_greater_than_or_equal(after, actual)\r\n```\r\n",
      "created_at" : "2022-05-06T04:27:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1119249506",
      "id" : 1119249506,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585CtmRi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1119249506/reactions"
      },
      "updated_at" : "2022-05-06T04:27:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1119249506",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild done (thanks for looking into this) and added a commit for test logging (and named args and an assertion).",
      "created_at" : "2022-05-10T11:53:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1122289448",
      "id" : 1122289448,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585C5Mco",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1122289448/reactions"
      },
      "updated_at" : "2022-05-10T11:59:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1122289448",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25021#discussion_r869912118"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/869912118"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: maybe mention that this is the same as `MAX_SLEEP_TIME` in `src/wallet/rpc/encrypt.cpp`.",
      "commit_id" : "76f8dc9bd1b4efd543dc54c17a5f8e9d512580e1",
      "created_at" : "2022-05-11T06:21:55Z",
      "diff_hunk" : "@@ -74,23 +73,22 @@ def run_test(self):\n         # Test timeout bounds\n         assert_raises_rpc_error(-8, \"Timeout cannot be negative.\", self.nodes[0].walletpassphrase, passphrase2, -10)\n \n-        self.log.info('Check a timeout less than the limit')\n-        MAX_VALUE = 100000000\n-        expected_time = int(time.time()) + MAX_VALUE - 600\n-        self.nodes[0].walletpassphrase(passphrase2, MAX_VALUE - 600)\n-        # give buffer for walletpassphrase, since it iterates over all encrypted keys\n-        expected_time_with_buffer = time.time() + MAX_VALUE - 600\n-        actual_time = self.nodes[0].getwalletinfo()['unlocked_until']\n-        assert_greater_than_or_equal(actual_time, expected_time)\n-        assert_greater_than(expected_time_with_buffer, actual_time)\n-\n-        self.log.info('Check a timeout greater than the limit')\n-        expected_time = int(time.time()) + MAX_VALUE - 1\n-        self.nodes[0].walletpassphrase(passphrase2, MAX_VALUE + 1000)\n-        expected_time_with_buffer = time.time() + MAX_VALUE\n-        actual_time = self.nodes[0].getwalletinfo()['unlocked_until']\n-        assert_greater_than_or_equal(actual_time, expected_time)\n-        assert_greater_than(expected_time_with_buffer, actual_time)\n+        timeout_limit = 100000000  # maximum time to keep the decryption key, in seconds (~3 years)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#discussion_r869912118",
      "id" : 869912118,
      "line" : 77,
      "node_id" : "PRRC_kwDOABII584z2c42",
      "original_commit_id" : "2178ad2e792180903b9d76b9921d1ed9bc7c5b4e",
      "original_line" : 76,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "test/functional/wallet_encryption.py",
      "position" : 36,
      "pull_request_review_id" : 968736589,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25021",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/869912118/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-11T06:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/869912118",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25021#discussion_r871512449"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871512449"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done -- seems best to avoid specifying the file to reduce future maintainance but added the constant name and documentation where it is declared; good idea.",
      "commit_id" : "1a82609ce078e2d3e5e242d85b275b950fd6fb8f",
      "created_at" : "2022-05-12T15:15:47Z",
      "diff_hunk" : "@@ -74,23 +73,22 @@ def run_test(self):\n         # Test timeout bounds\n         assert_raises_rpc_error(-8, \"Timeout cannot be negative.\", self.nodes[0].walletpassphrase, passphrase2, -10)\n \n-        self.log.info('Check a timeout less than the limit')\n-        MAX_VALUE = 100000000\n-        expected_time = int(time.time()) + MAX_VALUE - 600\n-        self.nodes[0].walletpassphrase(passphrase2, MAX_VALUE - 600)\n-        # give buffer for walletpassphrase, since it iterates over all encrypted keys\n-        expected_time_with_buffer = time.time() + MAX_VALUE - 600\n-        actual_time = self.nodes[0].getwalletinfo()['unlocked_until']\n-        assert_greater_than_or_equal(actual_time, expected_time)\n-        assert_greater_than(expected_time_with_buffer, actual_time)\n-\n-        self.log.info('Check a timeout greater than the limit')\n-        expected_time = int(time.time()) + MAX_VALUE - 1\n-        self.nodes[0].walletpassphrase(passphrase2, MAX_VALUE + 1000)\n-        expected_time_with_buffer = time.time() + MAX_VALUE\n-        actual_time = self.nodes[0].getwalletinfo()['unlocked_until']\n-        assert_greater_than_or_equal(actual_time, expected_time)\n-        assert_greater_than(expected_time_with_buffer, actual_time)\n+        timeout_limit = 100000000  # maximum time to keep the decryption key, in seconds (~3 years)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#discussion_r871512449",
      "id" : 871512449,
      "in_reply_to_id" : 869912118,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584z8jmB",
      "original_commit_id" : "2178ad2e792180903b9d76b9921d1ed9bc7c5b4e",
      "original_line" : 76,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "test/functional/wallet_encryption.py",
      "position" : null,
      "pull_request_review_id" : 971039784,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25021",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871512449/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-12T15:15:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871512449",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is this still an issue? I haven't seen it recently.",
      "created_at" : "2022-05-12T15:25:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1125131900",
      "id" : 1125131900,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585DECZ8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1125131900/reactions"
      },
      "updated_at" : "2022-05-12T15:25:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1125131900",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Haven't seen it in a week. Could drop the fix for now and leave the improvements.",
      "created_at" : "2022-05-12T15:30:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1125137066",
      "id" : 1125137066,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585DEDqq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1125137066/reactions"
      },
      "updated_at" : "2022-05-12T15:30:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1125137066",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Just saw this error: https://cirrus-ci.com/task/4948737314258944?logs=functional_tests#L25 in #24230\r\n\r\nLog:\r\n\r\n```\r\n node0 2022-05-12T20:03:02.859261Z [C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\src\\rpc\\request.cpp:179] [parse] ThreadRPCServer method=walletpassphrase user=__cookie__ \r\n node0 2022-05-12T20:03:03.012258Z [C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\src\\rpc\\server.cpp:530] [RPCRunLater] queue run of timer lockwallet(default_wallet) in 99999400 seconds (using HTTP) \r\n test  2022-05-12T20:03:03.014000Z TestFramework (ERROR): Assertion failed \r\n                                   Traceback (most recent call last):\r\n                                     File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\test_framework\\test_framework.py\", line 133, in main\r\n                                       self.run_test()\r\n                                     File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\wallet_encryption.py\", line 85, in run_test\r\n                                       assert_greater_than(expected_time_with_buffer, actual_time)\r\n                                     File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\test_framework\\util.py\", line 56, in assert_greater_than\r\n                                       raise AssertionError(\"%s <= %s\" % (str(thing1), str(thing2)))\r\n                                   AssertionError: 1752385182.999136 <= 1752385183\r\n```\r\n",
      "created_at" : "2022-05-12T21:34:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1125442207",
      "id" : 1125442207,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585DFOKf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1125442207/reactions"
      },
      "updated_at" : "2022-05-12T21:34:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1125442207",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok, then I think we should only maim the test on windows, not on all platforms.",
      "created_at" : "2022-05-13T05:33:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1125672956",
      "id" : 1125672956,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585DGGf8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1125672956/reactions"
      },
      "updated_at" : "2022-05-13T05:33:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1125672956",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Why \"maim\"? The test functionality if fully preserved, no?\r\n\r\nSure, \"maim\" is a bit too strong. It is making the test lax by up to another second, while no one understands why.",
      "created_at" : "2022-05-13T09:37:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1125851751",
      "id" : 1125851751,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585DGyJn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1125851751/reactions"
      },
      "updated_at" : "2022-05-13T09:37:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1125851751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Would be nice if someone could run this on msvc:\r\n\r\n```cpp\r\n#include <iostream>\r\n#include <chrono>\r\n#include <string>\r\n \r\ntemplate <typename TimePoint>\r\nstd::string to_string(const TimePoint& time_point)\r\n{\r\n    return std::to_string(time_point.time_since_epoch().count());\r\n}\r\n \r\nint main()\r\n{\r\n    using namespace std::literals::chrono_literals;\r\n    using Sec = std::chrono::seconds;\r\n \r\n    std::cout << \"Time point\\t\" \"Cast\\t\" \"Floor\\t\" \"Round\\t\" \"Ceil\\n\";\r\n    std::cout << \"(ms)\\t\\t\"     \"(s)\\t\"  \"(s)\\t\"   \"(s)\\t\"   \"(s)\\n\";\r\n    for (const auto value_ms: {5432ms, 5678ms}) {\r\n        std::chrono::time_point<std::chrono::system_clock, std::chrono::milliseconds>\r\n            time_point_ms(value_ms);\r\n \r\n        std::cout\r\n            << to_string(time_point_ms) << \"\\t\\t\"\r\n            << to_string(std::chrono::time_point_cast<Sec>(time_point_ms)) << \"\\t\"\r\n            << to_string(std::chrono::floor          <Sec>(time_point_ms)) << \"\\t\"\r\n            << to_string(std::chrono::round          <Sec>(time_point_ms)) << \"\\t\"\r\n            << to_string(std::chrono::ceil           <Sec>(time_point_ms)) << \"\\n\";\r\n    }\r\n}\r\n```\r\n\r\nFrom https://en.cppreference.com/w/cpp/chrono/time_point/ceil. Should print:\r\n\r\n```\r\nTime point\tCast\tFloor\tRound\tCeil\r\n(ms)\t\t(s)\t(s)\t(s)\t(s)\r\n5432\t\t5\t5\t5\t6\r\n5678\t\t5\t5\t6\t6",
      "created_at" : "2022-05-13T13:03:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1126033977",
      "id" : 1126033977,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585DHeo5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126033977/reactions"
      },
      "updated_at" : "2022-05-13T13:03:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126033977",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Unrelated, it might be good to not use mockable time here. libevent isn't affected by `setmocktime`, so using mockable time here is harmless but still a bit confusing:\r\n\r\n```diff\r\ndiff --git a/src/util/time.h b/src/util/time.h\r\nindex 72956ea0d7..8d160c312e 100644\r\n--- a/src/util/time.h\r\n+++ b/src/util/time.h\r\n@@ -18,6 +18,8 @@ using SteadySeconds = std::chrono::time_point<std::chrono::steady_clock, std::ch\r\n using SteadyMilliseconds = std::chrono::time_point<std::chrono::steady_clock, std::chrono::milliseconds>;\r\n using SteadyMicroseconds = std::chrono::time_point<std::chrono::steady_clock, std::chrono::microseconds>;\r\n \r\n+using SysSeconds = std::chrono::time_point<std::chrono::system_clock, std::chrono::seconds>; // std::chrono::sys_seconds (C++20)\r\n+\r\n void UninterruptibleSleep(const std::chrono::microseconds& n);\r\n \r\n /**\r\ndiff --git a/src/wallet/rpc/encrypt.cpp b/src/wallet/rpc/encrypt.cpp\r\nindex 802cc63d6d..8a663e71bd 100644\r\n--- a/src/wallet/rpc/encrypt.cpp\r\n+++ b/src/wallet/rpc/encrypt.cpp\r\n@@ -75,7 +75,7 @@ RPCHelpMan walletpassphrase()\r\n \r\n         pwallet->TopUpKeyPool();\r\n \r\n-        pwallet->nRelockTime = GetTime() + nSleepTime;\r\n+        pwallet->nRelockTime = Now<SysSeconds>().time_since_epoch().count() + nSleepTime;\r\n         relock_time = pwallet->nRelockTime;\r\n     }\r\n \r\n",
      "created_at" : "2022-05-13T13:10:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1126040884",
      "id" : 1126040884,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585DHgU0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126040884/reactions"
      },
      "updated_at" : "2022-05-13T13:10:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126040884",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> It is making the test lax by up to another second\r\n\r\nThat is true, but the point of the test is to ensure that the time limit is honored - 1. cannot be negative, 2. is capped at some limit and 3. if within the limits, then is accepted. The original test in 134cdc7cee3da7c554e40ad947a9cdcbb3069f13 contained 5 seconds buffer, so the point of the test is not to check that the value is accepted up to the second, exactly.",
      "created_at" : "2022-05-13T13:26:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1126055676",
      "id" : 1126055676,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585DHj78",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126055676/reactions"
      },
      "updated_at" : "2022-05-13T13:26:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126055676",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25021#discussion_r872401870"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/872401870"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Would this print the values if the assertion fails?\r\n\r\n```\r\n>>> a=1\r\n>>> b=2\r\n>>> c=3\r\n>>> assert a <= b <= c\r\n>>> \r\n>>> c=0\r\n>>> assert a <= b <= c\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nAssertionError\r\n>>> \r\n```\r\n\r\nIf not, then maybe revert back to using `assert_greater_than()` because seeing the values in CI logs is so precious in debugging this.",
      "commit_id" : "1a82609ce078e2d3e5e242d85b275b950fd6fb8f",
      "created_at" : "2022-05-13T13:28:57Z",
      "diff_hunk" : "@@ -26,71 +25,72 @@ def run_test(self):\n         passphrase = \"WalletPassphrase\"\n         passphrase2 = \"SecondWalletPassphrase\"\n \n-        # Make sure the wallet isn't encrypted first\n+        self.log.info(\"Test user actions with an unencrypted wallet\")\n         msg = \"test message\"\n         address = self.nodes[0].getnewaddress(address_type='legacy')\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n         assert_raises_rpc_error(-15, \"Error: running with an unencrypted wallet, but walletpassphrase was called\", self.nodes[0].walletpassphrase, 'ff', 1)\n         assert_raises_rpc_error(-15, \"Error: running with an unencrypted wallet, but walletpassphrasechange was called.\", self.nodes[0].walletpassphrasechange, 'ff', 'ff')\n \n-        # Encrypt the wallet\n+        self.log.info(\"Test encryptwallet with an empty passphrase and with a valid passphrase\")\n         assert_raises_rpc_error(-8, \"passphrase cannot be empty\", self.nodes[0].encryptwallet, '')\n         self.nodes[0].encryptwallet(passphrase)\n \n-        # Test that the wallet is encrypted\n+        self.log.info(\"Test user actions with an encrypted wallet\")\n         assert_raises_rpc_error(-13, \"Please enter the wallet passphrase with walletpassphrase first\", self.nodes[0].signmessage, address, msg)\n         assert_raises_rpc_error(-15, \"Error: running with an encrypted wallet, but encryptwallet was called.\", self.nodes[0].encryptwallet, 'ff')\n         assert_raises_rpc_error(-8, \"passphrase cannot be empty\", self.nodes[0].walletpassphrase, '', 1)\n         assert_raises_rpc_error(-8, \"passphrase cannot be empty\", self.nodes[0].walletpassphrasechange, '', 'ff')\n \n-        # Check that walletpassphrase works\n-        self.nodes[0].walletpassphrase(passphrase, 2)\n+        self.log.info(\"Test walletpassphrase happy path\")\n+        self.nodes[0].walletpassphrase(passphrase=passphrase, timeout=2)\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n \n-        # Check that the timeout is right\n+        self.log.info(\"Test walletpassphrase timeout\")\n         time.sleep(3)\n         assert_raises_rpc_error(-13, \"Please enter the wallet passphrase with walletpassphrase first\", self.nodes[0].signmessage, address, msg)\n \n-        # Test wrong passphrase\n+        self.log.info('Test walletpassphrase with the wrong passphrase')\n         assert_raises_rpc_error(-14, \"wallet passphrase entered was incorrect\", self.nodes[0].walletpassphrase, passphrase + \"wrong\", 10)\n \n-        # Test walletlock\n-        self.nodes[0].walletpassphrase(passphrase, 84600)\n+        self.log.info(\"Test walletlock\")\n+        self.nodes[0].walletpassphrase(passphrase=passphrase, timeout=84600)\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n         self.nodes[0].walletlock()\n         assert_raises_rpc_error(-13, \"Please enter the wallet passphrase with walletpassphrase first\", self.nodes[0].signmessage, address, msg)\n \n-        # Test passphrase changes\n+        self.log.info(\"Test walletpassphrasechange\")\n         self.nodes[0].walletpassphrasechange(passphrase, passphrase2)\n         assert_raises_rpc_error(-14, \"wallet passphrase entered was incorrect\", self.nodes[0].walletpassphrase, passphrase, 10)\n-        self.nodes[0].walletpassphrase(passphrase2, 10)\n+        self.nodes[0].walletpassphrase(passphrase=passphrase2, timeout=10)\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n         self.nodes[0].walletlock()\n \n-        # Test timeout bounds\n+        self.log.info(\"Test walletpassphrase with an invalid negative timeout and a valid zero timeout\")\n         assert_raises_rpc_error(-8, \"Timeout cannot be negative.\", self.nodes[0].walletpassphrase, passphrase2, -10)\n-\n-        self.log.info('Check a timeout less than the limit')\n-        MAX_VALUE = 100000000\n-        expected_time = int(time.time()) + MAX_VALUE - 600\n-        self.nodes[0].walletpassphrase(passphrase2, MAX_VALUE - 600)\n-        # give buffer for walletpassphrase, since it iterates over all encrypted keys\n-        expected_time_with_buffer = time.time() + MAX_VALUE - 600\n-        actual_time = self.nodes[0].getwalletinfo()['unlocked_until']\n-        assert_greater_than_or_equal(actual_time, expected_time)\n-        assert_greater_than(expected_time_with_buffer, actual_time)\n-\n-        self.log.info('Check a timeout greater than the limit')\n-        expected_time = int(time.time()) + MAX_VALUE - 1\n-        self.nodes[0].walletpassphrase(passphrase2, MAX_VALUE + 1000)\n-        expected_time_with_buffer = time.time() + MAX_VALUE\n-        actual_time = self.nodes[0].getwalletinfo()['unlocked_until']\n-        assert_greater_than_or_equal(actual_time, expected_time)\n-        assert_greater_than(expected_time_with_buffer, actual_time)\n+        self.nodes[0].walletpassphrase(passphrase=passphrase2, timeout=0)\n+\n+        # Maximum time to keep the decryption key, in seconds (~3 years); see MAX_SLEEP_TIME\n+        timeout_limit = 100_000_000\n+\n+        self.log.info(\"Test walletpassphrase with a timeout less than the limit\")\n+        timeout = timeout_limit - 600\n+        before = floor(time.time()) + timeout\n+        self.nodes[0].walletpassphrase(passphrase2, timeout)\n+        after = ceil(time.time()) + timeout\n+        actual = self.nodes[0].getwalletinfo()['unlocked_until']\n+        assert before <= actual <= after",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#discussion_r872401870",
      "id" : 872401870,
      "line" : 86,
      "node_id" : "PRRC_kwDOABII584z_8vO",
      "original_commit_id" : "1a82609ce078e2d3e5e242d85b275b950fd6fb8f",
      "original_line" : 86,
      "original_position" : 107,
      "original_start_line" : null,
      "path" : "test/functional/wallet_encryption.py",
      "position" : 107,
      "pull_request_review_id" : 972259803,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25021",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/872401870/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-13T13:28:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/872401870",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> so the point of the test is not to check that the value is accepted up to the second, exactly.\r\n\r\nRight. I don't care about this test. `nRelockTime` is only there for aesthetic reasons, it can't be relied upon anyway, since it doesn't take into account how long it takes to register the event in libevent. (If that takes 5 seconds, the value is off by 5 seconds)\r\n\r\nI mostly worry the clock on windows doesn't work as expected and it will lead to more severe issues down the line (extremely unlikely, but worst case a consensus split)",
      "created_at" : "2022-05-13T13:43:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1126072571",
      "id" : 1126072571,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585DHoD7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126072571/reactions"
      },
      "updated_at" : "2022-05-13T13:43:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126072571",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ok, in case it helps, here is another test prog I played with on my computer (not windows):\r\n\r\n```cpp\r\nint main(int, char**)\r\n{\r\n    const auto now = std::chrono::system_clock::now().time_since_epoch();\r\n    std::cout << std::chrono::duration_cast<std::chrono::seconds>(now).count() << std::endl\r\n              << std::chrono::duration_cast<std::chrono::milliseconds>(now).count() << std::endl;\r\n    return 0;\r\n}\r\n```\r\n\r\nIt prints, for example:\r\n\r\n```\r\n1652449734\r\n1652449734758\r\n```\r\n\r\nwhich confirms my implementation is rounding down, as in the [spec](https://en.cppreference.com/w/cpp/chrono/duration/duration_cast):\r\n\r\n> casting to an integer duration is subject to truncation as with any static_cast to an integer type\r\n\r\nPS: even if the problem is elsewhere I think the changes in this PR make the test more robust and readable.",
      "created_at" : "2022-05-13T13:54:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1126082619",
      "id" : 1126082619,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585DHqg7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126082619/reactions"
      },
      "updated_at" : "2022-05-13T13:54:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126082619",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "cc @sipsorcery Could you please try https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1126033977 on msvc? ",
      "created_at" : "2022-05-13T13:59:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1126087662",
      "id" : 1126087662,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585DHrvu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126087662/reactions"
      },
      "updated_at" : "2022-05-13T13:59:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126087662",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Visual Studio 2022 v17.1.6 9 (C++ compiler version 19.31.31107 for x86)\r\n\r\n````\r\nTime point      Cast    Floor   Round   Ceil                                                                          \r\n(ms)            (s)     (s)     (s)     (s)                                                                             \r\n5432            5       5       5       6                                                                             \r\n5678            5       5       6       6\r\n````\r\n\r\n",
      "created_at" : "2022-05-15T13:37:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1126944095",
      "id" : 1126944095,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585DK81f",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126944095/reactions"
      },
      "updated_at" : "2022-05-15T13:37:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126944095",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25021#discussion_r873198183"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873198183"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This doesn't seem right. If the Bitcoin Core clock was doing `ceil`, we'd see a failure rate of about 100%. `round` seems unlikely as well, as the failure rate would be about 50%.\r\n\r\nStatistically, the error on windows should be 10-100ms, which can't be explained by cast/round/ceil.",
      "commit_id" : "1a82609ce078e2d3e5e242d85b275b950fd6fb8f",
      "created_at" : "2022-05-15T17:12:33Z",
      "diff_hunk" : "@@ -26,71 +25,72 @@ def run_test(self):\n         passphrase = \"WalletPassphrase\"\n         passphrase2 = \"SecondWalletPassphrase\"\n \n-        # Make sure the wallet isn't encrypted first\n+        self.log.info(\"Test user actions with an unencrypted wallet\")\n         msg = \"test message\"\n         address = self.nodes[0].getnewaddress(address_type='legacy')\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n         assert_raises_rpc_error(-15, \"Error: running with an unencrypted wallet, but walletpassphrase was called\", self.nodes[0].walletpassphrase, 'ff', 1)\n         assert_raises_rpc_error(-15, \"Error: running with an unencrypted wallet, but walletpassphrasechange was called.\", self.nodes[0].walletpassphrasechange, 'ff', 'ff')\n \n-        # Encrypt the wallet\n+        self.log.info(\"Test encryptwallet with an empty passphrase and with a valid passphrase\")\n         assert_raises_rpc_error(-8, \"passphrase cannot be empty\", self.nodes[0].encryptwallet, '')\n         self.nodes[0].encryptwallet(passphrase)\n \n-        # Test that the wallet is encrypted\n+        self.log.info(\"Test user actions with an encrypted wallet\")\n         assert_raises_rpc_error(-13, \"Please enter the wallet passphrase with walletpassphrase first\", self.nodes[0].signmessage, address, msg)\n         assert_raises_rpc_error(-15, \"Error: running with an encrypted wallet, but encryptwallet was called.\", self.nodes[0].encryptwallet, 'ff')\n         assert_raises_rpc_error(-8, \"passphrase cannot be empty\", self.nodes[0].walletpassphrase, '', 1)\n         assert_raises_rpc_error(-8, \"passphrase cannot be empty\", self.nodes[0].walletpassphrasechange, '', 'ff')\n \n-        # Check that walletpassphrase works\n-        self.nodes[0].walletpassphrase(passphrase, 2)\n+        self.log.info(\"Test walletpassphrase happy path\")\n+        self.nodes[0].walletpassphrase(passphrase=passphrase, timeout=2)\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n \n-        # Check that the timeout is right\n+        self.log.info(\"Test walletpassphrase timeout\")\n         time.sleep(3)\n         assert_raises_rpc_error(-13, \"Please enter the wallet passphrase with walletpassphrase first\", self.nodes[0].signmessage, address, msg)\n \n-        # Test wrong passphrase\n+        self.log.info('Test walletpassphrase with the wrong passphrase')\n         assert_raises_rpc_error(-14, \"wallet passphrase entered was incorrect\", self.nodes[0].walletpassphrase, passphrase + \"wrong\", 10)\n \n-        # Test walletlock\n-        self.nodes[0].walletpassphrase(passphrase, 84600)\n+        self.log.info(\"Test walletlock\")\n+        self.nodes[0].walletpassphrase(passphrase=passphrase, timeout=84600)\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n         self.nodes[0].walletlock()\n         assert_raises_rpc_error(-13, \"Please enter the wallet passphrase with walletpassphrase first\", self.nodes[0].signmessage, address, msg)\n \n-        # Test passphrase changes\n+        self.log.info(\"Test walletpassphrasechange\")\n         self.nodes[0].walletpassphrasechange(passphrase, passphrase2)\n         assert_raises_rpc_error(-14, \"wallet passphrase entered was incorrect\", self.nodes[0].walletpassphrase, passphrase, 10)\n-        self.nodes[0].walletpassphrase(passphrase2, 10)\n+        self.nodes[0].walletpassphrase(passphrase=passphrase2, timeout=10)\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n         self.nodes[0].walletlock()\n \n-        # Test timeout bounds\n+        self.log.info(\"Test walletpassphrase with an invalid negative timeout and a valid zero timeout\")\n         assert_raises_rpc_error(-8, \"Timeout cannot be negative.\", self.nodes[0].walletpassphrase, passphrase2, -10)\n-\n-        self.log.info('Check a timeout less than the limit')\n-        MAX_VALUE = 100000000\n-        expected_time = int(time.time()) + MAX_VALUE - 600\n-        self.nodes[0].walletpassphrase(passphrase2, MAX_VALUE - 600)\n-        # give buffer for walletpassphrase, since it iterates over all encrypted keys\n-        expected_time_with_buffer = time.time() + MAX_VALUE - 600\n-        actual_time = self.nodes[0].getwalletinfo()['unlocked_until']\n-        assert_greater_than_or_equal(actual_time, expected_time)\n-        assert_greater_than(expected_time_with_buffer, actual_time)\n-\n-        self.log.info('Check a timeout greater than the limit')\n-        expected_time = int(time.time()) + MAX_VALUE - 1\n-        self.nodes[0].walletpassphrase(passphrase2, MAX_VALUE + 1000)\n-        expected_time_with_buffer = time.time() + MAX_VALUE\n-        actual_time = self.nodes[0].getwalletinfo()['unlocked_until']\n-        assert_greater_than_or_equal(actual_time, expected_time)\n-        assert_greater_than(expected_time_with_buffer, actual_time)\n+        self.nodes[0].walletpassphrase(passphrase=passphrase2, timeout=0)\n+\n+        # Maximum time to keep the decryption key, in seconds (~3 years); see MAX_SLEEP_TIME\n+        timeout_limit = 100_000_000\n+\n+        self.log.info(\"Test walletpassphrase with a timeout less than the limit\")\n+        timeout = timeout_limit - 600\n+        before = floor(time.time()) + timeout\n+        self.nodes[0].walletpassphrase(passphrase2, timeout)\n+        after = ceil(time.time()) + timeout",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#discussion_r873198183",
      "id" : 873198183,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII5840C_Jn",
      "original_commit_id" : "1a82609ce078e2d3e5e242d85b275b950fd6fb8f",
      "original_line" : 84,
      "original_position" : 105,
      "original_start_line" : null,
      "path" : "test/functional/wallet_encryption.py",
      "position" : 105,
      "pull_request_review_id" : 973197428,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25021",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873198183/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-15T17:12:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873198183",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25021#discussion_r877085914"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/877085914"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Well, this just ignores sub-second fractions and accounts for the time passed between the calls, keeping the original intention of the test (I hope!). Do you think it could still fail on Windows?",
      "commit_id" : "189f57bd03d484f396ffe4cc88164222c57435e2",
      "created_at" : "2022-05-19T13:53:36Z",
      "diff_hunk" : "@@ -26,71 +25,72 @@ def run_test(self):\n         passphrase = \"WalletPassphrase\"\n         passphrase2 = \"SecondWalletPassphrase\"\n \n-        # Make sure the wallet isn't encrypted first\n+        self.log.info(\"Test user actions with an unencrypted wallet\")\n         msg = \"test message\"\n         address = self.nodes[0].getnewaddress(address_type='legacy')\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n         assert_raises_rpc_error(-15, \"Error: running with an unencrypted wallet, but walletpassphrase was called\", self.nodes[0].walletpassphrase, 'ff', 1)\n         assert_raises_rpc_error(-15, \"Error: running with an unencrypted wallet, but walletpassphrasechange was called.\", self.nodes[0].walletpassphrasechange, 'ff', 'ff')\n \n-        # Encrypt the wallet\n+        self.log.info(\"Test encryptwallet with an empty passphrase and with a valid passphrase\")\n         assert_raises_rpc_error(-8, \"passphrase cannot be empty\", self.nodes[0].encryptwallet, '')\n         self.nodes[0].encryptwallet(passphrase)\n \n-        # Test that the wallet is encrypted\n+        self.log.info(\"Test user actions with an encrypted wallet\")\n         assert_raises_rpc_error(-13, \"Please enter the wallet passphrase with walletpassphrase first\", self.nodes[0].signmessage, address, msg)\n         assert_raises_rpc_error(-15, \"Error: running with an encrypted wallet, but encryptwallet was called.\", self.nodes[0].encryptwallet, 'ff')\n         assert_raises_rpc_error(-8, \"passphrase cannot be empty\", self.nodes[0].walletpassphrase, '', 1)\n         assert_raises_rpc_error(-8, \"passphrase cannot be empty\", self.nodes[0].walletpassphrasechange, '', 'ff')\n \n-        # Check that walletpassphrase works\n-        self.nodes[0].walletpassphrase(passphrase, 2)\n+        self.log.info(\"Test walletpassphrase happy path\")\n+        self.nodes[0].walletpassphrase(passphrase=passphrase, timeout=2)\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n \n-        # Check that the timeout is right\n+        self.log.info(\"Test walletpassphrase timeout\")\n         time.sleep(3)\n         assert_raises_rpc_error(-13, \"Please enter the wallet passphrase with walletpassphrase first\", self.nodes[0].signmessage, address, msg)\n \n-        # Test wrong passphrase\n+        self.log.info('Test walletpassphrase with the wrong passphrase')\n         assert_raises_rpc_error(-14, \"wallet passphrase entered was incorrect\", self.nodes[0].walletpassphrase, passphrase + \"wrong\", 10)\n \n-        # Test walletlock\n-        self.nodes[0].walletpassphrase(passphrase, 84600)\n+        self.log.info(\"Test walletlock\")\n+        self.nodes[0].walletpassphrase(passphrase=passphrase, timeout=84600)\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n         self.nodes[0].walletlock()\n         assert_raises_rpc_error(-13, \"Please enter the wallet passphrase with walletpassphrase first\", self.nodes[0].signmessage, address, msg)\n \n-        # Test passphrase changes\n+        self.log.info(\"Test walletpassphrasechange\")\n         self.nodes[0].walletpassphrasechange(passphrase, passphrase2)\n         assert_raises_rpc_error(-14, \"wallet passphrase entered was incorrect\", self.nodes[0].walletpassphrase, passphrase, 10)\n-        self.nodes[0].walletpassphrase(passphrase2, 10)\n+        self.nodes[0].walletpassphrase(passphrase=passphrase2, timeout=10)\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n         self.nodes[0].walletlock()\n \n-        # Test timeout bounds\n+        self.log.info(\"Test walletpassphrase with an invalid negative timeout and a valid zero timeout\")\n         assert_raises_rpc_error(-8, \"Timeout cannot be negative.\", self.nodes[0].walletpassphrase, passphrase2, -10)\n-\n-        self.log.info('Check a timeout less than the limit')\n-        MAX_VALUE = 100000000\n-        expected_time = int(time.time()) + MAX_VALUE - 600\n-        self.nodes[0].walletpassphrase(passphrase2, MAX_VALUE - 600)\n-        # give buffer for walletpassphrase, since it iterates over all encrypted keys\n-        expected_time_with_buffer = time.time() + MAX_VALUE - 600\n-        actual_time = self.nodes[0].getwalletinfo()['unlocked_until']\n-        assert_greater_than_or_equal(actual_time, expected_time)\n-        assert_greater_than(expected_time_with_buffer, actual_time)\n-\n-        self.log.info('Check a timeout greater than the limit')\n-        expected_time = int(time.time()) + MAX_VALUE - 1\n-        self.nodes[0].walletpassphrase(passphrase2, MAX_VALUE + 1000)\n-        expected_time_with_buffer = time.time() + MAX_VALUE\n-        actual_time = self.nodes[0].getwalletinfo()['unlocked_until']\n-        assert_greater_than_or_equal(actual_time, expected_time)\n-        assert_greater_than(expected_time_with_buffer, actual_time)\n+        self.nodes[0].walletpassphrase(passphrase=passphrase2, timeout=0)\n+\n+        # Maximum time to keep the decryption key, in seconds (~3 years); see MAX_SLEEP_TIME\n+        timeout_limit = 100_000_000\n+\n+        self.log.info(\"Test walletpassphrase with a timeout less than the limit\")\n+        timeout = timeout_limit - 600\n+        before = floor(time.time()) + timeout\n+        self.nodes[0].walletpassphrase(passphrase2, timeout)\n+        after = ceil(time.time()) + timeout",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#discussion_r877085914",
      "id" : 877085914,
      "in_reply_to_id" : 873198183,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII5840R0Ta",
      "original_commit_id" : "1a82609ce078e2d3e5e242d85b275b950fd6fb8f",
      "original_line" : 84,
      "original_position" : 105,
      "original_start_line" : null,
      "path" : "test/functional/wallet_encryption.py",
      "position" : 105,
      "pull_request_review_id" : 978623666,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25021",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/877085914/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-19T13:53:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/877085914",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "An alternative to this would be to use mocktime to set the exact seconds and then check the exact result. (Obviously mocktime couldn't shorten or extend the actual locking duration, but the test doesn't check that anyway).",
      "created_at" : "2022-05-20T09:17:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1132673747",
      "id" : 1132673747,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585DgzrT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132673747/reactions"
      },
      "updated_at" : "2022-05-20T09:17:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132673747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Will update to address feedback.",
      "created_at" : "2022-05-20T09:23:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1132679044",
      "id" : 1132679044,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585Dg0-E",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132679044/reactions"
      },
      "updated_at" : "2022-05-20T09:23:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132679044",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "(I still don't know what the correct fix is, just handing out thoughts fyi)",
      "created_at" : "2022-05-20T09:24:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1132680293",
      "id" : 1132680293,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585Dg1Rl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132680293/reactions"
      },
      "updated_at" : "2022-05-20T09:24:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1132680293",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Another one https://cirrus-ci.com/task/5010386603737088\r\n```\r\n176/244 - wallet_encryption.py --legacy-wallet failed, Duration: 6 s\r\nstdout:\r\n2022-05-20T15:08:20.442000Z TestFramework (INFO): Initializing test directory C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\test_runner___20220520_141819\\wallet_encryption_66\r\n2022-05-20T15:08:25.754000Z TestFramework (INFO): Check a timeout less than the limit\r\n2022-05-20T15:08:25.879000Z TestFramework (INFO): Check a timeout greater than the limit\r\n2022-05-20T15:08:26.006000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\test_framework\\test_framework.py\", line 133, in main\r\n    self.run_test()\r\n  File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\wallet_encryption.py\", line 93, in run_test\r\n    assert_greater_than(expected_time_with_buffer, actual_time)\r\n  File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\test_framework\\util.py\", line 56, in assert_greater_than\r\n    raise AssertionError(\"%s <= %s\" % (str(thing1), str(thing2)))\r\nAssertionError: 1753059305.991002 <= 1753059306\r\n2022-05-20T15:08:26.069000Z TestFramework (INFO): Stopping nodes\r\n```",
      "created_at" : "2022-05-20T15:41:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1133050400",
      "id" : 1133050400,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585DiPog",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133050400/reactions"
      },
      "updated_at" : "2022-05-20T15:41:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133050400",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Again https://cirrus-ci.com/task/4705957107204096",
      "created_at" : "2022-05-25T12:15:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1137166550",
      "id" : 1137166550,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585Dx8jW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137166550/reactions"
      },
      "updated_at" : "2022-05-25T12:15:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137166550",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "https://cirrus-ci.com/task/4707637714485248",
      "created_at" : "2022-05-27T18:30:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1139923613",
      "id" : 1139923613,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585D8dqd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139923613/reactions"
      },
      "updated_at" : "2022-05-27T18:30:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139923613",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this is an improvement over the current `master`, even not considering the test failures.",
      "created_at" : "2022-07-13T13:03:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1183197825",
      "id" : 1183197825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585GhiqB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1183197825/reactions"
      },
      "updated_at" : "2022-07-13T13:03:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1183197825",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is this still happening after the windows upgrade?",
      "created_at" : "2022-07-19T11:31:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1188939480",
      "id" : 1188939480,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585G3cbY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1188939480/reactions"
      },
      "updated_at" : "2022-07-19T11:31:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1188939480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I haven't seen it yet, so it indeed seems like a bug in Windows 2019",
      "created_at" : "2022-07-25T13:40:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1194063755",
      "id" : 1194063755,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585HK_eL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1194063755/reactions"
      },
      "updated_at" : "2022-07-25T13:40:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1194063755",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "On master https://cirrus-ci.com/task/4974085586288640?logs=functional_tests#L45\r\n",
      "created_at" : "2022-07-27T08:11:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1196402563",
      "id" : 1196402563,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585HT6eD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1196402563/reactions"
      },
      "updated_at" : "2022-07-27T08:11:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1196402563",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "https://cirrus-ci.com/task/5833543791149056?logs=functional_tests#L45",
      "created_at" : "2022-07-28T15:28:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1198310947",
      "id" : 1198310947,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585HbMYj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1198310947/reactions"
      },
      "updated_at" : "2022-07-28T15:28:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1198310947",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "https://cirrus-ci.com/task/4856438647422976?logs=functional_tests#L45",
      "created_at" : "2022-07-29T04:24:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1198866149",
      "id" : 1198866149,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585HdT7l",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1198866149/reactions"
      },
      "updated_at" : "2022-07-29T04:24:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1198866149",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "https://cirrus-ci.com/task/5509434167263232?logs=functional_tests#L43",
      "created_at" : "2022-07-30T14:12:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1200164785",
      "id" : 1200164785,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585HiQ-x",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1200164785/reactions"
      },
      "updated_at" : "2022-07-30T14:12:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1200164785",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Seems this won't be merged.",
      "created_at" : "2022-07-30T14:53:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1200189554",
      "id" : 1200189554,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585HiXBy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1200189554/reactions"
      },
      "updated_at" : "2022-07-30T14:53:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1200189554",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The reason I haven't merged this yet is that it has only one ACK, but outstanding review comments such as https://github.com/bitcoin/bitcoin/pull/25021#discussion_r872401870 and https://github.com/bitcoin/bitcoin/pull/25021#discussion_r873198183\r\n\r\nAlso, I am not sure if a test fix should modify the cpp source code. No objection to those changes, but maybe try to submit them separate from a test fix?",
      "created_at" : "2022-07-30T15:05:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1200207058",
      "id" : 1200207058,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585HibTS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1200207058/reactions"
      },
      "updated_at" : "2022-07-30T15:05:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1200207058",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The reason for closing - \"this won't be merged\" seems unjustified to me. If Marco did not merge it in the past, that does not mean he will not merge it in the future. Or that another maintainer will not merge it in the future.\r\n\r\nIndeed it has just one ACK. @achow101, maybe you can review this, since you are the original author of the tests.\r\n\r\nI think this PR should be reopened, IMO it is an improvement even if it does not fix the mysterious test failures.",
      "created_at" : "2022-08-10T12:32:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1210608638",
      "id" : 1210608638,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585IKGv-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210608638/reactions"
      },
      "updated_at" : "2022-08-10T12:32:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210608638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "For reference, I created https://github.com/bitcoin/bitcoin/pull/25750 two weeks ago",
      "created_at" : "2022-08-10T12:35:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1210612055",
      "id" : 1210612055,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585IKHlX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210612055/reactions"
      },
      "updated_at" : "2022-08-10T12:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210612055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I think this PR should be reopened, IMO it is an improvement even if it does not fix the mysterious test failures.\r\n\r\nOk, re-opening.\r\n\r\nNote also that many test changes (and regular codebase ones, #25656 would be an example merged today) are merged with one ACK, so this doesn't seem to be a hard rule.",
      "created_at" : "2022-08-10T14:23:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1210746727",
      "id" : 1210746727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585IKodn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210746727/reactions"
      },
      "updated_at" : "2022-08-10T14:57:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210746727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> For reference, I created #25750 two weeks ago\r\n\r\nI'm happy to update this PR with suggestions for improvements or a different approach.",
      "created_at" : "2022-08-10T14:23:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1210747577",
      "id" : 1210747577,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585IKoq5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210747577/reactions"
      },
      "updated_at" : "2022-08-10T14:25:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210747577",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25021#discussion_r942570188"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25021"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/942570188"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point. Updated the assertion error to print i.e. `AssertionError: walletpassphrase \"unlocked_until\" value of 1760141911 not in expected range of 1760141909..1760141910`",
      "commit_id" : "189f57bd03d484f396ffe4cc88164222c57435e2",
      "created_at" : "2022-08-10T15:05:13Z",
      "diff_hunk" : "@@ -26,71 +25,72 @@ def run_test(self):\n         passphrase = \"WalletPassphrase\"\n         passphrase2 = \"SecondWalletPassphrase\"\n \n-        # Make sure the wallet isn't encrypted first\n+        self.log.info(\"Test user actions with an unencrypted wallet\")\n         msg = \"test message\"\n         address = self.nodes[0].getnewaddress(address_type='legacy')\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n         assert_raises_rpc_error(-15, \"Error: running with an unencrypted wallet, but walletpassphrase was called\", self.nodes[0].walletpassphrase, 'ff', 1)\n         assert_raises_rpc_error(-15, \"Error: running with an unencrypted wallet, but walletpassphrasechange was called.\", self.nodes[0].walletpassphrasechange, 'ff', 'ff')\n \n-        # Encrypt the wallet\n+        self.log.info(\"Test encryptwallet with an empty passphrase and with a valid passphrase\")\n         assert_raises_rpc_error(-8, \"passphrase cannot be empty\", self.nodes[0].encryptwallet, '')\n         self.nodes[0].encryptwallet(passphrase)\n \n-        # Test that the wallet is encrypted\n+        self.log.info(\"Test user actions with an encrypted wallet\")\n         assert_raises_rpc_error(-13, \"Please enter the wallet passphrase with walletpassphrase first\", self.nodes[0].signmessage, address, msg)\n         assert_raises_rpc_error(-15, \"Error: running with an encrypted wallet, but encryptwallet was called.\", self.nodes[0].encryptwallet, 'ff')\n         assert_raises_rpc_error(-8, \"passphrase cannot be empty\", self.nodes[0].walletpassphrase, '', 1)\n         assert_raises_rpc_error(-8, \"passphrase cannot be empty\", self.nodes[0].walletpassphrasechange, '', 'ff')\n \n-        # Check that walletpassphrase works\n-        self.nodes[0].walletpassphrase(passphrase, 2)\n+        self.log.info(\"Test walletpassphrase happy path\")\n+        self.nodes[0].walletpassphrase(passphrase=passphrase, timeout=2)\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n \n-        # Check that the timeout is right\n+        self.log.info(\"Test walletpassphrase timeout\")\n         time.sleep(3)\n         assert_raises_rpc_error(-13, \"Please enter the wallet passphrase with walletpassphrase first\", self.nodes[0].signmessage, address, msg)\n \n-        # Test wrong passphrase\n+        self.log.info('Test walletpassphrase with the wrong passphrase')\n         assert_raises_rpc_error(-14, \"wallet passphrase entered was incorrect\", self.nodes[0].walletpassphrase, passphrase + \"wrong\", 10)\n \n-        # Test walletlock\n-        self.nodes[0].walletpassphrase(passphrase, 84600)\n+        self.log.info(\"Test walletlock\")\n+        self.nodes[0].walletpassphrase(passphrase=passphrase, timeout=84600)\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n         self.nodes[0].walletlock()\n         assert_raises_rpc_error(-13, \"Please enter the wallet passphrase with walletpassphrase first\", self.nodes[0].signmessage, address, msg)\n \n-        # Test passphrase changes\n+        self.log.info(\"Test walletpassphrasechange\")\n         self.nodes[0].walletpassphrasechange(passphrase, passphrase2)\n         assert_raises_rpc_error(-14, \"wallet passphrase entered was incorrect\", self.nodes[0].walletpassphrase, passphrase, 10)\n-        self.nodes[0].walletpassphrase(passphrase2, 10)\n+        self.nodes[0].walletpassphrase(passphrase=passphrase2, timeout=10)\n         sig = self.nodes[0].signmessage(address, msg)\n         assert self.nodes[0].verifymessage(address, sig, msg)\n         self.nodes[0].walletlock()\n \n-        # Test timeout bounds\n+        self.log.info(\"Test walletpassphrase with an invalid negative timeout and a valid zero timeout\")\n         assert_raises_rpc_error(-8, \"Timeout cannot be negative.\", self.nodes[0].walletpassphrase, passphrase2, -10)\n-\n-        self.log.info('Check a timeout less than the limit')\n-        MAX_VALUE = 100000000\n-        expected_time = int(time.time()) + MAX_VALUE - 600\n-        self.nodes[0].walletpassphrase(passphrase2, MAX_VALUE - 600)\n-        # give buffer for walletpassphrase, since it iterates over all encrypted keys\n-        expected_time_with_buffer = time.time() + MAX_VALUE - 600\n-        actual_time = self.nodes[0].getwalletinfo()['unlocked_until']\n-        assert_greater_than_or_equal(actual_time, expected_time)\n-        assert_greater_than(expected_time_with_buffer, actual_time)\n-\n-        self.log.info('Check a timeout greater than the limit')\n-        expected_time = int(time.time()) + MAX_VALUE - 1\n-        self.nodes[0].walletpassphrase(passphrase2, MAX_VALUE + 1000)\n-        expected_time_with_buffer = time.time() + MAX_VALUE\n-        actual_time = self.nodes[0].getwalletinfo()['unlocked_until']\n-        assert_greater_than_or_equal(actual_time, expected_time)\n-        assert_greater_than(expected_time_with_buffer, actual_time)\n+        self.nodes[0].walletpassphrase(passphrase=passphrase2, timeout=0)\n+\n+        # Maximum time to keep the decryption key, in seconds (~3 years); see MAX_SLEEP_TIME\n+        timeout_limit = 100_000_000\n+\n+        self.log.info(\"Test walletpassphrase with a timeout less than the limit\")\n+        timeout = timeout_limit - 600\n+        before = floor(time.time()) + timeout\n+        self.nodes[0].walletpassphrase(passphrase2, timeout)\n+        after = ceil(time.time()) + timeout\n+        actual = self.nodes[0].getwalletinfo()['unlocked_until']\n+        assert before <= actual <= after",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#discussion_r942570188",
      "id" : 942570188,
      "in_reply_to_id" : 872401870,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5844LnrM",
      "original_commit_id" : "1a82609ce078e2d3e5e242d85b275b950fd6fb8f",
      "original_line" : 86,
      "original_position" : 107,
      "original_start_line" : null,
      "path" : "test/functional/wallet_encryption.py",
      "position" : null,
      "pull_request_review_id" : 1068458820,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25021",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/942570188/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-10T15:05:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/942570188",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated to improve assertion error, changed the first commit message from \"fix\" to \"work around\" and rebased to current master to enable clang-tidy iwyu checks on the second commit (will re-push after the clang-tidy CI run). Happy to split out the some of changes to a separate pull or to update the approach if reviewers prefer.",
      "created_at" : "2022-08-10T15:08:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1210810616",
      "id" : 1210810616,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585IK4D4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210810616/reactions"
      },
      "updated_at" : "2022-08-10T15:08:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210810616",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> https://github.com/bitcoin/bitcoin/pull/25021/files#r873198183\r\n\r\nHas this been is addressed? If yes, can you mark it as resolved, if not, can you comment?\r\n\r\n> changed the first commit message from \"fix\" to \"work around\" \r\n\r\nIf this is now a work around, rather than a fix, I'd rather use the work-around that is contained to the platform that is broken, i.e #25750, rather than refactoring code that works for all other platforms, and essentially hiding the bug on Windows. At least until we properly understand the issue; see debugging in https://github.com/bitcoin/bitcoin/issues/25482.\r\n\r\nThe PR title and description need updating in any case.",
      "created_at" : "2022-08-10T15:20:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25021#issuecomment-1210850805",
      "id" : 1210850805,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25021",
      "node_id" : "IC_kwDOABII585ILB31",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210850805/reactions"
      },
      "updated_at" : "2022-08-10T15:20:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1210850805",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
