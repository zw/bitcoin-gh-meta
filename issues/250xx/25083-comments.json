[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25005](https://github.com/bitcoin/bitcoin/pull/25005) (wallet: remove extra wtx lookup in 'AvailableCoins' + several code cleanups. by furszy)\n* [#24584](https://github.com/bitcoin/bitcoin/pull/24584) (wallet: avoid mixing different `OutputTypes` during coin selection by josibake)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-05-08T06:24:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#issuecomment-1120359040",
      "id" : 1120359040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25083",
      "node_id" : "IC_kwDOABII585Cx1KA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1120359040/reactions"
      },
      "updated_at" : "2022-05-18T07:46:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1120359040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r867492859"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867492859"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\nvoid AvailableCoinsListUnspent(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, const CAmount& nMinimumAmount = 1, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\r\n```\r\n\r\nThis should fix the clang error.",
      "commit_id" : "b1adf9f3d4e556fb5bc0ff3ddbbe1ea34415205d",
      "created_at" : "2022-05-08T13:36:41Z",
      "diff_hunk" : "@@ -35,7 +35,9 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* walle\n /**\n  * populate vCoins with vector of available COutputs.\n  */\n-void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, const CAmount& nMinimumAmount = 1, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, const CAmount& nMinimumAmount = 1, std::optional<CFeeRate> feerate = std::nullopt, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+\n+void AvailableCoinsListUnspent(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, const CAmount& nMinimumAmount = 1, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r867492859",
      "id" : 867492859,
      "line" : 40,
      "node_id" : "PRRC_kwDOABII584ztOP7",
      "original_commit_id" : "b1adf9f3d4e556fb5bc0ff3ddbbe1ea34415205d",
      "original_line" : 40,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/wallet/spend.h",
      "position" : 7,
      "pull_request_review_id" : 965441993,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867492859/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-08T13:36:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867492859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r867503596"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867503596"
         }
      },
      "author_association" : "MEMBER",
      "body" : "There is extra whitepace on this line that the linter doesn't like.",
      "commit_id" : "7da2200c917a6cbedf2cf6d33e0764116162eae3",
      "created_at" : "2022-05-08T14:58:47Z",
      "diff_hunk" : "@@ -191,8 +191,12 @@ void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const C\n             bool solvable = provider ? IsSolvable(*provider, wtx.tx->vout[i].scriptPubKey) : false;\n             bool spendable = ((mine & ISMINE_SPENDABLE) != ISMINE_NO) || (((mine & ISMINE_WATCH_ONLY) != ISMINE_NO) && (coinControl && coinControl->fAllowWatchOnly && solvable));\n             int input_bytes = GetTxSpendSize(wallet, wtx, i, (coinControl && coinControl->fAllowWatchOnly));\n-\n-            vCoins.emplace_back(COutPoint(wtx.GetHash(), i), wtx.tx->vout.at(i), nDepth, input_bytes, spendable, solvable, safeTx, wtx.GetTxTime(), tx_from_me);\n+            ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r867503596",
      "id" : 867503596,
      "line" : 194,
      "node_id" : "PRRC_kwDOABII584ztQ3s",
      "original_commit_id" : "7da2200c917a6cbedf2cf6d33e0764116162eae3",
      "original_line" : 194,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 15,
      "pull_request_review_id" : 965451165,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867503596/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-08T14:58:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867503596",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r867503792"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867503792"
         }
      },
      "author_association" : "MEMBER",
      "body" : "s/fee/fees\r\n\r\nHere and elsewhere. clang-tidy is complaining about this.",
      "commit_id" : "7da2200c917a6cbedf2cf6d33e0764116162eae3",
      "created_at" : "2022-05-08T15:00:33Z",
      "diff_hunk" : "@@ -58,7 +58,7 @@ static void CoinSelection(benchmark::Bench& bench)\n     // Create coins\n     std::vector<COutput> coins;\n     for (const auto& wtx : wtxs) {\n-        coins.emplace_back(COutPoint(wtx->GetHash(), 0), wtx->tx->vout.at(0), /*depth=*/6 * 24, GetTxSpendSize(wallet, *wtx, 0), /*spendable=*/true, /*solvable=*/true, /*safe=*/true, wtx->GetTxTime(), /*from_me=*/true);\n+        coins.emplace_back(COutPoint(wtx->GetHash(), 0), wtx->tx->vout.at(0), /*depth=*/6 * 24, GetTxSpendSize(wallet, *wtx, 0), /*spendable=*/true, /*solvable=*/true, /*safe=*/true, wtx->GetTxTime(), /*from_me=*/true, /*fee=*/ 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r867503792",
      "id" : 867503792,
      "line" : 61,
      "node_id" : "PRRC_kwDOABII584ztQ6w",
      "original_commit_id" : "7da2200c917a6cbedf2cf6d33e0764116162eae3",
      "original_line" : 61,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/bench/coin_selection.cpp",
      "position" : 5,
      "pull_request_review_id" : 965451339,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867503792/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-08T15:05:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867503792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r867504178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867504178"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: I think it would be better to put `feerate` after `coinControl` to maintain the grouping of similar kinds of parameters.",
      "commit_id" : "7da2200c917a6cbedf2cf6d33e0764116162eae3",
      "created_at" : "2022-05-08T15:03:01Z",
      "diff_hunk" : "@@ -35,7 +35,9 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* walle\n /**\n  * populate vCoins with vector of available COutputs.\n  */\n-void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, const CAmount& nMinimumAmount = 1, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, const CAmount& nMinimumAmount = 1, std::optional<CFeeRate> feerate = std::nullopt, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r867504178",
      "id" : 867504178,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII584ztRAy",
      "original_commit_id" : "7da2200c917a6cbedf2cf6d33e0764116162eae3",
      "original_line" : 38,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/spend.h",
      "position" : 5,
      "pull_request_review_id" : 965451339,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867504178/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-08T15:05:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867504178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r867504999"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867504999"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think it would be better to have `feerate` be a `std::optional<CFeeRate` with a default of `std::nullopt`. This would allow us to do some simplification in `AvailableCoins` where the `CFeeRate` can just be passed in without checking whether it has a value.",
      "commit_id" : "7da2200c917a6cbedf2cf6d33e0764116162eae3",
      "created_at" : "2022-05-08T15:09:12Z",
      "diff_hunk" : "@@ -73,16 +75,49 @@ struct COutput {\n           solvable{solvable},\n           safe{safe},\n           time{time},\n-          from_me{from_me},\n-          effective_value{txout.nValue}\n-    {}\n+          from_me{from_me}\n+    {\n+        if (fees) {\n+            // if input_bytes unknown, the fees should be 0, if input_bytes is known, then the fees should be a positive integer\n+            assert((input_bytes < 0 && fees.value() == 0) || (input_bytes > 0 && fees.value() >= 0));\n+            fee = fees;\n+            effective_value = txout.nValue - fee.value();\n+        }\n+    }\n+\n+    COutput(const COutPoint& outpoint, const CTxOut& txout, int depth, int input_bytes, bool spendable, bool solvable, bool safe, int64_t time, bool from_me, const CFeeRate feerate)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r867504999",
      "id" : 867504999,
      "line" : 88,
      "node_id" : "PRRC_kwDOABII584ztRNn",
      "original_commit_id" : "7da2200c917a6cbedf2cf6d33e0764116162eae3",
      "original_line" : 88,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 50,
      "pull_request_review_id" : 965452250,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867504999/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-08T15:11:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867504999",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r867522903"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867522903"
         }
      },
      "author_association" : "NONE",
      "body" : "Thanks, it's fixed now",
      "commit_id" : "7da2200c917a6cbedf2cf6d33e0764116162eae3",
      "created_at" : "2022-05-08T17:53:31Z",
      "diff_hunk" : "@@ -35,7 +35,9 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* walle\n /**\n  * populate vCoins with vector of available COutputs.\n  */\n-void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, const CAmount& nMinimumAmount = 1, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, const CAmount& nMinimumAmount = 1, std::optional<CFeeRate> feerate = std::nullopt, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+\n+void AvailableCoinsListUnspent(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, const CAmount& nMinimumAmount = 1, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r867522903",
      "id" : 867522903,
      "in_reply_to_id" : 867492859,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584ztVlX",
      "original_commit_id" : "b1adf9f3d4e556fb5bc0ff3ddbbe1ea34415205d",
      "original_line" : 40,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/wallet/spend.h",
      "position" : null,
      "pull_request_review_id" : 965466420,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867522903/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-08T17:53:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867522903",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r868018364"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868018364"
         }
      },
      "author_association" : "NONE",
      "body" : "I've changed it everywhere, thanks.",
      "commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "created_at" : "2022-05-09T13:32:35Z",
      "diff_hunk" : "@@ -58,7 +58,7 @@ static void CoinSelection(benchmark::Bench& bench)\n     // Create coins\n     std::vector<COutput> coins;\n     for (const auto& wtx : wtxs) {\n-        coins.emplace_back(COutPoint(wtx->GetHash(), 0), wtx->tx->vout.at(0), /*depth=*/6 * 24, GetTxSpendSize(wallet, *wtx, 0), /*spendable=*/true, /*solvable=*/true, /*safe=*/true, wtx->GetTxTime(), /*from_me=*/true);\n+        coins.emplace_back(COutPoint(wtx->GetHash(), 0), wtx->tx->vout.at(0), /*depth=*/6 * 24, GetTxSpendSize(wallet, *wtx, 0), /*spendable=*/true, /*solvable=*/true, /*safe=*/true, wtx->GetTxTime(), /*from_me=*/true, /*fee=*/ 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r868018364",
      "id" : 868018364,
      "in_reply_to_id" : 867503792,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zvOi8",
      "original_commit_id" : "7da2200c917a6cbedf2cf6d33e0764116162eae3",
      "original_line" : 61,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/bench/coin_selection.cpp",
      "position" : null,
      "pull_request_review_id" : 966137582,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868018364/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-09T13:32:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868018364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r868020944"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868020944"
         }
      },
      "author_association" : "NONE",
      "body" : "Yeah, I've changed the order.",
      "commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "created_at" : "2022-05-09T13:35:09Z",
      "diff_hunk" : "@@ -35,7 +35,9 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* walle\n /**\n  * populate vCoins with vector of available COutputs.\n  */\n-void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, const CAmount& nMinimumAmount = 1, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, const CAmount& nMinimumAmount = 1, std::optional<CFeeRate> feerate = std::nullopt, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r868020944",
      "id" : 868020944,
      "in_reply_to_id" : 867504178,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zvPLQ",
      "original_commit_id" : "7da2200c917a6cbedf2cf6d33e0764116162eae3",
      "original_line" : 38,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/spend.h",
      "position" : null,
      "pull_request_review_id" : 966141310,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868020944/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-09T13:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868020944",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r868024136"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868024136"
         }
      },
      "author_association" : "NONE",
      "body" : "I agree, it looks a lot cleaner now.",
      "commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "created_at" : "2022-05-09T13:38:25Z",
      "diff_hunk" : "@@ -73,16 +75,49 @@ struct COutput {\n           solvable{solvable},\n           safe{safe},\n           time{time},\n-          from_me{from_me},\n-          effective_value{txout.nValue}\n-    {}\n+          from_me{from_me}\n+    {\n+        if (fees) {\n+            // if input_bytes unknown, the fees should be 0, if input_bytes is known, then the fees should be a positive integer\n+            assert((input_bytes < 0 && fees.value() == 0) || (input_bytes > 0 && fees.value() >= 0));\n+            fee = fees;\n+            effective_value = txout.nValue - fee.value();\n+        }\n+    }\n+\n+    COutput(const COutPoint& outpoint, const CTxOut& txout, int depth, int input_bytes, bool spendable, bool solvable, bool safe, int64_t time, bool from_me, const CFeeRate feerate)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r868024136",
      "id" : 868024136,
      "in_reply_to_id" : 867504999,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zvP9I",
      "original_commit_id" : "7da2200c917a6cbedf2cf6d33e0764116162eae3",
      "original_line" : 88,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 966146053,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868024136/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-09T13:38:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868024136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r868136347"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868136347"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Naming-nit:\r\nSorry to disagree with previous review, but I think that we actually always use `fee` everywhere, so the plural here feels a bit odd. I notice that the parameter name would clash with the class member name, since they'd then both would be named `fee`.\r\n\r\nPerhaps we should use this PR as an opportunity to rename the class members of `COutput` to use the `m_` prefix as suggested by the [Style Guide](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#coding-style-c)? This would allow us to use `fee` for the parameter as the member variable would then be `COutput.m_fee`.",
      "commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "created_at" : "2022-05-09T15:21:40Z",
      "diff_hunk" : "@@ -73,16 +75,49 @@ struct COutput {\n           solvable{solvable},\n           safe{safe},\n           time{time},\n-          from_me{from_me},\n-          effective_value{txout.nValue}\n-    {}\n+          from_me{from_me}\n+    {\n+        if (feerate) {\n+            fee = input_bytes < 0 ? 0 : feerate.value().GetFee(input_bytes);\n+            effective_value = txout.nValue - fee.value();\n+        }\n+    }\n+\n+    COutput(const COutPoint& outpoint, const CTxOut& txout, int depth, int input_bytes, bool spendable, bool solvable, bool safe, int64_t time, bool from_me, const CAmount fees)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r868136347",
      "id" : 868136347,
      "line" : 86,
      "node_id" : "PRRC_kwDOABII584zvrWb",
      "original_commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "original_line" : 86,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 48,
      "pull_request_review_id" : 966338755,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868136347/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-09T15:37:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868136347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r868139385"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868139385"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit: `fee_rate` here, but `feerate` in all the other places I see here. Should this perhaps be made consistent?",
      "commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "created_at" : "2022-05-09T15:24:41Z",
      "diff_hunk" : "@@ -1399,7 +1399,7 @@ RPCHelpMan sendall()\n                     total_input_value += tx->tx->vout[input.prevout.n].nValue;\n                 }\n             } else {\n-                AvailableCoins(*pwallet, all_the_utxos, &coin_control, /*nMinimumAmount=*/0);\n+                AvailableCoins(*pwallet, all_the_utxos, &coin_control, fee_rate, /*nMinimumAmount=*/0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r868139385",
      "id" : 868139385,
      "line" : 1402,
      "node_id" : "PRRC_kwDOABII584zvsF5",
      "original_commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "original_line" : 1402,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 5,
      "pull_request_review_id" : 966338755,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868139385/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-09T15:37:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868139385",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r868151129"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868151129"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Would these additional testcases perhaps be interesting?:\r\nWhat happens if a non-zero fee is passed while `input_bytes` is `-1`? What happens if a fee greater than `nValue` is passed while `input_bytes` is `-1`?",
      "commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "created_at" : "2022-05-09T15:36:09Z",
      "diff_hunk" : "@@ -815,5 +813,40 @@ BOOST_AUTO_TEST_CASE(waste_test)\n     BOOST_CHECK_EQUAL(0, GetSelectionWaste(selection, /* change cost */ 0, new_target));\n }\n \n+BOOST_AUTO_TEST_CASE(effective_value_test)\n+{\n+    const int input_bytes = 148;\n+    const CFeeRate feerate(1000);\n+    const CAmount nValue = 10000;\n+    const int nInput = 0;\n+\n+    CMutableTransaction tx;\n+    tx.vout.resize(1);\n+    tx.vout[nInput].nValue = nValue;\n+\n+    // standard case, pass feerate in constructor\n+    COutput output1(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, input_bytes, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, feerate);\n+    const CAmount expected_ev1 = 9852; // 10000 - 148\n+    BOOST_CHECK_EQUAL(output1.GetEffectiveValue(), expected_ev1);\n+\n+    // input bytes unknown (input_bytes = -1), pass feerate in constructor\n+    COutput output2(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, /*input_bytes=*/ -1, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, feerate);\n+    BOOST_CHECK_EQUAL(output2.GetEffectiveValue(), nValue); // The effective value should be equal to the absolute value if input_bytes is -1\n+\n+    // negative effective value, pass feerate in constructor\n+    COutput output3(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, input_bytes, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, CFeeRate(100000));\n+    const CAmount expected_ev3 = -4800; // 10000 - 14800\n+    BOOST_CHECK_EQUAL(output3.GetEffectiveValue(), expected_ev3);\n+\n+    // standard case, pass fees in constructor\n+    const CAmount fees = 148;\n+    COutput output4(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, input_bytes, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, fees);\n+    BOOST_CHECK_EQUAL(output4.GetEffectiveValue(), expected_ev1);\n+\n+    // input bytes unknown (input_bytes = -1), pass fees in constructor\n+    COutput output5(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, /*input_bytes=*/ -1, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, /*fees=*/ 0);\n+    BOOST_CHECK_EQUAL(output5.GetEffectiveValue(), nValue); // The effective value should be equal to the absolute value if input_bytes is -1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r868151129",
      "id" : 868151129,
      "line" : 848,
      "node_id" : "PRRC_kwDOABII584zvu9Z",
      "original_commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "original_line" : 848,
      "original_position" : 127,
      "original_start_line" : 846,
      "path" : "src/wallet/test/coinselector_tests.cpp",
      "position" : 127,
      "pull_request_review_id" : 966338755,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868151129/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 846,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-09T15:37:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868151129",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r868266184"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868266184"
         }
      },
      "author_association" : "NONE",
      "body" : "I think that in both of these cases the assertion on src/wallet/coinselection.h:98 will just fail. `fee` must be `0` whenever `input_bytes` has a negative value.",
      "commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "created_at" : "2022-05-09T17:49:31Z",
      "diff_hunk" : "@@ -815,5 +813,40 @@ BOOST_AUTO_TEST_CASE(waste_test)\n     BOOST_CHECK_EQUAL(0, GetSelectionWaste(selection, /* change cost */ 0, new_target));\n }\n \n+BOOST_AUTO_TEST_CASE(effective_value_test)\n+{\n+    const int input_bytes = 148;\n+    const CFeeRate feerate(1000);\n+    const CAmount nValue = 10000;\n+    const int nInput = 0;\n+\n+    CMutableTransaction tx;\n+    tx.vout.resize(1);\n+    tx.vout[nInput].nValue = nValue;\n+\n+    // standard case, pass feerate in constructor\n+    COutput output1(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, input_bytes, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, feerate);\n+    const CAmount expected_ev1 = 9852; // 10000 - 148\n+    BOOST_CHECK_EQUAL(output1.GetEffectiveValue(), expected_ev1);\n+\n+    // input bytes unknown (input_bytes = -1), pass feerate in constructor\n+    COutput output2(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, /*input_bytes=*/ -1, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, feerate);\n+    BOOST_CHECK_EQUAL(output2.GetEffectiveValue(), nValue); // The effective value should be equal to the absolute value if input_bytes is -1\n+\n+    // negative effective value, pass feerate in constructor\n+    COutput output3(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, input_bytes, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, CFeeRate(100000));\n+    const CAmount expected_ev3 = -4800; // 10000 - 14800\n+    BOOST_CHECK_EQUAL(output3.GetEffectiveValue(), expected_ev3);\n+\n+    // standard case, pass fees in constructor\n+    const CAmount fees = 148;\n+    COutput output4(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, input_bytes, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, fees);\n+    BOOST_CHECK_EQUAL(output4.GetEffectiveValue(), expected_ev1);\n+\n+    // input bytes unknown (input_bytes = -1), pass fees in constructor\n+    COutput output5(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, /*input_bytes=*/ -1, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, /*fees=*/ 0);\n+    BOOST_CHECK_EQUAL(output5.GetEffectiveValue(), nValue); // The effective value should be equal to the absolute value if input_bytes is -1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r868266184",
      "id" : 868266184,
      "in_reply_to_id" : 868151129,
      "line" : 848,
      "node_id" : "PRRC_kwDOABII584zwLDI",
      "original_commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "original_line" : 848,
      "original_position" : 127,
      "original_start_line" : 846,
      "path" : "src/wallet/test/coinselector_tests.cpp",
      "position" : 127,
      "pull_request_review_id" : 966617397,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868266184/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 846,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-09T17:49:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868266184",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r870792429"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/870792429"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah good to see that you're stating your assumptions. :)",
      "commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "created_at" : "2022-05-11T22:08:51Z",
      "diff_hunk" : "@@ -815,5 +813,40 @@ BOOST_AUTO_TEST_CASE(waste_test)\n     BOOST_CHECK_EQUAL(0, GetSelectionWaste(selection, /* change cost */ 0, new_target));\n }\n \n+BOOST_AUTO_TEST_CASE(effective_value_test)\n+{\n+    const int input_bytes = 148;\n+    const CFeeRate feerate(1000);\n+    const CAmount nValue = 10000;\n+    const int nInput = 0;\n+\n+    CMutableTransaction tx;\n+    tx.vout.resize(1);\n+    tx.vout[nInput].nValue = nValue;\n+\n+    // standard case, pass feerate in constructor\n+    COutput output1(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, input_bytes, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, feerate);\n+    const CAmount expected_ev1 = 9852; // 10000 - 148\n+    BOOST_CHECK_EQUAL(output1.GetEffectiveValue(), expected_ev1);\n+\n+    // input bytes unknown (input_bytes = -1), pass feerate in constructor\n+    COutput output2(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, /*input_bytes=*/ -1, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, feerate);\n+    BOOST_CHECK_EQUAL(output2.GetEffectiveValue(), nValue); // The effective value should be equal to the absolute value if input_bytes is -1\n+\n+    // negative effective value, pass feerate in constructor\n+    COutput output3(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, input_bytes, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, CFeeRate(100000));\n+    const CAmount expected_ev3 = -4800; // 10000 - 14800\n+    BOOST_CHECK_EQUAL(output3.GetEffectiveValue(), expected_ev3);\n+\n+    // standard case, pass fees in constructor\n+    const CAmount fees = 148;\n+    COutput output4(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, input_bytes, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, fees);\n+    BOOST_CHECK_EQUAL(output4.GetEffectiveValue(), expected_ev1);\n+\n+    // input bytes unknown (input_bytes = -1), pass fees in constructor\n+    COutput output5(COutPoint(tx.GetHash(), nInput), tx.vout.at(nInput), /*depth=*/ 1, /*input_bytes=*/ -1, /*spendable=*/ true, /*solvable=*/ true, /*safe=*/ true, /*time=*/ 0, /*from_me=*/ false, /*fees=*/ 0);\n+    BOOST_CHECK_EQUAL(output5.GetEffectiveValue(), nValue); // The effective value should be equal to the absolute value if input_bytes is -1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r870792429",
      "id" : 870792429,
      "in_reply_to_id" : 868151129,
      "line" : 848,
      "node_id" : "PRRC_kwDOABII584z5zzt",
      "original_commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "original_line" : 848,
      "original_position" : 127,
      "original_start_line" : 846,
      "path" : "src/wallet/test/coinselector_tests.cpp",
      "position" : 127,
      "pull_request_review_id" : 970052987,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/870792429/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 846,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-11T22:08:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/870792429",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871296996"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871296996"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Perhaps we should use this PR as an opportunity to rename the class members of COutput to use the m_ prefix as suggested by the [Style Guide](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#coding-style-c)? \r\n\r\nDunno. FWIW `m_` meant is for fully-fledged, self contained classes, not 'dumb structs' which simply keep some data together (like `COutput` seems to be). The rationale for it is that within methods it's easier to distinguish local variables from class variables. Classes with no methods beyond construction/comparison don't need that and only adds more verbosity.",
      "commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "created_at" : "2022-05-12T12:05:31Z",
      "diff_hunk" : "@@ -73,16 +75,49 @@ struct COutput {\n           solvable{solvable},\n           safe{safe},\n           time{time},\n-          from_me{from_me},\n-          effective_value{txout.nValue}\n-    {}\n+          from_me{from_me}\n+    {\n+        if (feerate) {\n+            fee = input_bytes < 0 ? 0 : feerate.value().GetFee(input_bytes);\n+            effective_value = txout.nValue - fee.value();\n+        }\n+    }\n+\n+    COutput(const COutPoint& outpoint, const CTxOut& txout, int depth, int input_bytes, bool spendable, bool solvable, bool safe, int64_t time, bool from_me, const CAmount fees)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871296996",
      "id" : 871296996,
      "in_reply_to_id" : 868136347,
      "line" : 86,
      "node_id" : "PRRC_kwDOABII584z7u_k",
      "original_commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "original_line" : 86,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 48,
      "pull_request_review_id" : 970731865,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871296996/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-12T12:06:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871296996",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871644033"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871644033"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Okay, thanks for the guidance",
      "commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "created_at" : "2022-05-12T17:30:42Z",
      "diff_hunk" : "@@ -73,16 +75,49 @@ struct COutput {\n           solvable{solvable},\n           safe{safe},\n           time{time},\n-          from_me{from_me},\n-          effective_value{txout.nValue}\n-    {}\n+          from_me{from_me}\n+    {\n+        if (feerate) {\n+            fee = input_bytes < 0 ? 0 : feerate.value().GetFee(input_bytes);\n+            effective_value = txout.nValue - fee.value();\n+        }\n+    }\n+\n+    COutput(const COutPoint& outpoint, const CTxOut& txout, int depth, int input_bytes, bool spendable, bool solvable, bool safe, int64_t time, bool from_me, const CAmount fees)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871644033",
      "id" : 871644033,
      "in_reply_to_id" : 868136347,
      "line" : 86,
      "node_id" : "PRRC_kwDOABII584z9DuB",
      "original_commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "original_line" : 86,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 48,
      "pull_request_review_id" : 971226032,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871644033/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-12T17:30:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871644033",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871648941"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871648941"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> FWIW `m_` meant is for fully-fledged, self contained classes, not 'dumb structs' which simply keep some data together (like `COutput` seems to be). The rationale for it is that within methods it's easier to distinguish local variables from class variables. Classes with no methods beyond construction/comparison don't need that and only adds more verbosity.\r\n\r\nI wonder if there would be rough consensus on the following (I wouldn't be against)\r\n\r\n```diff\r\n--- a/doc/developer-notes.md\r\n+++ b/doc/developer-notes.md\r\n@@ -88,8 +88,10 @@ required when doing so would need changes to significant pieces of existing\r\n code.\r\n   - Variable (including function arguments) and namespace names are all lowercase and may use `_` to\r\n     separate words (snake_case).\r\n-    - Class member variables have a `m_` prefix.\r\n-    - Global variables have a `g_` prefix.\r\n+  - Class member variables have an `m_` prefix in cases where it makes it easier\r\n+    to distinguish them from local variables in the class (otherwise, it isn't\r\n+    needed and only adds more verbosity).\r\n+  - Global variables have a `g_` prefix.\r\n   - Constant names are all uppercase, and use `_` to separate words.\r\n   - Enumerator constants may be `snake_case`, `PascalCase` or `ALL_CAPS`.\r\n```\r\n",
      "commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "created_at" : "2022-05-12T17:36:57Z",
      "diff_hunk" : "@@ -73,16 +75,49 @@ struct COutput {\n           solvable{solvable},\n           safe{safe},\n           time{time},\n-          from_me{from_me},\n-          effective_value{txout.nValue}\n-    {}\n+          from_me{from_me}\n+    {\n+        if (feerate) {\n+            fee = input_bytes < 0 ? 0 : feerate.value().GetFee(input_bytes);\n+            effective_value = txout.nValue - fee.value();\n+        }\n+    }\n+\n+    COutput(const COutPoint& outpoint, const CTxOut& txout, int depth, int input_bytes, bool spendable, bool solvable, bool safe, int64_t time, bool from_me, const CAmount fees)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871648941",
      "id" : 871648941,
      "in_reply_to_id" : 868136347,
      "line" : 86,
      "node_id" : "PRRC_kwDOABII584z9E6t",
      "original_commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "original_line" : 86,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 48,
      "pull_request_review_id" : 971233030,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871648941/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-12T17:36:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871648941",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871669595"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871669595"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "style nit:\r\n```suggestion\r\n        selected_effective_value += use_effective_value ? coin.GetEffectiveValue() : coin.txout.nValue;\r\n```",
      "commit_id" : "f5a7495c546c13c985bd92a030af092b17c67108",
      "created_at" : "2022-05-12T18:02:22Z",
      "diff_hunk" : "@@ -380,8 +374,8 @@ CAmount GetSelectionWaste(const std::set<COutput>& inputs, CAmount change_cost,\n     CAmount waste = 0;\n     CAmount selected_effective_value = 0;\n     for (const COutput& coin : inputs) {\n-        waste += coin.fee - coin.long_term_fee;\n-        selected_effective_value += use_effective_value ? coin.effective_value : coin.txout.nValue;\n+        waste += coin.GetFee() - coin.long_term_fee;\n+        selected_effective_value += use_effective_value ? coin.GetEffectiveValue(): coin.txout.nValue;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871669595",
      "id" : 871669595,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584z9J9b",
      "original_commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "original_line" : 378,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 971261366,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871669595/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-12T18:24:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871669595",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871670946"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871670946"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This comment seems to be outdated. FWIU, we should be initializing this with the correct value now.",
      "commit_id" : "f5a7495c546c13c985bd92a030af092b17c67108",
      "created_at" : "2022-05-12T18:04:06Z",
      "diff_hunk" : "@@ -20,6 +20,14 @@ static constexpr CAmount CHANGE_UPPER{1000000};\n \n /** A UTXO under consideration for use in funding a new transaction. */\n struct COutput {\n+private:\n+    /** The output's value minus fees required to spend it. Initialized as the output's absolute value. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871670946",
      "id" : 871670946,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584z9KSi",
      "original_commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "original_line" : 24,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 971261366,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871670946/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-12T19:30:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871670946",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871672762"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871672762"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Optional:\r\n> if input_bytes is known, then the fees should be a positive integer\r\n\r\nI see that some of the tests for this constructor pass `fees = 0`. What would need to happen for `fees` to be zero when `input_bytes` is greater than zero? IIRC, when SFFO is being used, we use the actual value of the UTXO instead of its effective value, so there too, a fee greater than zero should follow if both feerate and `input_bytes` are known. So, I wonder here whethere `fees = 0` only occurs in the context of tests, or whether this occurs perhaps also in the context of listing unspents outside of transaction building. If so, it could perhaps be mentioned in the comment here.",
      "commit_id" : "f5a7495c546c13c985bd92a030af092b17c67108",
      "created_at" : "2022-05-12T18:06:28Z",
      "diff_hunk" : "@@ -73,16 +75,49 @@ struct COutput {\n           solvable{solvable},\n           safe{safe},\n           time{time},\n-          from_me{from_me},\n-          effective_value{txout.nValue}\n-    {}\n+          from_me{from_me}\n+    {\n+        if (feerate) {\n+            fee = input_bytes < 0 ? 0 : feerate.value().GetFee(input_bytes);\n+            effective_value = txout.nValue - fee.value();\n+        }\n+    }\n+\n+    COutput(const COutPoint& outpoint, const CTxOut& txout, int depth, int input_bytes, bool spendable, bool solvable, bool safe, int64_t time, bool from_me, const CAmount fees)\n+        : outpoint{outpoint},\n+          txout{txout},\n+          depth{depth},\n+          input_bytes{input_bytes},\n+          spendable{spendable},\n+          solvable{solvable},\n+          safe{safe},\n+          time{time},\n+          from_me{from_me}\n+    {\n+        // if input_bytes unknown, the fees should be 0, if input_bytes is known, then the fees should be a positive integer\n+        assert((input_bytes < 0 && fees == 0) || (input_bytes > 0 && fees >= 0));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871672762",
      "id" : 871672762,
      "line" : 98,
      "node_id" : "PRRC_kwDOABII584z9Ku6",
      "original_commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "original_line" : 98,
      "original_position" : 60,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 60,
      "pull_request_review_id" : 971261366,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871672762/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-12T18:24:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871672762",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871842429"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871842429"
         }
      },
      "author_association" : "NONE",
      "body" : "It is outdated, I forgot to update this comment.",
      "commit_id" : "f5a7495c546c13c985bd92a030af092b17c67108",
      "created_at" : "2022-05-12T22:01:34Z",
      "diff_hunk" : "@@ -20,6 +20,14 @@ static constexpr CAmount CHANGE_UPPER{1000000};\n \n /** A UTXO under consideration for use in funding a new transaction. */\n struct COutput {\n+private:\n+    /** The output's value minus fees required to spend it. Initialized as the output's absolute value. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871842429",
      "id" : 871842429,
      "in_reply_to_id" : 871670946,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584z90J9",
      "original_commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "original_line" : 24,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 971502047,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871842429/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-12T22:01:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871842429",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871848615"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871848615"
         }
      },
      "author_association" : "NONE",
      "body" : "Yes, `fees = 0` only happens in the context of tests so far. I will mention this here.",
      "commit_id" : "f5a7495c546c13c985bd92a030af092b17c67108",
      "created_at" : "2022-05-12T22:14:15Z",
      "diff_hunk" : "@@ -73,16 +75,49 @@ struct COutput {\n           solvable{solvable},\n           safe{safe},\n           time{time},\n-          from_me{from_me},\n-          effective_value{txout.nValue}\n-    {}\n+          from_me{from_me}\n+    {\n+        if (feerate) {\n+            fee = input_bytes < 0 ? 0 : feerate.value().GetFee(input_bytes);\n+            effective_value = txout.nValue - fee.value();\n+        }\n+    }\n+\n+    COutput(const COutPoint& outpoint, const CTxOut& txout, int depth, int input_bytes, bool spendable, bool solvable, bool safe, int64_t time, bool from_me, const CAmount fees)\n+        : outpoint{outpoint},\n+          txout{txout},\n+          depth{depth},\n+          input_bytes{input_bytes},\n+          spendable{spendable},\n+          solvable{solvable},\n+          safe{safe},\n+          time{time},\n+          from_me{from_me}\n+    {\n+        // if input_bytes unknown, the fees should be 0, if input_bytes is known, then the fees should be a positive integer\n+        assert((input_bytes < 0 && fees == 0) || (input_bytes > 0 && fees >= 0));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r871848615",
      "id" : 871848615,
      "in_reply_to_id" : 871672762,
      "line" : 98,
      "node_id" : "PRRC_kwDOABII584z91qn",
      "original_commit_id" : "b07500f28cff352239a6ffbf1da9f4d2bc965838",
      "original_line" : 98,
      "original_position" : 60,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 60,
      "pull_request_review_id" : 971510590,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871848615/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-12T22:14:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/871848615",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK f5a7495c546c13c985bd92a030af092b17c67108",
      "created_at" : "2022-05-13T13:54:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#issuecomment-1126082288",
      "id" : 1126082288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25083",
      "node_id" : "IC_kwDOABII585DHqbw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126082288/reactions"
      },
      "updated_at" : "2022-05-13T13:54:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1126082288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r873212302"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873212302"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This comment would fit better above the `AvailableCoinsListUnspent` declaration in wallet/spend.h so someone looking to understand how to use the interface at a glance can see it. Also, consider making it [doxygen-compatible](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#coding-style-doxygen-compatible-comments).",
      "commit_id" : "f5a7495c546c13c985bd92a030af092b17c67108",
      "created_at" : "2022-05-15T19:17:14Z",
      "diff_hunk" : "@@ -211,13 +211,19 @@ void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const C\n     }\n }\n \n+// Allows the 'feerate' optional parameter of AvailableCoins to be skipped when utxos are not being spent",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r873212302",
      "id" : 873212302,
      "line" : 214,
      "node_id" : "PRRC_kwDOABII5840DCmO",
      "original_commit_id" : "f5a7495c546c13c985bd92a030af092b17c67108",
      "original_line" : 214,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 22,
      "pull_request_review_id" : 973207802,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873212302/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-15T19:28:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873212302",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r873252098"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873252098"
         }
      },
      "author_association" : "NONE",
      "body" : "done, I also clarified the comment a bit as well",
      "commit_id" : "1f1a75f3d2277f05549395f80b5e1c2d932a7d3f",
      "created_at" : "2022-05-16T00:18:56Z",
      "diff_hunk" : "@@ -211,13 +211,19 @@ void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const C\n     }\n }\n \n+// Allows the 'feerate' optional parameter of AvailableCoins to be skipped when utxos are not being spent",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r873252098",
      "id" : 873252098,
      "in_reply_to_id" : 873212302,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840DMUC",
      "original_commit_id" : "f5a7495c546c13c985bd92a030af092b17c67108",
      "original_line" : 214,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 973306159,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873252098/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-16T00:18:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873252098",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "At this point, I've addressed all of the suggestions provided by @achow101 @glozow and @Xekyo (thank you!) except for the `fee_rate` nit which I'm still unsure whether to act upon or not.",
      "created_at" : "2022-05-16T00:39:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#issuecomment-1127102453",
      "id" : 1127102453,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25083",
      "node_id" : "IC_kwDOABII585DLjf1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127102453/reactions"
      },
      "updated_at" : "2022-05-16T00:39:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127102453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> At this point, I've addressed all of the suggestions provided by @achow101 @glozow and @Xekyo (thank you!) except for the `fee_rate` nit which I'm still unsure whether to act upon or not.\r\n\r\nUnless more people start asking for the `fee_rate` change, don't worry about that. :smile:",
      "created_at" : "2022-05-16T13:40:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#issuecomment-1127691100",
      "id" : 1127691100,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25083",
      "node_id" : "IC_kwDOABII585DNzNc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127691100/reactions"
      },
      "updated_at" : "2022-05-16T13:40:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127691100",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r873848790"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873848790"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: This could be condensed by using constructor delegation\r\n\r\n```suggestion\r\n        : COutput(outpoint, txout, depth, input_bytes, spendable, solvable, safe, time, from_me)\r\n```",
      "commit_id" : "1f1a75f3d2277f05549395f80b5e1c2d932a7d3f",
      "created_at" : "2022-05-16T15:12:24Z",
      "diff_hunk" : "@@ -73,16 +75,49 @@ struct COutput {\n           solvable{solvable},\n           safe{safe},\n           time{time},\n-          from_me{from_me},\n-          effective_value{txout.nValue}\n-    {}\n+          from_me{from_me}\n+    {\n+        if (feerate) {\n+            fee = input_bytes < 0 ? 0 : feerate.value().GetFee(input_bytes);\n+            effective_value = txout.nValue - fee.value();\n+        }\n+    }\n+\n+    COutput(const COutPoint& outpoint, const CTxOut& txout, int depth, int input_bytes, bool spendable, bool solvable, bool safe, int64_t time, bool from_me, const CAmount fees)\n+        : outpoint{outpoint},\n+          txout{txout},\n+          depth{depth},\n+          input_bytes{input_bytes},\n+          spendable{spendable},\n+          solvable{solvable},\n+          safe{safe},\n+          time{time},\n+          from_me{from_me}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r873848790",
      "id" : 873848790,
      "line" : 95,
      "node_id" : "PRRC_kwDOABII5840Fd_W",
      "original_commit_id" : "1f1a75f3d2277f05549395f80b5e1c2d932a7d3f",
      "original_line" : 95,
      "original_position" : 57,
      "original_start_line" : 87,
      "path" : "src/wallet/coinselection.h",
      "position" : 57,
      "pull_request_review_id" : 974134892,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873848790/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 87,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-16T15:13:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873848790",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re-ACK 1f1a75f3d2277f05549395f80b5e1c2d932a7d3f",
      "created_at" : "2022-05-16T15:51:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#issuecomment-1127843524",
      "id" : 1127843524,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25083",
      "node_id" : "IC_kwDOABII585DOYbE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127843524/reactions"
      },
      "updated_at" : "2022-05-16T15:51:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1127843524",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r878561891"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878561891"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I will do this the next time I modify this PR",
      "commit_id" : "5bd3b71304e3d8843b11941959cefdd180edf624",
      "created_at" : "2022-05-20T21:44:03Z",
      "diff_hunk" : "@@ -73,16 +75,49 @@ struct COutput {\n           solvable{solvable},\n           safe{safe},\n           time{time},\n-          from_me{from_me},\n-          effective_value{txout.nValue}\n-    {}\n+          from_me{from_me}\n+    {\n+        if (feerate) {\n+            fee = input_bytes < 0 ? 0 : feerate.value().GetFee(input_bytes);\n+            effective_value = txout.nValue - fee.value();\n+        }\n+    }\n+\n+    COutput(const COutPoint& outpoint, const CTxOut& txout, int depth, int input_bytes, bool spendable, bool solvable, bool safe, int64_t time, bool from_me, const CAmount fees)\n+        : outpoint{outpoint},\n+          txout{txout},\n+          depth{depth},\n+          input_bytes{input_bytes},\n+          spendable{spendable},\n+          solvable{solvable},\n+          safe{safe},\n+          time{time},\n+          from_me{from_me}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r878561891",
      "id" : 878561891,
      "in_reply_to_id" : 873848790,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840Xcpj",
      "original_commit_id" : "1f1a75f3d2277f05549395f80b5e1c2d932a7d3f",
      "original_line" : 95,
      "original_position" : 57,
      "original_start_line" : 87,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 980691792,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878561891/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-20T21:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878561891",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r878591627"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878591627"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit\r\n```suggestion\r\n * Wrapper function for AvailableCoins which skips the `feerate` parameter. Use this function\r\n * to list all available coins (e.g. listunspent RPC) while not intending to fund a transaction.\r\n```",
      "commit_id" : "5bd3b71304e3d8843b11941959cefdd180edf624",
      "created_at" : "2022-05-20T23:15:42Z",
      "diff_hunk" : "@@ -35,7 +35,13 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* walle\n /**\n  * populate vCoins with vector of available COutputs.\n  */\n-void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, const CAmount& nMinimumAmount = 1, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, std::optional<CFeeRate> feerate = std::nullopt, const CAmount& nMinimumAmount = 1, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+\n+/**\n+ * Runs AvailableCoins but allows the `feerate` optional parameter of",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r878591627",
      "id" : 878591627,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840Xj6L",
      "original_commit_id" : "1f1a75f3d2277f05549395f80b5e1c2d932a7d3f",
      "original_line" : 41,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/wallet/spend.h",
      "position" : null,
      "pull_request_review_id" : 980730448,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878591627/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-20T23:24:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878591627",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r878639481"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878639481"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done, this sounds much better",
      "commit_id" : "5bd3b71304e3d8843b11941959cefdd180edf624",
      "created_at" : "2022-05-21T03:59:19Z",
      "diff_hunk" : "@@ -35,7 +35,13 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction& tx, const CWallet* walle\n /**\n  * populate vCoins with vector of available COutputs.\n  */\n-void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, const CAmount& nMinimumAmount = 1, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl = nullptr, std::optional<CFeeRate> feerate = std::nullopt, const CAmount& nMinimumAmount = 1, const CAmount& nMaximumAmount = MAX_MONEY, const CAmount& nMinimumSumAmount = MAX_MONEY, const uint64_t nMaximumCount = 0) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+\n+/**\n+ * Runs AvailableCoins but allows the `feerate` optional parameter of",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r878639481",
      "id" : 878639481,
      "in_reply_to_id" : 878591627,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840Xvl5",
      "original_commit_id" : "1f1a75f3d2277f05549395f80b5e1c2d932a7d3f",
      "original_line" : 41,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/wallet/spend.h",
      "position" : null,
      "pull_request_review_id" : 980781971,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878639481/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-21T03:59:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878639481",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r878639515"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878639515"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "5bd3b71304e3d8843b11941959cefdd180edf624",
      "created_at" : "2022-05-21T04:00:01Z",
      "diff_hunk" : "@@ -73,16 +75,49 @@ struct COutput {\n           solvable{solvable},\n           safe{safe},\n           time{time},\n-          from_me{from_me},\n-          effective_value{txout.nValue}\n-    {}\n+          from_me{from_me}\n+    {\n+        if (feerate) {\n+            fee = input_bytes < 0 ? 0 : feerate.value().GetFee(input_bytes);\n+            effective_value = txout.nValue - fee.value();\n+        }\n+    }\n+\n+    COutput(const COutPoint& outpoint, const CTxOut& txout, int depth, int input_bytes, bool spendable, bool solvable, bool safe, int64_t time, bool from_me, const CAmount fees)\n+        : outpoint{outpoint},\n+          txout{txout},\n+          depth{depth},\n+          input_bytes{input_bytes},\n+          spendable{spendable},\n+          solvable{solvable},\n+          safe{safe},\n+          time{time},\n+          from_me{from_me}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#discussion_r878639515",
      "id" : 878639515,
      "in_reply_to_id" : 873848790,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840Xvmb",
      "original_commit_id" : "1f1a75f3d2277f05549395f80b5e1c2d932a7d3f",
      "original_line" : 95,
      "original_position" : 57,
      "original_start_line" : 87,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 980782020,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25083",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878639515/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-21T04:00:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878639515",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Implemented changes suggested by @glozow and @achow101 and rebased due to silent merge conflict",
      "created_at" : "2022-05-21T04:08:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25083#issuecomment-1133526379",
      "id" : 1133526379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25083",
      "node_id" : "IC_kwDOABII585DkD1r",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133526379/reactions"
      },
      "updated_at" : "2022-05-21T04:08:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133526379",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   }
]
