[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, seems reasonable.",
      "created_at" : "2018-01-09T18:26:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12102#issuecomment-356371471",
      "id" : 356371471,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12102",
      "updated_at" : "2018-01-09T18:26:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/356371471",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Here's documentation for the 4 new options being added, taken from the [freedesktop.org docs](https://www.freedesktop.org/software/systemd/man/systemd.exec.html).\r\n\r\n#### ProtectSystem\r\nTakes a boolean argument or the special values \"full\" or \"strict\". If true, mounts the /usr and /boot directories read-only for processes invoked by this unit. If set to \"full\", the /etc directory is mounted read-only, too. If set to \"strict\" the entire file system hierarchy is mounted read-only, except for the API file system subtrees /dev, /proc and /sys (protect these directories using PrivateDevices=, ProtectKernelTunables=, ProtectControlGroups=). This setting ensures that any modification of the vendor-supplied operating system (and optionally its configuration, and local mounts) is prohibited for the service. It is recommended to enable this setting for all long-running services, unless they are involved with system updates or need to modify the operating system in other ways. If this option is used, ReadWritePaths= may be used to exclude specific directories from being made read-only. This setting is implied if DynamicUser= is set. For this setting the same restrictions regarding mount propagation and privileges apply as for ReadOnlyPaths= and related calls, see below. Defaults to off.\r\n\r\n#### NoNewPrivileges\r\nTakes a boolean argument. If true, ensures that the service process and all its children can never gain new privileges through execve() (e.g. via setuid or setgid bits, or filesystem capabilities). This is the simplest and most effective way to ensure that a process and its children can never elevate privileges again. Defaults to false, but certain settings override this and ignore the value of this setting. This is the case when SystemCallFilter=, SystemCallArchitectures=, RestrictAddressFamilies=, RestrictNamespaces=, PrivateDevices=, ProtectKernelTunables=, ProtectKernelModules=, MemoryDenyWriteExecute=, RestrictRealtime=, or LockPersonality= are specified. Note that even if this setting is overridden by them, systemctl show shows the original value of this setting. Also see No New Privileges Flag.\r\n\r\n#### PrivateDevices\r\nTakes a boolean argument. If true, sets up a new /dev mount for the executed processes and only adds API pseudo devices such as /dev/null, /dev/zero or /dev/random (as well as the pseudo TTY subsystem) to it, but no physical devices such as /dev/sda, system memory /dev/mem, system ports /dev/port and others. This is useful to securely turn off physical device access by the executed process. Defaults to false. Enabling this option will install a system call filter to block low-level I/O system calls that are grouped in the @raw-io set, will also remove CAP_MKNOD and CAP_SYS_RAWIO from the capability bounding set for the unit (see above), and set DevicePolicy=closed (see systemd.resource-control(5) for details). Note that using this setting will disconnect propagation of mounts from the service to the host (propagation in the opposite direction continues to work). This means that this setting may not be used for services which shall be able to install mount points in the main mount namespace. The new /dev will be mounted read-only and 'noexec'. The latter may break old programs which try to set up executable memory by using mmap(2) of /dev/zero instead of using MAP_ANON. For this setting the same restrictions regarding mount propagation and privileges apply as for ReadOnlyPaths= and related calls, see above. If turned on and if running in user mode, or in system mode, but without the CAP_SYS_ADMIN capability (e.g. setting User=), NoNewPrivileges=yes is implied.\r\n\r\nNote that the implementation of this setting might be impossible (for example if mount namespaces are not available), and the unit should be written in a way that does not solely rely on this setting for security.\r\n\r\n#### MemoryDenyWriteExecute\r\nTakes a boolean argument. If set, attempts to create memory mappings that are writable and executable at the same time, or to change existing memory mappings to become executable, or mapping shared memory segments as executable are prohibited. Specifically, a system call filter is added that rejects mmap(2) system calls with both PROT_EXEC and PROT_WRITE set, mprotect(2) or pkey_mprotect(2) system calls with PROT_EXEC set and shmat(2) system calls with SHM_EXEC set. Note that this option is incompatible with programs and libraries that generate program code dynamically at runtime, including JIT execution engines, executable stacks, and code \"trampoline\" feature of various C compilers. This option improves service security, as it makes harder for software exploits to change running code dynamically. Note that this feature is fully available on x86-64, and partially on x86. Specifically, the shmat() protection is not available on x86. Note that on systems supporting multiple ABIs (such as x86/x86-64) it is recommended to turn off alternative ABIs for services, so that they cannot be used to circumvent the restrictions of this option. Specifically, it is recommended to combine this option with SystemCallArchitectures=native or similar. If running in user mode, or in system mode, but without the CAP_SYS_ADMIN capability (e.g. setting User=), NoNewPrivileges=yes is implied.",
      "created_at" : "2018-01-22T06:37:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12102#issuecomment-359337331",
      "id" : 359337331,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12102",
      "updated_at" : "2018-01-22T06:37:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/359337331",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hi all, I'm working on #12255 which also changes the systemd service file and sets up the pidfile, datadir, and conffile with the right permissions and at the right places. @laanwj told me to coordinate my changes with people here. From what I see things should be compatible except I make the assumption that the service is running as `bitcoin:bitcoin`, which I think we should be according to init.md right?",
      "created_at" : "2018-02-05T02:58:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12102#issuecomment-362968939",
      "id" : 362968939,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12102",
      "updated_at" : "2018-02-05T02:58:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362968939",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. Hardening is good!",
      "created_at" : "2018-02-08T16:29:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12102#issuecomment-364167440",
      "id" : 364167440,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12102",
      "updated_at" : "2018-02-08T16:29:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364167440",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12102#discussion_r167026421"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12102"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/167026421"
         }
      },
      "author_association" : "OWNER",
      "body" : "Nit: Hardening measures, not measurements :)",
      "commit_id" : "874894965f2a38bd8c01b74552fc583f2fa4a0eb",
      "created_at" : "2018-02-08T18:30:06Z",
      "diff_hunk" : "@@ -19,7 +19,26 @@ User=bitcoin\n Type=forking\n PIDFile=/run/bitcoind/bitcoind.pid\n Restart=on-failure\n+\n+# Hardening measurements",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12102#discussion_r167026421",
      "id" : 167026421,
      "original_commit_id" : "8531bdb44c0abc1049853135d7c95c29fcf8a3e3",
      "original_position" : 5,
      "path" : "contrib/init/bitcoind.service",
      "position" : null,
      "pull_request_review_id" : 95183381,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12102",
      "updated_at" : "2018-02-09T08:36:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/167026421",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12102#discussion_r167166222"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12102"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/167166222"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for pointing this out. Fixed with 8748949.",
      "commit_id" : "874894965f2a38bd8c01b74552fc583f2fa4a0eb",
      "created_at" : "2018-02-09T08:37:11Z",
      "diff_hunk" : "@@ -19,7 +19,26 @@ User=bitcoin\n Type=forking\n PIDFile=/run/bitcoind/bitcoind.pid\n Restart=on-failure\n+\n+# Hardening measurements",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12102#discussion_r167166222",
      "id" : 167166222,
      "in_reply_to_id" : 167026421,
      "original_commit_id" : "8531bdb44c0abc1049853135d7c95c29fcf8a3e3",
      "original_position" : 5,
      "path" : "contrib/init/bitcoind.service",
      "position" : null,
      "pull_request_review_id" : 95345859,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12102",
      "updated_at" : "2018-02-09T08:37:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/167166222",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/432385?v=4",
         "events_url" : "https://api.github.com/users/Flowdalic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Flowdalic/followers",
         "following_url" : "https://api.github.com/users/Flowdalic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Flowdalic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Flowdalic",
         "id" : 432385,
         "login" : "Flowdalic",
         "organizations_url" : "https://api.github.com/users/Flowdalic/orgs",
         "received_events_url" : "https://api.github.com/users/Flowdalic/received_events",
         "repos_url" : "https://api.github.com/users/Flowdalic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Flowdalic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Flowdalic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Flowdalic"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "ACK after squash",
      "created_at" : "2018-03-13T16:22:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12102#issuecomment-372726342",
      "id" : 372726342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12102",
      "updated_at" : "2018-03-13T16:22:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372726342",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
