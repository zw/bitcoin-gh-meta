[
   {
      "author_association" : "MEMBER",
      "body" : "@jl2012 originally attempted this in #11398, which had concept ACKs from @gmaxwell @dcousens and @sdaftuar . I then tried again in #12360, which got ACKs from @jamesob and @jtimon .",
      "created_at" : "2019-05-20T20:40:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-494142593",
      "id" : 494142593,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5NDE0MjU5Mw==",
      "updated_at" : "2019-05-20T20:40:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/494142593",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-05-20T20:47:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-494144897",
      "id" : 494144897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5NDE0NDg5Nw==",
      "updated_at" : "2019-05-20T20:47:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/494144897",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-05-20T21:35:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-494159426",
      "id" : 494159426,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5NDE1OTQyNg==",
      "updated_at" : "2019-05-20T21:35:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/494159426",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Wouldn't it help to split out the first commit, which changes how ISM deployments are reported? It is a tangential (breaking) rpc change and probably needs different review than a consensus refactor (as well as release notes)",
      "created_at" : "2019-05-20T22:32:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-494173645",
      "id" : 494173645,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5NDE3MzY0NQ==",
      "updated_at" : "2019-05-20T22:33:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/494173645",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#16411](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16411.html) (Signet support by kallewoof)\n* [#8994](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/8994.html) (Testchains: Introduce custom chain whose constructor... by jtimon)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-05-21T01:21:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-494203974",
      "id" : 494203974,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5NDIwMzk3NA==",
      "updated_at" : "2019-08-07T06:06:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/494203974",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Force-pushed to fix some minor issues from rebasing.\r\n\r\n> Wouldn't it help to split out the first commit, which changes how ISM deployments are reported?\r\n\r\nAll three commits change the output of `getblockchaininfo` and how soft forks are reported, so it makes sense to merge them in the same PR.",
      "created_at" : "2019-05-22T13:28:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-494802524",
      "id" : 494802524,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5NDgwMjUyNA==",
      "updated_at" : "2019-05-22T13:28:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/494802524",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-05-29T10:18:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-496877051",
      "id" : 496877051,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5Njg3NzA1MQ==",
      "updated_at" : "2019-05-29T10:18:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/496877051",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r289244691"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/289244691"
         }
      },
      "author_association" : "NONE",
      "body" : "based on https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#coding-style-c it appears this line should be on the line above with the bracket.\r\n`} else if (height == -1) {`",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-05-31T03:12:46Z",
      "diff_hunk" : "@@ -359,11 +339,23 @@ class CRegTestParams : public CChainParams {\n         consensus.vDeployments[d].nStartTime = nStartTime;\n         consensus.vDeployments[d].nTimeout = nTimeout;\n     }\n-    void UpdateVersionBitsParametersFromArgs(const ArgsManager& args);\n+    void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n-void CRegTestParams::UpdateVersionBitsParametersFromArgs(const ArgsManager& args)\n+void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n+    if (gArgs.IsArgSet(\"-segwitheight\")) {\n+        int64_t height = gArgs.GetArg(\"-segwitheight\", consensus.SegwitHeight);\n+        if (height < -1 || height >= std::numeric_limits<int>::max()) {\n+            throw std::runtime_error(strprintf(\"Activation height %ld for segwit is out of valid range. Use -1 to disable segwit.\", height));\n+        }\n+        else if (height == -1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r289244691",
      "id" : 289244691,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4OTI0NDY5MQ==",
      "original_commit_id" : "152af4db7fdea6149f0bfd32d3a7776712e95877",
      "original_position" : 99,
      "path" : "src/chainparams.cpp",
      "position" : null,
      "pull_request_review_id" : 244117968,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/289244691",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r289244825"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/289244825"
         }
      },
      "author_association" : "NONE",
      "body" : "same as above \r\nbased on https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#coding-style-c it appears this line should be on the line above with the bracket.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-05-31T03:13:45Z",
      "diff_hunk" : "@@ -1278,18 +1270,21 @@ static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Conse\n         statsUV.pushKV(\"elapsed\", statsStruct.elapsed);\n         statsUV.pushKV(\"count\", statsStruct.count);\n         statsUV.pushKV(\"possible\", statsStruct.possible);\n-        rv.pushKV(\"statistics\", statsUV);\n+        bip9.pushKV(\"statistics\", statsUV);\n     }\n-    return rv;\n-}\n \n-static void BIP9SoftForkDescPushBack(UniValue& bip9_softforks, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n-{\n-    // Deployments with timeout value of 0 are hidden.\n-    // A timeout value of 0 guarantees a softfork will never be activated.\n-    // This is used when softfork codes are merged without specifying the deployment schedule.\n-    if (consensusParams.vDeployments[id].nTimeout > 0)\n-        bip9_softforks.pushKV(VersionBitsDeploymentInfo[id].name, BIP9SoftForkDesc(consensusParams, id));\n+    UniValue rv(UniValue::VOBJ);\n+    rv.pushKV(\"type\", \"bip9\");\n+    rv.pushKV(\"bip9\", bip9);\n+    if (ThresholdState::LOCKED_IN == thresholdState) {\n+        rv.pushKV(\"height\", since_height + consensusParams.nMinerConfirmationWindow);\n+    }\n+    else if (ThresholdState::ACTIVE == thresholdState) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r289244825",
      "id" : 289244825,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4OTI0NDgyNQ==",
      "original_commit_id" : "152af4db7fdea6149f0bfd32d3a7776712e95877",
      "original_position" : 106,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 244117968,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/289244825",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r290660874"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/290660874"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-06-05T09:49:54Z",
      "diff_hunk" : "@@ -359,11 +339,23 @@ class CRegTestParams : public CChainParams {\n         consensus.vDeployments[d].nStartTime = nStartTime;\n         consensus.vDeployments[d].nTimeout = nTimeout;\n     }\n-    void UpdateVersionBitsParametersFromArgs(const ArgsManager& args);\n+    void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n-void CRegTestParams::UpdateVersionBitsParametersFromArgs(const ArgsManager& args)\n+void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n+    if (gArgs.IsArgSet(\"-segwitheight\")) {\n+        int64_t height = gArgs.GetArg(\"-segwitheight\", consensus.SegwitHeight);\n+        if (height < -1 || height >= std::numeric_limits<int>::max()) {\n+            throw std::runtime_error(strprintf(\"Activation height %ld for segwit is out of valid range. Use -1 to disable segwit.\", height));\n+        }\n+        else if (height == -1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r290660874",
      "id" : 290660874,
      "in_reply_to_id" : 289244691,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5MDY2MDg3NA==",
      "original_commit_id" : "152af4db7fdea6149f0bfd32d3a7776712e95877",
      "original_position" : 99,
      "path" : "src/chainparams.cpp",
      "position" : null,
      "pull_request_review_id" : 245907563,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/290660874",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r290660895"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/290660895"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-06-05T09:49:57Z",
      "diff_hunk" : "@@ -1278,18 +1270,21 @@ static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Conse\n         statsUV.pushKV(\"elapsed\", statsStruct.elapsed);\n         statsUV.pushKV(\"count\", statsStruct.count);\n         statsUV.pushKV(\"possible\", statsStruct.possible);\n-        rv.pushKV(\"statistics\", statsUV);\n+        bip9.pushKV(\"statistics\", statsUV);\n     }\n-    return rv;\n-}\n \n-static void BIP9SoftForkDescPushBack(UniValue& bip9_softforks, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n-{\n-    // Deployments with timeout value of 0 are hidden.\n-    // A timeout value of 0 guarantees a softfork will never be activated.\n-    // This is used when softfork codes are merged without specifying the deployment schedule.\n-    if (consensusParams.vDeployments[id].nTimeout > 0)\n-        bip9_softforks.pushKV(VersionBitsDeploymentInfo[id].name, BIP9SoftForkDesc(consensusParams, id));\n+    UniValue rv(UniValue::VOBJ);\n+    rv.pushKV(\"type\", \"bip9\");\n+    rv.pushKV(\"bip9\", bip9);\n+    if (ThresholdState::LOCKED_IN == thresholdState) {\n+        rv.pushKV(\"height\", since_height + consensusParams.nMinerConfirmationWindow);\n+    }\n+    else if (ThresholdState::ACTIVE == thresholdState) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r290660895",
      "id" : 290660895,
      "in_reply_to_id" : 289244825,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5MDY2MDg5NQ==",
      "original_commit_id" : "152af4db7fdea6149f0bfd32d3a7776712e95877",
      "original_position" : 106,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 245907595,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/290660895",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for the review @PastaPastaPasta . I've fixed your two comments.",
      "created_at" : "2019-06-05T09:50:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-499016982",
      "id" : 499016982,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5OTAxNjk4Mg==",
      "updated_at" : "2019-06-05T09:50:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/499016982",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r290696589"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/290696589"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Checked blockhashes against bock chain, and checked the activation heights against `getblockchaininfo` that they match `since`\r\n```json\r\n  \"bip9_softforks\": {\r\n    \"csv\": {\r\n      \"status\": \"active\",\r\n      \"startTime\": 1462060800,\r\n      \"timeout\": 1493596800,\r\n      \"since\": 419328\r\n    },\r\n    \"segwit\": {\r\n      \"status\": \"active\",\r\n      \"startTime\": 1479168000,\r\n      \"timeout\": 1510704000,\r\n      \"since\": 481824\r\n    }\r\n  },\r\n```",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-06-05T11:41:59Z",
      "diff_hunk" : "@@ -69,6 +69,8 @@ class CMainParams : public CChainParams {\n         consensus.BIP34Hash = uint256S(\"0x000000000000024b89b42a942fe0d9fea3bb44ab7bd1b19115dd6a759c0808b8\");\n         consensus.BIP65Height = 388381; // 000000000000000004c2b624ed5d7756c508d90fd0da2c7c679febfa6c4735f0\n         consensus.BIP66Height = 363725; // 00000000000000000379eaa19dce8c9b722d46ae6a57c2f1a988119488b50931\n+        consensus.CSVHeight = 419328; // 000000000000000004a1b34462cb8aeebd5799177f7a29cf28f2d1961716b5b5\n+        consensus.SegwitHeight = 481824; // 0000000000000000001c8018d9cb3b742ef25114f27563e3fc4a1902167f9893",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r290696589",
      "id" : 290696589,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5MDY5NjU4OQ==",
      "original_commit_id" : "f395b23aa0d125aa9534ff05df8d7ccd2d576868",
      "original_position" : 5,
      "path" : "src/chainparams.cpp",
      "position" : 5,
      "pull_request_review_id" : 245952799,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/290696589",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r290702393"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/290702393"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It's slightly inconsistent how all of these (BIP34, BIP65, BIP66) are BIPxx and the new ones are written out as name. I don't personally mind, to be honest, I even think this is clearer than having numbers.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-06-05T12:00:37Z",
      "diff_hunk" : "@@ -69,6 +69,8 @@ class CMainParams : public CChainParams {\n         consensus.BIP34Hash = uint256S(\"0x000000000000024b89b42a942fe0d9fea3bb44ab7bd1b19115dd6a759c0808b8\");\n         consensus.BIP65Height = 388381; // 000000000000000004c2b624ed5d7756c508d90fd0da2c7c679febfa6c4735f0\n         consensus.BIP66Height = 363725; // 00000000000000000379eaa19dce8c9b722d46ae6a57c2f1a988119488b50931\n+        consensus.CSVHeight = 419328; // 000000000000000004a1b34462cb8aeebd5799177f7a29cf28f2d1961716b5b5\n+        consensus.SegwitHeight = 481824; // 0000000000000000001c8018d9cb3b742ef25114f27563e3fc4a1902167f9893",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r290702393",
      "id" : 290702393,
      "in_reply_to_id" : 290696589,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5MDcwMjM5Mw==",
      "original_commit_id" : "f395b23aa0d125aa9534ff05df8d7ccd2d576868",
      "original_position" : 5,
      "path" : "src/chainparams.cpp",
      "position" : 5,
      "pull_request_review_id" : 245960113,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/290702393",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r290705260"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/290705260"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I like making this a object indexed by name, makes it easier to look one up in languages that treat them as dictionaries.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-06-05T12:09:07Z",
      "diff_hunk" : "@@ -1315,29 +1309,25 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"pruneheight\\\": xxxxxx,        (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n             \"  \\\"automatic_pruning\\\": xx,      (boolean) whether automatic pruning is enabled (only present if pruning is enabled)\\n\"\n             \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if automatic pruning is enabled)\\n\"\n-            \"  \\\"softforks\\\": [                (array) status of softforks in progress\\n\"\n-            \"     {\\n\"\n-            \"        \\\"id\\\": \\\"xxxx\\\",           (string) name of softfork\\n\"\n-            \"        \\\"version\\\": xx,          (numeric) block version\\n\"\n-            \"        \\\"reject\\\": {             (object) progress toward rejecting pre-softfork blocks\\n\"\n-            \"           \\\"status\\\": xx,        (boolean) true if threshold reached\\n\"\n-            \"        },\\n\"\n-            \"     }, ...\\n\"\n-            \"  ],\\n\"\n-            \"  \\\"bip9_softforks\\\": {           (object) status of BIP9 softforks in progress\\n\"\n+            \"  \\\"softforks\\\": {                (object) status of softforks\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r290705260",
      "id" : 290705260,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5MDcwNTI2MA==",
      "original_commit_id" : "f395b23aa0d125aa9534ff05df8d7ccd2d576868",
      "original_position" : 128,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 129,
      "pull_request_review_id" : 245963743,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/290705260",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r290847743"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/290847743"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Can this LOCK(cs_main) be removed just like the one in IsWitnessEnabled was? If it shouldn't be, the reason would be unintuitive, so could you leave a comment why it is still needed/desirable in that case?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-06-05T17:19:27Z",
      "diff_hunk" : "@@ -3157,14 +3157,14 @@ bool CheckBlock(const CBlock& block, CValidationState& state, const Consensus::P\n \n bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n {\n-    LOCK(cs_main);\n-    return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == ThresholdState::ACTIVE);\n+    int height = pindexPrev == nullptr ? 0 : pindexPrev->nHeight + 1;\n+    return (height >= params.SegwitHeight);\n }\n \n bool IsNullDummyEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n {\n     LOCK(cs_main);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r290847743",
      "id" : 290847743,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5MDg0Nzc0Mw==",
      "original_commit_id" : "f395b23aa0d125aa9534ff05df8d7ccd2d576868",
      "original_position" : 44,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 246145860,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/290847743",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/180403?v=4",
         "events_url" : "https://api.github.com/users/merehap/events{/privacy}",
         "followers_url" : "https://api.github.com/users/merehap/followers",
         "following_url" : "https://api.github.com/users/merehap/following{/other_user}",
         "gists_url" : "https://api.github.com/users/merehap/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/merehap",
         "id" : 180403,
         "login" : "merehap",
         "node_id" : "MDQ6VXNlcjE4MDQwMw==",
         "organizations_url" : "https://api.github.com/users/merehap/orgs",
         "received_events_url" : "https://api.github.com/users/merehap/received_events",
         "repos_url" : "https://api.github.com/users/merehap/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/merehap/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/merehap/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/merehap"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r293316730"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/293316730"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It would be nicer to do something more generic that works for other deployments, not just segwit. For example, if anybody was relying on vparams to test csv activation, it won't be possible after this PR.\r\nBut perhaps this is out of the scope for this PR, \r\nWith something like https://github.com/bitcoin/bitcoin/pull/8994 we could simply make the all the buried heights configurable for custom regtests.\r\n",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-06-13T10:47:36Z",
      "diff_hunk" : "@@ -349,11 +339,22 @@ class CRegTestParams : public CChainParams {\n         consensus.vDeployments[d].nStartTime = nStartTime;\n         consensus.vDeployments[d].nTimeout = nTimeout;\n     }\n-    void UpdateVersionBitsParametersFromArgs(const ArgsManager& args);\n+    void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n-void CRegTestParams::UpdateVersionBitsParametersFromArgs(const ArgsManager& args)\n+void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n+    if (gArgs.IsArgSet(\"-segwitheight\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r293316730",
      "id" : 293316730,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5MzMxNjczMA==",
      "original_commit_id" : "1949ee1f93994b28d9bff5946a3b2f61a9bb0af1",
      "original_position" : 78,
      "path" : "src/chainparams.cpp",
      "position" : 94,
      "pull_request_review_id" : 249267511,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/293316730",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r293318465"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/293318465"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Perhaps we can call the argument \"-con_segwitheight\" like in #8994 ?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-06-13T10:53:00Z",
      "diff_hunk" : "@@ -349,11 +339,22 @@ class CRegTestParams : public CChainParams {\n         consensus.vDeployments[d].nStartTime = nStartTime;\n         consensus.vDeployments[d].nTimeout = nTimeout;\n     }\n-    void UpdateVersionBitsParametersFromArgs(const ArgsManager& args);\n+    void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n-void CRegTestParams::UpdateVersionBitsParametersFromArgs(const ArgsManager& args)\n+void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n+    if (gArgs.IsArgSet(\"-segwitheight\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r293318465",
      "id" : 293318465,
      "in_reply_to_id" : 293316730,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5MzMxODQ2NQ==",
      "original_commit_id" : "1949ee1f93994b28d9bff5946a3b2f61a9bb0af1",
      "original_position" : 78,
      "path" : "src/chainparams.cpp",
      "position" : 94,
      "pull_request_review_id" : 249269854,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/293318465",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I didn't check the actual activation heights, but beyond that and my small nit, utACK f395b23aa0d125aa9534ff05df8d7ccd2d576868",
      "created_at" : "2019-06-13T10:54:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-501653941",
      "id" : 501653941,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwMTY1Mzk0MQ==",
      "updated_at" : "2019-06-13T10:54:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/501653941",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "node_id" : "MDQ6VXNlcjEwMDg0NTg=",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-06-13T19:12:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-501841653",
      "id" : 501841653,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwMTg0MTY1Mw==",
      "updated_at" : "2019-06-13T19:12:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/501841653",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I've looked through the history of the 3 PRs trying to get this change merged, and there is widespread support for it, but we need to get it to the finish line! Now that it has been added to the high priority list, would one or two of the following folks be able to review this in the next week or so? @sdaftuar @TheBlueMatt @sipa @jl2012 ",
      "created_at" : "2019-06-14T19:04:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-502227558",
      "id" : 502227558,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwMjIyNzU1OA==",
      "updated_at" : "2019-06-14T19:04:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/502227558",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/326147?v=4",
         "events_url" : "https://api.github.com/users/moneyball/events{/privacy}",
         "followers_url" : "https://api.github.com/users/moneyball/followers",
         "following_url" : "https://api.github.com/users/moneyball/following{/other_user}",
         "gists_url" : "https://api.github.com/users/moneyball/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/moneyball",
         "id" : 326147,
         "login" : "moneyball",
         "node_id" : "MDQ6VXNlcjMyNjE0Nw==",
         "organizations_url" : "https://api.github.com/users/moneyball/orgs",
         "received_events_url" : "https://api.github.com/users/moneyball/received_events",
         "repos_url" : "https://api.github.com/users/moneyball/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/moneyball/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/moneyball/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/moneyball"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "just noting there is a competing proposal at #16229",
      "created_at" : "2019-06-18T13:57:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-503147403",
      "id" : 503147403,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwMzE0NzQwMw==",
      "updated_at" : "2019-06-18T13:57:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/503147403",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r298835284"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/298835284"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agree, but this is a breaking change, seems unnecessary.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-06-30T13:49:56Z",
      "diff_hunk" : "@@ -1315,29 +1309,25 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"pruneheight\\\": xxxxxx,        (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n             \"  \\\"automatic_pruning\\\": xx,      (boolean) whether automatic pruning is enabled (only present if pruning is enabled)\\n\"\n             \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if automatic pruning is enabled)\\n\"\n-            \"  \\\"softforks\\\": [                (array) status of softforks in progress\\n\"\n-            \"     {\\n\"\n-            \"        \\\"id\\\": \\\"xxxx\\\",           (string) name of softfork\\n\"\n-            \"        \\\"version\\\": xx,          (numeric) block version\\n\"\n-            \"        \\\"reject\\\": {             (object) progress toward rejecting pre-softfork blocks\\n\"\n-            \"           \\\"status\\\": xx,        (boolean) true if threshold reached\\n\"\n-            \"        },\\n\"\n-            \"     }, ...\\n\"\n-            \"  ],\\n\"\n-            \"  \\\"bip9_softforks\\\": {           (object) status of BIP9 softforks in progress\\n\"\n+            \"  \\\"softforks\\\": {                (object) status of softforks\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r298835284",
      "id" : 298835284,
      "in_reply_to_id" : 290705260,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5ODgzNTI4NA==",
      "original_commit_id" : "f395b23aa0d125aa9534ff05df8d7ccd2d576868",
      "original_position" : 128,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 129,
      "pull_request_review_id" : 256075786,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/298835284",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> just noting there is a competing proposal at #16229\r\n\r\nWhy are there competing proposals? Is there a comparison sometimes of the pros/cons of either approach? ",
      "created_at" : "2019-07-02T13:06:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-507668450",
      "id" : 507668450,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNzY2ODQ1MA==",
      "updated_at" : "2019-07-02T13:06:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/507668450",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r299495299"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299495299"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Neither the CSV nor segwit softforks were specified by a single BIP. CSV was BIPs 68, 112, and 113 and segwit was BIPs 141, 143, and 147. We could go back and give BIP34, BIP65 and BIP66 'descriptive' names, but I think that's an unnecessary breaking change.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-02T13:54:21Z",
      "diff_hunk" : "@@ -69,6 +69,8 @@ class CMainParams : public CChainParams {\n         consensus.BIP34Hash = uint256S(\"0x000000000000024b89b42a942fe0d9fea3bb44ab7bd1b19115dd6a759c0808b8\");\n         consensus.BIP65Height = 388381; // 000000000000000004c2b624ed5d7756c508d90fd0da2c7c679febfa6c4735f0\n         consensus.BIP66Height = 363725; // 00000000000000000379eaa19dce8c9b722d46ae6a57c2f1a988119488b50931\n+        consensus.CSVHeight = 419328; // 000000000000000004a1b34462cb8aeebd5799177f7a29cf28f2d1961716b5b5\n+        consensus.SegwitHeight = 481824; // 0000000000000000001c8018d9cb3b742ef25114f27563e3fc4a1902167f9893",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r299495299",
      "id" : 299495299,
      "in_reply_to_id" : 290696589,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTQ5NTI5OQ==",
      "original_commit_id" : "f395b23aa0d125aa9534ff05df8d7ccd2d576868",
      "original_position" : 5,
      "path" : "src/chainparams.cpp",
      "position" : 5,
      "pull_request_review_id" : 256908856,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299495299",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r299506710"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299506710"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, it can. In fact, this function is only called from within `GetBlockScriptFlags()`, which holds `cs_main`. After this PR, this is now a simple one-line check, so I've removed the function and placed the conditional directly into `GetBlockScriptFlags()`.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-02T14:18:06Z",
      "diff_hunk" : "@@ -3157,14 +3157,14 @@ bool CheckBlock(const CBlock& block, CValidationState& state, const Consensus::P\n \n bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n {\n-    LOCK(cs_main);\n-    return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == ThresholdState::ACTIVE);\n+    int height = pindexPrev == nullptr ? 0 : pindexPrev->nHeight + 1;\n+    return (height >= params.SegwitHeight);\n }\n \n bool IsNullDummyEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n {\n     LOCK(cs_main);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r299506710",
      "id" : 299506710,
      "in_reply_to_id" : 290847743,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTUwNjcxMA==",
      "original_commit_id" : "f395b23aa0d125aa9534ff05df8d7ccd2d576868",
      "original_position" : 44,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 256924046,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299506710",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r299508451"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299508451"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> I like making this a object indexed by name, makes it easier to look one up in languages that treat them as dictionaries.\r\n\r\nFor the benefit of other reviewers - that's what this PR does already.\r\n\r\n> this is a breaking change, seems unnecessary\r\n\r\nI doubt that there are many clients programmatically querying this, since the value never changes once it's locked in. After this PR, there don't need to be further breaking changes, since the new `softfork` object is able to hold both bip9 and buried fork details (or any other potential activation method types).",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-02T14:21:42Z",
      "diff_hunk" : "@@ -1315,29 +1309,25 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"pruneheight\\\": xxxxxx,        (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n             \"  \\\"automatic_pruning\\\": xx,      (boolean) whether automatic pruning is enabled (only present if pruning is enabled)\\n\"\n             \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if automatic pruning is enabled)\\n\"\n-            \"  \\\"softforks\\\": [                (array) status of softforks in progress\\n\"\n-            \"     {\\n\"\n-            \"        \\\"id\\\": \\\"xxxx\\\",           (string) name of softfork\\n\"\n-            \"        \\\"version\\\": xx,          (numeric) block version\\n\"\n-            \"        \\\"reject\\\": {             (object) progress toward rejecting pre-softfork blocks\\n\"\n-            \"           \\\"status\\\": xx,        (boolean) true if threshold reached\\n\"\n-            \"        },\\n\"\n-            \"     }, ...\\n\"\n-            \"  ],\\n\"\n-            \"  \\\"bip9_softforks\\\": {           (object) status of BIP9 softforks in progress\\n\"\n+            \"  \\\"softforks\\\": {                (object) status of softforks\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r299508451",
      "id" : 299508451,
      "in_reply_to_id" : 290705260,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTUwODQ1MQ==",
      "original_commit_id" : "f395b23aa0d125aa9534ff05df8d7ccd2d576868",
      "original_position" : 128,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 129,
      "pull_request_review_id" : 256926384,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299508451",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r299509009"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299509009"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This argument is just for testing, so it's not disruptive to change this in future if we think the `-con_xxx` naming scheme is better. For now, I'd like to keep this as it is, rather than optimizing for a PR that hasn't been merged yet.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-02T14:22:49Z",
      "diff_hunk" : "@@ -349,11 +339,22 @@ class CRegTestParams : public CChainParams {\n         consensus.vDeployments[d].nStartTime = nStartTime;\n         consensus.vDeployments[d].nTimeout = nTimeout;\n     }\n-    void UpdateVersionBitsParametersFromArgs(const ArgsManager& args);\n+    void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n-void CRegTestParams::UpdateVersionBitsParametersFromArgs(const ArgsManager& args)\n+void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n+    if (gArgs.IsArgSet(\"-segwitheight\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r299509009",
      "id" : 299509009,
      "in_reply_to_id" : 293316730,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTUwOTAwOQ==",
      "original_commit_id" : "1949ee1f93994b28d9bff5946a3b2f61a9bb0af1",
      "original_position" : 78,
      "path" : "src/chainparams.cpp",
      "position" : 94,
      "pull_request_review_id" : 256927129,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299509009",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r299511982"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299511982"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We are on the same page then, but for the sake of complaints, just add a small release note? @MarcoFalke also asked it above.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-02T14:28:20Z",
      "diff_hunk" : "@@ -1315,29 +1309,25 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"pruneheight\\\": xxxxxx,        (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n             \"  \\\"automatic_pruning\\\": xx,      (boolean) whether automatic pruning is enabled (only present if pruning is enabled)\\n\"\n             \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if automatic pruning is enabled)\\n\"\n-            \"  \\\"softforks\\\": [                (array) status of softforks in progress\\n\"\n-            \"     {\\n\"\n-            \"        \\\"id\\\": \\\"xxxx\\\",           (string) name of softfork\\n\"\n-            \"        \\\"version\\\": xx,          (numeric) block version\\n\"\n-            \"        \\\"reject\\\": {             (object) progress toward rejecting pre-softfork blocks\\n\"\n-            \"           \\\"status\\\": xx,        (boolean) true if threshold reached\\n\"\n-            \"        },\\n\"\n-            \"     }, ...\\n\"\n-            \"  ],\\n\"\n-            \"  \\\"bip9_softforks\\\": {           (object) status of BIP9 softforks in progress\\n\"\n+            \"  \\\"softforks\\\": {                (object) status of softforks\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r299511982",
      "id" : 299511982,
      "in_reply_to_id" : 290705260,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTUxMTk4Mg==",
      "original_commit_id" : "f395b23aa0d125aa9534ff05df8d7ccd2d576868",
      "original_position" : 128,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 129,
      "pull_request_review_id" : 256931010,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299511982",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This needs release notes if it reaches a stage where it's ready for merge.",
      "created_at" : "2019-07-02T14:51:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-507712233",
      "id" : 507712233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNzcxMjIzMw==",
      "updated_at" : "2019-07-02T14:51:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/507712233",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Why are there competing proposals? Is there a comparison sometimes of the pros/cons of either approach?\r\n\r\nThe propsals take different approaches: this one (#16060) changes segwit/csv from bip9 deployments to be hardcoded fixed height deployments; the other one (#16229) generalises bip9 deployments to also support fixed height deployments, and converts strictder and cltv into this generalised deployment method and updates segwit/csv to be fixed height rather than bip9 based.\r\n\r\nI think the benefits of hardcoded fixed height stuff is that it's a bit more efficient (the height's hardcoded and every codepath knows the height is hardcoded), while the cost is that anytime you change a bip9 deployment to a fixed height deployment you have to change the code in a few places. Doing it this way also means you can't have tests that want to control how the forks activated, which results in substantive changes to the test suite when burying a deployment.\r\n\r\nThe cost of the generalised approach is that you can't assume that the deployments are just activated at a particular height, which slows mainnet handling of the deployments down for (at most) a benefit in regtest. I think this slowdown is pretty trivial, but haven't benchmarked it. The benefits (I think) are that it means we can bury BIP9 deployments in future just by changing the declaration in chainparams.cpp, with tests generally continuing to work unchanged, and no code changes needed for getblockchaininfo or in checking when the soft-fork is enabled. This approach can also be done with minimal changes to getblockchaininfo output if we thought that was a benefit.",
      "created_at" : "2019-07-02T15:08:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-507719494",
      "id" : 507719494,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNzcxOTQ5NA==",
      "updated_at" : "2019-07-02T15:08:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/507719494",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The propsals take different approaches....\r\n\r\nThanks @ajtowns - that seems like a good summary to me. I left a comment in your PR about why I prefer the approach here, which I'll copy below:\r\n\r\n---\r\n\r\nI prefer the approach in #16060. The changes in this PR seem more complex for achieving a similar goal (+110 lines here vs -70 lines in 16060)\r\n\r\n> I think this should make future burials much simpler (it becomes a one-line change)\r\n\r\nSoftfork activation/burials are sufficiently rare that I don't think we have to optimize to minimize the code changes when they do happen.\r\n\r\n> it doesn't change RPC or tests much, and I think it will make it easier to make future changes to activation methods should we wish to do so.\r\n\r\nI like the new RPC return object softfork in 16060. It seems simple, non-breaking when a deployment goes from bip9 to buried (the type field determines which other fields or sub-objects appear in the softfork object), and allows for other deployment methods (just add a new type).\r\n\r\nWe've been trying to bury these deployments for almost two years now (see #11398), so I just want to see it done. If people prefer this approach, I'm happy to close 16060 in favour of this.",
      "created_at" : "2019-07-02T15:15:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-507721921",
      "id" : 507721921,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwNzcyMTkyMQ==",
      "updated_at" : "2019-07-02T15:15:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/507721921",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-07-16T15:52:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-511876056",
      "id" : 511876056,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxMTg3NjA1Ng==",
      "updated_at" : "2019-07-16T15:52:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/511876056",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased\r\n\r\nThis PR (or earlier versions) have concept ACKs from:\r\n\r\n- @gmaxwell\r\n- @dcousens\r\n- @sdaftuar\r\n- @jamesob\r\n- @jtimon\r\n- @practicalswift\r\n- @sipa\r\n- @laanwj\r\n- @meshcollider\r\n- @jonasschnelli\r\n\r\nI'd really appreciate some code review to get this unblocked.",
      "created_at" : "2019-07-19T14:29:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-513251113",
      "id" : 513251113,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxMzI1MTExMw==",
      "updated_at" : "2019-07-19T14:29:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/513251113",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305463041"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305463041"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should some explanation of buried deployments be given in the code, for future code readers?  Not sure if we have docs we can point to in our code somewhere already, but BIP 90 has some information if not.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-19T17:54:31Z",
      "diff_hunk" : "@@ -1183,54 +1183,46 @@ static UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.pushKV(\"status\", activated);\n-    return rv;\n-}\n+    // For buried deployments.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305463041",
      "id" : 305463041,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTQ2MzA0MQ==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 26,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 264351017,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305463041",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305482869"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305482869"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"softfork codes\" seems like an odd phrase.  Perhaps something like \"This is used when merging logic to implement a proposed softfork without a specified deployment schedule\"?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-19T18:50:03Z",
      "diff_hunk" : "@@ -1183,54 +1183,46 @@ static UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.pushKV(\"status\", activated);\n-    return rv;\n-}\n+    // For buried deployments.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.\n+    if (height == std::numeric_limits<int>::max()) return;\n \n-static UniValue SoftForkDesc(const std::string &name, int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n-{\n     UniValue rv(UniValue::VOBJ);\n-    rv.pushKV(\"id\", name);\n-    rv.pushKV(\"version\", version);\n-    rv.pushKV(\"reject\", SoftForkMajorityDesc(version, pindex, consensusParams));\n-    return rv;\n+    rv.pushKV(\"type\", \"buried\");\n+    // getblockchaininfo reports the softfork as active from when the chain height is\n+    // one below the activation height\n+    rv.pushKV(\"active\", ::ChainActive().Tip()->nHeight + 1 >= height);\n+    rv.pushKV(\"height\", height);\n+    softforks.pushKV(name, rv);\n }\n \n-static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n+static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &name, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n {\n-    UniValue rv(UniValue::VOBJ);\n+    // For BIP9 deployments.\n+    // Deployments (e.g. testdummy) with timeout value before Jan 1, 2009 are hidden.\n+    // A timeout value of 0 guarantees a softfork will never be activated.\n+    // This is used when softfork codes are merged without specifying the deployment schedule.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305482869",
      "id" : 305482869,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTQ4Mjg2OQ==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 51,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 264351017,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305482869",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305488449"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305488449"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Shouldn't we just remove this line?  This seems unnecessary...",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-19T19:06:20Z",
      "diff_hunk" : "@@ -1342,16 +1332,14 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n     }\n \n     const Consensus::Params& consensusParams = Params().GetConsensus();\n-    UniValue softforks(UniValue::VARR);\n-    UniValue bip9_softforks(UniValue::VOBJ);\n-    softforks.push_back(SoftForkDesc(\"bip34\", 2, tip, consensusParams));\n-    softforks.push_back(SoftForkDesc(\"bip66\", 3, tip, consensusParams));\n-    softforks.push_back(SoftForkDesc(\"bip65\", 4, tip, consensusParams));\n-    for (int pos = Consensus::DEPLOYMENT_CSV; pos != Consensus::MAX_VERSION_BITS_DEPLOYMENTS; ++pos) {\n-        BIP9SoftForkDescPushBack(bip9_softforks, consensusParams, static_cast<Consensus::DeploymentPos>(pos));\n-    }\n+    UniValue softforks(UniValue::VOBJ);\n+    BuriedForkDescPushBack(softforks, \"bip34\", consensusParams.BIP34Height);\n+    BuriedForkDescPushBack(softforks, \"bip66\", consensusParams.BIP66Height);\n+    BuriedForkDescPushBack(softforks, \"bip65\", consensusParams.BIP65Height);\n+    BIP9SoftForkDescPushBack(softforks, \"csv\", consensusParams, Consensus::DEPLOYMENT_CSV);\n+    BIP9SoftForkDescPushBack(softforks, \"segwit\", consensusParams, Consensus::DEPLOYMENT_SEGWIT);\n+    BIP9SoftForkDescPushBack(softforks, \"testdummy\", consensusParams, Consensus::DEPLOYMENT_TESTDUMMY);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305488449",
      "id" : 305488449,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTQ4ODQ0OQ==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 180,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 181,
      "pull_request_review_id" : 264351017,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305488449",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305490525"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305490525"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this concept of \"type\" is slightly weird -- we're leaking an implementation detail that shouldn't have any bearing on how this information is used.  It seems strange to me that we'd distinguish between long-since-activated bip9 softforks, and buried softforks, when reporting to users.  Is the goal just to be able to indicate which entries will have a bip9 field and which ones won't?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-19T19:12:57Z",
      "diff_hunk" : "@@ -1275,29 +1269,25 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"pruneheight\\\": xxxxxx,        (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n             \"  \\\"automatic_pruning\\\": xx,      (boolean) whether automatic pruning is enabled (only present if pruning is enabled)\\n\"\n             \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if automatic pruning is enabled)\\n\"\n-            \"  \\\"softforks\\\": [                (array) status of softforks in progress\\n\"\n-            \"     {\\n\"\n-            \"        \\\"id\\\": \\\"xxxx\\\",           (string) name of softfork\\n\"\n-            \"        \\\"version\\\": xx,          (numeric) block version\\n\"\n-            \"        \\\"reject\\\": {             (object) progress toward rejecting pre-softfork blocks\\n\"\n-            \"           \\\"status\\\": xx,        (boolean) true if threshold reached\\n\"\n-            \"        },\\n\"\n-            \"     }, ...\\n\"\n-            \"  ],\\n\"\n-            \"  \\\"bip9_softforks\\\": {           (object) status of BIP9 softforks in progress\\n\"\n+            \"  \\\"softforks\\\": {                (object) status of softforks\\n\"\n             \"     \\\"xxxx\\\" : {                 (string) name of the softfork\\n\"\n-            \"        \\\"status\\\": \\\"xxxx\\\",       (string) one of \\\"defined\\\", \\\"started\\\", \\\"locked_in\\\", \\\"active\\\", \\\"failed\\\"\\n\"\n-            \"        \\\"bit\\\": xx,              (numeric) the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\\n\"\n-            \"        \\\"startTime\\\": xx,        (numeric) the minimum median time past of a block at which the bit gains its meaning\\n\"\n-            \"        \\\"timeout\\\": xx,          (numeric) the median time past of a block at which the deployment is considered failed if not yet locked in\\n\"\n-            \"        \\\"since\\\": xx,            (numeric) height of the first block to which the status applies\\n\"\n-            \"        \\\"statistics\\\": {         (object) numeric statistics about BIP9 signalling for a softfork (only for \\\"started\\\" status)\\n\"\n-            \"           \\\"period\\\": xx,        (numeric) the length in blocks of the BIP9 signalling period \\n\"\n-            \"           \\\"threshold\\\": xx,     (numeric) the number of blocks with the version bit set required to activate the feature \\n\"\n-            \"           \\\"elapsed\\\": xx,       (numeric) the number of blocks elapsed since the beginning of the current period \\n\"\n-            \"           \\\"count\\\": xx,         (numeric) the number of blocks with the version bit set in the current period \\n\"\n-            \"           \\\"possible\\\": xx       (boolean) returns false if there are not enough blocks left in this period to pass activation threshold \\n\"\n-            \"        }\\n\"\n+            \"        \\\"type\\\": \\\"xxxx\\\",         (string) one of \\\"buried\\\", \\\"bip9\\\"\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305490525",
      "id" : 305490525,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTQ5MDUyNQ==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 142,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 143,
      "pull_request_review_id" : 264351017,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305490525",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305494547"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305494547"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If we get rid of this filtering and the needless invocation of this function on \"testdummy\" I think things would be simpler.\r\n\r\nActually, it looks like you do this so that you can test the RPC in regtest even after everything else is buried?  I guess code coverage of the RPC is a good reason to do it this way, if that's what you have in mind.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-19T19:26:12Z",
      "diff_hunk" : "@@ -1183,54 +1183,46 @@ static UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.pushKV(\"status\", activated);\n-    return rv;\n-}\n+    // For buried deployments.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.\n+    if (height == std::numeric_limits<int>::max()) return;\n \n-static UniValue SoftForkDesc(const std::string &name, int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n-{\n     UniValue rv(UniValue::VOBJ);\n-    rv.pushKV(\"id\", name);\n-    rv.pushKV(\"version\", version);\n-    rv.pushKV(\"reject\", SoftForkMajorityDesc(version, pindex, consensusParams));\n-    return rv;\n+    rv.pushKV(\"type\", \"buried\");\n+    // getblockchaininfo reports the softfork as active from when the chain height is\n+    // one below the activation height\n+    rv.pushKV(\"active\", ::ChainActive().Tip()->nHeight + 1 >= height);\n+    rv.pushKV(\"height\", height);\n+    softforks.pushKV(name, rv);\n }\n \n-static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n+static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &name, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n {\n-    UniValue rv(UniValue::VOBJ);\n+    // For BIP9 deployments.\n+    // Deployments (e.g. testdummy) with timeout value before Jan 1, 2009 are hidden.\n+    // A timeout value of 0 guarantees a softfork will never be activated.\n+    // This is used when softfork codes are merged without specifying the deployment schedule.\n+    if (consensusParams.vDeployments[id].nTimeout <= 1230768000) return;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305494547",
      "id" : 305494547,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTQ5NDU0Nw==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 52,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 55,
      "pull_request_review_id" : 264351017,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305494547",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305496434"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305496434"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"are or will be enforced\"?  That seems like more accurate phrasing if you're going to do this for LOCKED_IN rules.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-19T19:32:37Z",
      "diff_hunk" : "@@ -1275,29 +1269,25 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"pruneheight\\\": xxxxxx,        (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n             \"  \\\"automatic_pruning\\\": xx,      (boolean) whether automatic pruning is enabled (only present if pruning is enabled)\\n\"\n             \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if automatic pruning is enabled)\\n\"\n-            \"  \\\"softforks\\\": [                (array) status of softforks in progress\\n\"\n-            \"     {\\n\"\n-            \"        \\\"id\\\": \\\"xxxx\\\",           (string) name of softfork\\n\"\n-            \"        \\\"version\\\": xx,          (numeric) block version\\n\"\n-            \"        \\\"reject\\\": {             (object) progress toward rejecting pre-softfork blocks\\n\"\n-            \"           \\\"status\\\": xx,        (boolean) true if threshold reached\\n\"\n-            \"        },\\n\"\n-            \"     }, ...\\n\"\n-            \"  ],\\n\"\n-            \"  \\\"bip9_softforks\\\": {           (object) status of BIP9 softforks in progress\\n\"\n+            \"  \\\"softforks\\\": {                (object) status of softforks\\n\"\n             \"     \\\"xxxx\\\" : {                 (string) name of the softfork\\n\"\n-            \"        \\\"status\\\": \\\"xxxx\\\",       (string) one of \\\"defined\\\", \\\"started\\\", \\\"locked_in\\\", \\\"active\\\", \\\"failed\\\"\\n\"\n-            \"        \\\"bit\\\": xx,              (numeric) the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\\n\"\n-            \"        \\\"startTime\\\": xx,        (numeric) the minimum median time past of a block at which the bit gains its meaning\\n\"\n-            \"        \\\"timeout\\\": xx,          (numeric) the median time past of a block at which the deployment is considered failed if not yet locked in\\n\"\n-            \"        \\\"since\\\": xx,            (numeric) height of the first block to which the status applies\\n\"\n-            \"        \\\"statistics\\\": {         (object) numeric statistics about BIP9 signalling for a softfork (only for \\\"started\\\" status)\\n\"\n-            \"           \\\"period\\\": xx,        (numeric) the length in blocks of the BIP9 signalling period \\n\"\n-            \"           \\\"threshold\\\": xx,     (numeric) the number of blocks with the version bit set required to activate the feature \\n\"\n-            \"           \\\"elapsed\\\": xx,       (numeric) the number of blocks elapsed since the beginning of the current period \\n\"\n-            \"           \\\"count\\\": xx,         (numeric) the number of blocks with the version bit set in the current period \\n\"\n-            \"           \\\"possible\\\": xx       (boolean) returns false if there are not enough blocks left in this period to pass activation threshold \\n\"\n-            \"        }\\n\"\n+            \"        \\\"type\\\": \\\"xxxx\\\",         (string) one of \\\"buried\\\", \\\"bip9\\\"\\n\"\n+            \"        \\\"bip9\\\": {               (object) status of bip9 softforks (only for \\\"bip9\\\" type)\\n\"\n+            \"           \\\"status\\\": \\\"xxxx\\\",    (string) one of \\\"defined\\\", \\\"started\\\", \\\"locked_in\\\", \\\"active\\\", \\\"failed\\\"\\n\"\n+            \"           \\\"bit\\\": xx,           (numeric) the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\\n\"\n+            \"           \\\"startTime\\\": xx,     (numeric) the minimum median time past of a block at which the bit gains its meaning\\n\"\n+            \"           \\\"timeout\\\": xx,       (numeric) the median time past of a block at which the deployment is considered failed if not yet locked in\\n\"\n+            \"           \\\"since\\\": xx,         (numeric) height of the first block to which the status applies\\n\"\n+            \"           \\\"statistics\\\": {      (object) numeric statistics about BIP9 signalling for a softfork\\n\"\n+            \"              \\\"period\\\": xx,     (numeric) the length in blocks of the BIP9 signalling period \\n\"\n+            \"              \\\"threshold\\\": xx,  (numeric) the number of blocks with the version bit set required to activate the feature \\n\"\n+            \"              \\\"elapsed\\\": xx,    (numeric) the number of blocks elapsed since the beginning of the current period \\n\"\n+            \"              \\\"count\\\": xx,      (numeric) the number of blocks with the version bit set in the current period \\n\"\n+            \"              \\\"possible\\\": xx    (boolean) returns false if there are not enough blocks left in this period to pass activation threshold \\n\"\n+            \"           }\\n\"\n+            \"        },\\n\"\n+            \"        \\\"height\\\": \\\"xxxxxx\\\",     (numeric) height of the first block which the rules are enforced (only for \\\"buried\\\" type, or \\\"bip9\\\" type with \\\"locked_in\\\" or \\\"active\\\" status)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305496434",
      "id" : 305496434,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTQ5NjQzNA==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 157,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 264351017,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305496434",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305496691"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305496691"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe \"true if the rules are enforced in the block that is the current chain tip\" to be more explicit about how to think about this for buried deployments?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-19T19:33:33Z",
      "diff_hunk" : "@@ -1275,29 +1269,25 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"pruneheight\\\": xxxxxx,        (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n             \"  \\\"automatic_pruning\\\": xx,      (boolean) whether automatic pruning is enabled (only present if pruning is enabled)\\n\"\n             \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if automatic pruning is enabled)\\n\"\n-            \"  \\\"softforks\\\": [                (array) status of softforks in progress\\n\"\n-            \"     {\\n\"\n-            \"        \\\"id\\\": \\\"xxxx\\\",           (string) name of softfork\\n\"\n-            \"        \\\"version\\\": xx,          (numeric) block version\\n\"\n-            \"        \\\"reject\\\": {             (object) progress toward rejecting pre-softfork blocks\\n\"\n-            \"           \\\"status\\\": xx,        (boolean) true if threshold reached\\n\"\n-            \"        },\\n\"\n-            \"     }, ...\\n\"\n-            \"  ],\\n\"\n-            \"  \\\"bip9_softforks\\\": {           (object) status of BIP9 softforks in progress\\n\"\n+            \"  \\\"softforks\\\": {                (object) status of softforks\\n\"\n             \"     \\\"xxxx\\\" : {                 (string) name of the softfork\\n\"\n-            \"        \\\"status\\\": \\\"xxxx\\\",       (string) one of \\\"defined\\\", \\\"started\\\", \\\"locked_in\\\", \\\"active\\\", \\\"failed\\\"\\n\"\n-            \"        \\\"bit\\\": xx,              (numeric) the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\\n\"\n-            \"        \\\"startTime\\\": xx,        (numeric) the minimum median time past of a block at which the bit gains its meaning\\n\"\n-            \"        \\\"timeout\\\": xx,          (numeric) the median time past of a block at which the deployment is considered failed if not yet locked in\\n\"\n-            \"        \\\"since\\\": xx,            (numeric) height of the first block to which the status applies\\n\"\n-            \"        \\\"statistics\\\": {         (object) numeric statistics about BIP9 signalling for a softfork (only for \\\"started\\\" status)\\n\"\n-            \"           \\\"period\\\": xx,        (numeric) the length in blocks of the BIP9 signalling period \\n\"\n-            \"           \\\"threshold\\\": xx,     (numeric) the number of blocks with the version bit set required to activate the feature \\n\"\n-            \"           \\\"elapsed\\\": xx,       (numeric) the number of blocks elapsed since the beginning of the current period \\n\"\n-            \"           \\\"count\\\": xx,         (numeric) the number of blocks with the version bit set in the current period \\n\"\n-            \"           \\\"possible\\\": xx       (boolean) returns false if there are not enough blocks left in this period to pass activation threshold \\n\"\n-            \"        }\\n\"\n+            \"        \\\"type\\\": \\\"xxxx\\\",         (string) one of \\\"buried\\\", \\\"bip9\\\"\\n\"\n+            \"        \\\"bip9\\\": {               (object) status of bip9 softforks (only for \\\"bip9\\\" type)\\n\"\n+            \"           \\\"status\\\": \\\"xxxx\\\",    (string) one of \\\"defined\\\", \\\"started\\\", \\\"locked_in\\\", \\\"active\\\", \\\"failed\\\"\\n\"\n+            \"           \\\"bit\\\": xx,           (numeric) the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\\n\"\n+            \"           \\\"startTime\\\": xx,     (numeric) the minimum median time past of a block at which the bit gains its meaning\\n\"\n+            \"           \\\"timeout\\\": xx,       (numeric) the median time past of a block at which the deployment is considered failed if not yet locked in\\n\"\n+            \"           \\\"since\\\": xx,         (numeric) height of the first block to which the status applies\\n\"\n+            \"           \\\"statistics\\\": {      (object) numeric statistics about BIP9 signalling for a softfork\\n\"\n+            \"              \\\"period\\\": xx,     (numeric) the length in blocks of the BIP9 signalling period \\n\"\n+            \"              \\\"threshold\\\": xx,  (numeric) the number of blocks with the version bit set required to activate the feature \\n\"\n+            \"              \\\"elapsed\\\": xx,    (numeric) the number of blocks elapsed since the beginning of the current period \\n\"\n+            \"              \\\"count\\\": xx,      (numeric) the number of blocks with the version bit set in the current period \\n\"\n+            \"              \\\"possible\\\": xx    (boolean) returns false if there are not enough blocks left in this period to pass activation threshold \\n\"\n+            \"           }\\n\"\n+            \"        },\\n\"\n+            \"        \\\"height\\\": \\\"xxxxxx\\\",     (numeric) height of the first block which the rules are enforced (only for \\\"buried\\\" type, or \\\"bip9\\\" type with \\\"locked_in\\\" or \\\"active\\\" status)\\n\"\n+            \"        \\\"active\\\": xx,           (boolean) true if the rules are enforced\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305496691",
      "id" : 305496691,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTQ5NjY5MQ==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 158,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 264351017,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305496691",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305499278"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305499278"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I wonder if it's worth adding a comment here to explain that segwit v0 script rules are enforced on all blocks, other than the BIP 16 exception?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-19T19:39:20Z",
      "diff_hunk" : "@@ -59,6 +58,8 @@ struct Params {\n     int BIP66Height;\n     /** Block height at which CSV (BIP68, BIP112 and BIP113) becomes active */\n     int CSVHeight;\n+    /** Block height at which Segwit (BIP141, BIP143 and BIP147) becomes active */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305499278",
      "id" : 305499278,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTQ5OTI3OA==",
      "original_commit_id" : "b1cab3acafb420e2e26ca503187dc09e27469243",
      "original_position" : 12,
      "path" : "src/consensus/params.h",
      "position" : null,
      "pull_request_review_id" : 264351017,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305499278",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305502345"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305502345"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't love that we're leaking bip9 implementation calculations into the rpc code.  Though it is useful to see when a LOCKED_IN softfork will actually activate.  Can we invoke a method in the bip9 machinery instead?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-19T19:49:54Z",
      "diff_hunk" : "@@ -1240,18 +1232,20 @@ static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Conse\n         statsUV.pushKV(\"elapsed\", statsStruct.elapsed);\n         statsUV.pushKV(\"count\", statsStruct.count);\n         statsUV.pushKV(\"possible\", statsStruct.possible);\n-        rv.pushKV(\"statistics\", statsUV);\n+        bip9.pushKV(\"statistics\", statsUV);\n     }\n-    return rv;\n-}\n \n-static void BIP9SoftForkDescPushBack(UniValue& bip9_softforks, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n-{\n-    // Deployments with timeout value of 0 are hidden.\n-    // A timeout value of 0 guarantees a softfork will never be activated.\n-    // This is used when softfork codes are merged without specifying the deployment schedule.\n-    if (consensusParams.vDeployments[id].nTimeout > 0)\n-        bip9_softforks.pushKV(VersionBitsDeploymentInfo[id].name, BIP9SoftForkDesc(consensusParams, id));\n+    UniValue rv(UniValue::VOBJ);\n+    rv.pushKV(\"type\", \"bip9\");\n+    rv.pushKV(\"bip9\", bip9);\n+    if (ThresholdState::LOCKED_IN == thresholdState) {\n+        rv.pushKV(\"height\", since_height + consensusParams.nMinerConfirmationWindow);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305502345",
      "id" : 305502345,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTUwMjM0NQ==",
      "original_commit_id" : "87860d59ebecc227de4ecdbcde5331a6d05239d1",
      "original_position" : 104,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 264351017,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305502345",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305509869"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305509869"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Since this interface change is a breaking change, I'd like to split this object up into a new rpc. When calling getblockchaininfo you are not really interested in the state of all softforks that ever happened, especially ones that have activated a long time ago.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-19T20:14:34Z",
      "diff_hunk" : "@@ -1275,29 +1269,25 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"pruneheight\\\": xxxxxx,        (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n             \"  \\\"automatic_pruning\\\": xx,      (boolean) whether automatic pruning is enabled (only present if pruning is enabled)\\n\"\n             \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if automatic pruning is enabled)\\n\"\n-            \"  \\\"softforks\\\": [                (array) status of softforks in progress\\n\"\n-            \"     {\\n\"\n-            \"        \\\"id\\\": \\\"xxxx\\\",           (string) name of softfork\\n\"\n-            \"        \\\"version\\\": xx,          (numeric) block version\\n\"\n-            \"        \\\"reject\\\": {             (object) progress toward rejecting pre-softfork blocks\\n\"\n-            \"           \\\"status\\\": xx,        (boolean) true if threshold reached\\n\"\n-            \"        },\\n\"\n-            \"     }, ...\\n\"\n-            \"  ],\\n\"\n-            \"  \\\"bip9_softforks\\\": {           (object) status of BIP9 softforks in progress\\n\"\n+            \"  \\\"softforks\\\": {                (object) status of softforks\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305509869",
      "id" : 305509869,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTUwOTg2OQ==",
      "original_commit_id" : "01463a8055560260666ae409c01152f5443a3784",
      "original_position" : 128,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 129,
      "pull_request_review_id" : 264411916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305509869",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305510398"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305510398"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You'd have to hold `cs_main` from `VersionBitsTipState` to this line to protect against a race where a block comes in during this function.\r\n\r\nThough, I'd prefer to hold `cs_main` until the whole json softforks object is constructed.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-19T20:16:24Z",
      "diff_hunk" : "@@ -1183,54 +1183,46 @@ static UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.pushKV(\"status\", activated);\n-    return rv;\n-}\n+    // For buried deployments.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.\n+    if (height == std::numeric_limits<int>::max()) return;\n \n-static UniValue SoftForkDesc(const std::string &name, int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n-{\n     UniValue rv(UniValue::VOBJ);\n-    rv.pushKV(\"id\", name);\n-    rv.pushKV(\"version\", version);\n-    rv.pushKV(\"reject\", SoftForkMajorityDesc(version, pindex, consensusParams));\n-    return rv;\n+    rv.pushKV(\"type\", \"buried\");\n+    // getblockchaininfo reports the softfork as active from when the chain height is\n+    // one below the activation height\n+    rv.pushKV(\"active\", ::ChainActive().Tip()->nHeight + 1 >= height);\n+    rv.pushKV(\"height\", height);\n+    softforks.pushKV(name, rv);\n }\n \n-static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n+static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &name, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n {\n-    UniValue rv(UniValue::VOBJ);\n+    // For BIP9 deployments.\n+    // Deployments (e.g. testdummy) with timeout value before Jan 1, 2009 are hidden.\n+    // A timeout value of 0 guarantees a softfork will never be activated.\n+    // This is used when softfork codes are merged without specifying the deployment schedule.\n+    if (consensusParams.vDeployments[id].nTimeout <= 1230768000) return;\n+\n+    UniValue bip9(UniValue::VOBJ);\n     const ThresholdState thresholdState = VersionBitsTipState(consensusParams, id);\n     switch (thresholdState) {\n-    case ThresholdState::DEFINED: rv.pushKV(\"status\", \"defined\"); break;\n-    case ThresholdState::STARTED: rv.pushKV(\"status\", \"started\"); break;\n-    case ThresholdState::LOCKED_IN: rv.pushKV(\"status\", \"locked_in\"); break;\n-    case ThresholdState::ACTIVE: rv.pushKV(\"status\", \"active\"); break;\n-    case ThresholdState::FAILED: rv.pushKV(\"status\", \"failed\"); break;\n+    case ThresholdState::DEFINED: bip9.pushKV(\"status\", \"defined\"); break;\n+    case ThresholdState::STARTED: bip9.pushKV(\"status\", \"started\"); break;\n+    case ThresholdState::LOCKED_IN: bip9.pushKV(\"status\", \"locked_in\"); break;\n+    case ThresholdState::ACTIVE: bip9.pushKV(\"status\", \"active\"); break;\n+    case ThresholdState::FAILED: bip9.pushKV(\"status\", \"failed\"); break;\n     }\n     if (ThresholdState::STARTED == thresholdState)\n     {\n-        rv.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n+        bip9.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n     }\n-    rv.pushKV(\"startTime\", consensusParams.vDeployments[id].nStartTime);\n-    rv.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n-    rv.pushKV(\"since\", VersionBitsTipStateSinceHeight(consensusParams, id));\n+    bip9.pushKV(\"startTime\", consensusParams.vDeployments[id].nStartTime);\n+    bip9.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n+    int64_t since_height = VersionBitsTipStateSinceHeight(consensusParams, id);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305510398",
      "id" : 305510398,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTUxMDM5OA==",
      "original_commit_id" : "01463a8055560260666ae409c01152f5443a3784",
      "original_position" : 78,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 81,
      "pull_request_review_id" : 264411916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305510398",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305511170"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305511170"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why remove the TODO?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-19T20:18:56Z",
      "diff_hunk" : "@@ -117,9 +117,7 @@ TestingSetup::~TestingSetup()\n \n TestChain100Setup::TestChain100Setup() : TestingSetup(CBaseChainParams::REGTEST)\n {\n-    // CreateAndProcessBlock() does not support building SegWit blocks, so don't activate in these tests.\n-    // TODO: fix the code to support SegWit blocks.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305511170",
      "id" : 305511170,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTUxMTE3MA==",
      "original_commit_id" : "01463a8055560260666ae409c01152f5443a3784",
      "original_position" : 5,
      "path" : "src/test/setup_common.cpp",
      "position" : null,
      "pull_request_review_id" : 264411916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305511170",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305536182"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305536182"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This has been changed in \" [RPC] getblockchaininfo: Loop through the bip9 soft fork deployments instead of hard coding #10874 \" and now you are changing it back again. I'd prefer to just keep one version and stick with it, especially if there is no reason to switch.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-19T21:53:07Z",
      "diff_hunk" : "@@ -1342,16 +1332,14 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n     }\n \n     const Consensus::Params& consensusParams = Params().GetConsensus();\n-    UniValue softforks(UniValue::VARR);\n-    UniValue bip9_softforks(UniValue::VOBJ);\n-    softforks.push_back(SoftForkDesc(\"bip34\", 2, tip, consensusParams));\n-    softforks.push_back(SoftForkDesc(\"bip66\", 3, tip, consensusParams));\n-    softforks.push_back(SoftForkDesc(\"bip65\", 4, tip, consensusParams));\n-    for (int pos = Consensus::DEPLOYMENT_CSV; pos != Consensus::MAX_VERSION_BITS_DEPLOYMENTS; ++pos) {\n-        BIP9SoftForkDescPushBack(bip9_softforks, consensusParams, static_cast<Consensus::DeploymentPos>(pos));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305536182",
      "id" : 305536182,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNTUzNjE4Mg==",
      "original_commit_id" : "87860d59ebecc227de4ecdbcde5331a6d05239d1",
      "original_position" : 172,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 173,
      "pull_request_review_id" : 264411916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/305536182",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306521009"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306521009"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks. Changed to use your wording.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-23T20:36:36Z",
      "diff_hunk" : "@@ -1183,54 +1183,46 @@ static UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.pushKV(\"status\", activated);\n-    return rv;\n-}\n+    // For buried deployments.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.\n+    if (height == std::numeric_limits<int>::max()) return;\n \n-static UniValue SoftForkDesc(const std::string &name, int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n-{\n     UniValue rv(UniValue::VOBJ);\n-    rv.pushKV(\"id\", name);\n-    rv.pushKV(\"version\", version);\n-    rv.pushKV(\"reject\", SoftForkMajorityDesc(version, pindex, consensusParams));\n-    return rv;\n+    rv.pushKV(\"type\", \"buried\");\n+    // getblockchaininfo reports the softfork as active from when the chain height is\n+    // one below the activation height\n+    rv.pushKV(\"active\", ::ChainActive().Tip()->nHeight + 1 >= height);\n+    rv.pushKV(\"height\", height);\n+    softforks.pushKV(name, rv);\n }\n \n-static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n+static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &name, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n {\n-    UniValue rv(UniValue::VOBJ);\n+    // For BIP9 deployments.\n+    // Deployments (e.g. testdummy) with timeout value before Jan 1, 2009 are hidden.\n+    // A timeout value of 0 guarantees a softfork will never be activated.\n+    // This is used when softfork codes are merged without specifying the deployment schedule.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306521009",
      "id" : 306521009,
      "in_reply_to_id" : 305482869,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNjUyMTAwOQ==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 51,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 265662061,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306521009",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306528190"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306528190"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Is the goal just to be able to indicate which entries will have a bip9 field and which ones won't?\r\n\r\nI think it's useful for users to know how the softfork logic is implemented. We could remove this and it be implicit that the activation method is bip9 if there's a bip9 object, but I think having the field makes the getblockchaininfo return object extensible if we have a different activation method for a future softfork.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-23T20:53:59Z",
      "diff_hunk" : "@@ -1275,29 +1269,25 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"pruneheight\\\": xxxxxx,        (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n             \"  \\\"automatic_pruning\\\": xx,      (boolean) whether automatic pruning is enabled (only present if pruning is enabled)\\n\"\n             \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if automatic pruning is enabled)\\n\"\n-            \"  \\\"softforks\\\": [                (array) status of softforks in progress\\n\"\n-            \"     {\\n\"\n-            \"        \\\"id\\\": \\\"xxxx\\\",           (string) name of softfork\\n\"\n-            \"        \\\"version\\\": xx,          (numeric) block version\\n\"\n-            \"        \\\"reject\\\": {             (object) progress toward rejecting pre-softfork blocks\\n\"\n-            \"           \\\"status\\\": xx,        (boolean) true if threshold reached\\n\"\n-            \"        },\\n\"\n-            \"     }, ...\\n\"\n-            \"  ],\\n\"\n-            \"  \\\"bip9_softforks\\\": {           (object) status of BIP9 softforks in progress\\n\"\n+            \"  \\\"softforks\\\": {                (object) status of softforks\\n\"\n             \"     \\\"xxxx\\\" : {                 (string) name of the softfork\\n\"\n-            \"        \\\"status\\\": \\\"xxxx\\\",       (string) one of \\\"defined\\\", \\\"started\\\", \\\"locked_in\\\", \\\"active\\\", \\\"failed\\\"\\n\"\n-            \"        \\\"bit\\\": xx,              (numeric) the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\\n\"\n-            \"        \\\"startTime\\\": xx,        (numeric) the minimum median time past of a block at which the bit gains its meaning\\n\"\n-            \"        \\\"timeout\\\": xx,          (numeric) the median time past of a block at which the deployment is considered failed if not yet locked in\\n\"\n-            \"        \\\"since\\\": xx,            (numeric) height of the first block to which the status applies\\n\"\n-            \"        \\\"statistics\\\": {         (object) numeric statistics about BIP9 signalling for a softfork (only for \\\"started\\\" status)\\n\"\n-            \"           \\\"period\\\": xx,        (numeric) the length in blocks of the BIP9 signalling period \\n\"\n-            \"           \\\"threshold\\\": xx,     (numeric) the number of blocks with the version bit set required to activate the feature \\n\"\n-            \"           \\\"elapsed\\\": xx,       (numeric) the number of blocks elapsed since the beginning of the current period \\n\"\n-            \"           \\\"count\\\": xx,         (numeric) the number of blocks with the version bit set in the current period \\n\"\n-            \"           \\\"possible\\\": xx       (boolean) returns false if there are not enough blocks left in this period to pass activation threshold \\n\"\n-            \"        }\\n\"\n+            \"        \\\"type\\\": \\\"xxxx\\\",         (string) one of \\\"buried\\\", \\\"bip9\\\"\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306528190",
      "id" : 306528190,
      "in_reply_to_id" : 305490525,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNjUyODE5MA==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 142,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 143,
      "pull_request_review_id" : 265662061,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306528190",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306530713"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306530713"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added a short description and a reference to BIP 90.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-23T21:00:19Z",
      "diff_hunk" : "@@ -1183,54 +1183,46 @@ static UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.pushKV(\"status\", activated);\n-    return rv;\n-}\n+    // For buried deployments.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306530713",
      "id" : 306530713,
      "in_reply_to_id" : 305463041,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNjUzMDcxMw==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 26,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 265662061,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306530713",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306796851"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306796851"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done. Added a `VersionBitsActivationHeight()` function to validation.cpp",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-24T13:03:47Z",
      "diff_hunk" : "@@ -1240,18 +1232,20 @@ static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Conse\n         statsUV.pushKV(\"elapsed\", statsStruct.elapsed);\n         statsUV.pushKV(\"count\", statsStruct.count);\n         statsUV.pushKV(\"possible\", statsStruct.possible);\n-        rv.pushKV(\"statistics\", statsUV);\n+        bip9.pushKV(\"statistics\", statsUV);\n     }\n-    return rv;\n-}\n \n-static void BIP9SoftForkDescPushBack(UniValue& bip9_softforks, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n-{\n-    // Deployments with timeout value of 0 are hidden.\n-    // A timeout value of 0 guarantees a softfork will never be activated.\n-    // This is used when softfork codes are merged without specifying the deployment schedule.\n-    if (consensusParams.vDeployments[id].nTimeout > 0)\n-        bip9_softforks.pushKV(VersionBitsDeploymentInfo[id].name, BIP9SoftForkDesc(consensusParams, id));\n+    UniValue rv(UniValue::VOBJ);\n+    rv.pushKV(\"type\", \"bip9\");\n+    rv.pushKV(\"bip9\", bip9);\n+    if (ThresholdState::LOCKED_IN == thresholdState) {\n+        rv.pushKV(\"height\", since_height + consensusParams.nMinerConfirmationWindow);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306796851",
      "id" : 306796851,
      "in_reply_to_id" : 305502345,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNjc5Njg1MQ==",
      "original_commit_id" : "87860d59ebecc227de4ecdbcde5331a6d05239d1",
      "original_position" : 104,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 265662061,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306796851",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306797734"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306797734"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-24T13:05:53Z",
      "diff_hunk" : "@@ -1275,29 +1269,25 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"pruneheight\\\": xxxxxx,        (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n             \"  \\\"automatic_pruning\\\": xx,      (boolean) whether automatic pruning is enabled (only present if pruning is enabled)\\n\"\n             \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if automatic pruning is enabled)\\n\"\n-            \"  \\\"softforks\\\": [                (array) status of softforks in progress\\n\"\n-            \"     {\\n\"\n-            \"        \\\"id\\\": \\\"xxxx\\\",           (string) name of softfork\\n\"\n-            \"        \\\"version\\\": xx,          (numeric) block version\\n\"\n-            \"        \\\"reject\\\": {             (object) progress toward rejecting pre-softfork blocks\\n\"\n-            \"           \\\"status\\\": xx,        (boolean) true if threshold reached\\n\"\n-            \"        },\\n\"\n-            \"     }, ...\\n\"\n-            \"  ],\\n\"\n-            \"  \\\"bip9_softforks\\\": {           (object) status of BIP9 softforks in progress\\n\"\n+            \"  \\\"softforks\\\": {                (object) status of softforks\\n\"\n             \"     \\\"xxxx\\\" : {                 (string) name of the softfork\\n\"\n-            \"        \\\"status\\\": \\\"xxxx\\\",       (string) one of \\\"defined\\\", \\\"started\\\", \\\"locked_in\\\", \\\"active\\\", \\\"failed\\\"\\n\"\n-            \"        \\\"bit\\\": xx,              (numeric) the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\\n\"\n-            \"        \\\"startTime\\\": xx,        (numeric) the minimum median time past of a block at which the bit gains its meaning\\n\"\n-            \"        \\\"timeout\\\": xx,          (numeric) the median time past of a block at which the deployment is considered failed if not yet locked in\\n\"\n-            \"        \\\"since\\\": xx,            (numeric) height of the first block to which the status applies\\n\"\n-            \"        \\\"statistics\\\": {         (object) numeric statistics about BIP9 signalling for a softfork (only for \\\"started\\\" status)\\n\"\n-            \"           \\\"period\\\": xx,        (numeric) the length in blocks of the BIP9 signalling period \\n\"\n-            \"           \\\"threshold\\\": xx,     (numeric) the number of blocks with the version bit set required to activate the feature \\n\"\n-            \"           \\\"elapsed\\\": xx,       (numeric) the number of blocks elapsed since the beginning of the current period \\n\"\n-            \"           \\\"count\\\": xx,         (numeric) the number of blocks with the version bit set in the current period \\n\"\n-            \"           \\\"possible\\\": xx       (boolean) returns false if there are not enough blocks left in this period to pass activation threshold \\n\"\n-            \"        }\\n\"\n+            \"        \\\"type\\\": \\\"xxxx\\\",         (string) one of \\\"buried\\\", \\\"bip9\\\"\\n\"\n+            \"        \\\"bip9\\\": {               (object) status of bip9 softforks (only for \\\"bip9\\\" type)\\n\"\n+            \"           \\\"status\\\": \\\"xxxx\\\",    (string) one of \\\"defined\\\", \\\"started\\\", \\\"locked_in\\\", \\\"active\\\", \\\"failed\\\"\\n\"\n+            \"           \\\"bit\\\": xx,           (numeric) the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\\n\"\n+            \"           \\\"startTime\\\": xx,     (numeric) the minimum median time past of a block at which the bit gains its meaning\\n\"\n+            \"           \\\"timeout\\\": xx,       (numeric) the median time past of a block at which the deployment is considered failed if not yet locked in\\n\"\n+            \"           \\\"since\\\": xx,         (numeric) height of the first block to which the status applies\\n\"\n+            \"           \\\"statistics\\\": {      (object) numeric statistics about BIP9 signalling for a softfork\\n\"\n+            \"              \\\"period\\\": xx,     (numeric) the length in blocks of the BIP9 signalling period \\n\"\n+            \"              \\\"threshold\\\": xx,  (numeric) the number of blocks with the version bit set required to activate the feature \\n\"\n+            \"              \\\"elapsed\\\": xx,    (numeric) the number of blocks elapsed since the beginning of the current period \\n\"\n+            \"              \\\"count\\\": xx,      (numeric) the number of blocks with the version bit set in the current period \\n\"\n+            \"              \\\"possible\\\": xx    (boolean) returns false if there are not enough blocks left in this period to pass activation threshold \\n\"\n+            \"           }\\n\"\n+            \"        },\\n\"\n+            \"        \\\"height\\\": \\\"xxxxxx\\\",     (numeric) height of the first block which the rules are enforced (only for \\\"buried\\\" type, or \\\"bip9\\\" type with \\\"locked_in\\\" or \\\"active\\\" status)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306797734",
      "id" : 306797734,
      "in_reply_to_id" : 305496434,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNjc5NzczNA==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 157,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 265662061,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306797734",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306798019"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306798019"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-24T13:06:35Z",
      "diff_hunk" : "@@ -1275,29 +1269,25 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"pruneheight\\\": xxxxxx,        (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n             \"  \\\"automatic_pruning\\\": xx,      (boolean) whether automatic pruning is enabled (only present if pruning is enabled)\\n\"\n             \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if automatic pruning is enabled)\\n\"\n-            \"  \\\"softforks\\\": [                (array) status of softforks in progress\\n\"\n-            \"     {\\n\"\n-            \"        \\\"id\\\": \\\"xxxx\\\",           (string) name of softfork\\n\"\n-            \"        \\\"version\\\": xx,          (numeric) block version\\n\"\n-            \"        \\\"reject\\\": {             (object) progress toward rejecting pre-softfork blocks\\n\"\n-            \"           \\\"status\\\": xx,        (boolean) true if threshold reached\\n\"\n-            \"        },\\n\"\n-            \"     }, ...\\n\"\n-            \"  ],\\n\"\n-            \"  \\\"bip9_softforks\\\": {           (object) status of BIP9 softforks in progress\\n\"\n+            \"  \\\"softforks\\\": {                (object) status of softforks\\n\"\n             \"     \\\"xxxx\\\" : {                 (string) name of the softfork\\n\"\n-            \"        \\\"status\\\": \\\"xxxx\\\",       (string) one of \\\"defined\\\", \\\"started\\\", \\\"locked_in\\\", \\\"active\\\", \\\"failed\\\"\\n\"\n-            \"        \\\"bit\\\": xx,              (numeric) the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\\n\"\n-            \"        \\\"startTime\\\": xx,        (numeric) the minimum median time past of a block at which the bit gains its meaning\\n\"\n-            \"        \\\"timeout\\\": xx,          (numeric) the median time past of a block at which the deployment is considered failed if not yet locked in\\n\"\n-            \"        \\\"since\\\": xx,            (numeric) height of the first block to which the status applies\\n\"\n-            \"        \\\"statistics\\\": {         (object) numeric statistics about BIP9 signalling for a softfork (only for \\\"started\\\" status)\\n\"\n-            \"           \\\"period\\\": xx,        (numeric) the length in blocks of the BIP9 signalling period \\n\"\n-            \"           \\\"threshold\\\": xx,     (numeric) the number of blocks with the version bit set required to activate the feature \\n\"\n-            \"           \\\"elapsed\\\": xx,       (numeric) the number of blocks elapsed since the beginning of the current period \\n\"\n-            \"           \\\"count\\\": xx,         (numeric) the number of blocks with the version bit set in the current period \\n\"\n-            \"           \\\"possible\\\": xx       (boolean) returns false if there are not enough blocks left in this period to pass activation threshold \\n\"\n-            \"        }\\n\"\n+            \"        \\\"type\\\": \\\"xxxx\\\",         (string) one of \\\"buried\\\", \\\"bip9\\\"\\n\"\n+            \"        \\\"bip9\\\": {               (object) status of bip9 softforks (only for \\\"bip9\\\" type)\\n\"\n+            \"           \\\"status\\\": \\\"xxxx\\\",    (string) one of \\\"defined\\\", \\\"started\\\", \\\"locked_in\\\", \\\"active\\\", \\\"failed\\\"\\n\"\n+            \"           \\\"bit\\\": xx,           (numeric) the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\\n\"\n+            \"           \\\"startTime\\\": xx,     (numeric) the minimum median time past of a block at which the bit gains its meaning\\n\"\n+            \"           \\\"timeout\\\": xx,       (numeric) the median time past of a block at which the deployment is considered failed if not yet locked in\\n\"\n+            \"           \\\"since\\\": xx,         (numeric) height of the first block to which the status applies\\n\"\n+            \"           \\\"statistics\\\": {      (object) numeric statistics about BIP9 signalling for a softfork\\n\"\n+            \"              \\\"period\\\": xx,     (numeric) the length in blocks of the BIP9 signalling period \\n\"\n+            \"              \\\"threshold\\\": xx,  (numeric) the number of blocks with the version bit set required to activate the feature \\n\"\n+            \"              \\\"elapsed\\\": xx,    (numeric) the number of blocks elapsed since the beginning of the current period \\n\"\n+            \"              \\\"count\\\": xx,      (numeric) the number of blocks with the version bit set in the current period \\n\"\n+            \"              \\\"possible\\\": xx    (boolean) returns false if there are not enough blocks left in this period to pass activation threshold \\n\"\n+            \"           }\\n\"\n+            \"        },\\n\"\n+            \"        \\\"height\\\": \\\"xxxxxx\\\",     (numeric) height of the first block which the rules are enforced (only for \\\"buried\\\" type, or \\\"bip9\\\" type with \\\"locked_in\\\" or \\\"active\\\" status)\\n\"\n+            \"        \\\"active\\\": xx,           (boolean) true if the rules are enforced\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306798019",
      "id" : 306798019,
      "in_reply_to_id" : 305496691,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNjc5ODAxOQ==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 158,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 265662061,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306798019",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306798407"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306798407"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think it's ok to leave this for testing BIP9 logic.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-24T13:07:30Z",
      "diff_hunk" : "@@ -1342,16 +1332,14 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n     }\n \n     const Consensus::Params& consensusParams = Params().GetConsensus();\n-    UniValue softforks(UniValue::VARR);\n-    UniValue bip9_softforks(UniValue::VOBJ);\n-    softforks.push_back(SoftForkDesc(\"bip34\", 2, tip, consensusParams));\n-    softforks.push_back(SoftForkDesc(\"bip66\", 3, tip, consensusParams));\n-    softforks.push_back(SoftForkDesc(\"bip65\", 4, tip, consensusParams));\n-    for (int pos = Consensus::DEPLOYMENT_CSV; pos != Consensus::MAX_VERSION_BITS_DEPLOYMENTS; ++pos) {\n-        BIP9SoftForkDescPushBack(bip9_softforks, consensusParams, static_cast<Consensus::DeploymentPos>(pos));\n-    }\n+    UniValue softforks(UniValue::VOBJ);\n+    BuriedForkDescPushBack(softforks, \"bip34\", consensusParams.BIP34Height);\n+    BuriedForkDescPushBack(softforks, \"bip66\", consensusParams.BIP66Height);\n+    BuriedForkDescPushBack(softforks, \"bip65\", consensusParams.BIP65Height);\n+    BIP9SoftForkDescPushBack(softforks, \"csv\", consensusParams, Consensus::DEPLOYMENT_CSV);\n+    BIP9SoftForkDescPushBack(softforks, \"segwit\", consensusParams, Consensus::DEPLOYMENT_SEGWIT);\n+    BIP9SoftForkDescPushBack(softforks, \"testdummy\", consensusParams, Consensus::DEPLOYMENT_TESTDUMMY);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306798407",
      "id" : 306798407,
      "in_reply_to_id" : 305488449,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNjc5ODQwNw==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 180,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 181,
      "pull_request_review_id" : 265662061,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306798407",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306798539"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306798539"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Leaving this in so we can continue to test BIP 9 logic.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-24T13:07:48Z",
      "diff_hunk" : "@@ -1183,54 +1183,46 @@ static UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.pushKV(\"status\", activated);\n-    return rv;\n-}\n+    // For buried deployments.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.\n+    if (height == std::numeric_limits<int>::max()) return;\n \n-static UniValue SoftForkDesc(const std::string &name, int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n-{\n     UniValue rv(UniValue::VOBJ);\n-    rv.pushKV(\"id\", name);\n-    rv.pushKV(\"version\", version);\n-    rv.pushKV(\"reject\", SoftForkMajorityDesc(version, pindex, consensusParams));\n-    return rv;\n+    rv.pushKV(\"type\", \"buried\");\n+    // getblockchaininfo reports the softfork as active from when the chain height is\n+    // one below the activation height\n+    rv.pushKV(\"active\", ::ChainActive().Tip()->nHeight + 1 >= height);\n+    rv.pushKV(\"height\", height);\n+    softforks.pushKV(name, rv);\n }\n \n-static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n+static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &name, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n {\n-    UniValue rv(UniValue::VOBJ);\n+    // For BIP9 deployments.\n+    // Deployments (e.g. testdummy) with timeout value before Jan 1, 2009 are hidden.\n+    // A timeout value of 0 guarantees a softfork will never be activated.\n+    // This is used when softfork codes are merged without specifying the deployment schedule.\n+    if (consensusParams.vDeployments[id].nTimeout <= 1230768000) return;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306798539",
      "id" : 306798539,
      "in_reply_to_id" : 305494547,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNjc5ODUzOQ==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 52,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 55,
      "pull_request_review_id" : 265662061,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/306798539",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307008898"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307008898"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`cs_main` is held for the duration of `getblockchaininfo()`. That's not changed by this PR.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-24T20:35:10Z",
      "diff_hunk" : "@@ -1183,54 +1183,46 @@ static UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.pushKV(\"status\", activated);\n-    return rv;\n-}\n+    // For buried deployments.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.\n+    if (height == std::numeric_limits<int>::max()) return;\n \n-static UniValue SoftForkDesc(const std::string &name, int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n-{\n     UniValue rv(UniValue::VOBJ);\n-    rv.pushKV(\"id\", name);\n-    rv.pushKV(\"version\", version);\n-    rv.pushKV(\"reject\", SoftForkMajorityDesc(version, pindex, consensusParams));\n-    return rv;\n+    rv.pushKV(\"type\", \"buried\");\n+    // getblockchaininfo reports the softfork as active from when the chain height is\n+    // one below the activation height\n+    rv.pushKV(\"active\", ::ChainActive().Tip()->nHeight + 1 >= height);\n+    rv.pushKV(\"height\", height);\n+    softforks.pushKV(name, rv);\n }\n \n-static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n+static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &name, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n {\n-    UniValue rv(UniValue::VOBJ);\n+    // For BIP9 deployments.\n+    // Deployments (e.g. testdummy) with timeout value before Jan 1, 2009 are hidden.\n+    // A timeout value of 0 guarantees a softfork will never be activated.\n+    // This is used when softfork codes are merged without specifying the deployment schedule.\n+    if (consensusParams.vDeployments[id].nTimeout <= 1230768000) return;\n+\n+    UniValue bip9(UniValue::VOBJ);\n     const ThresholdState thresholdState = VersionBitsTipState(consensusParams, id);\n     switch (thresholdState) {\n-    case ThresholdState::DEFINED: rv.pushKV(\"status\", \"defined\"); break;\n-    case ThresholdState::STARTED: rv.pushKV(\"status\", \"started\"); break;\n-    case ThresholdState::LOCKED_IN: rv.pushKV(\"status\", \"locked_in\"); break;\n-    case ThresholdState::ACTIVE: rv.pushKV(\"status\", \"active\"); break;\n-    case ThresholdState::FAILED: rv.pushKV(\"status\", \"failed\"); break;\n+    case ThresholdState::DEFINED: bip9.pushKV(\"status\", \"defined\"); break;\n+    case ThresholdState::STARTED: bip9.pushKV(\"status\", \"started\"); break;\n+    case ThresholdState::LOCKED_IN: bip9.pushKV(\"status\", \"locked_in\"); break;\n+    case ThresholdState::ACTIVE: bip9.pushKV(\"status\", \"active\"); break;\n+    case ThresholdState::FAILED: bip9.pushKV(\"status\", \"failed\"); break;\n     }\n     if (ThresholdState::STARTED == thresholdState)\n     {\n-        rv.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n+        bip9.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n     }\n-    rv.pushKV(\"startTime\", consensusParams.vDeployments[id].nStartTime);\n-    rv.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n-    rv.pushKV(\"since\", VersionBitsTipStateSinceHeight(consensusParams, id));\n+    bip9.pushKV(\"startTime\", consensusParams.vDeployments[id].nStartTime);\n+    bip9.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n+    int64_t since_height = VersionBitsTipStateSinceHeight(consensusParams, id);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307008898",
      "id" : 307008898,
      "in_reply_to_id" : 305510398,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzAwODg5OA==",
      "original_commit_id" : "01463a8055560260666ae409c01152f5443a3784",
      "original_position" : 78,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 81,
      "pull_request_review_id" : 266270566,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307008898",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307011140"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307011140"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks for digging that out. I really don't understand why that PR was merged. The author's justification (https://github.com/bitcoin/bitcoin/pull/10874#issuecomment-321609838) was \"I had only made the change since I needed to add stats about BIP 91 to one of my branches and the fact that the forks needed to be hard coded in to be displayed with getblockchaininfo bothered me.\" It doesn't make sense to me that lines of code were added to bitcoin core to support someone's fork of the project.\r\n\r\nWhen there are only three soft fork deployments, listing them out explicitly is less lines of code and seems clearer to me.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-24T20:40:55Z",
      "diff_hunk" : "@@ -1342,16 +1332,14 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n     }\n \n     const Consensus::Params& consensusParams = Params().GetConsensus();\n-    UniValue softforks(UniValue::VARR);\n-    UniValue bip9_softforks(UniValue::VOBJ);\n-    softforks.push_back(SoftForkDesc(\"bip34\", 2, tip, consensusParams));\n-    softforks.push_back(SoftForkDesc(\"bip66\", 3, tip, consensusParams));\n-    softforks.push_back(SoftForkDesc(\"bip65\", 4, tip, consensusParams));\n-    for (int pos = Consensus::DEPLOYMENT_CSV; pos != Consensus::MAX_VERSION_BITS_DEPLOYMENTS; ++pos) {\n-        BIP9SoftForkDescPushBack(bip9_softforks, consensusParams, static_cast<Consensus::DeploymentPos>(pos));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307011140",
      "id" : 307011140,
      "in_reply_to_id" : 305536182,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzAxMTE0MA==",
      "original_commit_id" : "87860d59ebecc227de4ecdbcde5331a6d05239d1",
      "original_position" : 172,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 173,
      "pull_request_review_id" : 266273406,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307011140",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307015396"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307015396"
         }
      },
      "author_association" : "MEMBER",
      "body" : "oops. Bad rebase. I've readded the message.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-24T20:51:13Z",
      "diff_hunk" : "@@ -117,9 +117,7 @@ TestingSetup::~TestingSetup()\n \n TestChain100Setup::TestChain100Setup() : TestingSetup(CBaseChainParams::REGTEST)\n {\n-    // CreateAndProcessBlock() does not support building SegWit blocks, so don't activate in these tests.\n-    // TODO: fix the code to support SegWit blocks.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307015396",
      "id" : 307015396,
      "in_reply_to_id" : 305511170,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzAxNTM5Ng==",
      "original_commit_id" : "01463a8055560260666ae409c01152f5443a3784",
      "original_position" : 5,
      "path" : "src/test/setup_common.cpp",
      "position" : null,
      "pull_request_review_id" : 266278688,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307015396",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307018182"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307018182"
         }
      },
      "author_association" : "MEMBER",
      "body" : "(also, at the end of this PR, there's only one BIP9 softfork left (TESTDUMMY), so having a for loop _really_ doesn't make sense)",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-24T20:58:04Z",
      "diff_hunk" : "@@ -1342,16 +1332,14 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n     }\n \n     const Consensus::Params& consensusParams = Params().GetConsensus();\n-    UniValue softforks(UniValue::VARR);\n-    UniValue bip9_softforks(UniValue::VOBJ);\n-    softforks.push_back(SoftForkDesc(\"bip34\", 2, tip, consensusParams));\n-    softforks.push_back(SoftForkDesc(\"bip66\", 3, tip, consensusParams));\n-    softforks.push_back(SoftForkDesc(\"bip65\", 4, tip, consensusParams));\n-    for (int pos = Consensus::DEPLOYMENT_CSV; pos != Consensus::MAX_VERSION_BITS_DEPLOYMENTS; ++pos) {\n-        BIP9SoftForkDescPushBack(bip9_softforks, consensusParams, static_cast<Consensus::DeploymentPos>(pos));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307018182",
      "id" : 307018182,
      "in_reply_to_id" : 305536182,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzAxODE4Mg==",
      "original_commit_id" : "87860d59ebecc227de4ecdbcde5331a6d05239d1",
      "original_position" : 172,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 173,
      "pull_request_review_id" : 266282163,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307018182",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307019023"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307019023"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think some users _may_ be interested in which height the node started enforcing rules. Even though that's leaking some implementation detail (see https://github.com/bitcoin/bitcoin/pull/16060#discussion_r306528190), I think it's better to show more to the user than less.\r\n\r\nAs for adding a new RPC, that's even more of a breaking change for clients. For me, it makes most sense to return all blockchain info to the client in a single object from `getblockchaininfo`.\r\n\r\nAs Suhas points out (https://github.com/bitcoin/bitcoin/pull/16060#pullrequestreview-264351017), there's infinite room for bikeshedding here. Unless there's a really compelling reason to add a separate RPC for softfork deployments, I'd prefer to keep this as it is.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-24T21:00:03Z",
      "diff_hunk" : "@@ -1275,29 +1269,25 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"pruneheight\\\": xxxxxx,        (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n             \"  \\\"automatic_pruning\\\": xx,      (boolean) whether automatic pruning is enabled (only present if pruning is enabled)\\n\"\n             \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if automatic pruning is enabled)\\n\"\n-            \"  \\\"softforks\\\": [                (array) status of softforks in progress\\n\"\n-            \"     {\\n\"\n-            \"        \\\"id\\\": \\\"xxxx\\\",           (string) name of softfork\\n\"\n-            \"        \\\"version\\\": xx,          (numeric) block version\\n\"\n-            \"        \\\"reject\\\": {             (object) progress toward rejecting pre-softfork blocks\\n\"\n-            \"           \\\"status\\\": xx,        (boolean) true if threshold reached\\n\"\n-            \"        },\\n\"\n-            \"     }, ...\\n\"\n-            \"  ],\\n\"\n-            \"  \\\"bip9_softforks\\\": {           (object) status of BIP9 softforks in progress\\n\"\n+            \"  \\\"softforks\\\": {                (object) status of softforks\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307019023",
      "id" : 307019023,
      "in_reply_to_id" : 305509869,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzAxOTAyMw==",
      "original_commit_id" : "01463a8055560260666ae409c01152f5443a3784",
      "original_position" : 128,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 129,
      "pull_request_review_id" : 266283132,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307019023",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for the review @MarcoFalke . I believe I've addressed all your comments.",
      "created_at" : "2019-07-24T21:00:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-514798182",
      "id" : 514798182,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNDc5ODE4Mg==",
      "updated_at" : "2019-07-24T21:00:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/514798182",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307028561"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307028561"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Indeed, you are right.\r\n\r\nstyle-nit: You could add `EXCLUSIVE_LOCKS_REQUIRED` to `BIP9SoftForkDescPushBack` and it should still compile.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-24T21:25:30Z",
      "diff_hunk" : "@@ -1183,54 +1183,46 @@ static UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.pushKV(\"status\", activated);\n-    return rv;\n-}\n+    // For buried deployments.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.\n+    if (height == std::numeric_limits<int>::max()) return;\n \n-static UniValue SoftForkDesc(const std::string &name, int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n-{\n     UniValue rv(UniValue::VOBJ);\n-    rv.pushKV(\"id\", name);\n-    rv.pushKV(\"version\", version);\n-    rv.pushKV(\"reject\", SoftForkMajorityDesc(version, pindex, consensusParams));\n-    return rv;\n+    rv.pushKV(\"type\", \"buried\");\n+    // getblockchaininfo reports the softfork as active from when the chain height is\n+    // one below the activation height\n+    rv.pushKV(\"active\", ::ChainActive().Tip()->nHeight + 1 >= height);\n+    rv.pushKV(\"height\", height);\n+    softforks.pushKV(name, rv);\n }\n \n-static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n+static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &name, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n {\n-    UniValue rv(UniValue::VOBJ);\n+    // For BIP9 deployments.\n+    // Deployments (e.g. testdummy) with timeout value before Jan 1, 2009 are hidden.\n+    // A timeout value of 0 guarantees a softfork will never be activated.\n+    // This is used when softfork codes are merged without specifying the deployment schedule.\n+    if (consensusParams.vDeployments[id].nTimeout <= 1230768000) return;\n+\n+    UniValue bip9(UniValue::VOBJ);\n     const ThresholdState thresholdState = VersionBitsTipState(consensusParams, id);\n     switch (thresholdState) {\n-    case ThresholdState::DEFINED: rv.pushKV(\"status\", \"defined\"); break;\n-    case ThresholdState::STARTED: rv.pushKV(\"status\", \"started\"); break;\n-    case ThresholdState::LOCKED_IN: rv.pushKV(\"status\", \"locked_in\"); break;\n-    case ThresholdState::ACTIVE: rv.pushKV(\"status\", \"active\"); break;\n-    case ThresholdState::FAILED: rv.pushKV(\"status\", \"failed\"); break;\n+    case ThresholdState::DEFINED: bip9.pushKV(\"status\", \"defined\"); break;\n+    case ThresholdState::STARTED: bip9.pushKV(\"status\", \"started\"); break;\n+    case ThresholdState::LOCKED_IN: bip9.pushKV(\"status\", \"locked_in\"); break;\n+    case ThresholdState::ACTIVE: bip9.pushKV(\"status\", \"active\"); break;\n+    case ThresholdState::FAILED: bip9.pushKV(\"status\", \"failed\"); break;\n     }\n     if (ThresholdState::STARTED == thresholdState)\n     {\n-        rv.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n+        bip9.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n     }\n-    rv.pushKV(\"startTime\", consensusParams.vDeployments[id].nStartTime);\n-    rv.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n-    rv.pushKV(\"since\", VersionBitsTipStateSinceHeight(consensusParams, id));\n+    bip9.pushKV(\"startTime\", consensusParams.vDeployments[id].nStartTime);\n+    bip9.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n+    int64_t since_height = VersionBitsTipStateSinceHeight(consensusParams, id);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307028561",
      "id" : 307028561,
      "in_reply_to_id" : 305510398,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzAyODU2MQ==",
      "original_commit_id" : "01463a8055560260666ae409c01152f5443a3784",
      "original_position" : 78,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 81,
      "pull_request_review_id" : 266295064,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307028561",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307038724"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307038724"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done. I've added `EXCLUSIVE_LOCKS_REQUIRED(cs_main)` to `BuriedForkDescPushBack()` and `BIP9SoftForkDescPushBack()`.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-24T21:56:12Z",
      "diff_hunk" : "@@ -1183,54 +1183,46 @@ static UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.pushKV(\"status\", activated);\n-    return rv;\n-}\n+    // For buried deployments.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.\n+    if (height == std::numeric_limits<int>::max()) return;\n \n-static UniValue SoftForkDesc(const std::string &name, int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n-{\n     UniValue rv(UniValue::VOBJ);\n-    rv.pushKV(\"id\", name);\n-    rv.pushKV(\"version\", version);\n-    rv.pushKV(\"reject\", SoftForkMajorityDesc(version, pindex, consensusParams));\n-    return rv;\n+    rv.pushKV(\"type\", \"buried\");\n+    // getblockchaininfo reports the softfork as active from when the chain height is\n+    // one below the activation height\n+    rv.pushKV(\"active\", ::ChainActive().Tip()->nHeight + 1 >= height);\n+    rv.pushKV(\"height\", height);\n+    softforks.pushKV(name, rv);\n }\n \n-static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n+static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &name, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n {\n-    UniValue rv(UniValue::VOBJ);\n+    // For BIP9 deployments.\n+    // Deployments (e.g. testdummy) with timeout value before Jan 1, 2009 are hidden.\n+    // A timeout value of 0 guarantees a softfork will never be activated.\n+    // This is used when softfork codes are merged without specifying the deployment schedule.\n+    if (consensusParams.vDeployments[id].nTimeout <= 1230768000) return;\n+\n+    UniValue bip9(UniValue::VOBJ);\n     const ThresholdState thresholdState = VersionBitsTipState(consensusParams, id);\n     switch (thresholdState) {\n-    case ThresholdState::DEFINED: rv.pushKV(\"status\", \"defined\"); break;\n-    case ThresholdState::STARTED: rv.pushKV(\"status\", \"started\"); break;\n-    case ThresholdState::LOCKED_IN: rv.pushKV(\"status\", \"locked_in\"); break;\n-    case ThresholdState::ACTIVE: rv.pushKV(\"status\", \"active\"); break;\n-    case ThresholdState::FAILED: rv.pushKV(\"status\", \"failed\"); break;\n+    case ThresholdState::DEFINED: bip9.pushKV(\"status\", \"defined\"); break;\n+    case ThresholdState::STARTED: bip9.pushKV(\"status\", \"started\"); break;\n+    case ThresholdState::LOCKED_IN: bip9.pushKV(\"status\", \"locked_in\"); break;\n+    case ThresholdState::ACTIVE: bip9.pushKV(\"status\", \"active\"); break;\n+    case ThresholdState::FAILED: bip9.pushKV(\"status\", \"failed\"); break;\n     }\n     if (ThresholdState::STARTED == thresholdState)\n     {\n-        rv.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n+        bip9.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n     }\n-    rv.pushKV(\"startTime\", consensusParams.vDeployments[id].nStartTime);\n-    rv.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n-    rv.pushKV(\"since\", VersionBitsTipStateSinceHeight(consensusParams, id));\n+    bip9.pushKV(\"startTime\", consensusParams.vDeployments[id].nStartTime);\n+    bip9.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n+    int64_t since_height = VersionBitsTipStateSinceHeight(consensusParams, id);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307038724",
      "id" : 307038724,
      "in_reply_to_id" : 305510398,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzAzODcyNA==",
      "original_commit_id" : "01463a8055560260666ae409c01152f5443a3784",
      "original_position" : 78,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 81,
      "pull_request_review_id" : 266307684,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307038724",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307066779"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307066779"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "We leak the details on how we implement the fork deployment anyway -- at worst you could `invalidateblock` back to before the fork activated and query the fork state to see if it's buried or bip9. I think fork activation is important/risky enough that it's worthwhile explicitly revealing how it's being determined.\r\n\r\nIf we were to do a bip-16-like deployment or a fixed-height-after-bip9-expiry UASF deployment as suggested in the Great Consensus Cleanup bip proposal, I think using the type field to differentiate between old, buried, fixed height deployments and future ones would make sense.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-24T23:53:15Z",
      "diff_hunk" : "@@ -1275,29 +1269,25 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"pruneheight\\\": xxxxxx,        (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n             \"  \\\"automatic_pruning\\\": xx,      (boolean) whether automatic pruning is enabled (only present if pruning is enabled)\\n\"\n             \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if automatic pruning is enabled)\\n\"\n-            \"  \\\"softforks\\\": [                (array) status of softforks in progress\\n\"\n-            \"     {\\n\"\n-            \"        \\\"id\\\": \\\"xxxx\\\",           (string) name of softfork\\n\"\n-            \"        \\\"version\\\": xx,          (numeric) block version\\n\"\n-            \"        \\\"reject\\\": {             (object) progress toward rejecting pre-softfork blocks\\n\"\n-            \"           \\\"status\\\": xx,        (boolean) true if threshold reached\\n\"\n-            \"        },\\n\"\n-            \"     }, ...\\n\"\n-            \"  ],\\n\"\n-            \"  \\\"bip9_softforks\\\": {           (object) status of BIP9 softforks in progress\\n\"\n+            \"  \\\"softforks\\\": {                (object) status of softforks\\n\"\n             \"     \\\"xxxx\\\" : {                 (string) name of the softfork\\n\"\n-            \"        \\\"status\\\": \\\"xxxx\\\",       (string) one of \\\"defined\\\", \\\"started\\\", \\\"locked_in\\\", \\\"active\\\", \\\"failed\\\"\\n\"\n-            \"        \\\"bit\\\": xx,              (numeric) the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\\n\"\n-            \"        \\\"startTime\\\": xx,        (numeric) the minimum median time past of a block at which the bit gains its meaning\\n\"\n-            \"        \\\"timeout\\\": xx,          (numeric) the median time past of a block at which the deployment is considered failed if not yet locked in\\n\"\n-            \"        \\\"since\\\": xx,            (numeric) height of the first block to which the status applies\\n\"\n-            \"        \\\"statistics\\\": {         (object) numeric statistics about BIP9 signalling for a softfork (only for \\\"started\\\" status)\\n\"\n-            \"           \\\"period\\\": xx,        (numeric) the length in blocks of the BIP9 signalling period \\n\"\n-            \"           \\\"threshold\\\": xx,     (numeric) the number of blocks with the version bit set required to activate the feature \\n\"\n-            \"           \\\"elapsed\\\": xx,       (numeric) the number of blocks elapsed since the beginning of the current period \\n\"\n-            \"           \\\"count\\\": xx,         (numeric) the number of blocks with the version bit set in the current period \\n\"\n-            \"           \\\"possible\\\": xx       (boolean) returns false if there are not enough blocks left in this period to pass activation threshold \\n\"\n-            \"        }\\n\"\n+            \"        \\\"type\\\": \\\"xxxx\\\",         (string) one of \\\"buried\\\", \\\"bip9\\\"\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307066779",
      "id" : 307066779,
      "in_reply_to_id" : 305490525,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzA2Njc3OQ==",
      "original_commit_id" : "f6e1b6153f04add44cc6d419d93d32e46bbc857b",
      "original_position" : 142,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 143,
      "pull_request_review_id" : 266341834,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307066779",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307424741"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307424741"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Oof, please do not add new exception throws, especially not in validation. Either assert false or return 0.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-25T17:53:09Z",
      "diff_hunk" : "@@ -359,11 +339,22 @@ class CRegTestParams : public CChainParams {\n         consensus.vDeployments[d].nStartTime = nStartTime;\n         consensus.vDeployments[d].nTimeout = nTimeout;\n     }\n-    void UpdateVersionBitsParametersFromArgs(const ArgsManager& args);\n+    void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n-void CRegTestParams::UpdateVersionBitsParametersFromArgs(const ArgsManager& args)\n+void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n+    if (gArgs.IsArgSet(\"-segwitheight\")) {\n+        int64_t height = gArgs.GetArg(\"-segwitheight\", consensus.SegwitHeight);\n+        if (height < -1 || height >= std::numeric_limits<int>::max()) {\n+            throw std::runtime_error(strprintf(\"Activation height %ld for segwit is out of valid range. Use -1 to disable segwit.\", height));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r307424741",
      "id" : 307424741,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzQyNDc0MQ==",
      "original_commit_id" : "fb5cbf3b6aa50c93c279cd1bd29ee3cefa0eecee",
      "original_position" : 97,
      "path" : "src/chainparams.cpp",
      "position" : 97,
      "pull_request_review_id" : 266787682,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/307424741",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "node_id" : "MDQ6VXNlcjY0OTI0Ng==",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Oops. I dropped a change to the help text (here: https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305496691). Force pushed to get those changes.",
      "created_at" : "2019-07-25T19:07:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-515175297",
      "id" : 515175297,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNTE3NTI5Nw==",
      "updated_at" : "2019-07-25T19:07:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/515175297",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308028983"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308028983"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This should be `VersionBitsTipActivationHeight` to match the other functions in validation.cpp (if there's orphaned blocks that aren't part of the most-work chain that has different signalling, those blocks can have a different activation height; that can occur with a single block reorg with sufficiently bad luck). Really the logic should be in versionbits.cpp as well and should use `Period(params)` instead of `params.nMinerconfirmationWindow` directly.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-29T01:06:37Z",
      "diff_hunk" : "@@ -4626,6 +4626,22 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n     return VersionBitsStateSinceHeight(::ChainActive().Tip(), params, pos, versionbitscache);\n }\n \n+int64_t VersionBitsActivationHeight(const Consensus::Params& params, Consensus::DeploymentPos pos)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308028983",
      "id" : 308028983,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwODAyODk4Mw==",
      "original_commit_id" : "05fb7e4a311f91bdf2b6997f6cfe8396d640e121",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 267534488,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308028983",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308030132"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308030132"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Seems simpler to me to return `-1` as \"unknown activation height\" rather than having a new failure path.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-29T01:20:27Z",
      "diff_hunk" : "@@ -4626,6 +4626,22 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n     return VersionBitsStateSinceHeight(::ChainActive().Tip(), params, pos, versionbitscache);\n }\n \n+int64_t VersionBitsActivationHeight(const Consensus::Params& params, Consensus::DeploymentPos pos)\n+{\n+    LOCK(cs_main);\n+    ThresholdState state = VersionBitsTipState(params, pos);\n+    int64_t since_height = VersionBitsTipStateSinceHeight(params, pos);\n+    switch (state) {\n+        case ThresholdState::LOCKED_IN:\n+            return since_height + params.nMinerConfirmationWindow;\n+        case ThresholdState::ACTIVE:\n+            return since_height;\n+        default:\n+            throw std::logic_error(\"VersionBitsActivationHeight called for non-ACTIVE non-LOCKED-IN deployment\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308030132",
      "id" : 308030132,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwODAzMDEzMg==",
      "original_commit_id" : "05fb7e4a311f91bdf2b6997f6cfe8396d640e121",
      "original_position" : 15,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 267534488,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308030132",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308032532"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308032532"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Seems odd to replace `IsNullDummyenabled()` with a hardcoded test, rather than `IsWitnessEnabled()`.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-29T01:46:33Z",
      "diff_hunk" : "@@ -1632,7 +1632,8 @@ static unsigned int GetBlockScriptFlags(const CBlockIndex* pindex, const Consens\n         flags |= SCRIPT_VERIFY_CHECKSEQUENCEVERIFY;\n     }\n \n-    if (IsNullDummyEnabled(pindex->pprev, consensusparams)) {\n+    // Start enforcing BIP147 NULLDUMMY (activated simultaneously with segwit)\n+    if (pindex->nHeight >= consensusparams.SegwitHeight) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308032532",
      "id" : 308032532,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwODAzMjUzMg==",
      "original_commit_id" : "fa5b4afc647df0a90c08823028e0d003e9124221",
      "original_position" : 15,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 267534488,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308032532",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308043941"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308043941"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think this is sufficient -- getblocktemplate only populates `aRules` based on versionbits state so whether or not \"segwit\" is passed as an arg, it ends up outputting an empty array `{\"rules\": []}` for the template. I think that conflicts with [BIP145](https://github.com/bitcoin/bips/blob/master/bip-0145.mediawiki): \"Transactions with witness data may only be included if the template's \"rules\" list (see BIP 9) includes \"segwit\".\"",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-29T03:19:41Z",
      "diff_hunk" : "@@ -482,9 +482,8 @@ static UniValue getblocktemplate(const JSONRPCRequest& request)\n         // TODO: Maybe recheck connections/IBD and (if something wrong) send an expires-immediately template to stop miners?\n     }\n \n-    const struct VBDeploymentInfo& segwit_info = VersionBitsDeploymentInfo[Consensus::DEPLOYMENT_SEGWIT];\n     // GBT must be called with 'segwit' set in the rules\n-    if (setClientRules.count(segwit_info.name) != 1) {\n+    if (setClientRules.count(\"segwit\") != 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308043941",
      "id" : 308043941,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwODA0Mzk0MQ==",
      "original_commit_id" : "fa5b4afc647df0a90c08823028e0d003e9124221",
      "original_position" : 7,
      "path" : "src/rpc/mining.cpp",
      "position" : 7,
      "pull_request_review_id" : 267534488,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308043941",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for the review @ajtowns \r\n\r\n> If we want to change the way getblockchaininfo reports softforks (and I think we do), we should split that out as a separate PR (like #16328 proposed) and review those changes independently, rather than forcing them in as part of tidying up the codebase.\r\n\r\nThis PR changes the way that softforks are reported, so that _buried_ softforks are reported as such. As you point out, this is a breaking change to the `getblockchaininfo` API, but one that I think makes the reporting clearer (why does `softforks[0]['reject']['status'] = true` currently mean that bip34 is active?!) The new format is also extensible and allows alternative activation methods in future, if those are required.\r\n\r\nThat API change is good by itself, but doesn't make much sense outside the context of burying the bip9 softforks. The later commits in this PR change the 'activation method' of those softforks from bip9 to buried, so is another change to how the softforks are reported in `getblockchaininfo`. I think it makes sense to look at the changes as a whole. That's why these commits are contained in the same PR.\r\n\r\n#16328 was originally opened as just the first commit from PR, but Marco then made significant changes to the code, meaning that this, #16328 and #16229 were three competing and incompatible PRs to implement overlapping changes. I think it makes sense to focus review on just one PR rather than spread it across many PRs (which probably results in none of them getting merged).\r\n\r\n> It includes substantial user-visible changes, \"breaking\" the getblockchaininfo API\r\n\r\nBoth #16328 and #16229 also break `getblockchaininfo` API. As explained above, I think it makes sense to break it once to clean up that interface and make it extensible for future soft forks.\r\n\r\n> It drops chunks of functional test coverage, in particular, after this PR, I don't think we have functional tests checking BIP9 activation works anymore\r\n\r\nYes! That's part of the point. We have test code that is entirely redundant and useless now that all bip9 forks are activated. If schnorr/taproot or future softforks use bip9, we can easily add tests for them.\r\n\r\n> ... evidenced by the number of rebases this PR has required, compared to the lack of rebases the alternative PR #16229 has needed. \r\n\r\nThis PR has required many rebases because it (and its predecessors) have been open for almost two years. I haven't checked how frequently #16229 has needed rebase, but a lot of the touched code seems comparable (RPC, validation). This PR contains quite a few changes to the functional tests which has contributed to the number of rebases.\r\n\r\n> I think we should be doing what sipa suggested in the first PR: \"I would prefer it if a buried deployment wouldn't require all code paths that check the BIP9 status to require changing (and instead plug in the burying into the BIP9 status logic, so that it just always returns DEFINED before the bury height, and always ACTIVE after?).\"\r\n\r\nDefining (and burying) soft forks should be a very infrequent activity. After this PR, the code changes required to bury a softfork should be minimal.\r\n\r\nI'll take a look at the inline code comments tomorrow.",
      "created_at" : "2019-07-29T22:04:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-516180130",
      "id" : 516180130,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNjE4MDEzMA==",
      "updated_at" : "2019-07-31T12:19:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/516180130",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308638525"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308638525"
         }
      },
      "author_association" : "MEMBER",
      "body" : "As I understand this is not called during validation, but during argument parsing at start. This follows the example of the other parsing failures later in this function.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-30T10:04:35Z",
      "diff_hunk" : "@@ -359,11 +339,22 @@ class CRegTestParams : public CChainParams {\n         consensus.vDeployments[d].nStartTime = nStartTime;\n         consensus.vDeployments[d].nTimeout = nTimeout;\n     }\n-    void UpdateVersionBitsParametersFromArgs(const ArgsManager& args);\n+    void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n-void CRegTestParams::UpdateVersionBitsParametersFromArgs(const ArgsManager& args)\n+void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n+    if (gArgs.IsArgSet(\"-segwitheight\")) {\n+        int64_t height = gArgs.GetArg(\"-segwitheight\", consensus.SegwitHeight);\n+        if (height < -1 || height >= std::numeric_limits<int>::max()) {\n+            throw std::runtime_error(strprintf(\"Activation height %ld for segwit is out of valid range. Use -1 to disable segwit.\", height));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308638525",
      "id" : 308638525,
      "in_reply_to_id" : 307424741,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwODYzODUyNQ==",
      "original_commit_id" : "fb5cbf3b6aa50c93c279cd1bd29ee3cefa0eecee",
      "original_position" : 97,
      "path" : "src/chainparams.cpp",
      "position" : 97,
      "pull_request_review_id" : 268286477,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308638525",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308954683"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308954683"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think we're not compliant with this part of BIP 145 anyway, specifically:\r\n\r\n> The '!' rule prefix MUST be enabled on the \"segwit\" rule for templates including transactions with witness data.\r\n\r\nThere's no code to insert the '!' in templates with blocks containing segwit transactions. I've also tested on master that `getblocktemplate` doesn't include `!segwit` as a rule for templates with witness data.\r\n\r\nThe fact that this has always been broken suggests to me that no-one is looking at the `rules` field on the return object.\r\n\r\nI can add some code to update the `rules` based on whether csv and segwit are activated, but it doesn't seem worth it.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-30T21:38:45Z",
      "diff_hunk" : "@@ -482,9 +482,8 @@ static UniValue getblocktemplate(const JSONRPCRequest& request)\n         // TODO: Maybe recheck connections/IBD and (if something wrong) send an expires-immediately template to stop miners?\n     }\n \n-    const struct VBDeploymentInfo& segwit_info = VersionBitsDeploymentInfo[Consensus::DEPLOYMENT_SEGWIT];\n     // GBT must be called with 'segwit' set in the rules\n-    if (setClientRules.count(segwit_info.name) != 1) {\n+    if (setClientRules.count(\"segwit\") != 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308954683",
      "id" : 308954683,
      "in_reply_to_id" : 308043941,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwODk1NDY4Mw==",
      "original_commit_id" : "fa5b4afc647df0a90c08823028e0d003e9124221",
      "original_position" : 7,
      "path" : "src/rpc/mining.cpp",
      "position" : 7,
      "pull_request_review_id" : 268683420,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308954683",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308958489"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308958489"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-30T21:48:09Z",
      "diff_hunk" : "@@ -4626,6 +4626,22 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n     return VersionBitsStateSinceHeight(::ChainActive().Tip(), params, pos, versionbitscache);\n }\n \n+int64_t VersionBitsActivationHeight(const Consensus::Params& params, Consensus::DeploymentPos pos)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308958489",
      "id" : 308958489,
      "in_reply_to_id" : 308028983,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwODk1ODQ4OQ==",
      "original_commit_id" : "05fb7e4a311f91bdf2b6997f6cfe8396d640e121",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 268687424,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308958489",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308958523"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308958523"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-30T21:48:14Z",
      "diff_hunk" : "@@ -4626,6 +4626,22 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n     return VersionBitsStateSinceHeight(::ChainActive().Tip(), params, pos, versionbitscache);\n }\n \n+int64_t VersionBitsActivationHeight(const Consensus::Params& params, Consensus::DeploymentPos pos)\n+{\n+    LOCK(cs_main);\n+    ThresholdState state = VersionBitsTipState(params, pos);\n+    int64_t since_height = VersionBitsTipStateSinceHeight(params, pos);\n+    switch (state) {\n+        case ThresholdState::LOCKED_IN:\n+            return since_height + params.nMinerConfirmationWindow;\n+        case ThresholdState::ACTIVE:\n+            return since_height;\n+        default:\n+            throw std::logic_error(\"VersionBitsActivationHeight called for non-ACTIVE non-LOCKED-IN deployment\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308958523",
      "id" : 308958523,
      "in_reply_to_id" : 308030132,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwODk1ODUyMw==",
      "original_commit_id" : "05fb7e4a311f91bdf2b6997f6cfe8396d640e121",
      "original_position" : 15,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 268687462,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308958523",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308958556"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308958556"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-30T21:48:18Z",
      "diff_hunk" : "@@ -1632,7 +1632,8 @@ static unsigned int GetBlockScriptFlags(const CBlockIndex* pindex, const Consens\n         flags |= SCRIPT_VERIFY_CHECKSEQUENCEVERIFY;\n     }\n \n-    if (IsNullDummyEnabled(pindex->pprev, consensusparams)) {\n+    // Start enforcing BIP147 NULLDUMMY (activated simultaneously with segwit)\n+    if (pindex->nHeight >= consensusparams.SegwitHeight) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308958556",
      "id" : 308958556,
      "in_reply_to_id" : 308032532,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwODk1ODU1Ng==",
      "original_commit_id" : "fa5b4afc647df0a90c08823028e0d003e9124221",
      "original_position" : 15,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 268687490,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308958556",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308959829"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308959829"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Correct, this isn't called during validation, only during initialization:\r\n\r\n```\r\n bitcoind -segwitheight=99999999999999999999999999\r\nError: Activation height 9223372036854775807 for segwit is out of valid range. Use -1 to disable segwit.\r\n```",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-30T21:51:52Z",
      "diff_hunk" : "@@ -359,11 +339,22 @@ class CRegTestParams : public CChainParams {\n         consensus.vDeployments[d].nStartTime = nStartTime;\n         consensus.vDeployments[d].nTimeout = nTimeout;\n     }\n-    void UpdateVersionBitsParametersFromArgs(const ArgsManager& args);\n+    void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n-void CRegTestParams::UpdateVersionBitsParametersFromArgs(const ArgsManager& args)\n+void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n+    if (gArgs.IsArgSet(\"-segwitheight\")) {\n+        int64_t height = gArgs.GetArg(\"-segwitheight\", consensus.SegwitHeight);\n+        if (height < -1 || height >= std::numeric_limits<int>::max()) {\n+            throw std::runtime_error(strprintf(\"Activation height %ld for segwit is out of valid range. Use -1 to disable segwit.\", height));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308959829",
      "id" : 308959829,
      "in_reply_to_id" : 307424741,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwODk1OTgyOQ==",
      "original_commit_id" : "fb5cbf3b6aa50c93c279cd1bd29ee3cefa0eecee",
      "original_position" : 97,
      "path" : "src/chainparams.cpp",
      "position" : 97,
      "pull_request_review_id" : 268689053,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/308959829",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Pushed a commit to address @ajtowns feedback. I'll squash it into the appropriate commits if people are happy with it.",
      "created_at" : "2019-07-30T21:52:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-516610214",
      "id" : 516610214,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNjYxMDIxNA==",
      "updated_at" : "2019-07-30T21:52:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/516610214",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309036184"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309036184"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think it makes much sense to require `segwit` in the params if we're not going to bother reporting it ourselves. I think the additional code would just be:\r\n\r\n```\r\n    if (pindex->nHeight+1 >= consensusparams.CSVHeight) aRules.push_back(\"csv\");\r\n    if (!fPreSegWit) aRules.push_back(\"segwit\");\r\n```\r\n\r\n(also, could have said `fPreSegWit = !IsWitnessEnabled(pindexPrev, consensusParams);`)\r\n\r\nLooks like including the `!` got broken prior to activation in March 2017 in #9955 with segwit's `gbt_force` value changing from false to true, so bitcoind hasn't been compliant with bip145 since 0.15, though 0.14 should have been.\r\n\r\nI think the logic here isn't right and we should have two settings in `VBDeploymentInfo`, `gbt_simplified` which just adds the `!` when false, and `gbt_optional` which, when the client doesn't specify the rule, avoids setting the versionbit while signalling if `gbt_optional` is true, and errors out when the rule is activated and `gbt_optional` is false. segwit should initially have had `gbt_simplified=false` and `gbt_optional=true`, and just changed `gbt_optional=false` in #14811.\r\n\r\nThere's no provision in bip9 or bip145 for ever removing forks from the rules list, which might be worth improving, as an alternative.\r\n\r\n@luke-jr -- thoughts? You added the gbt changes for bip9 and acked 9955 :)",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-31T04:38:44Z",
      "diff_hunk" : "@@ -482,9 +482,8 @@ static UniValue getblocktemplate(const JSONRPCRequest& request)\n         // TODO: Maybe recheck connections/IBD and (if something wrong) send an expires-immediately template to stop miners?\n     }\n \n-    const struct VBDeploymentInfo& segwit_info = VersionBitsDeploymentInfo[Consensus::DEPLOYMENT_SEGWIT];\n     // GBT must be called with 'segwit' set in the rules\n-    if (setClientRules.count(segwit_info.name) != 1) {\n+    if (setClientRules.count(\"segwit\") != 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309036184",
      "id" : 309036184,
      "in_reply_to_id" : 308043941,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwOTAzNjE4NA==",
      "original_commit_id" : "fa5b4afc647df0a90c08823028e0d003e9124221",
      "original_position" : 7,
      "path" : "src/rpc/mining.cpp",
      "position" : 7,
      "pull_request_review_id" : 268781466,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309036184",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309037700"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309037700"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "versionbits.cpp::VersionBitsActivationHeight() still has the throw rather than returning -1 as of 41fd9d327f544d0e2f1f419a9ca70282ef5d30d2 though there's a test to see if it returns -1 in rpc/blockchain.cpp",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-31T04:49:32Z",
      "diff_hunk" : "@@ -4626,6 +4626,22 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n     return VersionBitsStateSinceHeight(::ChainActive().Tip(), params, pos, versionbitscache);\n }\n \n+int64_t VersionBitsActivationHeight(const Consensus::Params& params, Consensus::DeploymentPos pos)\n+{\n+    LOCK(cs_main);\n+    ThresholdState state = VersionBitsTipState(params, pos);\n+    int64_t since_height = VersionBitsTipStateSinceHeight(params, pos);\n+    switch (state) {\n+        case ThresholdState::LOCKED_IN:\n+            return since_height + params.nMinerConfirmationWindow;\n+        case ThresholdState::ACTIVE:\n+            return since_height;\n+        default:\n+            throw std::logic_error(\"VersionBitsActivationHeight called for non-ACTIVE non-LOCKED-IN deployment\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309037700",
      "id" : 309037700,
      "in_reply_to_id" : 308030132,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwOTAzNzcwMA==",
      "original_commit_id" : "05fb7e4a311f91bdf2b6997f6cfe8396d640e121",
      "original_position" : 15,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 268783464,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309037700",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309037779"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309037779"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Making Period() a public member is cheating :)",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-31T04:50:02Z",
      "diff_hunk" : "@@ -4626,6 +4626,22 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n     return VersionBitsStateSinceHeight(::ChainActive().Tip(), params, pos, versionbitscache);\n }\n \n+int64_t VersionBitsActivationHeight(const Consensus::Params& params, Consensus::DeploymentPos pos)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309037779",
      "id" : 309037779,
      "in_reply_to_id" : 308028983,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwOTAzNzc3OQ==",
      "original_commit_id" : "05fb7e4a311f91bdf2b6997f6cfe8396d640e121",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 268783567,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309037779",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309037949"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309037949"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The throw that occurs via validation.cpp is the `std::logic_error` when calling `VersionBits(Tip)ActivationHeight()` on a deployment that isn't locked in or active",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-31T04:51:21Z",
      "diff_hunk" : "@@ -359,11 +339,22 @@ class CRegTestParams : public CChainParams {\n         consensus.vDeployments[d].nStartTime = nStartTime;\n         consensus.vDeployments[d].nTimeout = nTimeout;\n     }\n-    void UpdateVersionBitsParametersFromArgs(const ArgsManager& args);\n+    void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n-void CRegTestParams::UpdateVersionBitsParametersFromArgs(const ArgsManager& args)\n+void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n+    if (gArgs.IsArgSet(\"-segwitheight\")) {\n+        int64_t height = gArgs.GetArg(\"-segwitheight\", consensus.SegwitHeight);\n+        if (height < -1 || height >= std::numeric_limits<int>::max()) {\n+            throw std::runtime_error(strprintf(\"Activation height %ld for segwit is out of valid range. Use -1 to disable segwit.\", height));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309037949",
      "id" : 309037949,
      "in_reply_to_id" : 307424741,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwOTAzNzk0OQ==",
      "original_commit_id" : "fb5cbf3b6aa50c93c279cd1bd29ee3cefa0eecee",
      "original_position" : 97,
      "path" : "src/chainparams.cpp",
      "position" : 97,
      "pull_request_review_id" : 268783802,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309037949",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309277812"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309277812"
         }
      },
      "author_association" : "MEMBER",
      "body" : "urgh. _None_ of the BIP9 code will be used after this PR. I've now moved logic from `rpc/blockchain.cpp` into `validation.cpp` after @sdaftuar's comment here: https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305502345, then pulled it into `versionbits.cpp` because of your comment here https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308028983.\r\n\r\nI can add even more machinery to versionbits.cpp to avoid making `Period()` public, but I don't understand where we're going with this. Once again, this is code that is _not_ expected to be run. This PR was supposed to be reducing the code complexity, but successive comments have asked for more and more code to be added to cover unexercised code paths.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-31T15:13:12Z",
      "diff_hunk" : "@@ -4626,6 +4626,22 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n     return VersionBitsStateSinceHeight(::ChainActive().Tip(), params, pos, versionbitscache);\n }\n \n+int64_t VersionBitsActivationHeight(const Consensus::Params& params, Consensus::DeploymentPos pos)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309277812",
      "id" : 309277812,
      "in_reply_to_id" : 308028983,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwOTI3NzgxMg==",
      "original_commit_id" : "05fb7e4a311f91bdf2b6997f6cfe8396d640e121",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 269085677,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309277812",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309280540"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309280540"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I've now removed that `std::logic_error`",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-31T15:18:10Z",
      "diff_hunk" : "@@ -359,11 +339,22 @@ class CRegTestParams : public CChainParams {\n         consensus.vDeployments[d].nStartTime = nStartTime;\n         consensus.vDeployments[d].nTimeout = nTimeout;\n     }\n-    void UpdateVersionBitsParametersFromArgs(const ArgsManager& args);\n+    void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n-void CRegTestParams::UpdateVersionBitsParametersFromArgs(const ArgsManager& args)\n+void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n+    if (gArgs.IsArgSet(\"-segwitheight\")) {\n+        int64_t height = gArgs.GetArg(\"-segwitheight\", consensus.SegwitHeight);\n+        if (height < -1 || height >= std::numeric_limits<int>::max()) {\n+            throw std::runtime_error(strprintf(\"Activation height %ld for segwit is out of valid range. Use -1 to disable segwit.\", height));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309280540",
      "id" : 309280540,
      "in_reply_to_id" : 307424741,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwOTI4MDU0MA==",
      "original_commit_id" : "fb5cbf3b6aa50c93c279cd1bd29ee3cefa0eecee",
      "original_position" : 97,
      "path" : "src/chainparams.cpp",
      "position" : 97,
      "pull_request_review_id" : 269089118,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309280540",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309280672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309280672"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-31T15:18:24Z",
      "diff_hunk" : "@@ -4626,6 +4626,22 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n     return VersionBitsStateSinceHeight(::ChainActive().Tip(), params, pos, versionbitscache);\n }\n \n+int64_t VersionBitsActivationHeight(const Consensus::Params& params, Consensus::DeploymentPos pos)\n+{\n+    LOCK(cs_main);\n+    ThresholdState state = VersionBitsTipState(params, pos);\n+    int64_t since_height = VersionBitsTipStateSinceHeight(params, pos);\n+    switch (state) {\n+        case ThresholdState::LOCKED_IN:\n+            return since_height + params.nMinerConfirmationWindow;\n+        case ThresholdState::ACTIVE:\n+            return since_height;\n+        default:\n+            throw std::logic_error(\"VersionBitsActivationHeight called for non-ACTIVE non-LOCKED-IN deployment\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309280672",
      "id" : 309280672,
      "in_reply_to_id" : 308030132,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwOTI4MDY3Mg==",
      "original_commit_id" : "05fb7e4a311f91bdf2b6997f6cfe8396d640e121",
      "original_position" : 15,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 269089286,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309280672",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Added another commit that removes the `height` return value entirely from BIP9 forks which are locked_in. That avoids having to add a bunch of BIP9 machinery for very little benefit.",
      "created_at" : "2019-07-31T15:26:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-516898719",
      "id" : 516898719,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNjg5ODcxOQ==",
      "updated_at" : "2019-07-31T15:26:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/516898719",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309287026"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309287026"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I can't see how #9955 changed including the `!`. Am I missing something?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-31T15:29:47Z",
      "diff_hunk" : "@@ -482,9 +482,8 @@ static UniValue getblocktemplate(const JSONRPCRequest& request)\n         // TODO: Maybe recheck connections/IBD and (if something wrong) send an expires-immediately template to stop miners?\n     }\n \n-    const struct VBDeploymentInfo& segwit_info = VersionBitsDeploymentInfo[Consensus::DEPLOYMENT_SEGWIT];\n     // GBT must be called with 'segwit' set in the rules\n-    if (setClientRules.count(segwit_info.name) != 1) {\n+    if (setClientRules.count(\"segwit\") != 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309287026",
      "id" : 309287026,
      "in_reply_to_id" : 308043941,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwOTI4NzAyNg==",
      "original_commit_id" : "fa5b4afc647df0a90c08823028e0d003e9124221",
      "original_position" : 7,
      "path" : "src/rpc/mining.cpp",
      "position" : 7,
      "pull_request_review_id" : 269097467,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309287026",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309288860"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309288860"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Sorry, that was just meant as a tease, not a criticism or a suggestion to change it. The ThresholdConditionChecker API isn't great.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-31T15:33:28Z",
      "diff_hunk" : "@@ -4626,6 +4626,22 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n     return VersionBitsStateSinceHeight(::ChainActive().Tip(), params, pos, versionbitscache);\n }\n \n+int64_t VersionBitsActivationHeight(const Consensus::Params& params, Consensus::DeploymentPos pos)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309288860",
      "id" : 309288860,
      "in_reply_to_id" : 308028983,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwOTI4ODg2MA==",
      "original_commit_id" : "05fb7e4a311f91bdf2b6997f6cfe8396d640e121",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 269099895,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309288860",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309302789"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309302789"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ah, I see: https://github.com/bitcoin/bitcoin/pull/9955/files#diff-d6954440f0346f8e42dcd669dd4aeafaL20\r\n\r\n'force' is defined as \"Whether GBT clients can safely ignore this rule in simplified usage\" which seems backwards to me.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-31T16:00:21Z",
      "diff_hunk" : "@@ -482,9 +482,8 @@ static UniValue getblocktemplate(const JSONRPCRequest& request)\n         // TODO: Maybe recheck connections/IBD and (if something wrong) send an expires-immediately template to stop miners?\n     }\n \n-    const struct VBDeploymentInfo& segwit_info = VersionBitsDeploymentInfo[Consensus::DEPLOYMENT_SEGWIT];\n     // GBT must be called with 'segwit' set in the rules\n-    if (setClientRules.count(segwit_info.name) != 1) {\n+    if (setClientRules.count(\"segwit\") != 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309302789",
      "id" : 309302789,
      "in_reply_to_id" : 308043941,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwOTMwMjc4OQ==",
      "original_commit_id" : "fa5b4afc647df0a90c08823028e0d003e9124221",
      "original_position" : 7,
      "path" : "src/rpc/mining.cpp",
      "position" : 7,
      "pull_request_review_id" : 269117656,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309302789",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309323261"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309323261"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I guess `gbt_force` is too unclear a parameter name...\r\n\r\nWe should fix this. Maybe in a separate PR.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-07-31T16:44:19Z",
      "diff_hunk" : "@@ -482,9 +482,8 @@ static UniValue getblocktemplate(const JSONRPCRequest& request)\n         // TODO: Maybe recheck connections/IBD and (if something wrong) send an expires-immediately template to stop miners?\n     }\n \n-    const struct VBDeploymentInfo& segwit_info = VersionBitsDeploymentInfo[Consensus::DEPLOYMENT_SEGWIT];\n     // GBT must be called with 'segwit' set in the rules\n-    if (setClientRules.count(segwit_info.name) != 1) {\n+    if (setClientRules.count(\"segwit\") != 1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309323261",
      "id" : 309323261,
      "in_reply_to_id" : 308043941,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwOTMyMzI2MQ==",
      "original_commit_id" : "fa5b4afc647df0a90c08823028e0d003e9124221",
      "original_position" : 7,
      "path" : "src/rpc/mining.cpp",
      "position" : 7,
      "pull_request_review_id" : 269143781,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309323261",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think all review comments are addressed. @sdaftuar @TheBlueMatt : can you re-review with the fixup commits? If you're happy, I'll squash.",
      "created_at" : "2019-07-31T19:48:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-516994492",
      "id" : 516994492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNjk5NDQ5Mg==",
      "updated_at" : "2019-07-31T19:48:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/516994492",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309561920"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309561920"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This probably should be in chainparamsbase.cpp? At least that's where the help for -vbparams is.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-01T07:42:50Z",
      "diff_hunk" : "@@ -516,6 +516,7 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-maxtipage=<n>\", strprintf(\"Maximum tip age in seconds to consider node in initial block download (default: %u)\", DEFAULT_MAX_TIP_AGE), true, OptionsCategory::DEBUG_TEST);\n     gArgs.AddArg(\"-printpriority\", strprintf(\"Log transaction fee per kB when mining blocks (default: %u)\", DEFAULT_PRINTPRIORITY), true, OptionsCategory::DEBUG_TEST);\n     gArgs.AddArg(\"-printtoconsole\", \"Send trace/debug info to console (default: 1 when no -daemon. To disable logging to file, set -nodebuglogfile)\", false, OptionsCategory::DEBUG_TEST);\n+    gArgs.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", false, OptionsCategory::DEBUG_TEST);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309561920",
      "id" : 309561920,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwOTU2MTkyMA==",
      "original_commit_id" : "88a0a15bf00f0209fd89edaddd49a92a4b16f659",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 269445640,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309561920",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309853116"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309853116"
         }
      },
      "author_association" : "MEMBER",
      "body" : "moved",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-01T19:07:05Z",
      "diff_hunk" : "@@ -516,6 +516,7 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-maxtipage=<n>\", strprintf(\"Maximum tip age in seconds to consider node in initial block download (default: %u)\", DEFAULT_MAX_TIP_AGE), true, OptionsCategory::DEBUG_TEST);\n     gArgs.AddArg(\"-printpriority\", strprintf(\"Log transaction fee per kB when mining blocks (default: %u)\", DEFAULT_PRINTPRIORITY), true, OptionsCategory::DEBUG_TEST);\n     gArgs.AddArg(\"-printtoconsole\", \"Send trace/debug info to console (default: 1 when no -daemon. To disable logging to file, set -nodebuglogfile)\", false, OptionsCategory::DEBUG_TEST);\n+    gArgs.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", false, OptionsCategory::DEBUG_TEST);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309853116",
      "id" : 309853116,
      "in_reply_to_id" : 309561920,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwOTg1MzExNg==",
      "original_commit_id" : "88a0a15bf00f0209fd89edaddd49a92a4b16f659",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 269821194,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/309853116",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Squashed the fixup commits and addressed @ajtowns comment here: https://github.com/bitcoin/bitcoin/pull/16060#discussion_r309561920\r\n\r\nPre-squashed branch is here: https://github.com/jnewbery/bitcoin/tree/pr16060.1\r\n\r\nThis is ready for re-review",
      "created_at" : "2019-08-01T19:08:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-517418587",
      "id" : 517418587,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNzQxODU4Nw==",
      "updated_at" : "2019-08-01T19:08:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/517418587",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-08-02T16:25:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-517763499",
      "id" : 517763499,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNzc2MzQ5OQ==",
      "updated_at" : "2019-08-02T16:25:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/517763499",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased",
      "created_at" : "2019-08-02T17:33:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-517785024",
      "id" : 517785024,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNzc4NTAyNA==",
      "updated_at" : "2019-08-02T17:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/517785024",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r310254109"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310254109"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Instead of adding a TODO in the code, why not replace the check in the tests `assert(nServices&NODE_WITNESS)` with `assert_debug_log(['Segwit disabled for testing'])` or something?\r\n\r\nThat way you could remove this whole hunk",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-02T18:43:16Z",
      "diff_hunk" : "@@ -1670,12 +1670,9 @@ bool AppInitMain(InitInterfaces& interfaces)\n         }\n     }\n \n-    if (chainparams.GetConsensus().vDeployments[Consensus::DEPLOYMENT_SEGWIT].nTimeout != 0) {\n-        // Only advertise witness capabilities if they have a reasonable start time.\n-        // This allows us to have the code merged without a defined softfork, by setting its\n-        // end time to 0.\n-        // Note that setting NODE_WITNESS is never required: the only downside from not\n-        // doing so is that after activation, no upgraded nodes will fetch from you.\n+    if (chainparams.GetConsensus().SegwitHeight != std::numeric_limits<int>::max()) {\n+        // Advertise witness capabilities.\n+        // The option to not set NODE_WITNESS is only used in the tests and should be removed.\n         nLocalServices = ServiceFlags(nLocalServices | NODE_WITNESS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r310254109",
      "id" : 310254109,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDI1NDEwOQ==",
      "original_commit_id" : "9dc5ade3844e411989db21fd24850e0e4f3db6f3",
      "original_position" : 13,
      "path" : "src/init.cpp",
      "position" : 13,
      "pull_request_review_id" : 270338226,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310254109",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r310254376"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310254376"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Instead of explaining what the code does, you could explain why the code does?\r\n\r\n```suggestion\r\n    // Buried deployments with activation height value of std::numeric_limits<int>::max() are disabled and thus hidden.\r\n```",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-02T18:44:04Z",
      "diff_hunk" : "@@ -1183,54 +1183,48 @@ static UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height) EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.pushKV(\"status\", activated);\n-    return rv;\n-}\n+    // For buried deployments.\n+    // A buried deployment is one where the height of the activation has been hardcoded into\n+    // the client implementation long after the consensus change has activated. See BIP 90.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r310254376",
      "id" : 310254376,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDI1NDM3Ng==",
      "original_commit_id" : "9dc5ade3844e411989db21fd24850e0e4f3db6f3",
      "original_position" : 28,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 270338226,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310254376",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r310259666"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310259666"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You are setting the activation height to \r\n\r\n```\r\n+        consensus.CSVHeight = 432; // CSV activated on regtest (Used in rpc activation tests)\r\n```\r\n\r\nbut fail to update this comment.\r\n\r\nCan you use the same constant in the params and this comment, please?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-02T18:59:35Z",
      "diff_hunk" : "@@ -267,7 +236,7 @@ def run_test(self):\n         self.send_blocks(test_blocks)\n \n         self.log.info(\"Not yet advanced to ACTIVE, height = 574 (will activate for block 576, not 575)\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r310259666",
      "id" : 310259666,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDI1OTY2Ng==",
      "original_commit_id" : "9dc5ade3844e411989db21fd24850e0e4f3db6f3",
      "original_position" : 58,
      "path" : "test/functional/feature_csv_activation.py",
      "position" : null,
      "pull_request_review_id" : 270338226,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310259666",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r310663615"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310663615"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think this works -- p2p_segwit launches some nodes with `-segwitheight=120` and one with segwit disabled, and expects them to follow the same blockchain. But if you set NODE_WITNESS then when the first node thinks segwit is enabled at block 120, it'll send the witness data to the other node, which will then give an error message, \"AcceptBlock FAILED (unexpected-witness, ...\" and fail the test.\r\n\r\nThe test case is essentially testing that upgrades work, though, which would be more useful if the non-segwit node was actually running old code, rather than just simulating it... I think the only changes needed to p2p_segwit for this are:\r\n\r\n  * drop `test_upgrade_after_activation()`\r\n  * in `test_getblocktemplate_before_lockin()` set `node=self.nodes[0]`, drop the for loop, and drop the dead code for `node == self.nodes[2]`.\r\n\r\nI don't think this needs to be done in this PR though.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-05T15:30:35Z",
      "diff_hunk" : "@@ -1670,12 +1670,9 @@ bool AppInitMain(InitInterfaces& interfaces)\n         }\n     }\n \n-    if (chainparams.GetConsensus().vDeployments[Consensus::DEPLOYMENT_SEGWIT].nTimeout != 0) {\n-        // Only advertise witness capabilities if they have a reasonable start time.\n-        // This allows us to have the code merged without a defined softfork, by setting its\n-        // end time to 0.\n-        // Note that setting NODE_WITNESS is never required: the only downside from not\n-        // doing so is that after activation, no upgraded nodes will fetch from you.\n+    if (chainparams.GetConsensus().SegwitHeight != std::numeric_limits<int>::max()) {\n+        // Advertise witness capabilities.\n+        // The option to not set NODE_WITNESS is only used in the tests and should be removed.\n         nLocalServices = ServiceFlags(nLocalServices | NODE_WITNESS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r310663615",
      "id" : 310663615,
      "in_reply_to_id" : 310254109,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDY2MzYxNQ==",
      "original_commit_id" : "9dc5ade3844e411989db21fd24850e0e4f3db6f3",
      "original_position" : 13,
      "path" : "src/init.cpp",
      "position" : 13,
      "pull_request_review_id" : 270843512,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310663615",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r310666975"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310666975"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "*sigh* Probably should update the comment for `IsWitnessEnabled` above...\r\n\r\nMight be good to note that segwit is enforced for all transactions, and this function is only used for nulldummy and block-level things (ie, working out if you've upgraded and need to reprocess segwit blocks that you didn't download witness data for, if you should generate witness data for getblocktemplate, and so you can accept old blocks from non-witness peers)",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-05T15:37:44Z",
      "diff_hunk" : "@@ -385,9 +385,6 @@ bool TestBlockValidity(CValidationState& state, const CChainParams& chainparams,\n /** Check whether witness commitments are required for block. */\n bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params);\n \n-/** Check whether NULLDUMMY (BIP 147) has activated. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r310666975",
      "id" : 310666975,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDY2Njk3NQ==",
      "original_commit_id" : "5aa9124b83ef9e59df1bb2e883cb884311e86ee4",
      "original_position" : 4,
      "path" : "src/validation.h",
      "position" : 17,
      "pull_request_review_id" : 270847785,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310666975",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311234769"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311234769"
         }
      },
      "author_association" : "MEMBER",
      "body" : "comment updated",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-06T19:25:05Z",
      "diff_hunk" : "@@ -385,9 +385,6 @@ bool TestBlockValidity(CValidationState& state, const CChainParams& chainparams,\n /** Check whether witness commitments are required for block. */\n bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params);\n \n-/** Check whether NULLDUMMY (BIP 147) has activated. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311234769",
      "id" : 311234769,
      "in_reply_to_id" : 310666975,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTIzNDc2OQ==",
      "original_commit_id" : "5aa9124b83ef9e59df1bb2e883cb884311e86ee4",
      "original_position" : 4,
      "path" : "src/validation.h",
      "position" : 17,
      "pull_request_review_id" : 271563633,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311234769",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311234843"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311234843"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done, and fixed a bunch of other comments in the test.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-06T19:25:17Z",
      "diff_hunk" : "@@ -267,7 +236,7 @@ def run_test(self):\n         self.send_blocks(test_blocks)\n \n         self.log.info(\"Not yet advanced to ACTIVE, height = 574 (will activate for block 576, not 575)\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311234843",
      "id" : 311234843,
      "in_reply_to_id" : 310259666,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTIzNDg0Mw==",
      "original_commit_id" : "9dc5ade3844e411989db21fd24850e0e4f3db6f3",
      "original_position" : 58,
      "path" : "test/functional/feature_csv_activation.py",
      "position" : null,
      "pull_request_review_id" : 271563720,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311234843",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311234892"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311234892"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I've taken your suggestion. Thanks",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-06T19:25:27Z",
      "diff_hunk" : "@@ -1183,54 +1183,48 @@ static UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height) EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.pushKV(\"status\", activated);\n-    return rv;\n-}\n+    // For buried deployments.\n+    // A buried deployment is one where the height of the activation has been hardcoded into\n+    // the client implementation long after the consensus change has activated. See BIP 90.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311234892",
      "id" : 311234892,
      "in_reply_to_id" : 310254376,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTIzNDg5Mg==",
      "original_commit_id" : "9dc5ade3844e411989db21fd24850e0e4f3db6f3",
      "original_position" : 28,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 271563794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311234892",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated to address @MarcoFalke and @ajtowns comments. Thanks for the review!",
      "created_at" : "2019-08-06T19:25:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-518809290",
      "id" : 518809290,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxODgwOTI5MA==",
      "updated_at" : "2019-08-06T19:25:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518809290",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311299358"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311299358"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: LOCKED_IN could also display a \"activate_at\" value based on the height of the beginning of the period + size of period",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-06T22:18:23Z",
      "diff_hunk" : "@@ -1240,18 +1235,18 @@ static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Conse\n         statsUV.pushKV(\"elapsed\", statsStruct.elapsed);\n         statsUV.pushKV(\"count\", statsStruct.count);\n         statsUV.pushKV(\"possible\", statsStruct.possible);\n-        rv.pushKV(\"statistics\", statsUV);\n+        bip9.pushKV(\"statistics\", statsUV);\n     }\n-    return rv;\n-}\n \n-static void BIP9SoftForkDescPushBack(UniValue& bip9_softforks, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n-{\n-    // Deployments with timeout value of 0 are hidden.\n-    // A timeout value of 0 guarantees a softfork will never be activated.\n-    // This is used when softfork codes are merged without specifying the deployment schedule.\n-    if (consensusParams.vDeployments[id].nTimeout > 0)\n-        bip9_softforks.pushKV(VersionBitsDeploymentInfo[id].name, BIP9SoftForkDesc(consensusParams, id));\n+    UniValue rv(UniValue::VOBJ);\n+    rv.pushKV(\"type\", \"bip9\");\n+    rv.pushKV(\"bip9\", bip9);\n+    if (ThresholdState::ACTIVE == thresholdState) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311299358",
      "id" : 311299358,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTI5OTM1OA==",
      "original_commit_id" : "3739be48f8dd56656f8eb3cc9aa175f8d7aff6f8",
      "original_position" : 106,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 106,
      "pull_request_review_id" : 271644787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311299358",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311307654"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311307654"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Isn't this a cltv test ?  Buried height of BIP66 being inferior at BIP65, strict der-sig will always be activated before cltv, and height digits are almost the same, maybe use a CLTV_HEIGHT alias.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-06T22:50:35Z",
      "diff_hunk" : "@@ -69,14 +69,11 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n     def test_cltv_info(self, *, is_active):\n-        assert_equal(\n-            next(s for s in self.nodes[0].getblockchaininfo()['softforks'] if s['id'] == 'bip65'),\n+        assert_equal(self.nodes[0].getblockchaininfo()['softforks']['bip66'],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311307654",
      "id" : 311307654,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTMwNzY1NA==",
      "original_commit_id" : "3739be48f8dd56656f8eb3cc9aa175f8d7aff6f8",
      "original_position" : 6,
      "path" : "test/functional/feature_cltv.py",
      "position" : null,
      "pull_request_review_id" : 271644787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311307654",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311313164"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311313164"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Comment should be updated to drop versionbits ref",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-06T23:14:27Z",
      "diff_hunk" : "@@ -3187,7 +3187,7 @@ static bool ContextualCheckBlock(const CBlock& block, CValidationState& state, c\n \n     // Start enforcing BIP113 (Median Time Past) using versionbits logic.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311313164",
      "id" : 311313164,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTMxMzE2NA==",
      "original_commit_id" : "7e33aea89f8cf28bbc01867db90e55ed2ed8a374",
      "original_position" : 25,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 271644787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311313164",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311315964"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311315964"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe the 2 aforementioned versionbits references should be updated, while top test comment with something similar to cltv : \"Test that CSV soft-fork activates at (regtest) block height 432\". ",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-06T23:29:01Z",
      "diff_hunk" : "@@ -341,7 +341,7 @@ def test_nonzero_locks(orig_tx, node, relayfee, use_height_lock):\n     # being run, then it's possible the test has activated the soft fork, and\n     # this test should be moved to run earlier, or deleted.\n     def test_bip68_not_consensus(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311315964",
      "id" : 311315964,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTMxNTk2NA==",
      "original_commit_id" : "7e33aea89f8cf28bbc01867db90e55ed2ed8a374",
      "original_position" : 13,
      "path" : "test/functional/feature_bip68_sequence.py",
      "position" : 29,
      "pull_request_review_id" : 271644787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311315964",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311317239"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311317239"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: top comment should be updated too?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-06T23:35:12Z",
      "diff_hunk" : "@@ -187,45 +188,14 @@ def run_test(self):\n         self.tip = int(self.nodes[0].getbestblockhash(), 16)\n         self.nodeaddress = self.nodes[0].getnewaddress()\n \n-        self.log.info(\"Test that the csv softfork is DEFINED\")\n-        assert_equal(get_bip9_status(self.nodes[0], 'csv')['status'], 'defined')\n-        test_blocks = self.generate_blocks(61, 4)\n+        # Activation height is hardcoded",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311317239",
      "id" : 311317239,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTMxNzIzOQ==",
      "original_commit_id" : "7e33aea89f8cf28bbc01867db90e55ed2ed8a374",
      "original_position" : 21,
      "path" : "test/functional/feature_csv_activation.py",
      "position" : 106,
      "pull_request_review_id" : 271644787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311317239",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311319244"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311319244"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit : is softfork_active defined in next commit could be used here?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-06T23:45:15Z",
      "diff_hunk" : "@@ -52,14 +52,11 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n     def test_dersig_info(self, *, is_active):\n-        assert_equal(\n-            next(s for s in self.nodes[0].getblockchaininfo()['softforks'] if s['id'] == 'bip66'),\n+        assert_equal(self.nodes[0].getblockchaininfo()['softforks']['bip66'],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311319244",
      "id" : 311319244,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTMxOTI0NA==",
      "original_commit_id" : "3739be48f8dd56656f8eb3cc9aa175f8d7aff6f8",
      "original_position" : 6,
      "path" : "test/functional/feature_dersig.py",
      "position" : 6,
      "pull_request_review_id" : 271644787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311319244",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311320238"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311320238"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Wouldn't be better to CSV regtest value to be superior to BIP65 and so respect the historical activation order? Is there anyways activating MTP before BIP65 or others interact badly ?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-06T23:50:23Z",
      "diff_hunk" : "@@ -275,6 +267,7 @@ class CRegTestParams : public CChainParams {\n         consensus.BIP34Hash = uint256();\n         consensus.BIP65Height = 1351; // BIP65 activated on regtest (Used in functional tests)\n         consensus.BIP66Height = 1251; // BIP66 activated on regtest (Used in functional tests)\n+        consensus.CSVHeight = 432; // CSV activated on regtest (Used in rpc activation tests)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311320238",
      "id" : 311320238,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTMyMDIzOA==",
      "original_commit_id" : "7e33aea89f8cf28bbc01867db90e55ed2ed8a374",
      "original_position" : 44,
      "path" : "src/chainparams.cpp",
      "position" : 56,
      "pull_request_review_id" : 271644787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311320238",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311328416"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311328416"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It's out of PR scope, but now that we don't need `pindexPrev` for the underlying `GetStateFor`, we may just pass `pindex`, assert it and return equality, a quick skim it may simplify callers, add a TODO?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-07T00:35:50Z",
      "diff_hunk" : "@@ -3045,14 +3046,8 @@ bool CheckBlock(const CBlock& block, CValidationState& state, const Consensus::P\n \n bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n {\n-    LOCK(cs_main);\n-    return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == ThresholdState::ACTIVE);\n-}\n-\n-bool IsNullDummyEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n-{\n-    LOCK(cs_main);\n-    return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == ThresholdState::ACTIVE);\n+    int height = pindexPrev == nullptr ? 0 : pindexPrev->nHeight + 1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311328416",
      "id" : 311328416,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTMyODQxNg==",
      "original_commit_id" : "50fe006d1dac7be3ff937e0aacd4dbc13c0236d2",
      "original_position" : 31,
      "path" : "src/validation.cpp",
      "position" : 50,
      "pull_request_review_id" : 271644787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311328416",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311368097"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311368097"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good catch; good example of why not to use 'bipXXX' as identifiers imo. Also the first check should be something like:\r\n\r\n```diff\r\n-        self.test_cltv_info(is_active=True)\r\n+        self.test_cltv_info(is_active=False) # Not active as of current tip and next block does not need to obey rules\r\n```\r\n",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-07T04:54:29Z",
      "diff_hunk" : "@@ -69,14 +69,11 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n     def test_cltv_info(self, *, is_active):\n-        assert_equal(\n-            next(s for s in self.nodes[0].getblockchaininfo()['softforks'] if s['id'] == 'bip65'),\n+        assert_equal(self.nodes[0].getblockchaininfo()['softforks']['bip66'],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311368097",
      "id" : 311368097,
      "in_reply_to_id" : 311307654,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTM2ODA5Nw==",
      "original_commit_id" : "3739be48f8dd56656f8eb3cc9aa175f8d7aff6f8",
      "original_position" : 6,
      "path" : "test/functional/feature_cltv.py",
      "position" : null,
      "pull_request_review_id" : 271728372,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311368097",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311369067"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311369067"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think that works for `UpdateUncommittedBlockStructures` or `BlockAssembler::CreateNewBlock`, so you'd still need this function to be available.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-07T05:00:36Z",
      "diff_hunk" : "@@ -3045,14 +3046,8 @@ bool CheckBlock(const CBlock& block, CValidationState& state, const Consensus::P\n \n bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n {\n-    LOCK(cs_main);\n-    return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == ThresholdState::ACTIVE);\n-}\n-\n-bool IsNullDummyEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n-{\n-    LOCK(cs_main);\n-    return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == ThresholdState::ACTIVE);\n+    int height = pindexPrev == nullptr ? 0 : pindexPrev->nHeight + 1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311369067",
      "id" : 311369067,
      "in_reply_to_id" : 311328416,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTM2OTA2Nw==",
      "original_commit_id" : "50fe006d1dac7be3ff937e0aacd4dbc13c0236d2",
      "original_position" : 31,
      "path" : "src/validation.cpp",
      "position" : 50,
      "pull_request_review_id" : 271729578,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311369067",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311576550"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311576550"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Right these functions test for the next block to be generated/submitted based on the parent,  for them you may pass `pindexPrev->nHeight + 1` to `IsWitnessEnabled`, should work but need to refactor also callers ?",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-07T14:13:45Z",
      "diff_hunk" : "@@ -3045,14 +3046,8 @@ bool CheckBlock(const CBlock& block, CValidationState& state, const Consensus::P\n \n bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n {\n-    LOCK(cs_main);\n-    return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == ThresholdState::ACTIVE);\n-}\n-\n-bool IsNullDummyEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n-{\n-    LOCK(cs_main);\n-    return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == ThresholdState::ACTIVE);\n+    int height = pindexPrev == nullptr ? 0 : pindexPrev->nHeight + 1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r311576550",
      "id" : 311576550,
      "in_reply_to_id" : 311328416,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTU3NjU1MA==",
      "original_commit_id" : "50fe006d1dac7be3ff937e0aacd4dbc13c0236d2",
      "original_position" : 31,
      "path" : "src/validation.cpp",
      "position" : 50,
      "pull_request_review_id" : 271992379,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311576550",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312190834"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312190834"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This was in the original version of the PR, but Suhas didn't like that it leaked details of the BIP9 implementation into the RPC code (https://github.com/bitcoin/bitcoin/pull/16060#discussion_r305502345). I tried adding additional BIP9 code to expose just the activation height (https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-516898719), but it didn't seem worth it so I ended up removing that (https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308028983).",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-08T18:49:08Z",
      "diff_hunk" : "@@ -1240,18 +1235,18 @@ static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Conse\n         statsUV.pushKV(\"elapsed\", statsStruct.elapsed);\n         statsUV.pushKV(\"count\", statsStruct.count);\n         statsUV.pushKV(\"possible\", statsStruct.possible);\n-        rv.pushKV(\"statistics\", statsUV);\n+        bip9.pushKV(\"statistics\", statsUV);\n     }\n-    return rv;\n-}\n \n-static void BIP9SoftForkDescPushBack(UniValue& bip9_softforks, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n-{\n-    // Deployments with timeout value of 0 are hidden.\n-    // A timeout value of 0 guarantees a softfork will never be activated.\n-    // This is used when softfork codes are merged without specifying the deployment schedule.\n-    if (consensusParams.vDeployments[id].nTimeout > 0)\n-        bip9_softforks.pushKV(VersionBitsDeploymentInfo[id].name, BIP9SoftForkDesc(consensusParams, id));\n+    UniValue rv(UniValue::VOBJ);\n+    rv.pushKV(\"type\", \"bip9\");\n+    rv.pushKV(\"bip9\", bip9);\n+    if (ThresholdState::ACTIVE == thresholdState) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312190834",
      "id" : 312190834,
      "in_reply_to_id" : 311299358,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMjE5MDgzNA==",
      "original_commit_id" : "3739be48f8dd56656f8eb3cc9aa175f8d7aff6f8",
      "original_position" : 106,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 106,
      "pull_request_review_id" : 272769960,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312190834",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312193798"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312193798"
         }
      },
      "author_association" : "MEMBER",
      "body" : "imo: let's try not to circle around too much here, and get the consensus burying part merged, the RPC part can be improved in later PRs",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-08T18:55:46Z",
      "diff_hunk" : "@@ -1240,18 +1235,18 @@ static UniValue BIP9SoftForkDesc(const Consensus::Params& consensusParams, Conse\n         statsUV.pushKV(\"elapsed\", statsStruct.elapsed);\n         statsUV.pushKV(\"count\", statsStruct.count);\n         statsUV.pushKV(\"possible\", statsStruct.possible);\n-        rv.pushKV(\"statistics\", statsUV);\n+        bip9.pushKV(\"statistics\", statsUV);\n     }\n-    return rv;\n-}\n \n-static void BIP9SoftForkDescPushBack(UniValue& bip9_softforks, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)\n-{\n-    // Deployments with timeout value of 0 are hidden.\n-    // A timeout value of 0 guarantees a softfork will never be activated.\n-    // This is used when softfork codes are merged without specifying the deployment schedule.\n-    if (consensusParams.vDeployments[id].nTimeout > 0)\n-        bip9_softforks.pushKV(VersionBitsDeploymentInfo[id].name, BIP9SoftForkDesc(consensusParams, id));\n+    UniValue rv(UniValue::VOBJ);\n+    rv.pushKV(\"type\", \"bip9\");\n+    rv.pushKV(\"bip9\", bip9);\n+    if (ThresholdState::ACTIVE == thresholdState) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312193798",
      "id" : 312193798,
      "in_reply_to_id" : 311299358,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMjE5Mzc5OA==",
      "original_commit_id" : "3739be48f8dd56656f8eb3cc9aa175f8d7aff6f8",
      "original_position" : 106,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 106,
      "pull_request_review_id" : 272773643,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312193798",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312202350"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312202350"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Great catch. This was careless on my part (copy-pasting from feature_dersig.py to feature_cltv.py).\r\n\r\nI've fixed this and added the comment as suggested by AJ.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-08T19:18:20Z",
      "diff_hunk" : "@@ -69,14 +69,11 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n     def test_cltv_info(self, *, is_active):\n-        assert_equal(\n-            next(s for s in self.nodes[0].getblockchaininfo()['softforks'] if s['id'] == 'bip65'),\n+        assert_equal(self.nodes[0].getblockchaininfo()['softforks']['bip66'],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312202350",
      "id" : 312202350,
      "in_reply_to_id" : 311307654,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMjIwMjM1MA==",
      "original_commit_id" : "3739be48f8dd56656f8eb3cc9aa175f8d7aff6f8",
      "original_position" : 6,
      "path" : "test/functional/feature_cltv.py",
      "position" : null,
      "pull_request_review_id" : 272785015,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312202350",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312202564"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312202564"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-08T19:18:57Z",
      "diff_hunk" : "@@ -3187,7 +3187,7 @@ static bool ContextualCheckBlock(const CBlock& block, CValidationState& state, c\n \n     // Start enforcing BIP113 (Median Time Past) using versionbits logic.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312202564",
      "id" : 312202564,
      "in_reply_to_id" : 311313164,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMjIwMjU2NA==",
      "original_commit_id" : "7e33aea89f8cf28bbc01867db90e55ed2ed8a374",
      "original_position" : 25,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 272785317,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312202564",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312206090"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312206090"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-08T19:28:45Z",
      "diff_hunk" : "@@ -341,7 +341,7 @@ def test_nonzero_locks(orig_tx, node, relayfee, use_height_lock):\n     # being run, then it's possible the test has activated the soft fork, and\n     # this test should be moved to run earlier, or deleted.\n     def test_bip68_not_consensus(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312206090",
      "id" : 312206090,
      "in_reply_to_id" : 311315964,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMjIwNjA5MA==",
      "original_commit_id" : "7e33aea89f8cf28bbc01867db90e55ed2ed8a374",
      "original_position" : 13,
      "path" : "test/functional/feature_bip68_sequence.py",
      "position" : 29,
      "pull_request_review_id" : 272789926,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312206090",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312213601"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312213601"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-08T19:49:40Z",
      "diff_hunk" : "@@ -187,45 +188,14 @@ def run_test(self):\n         self.tip = int(self.nodes[0].getbestblockhash(), 16)\n         self.nodeaddress = self.nodes[0].getnewaddress()\n \n-        self.log.info(\"Test that the csv softfork is DEFINED\")\n-        assert_equal(get_bip9_status(self.nodes[0], 'csv')['status'], 'defined')\n-        test_blocks = self.generate_blocks(61, 4)\n+        # Activation height is hardcoded",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312213601",
      "id" : 312213601,
      "in_reply_to_id" : 311317239,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMjIxMzYwMQ==",
      "original_commit_id" : "7e33aea89f8cf28bbc01867db90e55ed2ed8a374",
      "original_position" : 21,
      "path" : "test/functional/feature_csv_activation.py",
      "position" : 106,
      "pull_request_review_id" : 272799919,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312213601",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312214156"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312214156"
         }
      },
      "author_association" : "MEMBER",
      "body" : "this also tests the height and type, so I'll leave it as it is.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-08T19:51:06Z",
      "diff_hunk" : "@@ -52,14 +52,11 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n     def test_dersig_info(self, *, is_active):\n-        assert_equal(\n-            next(s for s in self.nodes[0].getblockchaininfo()['softforks'] if s['id'] == 'bip66'),\n+        assert_equal(self.nodes[0].getblockchaininfo()['softforks']['bip66'],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312214156",
      "id" : 312214156,
      "in_reply_to_id" : 311319244,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMjIxNDE1Ng==",
      "original_commit_id" : "3739be48f8dd56656f8eb3cc9aa175f8d7aff6f8",
      "original_position" : 6,
      "path" : "test/functional/feature_dersig.py",
      "position" : 6,
      "pull_request_review_id" : 272800672,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312214156",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312215131"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312215131"
         }
      },
      "author_association" : "MEMBER",
      "body" : "hmmm, it's an interesting point, but I don't think there's an issue here. Previously, feature_csv_activation.py activated CSV at height 576, so that was still before bip 65/66 activation.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-08T19:53:39Z",
      "diff_hunk" : "@@ -275,6 +267,7 @@ class CRegTestParams : public CChainParams {\n         consensus.BIP34Hash = uint256();\n         consensus.BIP65Height = 1351; // BIP65 activated on regtest (Used in functional tests)\n         consensus.BIP66Height = 1251; // BIP66 activated on regtest (Used in functional tests)\n+        consensus.CSVHeight = 432; // CSV activated on regtest (Used in rpc activation tests)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312215131",
      "id" : 312215131,
      "in_reply_to_id" : 311320238,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMjIxNTEzMQ==",
      "original_commit_id" : "7e33aea89f8cf28bbc01867db90e55ed2ed8a374",
      "original_position" : 44,
      "path" : "src/chainparams.cpp",
      "position" : 56,
      "pull_request_review_id" : 272801911,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312215131",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312216999"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312216999"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Right, I think this could also be refactored to take a `height` parameter and just return whether segwit should be enforced for a block at that height.\r\n\r\nWe can leave that for a follow-up PR if people think it's worthwhile.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-08T19:58:31Z",
      "diff_hunk" : "@@ -3045,14 +3046,8 @@ bool CheckBlock(const CBlock& block, CValidationState& state, const Consensus::P\n \n bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n {\n-    LOCK(cs_main);\n-    return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == ThresholdState::ACTIVE);\n-}\n-\n-bool IsNullDummyEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n-{\n-    LOCK(cs_main);\n-    return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == ThresholdState::ACTIVE);\n+    int height = pindexPrev == nullptr ? 0 : pindexPrev->nHeight + 1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r312216999",
      "id" : 312216999,
      "in_reply_to_id" : 311328416,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMjIxNjk5OQ==",
      "original_commit_id" : "50fe006d1dac7be3ff937e0aacd4dbc13c0236d2",
      "original_position" : 31,
      "path" : "src/validation.cpp",
      "position" : 50,
      "pull_request_review_id" : 272804356,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-08T20:15:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/312216999",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for the review @ariard . I think I've addressed all your comments.",
      "created_at" : "2019-08-08T20:15:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-519671107",
      "id" : 519671107,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxOTY3MTEwNw==",
      "updated_at" : "2019-08-08T20:15:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519671107",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r313470676"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313470676"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "If it was going to take a height parameter, might as well just have the test in place directly. I don't think it's worth fiddling with for just segwit.",
      "commit_id" : "20e60006de5015e057121b74b623698e96c0bfae",
      "created_at" : "2019-08-13T15:41:39Z",
      "diff_hunk" : "@@ -3045,14 +3046,8 @@ bool CheckBlock(const CBlock& block, CValidationState& state, const Consensus::P\n \n bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n {\n-    LOCK(cs_main);\n-    return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == ThresholdState::ACTIVE);\n-}\n-\n-bool IsNullDummyEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n-{\n-    LOCK(cs_main);\n-    return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == ThresholdState::ACTIVE);\n+    int height = pindexPrev == nullptr ? 0 : pindexPrev->nHeight + 1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#discussion_r313470676",
      "id" : 313470676,
      "in_reply_to_id" : 311328416,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMzQ3MDY3Ng==",
      "original_commit_id" : "50fe006d1dac7be3ff937e0aacd4dbc13c0236d2",
      "original_position" : 31,
      "path" : "src/validation.cpp",
      "position" : 50,
      "pull_request_review_id" : 274377109,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16060",
      "updated_at" : "2019-08-13T15:41:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313470676",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 20e60006de5015e057121b74b623698e96c0bfae ; code review, compiles, tests pass, reports same activation heights as master for segwit/csv on testnet/mainnet. I've not thoroughly reviewed the changes in the python tests.\r\n\r\nNits:\r\n * the first commit (\"tidy up reporting...\") only touches validation.h and validation.cpp in order to add/remove blank lines\r\n * the constant 9223372036854775807 in the tests would probably be clearer as `0x7fffffffffffffff`(or even 2**63-1)\r\n\r\nI think release notes are warranted for the change to getblockchaininfo and probably getblocktemplate. I'm not sure the change to getblocktemplate (no longer returning \"segwit\" in the \"rules\" field of the result) are okay, but Luke didn't complain, so hopefully it's fine. Both those seem fine to worry about later.\r\n\r\nI tried drafting up a bip9 functional test making use of testdummy on regtest, but I'm not convinced it makes sense to do that directly rather than improving our bip9 implementation or improving bip9 first. Either way, that can be left to a later PR.",
      "created_at" : "2019-08-13T16:07:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-520900105",
      "id" : 520900105,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMDkwMDEwNQ==",
      "updated_at" : "2019-08-13T16:07:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/520900105",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @ajtowns . I've force-pushed a fix to those nits and also release notes.\r\n\r\nI also intend to send a post to the mailing list if this gets merged (I don't think a full BIP is necessary).\r\n\r\n> I tried drafting up a bip9 functional test making use of testdummy on regtest, but I'm not convinced it makes sense to do that directly rather than improving our bip9 implementation or improving bip9 first. Either way, that can be left to a later PR.\r\n\r\nVery happy to review any tests or changes to BIP 9 you PR.",
      "created_at" : "2019-08-13T20:16:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-520991924",
      "id" : 520991924,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMDk5MTkyNA==",
      "updated_at" : "2019-08-13T20:16:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/520991924",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : ">  (I don't think a full BIP is necessary)\r\n\r\nI agree; IMO that the heights are already included in https://github.com/bitcoin/bips/blob/master/bip-0009/assignments.mediawiki means the BIP side of things is already covered.",
      "created_at" : "2019-08-14T01:01:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16060#issuecomment-521063462",
      "id" : 521063462,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16060",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMTA2MzQ2Mg==",
      "updated_at" : "2019-08-14T01:01:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521063462",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   }
]
