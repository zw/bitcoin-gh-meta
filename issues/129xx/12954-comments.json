[
   {
      "author_association" : "OWNER",
      "body" : "Concept ACK, splitting the logging functionality out of util makes sense, util.cpp is large, haphazard and this is a clearly distinguishable concern from the rest.\r\n",
      "created_at" : "2018-04-12T05:57:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12954#issuecomment-380687818",
      "id" : 380687818,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12954",
      "updated_at" : "2018-04-12T05:57:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380687818",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. Needs rebase",
      "created_at" : "2018-04-13T13:51:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12954#issuecomment-381141887",
      "id" : 381141887,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12954",
      "updated_at" : "2018-04-13T13:51:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381141887",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r181610827"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181610827"
         }
      },
      "author_association" : "OWNER",
      "body" : "I think this should move to logging as well, so the cyclic dependency between logging and util can be avoided.",
      "commit_id" : "d903273cf8e51d2789ba8a88c608a66e63dcdc14",
      "created_at" : "2018-04-16T02:32:19Z",
      "diff_hunk" : "@@ -75,99 +62,10 @@ inline std::string _(const char* psz)\n void SetupEnvironment();\n bool SetupNetworking();\n \n-struct CLogCategoryActive\n-{\n-    std::string category;\n-    bool active;\n-};\n-\n-namespace BCLog {\n-    enum LogFlags : uint32_t {\n-        NONE        = 0,\n-        NET         = (1 <<  0),\n-        TOR         = (1 <<  1),\n-        MEMPOOL     = (1 <<  2),\n-        HTTP        = (1 <<  3),\n-        BENCH       = (1 <<  4),\n-        ZMQ         = (1 <<  5),\n-        DB          = (1 <<  6),\n-        RPC         = (1 <<  7),\n-        ESTIMATEFEE = (1 <<  8),\n-        ADDRMAN     = (1 <<  9),\n-        SELECTCOINS = (1 << 10),\n-        REINDEX     = (1 << 11),\n-        CMPCTBLOCK  = (1 << 12),\n-        RAND        = (1 << 13),\n-        PRUNE       = (1 << 14),\n-        PROXY       = (1 << 15),\n-        MEMPOOLREJ  = (1 << 16),\n-        LIBEVENT    = (1 << 17),\n-        COINDB      = (1 << 18),\n-        QT          = (1 << 19),\n-        LEVELDB     = (1 << 20),\n-        ALL         = ~(uint32_t)0,\n-    };\n-}\n-/** Return true if log accepts specified category */\n-static inline bool LogAcceptCategory(uint32_t category)\n-{\n-    return (logCategories.load(std::memory_order_relaxed) & category) != 0;\n-}\n-\n-/** Returns a string with the log categories. */\n-std::string ListLogCategories();\n-\n-/** Returns a vector of the active log categories. */\n-std::vector<CLogCategoryActive> ListActiveLogCategories();\n-\n-/** Return true if str parses as a log category and set the flags in f */\n-bool GetLogCategory(uint32_t *f, const std::string *str);\n-\n-/** Send a string to the log output */\n-int LogPrintStr(const std::string &str);\n-\n-/** Get format string from VA_ARGS for error reporting */\n-template<typename... Args> std::string FormatStringFromLogArgs(const char *fmt, const Args&... args) { return fmt; }\n-\n-static inline void MarkUsed() {}\n-template<typename T, typename... Args> static inline void MarkUsed(const T& t, const Args&... args)\n-{\n-    (void)t;\n-    MarkUsed(args...);\n-}\n-\n-// Be conservative when using LogPrintf/error or other things which\n-// unconditionally log to debug.log! It should not be the case that an inbound\n-// peer can fill up a user's disk with debug.log entries.\n-\n-#ifdef USE_COVERAGE\n-#define LogPrintf(...) do { MarkUsed(__VA_ARGS__); } while(0)\n-#define LogPrint(category, ...) do { MarkUsed(__VA_ARGS__); } while(0)\n-#else\n-#define LogPrintf(...) do { \\\n-    if (fPrintToConsole || fPrintToDebugLog) { \\\n-        std::string _log_msg_; /* Unlikely name to avoid shadowing variables */ \\\n-        try { \\\n-            _log_msg_ = tfm::format(__VA_ARGS__); \\\n-        } catch (tinyformat::format_error &fmterr) { \\\n-            /* Original format string will have newline so don't add one here */ \\\n-            _log_msg_ = \"Error \\\"\" + std::string(fmterr.what()) + \"\\\" while formatting log message: \" + FormatStringFromLogArgs(__VA_ARGS__); \\\n-        } \\\n-        LogPrintStr(_log_msg_); \\\n-    } \\\n-} while(0)\n-\n-#define LogPrint(category, ...) do { \\\n-    if (LogAcceptCategory((category))) { \\\n-        LogPrintf(__VA_ARGS__); \\\n-    } \\\n-} while(0)\n-#endif\n-\n template<typename... Args>\n bool error(const char* fmt, const Args&... args)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r181610827",
      "id" : 181610827,
      "original_commit_id" : "67cd23663c6911e9cac4359b5dfd92a5d90563f2",
      "original_position" : 144,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 112266750,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954",
      "updated_at" : "2018-04-20T08:14:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181610827",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r181612082"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181612082"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`LogPrintf` is also used in TraceThread, and I don't think either of them actually belong in logging (the whole point of this PR is to create a more cohesive separation). I can very easily imagine another method that gets added to util.h in the future requiring logging as well.\r\n\r\nThe dependency isn't really cyclic -- `logging.cpp` includes `util.h`, and `util.h` includes `logging.h`, but `logging.h` does not include `util.h`.",
      "commit_id" : "d903273cf8e51d2789ba8a88c608a66e63dcdc14",
      "created_at" : "2018-04-16T02:47:39Z",
      "diff_hunk" : "@@ -75,99 +62,10 @@ inline std::string _(const char* psz)\n void SetupEnvironment();\n bool SetupNetworking();\n \n-struct CLogCategoryActive\n-{\n-    std::string category;\n-    bool active;\n-};\n-\n-namespace BCLog {\n-    enum LogFlags : uint32_t {\n-        NONE        = 0,\n-        NET         = (1 <<  0),\n-        TOR         = (1 <<  1),\n-        MEMPOOL     = (1 <<  2),\n-        HTTP        = (1 <<  3),\n-        BENCH       = (1 <<  4),\n-        ZMQ         = (1 <<  5),\n-        DB          = (1 <<  6),\n-        RPC         = (1 <<  7),\n-        ESTIMATEFEE = (1 <<  8),\n-        ADDRMAN     = (1 <<  9),\n-        SELECTCOINS = (1 << 10),\n-        REINDEX     = (1 << 11),\n-        CMPCTBLOCK  = (1 << 12),\n-        RAND        = (1 << 13),\n-        PRUNE       = (1 << 14),\n-        PROXY       = (1 << 15),\n-        MEMPOOLREJ  = (1 << 16),\n-        LIBEVENT    = (1 << 17),\n-        COINDB      = (1 << 18),\n-        QT          = (1 << 19),\n-        LEVELDB     = (1 << 20),\n-        ALL         = ~(uint32_t)0,\n-    };\n-}\n-/** Return true if log accepts specified category */\n-static inline bool LogAcceptCategory(uint32_t category)\n-{\n-    return (logCategories.load(std::memory_order_relaxed) & category) != 0;\n-}\n-\n-/** Returns a string with the log categories. */\n-std::string ListLogCategories();\n-\n-/** Returns a vector of the active log categories. */\n-std::vector<CLogCategoryActive> ListActiveLogCategories();\n-\n-/** Return true if str parses as a log category and set the flags in f */\n-bool GetLogCategory(uint32_t *f, const std::string *str);\n-\n-/** Send a string to the log output */\n-int LogPrintStr(const std::string &str);\n-\n-/** Get format string from VA_ARGS for error reporting */\n-template<typename... Args> std::string FormatStringFromLogArgs(const char *fmt, const Args&... args) { return fmt; }\n-\n-static inline void MarkUsed() {}\n-template<typename T, typename... Args> static inline void MarkUsed(const T& t, const Args&... args)\n-{\n-    (void)t;\n-    MarkUsed(args...);\n-}\n-\n-// Be conservative when using LogPrintf/error or other things which\n-// unconditionally log to debug.log! It should not be the case that an inbound\n-// peer can fill up a user's disk with debug.log entries.\n-\n-#ifdef USE_COVERAGE\n-#define LogPrintf(...) do { MarkUsed(__VA_ARGS__); } while(0)\n-#define LogPrint(category, ...) do { MarkUsed(__VA_ARGS__); } while(0)\n-#else\n-#define LogPrintf(...) do { \\\n-    if (fPrintToConsole || fPrintToDebugLog) { \\\n-        std::string _log_msg_; /* Unlikely name to avoid shadowing variables */ \\\n-        try { \\\n-            _log_msg_ = tfm::format(__VA_ARGS__); \\\n-        } catch (tinyformat::format_error &fmterr) { \\\n-            /* Original format string will have newline so don't add one here */ \\\n-            _log_msg_ = \"Error \\\"\" + std::string(fmterr.what()) + \"\\\" while formatting log message: \" + FormatStringFromLogArgs(__VA_ARGS__); \\\n-        } \\\n-        LogPrintStr(_log_msg_); \\\n-    } \\\n-} while(0)\n-\n-#define LogPrint(category, ...) do { \\\n-    if (LogAcceptCategory((category))) { \\\n-        LogPrintf(__VA_ARGS__); \\\n-    } \\\n-} while(0)\n-#endif\n-\n template<typename... Args>\n bool error(const char* fmt, const Args&... args)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r181612082",
      "id" : 181612082,
      "in_reply_to_id" : 181610827,
      "original_commit_id" : "67cd23663c6911e9cac4359b5dfd92a5d90563f2",
      "original_position" : 144,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 112268120,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954",
      "updated_at" : "2018-04-20T08:14:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181612082",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r181628843"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181628843"
         }
      },
      "author_association" : "OWNER",
      "body" : "My view is that you should always treat the .h and the .cpp file as one unit. While this may indeed not be a cyclic dependency for the compiler, it is certainly one between the two modules semantically: logging can't work without util, and util can't work without logging. Finding out why that is the case helps creating a cleaner separation.\r\n\r\nYou're right that util is going to depend on logging though, as it contains a number of higher level functions. However, It looks like logging only really needs util for finding the debug log path, though. All the rest is in utiltime. This seems easy to fix, by instead having init query the path and call a setter on logging for it for example. If other reviewers are fine with that, we can fix that up in another PR.\r\n\r\n",
      "commit_id" : "d903273cf8e51d2789ba8a88c608a66e63dcdc14",
      "created_at" : "2018-04-16T06:04:15Z",
      "diff_hunk" : "@@ -75,99 +62,10 @@ inline std::string _(const char* psz)\n void SetupEnvironment();\n bool SetupNetworking();\n \n-struct CLogCategoryActive\n-{\n-    std::string category;\n-    bool active;\n-};\n-\n-namespace BCLog {\n-    enum LogFlags : uint32_t {\n-        NONE        = 0,\n-        NET         = (1 <<  0),\n-        TOR         = (1 <<  1),\n-        MEMPOOL     = (1 <<  2),\n-        HTTP        = (1 <<  3),\n-        BENCH       = (1 <<  4),\n-        ZMQ         = (1 <<  5),\n-        DB          = (1 <<  6),\n-        RPC         = (1 <<  7),\n-        ESTIMATEFEE = (1 <<  8),\n-        ADDRMAN     = (1 <<  9),\n-        SELECTCOINS = (1 << 10),\n-        REINDEX     = (1 << 11),\n-        CMPCTBLOCK  = (1 << 12),\n-        RAND        = (1 << 13),\n-        PRUNE       = (1 << 14),\n-        PROXY       = (1 << 15),\n-        MEMPOOLREJ  = (1 << 16),\n-        LIBEVENT    = (1 << 17),\n-        COINDB      = (1 << 18),\n-        QT          = (1 << 19),\n-        LEVELDB     = (1 << 20),\n-        ALL         = ~(uint32_t)0,\n-    };\n-}\n-/** Return true if log accepts specified category */\n-static inline bool LogAcceptCategory(uint32_t category)\n-{\n-    return (logCategories.load(std::memory_order_relaxed) & category) != 0;\n-}\n-\n-/** Returns a string with the log categories. */\n-std::string ListLogCategories();\n-\n-/** Returns a vector of the active log categories. */\n-std::vector<CLogCategoryActive> ListActiveLogCategories();\n-\n-/** Return true if str parses as a log category and set the flags in f */\n-bool GetLogCategory(uint32_t *f, const std::string *str);\n-\n-/** Send a string to the log output */\n-int LogPrintStr(const std::string &str);\n-\n-/** Get format string from VA_ARGS for error reporting */\n-template<typename... Args> std::string FormatStringFromLogArgs(const char *fmt, const Args&... args) { return fmt; }\n-\n-static inline void MarkUsed() {}\n-template<typename T, typename... Args> static inline void MarkUsed(const T& t, const Args&... args)\n-{\n-    (void)t;\n-    MarkUsed(args...);\n-}\n-\n-// Be conservative when using LogPrintf/error or other things which\n-// unconditionally log to debug.log! It should not be the case that an inbound\n-// peer can fill up a user's disk with debug.log entries.\n-\n-#ifdef USE_COVERAGE\n-#define LogPrintf(...) do { MarkUsed(__VA_ARGS__); } while(0)\n-#define LogPrint(category, ...) do { MarkUsed(__VA_ARGS__); } while(0)\n-#else\n-#define LogPrintf(...) do { \\\n-    if (fPrintToConsole || fPrintToDebugLog) { \\\n-        std::string _log_msg_; /* Unlikely name to avoid shadowing variables */ \\\n-        try { \\\n-            _log_msg_ = tfm::format(__VA_ARGS__); \\\n-        } catch (tinyformat::format_error &fmterr) { \\\n-            /* Original format string will have newline so don't add one here */ \\\n-            _log_msg_ = \"Error \\\"\" + std::string(fmterr.what()) + \"\\\" while formatting log message: \" + FormatStringFromLogArgs(__VA_ARGS__); \\\n-        } \\\n-        LogPrintStr(_log_msg_); \\\n-    } \\\n-} while(0)\n-\n-#define LogPrint(category, ...) do { \\\n-    if (LogAcceptCategory((category))) { \\\n-        LogPrintf(__VA_ARGS__); \\\n-    } \\\n-} while(0)\n-#endif\n-\n template<typename... Args>\n bool error(const char* fmt, const Args&... args)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r181628843",
      "id" : 181628843,
      "in_reply_to_id" : 181610827,
      "original_commit_id" : "67cd23663c6911e9cac4359b5dfd92a5d90563f2",
      "original_position" : 144,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 112287026,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954",
      "updated_at" : "2018-04-20T08:14:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181628843",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase again. (Since this has some Concept ACKs, but is somewhat largish, it might be easier to merge in two steps. First the move-only commit in a separate pull request and then the refactoring in this pull request)",
      "created_at" : "2018-04-17T15:26:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12954#issuecomment-382034468",
      "id" : 382034468,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12954",
      "updated_at" : "2018-04-17T15:26:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382034468",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r182935595"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182935595"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Last I looked, when reviewing #13021, I saw another approach to solving the cyclic dependency is to include utiltime.h in logging.cpp and splitting out args and path handling from util.h. DidnÃ¢ÂÂt go all the way to implementing that but would be happy to as a follow-on to #13021.",
      "commit_id" : "d903273cf8e51d2789ba8a88c608a66e63dcdc14",
      "created_at" : "2018-04-20T03:03:42Z",
      "diff_hunk" : "@@ -75,99 +62,10 @@ inline std::string _(const char* psz)\n void SetupEnvironment();\n bool SetupNetworking();\n \n-struct CLogCategoryActive\n-{\n-    std::string category;\n-    bool active;\n-};\n-\n-namespace BCLog {\n-    enum LogFlags : uint32_t {\n-        NONE        = 0,\n-        NET         = (1 <<  0),\n-        TOR         = (1 <<  1),\n-        MEMPOOL     = (1 <<  2),\n-        HTTP        = (1 <<  3),\n-        BENCH       = (1 <<  4),\n-        ZMQ         = (1 <<  5),\n-        DB          = (1 <<  6),\n-        RPC         = (1 <<  7),\n-        ESTIMATEFEE = (1 <<  8),\n-        ADDRMAN     = (1 <<  9),\n-        SELECTCOINS = (1 << 10),\n-        REINDEX     = (1 << 11),\n-        CMPCTBLOCK  = (1 << 12),\n-        RAND        = (1 << 13),\n-        PRUNE       = (1 << 14),\n-        PROXY       = (1 << 15),\n-        MEMPOOLREJ  = (1 << 16),\n-        LIBEVENT    = (1 << 17),\n-        COINDB      = (1 << 18),\n-        QT          = (1 << 19),\n-        LEVELDB     = (1 << 20),\n-        ALL         = ~(uint32_t)0,\n-    };\n-}\n-/** Return true if log accepts specified category */\n-static inline bool LogAcceptCategory(uint32_t category)\n-{\n-    return (logCategories.load(std::memory_order_relaxed) & category) != 0;\n-}\n-\n-/** Returns a string with the log categories. */\n-std::string ListLogCategories();\n-\n-/** Returns a vector of the active log categories. */\n-std::vector<CLogCategoryActive> ListActiveLogCategories();\n-\n-/** Return true if str parses as a log category and set the flags in f */\n-bool GetLogCategory(uint32_t *f, const std::string *str);\n-\n-/** Send a string to the log output */\n-int LogPrintStr(const std::string &str);\n-\n-/** Get format string from VA_ARGS for error reporting */\n-template<typename... Args> std::string FormatStringFromLogArgs(const char *fmt, const Args&... args) { return fmt; }\n-\n-static inline void MarkUsed() {}\n-template<typename T, typename... Args> static inline void MarkUsed(const T& t, const Args&... args)\n-{\n-    (void)t;\n-    MarkUsed(args...);\n-}\n-\n-// Be conservative when using LogPrintf/error or other things which\n-// unconditionally log to debug.log! It should not be the case that an inbound\n-// peer can fill up a user's disk with debug.log entries.\n-\n-#ifdef USE_COVERAGE\n-#define LogPrintf(...) do { MarkUsed(__VA_ARGS__); } while(0)\n-#define LogPrint(category, ...) do { MarkUsed(__VA_ARGS__); } while(0)\n-#else\n-#define LogPrintf(...) do { \\\n-    if (fPrintToConsole || fPrintToDebugLog) { \\\n-        std::string _log_msg_; /* Unlikely name to avoid shadowing variables */ \\\n-        try { \\\n-            _log_msg_ = tfm::format(__VA_ARGS__); \\\n-        } catch (tinyformat::format_error &fmterr) { \\\n-            /* Original format string will have newline so don't add one here */ \\\n-            _log_msg_ = \"Error \\\"\" + std::string(fmterr.what()) + \"\\\" while formatting log message: \" + FormatStringFromLogArgs(__VA_ARGS__); \\\n-        } \\\n-        LogPrintStr(_log_msg_); \\\n-    } \\\n-} while(0)\n-\n-#define LogPrint(category, ...) do { \\\n-    if (LogAcceptCategory((category))) { \\\n-        LogPrintf(__VA_ARGS__); \\\n-    } \\\n-} while(0)\n-#endif\n-\n template<typename... Args>\n bool error(const char* fmt, const Args&... args)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r182935595",
      "id" : 182935595,
      "in_reply_to_id" : 181610827,
      "original_commit_id" : "67cd23663c6911e9cac4359b5dfd92a5d90563f2",
      "original_position" : 144,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 113837472,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954",
      "updated_at" : "2018-04-20T08:14:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182935595",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r182936010"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182936010"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Lol, didnÃ¢ÂÂt finish reading your comment @sipa. Anyway IÃ¢ÂÂm for it.",
      "commit_id" : "d903273cf8e51d2789ba8a88c608a66e63dcdc14",
      "created_at" : "2018-04-20T03:08:03Z",
      "diff_hunk" : "@@ -75,99 +62,10 @@ inline std::string _(const char* psz)\n void SetupEnvironment();\n bool SetupNetworking();\n \n-struct CLogCategoryActive\n-{\n-    std::string category;\n-    bool active;\n-};\n-\n-namespace BCLog {\n-    enum LogFlags : uint32_t {\n-        NONE        = 0,\n-        NET         = (1 <<  0),\n-        TOR         = (1 <<  1),\n-        MEMPOOL     = (1 <<  2),\n-        HTTP        = (1 <<  3),\n-        BENCH       = (1 <<  4),\n-        ZMQ         = (1 <<  5),\n-        DB          = (1 <<  6),\n-        RPC         = (1 <<  7),\n-        ESTIMATEFEE = (1 <<  8),\n-        ADDRMAN     = (1 <<  9),\n-        SELECTCOINS = (1 << 10),\n-        REINDEX     = (1 << 11),\n-        CMPCTBLOCK  = (1 << 12),\n-        RAND        = (1 << 13),\n-        PRUNE       = (1 << 14),\n-        PROXY       = (1 << 15),\n-        MEMPOOLREJ  = (1 << 16),\n-        LIBEVENT    = (1 << 17),\n-        COINDB      = (1 << 18),\n-        QT          = (1 << 19),\n-        LEVELDB     = (1 << 20),\n-        ALL         = ~(uint32_t)0,\n-    };\n-}\n-/** Return true if log accepts specified category */\n-static inline bool LogAcceptCategory(uint32_t category)\n-{\n-    return (logCategories.load(std::memory_order_relaxed) & category) != 0;\n-}\n-\n-/** Returns a string with the log categories. */\n-std::string ListLogCategories();\n-\n-/** Returns a vector of the active log categories. */\n-std::vector<CLogCategoryActive> ListActiveLogCategories();\n-\n-/** Return true if str parses as a log category and set the flags in f */\n-bool GetLogCategory(uint32_t *f, const std::string *str);\n-\n-/** Send a string to the log output */\n-int LogPrintStr(const std::string &str);\n-\n-/** Get format string from VA_ARGS for error reporting */\n-template<typename... Args> std::string FormatStringFromLogArgs(const char *fmt, const Args&... args) { return fmt; }\n-\n-static inline void MarkUsed() {}\n-template<typename T, typename... Args> static inline void MarkUsed(const T& t, const Args&... args)\n-{\n-    (void)t;\n-    MarkUsed(args...);\n-}\n-\n-// Be conservative when using LogPrintf/error or other things which\n-// unconditionally log to debug.log! It should not be the case that an inbound\n-// peer can fill up a user's disk with debug.log entries.\n-\n-#ifdef USE_COVERAGE\n-#define LogPrintf(...) do { MarkUsed(__VA_ARGS__); } while(0)\n-#define LogPrint(category, ...) do { MarkUsed(__VA_ARGS__); } while(0)\n-#else\n-#define LogPrintf(...) do { \\\n-    if (fPrintToConsole || fPrintToDebugLog) { \\\n-        std::string _log_msg_; /* Unlikely name to avoid shadowing variables */ \\\n-        try { \\\n-            _log_msg_ = tfm::format(__VA_ARGS__); \\\n-        } catch (tinyformat::format_error &fmterr) { \\\n-            /* Original format string will have newline so don't add one here */ \\\n-            _log_msg_ = \"Error \\\"\" + std::string(fmterr.what()) + \"\\\" while formatting log message: \" + FormatStringFromLogArgs(__VA_ARGS__); \\\n-        } \\\n-        LogPrintStr(_log_msg_); \\\n-    } \\\n-} while(0)\n-\n-#define LogPrint(category, ...) do { \\\n-    if (LogAcceptCategory((category))) { \\\n-        LogPrintf(__VA_ARGS__); \\\n-    } \\\n-} while(0)\n-#endif\n-\n template<typename... Args>\n bool error(const char* fmt, const Args&... args)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r182936010",
      "id" : 182936010,
      "in_reply_to_id" : 181610827,
      "original_commit_id" : "67cd23663c6911e9cac4359b5dfd92a5d90563f2",
      "original_position" : 144,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 113837971,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954",
      "updated_at" : "2018-04-20T08:14:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182936010",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r182976829"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182976829"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed with d903273cf8e51d2789ba8a88c608a66e63dcdc14.",
      "commit_id" : "d903273cf8e51d2789ba8a88c608a66e63dcdc14",
      "created_at" : "2018-04-20T08:16:24Z",
      "diff_hunk" : "@@ -75,99 +62,10 @@ inline std::string _(const char* psz)\n void SetupEnvironment();\n bool SetupNetworking();\n \n-struct CLogCategoryActive\n-{\n-    std::string category;\n-    bool active;\n-};\n-\n-namespace BCLog {\n-    enum LogFlags : uint32_t {\n-        NONE        = 0,\n-        NET         = (1 <<  0),\n-        TOR         = (1 <<  1),\n-        MEMPOOL     = (1 <<  2),\n-        HTTP        = (1 <<  3),\n-        BENCH       = (1 <<  4),\n-        ZMQ         = (1 <<  5),\n-        DB          = (1 <<  6),\n-        RPC         = (1 <<  7),\n-        ESTIMATEFEE = (1 <<  8),\n-        ADDRMAN     = (1 <<  9),\n-        SELECTCOINS = (1 << 10),\n-        REINDEX     = (1 << 11),\n-        CMPCTBLOCK  = (1 << 12),\n-        RAND        = (1 << 13),\n-        PRUNE       = (1 << 14),\n-        PROXY       = (1 << 15),\n-        MEMPOOLREJ  = (1 << 16),\n-        LIBEVENT    = (1 << 17),\n-        COINDB      = (1 << 18),\n-        QT          = (1 << 19),\n-        LEVELDB     = (1 << 20),\n-        ALL         = ~(uint32_t)0,\n-    };\n-}\n-/** Return true if log accepts specified category */\n-static inline bool LogAcceptCategory(uint32_t category)\n-{\n-    return (logCategories.load(std::memory_order_relaxed) & category) != 0;\n-}\n-\n-/** Returns a string with the log categories. */\n-std::string ListLogCategories();\n-\n-/** Returns a vector of the active log categories. */\n-std::vector<CLogCategoryActive> ListActiveLogCategories();\n-\n-/** Return true if str parses as a log category and set the flags in f */\n-bool GetLogCategory(uint32_t *f, const std::string *str);\n-\n-/** Send a string to the log output */\n-int LogPrintStr(const std::string &str);\n-\n-/** Get format string from VA_ARGS for error reporting */\n-template<typename... Args> std::string FormatStringFromLogArgs(const char *fmt, const Args&... args) { return fmt; }\n-\n-static inline void MarkUsed() {}\n-template<typename T, typename... Args> static inline void MarkUsed(const T& t, const Args&... args)\n-{\n-    (void)t;\n-    MarkUsed(args...);\n-}\n-\n-// Be conservative when using LogPrintf/error or other things which\n-// unconditionally log to debug.log! It should not be the case that an inbound\n-// peer can fill up a user's disk with debug.log entries.\n-\n-#ifdef USE_COVERAGE\n-#define LogPrintf(...) do { MarkUsed(__VA_ARGS__); } while(0)\n-#define LogPrint(category, ...) do { MarkUsed(__VA_ARGS__); } while(0)\n-#else\n-#define LogPrintf(...) do { \\\n-    if (fPrintToConsole || fPrintToDebugLog) { \\\n-        std::string _log_msg_; /* Unlikely name to avoid shadowing variables */ \\\n-        try { \\\n-            _log_msg_ = tfm::format(__VA_ARGS__); \\\n-        } catch (tinyformat::format_error &fmterr) { \\\n-            /* Original format string will have newline so don't add one here */ \\\n-            _log_msg_ = \"Error \\\"\" + std::string(fmterr.what()) + \"\\\" while formatting log message: \" + FormatStringFromLogArgs(__VA_ARGS__); \\\n-        } \\\n-        LogPrintStr(_log_msg_); \\\n-    } \\\n-} while(0)\n-\n-#define LogPrint(category, ...) do { \\\n-    if (LogAcceptCategory((category))) { \\\n-        LogPrintf(__VA_ARGS__); \\\n-    } \\\n-} while(0)\n-#endif\n-\n template<typename... Args>\n bool error(const char* fmt, const Args&... args)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r182976829",
      "id" : 182976829,
      "in_reply_to_id" : 181610827,
      "original_commit_id" : "67cd23663c6911e9cac4359b5dfd92a5d90563f2",
      "original_position" : 144,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 113886156,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954",
      "updated_at" : "2018-04-20T08:16:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/182976829",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r183068634"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183068634"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Note that this maintains the old (broken) behaviour:\r\n- two threads are running. Thread A logs a line that doesn't terminate with a newline (ie a 'continuing' log)\r\n- thread B then logs a line. This is treated as a 'continuation' log of thread A's previous log, and is printed on the same line, without a timestamp\r\n- thread A's 'continuation' log is printed on a new line, with a timestamp\r\n\r\nNo need to fix that in this PR.",
      "commit_id" : "d903273cf8e51d2789ba8a88c608a66e63dcdc14",
      "created_at" : "2018-04-20T14:29:18Z",
      "diff_hunk" : "@@ -61,11 +55,65 @@ namespace BCLog {\n         LEVELDB     = (1 << 20),\n         ALL         = ~(uint32_t)0,\n     };\n-}\n+\n+    class Logger\n+    {\n+    private:\n+        FILE* m_fileout = nullptr;\n+        std::mutex m_file_mutex;\n+        std::list<std::string> m_msgs_before_open;\n+\n+        /**\n+         * m_started_new_line is a state variable that will suppress printing of\n+         * the timestamp when multiple calls are made that don't end in a\n+         * newline.\n+         */\n+        std::atomic_bool m_started_new_line{true};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r183068634",
      "id" : 183068634,
      "original_commit_id" : "d903273cf8e51d2789ba8a88c608a66e63dcdc14",
      "original_position" : 43,
      "path" : "src/logging.h",
      "position" : 43,
      "pull_request_review_id" : 114000198,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954",
      "updated_at" : "2018-04-20T15:16:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183068634",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r183082956"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183082956"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In commit _util: Establish global logger object._ : any reason to exclude `fLogIPs` from `g_logger`?",
      "commit_id" : "d903273cf8e51d2789ba8a88c608a66e63dcdc14",
      "created_at" : "2018-04-20T15:13:58Z",
      "diff_hunk" : "@@ -19,15 +21,7 @@ static const bool DEFAULT_LOGIPS        = false;\n static const bool DEFAULT_LOGTIMESTAMPS = true;\n extern const char * const DEFAULT_DEBUGLOGFILE;\n \n-extern bool fPrintToConsole;\n-extern bool fPrintToDebugLog;\n-\n-extern bool fLogTimestamps;\n-extern bool fLogTimeMicros;\n extern bool fLogIPs;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r183082956",
      "id" : 183082956,
      "original_commit_id" : "d903273cf8e51d2789ba8a88c608a66e63dcdc14",
      "original_position" : 18,
      "path" : "src/logging.h",
      "position" : 18,
      "pull_request_review_id" : 114000198,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954",
      "updated_at" : "2018-04-20T15:16:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183082956",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r183219507"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183219507"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Unrelated nit: Could change `int` to `size_t` here, so that it doesn't break when someone changes `RECENT_DEBUG_HISTORY_SIZE` to 5GB.",
      "commit_id" : "d903273cf8e51d2789ba8a88c608a66e63dcdc14",
      "created_at" : "2018-04-21T21:17:11Z",
      "diff_hunk" : "@@ -264,7 +259,7 @@ void BCLog::Logger::ShrinkDebugFile()\n         int nBytes = fread(vch.data(), 1, vch.size(), file);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r183219507",
      "id" : 183219507,
      "original_commit_id" : "d903273cf8e51d2789ba8a88c608a66e63dcdc14",
      "original_position" : 64,
      "path" : "src/logging.cpp",
      "position" : 298,
      "pull_request_review_id" : 114183460,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954",
      "updated_at" : "2018-04-21T21:17:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183219507",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r183289911"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183289911"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It's not actually used by the logger, it's just used in the net code. Arguably it should live there instead.",
      "commit_id" : "d903273cf8e51d2789ba8a88c608a66e63dcdc14",
      "created_at" : "2018-04-23T06:50:51Z",
      "diff_hunk" : "@@ -19,15 +21,7 @@ static const bool DEFAULT_LOGIPS        = false;\n static const bool DEFAULT_LOGTIMESTAMPS = true;\n extern const char * const DEFAULT_DEBUGLOGFILE;\n \n-extern bool fPrintToConsole;\n-extern bool fPrintToDebugLog;\n-\n-extern bool fLogTimestamps;\n-extern bool fLogTimeMicros;\n extern bool fLogIPs;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12954#discussion_r183289911",
      "id" : 183289911,
      "in_reply_to_id" : 183082956,
      "original_commit_id" : "d903273cf8e51d2789ba8a88c608a66e63dcdc14",
      "original_position" : 18,
      "path" : "src/logging.h",
      "position" : 18,
      "pull_request_review_id" : 114259021,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12954",
      "updated_at" : "2018-04-23T06:50:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183289911",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   }
]
