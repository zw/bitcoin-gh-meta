[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@practicalswift you may find this useful for #11634.",
      "created_at" : "2018-04-10T00:22:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#issuecomment-379934660",
      "id" : 379934660,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12929",
      "updated_at" : "2018-04-10T00:22:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379934660",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "concept ACK!",
      "created_at" : "2018-04-10T00:53:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#issuecomment-379939196",
      "id" : 379939196,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12929",
      "updated_at" : "2018-04-10T00:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379939196",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180273668"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180273668"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why would `GetConflicts(hash)` include the hash?",
      "commit_id" : "721f499ba8ec1a75ffe182af04bc14452e2a20a4",
      "created_at" : "2018-04-10T01:15:30Z",
      "diff_hunk" : "@@ -497,6 +497,15 @@ std::set<uint256> CWallet::GetConflicts(const uint256& txid) const\n     return result;\n }\n \n+std::set<uint256> CWallet::GetConflicts(const CWalletTx& wtx) const\n+{\n+    std::set<uint256> result;\n+    uint256 hash = wtx.GetHash();\n+    result = GetConflicts(hash);\n+    result.erase(hash); // why?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180273668",
      "id" : 180273668,
      "original_commit_id" : "9a34053dd7657fb0ba2b59be18e9eddb192f8f8a",
      "original_position" : 9,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 110666046,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929",
      "updated_at" : "2018-04-12T12:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180273668",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nThanks!",
      "created_at" : "2018-04-10T06:42:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#issuecomment-379991392",
      "id" : 379991392,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12929",
      "updated_at" : "2018-04-10T06:42:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379991392",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180887380"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180887380"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Add COutput factory CWallet::MakeOutput\"\r\n\r\nThis should just be a constructor. Make functions like this only make sense when they are needed for template deduction.",
      "commit_id" : "721f499ba8ec1a75ffe182af04bc14452e2a20a4",
      "created_at" : "2018-04-11T20:27:45Z",
      "diff_hunk" : "@@ -4314,3 +4314,11 @@ CTxDestination CWallet::AddAndGetDestinationForScript(const CScript& script, Out\n     default: assert(false);\n     }\n }\n+\n+COutput CWallet::MakeOutput(const CWalletTx& wtx, int index, int depth, bool is_spendable, bool is_solvable, bool is_safe) const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180887380",
      "id" : 180887380,
      "original_commit_id" : "a1e8693681f45f9474d5d7a1de699bbafe500784",
      "original_position" : 25,
      "path" : "src/wallet/wallet.cpp",
      "position" : 813,
      "pull_request_review_id" : 111389750,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929",
      "updated_at" : "2018-04-12T12:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180887380",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180891452"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180891452"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Move CWalletTx::GetConflicts to CWallet\"\r\n\r\nWould be better to inline this the one place where it is called, because having two GetConflicts overloads where one overload includes the original transaction and one overloads excludes it is pretty confusing.",
      "commit_id" : "721f499ba8ec1a75ffe182af04bc14452e2a20a4",
      "created_at" : "2018-04-11T20:41:53Z",
      "diff_hunk" : "@@ -497,6 +497,15 @@ std::set<uint256> CWallet::GetConflicts(const uint256& txid) const\n     return result;\n }\n \n+std::set<uint256> CWallet::GetConflicts(const CWalletTx& wtx) const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180891452",
      "id" : 180891452,
      "original_commit_id" : "1196b11aa06fcb0e8101d7af4eccd4e3ea80d29e",
      "original_position" : 4,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 111389750,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929",
      "updated_at" : "2018-04-12T12:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180891452",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180891957"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180891957"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Remove CWallet pointer from CWalletTx\r\n\r\nThink this constructor should be marked explicit now to prevent implicit conversion.",
      "commit_id" : "721f499ba8ec1a75ffe182af04bc14452e2a20a4",
      "created_at" : "2018-04-11T20:43:49Z",
      "diff_hunk" : "@@ -347,14 +344,13 @@ class CWalletTx : public CMerkleTx\n     mutable CAmount nAvailableWatchCreditCached;\n     mutable CAmount nChangeCached;\n \n-    CWalletTx(const CWallet* pwalletIn, CTransactionRef arg) : CMerkleTx(std::move(arg))\n+    CWalletTx(CTransactionRef arg) : CMerkleTx(std::move(arg))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180891957",
      "id" : 180891957,
      "original_commit_id" : "b2f5def07f910d8ee80a0a1afcfce92989c32727",
      "original_position" : 15,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 111389750,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929",
      "updated_at" : "2018-04-12T12:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180891957",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180894919"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180894919"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Remove CWallet pointer from CWalletTx\r\n\r\nIt would be really nice to drop these init methods (which are only called from constructors). Also would be nice to initialize members where they are defined https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#c-data-structures and maybe drop the code inside the init methods too.",
      "commit_id" : "721f499ba8ec1a75ffe182af04bc14452e2a20a4",
      "created_at" : "2018-04-11T20:54:14Z",
      "diff_hunk" : "@@ -347,14 +344,13 @@ class CWalletTx : public CMerkleTx\n     mutable CAmount nAvailableWatchCreditCached;\n     mutable CAmount nChangeCached;\n \n-    CWalletTx(const CWallet* pwalletIn, CTransactionRef arg) : CMerkleTx(std::move(arg))\n+    CWalletTx(CTransactionRef arg) : CMerkleTx(std::move(arg))\n     {\n-        Init(pwalletIn);\n+        Init();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180894919",
      "id" : 180894919,
      "original_commit_id" : "b2f5def07f910d8ee80a0a1afcfce92989c32727",
      "original_position" : 18,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 111389750,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929",
      "updated_at" : "2018-04-12T12:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180894919",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180895862"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180895862"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Move CWalletTx::GetSpendSize to CWallet\"\r\n\r\nMaybe inline GetSpendSize since it is only called this one place and is one line long. (Would be good to keep the \"Get the marginal bytes...\" comment though.)",
      "commit_id" : "721f499ba8ec1a75ffe182af04bc14452e2a20a4",
      "created_at" : "2018-04-11T20:57:33Z",
      "diff_hunk" : "@@ -4307,6 +4307,6 @@ COutput CWallet::MakeOutput(const CWalletTx& wtx, int index, int depth, bool is_\n {\n     // If known and signable by the given wallet, compute input bytes\n     // Failure will keep this value -1\n-    int input_bytes = is_spendable ? wtx.GetSpendSize(index) : -1;\n+    int input_bytes = is_spendable ? GetSpendSize(wtx, index) : -1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180895862",
      "id" : 180895862,
      "original_commit_id" : "efc212261ffbe10e1f28f1245fbdfb9ceca347ca",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 111389750,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929",
      "updated_at" : "2018-04-12T12:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180895862",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180928823"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180928823"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Agree, and I thought doing that, but decided to just move the code until someone also suggested it.",
      "commit_id" : "721f499ba8ec1a75ffe182af04bc14452e2a20a4",
      "created_at" : "2018-04-11T23:36:37Z",
      "diff_hunk" : "@@ -497,6 +497,15 @@ std::set<uint256> CWallet::GetConflicts(const uint256& txid) const\n     return result;\n }\n \n+std::set<uint256> CWallet::GetConflicts(const CWalletTx& wtx) const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180928823",
      "id" : 180928823,
      "in_reply_to_id" : 180891452,
      "original_commit_id" : "1196b11aa06fcb0e8101d7af4eccd4e3ea80d29e",
      "original_position" : 4,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 111438653,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929",
      "updated_at" : "2018-04-12T12:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180928823",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180929210"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180929210"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Made it like this because of `GetSpendSize()`, otherwise I have to pass the wallet instance to the constructor.",
      "commit_id" : "721f499ba8ec1a75ffe182af04bc14452e2a20a4",
      "created_at" : "2018-04-11T23:39:09Z",
      "diff_hunk" : "@@ -4314,3 +4314,11 @@ CTxDestination CWallet::AddAndGetDestinationForScript(const CScript& script, Out\n     default: assert(false);\n     }\n }\n+\n+COutput CWallet::MakeOutput(const CWalletTx& wtx, int index, int depth, bool is_spendable, bool is_solvable, bool is_safe) const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180929210",
      "id" : 180929210,
      "in_reply_to_id" : 180887380,
      "original_commit_id" : "a1e8693681f45f9474d5d7a1de699bbafe500784",
      "original_position" : 25,
      "path" : "src/wallet/wallet.cpp",
      "position" : 813,
      "pull_request_review_id" : 111439102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929",
      "updated_at" : "2018-04-12T12:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180929210",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180929274"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180929274"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Sure.",
      "commit_id" : "721f499ba8ec1a75ffe182af04bc14452e2a20a4",
      "created_at" : "2018-04-11T23:39:32Z",
      "diff_hunk" : "@@ -347,14 +344,13 @@ class CWalletTx : public CMerkleTx\n     mutable CAmount nAvailableWatchCreditCached;\n     mutable CAmount nChangeCached;\n \n-    CWalletTx(const CWallet* pwalletIn, CTransactionRef arg) : CMerkleTx(std::move(arg))\n+    CWalletTx(CTransactionRef arg) : CMerkleTx(std::move(arg))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180929274",
      "id" : 180929274,
      "in_reply_to_id" : 180891957,
      "original_commit_id" : "b2f5def07f910d8ee80a0a1afcfce92989c32727",
      "original_position" : 15,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 111439171,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929",
      "updated_at" : "2018-04-12T12:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180929274",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180929422"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180929422"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> which are only called from constructors\r\n\r\nIt's also called from `Unserialize()`, although I can check if it's necessary.\r\n\r\nEdit: IMO should be done in a follow up PR?\r\n\r\n",
      "commit_id" : "721f499ba8ec1a75ffe182af04bc14452e2a20a4",
      "created_at" : "2018-04-11T23:40:26Z",
      "diff_hunk" : "@@ -347,14 +344,13 @@ class CWalletTx : public CMerkleTx\n     mutable CAmount nAvailableWatchCreditCached;\n     mutable CAmount nChangeCached;\n \n-    CWalletTx(const CWallet* pwalletIn, CTransactionRef arg) : CMerkleTx(std::move(arg))\n+    CWalletTx(CTransactionRef arg) : CMerkleTx(std::move(arg))\n     {\n-        Init(pwalletIn);\n+        Init();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#discussion_r180929422",
      "id" : 180929422,
      "in_reply_to_id" : 180894919,
      "original_commit_id" : "b2f5def07f910d8ee80a0a1afcfce92989c32727",
      "original_position" : 18,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 111439334,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12929",
      "updated_at" : "2018-04-12T12:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180929422",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks @ryanofsky for the review!\r\n\r\n> It seems especially awkward to now have CWallet methods that take const CWalletTx& references and then change their mutable members.\r\n\r\nFor instance, should this \r\n```cpp\r\nCAmount CWallet::GetDebit(const CTxIn &txin, const isminefilter& filter) const;\r\nCAmount CWallet::GetDebit(const CWalletTx& wtx, const isminefilter& filter) const;\r\n```\r\nbe this (without `const CWalletTx`)?\r\n```cpp\r\nCAmount CWallet::GetDebit(const CTxIn &txin, const isminefilter& filter) const;\r\nCAmount CWallet::GetDebit(CWalletTx& wtx, const isminefilter& filter) const;\r\n```\r\nIMO it's no worse than the original code (const method):\r\n```cpp\r\nCAmount CWalletTx::GetDebit(const isminefilter& filter) const;\r\n```\r\nHence the mutable members.\r\n\r\n> and just pass in new pwallet arguments where needed.\r\n\r\nStarted doing that but sounded very lame, for instance (feels wrong doesn't it):\r\n```cpp\r\nwtx.GetDebit(pwallet, filter);\r\n```\r\nAlso, I'd have to check if that approach helps in #11634.\r\n\r\n> Moving all these methods also makes this PR much bigger than it needs to be\r\n\r\nI've moved the code in `wallet.cpp` up and down and made some fixes to the code convention. I can revert those and keep the code in the same place, without reorganising it, the diff will be pretty smaller. WDYT?",
      "created_at" : "2018-04-11T23:53:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#issuecomment-380631042",
      "id" : 380631042,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12929",
      "updated_at" : "2018-04-11T23:53:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380631042",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ryanofsky updated b2f5def...721f499.",
      "created_at" : "2018-04-12T09:39:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12929#issuecomment-380741817",
      "id" : 380741817,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12929",
      "updated_at" : "2018-04-12T17:25:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380741817",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
