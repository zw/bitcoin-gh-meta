[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/27006).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/27006#pullrequestreview-1342121063) |\n| Approach NACK | [dergoegge](https://github.com/bitcoin/bitcoin/pull/27006#pullrequestreview-1368758608) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29361](https://github.com/bitcoin/bitcoin/pull/29361) (refactor: Fix timedata includes by maflcko)\n* [#29236](https://github.com/bitcoin/bitcoin/pull/29236) (log: Nuke error(...) by maflcko)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-01-31T16:10:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#issuecomment-1410662315",
      "id" : 1410662315,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27006",
      "node_id" : "IC_kwDOABII585UFP-r",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1410662315/reactions"
      },
      "updated_at" : "2024-02-01T20:02:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1410662315",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1092197196"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092197196"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Huh? Does this create a mutex for every block? What is the memory footprint?",
      "commit_id" : "6f41153d3cb9a7bad52473ec68b7dc200cce2667",
      "created_at" : "2023-01-31T16:32:40Z",
      "diff_hunk" : "@@ -162,14 +162,16 @@ class CBlockIndex\n     //! height of the entry in the chain. The genesis block has height 0\n     int nHeight{0};\n \n+    const std::shared_ptr<Mutex> cs_data = std::make_shared<Mutex>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1092197196",
      "id" : 1092197196,
      "line" : 165,
      "node_id" : "PRRC_kwDOABII585BGZtM",
      "original_commit_id" : "6f41153d3cb9a7bad52473ec68b7dc200cce2667",
      "original_line" : 165,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/chain.h",
      "position" : 4,
      "pull_request_review_id" : 1277605951,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092197196/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-31T16:32:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092197196",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1092379688"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092379688"
         }
      },
      "author_association" : "MEMBER",
      "body" : "yeah, good topic. I was so focused on accessing disk concurrently that forgot that we have 800k block indexes loaded in memory all the time.\r\nThe mutex size is 64 bytes, so.. a mutex per block index is a no go.\r\n\r\nCould move it to a single global mutex for block indexes file data access, which would still decouple it from `cs_main` (which is a good step forward) but.. it's still not the best solution for concurrent access.",
      "commit_id" : "6f41153d3cb9a7bad52473ec68b7dc200cce2667",
      "created_at" : "2023-01-31T19:22:02Z",
      "diff_hunk" : "@@ -162,14 +162,16 @@ class CBlockIndex\n     //! height of the entry in the chain. The genesis block has height 0\n     int nHeight{0};\n \n+    const std::shared_ptr<Mutex> cs_data = std::make_shared<Mutex>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1092379688",
      "id" : 1092379688,
      "in_reply_to_id" : 1092197196,
      "line" : 165,
      "node_id" : "PRRC_kwDOABII585BHGQo",
      "original_commit_id" : "6f41153d3cb9a7bad52473ec68b7dc200cce2667",
      "original_line" : 165,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/chain.h",
      "position" : 4,
      "pull_request_review_id" : 1277874987,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092379688/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-31T19:22:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092379688",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1092498210"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092498210"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Could move it to a single global mutex for block indexes file data access, which would still decouple it from cs_main (which is a good step forward) but.. it's still not the best solution for concurrent access.\n\nReaders/Writer lock?",
      "commit_id" : "6f41153d3cb9a7bad52473ec68b7dc200cce2667",
      "created_at" : "2023-01-31T21:26:50Z",
      "diff_hunk" : "@@ -162,14 +162,16 @@ class CBlockIndex\n     //! height of the entry in the chain. The genesis block has height 0\n     int nHeight{0};\n \n+    const std::shared_ptr<Mutex> cs_data = std::make_shared<Mutex>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1092498210",
      "id" : 1092498210,
      "in_reply_to_id" : 1092197196,
      "line" : 165,
      "node_id" : "PRRC_kwDOABII585BHjMi",
      "original_commit_id" : "6f41153d3cb9a7bad52473ec68b7dc200cce2667",
      "original_line" : 165,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/chain.h",
      "position" : 4,
      "pull_request_review_id" : 1278046331,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092498210/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-31T21:26:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092498210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1094618214"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1094618214"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Working on it ðð¼ ",
      "commit_id" : "6f41153d3cb9a7bad52473ec68b7dc200cce2667",
      "created_at" : "2023-02-02T14:39:49Z",
      "diff_hunk" : "@@ -162,14 +162,16 @@ class CBlockIndex\n     //! height of the entry in the chain. The genesis block has height 0\n     int nHeight{0};\n \n+    const std::shared_ptr<Mutex> cs_data = std::make_shared<Mutex>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1094618214",
      "id" : 1094618214,
      "in_reply_to_id" : 1092197196,
      "line" : 165,
      "node_id" : "PRRC_kwDOABII585BPoxm",
      "original_commit_id" : "6f41153d3cb9a7bad52473ec68b7dc200cce2667",
      "original_line" : 165,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/chain.h",
      "position" : 4,
      "pull_request_review_id" : 1281191696,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1094618214/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-02T14:39:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1094618214",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1098733722"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098733722"
         }
      },
      "author_association" : "MEMBER",
      "body" : "^ is this done, or still in progress?",
      "commit_id" : "acddd4204654812a0e741e04a758be0f362c5ccb",
      "created_at" : "2023-02-07T14:27:16Z",
      "diff_hunk" : "@@ -162,14 +162,16 @@ class CBlockIndex\n     //! height of the entry in the chain. The genesis block has height 0\n     int nHeight{0};\n \n+    const std::shared_ptr<Mutex> cs_data = std::make_shared<Mutex>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1098733722",
      "id" : 1098733722,
      "in_reply_to_id" : 1092197196,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585BfVia",
      "original_commit_id" : "6f41153d3cb9a7bad52473ec68b7dc200cce2667",
      "original_line" : 165,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/chain.h",
      "position" : null,
      "pull_request_review_id" : 1287214126,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098733722/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-07T14:27:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098733722",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1098745121"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098745121"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> ^ is this done, or still in progress?\r\n\r\nYeah, have pushed the readers/writer lock in the last update.\r\n\r\nStill, have to say that code elegancy wise, I'm not totally happy with the `sync.h` shared lock wrapper. Planning to give it another look later this week.",
      "commit_id" : "acddd4204654812a0e741e04a758be0f362c5ccb",
      "created_at" : "2023-02-07T14:35:49Z",
      "diff_hunk" : "@@ -162,14 +162,16 @@ class CBlockIndex\n     //! height of the entry in the chain. The genesis block has height 0\n     int nHeight{0};\n \n+    const std::shared_ptr<Mutex> cs_data = std::make_shared<Mutex>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1098745121",
      "id" : 1098745121,
      "in_reply_to_id" : 1092197196,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585BfYUh",
      "original_commit_id" : "6f41153d3cb9a7bad52473ec68b7dc200cce2667",
      "original_line" : 165,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/chain.h",
      "position" : null,
      "pull_request_review_id" : 1287231129,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098745121/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-07T14:35:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098745121",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1098769193"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098769193"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why not do a mutex per blockfile (rather than CBlockIndex entry, which would indeed be crazy)? There are hundreds to thousands of those, so keeping a map of blockfile number to mutex shouldn't be unreasonable.",
      "commit_id" : "acddd4204654812a0e741e04a758be0f362c5ccb",
      "created_at" : "2023-02-07T14:53:23Z",
      "diff_hunk" : "@@ -162,14 +162,16 @@ class CBlockIndex\n     //! height of the entry in the chain. The genesis block has height 0\n     int nHeight{0};\n \n+    const std::shared_ptr<Mutex> cs_data = std::make_shared<Mutex>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1098769193",
      "id" : 1098769193,
      "in_reply_to_id" : 1092197196,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585BfeMp",
      "original_commit_id" : "6f41153d3cb9a7bad52473ec68b7dc200cce2667",
      "original_line" : 165,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/chain.h",
      "position" : null,
      "pull_request_review_id" : 1287266827,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098769193/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-07T14:53:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098769193",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1098814063"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098814063"
         }
      },
      "author_association" : "MEMBER",
      "body" : "While that would be better than the initial per `CBlockIndex` entry mutex, it's not as good as a single RW lock (which is the current PR state).\r\n\r\nEssentially, we aim to allow concurrent access for read-only operations, while write operations that are not performed regularly require exclusive access (which is the RW lock purpose).\r\n\r\nTo place it more in our code. The only time where the `CBlockIndex` file position can be modified during the entire software lifecycle is pruning, and it's done only once. And because of that single infrequent scenario, we have been forced to lock `cs_main` every time that a process accesses the block index file position.\r\n\r\nSo, by guarding this single specific case with an exclusive lock, the rest of the read-only operations can be processed concurrently by sharing ownership of the readers-only lock.",
      "commit_id" : "acddd4204654812a0e741e04a758be0f362c5ccb",
      "created_at" : "2023-02-07T15:26:22Z",
      "diff_hunk" : "@@ -162,14 +162,16 @@ class CBlockIndex\n     //! height of the entry in the chain. The genesis block has height 0\n     int nHeight{0};\n \n+    const std::shared_ptr<Mutex> cs_data = std::make_shared<Mutex>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1098814063",
      "id" : 1098814063,
      "in_reply_to_id" : 1092197196,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585BfpJv",
      "original_commit_id" : "6f41153d3cb9a7bad52473ec68b7dc200cce2667",
      "original_line" : 165,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/chain.h",
      "position" : null,
      "pull_request_review_id" : 1287334544,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098814063/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-07T16:06:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098814063",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1098864968"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098864968"
         }
      },
      "author_association" : "MEMBER",
      "body" : "A little add to my last comment:\r\n\r\nI think that if we ever add other use cases that modify the block index file position more frequently (like re-ordering/compacting block data on disk or re-downloading blocks), then a more fine-grained RW lock per block file would be a nice idea.\r\n\r\n-- the comment came to my mind because one of my long-term projects introduces the pruned blocks re-download feature.. --",
      "commit_id" : "acddd4204654812a0e741e04a758be0f362c5ccb",
      "created_at" : "2023-02-07T16:02:38Z",
      "diff_hunk" : "@@ -162,14 +162,16 @@ class CBlockIndex\n     //! height of the entry in the chain. The genesis block has height 0\n     int nHeight{0};\n \n+    const std::shared_ptr<Mutex> cs_data = std::make_shared<Mutex>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1098864968",
      "id" : 1098864968,
      "in_reply_to_id" : 1092197196,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Bf1lI",
      "original_commit_id" : "6f41153d3cb9a7bad52473ec68b7dc200cce2667",
      "original_line" : 165,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/chain.h",
      "position" : null,
      "pull_request_review_id" : 1287410612,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098864968/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-07T16:02:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1098864968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1121419524"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1121419524"
         }
      },
      "author_association" : "MEMBER",
      "body" : "47bc99cddc518dc41741c5dcc17f9e629e162449 This is probably fine, but there's a bunch a places that we have to make sure are never reached. For example in `FindBlockPos(` we do `_blockfile_info[nFile]` where `nFile = ... pos.nFile`. I'll have to review that a bit more.",
      "commit_id" : "acddd4204654812a0e741e04a758be0f362c5ccb",
      "created_at" : "2023-03-01T09:41:26Z",
      "diff_hunk" : "@@ -127,7 +127,7 @@ void BlockManager::PruneOneBlockFile(const int fileNumber)\n         if (pindex->nFile == fileNumber) {\n             pindex->nStatus &= ~BLOCK_HAVE_DATA;\n             pindex->nStatus &= ~BLOCK_HAVE_UNDO;\n-            pindex->nFile = 0;\n+            pindex->nFile = -1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1121419524",
      "id" : 1121419524,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585C14EE",
      "original_commit_id" : "47bc99cddc518dc41741c5dcc17f9e629e162449",
      "original_line" : 130,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : 5,
      "pull_request_review_id" : 1319432351,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1121419524/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-03-01T09:41:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1121419524",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1137557817"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137557817"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Shouldn't these be fetched atomically? Maybe there should be a getter that returns all three values, similar to how there's a setter (`CBlockIndex::SetFileData`) than sets all three atomically.",
      "commit_id" : "acddd4204654812a0e741e04a758be0f362c5ccb",
      "created_at" : "2023-03-15T18:10:40Z",
      "diff_hunk" : "@@ -16,9 +16,8 @@ interfaces::BlockInfo MakeBlockInfo(const CBlockIndex* index, const CBlock* data\n     if (index) {\n         info.prev_hash = index->pprev ? index->pprev->phashBlock : nullptr;\n         info.height = index->nHeight;\n-        LOCK(::cs_main);\n-        info.file_number = index->nFile;\n-        info.data_pos = index->nDataPos;\n+        info.file_number = index->GetFileNum();\n+        info.data_pos = index->GetDataPos();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1137557817",
      "id" : 1137557817,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII585DzcE5",
      "original_commit_id" : "acddd4204654812a0e741e04a758be0f362c5ccb",
      "original_line" : 20,
      "original_position" : 8,
      "original_start_line" : 19,
      "path" : "src/kernel/chain.cpp",
      "position" : 8,
      "pull_request_review_id" : 1342108027,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137557817/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 19,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-03-15T18:10:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137557817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1138503518"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1138503518"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Starting to feel like a struct for those 3 members would be appropriate",
      "commit_id" : "acddd4204654812a0e741e04a758be0f362c5ccb",
      "created_at" : "2023-03-16T11:26:58Z",
      "diff_hunk" : "@@ -16,9 +16,8 @@ interfaces::BlockInfo MakeBlockInfo(const CBlockIndex* index, const CBlock* data\n     if (index) {\n         info.prev_hash = index->pprev ? index->pprev->phashBlock : nullptr;\n         info.height = index->nHeight;\n-        LOCK(::cs_main);\n-        info.file_number = index->nFile;\n-        info.data_pos = index->nDataPos;\n+        info.file_number = index->GetFileNum();\n+        info.data_pos = index->GetDataPos();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1138503518",
      "id" : 1138503518,
      "in_reply_to_id" : 1137557817,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII585D3C9e",
      "original_commit_id" : "acddd4204654812a0e741e04a758be0f362c5ccb",
      "original_line" : 20,
      "original_position" : 8,
      "original_start_line" : 19,
      "path" : "src/kernel/chain.cpp",
      "position" : 8,
      "pull_request_review_id" : 1343524711,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1138503518/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 19,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-03-16T11:26:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1138503518",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1146202462"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1146202462"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Shouldn't these be fetched atomically? Maybe there should be a getter that returns all three values, similar to how there's a setter (`CBlockIndex::SetFileData`) than sets all three atomically.\r\n\r\n@LarryRuane I didn't add it merely to not introduce that many changes but could be done too. The members set is guarded by `cs_main` (for now) so there is no possible race.\r\n\r\n> Starting to feel like a struct for those 3 members would be appropriate\r\n\r\nWhy exactly?. So far in the code, we either want the block data position or the block undo data position, we don't get both at the same time because they represent different files on disk (thus why they are returned inside `FlatFilePos`, the struct groups only one of them with the file number).\r\n\r\nIn other words, nData + nFile maps to a \"blk<nFile>.dat\", while nUndoData + nFile maps to an specific \"rev<nFile>.dat\".",
      "commit_id" : "acddd4204654812a0e741e04a758be0f362c5ccb",
      "created_at" : "2023-03-23T13:30:47Z",
      "diff_hunk" : "@@ -16,9 +16,8 @@ interfaces::BlockInfo MakeBlockInfo(const CBlockIndex* index, const CBlock* data\n     if (index) {\n         info.prev_hash = index->pprev ? index->pprev->phashBlock : nullptr;\n         info.height = index->nHeight;\n-        LOCK(::cs_main);\n-        info.file_number = index->nFile;\n-        info.data_pos = index->nDataPos;\n+        info.file_number = index->GetFileNum();\n+        info.data_pos = index->GetDataPos();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#discussion_r1146202462",
      "id" : 1146202462,
      "in_reply_to_id" : 1137557817,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII585EUale",
      "original_commit_id" : "acddd4204654812a0e741e04a758be0f362c5ccb",
      "original_line" : 20,
      "original_position" : 8,
      "original_start_line" : 19,
      "path" : "src/kernel/chain.cpp",
      "position" : 8,
      "pull_request_review_id" : 1354635917,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27006",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1146202462/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 19,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-03-23T13:30:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1146202462",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Concept ACK\r\n> \r\n> Is my understanding correct that 1) replacing `cs_main` with `g_cs_blockindex_data` and 2) having `g_cs_blockindex_data` be a shared instead of recursive/exclusive mutex are orthogonal improvements? I think it makes sense for both of them to happen in this PR, just wondering.\r\n\r\nMoving `cs_main` to an blockstorage local exclusive mutex would still be an improvement from the current state, yeah. The networking threads (and pretty much the entire node) shouldn't get blocked because the user called the `getblock` RPC command.\r\n\r\nBut, the usage of an exclusive mutex here still means no concurrent block data access. Which is a shame as accessing block 124 on disk shouldn't block the entire node from accessing block 750,000 on disk (nor any other block). They are on different files.",
      "created_at" : "2023-03-23T13:44:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#issuecomment-1481222148",
      "id" : 1481222148,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27006",
      "node_id" : "IC_kwDOABII585YSagE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1481222148/reactions"
      },
      "updated_at" : "2023-03-23T13:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1481222148",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Hey dergoegge, thanks for the feedback.\r\n\r\n> Approach NACK for adding new globals. It is not worth going with a worse design to \"rush in\" an improvement for a feature that may or may not happen ([#26966](https://github.com/bitcoin/bitcoin/pull/26966)). I would prefer to go with a more sustainable approach from the get go, otherwise this will need to be refactored in the long run.\r\n\r\nNo rush here.\r\n[#26966](https://github.com/bitcoin/bitcoin/pull/26966) is only one clear use case. It isnât the main one actually, there are other areas that shouldnât be locking the net messages reception / validation thread because of a disk read: e.g. âgetblockâ, âgetblocktxnâ and compact block net messages, the current indexes sync process (all of them), `getblock`/`gettxoutproof` RPC commands. They all are locking the node at every single block read.\r\n\r\n> I don't see why the mutex could not be a member of BlockManager. Like you say in [#27006 (comment)](https://github.com/bitcoin/bitcoin/pull/27006#issuecomment-1481222148), giving BlockManager its own internal lock(s) instead of cs_main is the preferable long term design.\r\n\r\nI'm not opposed to it but there are few problems with that approach:\r\n\r\n- `BlockStorage` depends on `CBlockIndex` and not in the other way around, so moving the mutex to `BlockStorage` would leave `CBlockIndex` members with no thread safety analysis annotations.\r\n\r\n- The `ReadBlockFromDisk` and `UndoReadFromDisk` functions are currently global functions. They do not have access to the BlockManager class members.\r\n\r\nThe second point can be fixed by refactoring the functions into the class but the first one is more complex. We have to avoid adding a `chain.h` <-> `blockstorage.h` cyclic dependency.",
      "created_at" : "2023-04-03T15:39:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#issuecomment-1494553264",
      "id" : 1494553264,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27006",
      "node_id" : "IC_kwDOABII585ZFRKw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1494553264/reactions"
      },
      "updated_at" : "2023-04-03T15:39:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1494553264",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It isnât the main one actually, there are other areas that shouldnât be locking the net messages reception / validation thread because of a disk read: e.g. âgetblockâ, âgetblocktxnâ and compact block net messages, the current indexes sync process (all of them), getblock/gettxoutproof RPC commands. They all are locking the node at every single block read.\r\n\r\nThis has been the case for 10+ years, if we're gonna change it then we should take the time to do it without adding to our technical debt.\r\n\r\n> I'm not opposed to it but there are few problems with that approach:\r\n\r\nI agree that it is more work but it is worth doing imo and we are clearly in no rush.\r\n\r\n> The ReadBlockFromDisk and UndoReadFromDisk functions are currently global functions. They do not have access to the BlockManager class members.\r\n\r\nThis is being done in #27125.\r\n\r\n> the first one is more complex. We have to avoid adding a chain.h <-> blockstorage.h cyclic dependency.\r\n\r\nMove `CBlockIndex` to a new header file and have `chain` and `blockstorage` include that?\r\n",
      "created_at" : "2023-04-04T14:08:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#issuecomment-1496041020",
      "id" : 1496041020,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27006",
      "node_id" : "IC_kwDOABII585ZK8Y8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1496041020/reactions"
      },
      "updated_at" : "2023-04-04T14:08:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1496041020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > It isnât the main one actually, there are other areas that shouldnât be locking the net messages reception / validation thread because of a disk read: e.g. âgetblockâ, âgetblocktxnâ and compact block net messages, the current indexes sync process (all of them), getblock/gettxoutproof RPC commands. They all are locking the node at every single block read.\r\n> \r\n> This has been the case for 10+ years, if we're gonna change it then we should take the time to do it without adding to our technical debt.\r\n\r\nI never said the opposite. Not sure why the \"rush\" term is being used here really. I haven't said anything like \"this is great, we must have it now\".. (nor here nor anywhere in the repository).\r\n\r\nI was trying to give you more context, answering to your \"It is not worth going with a worse design to \"rush in\" an improvement for a feature that may or may not happen (https://github.com/bitcoin/bitcoin/pull/26966)\".\r\n\r\nI'm happy to continue discussing stuff and improve what needs to be improved.\r\n\r\n> > the first one is more complex. We have to avoid adding a chain.h <-> blockstorage.h cyclic dependency.\r\n> \r\n> Move `CBlockIndex` to a new header file and have `chain` and `blockstorage` include that?\r\n\r\nHow that solves the problem?\r\n\r\nPlacing the mutex inside block storage means that any field that is guarded by this new mutex will need block storage dependency. So don't care where we place `CBlockIndex`, it will need blockstorage dependency to use the thread analysis annotation. Which will cause a cyclic dependency.\r\n\r\nA possible solution would be to place the mutex in a separate file. So blockstorage and `CBlockIndex` can include it independently.\r\n\r\nOr.. thinking out loud: something somewhat \"radical\" could be move `nFile`, `nData` and `nUndoData` members out of `CBlockIndex`, into the blockstorage class. We could place them into an unordered map <block_id, FileData>.\r\n\r\nWhich, in a first glance, sounds quite positive. As we are currently mixing two concepts into the same container. `CBlockIndex` currently is used to store the chain in a sort of linked list structure while it also contains the position of the block data on disk.",
      "created_at" : "2023-04-04T14:56:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#issuecomment-1496122583",
      "id" : 1496122583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27006",
      "node_id" : "IC_kwDOABII585ZLQTX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1496122583/reactions"
      },
      "updated_at" : "2023-04-04T14:58:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1496122583",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I never said the opposite. Not sure why the \"rush\" term is being used here really. I haven't said anything like \"this is great, we must have it now\".. (nor here nor anywhere in the repository).\r\n\r\nI'm sorry didn't mean to put words in your mouth. It seemed rushed to me because you are going with an \"easier\" solution here rather than the more complex but (imo) worth while long term design.\r\n\r\n> it will need blockstorage dependency to use the thread analysis annotation\r\n\r\nI was thinking of not adding the annotations in this case. Which is not great but seems better to me than adding more globals.\r\n\r\n> Or.. thinking out loud: something somewhat \"radical\" could be move nFile, nData and nUndoData members out of CBlockIndex, into the blockstorage class. We could place them into an unordered map <block_id, FileData>.\r\n\r\nThis separates the concerns nicely and lets us add annotations, I would be happy with this :) The only thing that's a bit weird then is maintaining the on-disk format for the block index entries but that seems workable.",
      "created_at" : "2023-04-04T16:10:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#issuecomment-1496245186",
      "id" : 1496245186,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27006",
      "node_id" : "IC_kwDOABII585ZLuPC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1496245186/reactions"
      },
      "updated_at" : "2023-04-04T16:10:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1496245186",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > I never said the opposite. Not sure why the \"rush\" term is being used here really. I haven't said anything like \"this is great, we must have it now\".. (nor here nor anywhere in the repository).\r\n> \r\n> I'm sorry didn't mean to put words in your mouth. It seemed rushed to me because you are going with an \"easier\" solution here rather than the more complex but (imo) worth while long term design.\r\n\r\nWell, this PR didn't have any long term design goal discussion prior to your arrival.\r\nI'm happy that it happened as it pushed us to think about the \"radical\" change mentioned above.\r\n\r\n> > it will need blockstorage dependency to use the thread analysis annotation\r\n> \r\n> I was thinking of not adding the annotations in this case. Which is not great but seems better to me than adding more globals.\r\n\r\nI'm on the other side of the fence actually. While globals aren't ideal, particularly for testing, I prefer them over loosing thread safety analysis as it is essential to prevent deadlocks.\r\n\r\n> > Or.. thinking out loud: something somewhat \"radical\" could be move nFile, nData and nUndoData members out of CBlockIndex, into the blockstorage class. We could place them into an unordered map <block_id, FileData>.\r\n> \r\n> This separates the concerns nicely and lets us add annotations, I would be happy with this :) The only thing that's a bit weird then is maintaining the on-disk format for the block index entries but that seems workable.\r\n\r\nYeah, the read shouldnât be that hard. And a db upgrade mechanism is doable too.",
      "created_at" : "2023-04-05T18:28:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#issuecomment-1497934186",
      "id" : 1497934186,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27006",
      "node_id" : "IC_kwDOABII585ZSKlq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1497934186/reactions"
      },
      "updated_at" : "2023-04-05T18:28:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1497934186",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-05-05T16:58:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#issuecomment-1536532195",
      "id" : 1536532195,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27006",
      "node_id" : "IC_kwDOABII585blZ7j",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1536532195/reactions"
      },
      "updated_at" : "2023-05-05T16:58:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1536532195",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-11-17T11:49:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#issuecomment-1816249637",
      "id" : 1816249637,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27006",
      "node_id" : "IC_kwDOABII585sQcUl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1816249637/reactions"
      },
      "updated_at" : "2023-11-17T11:49:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1816249637",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2024-02-02T18:12:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27006#issuecomment-1924433341",
      "id" : 1924433341,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27006",
      "node_id" : "IC_kwDOABII585ytIW9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1924433341/reactions"
      },
      "updated_at" : "2024-02-02T18:12:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1924433341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
