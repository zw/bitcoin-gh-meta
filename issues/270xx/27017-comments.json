[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The output of `help signrawtransactionwithkey` states:\r\n\r\n```bash\r\n3. prevtxs                          (json array, optional) The previous dependent transaction outputs\r\n     [\r\n       {                            (json object)\r\n         \"txid\": \"hex\",             (string, required) The transaction id\r\n         \"vout\": n,                 (numeric, required) The output number\r\n         \"scriptPubKey\": \"hex\",     (string, required) script key\r\n         \"redeemScript\": \"hex\",     (string) (required for P2SH) redeem script\r\n         \"witnessScript\": \"hex\",    (string) (required for P2WSH or P2SH-P2WSH) witness script\r\n         \"amount\": amount,          (numeric or string) (required for Segwit inputs) the amount spent\r\n       },\r\n       ...\r\n     ]\r\n```\r\n\r\nYou pass as the `prevtxs` argument:\r\n\r\n```bash\r\n[\r\n  {\r\n    \"txid\": \"3152ecd0e7acc80b6f47a32276cb6137a2de7cee428c9388e6a4a1817b665711\",\r\n    \"vout\": 0,\r\n    \"scriptPubKey\": \"5120c38859777bc9c3294d3587035fc3823a146dabaab1fa250bc04e92f16887a065\",\r\n    \"amount\": 0.00004242\r\n  }\r\n]\r\n\r\n```\r\n\r\nAnd the error message states that:\r\n\r\n```bash\r\n\"error\": \"Witness program was passed an empty witness\"\r\n```\r\n\r\nAssuming that [`txid: 3152ecd0e7acc80b6f47a32276cb6137a2de7cee428c9388e6a4a1817b665711`](https://blockstream.info/testnet/tx/3152ecd0e7acc80b6f47a32276cb6137a2de7cee428c9388e6a4a1817b665711?expand=) is a V1 P2TR output, then it will need a valid `witnessScript` element to be supplied to avoid hitting the returned script [error.](https://github.com/bitcoin/bitcoin/blob/b3f866a8dfd652b6339b79124843e58bd0bf3013/src/script/interpreter.cpp#L1901).\r\n\r\nIf using the key path to spend theoutput can be spent with the secret key corresponding to the `internal_pubkey` using a witness stack consisting of a single element: a [BIP340](https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki) signature on the signature hash.\r\n\r\nWhat error message would you consider to be more appropriate here?\r\n\r\n<details>\r\n<summary>I could not replicate your success behaviour after importing the descriptor:</summary>\r\n\r\n\r\n\r\n```fish\r\nwill@ubuntu in â¦/src/bitcoin/src on î  master [$?â] via C v12.2.0-gcc\r\nâ¿ bitcoin-cli -regtest importdescriptors '[{\"desc\": \"tr(cUTFbLPUaBAPmTKwjcDs4rWHUSEUbUBfkPMogrbTmQFnJA3vgrLE)#tdkpah70\", \"timestamp\": \"now\"}]'\r\n[\r\n  {\r\n    \"success\": true\r\n  }\r\n]\r\n\r\nwill@ubuntu in â¦/src/bitcoin/src on î  master [$?â] via C v12.2.0-gcc\r\nâ¿ bitcoin-cli -regtest signrawtransactionwithkey \"02000000011157667b81a1a4e688938c42ee7cdea23761cb7622a3476f0bc8ace7d0ec523100000000000000000001e8030000000000002251203b82b2b2a9185315da6f80da5f06d0440d8a5e1457fa93387c2d919c86ec878600000000\" '[\"cUTFbLPUaBAPmTKwjcDs4rWHUSEUbUBfkPMogrbTmQFnJA3vgrLE\"]' '[{\"txid\": \"3152ecd0e7acc80b6f47a32276cb6137a2de7cee428c9388e6a4a1817b665711\", \"vout\": 0, \"scriptPubKey\": \"5120c38859777bc9c3294d3587035fc3823a146dabaab1fa250bc04e92f16887a065\", \"amount\": 0.00004242}]' \"DEFAULT\"\r\n{\r\n  \"hex\": \"02000000011157667b81a1a4e688938c42ee7cdea23761cb7622a3476f0bc8ace7d0ec523100000000000000000001e8030000000000002251203b82b2b2a9185315da6f80da5f06d0440d8a5e1457fa93387c2d919c86ec878600000000\",\r\n  \"complete\": false,\r\n  \"errors\": [\r\n    {\r\n      \"txid\": \"3152ecd0e7acc80b6f47a32276cb6137a2de7cee428c9388e6a4a1817b665711\",\r\n      \"vout\": 0,\r\n      \"witness\": [\r\n      ],\r\n      \"scriptSig\": \"\",\r\n      \"sequence\": 0,\r\n      \"error\": \"Witness program was passed an empty witness\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n</details>",
      "created_at" : "2023-02-20T13:16:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27017#issuecomment-1437012050",
      "id" : 1437012050,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27017",
      "node_id" : "IC_kwDOABII585VpxBS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1437012050/reactions"
      },
      "updated_at" : "2023-02-20T13:16:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1437012050",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> I could not replicate your success behaviour after importing the descriptor:\r\n\r\nThe success behaviour is different from the not-replicated one:\r\n\r\n> Hint: **signrawtransactionwithwallet** works fine if preceded with the importdescriptors '[{\"desc\": \"tr(cUTFbLPUaBAPmTKwjcDs4rWHUSEUbUBfkPMogrbTmQFnJA3vgrLE)#tdkpah70\", \"timestamp\": \"now\"}]'",
      "created_at" : "2023-02-21T08:54:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27017#issuecomment-1438085755",
      "id" : 1438085755,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27017",
      "node_id" : "IC_kwDOABII585Vt3J7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1438085755/reactions"
      },
      "updated_at" : "2023-02-21T08:54:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1438085755",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/111286121?v=4",
         "events_url" : "https://api.github.com/users/GregTonoski/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GregTonoski/followers",
         "following_url" : "https://api.github.com/users/GregTonoski/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GregTonoski/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GregTonoski",
         "id" : 111286121,
         "login" : "GregTonoski",
         "node_id" : "U_kgDOBqIXaQ",
         "organizations_url" : "https://api.github.com/users/GregTonoski/orgs",
         "received_events_url" : "https://api.github.com/users/GregTonoski/received_events",
         "repos_url" : "https://api.github.com/users/GregTonoski/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GregTonoski/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GregTonoski/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GregTonoski"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "`signrawtransactionwithkey` does not currently support taproot (and it is not clear whether it ever will) as there is not enough information provided with just a private key in order to be able to sign such transactions.\r\n\r\nThe raw transaction workflow is basically deprecated in favor of using PSBTs. Signing with just keys is also basically deprecated in favor of using descriptors.",
      "created_at" : "2023-02-21T17:52:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27017#issuecomment-1438882233",
      "id" : 1438882233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27017",
      "node_id" : "IC_kwDOABII585Vw5m5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1438882233/reactions"
      },
      "updated_at" : "2023-02-21T17:53:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1438882233",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This issue is unlikely to be fixed in Bitcoin Core. We'll close for now, but feel free to open another issue or pull request with a fix. ",
      "created_at" : "2023-04-27T13:55:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27017#issuecomment-1525741265",
      "id" : 1525741265,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27017",
      "node_id" : "IC_kwDOABII585a8PbR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1525741265/reactions"
      },
      "updated_at" : "2023-04-27T13:55:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1525741265",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Seems to be fixed in 26.0. Thanks.\r\n\r\nExample:\r\n```\r\n./bitcoin-cli.exe -testnet signrawtransactionwithkey 020000000165ef750aac862b0177cadb77961bf1a936e2bec0376b286f5b4e1b6255cf3a960000000000fdffffff012c1a0000000000002251203b82b2b2a9185315da6f80da5f06d0440d8a5e1457fa93387c2d919c86ec878600000000 '[\"cV628xvqToz45dwdPmTcJ9RgEVnWMwP8dpZBGzb9LfTk3sBHFNwc\"]' '[{\"txid\":\"963acf55621b4e5b6f286b37c0bee236a9f11b9677dbca77012b86ac0a75ef65\",\"vout\":0,\"scriptPubKey\":\"512055355ca83c973f1d97ce0e3843c85d78905af16b4dc531bc488e57212d230116\",\"amount\":0.00008000}]'\r\n{\r\n  \"hex\": \"0200000000010165ef750aac862b0177cadb77961bf1a936e2bec0376b286f5b4e1b6255cf3a960000000000fdffffff012c1a0000000000002251203b82b2b2a9185315da6f80da5f06d0440d8a5e1457fa93387c2d919c86ec87860140308269219d1226be9f9da12d9a816e56fc6fb8f51c987c21c286687dfada7174c2070a8f18c475bca939ba2dd3c5af8762cfddd0dac190ed1dfbc51eb060763a00000000\",\r\n  \"complete\": true\r\n}\r\n```\r\n",
      "created_at" : "2023-12-21T20:27:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27017#issuecomment-1866890269",
      "id" : 1866890269,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27017",
      "node_id" : "IC_kwDOABII585vRnwd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1866890269/reactions"
      },
      "updated_at" : "2023-12-21T20:27:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1866890269",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/111286121?v=4",
         "events_url" : "https://api.github.com/users/GregTonoski/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GregTonoski/followers",
         "following_url" : "https://api.github.com/users/GregTonoski/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GregTonoski/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GregTonoski",
         "id" : 111286121,
         "login" : "GregTonoski",
         "node_id" : "U_kgDOBqIXaQ",
         "organizations_url" : "https://api.github.com/users/GregTonoski/orgs",
         "received_events_url" : "https://api.github.com/users/GregTonoski/received_events",
         "repos_url" : "https://api.github.com/users/GregTonoski/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GregTonoski/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GregTonoski/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GregTonoski"
      }
   }
]
