{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "Potential benefits of using hardware wallets in combination with Bitcoin Core:\r\n* privacy: all or most hardware wallets rely on a backend to fetch balance and history\r\n* less vendor-specific code to trust, including much of their dependencies (e.g. hardware wallet software often uses ElectronJS and the whole Javascript kitchen sink)\r\n* potentially safer coin storage for Bitcoin Core users than just a `wallet.dat` file\r\n\r\nCurrent easy to use alternatives:\r\n* use the official wallet that goes with the device\r\n* use a different wallet (e.g. Electrum)\r\n\r\nCurrent advanced alternatives:\r\n* [Electrum Personal Server](https://github.com/chris-belcher/electrum-personal-server)\r\n* WIP by @instagibbs: https://github.com/bitcoin/bitcoin/compare/master...instagibbs:external_sign_10\r\n* #14019, #14021, and #14075 by @achow101, guide: https://gist.github.com/achow101/a9cf757d45df56753fae9d65db4d6e1d\r\n\r\nProbably out of scope:\r\n* hardware drivers; i.e. there will always be some binary from manufacturer that the user needs to install and trust\r\n* UI changes more complex than \"Please approve the transaction on your device\"\r\n\r\nPotential ingredients:\r\n* drivers:\r\n  * https://github.com/achow101/HWI: combines various hardware drivers into a consistent API. Uses Python, perhaps rewrite in C++? Drivers from e.g. Ledger and Trezor also in Python though.\r\n  * https://github.com/signal11/hidapi: multi-platform USB/Bluetooth driver written in C++: could perhaps be added to depends to minimize the amount of vendor-specific code users need to trust?\r\n  * perhaps the above is too much detail, and we should just specify a list of function calls that the wallet can make to the driver?\r\n* [BIP-174](https://github.com/bitcoin/bips/blob/master/bip-0174.mediawiki) partially signed transactions are now supported\r\n* [output descriptors](https://github.com/bitcoin/bitcoin/pull/14096)\r\n* [wallet flags](#9662) (e.g. watch-only)\r\n* dynamic wallet loading and creation\r\n\r\nPrevious issues discussing this:\r\n* #10112 (initially about Yubikey, but more broad)\r\n* #8218 (initially about Trezor, but also more broad)\r\n\r\n---\r\nI imagine a UX like this:\r\n\r\n1.  User installs hardware driver\r\n2. User starts Bitcoin Core and inserts hardware wallet\r\n3. Core detects this driver and checks device id against all loaded wallets\r\n3a. If no wallet is found, add menu entry \"Create wallet with device X\"\r\n3b. Core asks device for account xpub `m/49'/0'` (or whatever user enters)\r\n3c. Derive keys (driver provides output descriptor for change and receive addresses, e.g. `/0/*` and `/1/*`)\r\n3d. Mark wallet as watch-only and store the device id.\r\n3e. Ask driver if this is an existing or fresh wallet, rescan if needed\r\n4. When user makes a transaction and wallet has a device id, check with driver that device is inserted, then ask device to sign transaction\r\n\r\nWhat seems to be missing is some sort of reverse-RPC, where the Bitcoin Core can take initiative, e.g. asking the device \"give me an xpub\", or \"sign this\". Perhaps drivers can symlink a standardized RPC at  `$bitcoin_datadir/hardware/device-id`?",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 9,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14145/comments",
   "created_at" : "2018-09-04T10:25:26Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14145/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/14145",
   "id" : 356746959,
   "labels" : [
      {
         "color" : "ebd775",
         "default" : false,
         "id" : 64584,
         "name" : "Brainstorming",
         "node_id" : "MDU6TGFiZWw2NDU4NA==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming"
      },
      {
         "color" : "7cf575",
         "default" : false,
         "id" : 64583,
         "name" : "Feature",
         "node_id" : "MDU6TGFiZWw2NDU4Mw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14145/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUzNTY3NDY5NTk=",
   "number" : 14145,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Hardware wallet support",
   "updated_at" : "2018-09-06T02:15:26Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14145",
   "user" : {
      "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
      "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Sjors/followers",
      "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Sjors",
      "id" : 10217,
      "login" : "Sjors",
      "node_id" : "MDQ6VXNlcjEwMjE3",
      "organizations_url" : "https://api.github.com/users/Sjors/orgs",
      "received_events_url" : "https://api.github.com/users/Sjors/received_events",
      "repos_url" : "https://api.github.com/users/Sjors/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Sjors"
   }
}
