[
   {
      "author_association" : "MEMBER",
      "body" : "> Furthermore, a static function in a cpp file already has internal linkage, making it inline has no effect.\r\n\r\nIs there any document that can prove this? I don't think they act different when they are in .cpp and .h files",
      "created_at" : "2018-09-06T02:05:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14158#issuecomment-418939629",
      "id" : 418939629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxODkzOTYyOQ==",
      "updated_at" : "2018-09-06T02:05:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/418939629",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "node_id" : "MDQ6VXNlcjExMTU0MTE4",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14158#discussion_r215478123"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/215478123"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is constexpr , can this drop both inlin and static?",
      "commit_id" : "ee258a03b4e14751f5ecb9098a11d90cc32f230e",
      "created_at" : "2018-09-06T02:20:28Z",
      "diff_hunk" : "@@ -10,7 +10,7 @@\n \n #include <string.h>\n \n-constexpr static inline uint32_t rotl32(uint32_t v, int c) { return (v << c) | (v >> (32 - c)); }\n+constexpr static uint32_t rotl32(uint32_t v, int c) { return (v << c) | (v >> (32 - c)); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14158#discussion_r215478123",
      "id" : 215478123,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNTQ3ODEyMw==",
      "original_commit_id" : "ee258a03b4e14751f5ecb9098a11d90cc32f230e",
      "original_position" : 5,
      "path" : "src/crypto/chacha20.cpp",
      "position" : 5,
      "pull_request_review_id" : 152751760,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14158",
      "updated_at" : "2018-09-06T02:25:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/215478123",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "node_id" : "MDQ6VXNlcjExMTU0MTE4",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->Note to reviewers: This pull request conflicts with the following ones:\n\n* #14045 (refactor: Fix the chainparamsbase -> util circular dependency by Empact)\n* #13098 (Skip tx-rehashing on historic blocks by MarcoFalke)\n* #11535 (Avoid unintentional unsigned integer wraparounds by practicalswift)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-09-06T03:15:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14158#issuecomment-418950752",
      "id" : 418950752,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxODk1MDc1Mg==",
      "updated_at" : "2018-09-11T07:48:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/418950752",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14158#discussion_r215494931"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/215494931"
         }
      },
      "author_association" : "NONE",
      "body" : "no, `static` still gives it internal linkage.",
      "commit_id" : "ee258a03b4e14751f5ecb9098a11d90cc32f230e",
      "created_at" : "2018-09-06T04:57:43Z",
      "diff_hunk" : "@@ -10,7 +10,7 @@\n \n #include <string.h>\n \n-constexpr static inline uint32_t rotl32(uint32_t v, int c) { return (v << c) | (v >> (32 - c)); }\n+constexpr static uint32_t rotl32(uint32_t v, int c) { return (v << c) | (v >> (32 - c)); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14158#discussion_r215494931",
      "id" : 215494931,
      "in_reply_to_id" : 215478123,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNTQ5NDkzMQ==",
      "original_commit_id" : "ee258a03b4e14751f5ecb9098a11d90cc32f230e",
      "original_position" : 5,
      "path" : "src/crypto/chacha20.cpp",
      "position" : 5,
      "pull_request_review_id" : 152771488,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14158",
      "updated_at" : "2018-09-06T04:57:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/215494931",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/661450?v=4",
         "events_url" : "https://api.github.com/users/arvidn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arvidn/followers",
         "following_url" : "https://api.github.com/users/arvidn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arvidn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arvidn",
         "id" : 661450,
         "login" : "arvidn",
         "node_id" : "MDQ6VXNlcjY2MTQ1MA==",
         "organizations_url" : "https://api.github.com/users/arvidn/orgs",
         "received_events_url" : "https://api.github.com/users/arvidn/received_events",
         "repos_url" : "https://api.github.com/users/arvidn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arvidn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arvidn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arvidn"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Is there any document that can prove this? I don't think they act different when they are in .cpp and .h files\r\n\r\n[[decl.inline]](http://eel.is/c++draft/dcl.dcl#dcl.inline-6) say:\r\n\r\n> An inline function or variable shall be defined in every translation unit in which it is odr-used and shall have exactly the same definition in every case ([basic.def.odr]).\r\n\r\nwhich is really the main definition of `inline` in C++. Since a static function has internal linkage, it will already be defined in every translation unit it appears in.\r\n\r\nregarding the distinction of .h vs. .cpp, they do behave the same, however, when a static function appear in a cpp file, there will only ever be one version of it. if a static function appear in a header, it's likely there will be multiple copies. It's potentially more space efficient to just have a single copy, that's why I removed `static` from headers but not from .cpp files.",
      "created_at" : "2018-09-06T05:12:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14158#issuecomment-418966725",
      "id" : 418966725,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxODk2NjcyNQ==",
      "updated_at" : "2018-09-06T05:12:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/418966725",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/661450?v=4",
         "events_url" : "https://api.github.com/users/arvidn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arvidn/followers",
         "following_url" : "https://api.github.com/users/arvidn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arvidn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arvidn",
         "id" : 661450,
         "login" : "arvidn",
         "node_id" : "MDQ6VXNlcjY2MTQ1MA==",
         "organizations_url" : "https://api.github.com/users/arvidn/orgs",
         "received_events_url" : "https://api.github.com/users/arvidn/received_events",
         "repos_url" : "https://api.github.com/users/arvidn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arvidn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arvidn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arvidn"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK ee258a03b4e14751f5ecb9098a11d90cc32f230e\r\n\r\nExcellent first-time contribution! I'm so glad to see you as a Bitcoin Core contributor @arvidn. I love your work on `libtorrent` and I'm also a fan of your C++ talks.\r\n\r\nThe high quality standards you strive for in the `libtorrent` project and enforce by use of automated testing/linting is really impressive. Thanks for some really inspiring work and hope you'll bring some of that drive for high quality and correctness over here in the form of future contributions!\r\n\r\nWelcome to Bitcoin Core! :-)",
      "created_at" : "2018-09-06T14:47:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14158#issuecomment-419121796",
      "id" : 419121796,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxOTEyMTc5Ng==",
      "updated_at" : "2018-09-06T14:47:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/419121796",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@arvidn I'm curious if you found these with grep or other tool? I mean, is this complete? And can we add check to prevent more \"wrong\" code?",
      "created_at" : "2018-09-06T15:09:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14158#issuecomment-419130286",
      "id" : 419130286,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxOTEzMDI4Ng==",
      "updated_at" : "2018-09-06T15:09:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/419130286",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@promag good question. I used vim for the bulk of the change, specifically:\r\n\r\n```\r\n:argadd src/*.cpp src/*/*.cpp\r\n:argdo %s/static inline /static /ge\r\n```\r\n\r\nand\r\n\r\n```\r\n:argadd src/*.h src/*/*.h\r\n:argdo %s/static inline /inline /ge\r\n```\r\n\r\nThen I grepped out the templates from the diff that created.\r\n\r\nSo, any code outside of those globs was not included.",
      "created_at" : "2018-09-06T15:24:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14158#issuecomment-419136141",
      "id" : 419136141,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxOTEzNjE0MQ==",
      "updated_at" : "2018-09-06T15:24:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/419136141",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/661450?v=4",
         "events_url" : "https://api.github.com/users/arvidn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arvidn/followers",
         "following_url" : "https://api.github.com/users/arvidn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arvidn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arvidn",
         "id" : 661450,
         "login" : "arvidn",
         "node_id" : "MDQ6VXNlcjY2MTQ1MA==",
         "organizations_url" : "https://api.github.com/users/arvidn/orgs",
         "received_events_url" : "https://api.github.com/users/arvidn/received_events",
         "repos_url" : "https://api.github.com/users/arvidn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arvidn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arvidn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arvidn"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Furthermore, a static function in a cpp file already has internal linkage, making it inline has no effect.\r\n\r\n> Templates already have an inline-like property of being allowed to be defined multiple times, and having the linker deal with it. Making them inline is also redundant.\r\n\r\nAs far as I know, `inline` has two effects. One is allowing the function to be defined in multiple translation units (as long as they're all identical). The second is a hint to the compiler (but just a hint) that it may be worthwhile to inline the function at call sites. I'd like to be sure that removing `inline` does not hurt performance through that second effect.\r\n\r\n",
      "created_at" : "2018-09-06T16:54:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14158#issuecomment-419166036",
      "id" : 419166036,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxOTE2NjAzNg==",
      "updated_at" : "2018-09-06T16:54:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/419166036",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@sipa that's exactly right, those are the two effects. I believe it's widely understood that all major compilers these days ignore the hint and base inlining entirely on their own heuristics. It's a fair concern though. I'll see what I can come up with. Are there any performance regression tests by any chance?",
      "created_at" : "2018-09-06T17:35:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14158#issuecomment-419178884",
      "id" : 419178884,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxOTE3ODg4NA==",
      "updated_at" : "2018-09-06T17:35:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/419178884",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/661450?v=4",
         "events_url" : "https://api.github.com/users/arvidn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arvidn/followers",
         "following_url" : "https://api.github.com/users/arvidn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arvidn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arvidn",
         "id" : 661450,
         "login" : "arvidn",
         "node_id" : "MDQ6VXNlcjY2MTQ1MA==",
         "organizations_url" : "https://api.github.com/users/arvidn/orgs",
         "received_events_url" : "https://api.github.com/users/arvidn/received_events",
         "repos_url" : "https://api.github.com/users/arvidn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arvidn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arvidn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arvidn"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "There is `./src/bench/bench_bitcoin`, but it has not full coverage.",
      "created_at" : "2018-09-06T17:52:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14158#issuecomment-419184425",
      "id" : 419184425,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxOTE4NDQyNQ==",
      "updated_at" : "2018-09-06T17:52:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/419184425",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "it appears at least clang *does* take the `inline` keyword into account in its heuristic [[ref]](https://blog.tartanllama.xyz/inline-hints/). I wouldn't expect it to really make a significant difference in this case (either direction).\r\n\r\nPerhaps a better approach would be to split this PR into two. I could revert the removal of `inline` and submit that as a separate PR where I can put some more work into investigating potential performance impact",
      "created_at" : "2018-09-06T19:43:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14158#issuecomment-419217529",
      "id" : 419217529,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxOTIxNzUyOQ==",
      "updated_at" : "2018-09-06T19:43:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/419217529",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/661450?v=4",
         "events_url" : "https://api.github.com/users/arvidn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arvidn/followers",
         "following_url" : "https://api.github.com/users/arvidn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arvidn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arvidn",
         "id" : 661450,
         "login" : "arvidn",
         "node_id" : "MDQ6VXNlcjY2MTQ1MA==",
         "organizations_url" : "https://api.github.com/users/arvidn/orgs",
         "received_events_url" : "https://api.github.com/users/arvidn/received_events",
         "repos_url" : "https://api.github.com/users/arvidn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arvidn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arvidn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arvidn"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I put some work into investigating whether any of the inline decisions changed by this patch. Given that it's primarily decided by heuristics, this may differ on GCC. I tested this with clang using the `-Rpass=inline` command line switch. This logs every time the inliner fires.\r\n\r\nSpecifically I ran:\r\n\r\n```\r\nCFLAGS=-Rpass=inline ./configure\r\nmake V=1 -j1 2> master-inlining.log\r\ngrep \"remark:\" -A 3 master-inlining.log >master.log\r\n```\r\n\r\nand then the same thing in this branch (after cleaning obviously):\r\n\r\n```\r\nmake V=1 -j1 2> branch-inlining.log\r\ngrep \"remark:\" -A 3 branch-inlining.log >branch.log\r\n```\r\n\r\nMy hope was that the output would be identical, but it wasn't for various reasons. However, all the actual inline decisions were the same. The difference was that some names were mangled differently (presumably because of the linkage change) and some logs quoting lines in the source changed, because the source changed.\r\n\r\nfor example:\r\n\r\n```\r\n-./primitives/transaction.h:404:116: remark: _ZNSt3__17forwardI19CMutableTransactionEEOT_RNS_16remove_referenceIS2_E4typeE inlined into _Z18MakeTransactionRefI19CMutableTransactionENSt3__110shared_ptrIK12CTransactionEEOT_ [-Rpass=inline]\r\n+./primitives/transaction.h:404:130: remark: _ZNSt3__17forwardI19CMutableTransactionEEOT_RNS_16remove_referenceIS2_E4typeE inlined into _ZL18MakeTransactionRefI19CMutableTransactionENSt3__110shared_ptrIK12CTransactionEEOT_ [-Rpass=inline]\r\n```\r\n(note the additional \"L\" in the mangled name)\r\n\r\n```\r\n-template <typename Tx> CTransactionRef MakeTransactionRef(Tx&& txIn) { return std::make_shared<const CTransaction>(std::forward<Tx>(txIn)); }\r\n-                                                                                                                   ^\r\n+template <typename Tx> static inline CTransactionRef MakeTransactionRef(Tx&& txIn) { return std::make_shared<const CTransaction>(std::forward<Tx>(txIn)); }\r\n+                                                                                                                                 ^\r\n```\r\n\r\nSo, at least for for clang, this patch does not change any inlining decisions.",
      "created_at" : "2018-09-07T16:42:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14158#issuecomment-419497960",
      "id" : 419497960,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxOTQ5Nzk2MA==",
      "updated_at" : "2018-09-07T16:42:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/419497960",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/661450?v=4",
         "events_url" : "https://api.github.com/users/arvidn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arvidn/followers",
         "following_url" : "https://api.github.com/users/arvidn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arvidn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arvidn",
         "id" : 661450,
         "login" : "arvidn",
         "node_id" : "MDQ6VXNlcjY2MTQ1MA==",
         "organizations_url" : "https://api.github.com/users/arvidn/orgs",
         "received_events_url" : "https://api.github.com/users/arvidn/received_events",
         "repos_url" : "https://api.github.com/users/arvidn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arvidn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arvidn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arvidn"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@arvidn I just observed `inline` on a member function inside an anonymous namespace having an effect with GCC (version 7.3.0, `-O2`), in a different project with pretty complicated templated code.\r\n\r\nI very much doubt the same effect would be observed in Bitcoin Core (nothing similarly complex happens here), but I thought I'd point it out as it may mean we need to consider GCC as well.\r\n\r\n",
      "created_at" : "2018-09-08T17:01:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14158#issuecomment-419657787",
      "id" : 419657787,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxOTY1Nzc4Nw==",
      "updated_at" : "2018-09-08T17:01:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/419657787",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
