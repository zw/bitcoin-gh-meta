[
   {
      "author_association" : "MEMBER",
      "body" : "I'm sure this is useful to people that want to use zmq from golang, but I don't think the core repository is a good place to have examples for every programming language, sorry.\r\n\r\n(we don't have RPC bindings for other languages than Python in the repo either, and the Python one exists only because we actively use Python for the tests)\r\n\r\nso NACK from me",
      "created_at" : "2018-09-11T06:23:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14190#issuecomment-420160763",
      "id" : 420160763,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14190",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMDE2MDc2Mw==",
      "updated_at" : "2018-09-11T06:23:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/420160763",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "NACK too, not the right place Ã¢ÂÂ also think contrib/zmq/zmq_sub.py could be removed.\r\n\r\n@laanwj how about one repo in bitcoin-core org to hold these examples, like bitcoin-core/examples or bitcoin-core/contrib? This way that repo could have CI to keep the examples working with latest version?",
      "created_at" : "2018-09-11T16:57:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14190#issuecomment-420344641",
      "id" : 420344641,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14190",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMDM0NDY0MQ==",
      "updated_at" : "2018-09-11T16:57:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/420344641",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> how about one repo in bitcoin-core org to hold these examples, like bitcoin-core/examples or bitcoin-core/contrib?\r\n\r\nSeems reasonable to me. Concept ACK a separate bitcoin-core repo.",
      "created_at" : "2018-09-11T18:02:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14190#issuecomment-420365314",
      "id" : 420365314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14190",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMDM2NTMxNA==",
      "updated_at" : "2018-09-11T18:02:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/420365314",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Do we really want to maintain yet another repo with examples in code written in languages that are not commonly used in the Bitcoin Core project. I don't see how this could be a successful repo with no review and potentially no interest. What speaks against putting this up as a GitHub gist or personal GitHub repo? This way it can still be found by a search engine, but doesn't add a burden to the Bitcoin Core project.",
      "created_at" : "2018-09-11T18:21:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14190#issuecomment-420371240",
      "id" : 420371240,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14190",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMDM3MTI0MA==",
      "updated_at" : "2018-09-11T18:21:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/420371240",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14190#discussion_r216802552"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14190"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216802552"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Seems strange that you would need to encode payloads as hex strings here, instead of just passing the data directly. Is the concern 0 bytes? https://golang.org/pkg/builtin/#string seems to indicate that arbitrary byte values are fine.",
      "commit_id" : "870178bfb6cf36191cfd1f54854639bd8e1adc64",
      "created_at" : "2018-09-11T20:01:17Z",
      "diff_hunk" : "@@ -0,0 +1,201 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+// Example client code making use of Bitcoin's ZMQ pubsub functionality. Only specialized handling\n+// for blockhash is implemented, which retrieves the raw block over RPC and then prints it.\n+//\n+// You can test this by starting bitcoind on regtest\n+//\n+//   ./src/bitcoind -zmqpubhashblock=tcp://127.0.0.1:38332 -rpcuser=foo -rpcpassword=bar -regtest -debug=1\n+//\n+// and running this script with\n+//\n+//   go get github.com/btcsuite/btcd\n+//   go get github.com/pebbe/zmq4\n+//   BTC_USER=foo BTC_PASS=bar BTC_RPCPORT=18443 ZMQ_ENDPOINT=tcp://127.0.0.1:38332 go run zmq_sub.go\n+//\n+// then generating some blocks with\n+//\n+//   ./src/bitcoin-cli -regtest -rpcuser=foo -rpcpassword=bar generate 1\n+//\n+\n+package main\n+\n+import (\n+\t\"encoding/hex\"\n+\t\"fmt\"\n+\t\"log\"\n+\t\"os\"\n+\n+\t\"github.com/btcsuite/btcd/chaincfg/chainhash\"\n+\t\"github.com/btcsuite/btcd/rpcclient\"\n+\t\"github.com/btcsuite/btcd/wire\"\n+\tzmq \"github.com/pebbe/zmq4\"\n+)\n+\n+var rpc *rpcclient.Client\n+\n+// The ZMQ address to subscribe to.\n+var zmqEndpointStr = getEnv(\"ZMQ_ENDPOINT\", \"tcp://127.0.0.1:28332\")\n+\n+// The Bitcoin host address (for use by RPC)\n+var btcHost = getEnv(\"BTC_HOST\", \"127.0.0.1\")\n+\n+// The Bitcoin RPC port\n+var btcRPCPort = getEnv(\"BTC_RPCPORT\", \"8332\")\n+\n+// The Bitcoin RPC username\n+var btcRPCUser = os.Getenv(\"BTC_USER\")\n+\n+// The Bitcoin RPC password\n+var btcRPCPass = os.Getenv(\"BTC_PASS\")\n+\n+// Return the value of an environment variable if it's defined, otherwise return fallback.\n+func getEnv(key, fallback string) string {\n+\tif value, found := os.LookupEnv(key); found {\n+\t\treturn value\n+\t}\n+\treturn fallback\n+}\n+\n+// Listen for Bitcoin notifications over ZMQ. Push matching messages into the provided channels\n+// upon receipt.\n+func listenForNotification(\n+\tnotifyBlockHash chan<- string,\n+\tnotifyBlockRaw chan<- string,\n+\tnotifyTxHash chan<- string,\n+\tnotifyTxRaw chan<- string,\n+\tquit <-chan bool,\n+) {\n+\tsubscriber, _ := zmq.NewSocket(zmq.SUB)\n+\tdefer subscriber.Close()\n+\tsubscriber.Connect(zmqEndpointStr)\n+\n+\tlog.Printf(\"Listening for zmq notifications on %s\\n\", zmqEndpointStr)\n+\n+\t// Optionally filter by message type\n+\t//\n+\t// subscriber.SetSubscribe(\"hashblock\")\n+\t//\n+\tsubscriber.SetSubscribe(\"\")\n+\n+\tnewmsg := make(chan [][]byte)\n+\n+\tgo func() {\n+\t\tfor {\n+\t\t\tmsg, err := subscriber.RecvMessageBytes(0)\n+\t\t\tif err != nil {\n+\t\t\t\tlog.Fatal(err)\n+\t\t\t\tbreak\n+\t\t\t}\n+\t\t\tnewmsg <- msg\n+\t\t}\n+\t}()\n+\n+\tfor {\n+\t\tselect {\n+\t\tcase msg := <-newmsg:\n+\t\t\tmsgType := string(msg[0])\n+\t\t\tencoded := hex.EncodeToString(msg[1])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14190#discussion_r216802552",
      "id" : 216802552,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNjgwMjU1Mg==",
      "original_commit_id" : "870178bfb6cf36191cfd1f54854639bd8e1adc64",
      "original_position" : 100,
      "path" : "contrib/zmq/zmq_sub.go",
      "position" : 100,
      "pull_request_review_id" : 154371919,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14190",
      "updated_at" : "2018-09-11T20:09:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216802552",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @laanwj how about one repo in bitcoin-core org to hold these examples, like bitcoin-core/examples or bitcoin-core/contrib? This way that repo could have CI to keep the examples working with latest version?\r\n\r\nI'd say \"put it on your own blog\". Or a wiki. There's no need to centralize everything.\r\nBut if you really volunteer on maintaining that, why not... I don't.\r\n\r\n> I'm not sure if the objections above are about more about maintenance burden or review burden. \r\n\r\nBoth! if you noticed, we have 285 PRs open and are struggling. I'm trying really hard to keep the scope of this project down to necessities. Sorry.\r\n\r\nThe best place for Go language bindings would be in the go package repository, I suppose.\r\n\r\n> Gists and stackoverflow posts are no substitute for a nice collection of examples because they get out of date and code quality in these places is often terrible.\r\n\r\nThis is **exactly** the same, or even worse, if you'd dump it in a directory here. It won't get tested in the CI, so it will code rot, most of us don't know (or don't have to time to go about) maintaining go code.",
      "created_at" : "2018-09-12T07:57:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14190#issuecomment-420550265",
      "id" : 420550265,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14190",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMDU1MDI2NQ==",
      "updated_at" : "2018-09-12T08:04:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/420550265",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Happy to close and post in a personal repo. Thanks for thoughts, all.",
      "created_at" : "2018-09-13T19:47:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14190#issuecomment-421130093",
      "id" : 421130093,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14190",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMTEzMDA5Mw==",
      "updated_at" : "2018-09-13T19:47:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/421130093",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jamesob Ã°ÂÂÂ",
      "created_at" : "2018-09-13T19:50:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14190#issuecomment-421131084",
      "id" : 421131084,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14190",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMTEzMTA4NA==",
      "updated_at" : "2018-09-13T19:50:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/421131084",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
