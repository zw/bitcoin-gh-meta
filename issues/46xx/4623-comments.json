[
   {
      "body" : "~~Can you solve this without changes to the core code?~~\r\n\r\nAlso: can you provide a clear and easily executed before/after test plan to make sure that this does get it right. This is the so-manyth change to this part of the code in a short time:\r\n\r\n- 509f926 - Payment request parsing on startup now only changes network if a valid network name is specified.\r\n- dd49e92 - qt: fix 'opens in testnet mode when presented with a BIP-72 link with no fallback'\r\n",
      "created_at" : "2014-08-03T12:32:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4623#issuecomment-50989350",
      "id" : 50989350,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4623",
      "updated_at" : "2014-08-29T09:00:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50989350",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4623#discussion_r16887912"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4623"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16887912"
         }
      },
      "body" : "handleUriOrFile is the wrong place to be changing the network parameters. After all it can be called when the application is already running, and switching the parameters while the application is running could result in serious bugs.\r\n",
      "commit_id" : "e84843c0dbb9cb853b912c09858b01c5c9302b09",
      "created_at" : "2014-08-29T09:00:11Z",
      "diff_hunk" : "@@ -415,12 +416,22 @@ void PaymentServer::handleURIOrFile(const QString& s)\n             if (GUIUtil::parseBitcoinURI(s, &recipient))\n             {\n                 CBitcoinAddress address(recipient.address.toStdString());\n-                if (!address.IsValid()) {\n+                \n+                if (address.IsValid(Params(CBaseChainParams::MAIN)))\n+                {\n+                    SelectParams(CBaseChainParams::MAIN);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4623#discussion_r16887912",
      "id" : 16887912,
      "original_commit_id" : "11a1e9d8b424fa70608ef91214095f05994fdc09",
      "original_position" : 16,
      "path" : "src/qt/paymentserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4623",
      "updated_at" : "2014-08-30T08:56:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16887912",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Reconsidering my stance on the core changes here, they seem reasonable. You need a way to see if an address matches another network without switching the network.\r\n",
      "created_at" : "2014-08-29T09:00:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4623#issuecomment-53852749",
      "id" : 53852749,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4623",
      "updated_at" : "2014-08-29T09:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53852749",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Getting back to this is on my list of things for tonight/tomorrow; I'll get the test cases written up, and look for places better suited to put the switching code into. ",
      "created_at" : "2014-08-29T09:12:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4623#issuecomment-53853677",
      "id" : 53853677,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4623",
      "updated_at" : "2014-08-29T09:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53853677",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3513077?v=3",
         "events_url" : "https://api.github.com/users/rnicoll/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rnicoll/followers",
         "following_url" : "https://api.github.com/users/rnicoll/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rnicoll/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rnicoll",
         "id" : 3513077,
         "login" : "rnicoll",
         "organizations_url" : "https://api.github.com/users/rnicoll/orgs",
         "received_events_url" : "https://api.github.com/users/rnicoll/received_events",
         "repos_url" : "https://api.github.com/users/rnicoll/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rnicoll/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rnicoll/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rnicoll"
      }
   },
   {
      "body" : "Rebased and now rebuilt, and I'd swear that paymentserver.cpp has changed meanwhile. Anyway, network picking code is now in PaymentServer::ipcParseCommandLine() which shouldbe more appropriate.\r\n\r\nTest cases:\r\n\r\n./src/qt/bitcoin-qt -testnet bitcoin:n4dqmiBSWCTLnJRs4FXRxeHVAhZJhyPGCR\r\n./src/qt/bitcoin-qt bitcoin:n4dqmiBSWCTLnJRs4FXRxeHVAhZJhyPGCR\r\n./src/qt/bitcoin-qt bitcoin:1PfnkaYG7Bamc4zArNRo38LsphPYLgDwwh\r\n./src/qt/bitcoin-qt -testnet bitcoin:1PfnkaYG7Bamc4zArNRo38LsphPYLgDwwh\r\n./src/qt/bitcoin-qt bitcoin:1PfnkaYG7Bamc4zArNRo38LsphPYLgDww\r\n\r\nOn existing master these launch test, test, main, main, test (and error). The last is incorrect; it should launch to main (as the default) in the last case.\r\n\r\nWith the patch applied, this launches test, test, main, main, main (and error again). That's correct, as the address is invalid.\r\n\r\n",
      "created_at" : "2014-08-29T23:36:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4623#issuecomment-53940792",
      "id" : 53940792,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4623",
      "updated_at" : "2014-08-29T23:36:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53940792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3513077?v=3",
         "events_url" : "https://api.github.com/users/rnicoll/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rnicoll/followers",
         "following_url" : "https://api.github.com/users/rnicoll/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rnicoll/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rnicoll",
         "id" : 3513077,
         "login" : "rnicoll",
         "organizations_url" : "https://api.github.com/users/rnicoll/orgs",
         "received_events_url" : "https://api.github.com/users/rnicoll/received_events",
         "repos_url" : "https://api.github.com/users/rnicoll/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rnicoll/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rnicoll/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rnicoll"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4623#discussion_r16928413"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4623"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16928413"
         }
      },
      "body" : "You've added SelectParams in ipcParseCommandLine, but not removed it here :)",
      "commit_id" : "e84843c0dbb9cb853b912c09858b01c5c9302b09",
      "created_at" : "2014-08-30T07:09:38Z",
      "diff_hunk" : "@@ -415,12 +416,22 @@ void PaymentServer::handleURIOrFile(const QString& s)\n             if (GUIUtil::parseBitcoinURI(s, &recipient))\n             {\n                 CBitcoinAddress address(recipient.address.toStdString());\n-                if (!address.IsValid()) {\n+                \n+                if (address.IsValid(Params(CBaseChainParams::MAIN)))\n+                {\n+                    SelectParams(CBaseChainParams::MAIN);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4623#discussion_r16928413",
      "id" : 16928413,
      "original_commit_id" : "11a1e9d8b424fa70608ef91214095f05994fdc09",
      "original_position" : 16,
      "path" : "src/qt/paymentserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4623",
      "updated_at" : "2014-08-30T08:56:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16928413",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Once more, with feeling...\r\n",
      "created_at" : "2014-08-30T08:57:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4623#issuecomment-53953042",
      "id" : 53953042,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4623",
      "updated_at" : "2014-08-30T08:57:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53953042",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3513077?v=3",
         "events_url" : "https://api.github.com/users/rnicoll/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rnicoll/followers",
         "following_url" : "https://api.github.com/users/rnicoll/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rnicoll/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rnicoll",
         "id" : 3513077,
         "login" : "rnicoll",
         "organizations_url" : "https://api.github.com/users/rnicoll/orgs",
         "received_events_url" : "https://api.github.com/users/rnicoll/received_events",
         "repos_url" : "https://api.github.com/users/rnicoll/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rnicoll/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rnicoll/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rnicoll"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4623_e84843c0dbb9cb853b912c09858b01c5c9302b09/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-08-30T09:20:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4623#issuecomment-53953453",
      "id" : 53953453,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4623",
      "updated_at" : "2014-08-30T09:20:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53953453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   }
]
