[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2018-05-13T22:43:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13228#issuecomment-388661455",
      "id" : 388661455,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13228",
      "updated_at" : "2018-05-13T22:43:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/388661455",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n```\r\nbash-3.2$ ../contrib/devtools/circular-dependencies.py {*,*/*,*/*/*}.{h,cpp}\r\nCircular dependency: chain -> pow -> chain\r\nCircular dependency: chainparamsbase -> util -> chainparamsbase\r\nCircular dependency: checkpoints -> validation -> checkpoints\r\nCircular dependency: init -> net_processing -> init\r\nCircular dependency: init -> index/txindex -> init\r\nCircular dependency: init -> rpc/server -> init\r\nCircular dependency: init -> txdb -> init\r\nCircular dependency: init -> validation -> init\r\nCircular dependency: init -> validationinterface -> init\r\nCircular dependency: random -> util -> random\r\nCircular dependency: sync -> util -> sync\r\nCircular dependency: txmempool -> policy/fees -> txmempool\r\nCircular dependency: txmempool -> validation -> txmempool\r\nCircular dependency: validation -> index/txindex -> validation\r\nCircular dependency: validation -> validationinterface -> validation\r\nCircular dependency: validation -> policy/policy -> validation\r\nCircular dependency: qt/addresstablemodel -> qt/walletmodel -> qt/addresstablemodel\r\nCircular dependency: qt/bantablemodel -> qt/clientmodel -> qt/bantablemodel\r\nCircular dependency: qt/bitcoingui -> qt/utilitydialog -> qt/bitcoingui\r\nCircular dependency: qt/bitcoingui -> qt/walletview -> qt/bitcoingui\r\nCircular dependency: qt/bitcoingui -> qt/walletframe -> qt/bitcoingui\r\nCircular dependency: qt/clientmodel -> qt/peertablemodel -> qt/clientmodel\r\nCircular dependency: qt/paymentserver -> qt/walletmodel -> qt/paymentserver\r\nCircular dependency: qt/recentrequeststablemodel -> qt/walletmodel -> qt/recentrequeststablemodel\r\nCircular dependency: qt/sendcoinsdialog -> qt/walletmodel -> qt/sendcoinsdialog\r\nCircular dependency: qt/transactiontablemodel -> qt/walletmodel -> qt/transactiontablemodel\r\nCircular dependency: qt/walletmodel -> qt/walletmodeltransaction -> qt/walletmodel\r\nCircular dependency: rpc/rawtransaction -> wallet/rpcwallet -> rpc/rawtransaction\r\nCircular dependency: wallet/coincontrol -> wallet/wallet -> wallet/coincontrol\r\nCircular dependency: wallet/fees -> wallet/wallet -> wallet/fees\r\nCircular dependency: wallet/rpcwallet -> wallet/wallet -> wallet/rpcwallet\r\nCircular dependency: wallet/wallet -> wallet/walletdb -> wallet/wallet\r\nCircular dependency: txmempool -> validation -> policy/rbf -> txmempool\r\nCircular dependency: txmempool -> validation -> validationinterface -> txmempool\r\nCircular dependency: qt/addressbookpage -> qt/bitcoingui -> qt/walletview -> qt/addressbookpage\r\nCircular dependency: qt/guiutil -> qt/walletmodel -> qt/optionsmodel -> qt/guiutil\r\nCircular dependency: qt/addressbookpage -> qt/bitcoingui -> qt/walletview -> qt/signverifymessagedialog -> qt/addressbookpage\r\nCircular dependency: qt/addressbookpage -> qt/bitcoingui -> qt/walletview -> qt/receivecoinsdialog -> qt/addressbookpage\r\nCircular dependency: qt/guiutil -> qt/walletmodel -> qt/optionsmodel -> qt/intro -> qt/guiutil\r\nCircular dependency: qt/addressbookpage -> qt/bitcoingui -> qt/walletview -> qt/sendcoinsdialog -> qt/sendcoinsentry -> qt/addressbookpage\r\n```",
      "created_at" : "2018-05-14T07:16:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13228#issuecomment-388719324",
      "id" : 388719324,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13228",
      "updated_at" : "2018-05-14T07:16:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/388719324",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nVery nice!\r\n\r\nSuggested changes to make the output deterministic:\r\n\r\n```\r\n--- ../circular-dependencies.py\t2018-05-14 08:50:58.691253505 +0200\r\n+++ ../circular-dependencies-deterministic.py\t2018-05-14 09:28:20.164794798 +0200\r\n@@ -35,7 +35,7 @@\r\n\r\n # Iterate again, and build list of direct dependencies for each module\r\n # TODO: implement support for multiple include directories\r\n-for arg in files.keys():\r\n+for arg in sorted(files.keys()):\r\n     module = files[arg]\r\n     with open(arg, 'r') as f:\r\n         for line in f:\r\n@@ -49,7 +49,7 @@\r\n # Loop to find the shortest (remaining) circular dependency\r\n while True:\r\n     shortest_cycle = None\r\n-    for module in deps.keys():\r\n+    for module in sorted(deps.keys()):\r\n         # Build the transitive closure of dependencies of module\r\n         closure = dict()\r\n         for dep in deps[module]:\r\n@@ -57,7 +57,7 @@\r\n         while True:\r\n             old_size = len(closure)\r\n             old_closure_keys = list(closure.keys())\r\n-            for src in old_closure_keys:\r\n+            for src in sorted(old_closure_keys):\r\n                 for dep in deps[src]:\r\n                     if dep not in closure:\r\n                         closure[dep] = closure[src] + [src]\r\n```",
      "created_at" : "2018-05-14T07:30:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13228#issuecomment-388722741",
      "id" : 388722741,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13228",
      "updated_at" : "2018-05-14T07:30:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/388722741",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I would expect this to work from root, with a call like:\r\n`contrib/devtools/circular-dependencies.py src/{*,*/*,*/*/*}.{h,cpp}` but it doesn't.",
      "created_at" : "2018-05-14T21:52:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13228#issuecomment-388975146",
      "id" : 388975146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13228",
      "updated_at" : "2018-05-14T21:52:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/388975146",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes, it can't. To deal with that it needs logic to actually resolve includes w.r.t. include directories; that's a TODO in the code. The README gives the correct invocation.",
      "created_at" : "2018-05-14T22:02:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13228#issuecomment-388977461",
      "id" : 388977461,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13228",
      "updated_at" : "2018-05-14T22:02:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/388977461",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13228#discussion_r188135295"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188135295"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit `../contrib/devtools/circular-dependencies.py  **/*.{h,cpp}`.",
      "commit_id" : "50c69b78011c1bc55885ebfd216db60ed490ebea",
      "created_at" : "2018-05-15T00:20:05Z",
      "diff_hunk" : "@@ -194,3 +194,14 @@ It will do the following automatically:\n - add missing translations to the build system (TODO)\n \n See doc/translation-process.md for more information.\n+\n+circular-dependencies.py\n+========================\n+\n+Run this script from the root of the source tree (`src/`) to find circular dependencies in the source code.\n+This looks only at which files include other files, treating the `.cpp` and `.h` file as one unit.\n+\n+Example usage:\n+\n+    cd .../src\n+    ../contrib/devtools/circular-dependencies.py {*,*/*,*/*/*}.{h,cpp}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13228#discussion_r188135295",
      "id" : 188135295,
      "original_commit_id" : "50c69b78011c1bc55885ebfd216db60ed490ebea",
      "original_position" : 14,
      "path" : "contrib/devtools/README.md",
      "position" : 14,
      "pull_request_review_id" : 120052634,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13228",
      "updated_at" : "2018-05-15T00:26:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188135295",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13228#discussion_r188147943"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188147943"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@promag FWIW on my system **/*.h does not capture immediate *.h files. But that may be mac gnu-sed specific.",
      "commit_id" : "50c69b78011c1bc55885ebfd216db60ed490ebea",
      "created_at" : "2018-05-15T02:08:14Z",
      "diff_hunk" : "@@ -194,3 +194,14 @@ It will do the following automatically:\n - add missing translations to the build system (TODO)\n \n See doc/translation-process.md for more information.\n+\n+circular-dependencies.py\n+========================\n+\n+Run this script from the root of the source tree (`src/`) to find circular dependencies in the source code.\n+This looks only at which files include other files, treating the `.cpp` and `.h` file as one unit.\n+\n+Example usage:\n+\n+    cd .../src\n+    ../contrib/devtools/circular-dependencies.py {*,*/*,*/*/*}.{h,cpp}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13228#discussion_r188147943",
      "id" : 188147943,
      "in_reply_to_id" : 188135295,
      "original_commit_id" : "50c69b78011c1bc55885ebfd216db60ed490ebea",
      "original_position" : 14,
      "path" : "contrib/devtools/README.md",
      "position" : 14,
      "pull_request_review_id" : 120067027,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13228",
      "updated_at" : "2018-05-15T02:18:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188147943",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "https://github.com/bitcoin/bitcoin/issues/13235",
      "created_at" : "2018-05-15T07:57:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13228#issuecomment-389078200",
      "id" : 389078200,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13228",
      "updated_at" : "2018-05-15T07:57:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/389078200",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/39172926?v=4",
         "events_url" : "https://api.github.com/users/Mickieki/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Mickieki/followers",
         "following_url" : "https://api.github.com/users/Mickieki/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Mickieki/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Mickieki",
         "id" : 39172926,
         "login" : "Mickieki",
         "organizations_url" : "https://api.github.com/users/Mickieki/orgs",
         "received_events_url" : "https://api.github.com/users/Mickieki/received_events",
         "repos_url" : "https://api.github.com/users/Mickieki/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Mickieki/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Mickieki/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Mickieki"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested ACK 50c69b78011c1bc55885ebfd216db60ed490ebea",
      "created_at" : "2018-05-15T15:02:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13228#issuecomment-389199961",
      "id" : 389199961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13228",
      "updated_at" : "2018-05-15T15:02:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/389199961",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   }
]
