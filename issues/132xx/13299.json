{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "<!-- Describe the issue -->\r\n\r\nWhen syncing after a period of being offline, a transaction that the wallet received during the offline period was seen in a block, and the transactions tab in the QT ui showed the transaction.  However the transactions was not shown as \"confirmed\" but instead \"open\".  Also, the number of confirmations seems to be incorrect.\r\n\r\n<!--- What behavior did you expect? -->\r\n\r\nI expected the clock icon that fills in as it downloads more blocks, followed by a check mark once it sees 6 confirmations.\r\n\r\n<!--- What was the actual behavior (provide screenshots if the issue is GUI-related)? -->\r\n\r\nInstead there was no icon, and a mouse-over showed \"open for next 130 blocks\".  This confused me as the transaction wasn't a coinbase tx, didn't use op_csv or anything like that.  The transaction did have a locktime, but the bitcoind wallet has been setting that for a while.\r\n\r\nEventually the icon switched directly to a check-mark, and a mouse-over showed the number of confirmations.  However, the number of confirmations is too low by about 30 (a bit of a guess as I get tx details and then check the block height the UI reports it's synced to).\r\n\r\nThe receiving address was a bech32 native segwit v0 address, which may be related.  I asked @theuni and he pointed out code around here: https://github.com/bitcoin/bitcoin/blob/048ac8326b6952244f6e4453f4f8f6ab423eb926/src/qt/transactionrecord.cpp#L177 \r\nwhich looks related; the ui may not be updating finality properly.\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\nsystem:\r\n0.16.0, linux, downloaded from bitcoincore.org, checked gpg sig.\r\n\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\n\r\nUbuntu 16.04, laptop hard drive.\r\n\r\nThis is not a huge issue but I think it could be confusing to users as it indicates that the transaction is not confirmed even though it really is.  The UI eventually displays confirmed though.\r\n",
   "closed_at" : null,
   "closed_by" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/22841402?v=4",
      "events_url" : "https://api.github.com/users/adiabat/events{/privacy}",
      "followers_url" : "https://api.github.com/users/adiabat/followers",
      "following_url" : "https://api.github.com/users/adiabat/following{/other_user}",
      "gists_url" : "https://api.github.com/users/adiabat/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/adiabat",
      "id" : 22841402,
      "login" : "adiabat",
      "node_id" : "MDQ6VXNlcjIyODQxNDAy",
      "organizations_url" : "https://api.github.com/users/adiabat/orgs",
      "received_events_url" : "https://api.github.com/users/adiabat/received_events",
      "repos_url" : "https://api.github.com/users/adiabat/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/adiabat/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/adiabat/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/adiabat"
   },
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13299/comments",
   "created_at" : "2018-05-21T23:17:15Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13299/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/13299",
   "id" : 325089414,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "id" : 64585,
         "name" : "Bug",
         "node_id" : "MDU6TGFiZWw2NDU4NQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      },
      {
         "color" : "02d7e1",
         "default" : false,
         "id" : 135946,
         "name" : "GUI",
         "node_id" : "MDU6TGFiZWwxMzU5NDY=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13299/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUzMjUwODk0MTQ=",
   "number" : 13299,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "wallet / qt: confirmed transaction labeled \"open\"",
   "updated_at" : "2018-05-22T02:44:21Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13299",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/22841402?v=4",
      "events_url" : "https://api.github.com/users/adiabat/events{/privacy}",
      "followers_url" : "https://api.github.com/users/adiabat/followers",
      "following_url" : "https://api.github.com/users/adiabat/following{/other_user}",
      "gists_url" : "https://api.github.com/users/adiabat/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/adiabat",
      "id" : 22841402,
      "login" : "adiabat",
      "node_id" : "MDQ6VXNlcjIyODQxNDAy",
      "organizations_url" : "https://api.github.com/users/adiabat/orgs",
      "received_events_url" : "https://api.github.com/users/adiabat/received_events",
      "repos_url" : "https://api.github.com/users/adiabat/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/adiabat/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/adiabat/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/adiabat"
   }
}
