[
   {
      "body" : "More details about the bug are posted here: https://bitcointalk.org/index.php?topic=1065504.0",
      "created_at" : "2015-05-19T16:27:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-103579244",
      "id" : 103579244,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-05-19T16:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103579244",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1420313?v=3",
         "events_url" : "https://api.github.com/users/jrick/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrick/followers",
         "following_url" : "https://api.github.com/users/jrick/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrick/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrick",
         "id" : 1420313,
         "login" : "jrick",
         "organizations_url" : "https://api.github.com/users/jrick/orgs",
         "received_events_url" : "https://api.github.com/users/jrick/received_events",
         "repos_url" : "https://api.github.com/users/jrick/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrick/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrick/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrick"
      }
   },
   {
      "body" : "Also reported in #5712.  FYI I don't think this is possible to hit on testnet even if it were to be reset, because the starting difficulty is high enough to prevent overflow.  Would be nice to fix this for regtest though...",
      "created_at" : "2015-05-19T16:42:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-103585201",
      "id" : 103585201,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-05-19T16:42:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103585201",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Correct.  It can only be hit on regtest.",
      "created_at" : "2015-05-19T16:44:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-103585927",
      "id" : 103585927,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-05-19T16:44:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103585927",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2115102?v=3",
         "events_url" : "https://api.github.com/users/davecgh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/davecgh/followers",
         "following_url" : "https://api.github.com/users/davecgh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/davecgh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/davecgh",
         "id" : 2115102,
         "login" : "davecgh",
         "organizations_url" : "https://api.github.com/users/davecgh/orgs",
         "received_events_url" : "https://api.github.com/users/davecgh/received_events",
         "repos_url" : "https://api.github.com/users/davecgh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/davecgh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/davecgh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/davecgh"
      }
   },
   {
      "body" : "You're right, testnet3 shares the same pow limit as mainnet.  I'll edit my commit message to match.",
      "created_at" : "2015-05-19T16:46:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-103586683",
      "id" : 103586683,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-05-19T16:47:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103586683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1420313?v=3",
         "events_url" : "https://api.github.com/users/jrick/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrick/followers",
         "following_url" : "https://api.github.com/users/jrick/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrick/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrick",
         "id" : 1420313,
         "login" : "jrick",
         "organizations_url" : "https://api.github.com/users/jrick/orgs",
         "received_events_url" : "https://api.github.com/users/jrick/received_events",
         "repos_url" : "https://api.github.com/users/jrick/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrick/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrick/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrick"
      }
   },
   {
      "body" : "Fixed the protected members by declaring all other `base_uint` classes to be friends of any `base_uint<BITS>`.",
      "created_at" : "2015-05-19T17:06:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-103594466",
      "id" : 103594466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-05-19T17:06:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103594466",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1420313?v=3",
         "events_url" : "https://api.github.com/users/jrick/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrick/followers",
         "following_url" : "https://api.github.com/users/jrick/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrick/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrick",
         "id" : 1420313,
         "login" : "jrick",
         "organizations_url" : "https://api.github.com/users/jrick/orgs",
         "received_events_url" : "https://api.github.com/users/jrick/received_events",
         "repos_url" : "https://api.github.com/users/jrick/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrick/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrick/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrick"
      }
   },
   {
      "body" : "@jrick: wouldn't it make sense to provide a RPC test (maybe `qa/rpc-tests/reorg-overflow.py` or so) where you could prove your implementation? The test should fail on current master and succeed with master+this PR on top.",
      "created_at" : "2015-05-20T09:43:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-103826182",
      "id" : 103826182,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-05-20T09:43:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103826182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli agree that exercising this with a test would be good to have.  I can try my hand at the RPC test at it if no one else picks it up, but I am not familiar with python.\r\n\r\nDon't want to sidetrack the discussion, but writing tests in a different language that contributors might not know seems like a strange decision.  Testing everything over RPC instead of calling the functions directly also complicates the RPC API by requiring exposing many internals that otherwise an RPC client should not need.",
      "created_at" : "2015-05-20T14:20:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-103903522",
      "id" : 103903522,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-05-20T14:20:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103903522",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1420313?v=3",
         "events_url" : "https://api.github.com/users/jrick/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrick/followers",
         "following_url" : "https://api.github.com/users/jrick/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrick/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrick",
         "id" : 1420313,
         "login" : "jrick",
         "organizations_url" : "https://api.github.com/users/jrick/orgs",
         "received_events_url" : "https://api.github.com/users/jrick/received_events",
         "repos_url" : "https://api.github.com/users/jrick/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrick/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrick/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrick"
      }
   },
   {
      "body" : "@jrick: no need to expose internals over RPC. If you PR solves a real world problems (which this PR does IMO) you should be able to automate the steps-to-produce-the-error-you-solve by creating a RPC test. You don't need to know python. Just copy'n'paste from other tests and adapt your scenario. :)\r\n",
      "created_at" : "2015-05-20T14:30:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-103905924",
      "id" : 103905924,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-05-20T14:30:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103905924",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Added RPC tests.",
      "created_at" : "2015-05-20T21:46:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-104048519",
      "id" : 104048519,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-05-20T21:46:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104048519",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1420313?v=3",
         "events_url" : "https://api.github.com/users/jrick/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrick/followers",
         "following_url" : "https://api.github.com/users/jrick/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrick/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrick",
         "id" : 1420313,
         "login" : "jrick",
         "organizations_url" : "https://api.github.com/users/jrick/orgs",
         "received_events_url" : "https://api.github.com/users/jrick/received_events",
         "repos_url" : "https://api.github.com/users/jrick/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrick/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrick/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrick"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30782721"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30782721"
         }
      },
      "body" : "This test should be disabled in `rpc-tests.sh` because it mines serval hundred blocks and it's therefore not ideal for travis/CI (timeouts,etc.).",
      "commit_id" : "bfa0f38f1dc28ec9ff4debd863ea38f9b743b797",
      "created_at" : "2015-05-21T08:39:19Z",
      "diff_hunk" : "@@ -34,6 +34,7 @@ testScripts=(\n     'maxblocksinflight.py'\n     'invalidblockrequest.py'\n     'rawtransactions.py'\n+    'retarget-overflow.py'",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30782721",
      "id" : 30782721,
      "original_commit_id" : "8aced2167bd83efb7ee303f8fc4c9ab6cd67c606",
      "original_position" : 4,
      "path" : "qa/pull-tester/rpc-tests.sh",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162",
      "updated_at" : "2015-05-21T16:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30782721",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Tested (regtest only!). ACK.\r\nChanges look sane to me but i'm not sure if the changes in `src/pow.cpp` should go over chainparams (or something similar) so that this PR only affects regtest. ",
      "created_at" : "2015-05-21T08:47:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-104183920",
      "id" : 104183920,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-05-21T08:47:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104183920",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "> Changes look sane to me but i'm not sure if the changes in src/pow.cpp should go over chainparams (or something similar) so that this PR only affects regtest. \r\n\r\nI'm also wary of this, if this is a problem that affects only testing code (regtest), it's unnecessary risk to change mainnet consensus code for it.\r\n\r\nRemind me: Why does it retarget difficulty on regtest at all? From what I've always understood, the difficulty was supposed to be fixed at the bare minimum to allow instant block generation.\r\n",
      "created_at" : "2015-05-21T10:46:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-104223021",
      "id" : 104223021,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-05-21T10:46:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104223021",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I can't speak for regtest, but @davecgh and I hit this issue while I was patching in support for btcd's simnet so I could do some testing against one of our private test networks.  The difficulty retarget is needed in this case, or block generation timings on our network would not be as realistic as we need.\r\n\r\nIn the past, whenever we've talked about simnet in #bitcoin-dev, we've been told \"that sounds just like regtest, why not use that instead?\", so there are some people who do expect regtest to also work for simulation testing and long-lived private networks.  A network that always has the lowest possible difficulty would indeed be useful for some situations, but useless for others.\r\n\r\nAssumming the regtest retarget is kept, how would you incorporate the logic to use the 512-bit math only on regtest?  I'm all for avoiding touching working mainnet code, but tests become less and less useful the more special cases are made for the test environment.  In this case, I would think that sharing the difficulty retarget code on all networks is safest.",
      "created_at" : "2015-05-21T14:37:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-104300457",
      "id" : 104300457,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-05-21T14:44:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104300457",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1420313?v=3",
         "events_url" : "https://api.github.com/users/jrick/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrick/followers",
         "following_url" : "https://api.github.com/users/jrick/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrick/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrick",
         "id" : 1420313,
         "login" : "jrick",
         "organizations_url" : "https://api.github.com/users/jrick/orgs",
         "received_events_url" : "https://api.github.com/users/jrick/received_events",
         "repos_url" : "https://api.github.com/users/jrick/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrick/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrick/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrick"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30808425"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30808425"
         }
      },
      "body" : "What is the command to run all RPC tests, including those disabled for the pull tester?",
      "commit_id" : "bfa0f38f1dc28ec9ff4debd863ea38f9b743b797",
      "created_at" : "2015-05-21T14:39:43Z",
      "diff_hunk" : "@@ -34,6 +34,7 @@ testScripts=(\n     'maxblocksinflight.py'\n     'invalidblockrequest.py'\n     'rawtransactions.py'\n+    'retarget-overflow.py'",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30808425",
      "id" : 30808425,
      "original_commit_id" : "8aced2167bd83efb7ee303f8fc4c9ab6cd67c606",
      "original_position" : 4,
      "path" : "qa/pull-tester/rpc-tests.sh",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162",
      "updated_at" : "2015-05-21T16:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30808425",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1420313?v=3",
         "events_url" : "https://api.github.com/users/jrick/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrick/followers",
         "following_url" : "https://api.github.com/users/jrick/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrick/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrick",
         "id" : 1420313,
         "login" : "jrick",
         "organizations_url" : "https://api.github.com/users/jrick/orgs",
         "received_events_url" : "https://api.github.com/users/jrick/received_events",
         "repos_url" : "https://api.github.com/users/jrick/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrick/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrick/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrick"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30811609"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30811609"
         }
      },
      "body" : "You can't.\r\nBut there is a PR in this direction #6097",
      "commit_id" : "bfa0f38f1dc28ec9ff4debd863ea38f9b743b797",
      "created_at" : "2015-05-21T15:08:58Z",
      "diff_hunk" : "@@ -34,6 +34,7 @@ testScripts=(\n     'maxblocksinflight.py'\n     'invalidblockrequest.py'\n     'rawtransactions.py'\n+    'retarget-overflow.py'",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30811609",
      "id" : 30811609,
      "original_commit_id" : "8aced2167bd83efb7ee303f8fc4c9ab6cd67c606",
      "original_position" : 4,
      "path" : "qa/pull-tester/rpc-tests.sh",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162",
      "updated_at" : "2015-05-21T16:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30811609",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30812760"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30812760"
         }
      },
      "body" : "Should retarget-overflow.py not appear in rpc-tests.sh at all, or be commented out like forknotify.py?",
      "commit_id" : "bfa0f38f1dc28ec9ff4debd863ea38f9b743b797",
      "created_at" : "2015-05-21T15:19:57Z",
      "diff_hunk" : "@@ -34,6 +34,7 @@ testScripts=(\n     'maxblocksinflight.py'\n     'invalidblockrequest.py'\n     'rawtransactions.py'\n+    'retarget-overflow.py'",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30812760",
      "id" : 30812760,
      "original_commit_id" : "8aced2167bd83efb7ee303f8fc4c9ab6cd67c606",
      "original_position" : 4,
      "path" : "qa/pull-tester/rpc-tests.sh",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162",
      "updated_at" : "2015-05-21T16:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30812760",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1420313?v=3",
         "events_url" : "https://api.github.com/users/jrick/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrick/followers",
         "following_url" : "https://api.github.com/users/jrick/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrick/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrick",
         "id" : 1420313,
         "login" : "jrick",
         "organizations_url" : "https://api.github.com/users/jrick/orgs",
         "received_events_url" : "https://api.github.com/users/jrick/received_events",
         "repos_url" : "https://api.github.com/users/jrick/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrick/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrick/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrick"
      }
   },
   {
      "body" : "I would also suggest that having a test for the retarget code which does not rely on special casing or branches specific to the network makes the most sense and is the least risky approach.\r\n\r\nThis code path is currently uncovered by the test code.  The block tester tool does not generate enough blocks to hit the retarget interval, and I haven't seen any test cases anywhere which otherwise cover it.  Empirically, it works properly on mainnet and testnet, and naturally mainnet can be externally tested via an ASIC by disabling checkpoints, which are all good things.  However, I personally don't think it's a good idea to solely rely on human testing for consensus-related code.",
      "created_at" : "2015-05-21T15:53:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-104328522",
      "id" : 104328522,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-05-21T16:00:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104328522",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2115102?v=3",
         "events_url" : "https://api.github.com/users/davecgh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/davecgh/followers",
         "following_url" : "https://api.github.com/users/davecgh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/davecgh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/davecgh",
         "id" : 2115102,
         "login" : "davecgh",
         "organizations_url" : "https://api.github.com/users/davecgh/orgs",
         "received_events_url" : "https://api.github.com/users/davecgh/received_events",
         "repos_url" : "https://api.github.com/users/davecgh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/davecgh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/davecgh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/davecgh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30816754"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30816754"
         }
      },
      "body" : "IMO best practice (for the current state) is to add your test commented out in `rpc-tests.sh`.",
      "commit_id" : "bfa0f38f1dc28ec9ff4debd863ea38f9b743b797",
      "created_at" : "2015-05-21T15:55:57Z",
      "diff_hunk" : "@@ -34,6 +34,7 @@ testScripts=(\n     'maxblocksinflight.py'\n     'invalidblockrequest.py'\n     'rawtransactions.py'\n+    'retarget-overflow.py'",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30816754",
      "id" : 30816754,
      "original_commit_id" : "8aced2167bd83efb7ee303f8fc4c9ab6cd67c606",
      "original_position" : 4,
      "path" : "qa/pull-tester/rpc-tests.sh",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162",
      "updated_at" : "2015-05-21T16:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30816754",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30817234"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30817234"
         }
      },
      "body" : "done",
      "commit_id" : "bfa0f38f1dc28ec9ff4debd863ea38f9b743b797",
      "created_at" : "2015-05-21T16:00:40Z",
      "diff_hunk" : "@@ -34,6 +34,7 @@ testScripts=(\n     'maxblocksinflight.py'\n     'invalidblockrequest.py'\n     'rawtransactions.py'\n+    'retarget-overflow.py'",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30817234",
      "id" : 30817234,
      "original_commit_id" : "8aced2167bd83efb7ee303f8fc4c9ab6cd67c606",
      "original_position" : 4,
      "path" : "qa/pull-tester/rpc-tests.sh",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162",
      "updated_at" : "2015-05-21T16:00:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30817234",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1420313?v=3",
         "events_url" : "https://api.github.com/users/jrick/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrick/followers",
         "following_url" : "https://api.github.com/users/jrick/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrick/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrick",
         "id" : 1420313,
         "login" : "jrick",
         "organizations_url" : "https://api.github.com/users/jrick/orgs",
         "received_events_url" : "https://api.github.com/users/jrick/received_events",
         "repos_url" : "https://api.github.com/users/jrick/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrick/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrick/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrick"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30818040"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30818040"
         }
      },
      "body" : "The rule for regtest is just to start with a much lower difficulty than\nmainnet, but otherwise is identical in retargetting.\n\nIt's unfortunate that we would need larger integer support for just the\nregtest.\n\nAs regtest mining beyond the retargetting interval hasn't worked for a\nwhile, could we not just change its logic instead, and disable retargetting\nentirely? That seems closer to what people expect and needs fewer code\nchanges to non-test code.\n\nAnd yes, we do need a test that exercises retargetting... @sdaftuar?\n",
      "commit_id" : "bfa0f38f1dc28ec9ff4debd863ea38f9b743b797",
      "created_at" : "2015-05-21T16:09:22Z",
      "diff_hunk" : "@@ -34,6 +34,7 @@ testScripts=(\n     'maxblocksinflight.py'\n     'invalidblockrequest.py'\n     'rawtransactions.py'\n+    'retarget-overflow.py'",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30818040",
      "id" : 30818040,
      "original_commit_id" : "8aced2167bd83efb7ee303f8fc4c9ab6cd67c606",
      "original_position" : 4,
      "path" : "qa/pull-tester/rpc-tests.sh",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162",
      "updated_at" : "2015-05-21T16:09:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30818040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30819025"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30819025"
         }
      },
      "body" : "Ignore my suggestion to disable retarget on regtest, as testing retarget on\nmainnet itself is not feasible.\n\nCan we easily redefine it to not require larger arithmetic?\n\nIf not, switching everything to 512 and adding tests for it like this PR\ndoes is probably the best option, as it's the only way to make sure the\ncode under test is the same as the one affecting mainnet.\n",
      "commit_id" : "bfa0f38f1dc28ec9ff4debd863ea38f9b743b797",
      "created_at" : "2015-05-21T16:19:52Z",
      "diff_hunk" : "@@ -34,6 +34,7 @@ testScripts=(\n     'maxblocksinflight.py'\n     'invalidblockrequest.py'\n     'rawtransactions.py'\n+    'retarget-overflow.py'",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#discussion_r30819025",
      "id" : 30819025,
      "original_commit_id" : "8aced2167bd83efb7ee303f8fc4c9ab6cd67c606",
      "original_position" : 4,
      "path" : "qa/pull-tester/rpc-tests.sh",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6162",
      "updated_at" : "2015-05-21T16:19:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30819025",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "It's probably better for the rpc tests to calculate the exact expected retarget difficulty, instead of simply checking that the change was within the expected bounds.",
      "created_at" : "2015-05-21T17:03:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-104356136",
      "id" : 104356136,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-05-21T17:03:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104356136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1420313?v=3",
         "events_url" : "https://api.github.com/users/jrick/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrick/followers",
         "following_url" : "https://api.github.com/users/jrick/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrick/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrick",
         "id" : 1420313,
         "login" : "jrick",
         "organizations_url" : "https://api.github.com/users/jrick/orgs",
         "received_events_url" : "https://api.github.com/users/jrick/received_events",
         "repos_url" : "https://api.github.com/users/jrick/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrick/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrick/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrick"
      }
   },
   {
      "body" : "Regtest does retarget just like mainnet, the only difference is that it starts off at a much lower difficulty.\r\n\r\nGiven that part of the purpose of that regtest is covering code to be used by mainnet, I think it's important that they do use the same code. I'm not very keen on changing the code for mainnet, though - even if it shouldn't make any difference, so I don't really know what the best solution is...",
      "created_at" : "2015-06-14T14:04:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6162#issuecomment-111828786",
      "id" : 111828786,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6162",
      "updated_at" : "2015-06-14T14:04:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111828786",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
