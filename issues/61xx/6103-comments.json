[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29596655"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29596655"
         }
      },
      "body" : "This entire file needs to be retabbed.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-04T16:01:02Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const CBlock &blk);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+  LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29596655",
      "id" : 29596655,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 39,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29596655",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/430315?v=3",
         "events_url" : "https://api.github.com/users/ajweiss/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajweiss/followers",
         "following_url" : "https://api.github.com/users/ajweiss/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajweiss/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajweiss",
         "id" : 430315,
         "login" : "ajweiss",
         "organizations_url" : "https://api.github.com/users/ajweiss/orgs",
         "received_events_url" : "https://api.github.com/users/ajweiss/received_events",
         "repos_url" : "https://api.github.com/users/ajweiss/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajweiss/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajweiss/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajweiss"
      }
   },
   {
      "body" : "Are you planning on supplying an RPC/regression test for this?",
      "created_at" : "2015-05-04T16:07:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-98767292",
      "id" : 98767292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-04T16:07:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98767292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/430315?v=3",
         "events_url" : "https://api.github.com/users/ajweiss/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajweiss/followers",
         "following_url" : "https://api.github.com/users/ajweiss/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajweiss/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajweiss",
         "id" : 430315,
         "login" : "ajweiss",
         "organizations_url" : "https://api.github.com/users/ajweiss/orgs",
         "received_events_url" : "https://api.github.com/users/ajweiss/received_events",
         "repos_url" : "https://api.github.com/users/ajweiss/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajweiss/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajweiss/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajweiss"
      }
   },
   {
      "body" : "That work was in previous PR. I can't see a use case where this is useful. Maybe @jmcorgan have something to say about that, otherwise I would remove this RPC call.",
      "created_at" : "2015-05-04T16:10:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-98768493",
      "id" : 98768493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-04T16:18:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98768493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29597688"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29597688"
         }
      },
      "body" : "As mentioned in one of the previous PRs, block acceptance is really not interesting or useful. It does not mean the block is part of the best chain, or even that it is valid. Use the NotifyBlockTip signal place, which indicates a new tip of the best chain was accepted.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-04T16:13:07Z",
      "diff_hunk" : "@@ -95,6 +97,12 @@ class CClientUIInterface\n \n     /** New block has been accepted */\n     boost::signals2::signal<void (const uint256& hash)> NotifyBlockTip;\n+\n+    /** New block has been accepted */\n+    boost::signals2::signal<void (const CBlock& block)> NotifyAcceptBlock;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29597688",
      "id" : 29597688,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 15,
      "path" : "src/ui_interface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29597688",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "As far as I know, no RPC tests for ZMQ support have yet been PR'd.\r\n\r\nI think there might be some confusion here.  When I say RPC tests, I mean the Python regression tests that live qa/rpc-tests tree.  They're pretty much only called RPC tests because of history and the primary way they interface with bitcoind.  They exercise and verify many large bits of functionality and are always useful!  Case in point, when REST support was originally added, it had some pretty serious bugs that weren't caught because there was no RPC test.  See PR #5379 for an example of how RPC tests for the REST interface were implemented.\r\n\r\nI suppose RPC tests could be PR'd separately, but I bet this will go in faster and with more enthusiasm if tests are added.",
      "created_at" : "2015-05-04T16:22:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-98771316",
      "id" : 98771316,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-04T16:22:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98771316",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/430315?v=3",
         "events_url" : "https://api.github.com/users/ajweiss/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajweiss/followers",
         "following_url" : "https://api.github.com/users/ajweiss/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajweiss/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajweiss",
         "id" : 430315,
         "login" : "ajweiss",
         "organizations_url" : "https://api.github.com/users/ajweiss/orgs",
         "received_events_url" : "https://api.github.com/users/ajweiss/received_events",
         "repos_url" : "https://api.github.com/users/ajweiss/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajweiss/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajweiss/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajweiss"
      }
   },
   {
      "body" : "@promag Nice that you have started recycle/update/rebase this!\r\nI have plans to test this during this week and therefore would be willing to write some RPC'like tests.",
      "created_at" : "2015-05-04T18:38:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-98808690",
      "id" : 98808690,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-04T18:38:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98808690",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29646858"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29646858"
         }
      },
      "body" : "L39: s/`LogPrint`/`LogPrintf` otherwise you start introducing a debug category with string identifier `\"ZMQ error: %s, errno=%s\\n\"`.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T06:52:56Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const CBlock &blk);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+  LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29646858",
      "id" : 29646858,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 39,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29646858",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29646980"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29646980"
         }
      },
      "body" : "this should be: `bitcoind -zmqpub=tcp://127.0.0.1:28332` (~~dash~~ colon instead slash before port)\r\nEdit: dash / colon",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T06:57:15Z",
      "diff_hunk" : "@@ -0,0 +1,145 @@\n+# Block and Transaction Broadcasting With ZeroMQ\n+\n+[ZeroMQ](http://zeromq.org/) is a lightweight wrapper around TCP\n+connections, inter-process communications, and shared-memory,\n+providing various message-oriented semantics such as publish/subcribe,\n+request/reply, and push/pull.\n+\n+The Bitcoin Core daemon can be configured to act as a trusted \"border\n+router\", implementing the bitcoin wire protocol and relay, making\n+consensus decisions, maintaining the local blockchain database,\n+broadcasting locally generated transactions into the network, and\n+providing a queryable RPC interface to interact on a polled basis for\n+requesting blockchain related data.  However, there exists only a\n+limited service to notify external software of events like the arrival\n+of new blocks or transactions.\n+\n+The ZeroMQ facility binds a \"publish\" port that broadcasts all newly\n+arrived *and validated* blocks and transactions to one or more\n+connected subscribers.  This read-only facility requires only the\n+connection of a corresponding ZeroMQ subscriber port in receiving\n+software; it is not authenticated nor is there any two-way protocol\n+involvement.\n+\n+In this fashion, external software can use a trusted Bitcoin Core\n+daemon to do the heavy lifting of communicating with the P2P network,\n+while still receiving network information asynchronously in real\n+time. As transactions and blocks arrive via the P2P network, Bitcoin\n+Core will apply all the validation and standardization rules to this\n+data, only passing along through ZeroMQ those items that pass.\n+\n+ZeroMQ sockets are self-connecting and self-healing; that is, connects\n+made between two endpoints will be automatically restored after an\n+outage, and either end may be freely started or stopped in any order.\n+\n+Because ZeroMQ is message oriented, subscribers receive transactions\n+and blocks all-at-once and do not need to implement any sort of\n+buffering or reassembly.\n+\n+## Prerequisites\n+\n+The ZeroMQ feature in Bitcoin Core uses only a very small part of the\n+ZeroMQ C API, and is thus compatible with any version of ZeroMQ\n+from 2.1 onward, including all versions in the 3.x and 4.x release\n+series.  Typically, it is packaged by distributions as something like\n+*libzmq-dev*.\n+\n+The C++ wrapper for ZeroMQ is *not* needed.\n+\n+## Enabling\n+\n+By default, the ZeroMQ port functionality is disabled.  Two steps are\n+required to enable--compiling in the ZeroMQ code, and configuring\n+runtime operation on the command-line or configuration file.\n+\n+    $ ./configure --enable-zmq (other options)\n+\n+This will produce a binary that is capable of providing the ZeroMQ\n+facility, but will not do so until also configured properly.\n+\n+## Configuration\n+\n+Currently, the ZeroMQ facility only needs to have the ZeroMQ endpoint\n+specified:\n+\n+    $ bitcoind -zmqpub=tcp://127.0.0.1/28332",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29646980",
      "id" : 29646980,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 65,
      "path" : "doc/zmq.md",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29646980",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29647082"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29647082"
         }
      },
      "body" : "Does it make sense to use the uiInterface `CClientUIInterface` as signaling layer for zmq? Or would it be better to introduce a custom signaling class/struct?",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T07:00:54Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const CBlock &blk);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+  LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+void ZMQInitialize(const std::string &endp)\n+{\n+  zmqContext = zmq_init(1);\n+  if (!zmqContext) {\n+    zmqError(\"Unable to initialize ZMQ context\");\n+    return;\n+  }\n+\n+  zmqPubSocket = zmq_socket(zmqContext, ZMQ_PUB);\n+  if (!zmqPubSocket) {\n+    zmqError(\"Unable to open ZMQ pub socket\");\n+    return;\n+  }\n+\n+  int rc = zmq_bind(zmqPubSocket, endp.c_str());\n+  if (rc != 0) {\n+    zmqError(\"Unable to bind ZMQ socket\");\n+    zmq_close(zmqPubSocket);\n+    zmqPubSocket = 0;\n+    return;\n+  }\n+\n+  uiInterface.NotifyAcceptBlock.connect(ZMQPublishBlock);\n+  uiInterface.NotifyRelayTx.connect(ZMQPublishTransaction);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29647082",
      "id" : 29647082,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 66,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29647082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29648007"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29648007"
         }
      },
      "body" : "What's the use case of `getzmqurl`? Why should someone need to get the ZMQ URL over RPC?",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T07:27:29Z",
      "diff_hunk" : "@@ -282,6 +282,9 @@ static const CRPCCommand vRPCCommands[] =\n     { \"network\",            \"getpeerinfo\",            &getpeerinfo,            true  },\n     { \"network\",            \"ping\",                   &ping,                   true  },\n \n+    /* ZMQ notification */\n+    { \"zmq\",                \"getzmqurl\",              &getzmqurl,              true  },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29648007",
      "id" : 29648007,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 5,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29648007",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29649282"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29649282"
         }
      },
      "body" : "I think this line can be removed. Also L112.\r\nSee also: https://github.com/bitcoin/bitcoin/blob/master/src/rpcblockchain.cpp#L308 and https://github.com/bitcoin/bitcoin/blob/master/src/rest.cpp#L182",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T07:59:11Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const CBlock &blk);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+  LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+void ZMQInitialize(const std::string &endp)\n+{\n+  zmqContext = zmq_init(1);\n+  if (!zmqContext) {\n+    zmqError(\"Unable to initialize ZMQ context\");\n+    return;\n+  }\n+\n+  zmqPubSocket = zmq_socket(zmqContext, ZMQ_PUB);\n+  if (!zmqPubSocket) {\n+    zmqError(\"Unable to open ZMQ pub socket\");\n+    return;\n+  }\n+\n+  int rc = zmq_bind(zmqPubSocket, endp.c_str());\n+  if (rc != 0) {\n+    zmqError(\"Unable to bind ZMQ socket\");\n+    zmq_close(zmqPubSocket);\n+    zmqPubSocket = 0;\n+    return;\n+  }\n+\n+  uiInterface.NotifyAcceptBlock.connect(ZMQPublishBlock);\n+  uiInterface.NotifyRelayTx.connect(ZMQPublishTransaction);\n+\n+  fZMQPub = true;\n+  LogPrint(\"zmq\", \"PUB socket listening at %s\\n\", endp);\n+}\n+\n+// Internal function to publish a serialized data stream on a given\n+// topic\n+//\n+// Note: assumes topic is a valid null terminated C string\n+static void zmqPublish(const char *topic, const CDataStream &ss)\n+{\n+  zmq_msg_t msg;\n+  const unsigned int topiclen = strlen(topic);\n+  const unsigned int msglen = ss.size() + topiclen;\n+\n+  // Initialize a new zmq_msg_t to hold serialized content\n+  int rc = zmq_msg_init_size(&msg, msglen);\n+  if (rc) {\n+    zmqError(\"Unable to initialize ZMQ msg\");\n+    return;\n+  }\n+\n+  // Copy topic and serialized TX into message buffer\n+  unsigned char *buf = (unsigned char *)zmq_msg_data(&msg);\n+  memcpy(&buf[0], topic, topiclen); // omits null trailer\n+  memcpy(&buf[topiclen], &ss[0], ss.size());\n+\n+  // Fire-and-forget\n+  rc = zmq_msg_send(&msg, zmqPubSocket, 0);\n+  if (rc == -1) {\n+    zmqError(\"Unable to send ZMQ message\");\n+    return;\n+  }\n+\n+  LogPrint(\"zmq\", \"Published to topic %s\\n\", topic);\n+}\n+\n+// Called after all transaction relay checks are completed\n+static void ZMQPublishTransaction(const CTransaction &tx)\n+{\n+  if (!zmqPubSocket)\n+    return;\n+\n+  // Serialize transaction\n+  CDataStream ss(SER_NETWORK, PROTOCOL_VERSION);\n+  ss.reserve(10000); // FIXME used defined constant\n+  ss << tx;\n+\n+  zmqPublish(\"TXN\", ss);\n+}\n+\n+// Called after all block checks completed and successfully added to\n+// disk index\n+static void ZMQPublishBlock(const CBlock &blk)\n+{\n+  if (!zmqPubSocket)\n+    return;\n+\n+  // Serialize block\n+  CDataStream ss(SER_NETWORK, PROTOCOL_VERSION);\n+  ss.reserve(1000000); // FIXME use defined constant",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29649282",
      "id" : 29649282,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 127,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29649282",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655661"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655661"
         }
      },
      "body" : "fixed in upcoming commit",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T09:53:56Z",
      "diff_hunk" : "@@ -0,0 +1,145 @@\n+# Block and Transaction Broadcasting With ZeroMQ\n+\n+[ZeroMQ](http://zeromq.org/) is a lightweight wrapper around TCP\n+connections, inter-process communications, and shared-memory,\n+providing various message-oriented semantics such as publish/subcribe,\n+request/reply, and push/pull.\n+\n+The Bitcoin Core daemon can be configured to act as a trusted \"border\n+router\", implementing the bitcoin wire protocol and relay, making\n+consensus decisions, maintaining the local blockchain database,\n+broadcasting locally generated transactions into the network, and\n+providing a queryable RPC interface to interact on a polled basis for\n+requesting blockchain related data.  However, there exists only a\n+limited service to notify external software of events like the arrival\n+of new blocks or transactions.\n+\n+The ZeroMQ facility binds a \"publish\" port that broadcasts all newly\n+arrived *and validated* blocks and transactions to one or more\n+connected subscribers.  This read-only facility requires only the\n+connection of a corresponding ZeroMQ subscriber port in receiving\n+software; it is not authenticated nor is there any two-way protocol\n+involvement.\n+\n+In this fashion, external software can use a trusted Bitcoin Core\n+daemon to do the heavy lifting of communicating with the P2P network,\n+while still receiving network information asynchronously in real\n+time. As transactions and blocks arrive via the P2P network, Bitcoin\n+Core will apply all the validation and standardization rules to this\n+data, only passing along through ZeroMQ those items that pass.\n+\n+ZeroMQ sockets are self-connecting and self-healing; that is, connects\n+made between two endpoints will be automatically restored after an\n+outage, and either end may be freely started or stopped in any order.\n+\n+Because ZeroMQ is message oriented, subscribers receive transactions\n+and blocks all-at-once and do not need to implement any sort of\n+buffering or reassembly.\n+\n+## Prerequisites\n+\n+The ZeroMQ feature in Bitcoin Core uses only a very small part of the\n+ZeroMQ C API, and is thus compatible with any version of ZeroMQ\n+from 2.1 onward, including all versions in the 3.x and 4.x release\n+series.  Typically, it is packaged by distributions as something like\n+*libzmq-dev*.\n+\n+The C++ wrapper for ZeroMQ is *not* needed.\n+\n+## Enabling\n+\n+By default, the ZeroMQ port functionality is disabled.  Two steps are\n+required to enable--compiling in the ZeroMQ code, and configuring\n+runtime operation on the command-line or configuration file.\n+\n+    $ ./configure --enable-zmq (other options)\n+\n+This will produce a binary that is capable of providing the ZeroMQ\n+facility, but will not do so until also configured properly.\n+\n+## Configuration\n+\n+Currently, the ZeroMQ facility only needs to have the ZeroMQ endpoint\n+specified:\n+\n+    $ bitcoind -zmqpub=tcp://127.0.0.1/28332",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655661",
      "id" : 29655661,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 65,
      "path" : "doc/zmq.md",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655725"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655725"
         }
      },
      "body" : "I've changed this to use zeromq multipart messages. Changed in upcoming commit",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T09:54:53Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const CBlock &blk);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+  LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+void ZMQInitialize(const std::string &endp)\n+{\n+  zmqContext = zmq_init(1);\n+  if (!zmqContext) {\n+    zmqError(\"Unable to initialize ZMQ context\");\n+    return;\n+  }\n+\n+  zmqPubSocket = zmq_socket(zmqContext, ZMQ_PUB);\n+  if (!zmqPubSocket) {\n+    zmqError(\"Unable to open ZMQ pub socket\");\n+    return;\n+  }\n+\n+  int rc = zmq_bind(zmqPubSocket, endp.c_str());\n+  if (rc != 0) {\n+    zmqError(\"Unable to bind ZMQ socket\");\n+    zmq_close(zmqPubSocket);\n+    zmqPubSocket = 0;\n+    return;\n+  }\n+\n+  uiInterface.NotifyAcceptBlock.connect(ZMQPublishBlock);\n+  uiInterface.NotifyRelayTx.connect(ZMQPublishTransaction);\n+\n+  fZMQPub = true;\n+  LogPrint(\"zmq\", \"PUB socket listening at %s\\n\", endp);\n+}\n+\n+// Internal function to publish a serialized data stream on a given\n+// topic\n+//\n+// Note: assumes topic is a valid null terminated C string\n+static void zmqPublish(const char *topic, const CDataStream &ss)\n+{\n+  zmq_msg_t msg;\n+  const unsigned int topiclen = strlen(topic);\n+  const unsigned int msglen = ss.size() + topiclen;\n+\n+  // Initialize a new zmq_msg_t to hold serialized content\n+  int rc = zmq_msg_init_size(&msg, msglen);\n+  if (rc) {\n+    zmqError(\"Unable to initialize ZMQ msg\");\n+    return;\n+  }\n+\n+  // Copy topic and serialized TX into message buffer\n+  unsigned char *buf = (unsigned char *)zmq_msg_data(&msg);\n+  memcpy(&buf[0], topic, topiclen); // omits null trailer\n+  memcpy(&buf[topiclen], &ss[0], ss.size());\n+\n+  // Fire-and-forget\n+  rc = zmq_msg_send(&msg, zmqPubSocket, 0);\n+  if (rc == -1) {\n+    zmqError(\"Unable to send ZMQ message\");\n+    return;\n+  }\n+\n+  LogPrint(\"zmq\", \"Published to topic %s\\n\", topic);\n+}\n+\n+// Called after all transaction relay checks are completed\n+static void ZMQPublishTransaction(const CTransaction &tx)\n+{\n+  if (!zmqPubSocket)\n+    return;\n+\n+  // Serialize transaction\n+  CDataStream ss(SER_NETWORK, PROTOCOL_VERSION);\n+  ss.reserve(10000); // FIXME used defined constant\n+  ss << tx;\n+\n+  zmqPublish(\"TXN\", ss);\n+}\n+\n+// Called after all block checks completed and successfully added to\n+// disk index\n+static void ZMQPublishBlock(const CBlock &blk)\n+{\n+  if (!zmqPubSocket)\n+    return;\n+\n+  // Serialize block\n+  CDataStream ss(SER_NETWORK, PROTOCOL_VERSION);\n+  ss.reserve(1000000); // FIXME use defined constant",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655725",
      "id" : 29655725,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 127,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655725",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655732"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655732"
         }
      },
      "body" : "Removed in upcoming commit",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T09:55:00Z",
      "diff_hunk" : "@@ -282,6 +282,9 @@ static const CRPCCommand vRPCCommands[] =\n     { \"network\",            \"getpeerinfo\",            &getpeerinfo,            true  },\n     { \"network\",            \"ping\",                   &ping,                   true  },\n \n+    /* ZMQ notification */\n+    { \"zmq\",                \"getzmqurl\",              &getzmqurl,              true  },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655732",
      "id" : 29655732,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 5,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655732",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655767"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655767"
         }
      },
      "body" : "I believe this discussion should happen in a different PR.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T09:55:43Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const CBlock &blk);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+  LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+void ZMQInitialize(const std::string &endp)\n+{\n+  zmqContext = zmq_init(1);\n+  if (!zmqContext) {\n+    zmqError(\"Unable to initialize ZMQ context\");\n+    return;\n+  }\n+\n+  zmqPubSocket = zmq_socket(zmqContext, ZMQ_PUB);\n+  if (!zmqPubSocket) {\n+    zmqError(\"Unable to open ZMQ pub socket\");\n+    return;\n+  }\n+\n+  int rc = zmq_bind(zmqPubSocket, endp.c_str());\n+  if (rc != 0) {\n+    zmqError(\"Unable to bind ZMQ socket\");\n+    zmq_close(zmqPubSocket);\n+    zmqPubSocket = 0;\n+    return;\n+  }\n+\n+  uiInterface.NotifyAcceptBlock.connect(ZMQPublishBlock);\n+  uiInterface.NotifyRelayTx.connect(ZMQPublishTransaction);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655767",
      "id" : 29655767,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 66,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655767",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655781"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655781"
         }
      },
      "body" : "Fixed in upcoming commit",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T09:56:01Z",
      "diff_hunk" : "@@ -95,6 +97,12 @@ class CClientUIInterface\n \n     /** New block has been accepted */\n     boost::signals2::signal<void (const uint256& hash)> NotifyBlockTip;\n+\n+    /** New block has been accepted */\n+    boost::signals2::signal<void (const CBlock& block)> NotifyAcceptBlock;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655781",
      "id" : 29655781,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 15,
      "path" : "src/ui_interface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655781",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655814"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655814"
         }
      },
      "body" : "Fixed in upcoming commit",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T09:56:36Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const CBlock &blk);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+  LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655814",
      "id" : 29655814,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 39,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655814",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29657727"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29657727"
         }
      },
      "body" : "I believe this is the right way of getting a block.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T10:29:54Z",
      "diff_hunk" : "@@ -0,0 +1,183 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"main.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const uint256 &hash);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+    LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+void ZMQInitialize(const std::string &endp)\n+{\n+    zmqContext = zmq_init(1);\n+    if (!zmqContext) {\n+        zmqError(\"Unable to initialize ZMQ context\");\n+        return;\n+    }\n+\n+    zmqPubSocket = zmq_socket(zmqContext, ZMQ_PUB);\n+    if (!zmqPubSocket) {\n+        zmqError(\"Unable to open ZMQ pub socket\");\n+        return;\n+    }\n+\n+    int rc = zmq_bind(zmqPubSocket, endp.c_str());\n+    if (rc != 0) {\n+        zmqError(\"Unable to bind ZMQ socket\");\n+        zmq_close(zmqPubSocket);\n+        zmqPubSocket = 0;\n+        return;\n+    }\n+\n+    uiInterface.NotifyBlockTip.connect(ZMQPublishBlock);\n+    uiInterface.NotifyRelayTx.connect(ZMQPublishTransaction);\n+\n+    fZMQPub = true;\n+    LogPrint(\"zmq\", \"PUB socket listening at %s\\n\", endp);\n+}\n+\n+// Internal function to publish a serialized data stream on a given\n+// topic\n+//\n+// Note: assumes topic is a valid null terminated C string\n+static void zmqPublish(const char *topic, const CDataStream &ss)\n+{\n+    zmq_msg_t msg;\n+    const unsigned int topiclen = strlen(topic);\n+    const unsigned int msglen = ss.size() + topiclen;\n+\n+    // Initialize a new zmq_msg_t to hold serialized content\n+    int rc = zmq_msg_init_size(&msg, msglen);\n+    if (rc) {\n+        zmqError(\"Unable to initialize ZMQ msg\");\n+        return;\n+    }\n+\n+    // Copy topic and serialized TX into message buffer\n+    unsigned char *buf = (unsigned char *)zmq_msg_data(&msg);\n+    memcpy(&buf[0], topic, topiclen); // omits null trailer\n+    memcpy(&buf[topiclen], &ss[0], ss.size());\n+\n+    // Fire-and-forget\n+    rc = zmq_msg_send(&msg, zmqPubSocket, 0);\n+    if (rc == -1) {\n+        zmqError(\"Unable to send ZMQ message\");\n+        return;\n+    }\n+\n+    LogPrint(\"zmq\", \"Published to topic %s\\n\", topic);\n+}\n+\n+// Called after all transaction relay checks are completed\n+static void ZMQPublishTransaction(const CTransaction &tx)\n+{\n+    if (!zmqPubSocket)\n+        return;\n+\n+    // Serialize transaction\n+    CDataStream ss(SER_NETWORK, PROTOCOL_VERSION);\n+    ss << tx;\n+\n+    zmqPublish(\"TXN\", ss);\n+}\n+\n+// Called after all block checks completed and successfully added to\n+// disk index\n+static void ZMQPublishBlock(const uint256 &hash)\n+{\n+    if (!zmqPubSocket)\n+        return;\n+\n+    CBlock blk;\n+    {\n+        LOCK(cs_main);\n+    \n+        CBlockIndex* pblockindex = mapBlockIndex[hash];\n+        if(!ReadBlockFromDisk(blk, pblockindex))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29657727",
      "id" : 29657727,
      "original_commit_id" : "8e9ff5c88de98aeb2e7cc0310f40693253d5f607",
      "original_position" : 130,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29657727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "I'm planning to add the option -zmqformat=raw|json. This way a subscriber doesn't need to rely on 3rd libs to process the messages. What do you think?\r\nPending on #6108",
      "created_at" : "2015-05-05T10:37:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99028978",
      "id" : 99028978,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T11:14:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99028978",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29660299"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29660299"
         }
      },
      "body" : "I didn't say it has to be removed. I just don't see a usecase for this. Maybe @jgarzik can roll this up?",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T11:21:33Z",
      "diff_hunk" : "@@ -282,6 +282,9 @@ static const CRPCCommand vRPCCommands[] =\n     { \"network\",            \"getpeerinfo\",            &getpeerinfo,            true  },\n     { \"network\",            \"ping\",                   &ping,                   true  },\n \n+    /* ZMQ notification */\n+    { \"zmq\",                \"getzmqurl\",              &getzmqurl,              true  },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29660299",
      "id" : 29660299,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 5,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29660299",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29660573"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29660573"
         }
      },
      "body" : "Is the reason why the `#ifdefs` are here instead of wrapping the code-part in `init.cpp` to lower the #ifdef in `init.cpp`? Maybe also something for @jgarzik to answer.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T11:28:05Z",
      "diff_hunk" : "@@ -0,0 +1,26 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_ZMQPORTS_H\n+#define BITCOIN_ZMQPORTS_H\n+\n+#if defined(HAVE_CONFIG_H)\n+#include \"config/bitcoin-config.h\"\n+#endif\n+\n+#include <string>\n+\n+// Global state\n+extern bool fZMQPub;\n+\n+#if ENABLE_ZMQ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29660573",
      "id" : 29660573,
      "original_commit_id" : "a268d1cfc0a5e5631b8e60723155fbaa79fcc9de",
      "original_position" : 18,
      "path" : "src/zmqports.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29660573",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661012"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661012"
         }
      },
      "body" : "FYI https://github.com/bitcoin/bitcoin/pull/4594#issuecomment-50352710",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T11:37:06Z",
      "diff_hunk" : "@@ -0,0 +1,26 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_ZMQPORTS_H\n+#define BITCOIN_ZMQPORTS_H\n+\n+#if defined(HAVE_CONFIG_H)\n+#include \"config/bitcoin-config.h\"\n+#endif\n+\n+#include <string>\n+\n+// Global state\n+extern bool fZMQPub;\n+\n+#if ENABLE_ZMQ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661012",
      "id" : 29661012,
      "original_commit_id" : "a268d1cfc0a5e5631b8e60723155fbaa79fcc9de",
      "original_position" : 18,
      "path" : "src/zmqports.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661012",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Would be nice if you could cherry-pick / pull-in this RPC/ZMQ test case:\r\nhttps://github.com/jonasschnelli/bitcoin/commit/91334e70ee5b2713ebbb7d5dbd6a5a29936aba66",
      "created_at" : "2015-05-05T11:40:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99052323",
      "id" : 99052323,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T11:40:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99052323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661290"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661290"
         }
      },
      "body" : "@promag: Thanks. Yes this makes sense.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T11:42:19Z",
      "diff_hunk" : "@@ -0,0 +1,26 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_ZMQPORTS_H\n+#define BITCOIN_ZMQPORTS_H\n+\n+#if defined(HAVE_CONFIG_H)\n+#include \"config/bitcoin-config.h\"\n+#endif\n+\n+#include <string>\n+\n+// Global state\n+extern bool fZMQPub;\n+\n+#if ENABLE_ZMQ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661290",
      "id" : 29661290,
      "original_commit_id" : "a268d1cfc0a5e5631b8e60723155fbaa79fcc9de",
      "original_position" : 18,
      "path" : "src/zmqports.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661313"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661313"
         }
      },
      "body" : "Or maybe something for @jmcorgan",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T11:42:49Z",
      "diff_hunk" : "@@ -282,6 +282,9 @@ static const CRPCCommand vRPCCommands[] =\n     { \"network\",            \"getpeerinfo\",            &getpeerinfo,            true  },\n     { \"network\",            \"ping\",                   &ping,                   true  },\n \n+    /* ZMQ notification */\n+    { \"zmq\",                \"getzmqurl\",              &getzmqurl,              true  },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661313",
      "id" : 29661313,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 5,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661529"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661529"
         }
      },
      "body" : "typo: should be `ZMQInitialize(mapArgs[\"-zmqpub\"]);` (mind the dash)",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T11:47:33Z",
      "diff_hunk" : "@@ -1022,6 +1029,11 @@ bool AppInit2(boost::thread_group& threadGroup)\n     BOOST_FOREACH(string strDest, mapMultiArgs[\"-seednode\"])\n         AddOneShot(strDest);\n \n+    if (mapArgs.count(\"-zmqpub\"))\n+    {\n+        ZMQInitialize(mapArgs[\"zmqpub\"]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661529",
      "id" : 29661529,
      "original_commit_id" : "a268d1cfc0a5e5631b8e60723155fbaa79fcc9de",
      "original_position" : 34,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661529",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@promag: I would not add JSON support and keep ZMQ as clean and low-level as possible. Keeping it bin only can make things faster and with JSON there is always a risks of things get handled different during enc-/decoding of JSON streams depending on the library you use.",
      "created_at" : "2015-05-05T12:03:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99060018",
      "id" : 99060018,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T12:03:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99060018",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Tested reviewed leak-checked ACK.\r\nnits: usage of `uiInterface` as \"signal layer\"",
      "created_at" : "2015-05-05T12:07:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99061930",
      "id" : 99061930,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T12:07:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99061930",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29663747"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29663747"
         }
      },
      "body" : "nit: L128 has whitespace.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T12:32:00Z",
      "diff_hunk" : "@@ -0,0 +1,164 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"main.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const uint256 &hash);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+    LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+void ZMQInitialize(const std::string &endp)\n+{\n+    zmqContext = zmq_init(1);\n+    if (!zmqContext) {\n+        zmqError(\"Unable to initialize ZMQ context\");\n+        return;\n+    }\n+\n+    zmqPubSocket = zmq_socket(zmqContext, ZMQ_PUB);\n+    if (!zmqPubSocket) {\n+        zmqError(\"Unable to open ZMQ pub socket\");\n+        return;\n+    }\n+\n+    int rc = zmq_bind(zmqPubSocket, endp.c_str());\n+    if (rc != 0) {\n+        zmqError(\"Unable to bind ZMQ socket\");\n+        zmq_close(zmqPubSocket);\n+        zmqPubSocket = 0;\n+        return;\n+    }\n+\n+    uiInterface.NotifyBlockTip.connect(ZMQPublishBlock);\n+    uiInterface.NotifyRelayTx.connect(ZMQPublishTransaction);\n+\n+    fZMQPub = true;\n+    LogPrint(\"zmq\", \"PUB socket listening at %s\\n\", endp);\n+}\n+\n+// Internal function to publish a serialized data stream on a given\n+// topic\n+//\n+// Note: assumes topic is a valid null terminated C string\n+static void zmqPublish(const char *topic, const CDataStream &ss)\n+{\n+    zmq_msg_t msg;\n+    const unsigned int topiclen = strlen(topic);\n+    const unsigned int msglen = ss.size() + topiclen;\n+\n+    // Initialize a new zmq_msg_t to hold serialized content\n+    int rc = zmq_msg_init_size(&msg, msglen);\n+    if (rc) {\n+        zmqError(\"Unable to initialize ZMQ msg\");\n+        return;\n+    }\n+\n+    // Copy topic and serialized TX into message buffer\n+    unsigned char *buf = (unsigned char *)zmq_msg_data(&msg);\n+    memcpy(&buf[0], topic, topiclen); // omits null trailer\n+    memcpy(&buf[topiclen], &ss[0], ss.size());\n+\n+    // Fire-and-forget\n+    rc = zmq_msg_send(&msg, zmqPubSocket, 0);\n+    if (rc == -1) {\n+        zmqError(\"Unable to send ZMQ message\");\n+        return;\n+    }\n+\n+    LogPrint(\"zmq\", \"Published to topic %s\\n\", topic);\n+}\n+\n+// Called after all transaction relay checks are completed\n+static void ZMQPublishTransaction(const CTransaction &tx)\n+{\n+    if (!zmqPubSocket)\n+        return;\n+\n+    // Serialize transaction\n+    CDataStream ss(SER_NETWORK, PROTOCOL_VERSION);\n+    ss << tx;\n+\n+    zmqPublish(\"TXN\", ss);\n+}\n+\n+// Called after all block checks completed and successfully added to\n+// disk index\n+static void ZMQPublishBlock(const uint256 &hash)\n+{\n+    if (!zmqPubSocket)\n+        return;\n+\n+    CBlock blk;\n+    {\n+        LOCK(cs_main);\n+    ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29663747",
      "id" : 29663747,
      "original_commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "original_position" : 128,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29663747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "nit:\r\nsignaling disconnect is missing\r\n\r\n```diff\r\ndiff --git a/src/zmqports.cpp b/src/zmqports.cpp\r\nindex d083292..bd1229c 100644\r\n--- a/src/zmqports.cpp\r\n+++ b/src/zmqports.cpp\r\n@@ -155,6 +155,9 @@ void ZMQShutdown()\r\n \r\n         zmq_ctx_destroy(zmqContext);\r\n         zmqContext = 0;\r\n+\r\n+        uiInterface.NotifyBlockTip.disconnect(ZMQPublishBlock);\r\n+        uiInterface.NotifyRelayTx.disconnect(ZMQPublishTransaction);\r\n     }\r\n \r\n     fZMQPub = false;\r\n```",
      "created_at" : "2015-05-05T12:39:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99067391",
      "id" : 99067391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T12:39:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99067391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli Regarding the output formats, I don't think having JSON is that bad, it is just an option.\r\nActually I think we could support 3 formats for now:\r\n - network: currently supported\r\n - json: needs BlockToUni to convert to JSON (similar to RPC getblock)\r\n - hash: just send the block hash or txid (this allows a subscriber to queue the notification to process it later)",
      "created_at" : "2015-05-05T13:15:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99074984",
      "id" : 99074984,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:31:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99074984",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag I agree with 1 (p2p) and 3 (hash). IMO the ZMQ interface is a push/notify interface (for now). If someone like to get JSON output he could do a RPC request with received data. Adding JSON format over ZMQ level would just encourage user \"to go the wrong way\".\r\nAdding a way of only receiving hashes over ZMQ would be good.\r\nBut i'm ready to hear other opinions.",
      "created_at" : "2015-05-05T13:21:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99076113",
      "id" : 99076113,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:21:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99076113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Specifically for blocks, I'm not sure that pushing full blocks is even useful, unless we make it push all new blocks (including intermediary reorged ones). The interesting information is \"there is a new block chain tip, and this is it\".",
      "created_at" : "2015-05-05T13:23:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99076584",
      "id" : 99076584,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:23:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99076584",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa consider the following use case: a subscriber wants to know if there are transactions (in the new block chain tip) with outputs targeting a set of addresses.",
      "created_at" : "2015-05-05T13:27:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99077359",
      "id" : 99077359,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:27:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99077359",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "I'm not sure if publishing a block of 20MB is problematic.",
      "created_at" : "2015-05-05T13:37:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99079734",
      "id" : 99079734,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:37:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99079734",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "That use case would not be covered, as the current code only reports the\nnew tip, not potential intermediate blocks that were connected as part of a\nreorganization.\n\nA possibility is reporting all new chain blocks, but what if this (due to a\nfork bug, perhaps) ends up reporting 100s of megabytes?\n",
      "created_at" : "2015-05-05T13:52:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99083743",
      "id" : 99083743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:52:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99083743",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa right, so publishing the new tip hash and having the consumer walk the block chain would be more appropriate/secure.",
      "created_at" : "2015-05-05T13:54:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99084210",
      "id" : 99084210,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:54:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99084210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "For now i see the ZMQ extension as a notification-only one-way interface. I guess it's more optimized if a user gets informed about a new block **hash** (or new mempool tx **hash**) and then he decides if he likes to load the block with or without tx details over REST or RPC.",
      "created_at" : "2015-05-05T13:59:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99085599",
      "id" : 99085599,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99085599",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Agree on network binary format and hash format? Other publish strategies can be discussed later after this PR.",
      "created_at" : "2015-05-05T14:04:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99086882",
      "id" : 99086882,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T14:04:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99086882",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag: i think you need to get rid of commit 454285518915d73e55674cf702bd0372a2da266e",
      "created_at" : "2015-05-05T14:05:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99087164",
      "id" : 99087164,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T14:05:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99087164",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli rebased\r\nmissing updated doc and test to reflect multipart message",
      "created_at" : "2015-05-05T14:31:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99095760",
      "id" : 99095760,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T14:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99095760",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Should we use CValidationInterface instead of CClientUIInterface?",
      "created_at" : "2015-05-05T14:39:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99098817",
      "id" : 99098817,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T14:39:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99098817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Yes.\n",
      "created_at" : "2015-05-05T14:45:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99100905",
      "id" : 99100905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T14:45:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99100905",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Pending questions:\r\n 1. support network binary format and hash format?\r\n 2. class name CZMQPublisher : public CValidationInterface?\r\n 3. use CValidationInterface::SetBestChain instead of CClientUIInterface::NotifyBlockTip?",
      "created_at" : "2015-05-05T15:57:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99123650",
      "id" : 99123650,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T15:57:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99123650",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "1. Hash is enough for me. Binary makes sense if we make sure the full set of newly accepted blocks is announced.\r\n\r\n2. Sounds good.\r\n\r\n3. SetBestChain won't work, as it is only called after the best chain on disk is changed (which is infrequently). I'll write a patch to add the signals you need to CValidationInterface.",
      "created_at" : "2015-05-05T16:00:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99124284",
      "id" : 99124284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T16:00:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99124284",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa At the moment CValidationInterface is very related to CWallet, but it shouldn't right?",
      "created_at" : "2015-05-05T16:03:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99125552",
      "id" : 99125552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T16:03:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99125552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag It used to be called CWalletInterface. We renamed it because it shouldn't be used exclusively for wallets.",
      "created_at" : "2015-05-05T16:03:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99125730",
      "id" : 99125730,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T16:03:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99125730",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29690327"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29690327"
         }
      },
      "body" : "waiting @sipa patch, for now assuming UpdatedBlockTip exists in CValidationInterface.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T17:12:25Z",
      "diff_hunk" : "@@ -0,0 +1,39 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_ZMQPORTS_H\n+#define BITCOIN_ZMQPORTS_H\n+\n+#include \"validationinterface.h\"\n+#include <string>\n+\n+class CZMQPublisher : public CValidationInterface\n+{\n+public:\n+    enum Format\n+    {\n+        HashFormat,\n+        NetworkFormat\n+    };\n+  \n+    CZMQPublisher();\n+    virtual ~CZMQPublisher();\n+\n+    void Initialize(const std::string &endpoint, Format format);\n+    void Shutdown();\n+\n+protected: // CValidationInterface\n+    void SyncTransaction(const CTransaction &tx, const CBlock *pblock);\n+    void UpdatedBlockTip(const CBlock &block);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29690327",
      "id" : 29690327,
      "original_commit_id" : "12cefe533ed2d9a98bac8a8084bd1a46fa765f59",
      "original_position" : 29,
      "path" : "src/zmqports.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29690327",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29690371"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29690371"
         }
      },
      "body" : "Not sure if this is OK or NETWORK_FORMAT. Same for HashFormat.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T17:13:06Z",
      "diff_hunk" : "@@ -0,0 +1,39 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_ZMQPORTS_H\n+#define BITCOIN_ZMQPORTS_H\n+\n+#include \"validationinterface.h\"\n+#include <string>\n+\n+class CZMQPublisher : public CValidationInterface\n+{\n+public:\n+    enum Format\n+    {\n+        HashFormat,\n+        NetworkFormat",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29690371",
      "id" : 29690371,
      "original_commit_id" : "12cefe533ed2d9a98bac8a8084bd1a46fa765f59",
      "original_position" : 18,
      "path" : "src/zmqports.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29690371",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29690427"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29690427"
         }
      },
      "body" : "@jonasschnelli is this OK?",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T17:13:45Z",
      "diff_hunk" : "@@ -0,0 +1,195 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if defined(HAVE_CONFIG_H)\n+#include \"config/bitcoin-config.h\"\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"main.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+\n+// Internal utility functions\n+static void zmqError(const char *str)\n+{\n+    LogPrint(\"zmq\", \"Error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+#endif\n+\n+CZMQPublisher::CZMQPublisher()\n+    : pcontext(NULL)\n+    , psocket(NULL)\n+    , format(HashFormat)\n+{\n+}\n+\n+CZMQPublisher::~CZMQPublisher()\n+{\n+    // ensure Shutdown if Initialize is called\n+    assert(!pcontext);\n+    assert(!psocket);\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+void CZMQPublisher::Initialize(const std::string &endpoint, CZMQPublisher::Format fmt)\n+{\n+#if ENABLE_ZMQ\n+    assert(!pcontext);\n+    assert(!psocket);\n+\n+    pcontext = zmq_init(1);\n+    if (!pcontext)\n+    {\n+        zmqError(\"Unable to initialize ZMQ context\");\n+        return;\n+    }\n+\n+    psocket = zmq_socket(pcontext, ZMQ_PUB);\n+    if (!psocket)\n+    {\n+        zmqError(\"Unable to open ZMQ pub socket\");\n+        zmq_ctx_destroy(pcontext);\n+        pcontext = 0;\n+        return;\n+    }\n+\n+    int rc = zmq_bind(psocket, endpoint.c_str());\n+    if (rc != 0) \n+    {\n+        zmqError(\"Unable to bind ZMQ socket\");\n+        zmq_close(psocket);\n+        zmq_ctx_destroy(pcontext);\n+        psocket = 0;\n+        pcontext = 0;\n+        return;\n+    }\n+\n+    format = fmt;\n+    LogPrint(\"zmq\", \"PUB socket listening at %s\\n\", endpoint);\n+#endif\n+}\n+\n+// Called during shutdown sequence\n+void CZMQPublisher::Shutdown()\n+{\n+#if ENABLE_ZMQ\n+    if(psocket)\n+    {\n+        int linger = 0;\n+        zmq_setsockopt(psocket, ZMQ_LINGER, &linger, sizeof(linger));\n+        zmq_close(psocket);\n+        psocket = 0;\n+\n+        zmq_ctx_destroy(pcontext);\n+        pcontext = 0;\n+    }\n+#endif\n+}\n+\n+\n+// Internal function to pack a zmq_msg_t and send it\n+// Note: assumes topic is a valid null terminated C string\n+int CZMQPublisher::Publish(const void* data, size_t size, int flags)\n+{\n+#if ENABLE_ZMQ\n+    zmq_msg_t msg;\n+    \n+    int rc = zmq_msg_init_size(&msg, size);\n+    if (rc != 0)\n+    {\n+        zmqError(\"Unable to initialize ZMQ msg\");\n+        return -1;\n+    }\n+\n+    void *buf = zmq_msg_data(&msg);\n+    memcpy(buf, data, size);\n+\n+    rc = zmq_msg_send(&msg, psocket, flags);\n+    if (rc == -1)\n+    {\n+        zmqError(\"Unable to send ZMQ msg\");\n+        return -1;\n+    }\n+\n+    zmq_msg_close(&msg);\n+#endif\n+    return 0;\n+}\n+\n+void CZMQPublisher::SyncTransaction(const CTransaction &tx, const CBlock *pblock)\n+{\n+#if ENABLE_ZMQ\n+    if (!psocket)\n+        return;\n+\n+    if (format==HashFormat)\n+    {\n+        uint256 hash = tx.GetHash();\n+        int rc = Publish(\"TXN\", 3, ZMQ_SNDMORE);\n+        if (rc==0)\n+            Publish(hash.begin(), hash.size(), 0);\n+    }\n+    else if (format==NetworkFormat)\n+    {\n+        // Serialize transaction\n+        CDataStream ss(SER_NETWORK, PROTOCOL_VERSION);\n+        ss << tx;\n+    \n+        // Send multipart message\n+        int rc = Publish(\"TXN\", 3, ZMQ_SNDMORE);\n+        if (rc==0)\n+            Publish(&ss[0], ss.size(), 0);\n+    }\n+#endif\n+}\n+\n+// Called after the block chain tip changed\n+void CZMQPublisher::UpdatedBlockTip(const CBlock &block)\n+{\n+    if (!psocket)\n+        return;\n+\n+    if (format==HashFormat)\n+    {\n+        uint256 hash = block.GetHash();\n+\n+        // Send multipart message\n+        int rc = Publish(\"BLK\", 3, ZMQ_SNDMORE);\n+        if (rc==0)\n+            Publish(hash.begin(), hash.size(), 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29690427",
      "id" : 29690427,
      "original_commit_id" : "12cefe533ed2d9a98bac8a8084bd1a46fa765f59",
      "original_position" : 171,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29690427",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Later will address https://github.com/bitcoin/bitcoin/pull/5303#discussion-diff-26264618",
      "created_at" : "2015-05-05T17:44:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99155906",
      "id" : 99155906,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T17:45:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99155906",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29699244"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29699244"
         }
      },
      "body" : "LGTM.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-05T18:41:59Z",
      "diff_hunk" : "@@ -0,0 +1,195 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if defined(HAVE_CONFIG_H)\n+#include \"config/bitcoin-config.h\"\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"main.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+\n+// Internal utility functions\n+static void zmqError(const char *str)\n+{\n+    LogPrint(\"zmq\", \"Error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+#endif\n+\n+CZMQPublisher::CZMQPublisher()\n+    : pcontext(NULL)\n+    , psocket(NULL)\n+    , format(HashFormat)\n+{\n+}\n+\n+CZMQPublisher::~CZMQPublisher()\n+{\n+    // ensure Shutdown if Initialize is called\n+    assert(!pcontext);\n+    assert(!psocket);\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+void CZMQPublisher::Initialize(const std::string &endpoint, CZMQPublisher::Format fmt)\n+{\n+#if ENABLE_ZMQ\n+    assert(!pcontext);\n+    assert(!psocket);\n+\n+    pcontext = zmq_init(1);\n+    if (!pcontext)\n+    {\n+        zmqError(\"Unable to initialize ZMQ context\");\n+        return;\n+    }\n+\n+    psocket = zmq_socket(pcontext, ZMQ_PUB);\n+    if (!psocket)\n+    {\n+        zmqError(\"Unable to open ZMQ pub socket\");\n+        zmq_ctx_destroy(pcontext);\n+        pcontext = 0;\n+        return;\n+    }\n+\n+    int rc = zmq_bind(psocket, endpoint.c_str());\n+    if (rc != 0) \n+    {\n+        zmqError(\"Unable to bind ZMQ socket\");\n+        zmq_close(psocket);\n+        zmq_ctx_destroy(pcontext);\n+        psocket = 0;\n+        pcontext = 0;\n+        return;\n+    }\n+\n+    format = fmt;\n+    LogPrint(\"zmq\", \"PUB socket listening at %s\\n\", endpoint);\n+#endif\n+}\n+\n+// Called during shutdown sequence\n+void CZMQPublisher::Shutdown()\n+{\n+#if ENABLE_ZMQ\n+    if(psocket)\n+    {\n+        int linger = 0;\n+        zmq_setsockopt(psocket, ZMQ_LINGER, &linger, sizeof(linger));\n+        zmq_close(psocket);\n+        psocket = 0;\n+\n+        zmq_ctx_destroy(pcontext);\n+        pcontext = 0;\n+    }\n+#endif\n+}\n+\n+\n+// Internal function to pack a zmq_msg_t and send it\n+// Note: assumes topic is a valid null terminated C string\n+int CZMQPublisher::Publish(const void* data, size_t size, int flags)\n+{\n+#if ENABLE_ZMQ\n+    zmq_msg_t msg;\n+    \n+    int rc = zmq_msg_init_size(&msg, size);\n+    if (rc != 0)\n+    {\n+        zmqError(\"Unable to initialize ZMQ msg\");\n+        return -1;\n+    }\n+\n+    void *buf = zmq_msg_data(&msg);\n+    memcpy(buf, data, size);\n+\n+    rc = zmq_msg_send(&msg, psocket, flags);\n+    if (rc == -1)\n+    {\n+        zmqError(\"Unable to send ZMQ msg\");\n+        return -1;\n+    }\n+\n+    zmq_msg_close(&msg);\n+#endif\n+    return 0;\n+}\n+\n+void CZMQPublisher::SyncTransaction(const CTransaction &tx, const CBlock *pblock)\n+{\n+#if ENABLE_ZMQ\n+    if (!psocket)\n+        return;\n+\n+    if (format==HashFormat)\n+    {\n+        uint256 hash = tx.GetHash();\n+        int rc = Publish(\"TXN\", 3, ZMQ_SNDMORE);\n+        if (rc==0)\n+            Publish(hash.begin(), hash.size(), 0);\n+    }\n+    else if (format==NetworkFormat)\n+    {\n+        // Serialize transaction\n+        CDataStream ss(SER_NETWORK, PROTOCOL_VERSION);\n+        ss << tx;\n+    \n+        // Send multipart message\n+        int rc = Publish(\"TXN\", 3, ZMQ_SNDMORE);\n+        if (rc==0)\n+            Publish(&ss[0], ss.size(), 0);\n+    }\n+#endif\n+}\n+\n+// Called after the block chain tip changed\n+void CZMQPublisher::UpdatedBlockTip(const CBlock &block)\n+{\n+    if (!psocket)\n+        return;\n+\n+    if (format==HashFormat)\n+    {\n+        uint256 hash = block.GetHash();\n+\n+        // Send multipart message\n+        int rc = Publish(\"BLK\", 3, ZMQ_SNDMORE);\n+        if (rc==0)\n+            Publish(hash.begin(), hash.size(), 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29699244",
      "id" : 29699244,
      "original_commit_id" : "12cefe533ed2d9a98bac8a8084bd1a46fa765f59",
      "original_position" : 171,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29699244",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Will do additional tests when `UpdatedBlockTip` is ready.",
      "created_at" : "2015-05-05T18:42:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99175489",
      "id" : 99175489,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T18:42:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99175489",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "It seems Travis is not building with zeromq. Can this be addressed?",
      "created_at" : "2015-05-05T21:29:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99228868",
      "id" : 99228868,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T21:29:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99228868",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag Yes. You'll need to add the dependency. You can pull this commit: https://github.com/theuni/bitcoin/commit/3661302abfca852a871b8b3cb406d5d10dfc33ae to get travis to test.\r\nEdit: Updated version: https://github.com/theuni/bitcoin/commit/eda02cf35626a6bc988aa9bd6df217df2a23c7ae\r\n\r\nNote, however, that the windows build currently fails because zeromq refuses to static-link with mingw. I chose to leave this broken rather than disabling the windows build because we'll have to come up with a plan, even if it's just to explicitly disable it there.",
      "created_at" : "2015-05-06T00:33:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99272898",
      "id" : 99272898,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-06T02:55:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99272898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@sipa if you like I can add the new signal to CValidationInterface. I suppose I can emit it before the NotifyBlockTip.",
      "created_at" : "2015-05-06T09:09:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99391865",
      "id" : 99391865,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-06T09:09:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99391865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@theuni BTW why static linking? and why not dynamic linking on travis because of http://docs.travis-ci.com/user/ci-environment/#Messaging-Technology",
      "created_at" : "2015-05-06T10:07:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99405316",
      "id" : 99405316,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-06T10:07:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99405316",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag Travis builds exactly as we build for release. The current build failure means that we wouldn't be able to package zeromq into a windows binary. Until that's fixed, failing is the right thing to do imo. The question is: is it worth it to try to work around their mingw situation, or just disable it for windows.",
      "created_at" : "2015-05-06T17:41:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99548504",
      "id" : 99548504,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-06T17:41:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99548504",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Having ZMQ for windows as well would be nice in near future. With ZMQ we could place a (daemon)script into the /contrib folder and deprecate the -notify features. IIRC there where serval issues with the -notify commands on windows.\r\n\r\n@promag: I think it would be nice if you could complete this and try to add the new signal to `CValidationInterface()`",
      "created_at" : "2015-05-07T06:47:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99744736",
      "id" : 99744736,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-07T06:47:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99744736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@theuni should we disable zmq in windows?\r\nping @sipa ",
      "created_at" : "2015-05-18T14:44:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-103083194",
      "id" : 103083194,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-18T14:44:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103083194",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r30613243"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30613243"
         }
      },
      "body" : "s/-zmqformat=hash|network**>**/-zmqformat=**<**hash|network**>**/",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-05-19T15:44:04Z",
      "diff_hunk" : "@@ -345,6 +357,10 @@ std::string HelpMessage(HelpMessageMode mode)\n                     \n #endif\n \n+    strUsage += HelpMessageGroup(_(\"ZeroMQ publisher options\"));\n+    strUsage += HelpMessageOpt(\"-zmqpub=<endpoint>\",_(\"Publish blocks and transactions on 'endpoint'\"));\n+    strUsage += HelpMessageOpt(\"-zmqformat=hash|network>\",_(\"Publish format is either hash (default) or network\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r30613243",
      "id" : 30613243,
      "original_commit_id" : "ac4f864bab954d0447dde6bc91574c0b8a2e20fb",
      "original_position" : 39,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30613243",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Disabled zeromq in windows because zmq fails to build as a static lib in mingw.",
      "created_at" : "2015-05-20T15:41:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-103931954",
      "id" : 103931954,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-20T15:41:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103931954",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-05-22T06:32:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-104537176",
      "id" : 104537176,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-22T06:32:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104537176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Why not publish both formats and let clients choose which to subscribe to?",
      "created_at" : "2015-05-23T20:03:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-104940082",
      "id" : 104940082,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-23T20:03:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104940082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@promag That only disables the windows build for travis, not for anyone actually building for windows.\r\n\r\nPlease instead use something like:\r\n```\r\npackages:=boost openssl\r\npackages_darwin:=zeromq\r\npackages_linux:=zeromq\r\n```\r\n\r\nPlease also document the fact that it's unusable for Windows due to upstream build issues.",
      "created_at" : "2015-05-23T21:41:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-104946990",
      "id" : 104946990,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-23T21:41:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104946990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@luke-jr you mean one address per format?\r\n@theuni right, will do.",
      "created_at" : "2015-05-23T22:13:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-104950869",
      "id" : 104950869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-23T22:13:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104950869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag I mean using ZeroMQ's topics so clients can filter which they want.",
      "created_at" : "2015-05-23T23:26:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-104954799",
      "id" : 104954799,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-23T23:26:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104954799",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr Actually I was thinking removing the option to publish the entire transaction/block. The block will have a maximum size of 20mb. And writing all formats to the socket sequentially can cause some lag each time there is a new block. Also, at the moment, writing to the socket happens in the main thread, and the publisher should be as fast as possible.\r\n\r\nAt the moment we use the hash format, and the hash is enqueued in a persistent/reliable queue so that it can be processed later on a easy pace. Then the RPC interface is used to get more details about it. We think the load of bitcoind is much lower than publishing the entire data.",
      "created_at" : "2015-05-25T08:52:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-105170976",
      "id" : 105170976,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-25T08:52:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105170976",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "In fact, apart from several formats and topics for PUB, we could allow the option of using either PUB or PUSH instead of forcing it to be PUB?\r\nPUSH should be much faster than PUB, for big things like blocks (both with 1 MB and 20 MB blocks, which is something completely orthogonal to this PR).\r\n\r\nEDIT: I think the option for a topic could be useful for smaller things like transactions, for example, and there's no reason not to make it generic just because that option may be slow for blocks.\r\nIn fact, since you should be able to configure each event independently, so I think we should have a block publisher/pusher option and an analogous one for transactions.\r\n\r\nThis way you could, for example, configure a topic-based publisher for transactions and a simple pusher for blocks (or the opposite, push both: any combination).\r\n",
      "created_at" : "2015-05-28T16:01:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-106444601",
      "id" : 106444601,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-28T16:15:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/106444601",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@jtimon IMHO this notification mechanism should be as simple as possible. Just publishing the event/hash is enough for the downstream to make RPC calls to get more information about blocks/transactions, including computed data which is not in the raw data, for instance, confirmations etc.\r\n\r\nIn our use case we tried to avoid RPC calls upstream, but ended giving up because we didn't want to miss the blockchain maintenance of bitcoind, ie, handling forks, double spends, etc. So, with this notifications we just avoid notify-* scripts and RPC polling.\r\n\r\nMoreover, I would never send the raw data, because it is too much and requires the downstream to \"know\" how to parse the raw data. Handling JSON RPC is much easier.\r\n\r\nRegarding the socket type, I wouldn't choose a socket where the send operation is blocking as this could lead to, either internal queue in a separate thread, or making bitcoind malfunction. Therefore, IIRC PUB/SUB is the only type that has non-blocking send.",
      "created_at" : "2015-05-29T09:01:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-106750622",
      "id" : 106750622,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-29T09:01:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/106750622",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "> @jtimon IMHO this notification mechanism should be as simple as possible. \r\n\r\nIMO it should be as flexible as possible. That's what I love most about zmq, anyway.\r\n\r\n> In our use case we tried to avoid RPC calls upstream, but ended giving up because we didn't want to miss the blockchain maintenance of bitcoind, ie, handling forks, double spends, etc. So, with this notifications we just avoid notify-* scripts and RPC polling.\r\n\r\nThat's seems good for your use case. Other uses of zmq could be to precisely replace rpc calls (although we're not supporting REQ/REP in this PR and that's fine). Remember that RPCs also take locks and all that. Anyway, please don't assume that everybody wants to use the zmq integration in the same way you do.\r\n\r\n> Moreover, I would never send the raw data, because it is too much and requires the downstream to \"know\" how to parse the raw data. Handling JSON RPC is much easier.\r\n\r\nZmq also supports json, but I can see some potential consumers preferring raw data.\r\n\r\n> Regarding the socket type, I wouldn't choose a socket where the send operation is blocking as this could lead to, either internal queue in a separate thread, or making bitcoind malfunction. Therefore, IIRC PUB/SUB is the only type that has non-blocking send.\r\n\r\nI didn't know that PULL/PUSH was blocking, but doesn't make much sense to me. Then why wouldn't people just use a PUB/SUB with a single subscriber that then pushes to another sockets (to avoid making the original send blocking)?\r\nCan you link me to the zmq documentation that says PUSH sends are blocking but PUB are not?\r\nEven if that's the case, it may be worth it for some use cases.\r\n\r\nAnyway, your arguments for not supporting topics in PUB/SUB (as Luke-Jr proposes) seem invalid to me, specially if you were assuming that only hashes will be sent.\r\n",
      "created_at" : "2015-05-29T10:06:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-106763520",
      "id" : 106763520,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-29T10:06:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/106763520",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@jtimon From http://api.zeromq.org/4-0:zmq-socket\r\n\r\n> When a ZMQ_PUSH socket enters the mute state due to having reached the high water mark for all downstream nodes, or if there are no downstream nodes at all, then any zmq_send(3) operations on the socket shall block until the mute state ends or at least one downstream node becomes available for sending; messages are not discarded.\r\n",
      "created_at" : "2015-05-29T10:25:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-106767109",
      "id" : 106767109,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-29T10:25:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/106767109",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "IMHO the true purpose of this PR is to eventually avoid/deprecate notify scripts. It should provide the CValidationInterface signals to the outside world. I agree with all that flexibility/options but for me it is out of scope of this PR.",
      "created_at" : "2015-05-29T10:45:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-106771184",
      "id" : 106771184,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-29T10:45:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/106771184",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Oh I see, of course, push is blocking when you don't have ready pullers...that has a simple solution: have pullers. That's a problem for the user to solve. IMO not a good reason not to support PUSH ( which is so similar to PUB in all other things).\r\n\r\nAbout the scope of this PR, sure, this doesn't have to do everything, but for example supporting PUB/SUB topics definitely seems within scope.\r\n\r\nIf we're going to leave pushers for later, that's fine, sunce we want a different option to activate it anyway. Still, the current options could indicate that this is for PUB explicitly, for the options to be more clear when/if we add PUSH (or even REP) later. Also, one should be able to configure the transactions and  locks events independently.",
      "created_at" : "2015-05-29T11:22:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-106778056",
      "id" : 106778056,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-29T11:22:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/106778056",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "So in summary, I would separate zmqpub into zmqpubtx and zmqpubblock or something similar, and I would add support for topics, everything else can be left for later.",
      "created_at" : "2015-05-29T11:26:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-106778450",
      "id" : 106778450,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-29T11:26:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/106778450",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "What you mean by zmqpubtx and zmqpubblock? Two pub sockets binded to different addresses?",
      "created_at" : "2015-05-29T11:49:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-106781668",
      "id" : 106781668,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-29T11:49:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/106781668",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "On Fri, May 29, 2015 at 2:02 AM, Joo Barbosa <notifications@github.com>\nwrote:\n\n> Regarding the socket type, I wouldn't choose a socket where the send\n> operation is blocking as this could lead to, either internal queue in a\n> separate thread, or making bitcoind malfunction. Therefore, IIRC PUB/SUB is\n> the only type that has non-blocking send.\n>\n\nThis is precisely the reason PUB was chosen when I originally implemented\nthis.\n\n-- \nJohnathan Corgan\nCorgan Labs - SDR Training and Development Services\nIntro to SDR Classes - June 4-5, Columbia MD, June 29-30, El Segundo, CA\nhttp://corganlabs.com\n",
      "created_at" : "2015-05-29T16:24:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-106863530",
      "id" : 106863530,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-29T16:24:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/106863530",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1492956?v=3",
         "events_url" : "https://api.github.com/users/jmcorgan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jmcorgan/followers",
         "following_url" : "https://api.github.com/users/jmcorgan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jmcorgan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jmcorgan",
         "id" : 1492956,
         "login" : "jmcorgan",
         "organizations_url" : "https://api.github.com/users/jmcorgan/orgs",
         "received_events_url" : "https://api.github.com/users/jmcorgan/received_events",
         "repos_url" : "https://api.github.com/users/jmcorgan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jmcorgan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jmcorgan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jmcorgan"
      }
   },
   {
      "body" : "This pull already implements topics via construction of multipart messages.  They are \"BLK\" and \"TXN\".  If the zmq library on the publisher side is recent enough, it will filter on the publisher side as per the subscriber's topic preferences.  \r\n\r\nThis, however, doesn't help all that much as ideally you'd want something that can tell whether or not anyone is subscribed to a topic so you can save the cost of serialization when it's not necessary.  AFAIK, there's no simple way to ask zmq if anyone is subscribed or what topics are subscribed.\r\n\r\nWhether or not the cost of serialization/zmq_sending on all transactions and blocks is enough to justify adding configuration options (and translation/documentation overhead) to selectively turn block or transaction publishing on/off is an open question.  I have not measured it.  ",
      "created_at" : "2015-05-29T19:27:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-106909421",
      "id" : 106909421,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-29T19:27:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/106909421",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/430315?v=3",
         "events_url" : "https://api.github.com/users/ajweiss/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajweiss/followers",
         "following_url" : "https://api.github.com/users/ajweiss/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajweiss/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajweiss",
         "id" : 430315,
         "login" : "ajweiss",
         "organizations_url" : "https://api.github.com/users/ajweiss/orgs",
         "received_events_url" : "https://api.github.com/users/ajweiss/received_events",
         "repos_url" : "https://api.github.com/users/ajweiss/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajweiss/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajweiss/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajweiss"
      }
   },
   {
      "body" : "> What you mean by zmqpubtx and zmqpubblock? Two pub sockets binded to different addresses?\r\n\r\nYes. well in fact maybe you want to connect both to the same socket, but yes the goal would be that you are able to configure them independently (maybe you confiure blocks but not transactions or viceversa).",
      "created_at" : "2015-06-01T06:23:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-107320983",
      "id" : 107320983,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-01T06:23:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107320983",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "If the goal is to merely notify of hashes, I suggest an external program triggered by -*notify may be better.",
      "created_at" : "2015-06-02T03:21:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-107786003",
      "id" : 107786003,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-02T03:21:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107786003",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr notify scripts only support wallet transactions and blocks. There is no support for mempool notifications (#6072).\r\n\r\nBeside that, executing a script for each hash is overkill, specially when lots of transactions change state like when the blockchain is incremented. Also, notify scripts execute in the same machine the bitcoind runs whereas sockets provide much more flexibility.",
      "created_at" : "2015-06-02T09:59:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-107904017",
      "id" : 107904017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-02T09:59:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107904017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "So does it make sense to be able to configure independent sockets for transactions and blocks?\r\nYou could still connect both to the same port instead of binding them, presumably used in combination of a zmq Forwarder or binding a single subscriber.\r\n",
      "created_at" : "2015-06-02T10:37:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-107912213",
      "id" : 107912213,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-02T10:37:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107912213",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@promag Ok, you've made your point. I suggest at least offering RPC over ZMQ though, but that's I guess out of scope here.",
      "created_at" : "2015-06-02T10:49:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-107914471",
      "id" : 107914471,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-02T10:49:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107914471",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "RPC over ZMQ is indeed out of scope on this pull request, but definitely worth considering.",
      "created_at" : "2015-06-02T13:37:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-107955489",
      "id" : 107955489,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-02T13:37:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107955489",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1492956?v=3",
         "events_url" : "https://api.github.com/users/jmcorgan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jmcorgan/followers",
         "following_url" : "https://api.github.com/users/jmcorgan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jmcorgan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jmcorgan",
         "id" : 1492956,
         "login" : "jmcorgan",
         "organizations_url" : "https://api.github.com/users/jmcorgan/orgs",
         "received_events_url" : "https://api.github.com/users/jmcorgan/received_events",
         "repos_url" : "https://api.github.com/users/jmcorgan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jmcorgan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jmcorgan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jmcorgan"
      }
   },
   {
      "body" : "Agree on discarding RPC for now.\r\n\r\nSo I think we could allow arguments -zmq{type}{format}{object}={address} where\r\n - type = pub (push in the future)\r\n - format = hash | raw\r\n - object = transaction | block\r\n - address = a valid zmq socket address\r\n\r\nExample:\r\n`-zmqpubhashblock=ipc:///tmp/bitcoin.block.hash -zmqpubrawtransaction=ipc:///tmp/bitcoin.transaction.raw`",
      "created_at" : "2015-06-03T16:27:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-108510944",
      "id" : 108510944,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-03T16:29:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/108510944",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "> Agree on discarding RPC for now.\n>\n> So I think we could allow arguments -zmq{type}{format}{object}={address} where\n>\n> type = pub (push in the future)\n> format = hash | raw\n> object = transaction | block\n> address = a valid zmq socket address\n\nSounds great to me.\n",
      "created_at" : "2015-06-03T16:51:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-108521083",
      "id" : 108521083,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-03T16:51:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/108521083",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Ops, forgot to add the topic option, which is important if an address is shared. Unless topic is the same as the object.",
      "created_at" : "2015-06-03T17:27:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-108535849",
      "id" : 108535849,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-03T17:38:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/108535849",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@jonasschnelli @jgarzik please review the refactor, still wip",
      "created_at" : "2015-06-05T17:28:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-109370385",
      "id" : 109370385,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-05T17:28:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/109370385",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r31846217"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31846217"
         }
      },
      "body" : "It looks like that this is not implemented like that. Example: `zmqpubrawblock` is not supported. Only `zmqpubhashblock` and `zmqpubhashtransaction` is supported IMO. At least the should be a warning or error if you try to add a zmq channel which is not supported.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-06-05T19:58:08Z",
      "diff_hunk" : "@@ -349,9 +361,12 @@ std::string HelpMessage(HelpMessageMode mode)\n     strUsage += HelpMessageOpt(\"-walletnotify=<cmd>\", _(\"Execute command when a wallet transaction changes (%s in cmd is replaced by TxID)\"));\n     strUsage += HelpMessageOpt(\"-zapwallettxes=<mode>\", _(\"Delete all wallet transactions and only recover those parts of the blockchain through -rescan on startup\") +\n         \" \" + _(\"(1 = keep tx meta data e.g. account owner and payment request information, 2 = drop tx meta data)\"));\n-                    \n+\n #endif\n \n+    strUsage += HelpMessageGroup(_(\"ZeroMQ publisher options\"));\n+    strUsage += HelpMessageOpt(\"-zmq<type><format><object>=<address>\",_(\"Enable notification through zmq socket <address> (type=pub, format=hash|raw, object=block|transaction)\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r31846217",
      "id" : 31846217,
      "original_commit_id" : "df435c5fc3e51253649d6f096cd9398873bf62c3",
      "original_position" : 51,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31846217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "**This PR needs some love.**\r\n\r\n1. documentation out of date (or lets say out of sync because it's not yet available)\r\n2. `./contrib/zmq/zmq_sub.py` out of date, doesn't run.\r\n3. `./contrib/zmq/zmq_sub.py` as no `+x` (executable) flag like `linearize.py`, etc.\r\n4. zmq rpc test does not run, out of date\r\n5. the factory thing as well as the flexible `-zmq<pub><...>` feels over the top and should throw an error if given \"format\" could not generate a listener.\r\n\r\nI really think ZMQ within bitcoin-core would be a great step, but this PR lacks here and there at the moment.",
      "created_at" : "2015-06-05T20:09:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-109424805",
      "id" : 109424805,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-05T20:09:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/109424805",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r31849061"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31849061"
         }
      },
      "body" : "As stated it's just an initial version to ask for comments. The usage help will hav the supported options.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-06-05T20:35:07Z",
      "diff_hunk" : "@@ -349,9 +361,12 @@ std::string HelpMessage(HelpMessageMode mode)\n     strUsage += HelpMessageOpt(\"-walletnotify=<cmd>\", _(\"Execute command when a wallet transaction changes (%s in cmd is replaced by TxID)\"));\n     strUsage += HelpMessageOpt(\"-zapwallettxes=<mode>\", _(\"Delete all wallet transactions and only recover those parts of the blockchain through -rescan on startup\") +\n         \" \" + _(\"(1 = keep tx meta data e.g. account owner and payment request information, 2 = drop tx meta data)\"));\n-                    \n+\n #endif\n \n+    strUsage += HelpMessageGroup(_(\"ZeroMQ publisher options\"));\n+    strUsage += HelpMessageOpt(\"-zmq<type><format><object>=<address>\",_(\"Enable notification through zmq socket <address> (type=pub, format=hash|raw, object=block|transaction)\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r31849061",
      "id" : 31849061,
      "original_commit_id" : "df435c5fc3e51253649d6f096cd9398873bf62c3",
      "original_position" : 51,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31849061",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Agree but before polishing and squash I want to be sure that the refactor is acceptable.\r\n\r\nInstead of having lots of switch/ifs I added a notifier type for each type of notification. Later other types of notifications can be added easilly. If it's OK then I'll update everything.",
      "created_at" : "2015-06-05T20:40:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-109433295",
      "id" : 109433295,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-05T20:40:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/109433295",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Another thing:\r\nIf i add `-zmqpubhashblock=tcp://127.0.0.1:28332 -zmqpubhashtransaction=tcp://127.0.0.1:2833` (both notification types) it won't send blockhashes through zmq (didn't analyze in detail).\r\n\r\nConceptual:\r\nI'm not sure if the flexible cmd arg is the right thing. It is like settings config values within a config arg key which feels somehow strange.\r\nAlso unsure why lots of things are compiled in when `--enable-zmq=no` (cmd args get parsed and factory gets created even when having `--enable-zmq=no` during compile time. This feels wrong).\r\n\r\nFeel free to pull in the zmq test / zmq example tool fixes:\r\nhttps://github.com/jonasschnelli/bitcoin/commit/fe2e286856eb35e0614fa5e1da757ff44ba7eeb1",
      "created_at" : "2015-06-06T08:10:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-109550770",
      "id" : 109550770,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-06T08:10:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/109550770",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli Flexible command args is just a way to explain it here because of the multiple combinations. At then end the usage help will have listed just the notifiers supported. So, for instance, if command argument `-zmqpubhashblock` is defined then it will enable publishing hash blocks.\r\n\r\nI'll follow https://github.com/bitcoin/bitcoin/pull/4594#issuecomment-50356713 to avoid compiling zmq notifications when `--enable-zmq=no`.\r\n\r\nI'll rebase your commit and wrap everything.",
      "created_at" : "2015-06-08T09:31:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-109928485",
      "id" : 109928485,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-08T09:31:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/109928485",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Needs rebase.",
      "created_at" : "2015-06-11T19:37:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-111255244",
      "id" : 111255244,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-11T19:37:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111255244",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r32312285"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32312285"
         }
      },
      "body" : "extra port",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-06-12T12:45:41Z",
      "diff_hunk" : "@@ -0,0 +1,38 @@\n+#!/usr/bin/env python2\n+\n+import array\n+import binascii\n+import zmq\n+\n+port = 28332\n+port = 4849",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r32312285",
      "id" : 32312285,
      "original_commit_id" : "feb2534c5e02ed64d36df8574c107d9d9557d5ee",
      "original_position" : 8,
      "path" : "contrib/zmq/zmq_sub.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32312285",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/139927?v=3",
         "events_url" : "https://api.github.com/users/wozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wozz/followers",
         "following_url" : "https://api.github.com/users/wozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wozz",
         "id" : 139927,
         "login" : "wozz",
         "organizations_url" : "https://api.github.com/users/wozz/orgs",
         "received_events_url" : "https://api.github.com/users/wozz/received_events",
         "repos_url" : "https://api.github.com/users/wozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wozz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r32312302"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32312302"
         }
      },
      "body" : "this is out of sync",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-06-12T12:45:59Z",
      "diff_hunk" : "@@ -0,0 +1,158 @@\n+# Block and Transaction Broadcasting With ZeroMQ\n+\n+[ZeroMQ](http://zeromq.org/) is a lightweight wrapper around TCP\n+connections, inter-process communications, and shared-memory,\n+providing various message-oriented semantics such as publish/subcribe,\n+request/reply, and push/pull.\n+\n+The Bitcoin Core daemon can be configured to act as a trusted \"border\n+router\", implementing the bitcoin wire protocol and relay, making\n+consensus decisions, maintaining the local blockchain database,\n+broadcasting locally generated transactions into the network, and\n+providing a queryable RPC interface to interact on a polled basis for\n+requesting blockchain related data.  However, there exists only a\n+limited service to notify external software of events like the arrival\n+of new blocks or transactions.\n+\n+The ZeroMQ facility implements a notification interface through a\n+set of specific notifiers. Currently there are notifiers that publish\n+blocks and transactions. The  supports a set of no binds a \"publish\" port that broadcasts all newly\n+arrived *and validated* blocks and transactions to one or more\n+connected subscribers.  This read-only facility requires only the\n+connection of a corresponding ZeroMQ subscriber port in receiving\n+software; it is not authenticated nor is there any two-way protocol\n+involvement.\n+\n+In this fashion, external software can use a trusted Bitcoin Core\n+daemon to do the heavy lifting of communicating with the P2P network,\n+while still receiving network information asynchronously in real\n+time. As transactions and blocks arrive via the P2P network, Bitcoin\n+Core will apply all the validation and standardization rules to this\n+data, only passing along through ZeroMQ those items that pass.\n+\n+ZeroMQ sockets are self-connecting and self-healing; that is, connects\n+made between two endpoints will be automatically restored after an\n+outage, and either end may be freely started or stopped in any order.\n+\n+Because ZeroMQ is message oriented, subscribers receive transactions\n+and blocks all-at-once and do not need to implement any sort of\n+buffering or reassembly.\n+\n+## Prerequisites\n+\n+The ZeroMQ feature in Bitcoin Core uses only a very small part of the\n+ZeroMQ C API, and is thus compatible with any version of ZeroMQ\n+from 2.1 onward, including all versions in the 3.x and 4.x release\n+series.  Typically, it is packaged by distributions as something like\n+*libzmq-dev*.\n+\n+The C++ wrapper for ZeroMQ is *not* needed.\n+\n+## Enabling\n+\n+By default, the ZeroMQ port functionality is enabled. Two steps are\n+required to enable--compiling in the ZeroMQ code, and configuring\n+runtime operation on the command-line or configuration file.\n+\n+    $ ./configure --enable-zmq (other options)\n+\n+This will produce a binary that is capable of providing the ZeroMQ\n+facility, but will not do so until also configured properly.\n+\n+## Configuration\n+\n+Currently, the following notifications are supported:\n+\n+    -zmqpubhashtx=address\n+    -zmqpubhashblock=address\n+    -zmqpubrawblock=address\n+    -zmqpubrawtx=address\n+\n+The socket type is PUB and the address must be a valid ZeroMQ\n+socket address. The same address can be used in more than one notification.\n+\n+For instance:\n+\n+    $ bitcoind -zmqpubhashtx=tcp://127.0.0.1:28332 -zmqpubrawtx=ipc:///tmp/bitcoind.tx.raw\n+\n+Each PUB notification has a topic and body, where the header\n+corresponds to the notification type. For instance, for the notification\n+`-zmqpubhashtx` the topic is `hashtx`.\n+\n+These options can also be provided in bitcoin.conf.\n+\n+ZeroMQ endpoint specifiers for TCP (and others) are documented in the\n+[ZeroMQ API](http://api.zeromq.org).\n+\n+## Operation\n+\n+ZeroMQ publish sockets prepend each data item with an arbitrary topic\n+prefix that allows subscriber clients to request only those items with\n+a matching prefix.  When publishing, bitcoind will prepend the topic\n+\"TXN\" (no quotes, no null terminator) to the binary, serialized form\n+of a published transaction, and \"BLK\" to the binary, serialized form\n+of a published block.\n+\n+Client side, then, the ZeroMQ subscriber socket must have the\n+ZMQ_SUBSCRIBE option set to one or either of these prefixes; without\n+doing so will result in no messages arriving.\n+\n+Here is a small example, in the Python language, using the\n+*python-zmq* wrapper:\n+\n+    import zmq\n+    import binascii\n+\n+    port = 28332\n+    topic1 = \"BLK\"\n+    topic2 = \"TXN\"\n+    topic_len = len(topic1)\n+\n+    zmqContext = zmq.Context()\n+    zmqSubSocket = zmqContext.socket(zmq.SUB)\n+    zmqSubSocket.setsockopt(zmq.SUBSCRIBE, topic1)\n+    zmqSubSocket.setsockopt(zmq.SUBSCRIBE, topic2)\n+    zmqSubSocket.connect(\"tcp://127.0.0.1:%i\" % port)\n+\n+    def handleBLK(blk):\n+        print \"-BLKHDR-\"\n+        print binascii.hexlify(blk[:80])\n+\n+    def handleTX(tx):\n+        print \"-TX-\"\n+        print binascii.hexlify(tx)\n+\n+    try:\n+        while True:\n+            msg = zmqSubSocket.recv()\n+            msg_topic = msg[:topic_len]\n+            msg_data  = msg[topic_len:]\n+\n+            if msg_topic == \"TXN\":\n+                handleTX(msg_data)\n+            elif msg_topic == \"BLK\":\n+                handleBLK(msg_data)\n+\n+    except KeyboardInterrupt:\n+        zmqContext.destroy()\n+\n+\n+This example is provided in the contrib/zmq directory of the source",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r32312302",
      "id" : 32312302,
      "original_commit_id" : "feb2534c5e02ed64d36df8574c107d9d9557d5ee",
      "original_position" : 140,
      "path" : "doc/zmq.md",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32312302",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/139927?v=3",
         "events_url" : "https://api.github.com/users/wozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wozz/followers",
         "following_url" : "https://api.github.com/users/wozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wozz",
         "id" : 139927,
         "login" : "wozz",
         "organizations_url" : "https://api.github.com/users/wozz/orgs",
         "received_events_url" : "https://api.github.com/users/wozz/received_events",
         "repos_url" : "https://api.github.com/users/wozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wozz"
      }
   },
   {
      "body" : "@jonasschnelli @wozz done",
      "created_at" : "2015-06-12T13:33:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-111494071",
      "id" : 111494071,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-12T13:33:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111494071",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@jtimon, @sipa, @jonasschnelli: is there a timeframe for merging this? Would love to see this in 0.12!",
      "created_at" : "2015-06-16T17:25:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-112504788",
      "id" : 112504788,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-16T17:25:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/112504788",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/92085?v=3",
         "events_url" : "https://api.github.com/users/nunofgs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nunofgs/followers",
         "following_url" : "https://api.github.com/users/nunofgs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nunofgs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nunofgs",
         "id" : 92085,
         "login" : "nunofgs",
         "organizations_url" : "https://api.github.com/users/nunofgs/orgs",
         "received_events_url" : "https://api.github.com/users/nunofgs/received_events",
         "repos_url" : "https://api.github.com/users/nunofgs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nunofgs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nunofgs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nunofgs"
      }
   },
   {
      "body" : "I don't see that anyone has asked this, and it doesn't seem to be mentioned, but: who would use this? Is it a majority or a small minority that would? If the latter, can this functionality be added with some sort of 3rd party utility instead? If so, then I don't think it ought to be included in Bitcoin Core as it would add bloat and reduce security.",
      "created_at" : "2015-06-16T18:56:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-112528391",
      "id" : 112528391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-16T18:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/112528391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "@rebroad: I think consensus is that ZMQ (0mq) is desirable within bitcoin core (https://github.com/bitcoin/bitcoin/pull/2415, https://github.com/bitcoin/bitcoin/pull/5303) . At the moment, bitcoin-core users (including merchants, etc.) need to use `-blocknotify` and co. to get informed when a new block is available.\r\n\r\nZMQ would potential also allow to separate the wallet from the core and let them run in different processes.",
      "created_at" : "2015-06-16T19:04:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-112530220",
      "id" : 112530220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-16T19:04:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/112530220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@rebroad If you follow the discussion, and related pull requests, you will find enough arguments to deprecate notify scripts and have a non-intrusive notification interface.",
      "created_at" : "2015-06-17T10:11:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-112744961",
      "id" : 112744961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-17T10:11:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/112744961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@nunofgs I don't know, whenever is merged? I already ut ACKedm I had some nits that go resolved... re ut ACK.",
      "created_at" : "2015-06-17T16:51:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-112874951",
      "id" : 112874951,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-17T16:51:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/112874951",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r32763544"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32763544"
         }
      },
      "body" : "Linebreak is wrong.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-06-18T18:39:38Z",
      "diff_hunk" : "@@ -0,0 +1,155 @@\n+# Block and Transaction Broadcasting With ZeroMQ\n+\n+[ZeroMQ](http://zeromq.org/) is a lightweight wrapper around TCP\n+connections, inter-process communications, and shared-memory,\n+providing various message-oriented semantics such as publish/subcribe,\n+request/reply, and push/pull.\n+\n+The Bitcoin Core daemon can be configured to act as a trusted \"border\n+router\", implementing the bitcoin wire protocol and relay, making\n+consensus decisions, maintaining the local blockchain database,\n+broadcasting locally generated transactions into the network, and\n+providing a queryable RPC interface to interact on a polled basis for\n+requesting blockchain related data.  However, there exists only a\n+limited service to notify external software of events like the arrival\n+of new blocks or transactions.\n+\n+The ZeroMQ facility implements a notification interface through a\n+set of specific notifiers. Currently there are notifiers that publish\n+blocks and transactions. The  supports a set of no binds a \"publish\" port that broadcasts all newly",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r32763544",
      "id" : 32763544,
      "original_commit_id" : "47a4cb28823e773ed9b9e382f3c13e27a76d418c",
      "original_position" : 19,
      "path" : "doc/zmq.md",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32763544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "I'm struggling to get this working. Running as per the example in `zmq.md`:\r\n\r\n    ./src/bitcoind -printtoconsole -zmqpubhashtx=tcp://127.0.0.1:28332\r\n\r\nThe node doesn't emit any notifications, the `msghand` thread spins endlessly on `CZMQAbstractNotifier::NotifyBlock()` and as a result a clean shutdown can never be completed. I don't have the time to debug it just now, just reporting that it doesn't seem to be completely stable on all platforms. ",
      "created_at" : "2015-06-18T18:42:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-113254021",
      "id" : 113254021,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-18T18:42:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113254021",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12956531?v=3",
         "events_url" : "https://api.github.com/users/D9B4BEF9/events{/privacy}",
         "followers_url" : "https://api.github.com/users/D9B4BEF9/followers",
         "following_url" : "https://api.github.com/users/D9B4BEF9/following{/other_user}",
         "gists_url" : "https://api.github.com/users/D9B4BEF9/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/D9B4BEF9",
         "id" : 12956531,
         "login" : "D9B4BEF9",
         "organizations_url" : "https://api.github.com/users/D9B4BEF9/orgs",
         "received_events_url" : "https://api.github.com/users/D9B4BEF9/received_events",
         "repos_url" : "https://api.github.com/users/D9B4BEF9/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/D9B4BEF9/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/D9B4BEF9/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/D9B4BEF9"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r32763968"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32763968"
         }
      },
      "body" : "IMO better mention `contrib/zmq/zmq_sub.py` here. Otherwise we have to maintain two python examples.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-06-18T18:43:11Z",
      "diff_hunk" : "@@ -0,0 +1,155 @@\n+# Block and Transaction Broadcasting With ZeroMQ\n+\n+[ZeroMQ](http://zeromq.org/) is a lightweight wrapper around TCP\n+connections, inter-process communications, and shared-memory,\n+providing various message-oriented semantics such as publish/subcribe,\n+request/reply, and push/pull.\n+\n+The Bitcoin Core daemon can be configured to act as a trusted \"border\n+router\", implementing the bitcoin wire protocol and relay, making\n+consensus decisions, maintaining the local blockchain database,\n+broadcasting locally generated transactions into the network, and\n+providing a queryable RPC interface to interact on a polled basis for\n+requesting blockchain related data.  However, there exists only a\n+limited service to notify external software of events like the arrival\n+of new blocks or transactions.\n+\n+The ZeroMQ facility implements a notification interface through a\n+set of specific notifiers. Currently there are notifiers that publish\n+blocks and transactions. The  supports a set of no binds a \"publish\" port that broadcasts all newly\n+arrived *and validated* blocks and transactions to one or more\n+connected subscribers.  This read-only facility requires only the\n+connection of a corresponding ZeroMQ subscriber port in receiving\n+software; it is not authenticated nor is there any two-way protocol\n+involvement.\n+\n+In this fashion, external software can use a trusted Bitcoin Core\n+daemon to do the heavy lifting of communicating with the P2P network,\n+while still receiving network information asynchronously in real\n+time. As transactions and blocks arrive via the P2P network, Bitcoin\n+Core will apply all the validation and standardization rules to this\n+data, only passing along through ZeroMQ those items that pass.\n+\n+ZeroMQ sockets are self-connecting and self-healing; that is, connects\n+made between two endpoints will be automatically restored after an\n+outage, and either end may be freely started or stopped in any order.\n+\n+Because ZeroMQ is message oriented, subscribers receive transactions\n+and blocks all-at-once and do not need to implement any sort of\n+buffering or reassembly.\n+\n+## Prerequisites\n+\n+The ZeroMQ feature in Bitcoin Core uses only a very small part of the\n+ZeroMQ C API, and is thus compatible with any version of ZeroMQ\n+from 2.1 onward, including all versions in the 3.x and 4.x release\n+series.  Typically, it is packaged by distributions as something like\n+*libzmq-dev*.\n+\n+The C++ wrapper for ZeroMQ is *not* needed.\n+\n+## Enabling\n+\n+By default, the ZeroMQ port functionality is enabled. Two steps are\n+required to enable--compiling in the ZeroMQ code, and configuring\n+runtime operation on the command-line or configuration file.\n+\n+    $ ./configure --enable-zmq (other options)\n+\n+This will produce a binary that is capable of providing the ZeroMQ\n+facility, but will not do so until also configured properly.\n+\n+## Configuration\n+\n+Currently, the following notifications are supported:\n+\n+    -zmqpubhashtx=address\n+    -zmqpubhashblock=address\n+    -zmqpubrawblock=address\n+    -zmqpubrawtx=address\n+\n+The socket type is PUB and the address must be a valid ZeroMQ\n+socket address. The same address can be used in more than one notification.\n+\n+For instance:\n+\n+    $ bitcoind -zmqpubhashtx=tcp://127.0.0.1:28332 -zmqpubrawtx=ipc:///tmp/bitcoind.tx.raw\n+\n+Each PUB notification has a topic and body, where the header\n+corresponds to the notification type. For instance, for the notification\n+`-zmqpubhashtx` the topic is `hashtx`.\n+\n+These options can also be provided in bitcoin.conf.\n+\n+ZeroMQ endpoint specifiers for TCP (and others) are documented in the\n+[ZeroMQ API](http://api.zeromq.org).\n+\n+## Operation\n+\n+ZeroMQ publish sockets prepend each data item with an arbitrary topic\n+prefix that allows subscriber clients to request only those items with\n+a matching prefix.  When publishing, bitcoind will prepend the topic\n+\"TXN\" (no quotes, no null terminator) to the binary, serialized form\n+of a published transaction, and \"BLK\" to the binary, serialized form\n+of a published block.\n+\n+Client side, then, the ZeroMQ subscriber socket must have the\n+ZMQ_SUBSCRIBE option set to one or either of these prefixes; without\n+doing so will result in no messages arriving.\n+\n+Here is a small example, in the Python language, using the\n+*python-zmq* wrapper:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r32763968",
      "id" : 32763968,
      "original_commit_id" : "47a4cb28823e773ed9b9e382f3c13e27a76d418c",
      "original_position" : 101,
      "path" : "doc/zmq.md",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32763968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Hmm.. can't compile this PR.\r\n\r\nOSX:\r\n```\r\n  \"CZMQNotificationInterface::Initialize()\", referenced from:\r\n      AppInit2(boost::thread_group&, CScheduler&) in libbitcoin_server.a(libbitcoin_server_a-init.o)\r\n  \"CZMQNotificationInterface::CreateWithArguments(std::__1::map<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::less<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::allocator<std::__1::pair<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > > const&)\", referenced from:\r\n      AppInit2(boost::thread_group&, CScheduler&) in libbitcoin_server.a(libbitcoin_server_a-init.o)\r\n  \"CZMQNotificationInterface::Shutdown()\", referenced from:\r\n      Shutdown() in libbitcoin_server.a(libbitcoin_server_a-init.o)\r\n```\r\n\r\nlinux:\r\n```\r\nzmq/zmqpublishnotifier.cpp: In function int zmq_send_multipart(void*, const void*, size_t, ...):\r\nzmq/zmqpublishnotifier.cpp:30:61: error: zmq_msg_send was not declared in this scope\r\nzmq/zmqnotificationinterface.cpp: In member function void CZMQNotificationInterface::Shutdown():\r\nzmq/zmqnotificationinterface.cpp:119:33: error: zmq_ctx_destroy was not declared in this scope\r\n```",
      "created_at" : "2015-06-18T19:22:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-113264484",
      "id" : 113264484,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-18T19:22:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113264484",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@D9B4BEF9 what's the platform and zmq version?\r\n@jonasschnelli what's the zmq version?",
      "created_at" : "2015-06-19T00:48:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-113331412",
      "id" : 113331412,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-19T00:48:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113331412",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r32793673"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32793673"
         }
      },
      "body" : "@jonasschnelli I had the same feeling, will do it.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-06-19T00:49:00Z",
      "diff_hunk" : "@@ -0,0 +1,155 @@\n+# Block and Transaction Broadcasting With ZeroMQ\n+\n+[ZeroMQ](http://zeromq.org/) is a lightweight wrapper around TCP\n+connections, inter-process communications, and shared-memory,\n+providing various message-oriented semantics such as publish/subcribe,\n+request/reply, and push/pull.\n+\n+The Bitcoin Core daemon can be configured to act as a trusted \"border\n+router\", implementing the bitcoin wire protocol and relay, making\n+consensus decisions, maintaining the local blockchain database,\n+broadcasting locally generated transactions into the network, and\n+providing a queryable RPC interface to interact on a polled basis for\n+requesting blockchain related data.  However, there exists only a\n+limited service to notify external software of events like the arrival\n+of new blocks or transactions.\n+\n+The ZeroMQ facility implements a notification interface through a\n+set of specific notifiers. Currently there are notifiers that publish\n+blocks and transactions. The  supports a set of no binds a \"publish\" port that broadcasts all newly\n+arrived *and validated* blocks and transactions to one or more\n+connected subscribers.  This read-only facility requires only the\n+connection of a corresponding ZeroMQ subscriber port in receiving\n+software; it is not authenticated nor is there any two-way protocol\n+involvement.\n+\n+In this fashion, external software can use a trusted Bitcoin Core\n+daemon to do the heavy lifting of communicating with the P2P network,\n+while still receiving network information asynchronously in real\n+time. As transactions and blocks arrive via the P2P network, Bitcoin\n+Core will apply all the validation and standardization rules to this\n+data, only passing along through ZeroMQ those items that pass.\n+\n+ZeroMQ sockets are self-connecting and self-healing; that is, connects\n+made between two endpoints will be automatically restored after an\n+outage, and either end may be freely started or stopped in any order.\n+\n+Because ZeroMQ is message oriented, subscribers receive transactions\n+and blocks all-at-once and do not need to implement any sort of\n+buffering or reassembly.\n+\n+## Prerequisites\n+\n+The ZeroMQ feature in Bitcoin Core uses only a very small part of the\n+ZeroMQ C API, and is thus compatible with any version of ZeroMQ\n+from 2.1 onward, including all versions in the 3.x and 4.x release\n+series.  Typically, it is packaged by distributions as something like\n+*libzmq-dev*.\n+\n+The C++ wrapper for ZeroMQ is *not* needed.\n+\n+## Enabling\n+\n+By default, the ZeroMQ port functionality is enabled. Two steps are\n+required to enable--compiling in the ZeroMQ code, and configuring\n+runtime operation on the command-line or configuration file.\n+\n+    $ ./configure --enable-zmq (other options)\n+\n+This will produce a binary that is capable of providing the ZeroMQ\n+facility, but will not do so until also configured properly.\n+\n+## Configuration\n+\n+Currently, the following notifications are supported:\n+\n+    -zmqpubhashtx=address\n+    -zmqpubhashblock=address\n+    -zmqpubrawblock=address\n+    -zmqpubrawtx=address\n+\n+The socket type is PUB and the address must be a valid ZeroMQ\n+socket address. The same address can be used in more than one notification.\n+\n+For instance:\n+\n+    $ bitcoind -zmqpubhashtx=tcp://127.0.0.1:28332 -zmqpubrawtx=ipc:///tmp/bitcoind.tx.raw\n+\n+Each PUB notification has a topic and body, where the header\n+corresponds to the notification type. For instance, for the notification\n+`-zmqpubhashtx` the topic is `hashtx`.\n+\n+These options can also be provided in bitcoin.conf.\n+\n+ZeroMQ endpoint specifiers for TCP (and others) are documented in the\n+[ZeroMQ API](http://api.zeromq.org).\n+\n+## Operation\n+\n+ZeroMQ publish sockets prepend each data item with an arbitrary topic\n+prefix that allows subscriber clients to request only those items with\n+a matching prefix.  When publishing, bitcoind will prepend the topic\n+\"TXN\" (no quotes, no null terminator) to the binary, serialized form\n+of a published transaction, and \"BLK\" to the binary, serialized form\n+of a published block.\n+\n+Client side, then, the ZeroMQ subscriber socket must have the\n+ZMQ_SUBSCRIBE option set to one or either of these prefixes; without\n+doing so will result in no messages arriving.\n+\n+Here is a small example, in the Python language, using the\n+*python-zmq* wrapper:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r32793673",
      "id" : 32793673,
      "original_commit_id" : "47a4cb28823e773ed9b9e382f3c13e27a76d418c",
      "original_position" : 101,
      "path" : "doc/zmq.md",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32793673",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag OSX, ZMQ 4.0.5.",
      "created_at" : "2015-06-19T11:54:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-113488262",
      "id" : 113488262,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-19T11:54:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113488262",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12956531?v=3",
         "events_url" : "https://api.github.com/users/D9B4BEF9/events{/privacy}",
         "followers_url" : "https://api.github.com/users/D9B4BEF9/followers",
         "following_url" : "https://api.github.com/users/D9B4BEF9/following{/other_user}",
         "gists_url" : "https://api.github.com/users/D9B4BEF9/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/D9B4BEF9",
         "id" : 12956531,
         "login" : "D9B4BEF9",
         "organizations_url" : "https://api.github.com/users/D9B4BEF9/orgs",
         "received_events_url" : "https://api.github.com/users/D9B4BEF9/received_events",
         "repos_url" : "https://api.github.com/users/D9B4BEF9/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/D9B4BEF9/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/D9B4BEF9/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/D9B4BEF9"
      }
   },
   {
      "body" : "@promag: \r\nlinux: libzmq1 2.2.0+dfsg-2 (debian)\r\nosx: zeromq/4.0.5_2\r\n",
      "created_at" : "2015-06-19T11:57:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-113489408",
      "id" : 113489408,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-19T11:57:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113489408",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "zmqnotificationinterface.cpp and zmqpublishnotifier.cpp are missing #include <zmq.h>\r\n\r\nzmqpublishnotifier.cpp is missing copyright headers",
      "created_at" : "2015-06-24T07:07:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-114754466",
      "id" : 114754466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-24T07:07:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114754466",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Alright, some quick progress into what but not why.  \r\n\r\n`./src/bitcoind -printtoconsole -zmqpubhashblock=tcp://127.0.0.1:28332`\r\n\r\nThe node comes up, that socket listens as expected, and then the node catches up on the latest block. The worker gets stuck emitting the same block hash in an infinite loop, and you have to SIGKILL bitcoind to get things sane again. \r\n\r\nBitcoind:\r\n\r\n    UpdateTip: new best=0000000000000000049a05148cbe116061e07f2a3f21dcc577b98850603c3072  height=362836  log2_work=82.997532  tx=73617964  date=2015-06-27 23:57:04 progress=0.999999  cache=11.2MiB(2971tx)\r\n\r\nZMQ output:\r\n\r\n    BLOCK 0000000000000000049a05148cbe116061e07f2a3f21dcc577b98850603c3072\r\n    BLOCK 0000000000000000049a05148cbe116061e07f2a3f21dcc577b98850603c3072\r\n    BLOCK 0000000000000000049a05148cbe116061e07f2a3f21dcc577b98850603c3072\r\n    BLOCK 0000000000000000049a05148cbe116061e07f2a3f21dcc577b98850603c3072\r\n    BLOCK 0000000000000000049a05148cbe116061e07f2a3f21dcc577b98850603c3072\r\n    ....\r\n\r\nEmitting transactions doesn't seem to function at all. ",
      "created_at" : "2015-06-28T00:01:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-116166900",
      "id" : 116166900,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-06-28T00:20:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/116166900",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12956531?v=3",
         "events_url" : "https://api.github.com/users/D9B4BEF9/events{/privacy}",
         "followers_url" : "https://api.github.com/users/D9B4BEF9/followers",
         "following_url" : "https://api.github.com/users/D9B4BEF9/following{/other_user}",
         "gists_url" : "https://api.github.com/users/D9B4BEF9/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/D9B4BEF9",
         "id" : 12956531,
         "login" : "D9B4BEF9",
         "organizations_url" : "https://api.github.com/users/D9B4BEF9/orgs",
         "received_events_url" : "https://api.github.com/users/D9B4BEF9/received_events",
         "repos_url" : "https://api.github.com/users/D9B4BEF9/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/D9B4BEF9/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/D9B4BEF9/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/D9B4BEF9"
      }
   },
   {
      "body" : "Please cherry-pick and squash 5b2845feabe01f5b671c87bdb909b5b05202d068 and 52396aa65b9e2da7f82e5fd12d87b7a614493ca0\r\n\r\nThen you just need to make sure copyright headers are on all new files.",
      "created_at" : "2015-07-03T03:35:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-118222253",
      "id" : 118222253,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-07-03T03:35:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/118222253",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr done, thanks!",
      "created_at" : "2015-07-09T08:59:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-119880455",
      "id" : 119880455,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-07-09T08:59:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/119880455",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@jonasschnelli A clean build environment seems to have sorted out my problem of bitcoind just pegging a core, don't know what was going on there. ",
      "created_at" : "2015-07-17T05:00:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-122176238",
      "id" : 122176238,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-07-17T05:00:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/122176238",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/12956531?v=3",
         "events_url" : "https://api.github.com/users/D9B4BEF9/events{/privacy}",
         "followers_url" : "https://api.github.com/users/D9B4BEF9/followers",
         "following_url" : "https://api.github.com/users/D9B4BEF9/following{/other_user}",
         "gists_url" : "https://api.github.com/users/D9B4BEF9/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/D9B4BEF9",
         "id" : 12956531,
         "login" : "D9B4BEF9",
         "organizations_url" : "https://api.github.com/users/D9B4BEF9/orgs",
         "received_events_url" : "https://api.github.com/users/D9B4BEF9/received_events",
         "repos_url" : "https://api.github.com/users/D9B4BEF9/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/D9B4BEF9/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/D9B4BEF9/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/D9B4BEF9"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34867886"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34867886"
         }
      },
      "body" : "Nit: IMHO the ZMQ header stuff should go below std headers and below boost, openssl etc (header group ordering). And I'm talking about all includes, not just this one.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-07-17T07:33:06Z",
      "diff_hunk" : "@@ -31,7 +31,9 @@\n #include \"wallet/wallet.h\"\n #include \"wallet/walletdb.h\"\n #endif\n-\n+#if ENABLE_ZMQ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34867886",
      "id" : 34867886,
      "original_commit_id" : "a3ae0c1f2528e4dd85a6ec85dc073df567d79657",
      "original_position" : 5,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34867886",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34867989"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34867989"
         }
      },
      "body" : "Nit: ``if (pzmqNotificationInterface) {`` as sometime in the future this will be the default code formatting (clang cleanup).",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-07-17T07:35:11Z",
      "diff_hunk" : "@@ -191,6 +197,17 @@ void Shutdown()\n     if (pwalletMain)\n         pwalletMain->Flush(true);\n #endif\n+\n+#if ENABLE_ZMQ\n+    if (pzmqNotificationInterface)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34867989",
      "id" : 34867989,
      "original_commit_id" : "a3ae0c1f2528e4dd85a6ec85dc073df567d79657",
      "original_position" : 28,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34867989",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34868047"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34868047"
         }
      },
      "body" : "Nit: Misses a ``:`` at the end.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-07-17T07:36:05Z",
      "diff_hunk" : "@@ -354,6 +371,14 @@ std::string HelpMessage(HelpMessageMode mode)\n         \" \" + _(\"(1 = keep tx meta data e.g. account owner and payment request information, 2 = drop tx meta data)\"));\n #endif\n \n+#if ENABLE_ZMQ\n+    strUsage += HelpMessageGroup(_(\"ZeroMQ notification options\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34868047",
      "id" : 34868047,
      "original_commit_id" : "a3ae0c1f2528e4dd85a6ec85dc073df567d79657",
      "original_position" : 45,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34868047",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34868133"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34868133"
         }
      },
      "body" : "This needs to be ``BITCOIN_ZMQ_ZMQCONFIG_H`` also don't forget the header end comment.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-07-17T07:38:05Z",
      "diff_hunk" : "@@ -0,0 +1,30 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_ZMQGLOBAL_H",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34868133",
      "id" : 34868133,
      "original_commit_id" : "a3ae0c1f2528e4dd85a6ec85dc073df567d79657",
      "original_position" : 6,
      "path" : "src/zmq/zmqconfig.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34868133",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34868167"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34868167"
         }
      },
      "body" : "This is duplicated and also the includes look weird, perhaps some merge-conflict-leftover?",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-07-17T07:38:48Z",
      "diff_hunk" : "@@ -0,0 +1,30 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_ZMQGLOBAL_H\n+#define BITCOIN_ZMQGLOBAL_H\n+\n+#if defined(HAVE_CONFIG_H)\n+#include \"config/bitcoin-config.h\"\n+#endif\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include <stdarg.h>\n+\n+void zmqError(const char *str);\n+\n+#if defined(HAVE_CONFIG_H)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34868167",
      "id" : 34868167,
      "original_commit_id" : "a3ae0c1f2528e4dd85a6ec85dc073df567d79657",
      "original_position" : 21,
      "path" : "src/zmq/zmqconfig.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34868167",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34868194"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34868194"
         }
      },
      "body" : "Needs to be ``BITCOIN_ZMQ_ZMQABSTRACTNOTIFIER_H`` also as header end comment.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-07-17T07:39:18Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_ZMQABSTRACTNOTIFIER_H",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34868194",
      "id" : 34868194,
      "original_commit_id" : "a3ae0c1f2528e4dd85a6ec85dc073df567d79657",
      "original_position" : 6,
      "path" : "src/zmq/zmqabstractnotifier.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34868194",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34868229"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34868229"
         }
      },
      "body" : "Is this needed, seems it's coming from the custom zmq headers.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-07-17T07:40:03Z",
      "diff_hunk" : "@@ -0,0 +1,159 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqnotificationinterface.h\"\n+#include \"zmqpublishnotifier.h\"\n+\n+#include \"version.h\"\n+#include \"main.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+\n+#include <zmq.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34868229",
      "id" : 34868229,
      "original_commit_id" : "a3ae0c1f2528e4dd85a6ec85dc073df567d79657",
      "original_position" : 15,
      "path" : "src/zmq/zmqnotificationinterface.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34868229",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34868295"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34868295"
         }
      },
      "body" : "Unneeded ``.c_str()`` and there are some more in here.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-07-17T07:42:04Z",
      "diff_hunk" : "@@ -0,0 +1,170 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqpublishnotifier.h\"\n+#include \"main.h\"\n+#include \"net.h\"\n+#include \"util.h\"\n+\n+#include <zmq.h>\n+\n+static std::multimap<std::string, CZMQAbstractPublishNotifier*> mapPublishNotifiers;\n+\n+// Internal function to send multipart message\n+static int zmq_send_multipart(void *sock, const void* data, size_t size, ...)\n+{\n+    va_list args;\n+    va_start(args, size);\n+\n+    while (1)\n+    {\n+        zmq_msg_t msg;\n+\n+        int rc = zmq_msg_init_size(&msg, size);\n+        if (rc != 0)\n+        {\n+            zmqError(\"Unable to initialize ZMQ msg\");\n+            return -1;\n+        }\n+\n+        void *buf = zmq_msg_data(&msg);\n+        memcpy(buf, data, size);\n+\n+        data = va_arg(args, const void*);\n+\n+        rc = zmq_msg_send(&msg, sock, data ? ZMQ_SNDMORE : 0);\n+        if (rc == -1)\n+        {\n+            zmqError(\"Unable to send ZMQ msg\");\n+            zmq_msg_close(&msg);\n+            return -1;\n+        }\n+\n+        zmq_msg_close(&msg);\n+\n+        if (!data)\n+            break;\n+\n+        size = va_arg(args, size_t);\n+    }\n+    return 0;\n+}\n+\n+bool CZMQAbstractPublishNotifier::Initialize(void *pcontext)\n+{\n+    assert(!psocket);\n+\n+    // check if address is being used by other publish notifier\n+    std::multimap<std::string, CZMQAbstractPublishNotifier*>::iterator i = mapPublishNotifiers.find(address);\n+\n+    if (i==mapPublishNotifiers.end())\n+    {\n+        psocket = zmq_socket(pcontext, ZMQ_PUB);\n+        if (!psocket)\n+        {\n+            zmqError(\"Failed to create socket\");\n+            return false;\n+        }\n+\n+        int rc = zmq_bind(psocket, address.c_str());\n+        if (rc!=0)\n+        {\n+            zmqError(\"Failed to bind address\");\n+            return false;\n+        }\n+\n+        // register this notifier for the address, so it can be reused for other publish notifier\n+        mapPublishNotifiers.insert(std::make_pair(address, this));\n+        return true;\n+    }\n+    else\n+    {\n+        LogPrint(\"zmq\", \"  Reuse socket for address %s\\n\", address.c_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34868295",
      "id" : 34868295,
      "original_commit_id" : "a3ae0c1f2528e4dd85a6ec85dc073df567d79657",
      "original_position" : 84,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34868295",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34868403"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34868403"
         }
      },
      "body" : "Needs to be ``BITCOIN_ZMQ_ZMQPUBLISHNOTIFIER_H`` also at the header end comment.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-07-17T07:44:51Z",
      "diff_hunk" : "@@ -0,0 +1,42 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_ZMQPUBLISHNOTIFIER_H",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r34868403",
      "id" : 34868403,
      "original_commit_id" : "a3ae0c1f2528e4dd85a6ec85dc073df567d79657",
      "original_position" : 6,
      "path" : "src/zmq/zmqpublishnotifier.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34868403",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo thanks, fixed.",
      "created_at" : "2015-07-20T21:05:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-123038892",
      "id" : 123038892,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-07-22T00:23:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/123038892",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "\"it works\" lightly tested ACK.  Needs additional testing to make sure it builds/works on a few platforms.\r\n",
      "created_at" : "2015-07-23T19:35:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-124219493",
      "id" : 124219493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-07-23T19:35:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/124219493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@venzen Please update and try again.",
      "created_at" : "2015-07-25T08:13:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-124819620",
      "id" : 124819620,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-07-25T08:13:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/124819620",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag  thanks, now compiles and my SUB receives blocks and transactions. However, after an initial one minute spurt of PUBs, Core apparently stops sending `getdata` requests (peer connection activity continues but no new blocks or txns arrive), and an RPC `getrawmempool` shows the mempool is now empty. `bitcoind` process doesn't TERM and has to be KILLed .\r\n\r\nIf `bitcoind` is started without specifying any zmq PUB socket, it works as expected.\r\n\r\nStill trying to figure out why. Confirmed for combinations of mainnet & testnet, ipv4 & onion, pruned & full-node. Tried libzmq1, libzmq3. Compiled and tested with libboost-1.55.0 in Ubuntu 14.04 on two separate hosts.",
      "created_at" : "2015-07-29T04:21:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-125834591",
      "id" : 125834591,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-07-29T05:22:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/125834591",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6916056?v=3",
         "events_url" : "https://api.github.com/users/venzen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/venzen/followers",
         "following_url" : "https://api.github.com/users/venzen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/venzen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/venzen",
         "id" : 6916056,
         "login" : "venzen",
         "organizations_url" : "https://api.github.com/users/venzen/orgs",
         "received_events_url" : "https://api.github.com/users/venzen/received_events",
         "repos_url" : "https://api.github.com/users/venzen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/venzen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/venzen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/venzen"
      }
   },
   {
      "body" : "@promag OK, I've found the reason why I was getting the behavior mentioned above. It has to do with which notifiers one specifies on the commandline, and also on the combination of notifiers. Some combinations work, others don't. There are similar errors for different combinations.\r\n\r\nFirstly, these combinations work as expected:\r\n* hashblock + hashtx\r\n* rawblock + rawtx \r\n* rawblock + hashtx \r\n* hashblock + rawtx \r\n \r\nSpecifying **one notifier only**, has the following results:\r\n* **hashtx**    - inventory exchange stops after *Connect postprocess* and *Connect block* shows in debug.log, p2p connections, `version` and `verack` continues but no `getdata` requests are made.\r\n* **rawtx**     - same as above\r\n* **hashblock** - node starts, creates the PUB socket but then infintely (and rapidly) repeats *Publish hash block* for the same block.\r\n* **rawblock**  - same as above but more slowly\r\n\r\nI think it is useful and resource efficient to be able to specify a single notifier only.\r\n\r\nCombinations:\r\n* **rawblock + rawtx + hashtx**    - inventory exchange stops after *Connect postprocess* and *Connect block* shows in debug.log, p2p connections, `version` and `verack` continues.\r\n* **rawblock + rawtx + hashblock** - works until hashblock is PUBd and then infinitely repeats *Publish hash block* for the same block.\r\n* **hashblock + hashtx + rawtx**    - same as above\r\n* **hashblock + hashtx + rawblock** - works until a hashblock is PUBd, then infintely PUBs both hashblock and rawblock, e.g.:\r\n\r\n*2015-07-30 05:04:03 Publish hash block 000000000000000014ea2a49bc2165bbc9351adeb9e26870d8ba9049325fe506\r\n2015-07-30 05:04:03 Publish raw block 000000000000000014ea2a49bc2165bbc9351adeb9e26870d8ba9049325fe506*\r\n(repeats same two messages infinitely)\r\n\r\nMultiple identical notifier instances (this is interesting but probably irrelevant):\r\n* hashblock + 2x hashtx - works\r\n* rawtx + 2x hashblock  - works\r\n* rawbloc + 2x hashtx   - hashtxs are PUBd, rawblock socket is created but no rawblocks PUBd\r\n* hashblock + 2x rawtx  - works",
      "created_at" : "2015-07-30T06:59:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-126205016",
      "id" : 126205016,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-07-30T07:42:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/126205016",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6916056?v=3",
         "events_url" : "https://api.github.com/users/venzen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/venzen/followers",
         "following_url" : "https://api.github.com/users/venzen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/venzen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/venzen",
         "id" : 6916056,
         "login" : "venzen",
         "organizations_url" : "https://api.github.com/users/venzen/orgs",
         "received_events_url" : "https://api.github.com/users/venzen/received_events",
         "repos_url" : "https://api.github.com/users/venzen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/venzen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/venzen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/venzen"
      }
   },
   {
      "body" : "@venzen Thanks for the detailed report. Will look into it.",
      "created_at" : "2015-07-30T09:04:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-126233626",
      "id" : 126233626,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-07-30T09:04:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/126233626",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@venzen can you specify the zmq addresses for each case? Were you using the same address for multiple topics? tpc or ipc?",
      "created_at" : "2015-08-25T10:18:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-134547613",
      "id" : 134547613,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-08-25T10:18:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/134547613",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r37853617"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37853617"
         }
      },
      "body" : "Found bug here: 3rd statement `++i` shouldn't be there.\r\n@venzen I believe this is related to you problem, because with only one publisher the loop doesn't ends.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-08-25T11:07:22Z",
      "diff_hunk" : "@@ -0,0 +1,157 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqnotificationinterface.h\"\n+#include \"zmqpublishnotifier.h\"\n+\n+#include \"version.h\"\n+#include \"main.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+\n+void zmqError(const char *str)\n+{\n+    LogPrint(\"zmq\", \"Error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+\n+CZMQNotificationInterface::CZMQNotificationInterface() : pcontext(NULL)\n+{\n+}\n+\n+CZMQNotificationInterface::~CZMQNotificationInterface()\n+{\n+    // ensure Shutdown if Initialize is called\n+    assert(!pcontext);\n+\n+    for (std::list<CZMQAbstractNotifier*>::iterator i=notifiers.begin(); i!=notifiers.end(); ++i)\n+    {\n+        delete *i;\n+    }\n+}\n+\n+CZMQNotificationInterface* CZMQNotificationInterface::CreateWithArguments(const std::map<std::string, std::string> &args)\n+{\n+    CZMQNotificationInterface* notificationInterface = NULL;\n+    std::map<std::string, CZMQNotifierFactory> factories;\n+    std::list<CZMQAbstractNotifier*> notifiers;\n+\n+    factories[\"pubhashblock\"] = CZMQAbstractNotifier::Create<CZMQPublishHashBlockNotifier>;\n+    factories[\"pubhashtx\"] = CZMQAbstractNotifier::Create<CZMQPublishHashTransactionNotifier>;\n+    factories[\"pubrawblock\"] = CZMQAbstractNotifier::Create<CZMQPublishRawBlockNotifier>;\n+    factories[\"pubrawtx\"] = CZMQAbstractNotifier::Create<CZMQPublishRawTransactionNotifier>;\n+\n+    for (std::map<std::string, CZMQNotifierFactory>::const_iterator i=factories.begin(); i!=factories.end(); ++i)\n+    {\n+        std::map<std::string, std::string>::const_iterator j = args.find(\"-zmq\" + i->first);\n+        if (j!=args.end())\n+        {\n+            CZMQNotifierFactory factory = i->second;\n+            std::string address = j->second;\n+            CZMQAbstractNotifier *notifier = factory();\n+            notifier->SetType(i->first);\n+            notifier->SetAddress(address);\n+            notifiers.push_back(notifier);\n+        }\n+    }\n+\n+    if (!notifiers.empty())\n+    {\n+        notificationInterface = new CZMQNotificationInterface();\n+        notificationInterface->notifiers = notifiers;\n+    }\n+\n+    return notificationInterface;\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+bool CZMQNotificationInterface::Initialize()\n+{\n+    LogPrint(\"zmq\", \"Initialize notification interface\\n\");\n+    assert(!pcontext);\n+\n+    pcontext = zmq_init(1);\n+\n+    if (!pcontext)\n+    {\n+        zmqError(\"Unable to initialize context\");\n+        return false;\n+    }\n+\n+    std::list<CZMQAbstractNotifier*>::iterator i=notifiers.begin();\n+    for (; i!=notifiers.end(); ++i)\n+    {\n+        CZMQAbstractNotifier *notifier = *i;\n+        if (notifier->Initialize(pcontext))\n+        {\n+            LogPrint(\"zmq\", \"  Notifier %s ready (address = %s)\\n\", notifier->GetType(), notifier->GetAddress());\n+        }\n+        else\n+        {\n+            LogPrint(\"zmq\", \"  Notifier %s failed (address = %s)\\n\", notifier->GetType(), notifier->GetAddress());\n+            break;\n+        }\n+    }\n+\n+    if (i!=notifiers.end())\n+    {\n+        Shutdown();\n+        return false;\n+    }\n+\n+    return false;\n+}\n+\n+// Called during shutdown sequence\n+void CZMQNotificationInterface::Shutdown()\n+{\n+    LogPrint(\"zmq\", \"Shutdown notification interface\\n\");\n+    if (pcontext)\n+    {\n+        for (std::list<CZMQAbstractNotifier*>::iterator i=notifiers.begin(); i!=notifiers.end(); ++i)\n+        {\n+            CZMQAbstractNotifier *notifier = *i;\n+            LogPrint(\"zmq\", \"   Shutdown notifier %s at %s\\n\", notifier->GetType(), notifier->GetAddress());\n+            notifier->Shutdown();\n+        }\n+        zmq_ctx_destroy(pcontext);\n+\n+        pcontext = 0;\n+    }\n+}\n+\n+void CZMQNotificationInterface::UpdatedBlockTip(const uint256 &hash)\n+{\n+    for (std::list<CZMQAbstractNotifier*>::iterator i = notifiers.begin(); i!=notifiers.end(); ++i)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r37853617",
      "id" : 37853617,
      "original_commit_id" : "1a08136b58074c31ae7796dde02d954ce543fd95",
      "original_position" : 127,
      "path" : "src/zmq/zmqnotificationinterface.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37853617",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@venzen Fixed and rebased. Tested your combinations and it's working. Please test again.",
      "created_at" : "2015-08-25T11:25:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-134558726",
      "id" : 134558726,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-08-25T11:25:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/134558726",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@jonasschnelli @jgarzik @luke-jr @theuni @sipa do you want to review/test?",
      "created_at" : "2015-08-26T22:53:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-135199496",
      "id" : 135199496,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-08-26T22:53:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/135199496",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Untested re-ACK. I'm looking forward to this being finally merged.",
      "created_at" : "2015-08-27T00:09:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-135212498",
      "id" : 135212498,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-08-27T00:09:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/135212498",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r38071295"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/38071295"
         }
      },
      "body" : "I think this should be `--enable-zqm` (@theuni?)",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-08-27T08:09:57Z",
      "diff_hunk" : "@@ -137,6 +137,12 @@ AC_ARG_ENABLE([glibc-back-compat],\n   [use_glibc_compat=$enableval],\n   [use_glibc_compat=no])\n \n+AC_ARG_ENABLE([zmq],\n+  [AC_HELP_STRING([--disable-zmq],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r38071295",
      "id" : 38071295,
      "original_commit_id" : "75bf9d0ca42cf0a78cbc7f3b2459b44d0b0275fe",
      "original_position" : 5,
      "path" : "configure.ac",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/38071295",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli by default if libzmq is found then it will enabled zmq unless it's disabled on configure. That was discussed: \r\nhttps://github.com/bitcoin/bitcoin/pull/4594#issuecomment-50409819.",
      "created_at" : "2015-08-27T10:15:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-135371638",
      "id" : 135371638,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-08-27T10:15:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/135371638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r38102514"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/38102514"
         }
      },
      "body" : "nit: Remove this line?",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-08-27T14:39:01Z",
      "diff_hunk" : "@@ -2303,6 +2303,8 @@ bool ActivateBestChain(CValidationState &state, const CBlock *pblock) {\n                         pnode->PushInventory(CInv(MSG_BLOCK, hashNewTip));\n             }\n             // Notify external listeners about the new tip.\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r38102514",
      "id" : 38102514,
      "original_commit_id" : "75bf9d0ca42cf0a78cbc7f3b2459b44d0b0275fe",
      "original_position" : 4,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/38102514",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r38102760"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/38102760"
         }
      },
      "body" : "nit: s/i ++/i++?",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-08-27T14:40:56Z",
      "diff_hunk" : "@@ -0,0 +1,157 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqnotificationinterface.h\"\n+#include \"zmqpublishnotifier.h\"\n+\n+#include \"version.h\"\n+#include \"main.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+\n+void zmqError(const char *str)\n+{\n+    LogPrint(\"zmq\", \"Error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+\n+CZMQNotificationInterface::CZMQNotificationInterface() : pcontext(NULL)\n+{\n+}\n+\n+CZMQNotificationInterface::~CZMQNotificationInterface()\n+{\n+    // ensure Shutdown if Initialize is called\n+    assert(!pcontext);\n+\n+    for (std::list<CZMQAbstractNotifier*>::iterator i=notifiers.begin(); i!=notifiers.end(); ++i)\n+    {\n+        delete *i;\n+    }\n+}\n+\n+CZMQNotificationInterface* CZMQNotificationInterface::CreateWithArguments(const std::map<std::string, std::string> &args)\n+{\n+    CZMQNotificationInterface* notificationInterface = NULL;\n+    std::map<std::string, CZMQNotifierFactory> factories;\n+    std::list<CZMQAbstractNotifier*> notifiers;\n+\n+    factories[\"pubhashblock\"] = CZMQAbstractNotifier::Create<CZMQPublishHashBlockNotifier>;\n+    factories[\"pubhashtx\"] = CZMQAbstractNotifier::Create<CZMQPublishHashTransactionNotifier>;\n+    factories[\"pubrawblock\"] = CZMQAbstractNotifier::Create<CZMQPublishRawBlockNotifier>;\n+    factories[\"pubrawtx\"] = CZMQAbstractNotifier::Create<CZMQPublishRawTransactionNotifier>;\n+\n+    for (std::map<std::string, CZMQNotifierFactory>::const_iterator i=factories.begin(); i!=factories.end(); ++i)\n+    {\n+        std::map<std::string, std::string>::const_iterator j = args.find(\"-zmq\" + i->first);\n+        if (j!=args.end())\n+        {\n+            CZMQNotifierFactory factory = i->second;\n+            std::string address = j->second;\n+            CZMQAbstractNotifier *notifier = factory();\n+            notifier->SetType(i->first);\n+            notifier->SetAddress(address);\n+            notifiers.push_back(notifier);\n+        }\n+    }\n+\n+    if (!notifiers.empty())\n+    {\n+        notificationInterface = new CZMQNotificationInterface();\n+        notificationInterface->notifiers = notifiers;\n+    }\n+\n+    return notificationInterface;\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+bool CZMQNotificationInterface::Initialize()\n+{\n+    LogPrint(\"zmq\", \"Initialize notification interface\\n\");\n+    assert(!pcontext);\n+\n+    pcontext = zmq_init(1);\n+\n+    if (!pcontext)\n+    {\n+        zmqError(\"Unable to initialize context\");\n+        return false;\n+    }\n+\n+    std::list<CZMQAbstractNotifier*>::iterator i=notifiers.begin();\n+    for (; i!=notifiers.end(); ++i)\n+    {\n+        CZMQAbstractNotifier *notifier = *i;\n+        if (notifier->Initialize(pcontext))\n+        {\n+            LogPrint(\"zmq\", \"  Notifier %s ready (address = %s)\\n\", notifier->GetType(), notifier->GetAddress());\n+        }\n+        else\n+        {\n+            LogPrint(\"zmq\", \"  Notifier %s failed (address = %s)\\n\", notifier->GetType(), notifier->GetAddress());\n+            break;\n+        }\n+    }\n+\n+    if (i!=notifiers.end())\n+    {\n+        Shutdown();\n+        return false;\n+    }\n+\n+    return false;\n+}\n+\n+// Called during shutdown sequence\n+void CZMQNotificationInterface::Shutdown()\n+{\n+    LogPrint(\"zmq\", \"Shutdown notification interface\\n\");\n+    if (pcontext)\n+    {\n+        for (std::list<CZMQAbstractNotifier*>::iterator i=notifiers.begin(); i!=notifiers.end(); ++i)\n+        {\n+            CZMQAbstractNotifier *notifier = *i;\n+            LogPrint(\"zmq\", \"   Shutdown notifier %s at %s\\n\", notifier->GetType(), notifier->GetAddress());\n+            notifier->Shutdown();\n+        }\n+        zmq_ctx_destroy(pcontext);\n+\n+        pcontext = 0;\n+    }\n+}\n+\n+void CZMQNotificationInterface::UpdatedBlockTip(const uint256 &hash)\n+{\n+    for (std::list<CZMQAbstractNotifier*>::iterator i = notifiers.begin(); i!=notifiers.end(); )\n+    {\n+        CZMQAbstractNotifier *notifier = *i;\n+        if (notifier->NotifyBlock(hash))\n+        {\n+            i ++;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r38102760",
      "id" : 38102760,
      "original_commit_id" : "75bf9d0ca42cf0a78cbc7f3b2459b44d0b0275fe",
      "original_position" : 132,
      "path" : "src/zmq/zmqnotificationinterface.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/38102760",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r38104172"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/38104172"
         }
      },
      "body" : "nit: HASH BLOK  (missing C)",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-08-27T14:51:58Z",
      "diff_hunk" : "@@ -0,0 +1,37 @@\n+#!/usr/bin/env python2\n+\n+import array\n+import binascii\n+import zmq\n+\n+port = 28332\n+\n+zmqContext = zmq.Context()\n+zmqSubSocket = zmqContext.socket(zmq.SUB)\n+zmqSubSocket.setsockopt(zmq.SUBSCRIBE, \"hashblock\")\n+zmqSubSocket.setsockopt(zmq.SUBSCRIBE, \"hashtx\")\n+zmqSubSocket.setsockopt(zmq.SUBSCRIBE, \"rawblock\")\n+zmqSubSocket.setsockopt(zmq.SUBSCRIBE, \"rawtx\")\n+zmqSubSocket.connect(\"tcp://127.0.0.1:%i\" % port)\n+\n+try:\n+    while True:\n+        msg = zmqSubSocket.recv_multipart()\n+        topic = str(msg[0])\n+        body = msg[1]\n+\n+        if topic == \"hashblock\":\n+            print \"- HASH BLOK -\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r38104172",
      "id" : 38104172,
      "original_commit_id" : "75bf9d0ca42cf0a78cbc7f3b2459b44d0b0275fe",
      "original_position" : 24,
      "path" : "contrib/zmq/zmq_sub.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/38104172",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli fixed and rebased.",
      "created_at" : "2015-08-27T15:29:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-135469674",
      "id" : 135469674,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-08-27T15:29:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/135469674",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Did some testing.\r\n\r\nRPC Test is broken, please cherry pick: https://github.com/jonasschnelli/bitcoin/commit/4e1859a0a55291e67bb8acf3028039668ecfd32b\r\n\r\nRPC test sometimes fail (not always).\r\nWhen calling `generate(10)` sometimes it will result in:\r\n(11 transactions but only 9 blocks)\r\n\r\n```\r\nhashtx\r\nhashtx\r\nhashtx\r\nhashblock\r\nhashtx\r\nhashblock\r\nhashtx\r\nhashblock\r\nhashtx\r\nhashblock\r\nhashtx\r\nhashblock\r\nhashtx\r\nhashblock\r\nhashtx\r\nhashblock\r\nhashtx\r\nhashblock\r\nhashtx\r\nhashblock\r\n```",
      "created_at" : "2015-08-27T15:36:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-135471393",
      "id" : 135471393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-08-27T15:36:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/135471393",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "concept ACK",
      "created_at" : "2015-08-28T01:13:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-135596462",
      "id" : 135596462,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-08-28T01:13:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/135596462",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "@jonasschnelli thanks! However the problem is in the test, see https://github.com/jonasschnelli/bitcoin/commit/4e1859a0a55291e67bb8acf3028039668ecfd32b#commitcomment-12948902.\r\nFixed your commit and eventually will squash. Please check again.",
      "created_at" : "2015-08-28T14:26:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-135787947",
      "id" : 135787947,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-08-28T14:26:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/135787947",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r38206505"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/38206505"
         }
      },
      "body" : "I think we need to move the `zmq_test.py` to the `testScriptsExt` list otherwise travis cannot find the zmq python module. Maybe there is also a way to make travis support python/zmq.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-08-28T14:41:12Z",
      "diff_hunk" : "@@ -32,6 +32,7 @@ testScripts=(\n     'reindex.py'\n     'decodescript.py'\n     'p2p-fullblocktest.py'\n+    'zmq_test.py'",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r38206505",
      "id" : 38206505,
      "original_commit_id" : "a99a117ebdab25698988d5af50a86c48ab1181ff",
      "original_position" : 4,
      "path" : "qa/pull-tester/rpc-tests.sh",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/38206505",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r38208834"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/38208834"
         }
      },
      "body" : "I'll remove for now, waiting @theuni feedback. ",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-08-28T15:00:57Z",
      "diff_hunk" : "@@ -32,6 +32,7 @@ testScripts=(\n     'reindex.py'\n     'decodescript.py'\n     'p2p-fullblocktest.py'\n+    'zmq_test.py'",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r38208834",
      "id" : 38208834,
      "original_commit_id" : "a99a117ebdab25698988d5af50a86c48ab1181ff",
      "original_position" : 4,
      "path" : "qa/pull-tester/rpc-tests.sh",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/38208834",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "FYI how I run the test: `python qa/rpc-tests/zmq_test.py --srcdir src/`",
      "created_at" : "2015-08-28T15:23:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-135805134",
      "id" : 135805134,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-08-28T15:23:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/135805134",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag: Yes. Thats right. The `rpc-tests.sh` will get called during travis CI builds.",
      "created_at" : "2015-08-28T15:33:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-135807711",
      "id" : 135807711,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-08-28T15:33:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/135807711",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Travis will support it as long as it's installed via depends. However Windows isn't using it right now.\r\n\r\nWe'll need to add a variable to qa/pull-tester/tests-config.sh.in similar to the ENABLE_WALLET case. \r\n\r\nThere are a few other issues I noticed in the configure.ac changes, I'll fix those things up and provide a patch.",
      "created_at" : "2015-08-28T16:15:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-135822630",
      "id" : 135822630,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-08-28T16:15:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/135822630",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@theuni just bumping in case you forgot.",
      "created_at" : "2015-09-01T09:09:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-136643464",
      "id" : 136643464,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-01T10:06:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/136643464",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag Thanks, indeed I did. I'll get to this asap.",
      "created_at" : "2015-09-02T03:18:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-136923055",
      "id" : 136923055,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-02T03:18:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/136923055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@promag it's going to be a few days before I can get to the configure changes, but the rpc-tests should be pretty trivial:\r\n```patch\r\ndiff --git a/qa/pull-tester/tests-config.sh.in b/qa/pull-tester/tests-config.sh.in\r\nindex 10f4d33..e881a95 100755\r\n--- a/qa/pull-tester/tests-config.sh.in\r\n+++ b/qa/pull-tester/tests-config.sh.in\r\n@@ -10,6 +10,7 @@ EXEEXT=\"@EXEEXT@\"\r\n @ENABLE_WALLET_TRUE@ENABLE_WALLET=1\r\n @BUILD_BITCOIN_UTILS_TRUE@ENABLE_UTILS=1\r\n @BUILD_BITCOIND_TRUE@ENABLE_BITCOIND=1\r\n+@ENABLE_ZMQ_TRUE@ENABLE_ZMQ=1\r\n \r\n REAL_BITCOIND=\"$BUILDDIR/src/bitcoind${EXEEXT}\"\r\n REAL_BITCOINCLI=\"$BUILDDIR/src/bitcoin-cli${EXEEXT}\"\r\n```\r\nThen in qa/pull-tester/rpc-tests.sh, ENABLE_ZMQ will either be empty, or set to \"1\" depending on whether it was enabled in configure. You can use that to conditionally add zmq_test.py to the tests array.",
      "created_at" : "2015-09-02T21:27:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-137249512",
      "id" : 137249512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-02T21:27:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137249512",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Needs rebase (I'm asuming after #5677 ).",
      "created_at" : "2015-09-04T15:24:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-137765561",
      "id" : 137765561,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-04T15:24:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137765561",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@promag looks great, assuming it works as intended",
      "created_at" : "2015-09-09T16:30:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-138964466",
      "id" : 138964466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-09T16:30:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138964466",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@laanwj @sipa any chance this feature be in the next release? ",
      "created_at" : "2015-09-10T15:03:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139273453",
      "id" : 139273453,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T15:03:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139273453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39171541"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39171541"
         }
      },
      "body" : "s/BLOK/BLOCK/",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-10T15:12:07Z",
      "diff_hunk" : "@@ -0,0 +1,37 @@\n+#!/usr/bin/env python2\n+\n+import array\n+import binascii\n+import zmq\n+\n+port = 28332\n+\n+zmqContext = zmq.Context()\n+zmqSubSocket = zmqContext.socket(zmq.SUB)\n+zmqSubSocket.setsockopt(zmq.SUBSCRIBE, \"hashblock\")\n+zmqSubSocket.setsockopt(zmq.SUBSCRIBE, \"hashtx\")\n+zmqSubSocket.setsockopt(zmq.SUBSCRIBE, \"rawblock\")\n+zmqSubSocket.setsockopt(zmq.SUBSCRIBE, \"rawtx\")\n+zmqSubSocket.connect(\"tcp://127.0.0.1:%i\" % port)\n+\n+try:\n+    while True:\n+        msg = zmqSubSocket.recv_multipart()\n+        topic = str(msg[0])\n+        body = msg[1]\n+\n+        if topic == \"hashblock\":\n+            print \"- HASH BLOCK -\"\n+            print binascii.hexlify(body)\n+        elif topic == \"hashtx\":\n+            print '- HASH TX -'\n+            print binascii.hexlify(body)\n+        elif topic == \"rawblock\":\n+            print \"- RAW BLOK HEADER -\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39171541",
      "id" : 39171541,
      "original_commit_id" : "56607b879eb98bacc749991aea5b06b7c5969a4e",
      "original_position" : 30,
      "path" : "contrib/zmq/zmq_sub.py",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39171541",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39171763"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39171763"
         }
      },
      "body" : "You need a cs_main lock here.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-10T15:14:10Z",
      "diff_hunk" : "@@ -0,0 +1,170 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqpublishnotifier.h\"\n+#include \"main.h\"\n+#include \"net.h\"\n+#include \"util.h\"\n+\n+#include <zmq.h>\n+\n+static std::multimap<std::string, CZMQAbstractPublishNotifier*> mapPublishNotifiers;\n+\n+// Internal function to send multipart message\n+static int zmq_send_multipart(void *sock, const void* data, size_t size, ...)\n+{\n+    va_list args;\n+    va_start(args, size);\n+\n+    while (1)\n+    {\n+        zmq_msg_t msg;\n+\n+        int rc = zmq_msg_init_size(&msg, size);\n+        if (rc != 0)\n+        {\n+            zmqError(\"Unable to initialize ZMQ msg\");\n+            return -1;\n+        }\n+\n+        void *buf = zmq_msg_data(&msg);\n+        memcpy(buf, data, size);\n+\n+        data = va_arg(args, const void*);\n+\n+        rc = zmq_msg_send(&msg, sock, data ? ZMQ_SNDMORE : 0);\n+        if (rc == -1)\n+        {\n+            zmqError(\"Unable to send ZMQ msg\");\n+            zmq_msg_close(&msg);\n+            return -1;\n+        }\n+\n+        zmq_msg_close(&msg);\n+\n+        if (!data)\n+            break;\n+\n+        size = va_arg(args, size_t);\n+    }\n+    return 0;\n+}\n+\n+bool CZMQAbstractPublishNotifier::Initialize(void *pcontext)\n+{\n+    assert(!psocket);\n+\n+    // check if address is being used by other publish notifier\n+    std::multimap<std::string, CZMQAbstractPublishNotifier*>::iterator i = mapPublishNotifiers.find(address);\n+\n+    if (i==mapPublishNotifiers.end())\n+    {\n+        psocket = zmq_socket(pcontext, ZMQ_PUB);\n+        if (!psocket)\n+        {\n+            zmqError(\"Failed to create socket\");\n+            return false;\n+        }\n+\n+        int rc = zmq_bind(psocket, address.c_str());\n+        if (rc!=0)\n+        {\n+            zmqError(\"Failed to bind address\");\n+            return false;\n+        }\n+\n+        // register this notifier for the address, so it can be reused for other publish notifier\n+        mapPublishNotifiers.insert(std::make_pair(address, this));\n+        return true;\n+    }\n+    else\n+    {\n+        LogPrint(\"zmq\", \"  Reuse socket for address %s\\n\", address);\n+\n+        psocket = i->second->psocket;\n+        mapPublishNotifiers.insert(std::make_pair(address, this));\n+\n+        return true;\n+    }\n+}\n+\n+void CZMQAbstractPublishNotifier::Shutdown()\n+{\n+    assert(psocket);\n+\n+    int count = mapPublishNotifiers.count(address);\n+\n+    // remove this notifier from the list of publishers using this address\n+    typedef std::multimap<std::string, CZMQAbstractPublishNotifier*>::iterator iterator;\n+    std::pair<iterator, iterator> iterpair = mapPublishNotifiers.equal_range(address);\n+\n+    for (iterator it = iterpair.first; it != iterpair.second; ++it)\n+    {\n+        if (it->second==this)\n+        {\n+            mapPublishNotifiers.erase(it);\n+            break;\n+        }\n+    }\n+\n+    if (count == 1)\n+    {\n+        LogPrint(\"zmq\", \"Close socket at address %s\\n\", address);\n+        int linger = 0;\n+        zmq_setsockopt(psocket, ZMQ_LINGER, &linger, sizeof(linger));\n+        zmq_close(psocket);\n+    }\n+\n+    psocket = 0;\n+}\n+\n+bool CZMQPublishHashBlockNotifier::NotifyBlock(const uint256 &hash)\n+{\n+    LogPrint(\"zmq\", \"Publish hash block %s\\n\", hash.GetHex());\n+    char data[32];\n+    for (unsigned int i = 0; i < 32; i++)\n+        data[31 - i] = hash.begin()[i];\n+    int rc = zmq_send_multipart(psocket, \"hashblock\", 9, data, 32, 0);\n+    return rc == 0;\n+}\n+\n+bool CZMQPublishHashTransactionNotifier::NotifyTransaction(const CTransaction &transaction)\n+{\n+    uint256 hash = transaction.GetHash();\n+    LogPrint(\"zmq\", \"Publish hash transaction %s\\n\", hash.GetHex());\n+    char data[32];\n+    for (unsigned int i = 0; i < 32; i++)\n+        data[31 - i] = hash.begin()[i];\n+    int rc = zmq_send_multipart(psocket, \"hashtx\", 6, data, 32, 0);\n+    return rc == 0;\n+}\n+\n+bool CZMQPublishRawBlockNotifier::NotifyBlock(const uint256 &hash)\n+{\n+    LogPrint(\"zmq\", \"Publish raw block %s\\n\", hash.GetHex());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39171763",
      "id" : 39171763,
      "original_commit_id" : "56607b879eb98bacc749991aea5b06b7c5969a4e",
      "original_position" : 146,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : 142,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39171763",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I'm not convinced that the current implementation of sending a full block (\"rawblock\") makes sense.\r\n\r\nThe hashes published by UpdatedBlockTip indicate a new block tip, which in the case of a reorganization from chain A-B to A-C-D, will only notify for B and for D, but not for C. This is useful - it's an indication that you need to go query block D, and if you don't have its ancestor, query that too etc.\r\n\r\nBut when sending full blocks through the interface, I'm much less certain this is useful. You can't be guaranteed to receive all blocks - only those that happen to be at the tip after every reorg/connect.\r\n",
      "created_at" : "2015-09-10T15:20:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139277661",
      "id" : 139277661,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T15:20:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139277661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39172953"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39172953"
         }
      },
      "body" : "Alternatively, if you send CBlockIndex* pointers in the signal rather than the hash, you don't need to. It's the access to mapBlockIndex that's problematic.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-10T15:23:28Z",
      "diff_hunk" : "@@ -0,0 +1,170 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqpublishnotifier.h\"\n+#include \"main.h\"\n+#include \"net.h\"\n+#include \"util.h\"\n+\n+#include <zmq.h>\n+\n+static std::multimap<std::string, CZMQAbstractPublishNotifier*> mapPublishNotifiers;\n+\n+// Internal function to send multipart message\n+static int zmq_send_multipart(void *sock, const void* data, size_t size, ...)\n+{\n+    va_list args;\n+    va_start(args, size);\n+\n+    while (1)\n+    {\n+        zmq_msg_t msg;\n+\n+        int rc = zmq_msg_init_size(&msg, size);\n+        if (rc != 0)\n+        {\n+            zmqError(\"Unable to initialize ZMQ msg\");\n+            return -1;\n+        }\n+\n+        void *buf = zmq_msg_data(&msg);\n+        memcpy(buf, data, size);\n+\n+        data = va_arg(args, const void*);\n+\n+        rc = zmq_msg_send(&msg, sock, data ? ZMQ_SNDMORE : 0);\n+        if (rc == -1)\n+        {\n+            zmqError(\"Unable to send ZMQ msg\");\n+            zmq_msg_close(&msg);\n+            return -1;\n+        }\n+\n+        zmq_msg_close(&msg);\n+\n+        if (!data)\n+            break;\n+\n+        size = va_arg(args, size_t);\n+    }\n+    return 0;\n+}\n+\n+bool CZMQAbstractPublishNotifier::Initialize(void *pcontext)\n+{\n+    assert(!psocket);\n+\n+    // check if address is being used by other publish notifier\n+    std::multimap<std::string, CZMQAbstractPublishNotifier*>::iterator i = mapPublishNotifiers.find(address);\n+\n+    if (i==mapPublishNotifiers.end())\n+    {\n+        psocket = zmq_socket(pcontext, ZMQ_PUB);\n+        if (!psocket)\n+        {\n+            zmqError(\"Failed to create socket\");\n+            return false;\n+        }\n+\n+        int rc = zmq_bind(psocket, address.c_str());\n+        if (rc!=0)\n+        {\n+            zmqError(\"Failed to bind address\");\n+            return false;\n+        }\n+\n+        // register this notifier for the address, so it can be reused for other publish notifier\n+        mapPublishNotifiers.insert(std::make_pair(address, this));\n+        return true;\n+    }\n+    else\n+    {\n+        LogPrint(\"zmq\", \"  Reuse socket for address %s\\n\", address);\n+\n+        psocket = i->second->psocket;\n+        mapPublishNotifiers.insert(std::make_pair(address, this));\n+\n+        return true;\n+    }\n+}\n+\n+void CZMQAbstractPublishNotifier::Shutdown()\n+{\n+    assert(psocket);\n+\n+    int count = mapPublishNotifiers.count(address);\n+\n+    // remove this notifier from the list of publishers using this address\n+    typedef std::multimap<std::string, CZMQAbstractPublishNotifier*>::iterator iterator;\n+    std::pair<iterator, iterator> iterpair = mapPublishNotifiers.equal_range(address);\n+\n+    for (iterator it = iterpair.first; it != iterpair.second; ++it)\n+    {\n+        if (it->second==this)\n+        {\n+            mapPublishNotifiers.erase(it);\n+            break;\n+        }\n+    }\n+\n+    if (count == 1)\n+    {\n+        LogPrint(\"zmq\", \"Close socket at address %s\\n\", address);\n+        int linger = 0;\n+        zmq_setsockopt(psocket, ZMQ_LINGER, &linger, sizeof(linger));\n+        zmq_close(psocket);\n+    }\n+\n+    psocket = 0;\n+}\n+\n+bool CZMQPublishHashBlockNotifier::NotifyBlock(const uint256 &hash)\n+{\n+    LogPrint(\"zmq\", \"Publish hash block %s\\n\", hash.GetHex());\n+    char data[32];\n+    for (unsigned int i = 0; i < 32; i++)\n+        data[31 - i] = hash.begin()[i];\n+    int rc = zmq_send_multipart(psocket, \"hashblock\", 9, data, 32, 0);\n+    return rc == 0;\n+}\n+\n+bool CZMQPublishHashTransactionNotifier::NotifyTransaction(const CTransaction &transaction)\n+{\n+    uint256 hash = transaction.GetHash();\n+    LogPrint(\"zmq\", \"Publish hash transaction %s\\n\", hash.GetHex());\n+    char data[32];\n+    for (unsigned int i = 0; i < 32; i++)\n+        data[31 - i] = hash.begin()[i];\n+    int rc = zmq_send_multipart(psocket, \"hashtx\", 6, data, 32, 0);\n+    return rc == 0;\n+}\n+\n+bool CZMQPublishRawBlockNotifier::NotifyBlock(const uint256 &hash)\n+{\n+    LogPrint(\"zmq\", \"Publish raw block %s\\n\", hash.GetHex());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39172953",
      "id" : 39172953,
      "original_commit_id" : "56607b879eb98bacc749991aea5b06b7c5969a4e",
      "original_position" : 146,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : 142,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39172953",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39173246"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39173246"
         }
      },
      "body" : "This does not seem to contain any code written by Satoshi, or before 2014 :)",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-10T15:25:28Z",
      "diff_hunk" : "@@ -0,0 +1,42 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39173246",
      "id" : 39173246,
      "original_commit_id" : "56607b879eb98bacc749991aea5b06b7c5969a4e",
      "original_position" : 1,
      "path" : "src/zmq/zmqpublishnotifier.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39173246",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39173399"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39173399"
         }
      },
      "body" : "You duplicated UpdatedTransaction here.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-10T15:26:40Z",
      "diff_hunk" : "@@ -43,6 +45,8 @@ void UnregisterAllValidationInterfaces() {\n     g_signals.SetBestChain.disconnect_all_slots();\n     g_signals.UpdatedTransaction.disconnect_all_slots();\n     g_signals.SyncTransaction.disconnect_all_slots();\n+    g_signals.UpdatedTransaction.disconnect_all_slots();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39173399",
      "id" : 39173399,
      "original_commit_id" : "56607b879eb98bacc749991aea5b06b7c5969a4e",
      "original_position" : 20,
      "path" : "src/validationinterface.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39173399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39174238"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39174238"
         }
      },
      "body" : "This is not actually correct in the current implementation. You'd need to use CValidationInterface's BlockChecked signal if you want that (see an example in rpcmining.cpp for submitblock).\r\n\r\nI think it's very important to make this distinction: what does the ZMQ block interface notify you about? Validated blocks or the accepted block chain? The first can include things like orphaned blocks, does not necessarily happen at the same time as relay, and does not tell you which block chain we're currently considering active. The second (what is currently implemented) only notifies for changes in the tip, and may skip blocks in reorgs.\r\n",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-10T15:32:25Z",
      "diff_hunk" : "@@ -0,0 +1,116 @@\n+# Block and Transaction Broadcasting With ZeroMQ\n+\n+[ZeroMQ](http://zeromq.org/) is a lightweight wrapper around TCP\n+connections, inter-process communications, and shared-memory,\n+providing various message-oriented semantics such as publish/subcribe,\n+request/reply, and push/pull.\n+\n+The Bitcoin Core daemon can be configured to act as a trusted \"border\n+router\", implementing the bitcoin wire protocol and relay, making\n+consensus decisions, maintaining the local blockchain database,\n+broadcasting locally generated transactions into the network, and\n+providing a queryable RPC interface to interact on a polled basis for\n+requesting blockchain related data.  However, there exists only a\n+limited service to notify external software of events like the arrival\n+of new blocks or transactions.\n+\n+The ZeroMQ facility implements a notification interface through a\n+set of specific notifiers. Currently there are notifiers that publish\n+blocks and transactions. The  supports a set of no binds a \"publish\"\n+port that broadcasts all newly arrived *and validated* blocks and",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39174238",
      "id" : 39174238,
      "original_commit_id" : "56607b879eb98bacc749991aea5b06b7c5969a4e",
      "original_position" : 20,
      "path" : "doc/zmq.md",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39174238",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39177157"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39177157"
         }
      },
      "body" : "Replace with just `// Copyright (c) 2015 The Bitcoin Core developers`?",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-10T15:55:48Z",
      "diff_hunk" : "@@ -0,0 +1,42 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39177157",
      "id" : 39177157,
      "original_commit_id" : "56607b879eb98bacc749991aea5b06b7c5969a4e",
      "original_position" : 1,
      "path" : "src/zmq/zmqpublishnotifier.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39177157",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39178507"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39178507"
         }
      },
      "body" : "Or your own name.\n",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-10T16:06:56Z",
      "diff_hunk" : "@@ -0,0 +1,42 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39178507",
      "id" : 39178507,
      "original_commit_id" : "56607b879eb98bacc749991aea5b06b7c5969a4e",
      "original_position" : 1,
      "path" : "src/zmq/zmqpublishnotifier.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39178507",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa \r\n\r\n> I'm not convinced that the current implementation of sending a full block (\"rawblock\") makes sense. The hashes published by UpdatedBlockTip indicate a new block tip, which in the case of a reorganization from chain A-B to A-C-D, will only notify for B and for D, but not for C. This is useful - it's an indication that you need to go query block D, and if you don't have its ancestor, query that too etc.\r\n\r\nI'm aware of that.\r\n\r\n> I think it's very important to make this distinction: what does the ZMQ block interface notify you about? Validated blocks or the accepted block chain?\r\n\r\nPublishing blocks happens the exact same way `blocknotify` script is executed. \r\n\r\nThe way we plan to use this feature is to replace notify scripts and use as a probe. The subscriber needs to determine the changes since the last notification. If he chooses to receive full block or not it will depend of his use case, after all, it's an option.",
      "created_at" : "2015-09-10T16:13:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139297519",
      "id" : 139297519,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T17:01:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139297519",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39179299"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39179299"
         }
      },
      "body" : "Will review this.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-10T16:13:46Z",
      "diff_hunk" : "@@ -0,0 +1,116 @@\n+# Block and Transaction Broadcasting With ZeroMQ\n+\n+[ZeroMQ](http://zeromq.org/) is a lightweight wrapper around TCP\n+connections, inter-process communications, and shared-memory,\n+providing various message-oriented semantics such as publish/subcribe,\n+request/reply, and push/pull.\n+\n+The Bitcoin Core daemon can be configured to act as a trusted \"border\n+router\", implementing the bitcoin wire protocol and relay, making\n+consensus decisions, maintaining the local blockchain database,\n+broadcasting locally generated transactions into the network, and\n+providing a queryable RPC interface to interact on a polled basis for\n+requesting blockchain related data.  However, there exists only a\n+limited service to notify external software of events like the arrival\n+of new blocks or transactions.\n+\n+The ZeroMQ facility implements a notification interface through a\n+set of specific notifiers. Currently there are notifiers that publish\n+blocks and transactions. The  supports a set of no binds a \"publish\"\n+port that broadcasts all newly arrived *and validated* blocks and",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39179299",
      "id" : 39179299,
      "original_commit_id" : "56607b879eb98bacc749991aea5b06b7c5969a4e",
      "original_position" : 20,
      "path" : "doc/zmq.md",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39179299",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@sipa \r\n\r\n> Code looks good, but as mentioned elsewhere, I don't think this is useful\r\nin its current form. If the receiver only receives the blocks that happen\r\nto be at the tip after a reorg, they need a separate mechanism to fetch the\r\npotential unannounced ancestors anyway, making the ability to receive full\r\nblocks immediately unnecessary and confusing.\r\n\r\nThe subscriber must always query from his last state, because the publisher doesn't know the subscriber state. Suppose the subscriber is restarted, there is some system maintenance or a network issue, the publisher has no way to re-publish what the subscriber needs.",
      "created_at" : "2015-09-10T19:44:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139358156",
      "id" : 139358156,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T19:44:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139358156",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "I'm just questioning what relaying full blocks adds (as opposed to just\nhashes), because the receiver should still have logic to fetch missing\nblocks in between the previous tip and the new tip.\n\nAgain: if you switch from a branch A-B-C-D for example to A-B-C'-D'-E, the\ncurrent code will only publish E, and not C' or D'. The publisher still\nneeds to fetch E's ancestors one by one with the current code. If the\nreceiver is supposed to do that anyway, what does giving the full block\ndirectly add? Either give all blocks along the path, or just publish the\ntop hash.\n",
      "created_at" : "2015-09-10T19:51:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139361434",
      "id" : 139361434,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T19:51:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139361434",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Those 2 things are unrelated, full blocks are only allowed optionally to maintain a consistent interface with the transactions (and other types that may be supported un the future). It may be the case that nobody subscribes to raw blocks (and I believe @promag didn't wanted to support full blocks). Take into account that we may add push/pull and/or req/rep in the future (let's finally do this first though).\r\n\r\nI don't understand your point about the publisher having to fetch, as promag has explained the publisher cannot know the state of its potentially many subscribers (with potentially different states). Subscribers will need to complement with the RPC (at least until we have req/rep zmq) to get whatever else they need.",
      "created_at" : "2015-09-10T20:38:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139372313",
      "id" : 139372313,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T20:38:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139372313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "+1 what @jtimon said.",
      "created_at" : "2015-09-10T20:39:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139372689",
      "id" : 139372689,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T20:39:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139372689",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "I disagree. What you're publishing is not blocks. It is updates to the chain tip. Sure, there is an actual block associated with that tip, but it's not a natural mapping. You could as well give the chainwork of that tip, or the time.\r\n\r\nThe documentation is equally confusing: \"As transactions and blocks arrive via the P2P network, Bitcoin Core will apply all the validation and standardization rules to this data, only passing along through ZeroMQ those items that pass.\". That is not what this pull request implements. It *will not* relay every block through ZeroMQ. It will only ever relay blocks that happen to at the tip of the chain after a reorg.\r\n\r\nI think there are a few ways to improve this:\r\n* Only publish the chain tip updates as hashes. That's exactly what -blocknotify does. The subscriber is expected to fetch the actual blocks whenever a notification happens.\r\n* After a reorg, publish *all blocks* that were activated through ZMQ. That will allow a subscriber who is already up-to-date to be able to follow new blocks as they come in and stay in sync, without needing to query RPC or REST. If you want to, I'll implement this.\r\n* Make the block data subscriber trigger BlockChecked and not UpdatedTip. This gives the subscriber no information about what the currently active chain is, but it does give all valid blocks as soon as they are validated.\r\n",
      "created_at" : "2015-09-10T21:04:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139378234",
      "id" : 139378234,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T21:09:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139378234",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "> Only publish the chain tip updates as hashes. That's exactly what -blocknotify does. The subscriber is expected to fetch the actual blocks whenever a notification happens.\r\n\r\nI believe this is the expected usage rigt now (even if it full blocks don't make much sense with this).\r\n\r\n\r\n> After a reorg, publish all blocks that were activated through ZMQ. That will allow a subscriber who is already up-to-date to be able to follow new blocks as they come in and stay in sync, without needing to query RPC or REST. If you want to, I'll implement this.\r\n\r\n> Make the block data subscriber trigger BlockChecked and not UpdatedTip. This gives the subscriber no information about what the currently active chain is, but it does give all valid blocks as soon as they are validated.\r\n\r\nI'm not opposed to the other 2 solutions, I think I like the second one the most.\r\nBut if it's going to delay this. Can we at least merge a subset of this with the transactions part?  That would at least introduce the zmq building dependency once and for all? I've been waiting for that for quite some time now...",
      "created_at" : "2015-09-10T21:20:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139382482",
      "id" : 139382482,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T21:20:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139382482",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Sure, the doc needs fixing. The option `-blocknotify` states\r\n```\r\n -blocknotify=<cmd>\r\n       Execute command when the best block changes (%s in cmd is replaced by\r\n       block hash)\r\n```\r\nAnd I would go for something like that.\r\n\r\n2nd is not viable, since the publisher should not assume the subscriber is up to date. The subscriber should have the option to not receive the (all supposed) missing blocks and he should have the option to defer the fetch of missing blocks. I'm fine with 3rd.\r\n\r\nHaving the full block on the notification can be helpful: a dummy subscriber, without RPC credential, could just log timestamp, blocksize, tx count for analytics. \r\n\r\nLike @jtimon said, the ideal solution is to have REQ/REP.",
      "created_at" : "2015-09-10T21:31:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139385314",
      "id" : 139385314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T21:31:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139385314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "I think that supporting full blocks encourages people to use it in an\nincorrect way, by only using those blocks and not taking reorganizations\ninto account.\n",
      "created_at" : "2015-09-10T21:32:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139385449",
      "id" : 139385449,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T21:32:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139385449",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "How does just the hash encourages to take reorganizations into account?",
      "created_at" : "2015-09-10T21:35:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139386041",
      "id" : 139386041,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T21:35:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139386041",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Just the hash is perfectly fine. That's what blocknotify does.\n\nSending the full block corresponding to the new tip encourages bad\npractice. People may not realize that it does not relay all blocks.\n",
      "created_at" : "2015-09-10T21:38:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139386537",
      "id" : 139386537,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T21:38:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139386537",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I still don't see how just the hash solves that problem. People will get the hash, query the block and then it's the same as receiving the full block.\r\nEdit: and again, it's just an option, and I believe we could just add remarks in the documentation.",
      "created_at" : "2015-09-10T21:40:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139386878",
      "id" : 139386878,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T21:40:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139386878",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "No, they need to get the hash, query the block, see if they have the\nancestor of the block, if not, query that, etc.\n\nIf you give them the blocks already, it will look like they don't need this\nrecursive fetch logic for ancestors. And it will work fine, except when\nthere is a reorg, in which they only receive the new tip, and not the block\nbefore.\n",
      "created_at" : "2015-09-10T21:46:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139388147",
      "id" : 139388147,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T21:46:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139388147",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "In general, agree w/ @sipa, just the hash on the first iteration.\r\n\r\nLonger term, it is forseeable that some folks looking for low latency may prefer full blocks versus added round-trips.  Such solutions would have a fast path - zero round trip - and a slower path fallback in case the full block was insufficient, and further block-locator style queries are needed.",
      "created_at" : "2015-09-10T21:53:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139391295",
      "id" : 139391295,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T21:53:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139391295",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "So it's the same: a client gets the full block, check if the parent is there, if not retrieve and repeat.",
      "created_at" : "2015-09-10T21:54:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139391691",
      "id" : 139391691,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T21:54:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139391691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@jgarzik also agree. I just don't agree that having just the hash option leads the subscriber to take reorgs into account.\r\nEdit: with just the hash, the subscriber could as well retrieve the tip and miss some blocks without recognising it.",
      "created_at" : "2015-09-10T21:56:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139392466",
      "id" : 139392466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T22:00:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139392466",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Yes, I fail to see the difference as well.\n",
      "created_at" : "2015-09-10T21:57:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139392485",
      "id" : 139392485,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T21:57:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139392485",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@promag If implemented correctly, there is no difference. You can present it as an optimization: \"This informs you about the new chain tip, and as courtesy, we already give you the last block immediately so you don't need to fetch it\". But I think the current interface gives the impression that it will relay all validated blocks, which is wrong and leads to incorrect understanding. The documentation even says so literally.\r\n",
      "created_at" : "2015-09-10T22:01:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139394307",
      "id" : 139394307,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T22:01:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139394307",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39220397"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39220397"
         }
      },
      "body" : "The subscriber has no way to verify that the published block is invalid - it would need a full node for that, and that's exactly what the ZMQ interface is for.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-10T22:05:28Z",
      "diff_hunk" : "@@ -0,0 +1,115 @@\n+# Block and Transaction Broadcasting With ZeroMQ\n+\n+[ZeroMQ](http://zeromq.org/) is a lightweight wrapper around TCP\n+connections, inter-process communications, and shared-memory,\n+providing various message-oriented semantics such as publish/subcribe,\n+request/reply, and push/pull.\n+\n+The Bitcoin Core daemon can be configured to act as a trusted \"border\n+router\", implementing the bitcoin wire protocol and relay, making\n+consensus decisions, maintaining the local blockchain database,\n+broadcasting locally generated transactions into the network, and\n+providing a queryable RPC interface to interact on a polled basis for\n+requesting blockchain related data. However, there exists only a\n+limited service to notify external software of events like the arrival\n+of new blocks or transactions.\n+\n+The ZeroMQ facility implements a notification interface through a\n+set of specific notifiers. Currently there are notifiers that publish\n+blocks and transactions. This read-only facility requires only the\n+connection of a corresponding ZeroMQ subscriber port in receiving \n+software; it is not authenticated nor is there any two-way protocol\n+involvement. Therefore, subscribers should validate the received data\n+since it may be out of date, incomplete or even invalid.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39220397",
      "id" : 39220397,
      "original_commit_id" : "146ef599be55bb85e7d53cac80ecf4f349f779f5",
      "original_position" : 23,
      "path" : "doc/zmq.md",
      "position" : 23,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39220397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Then only the documentation needs to be fixed?\nOn Sep 10, 2015 6:02 PM, \"Pieter Wuille\" <notifications@github.com> wrote:\n\n> @promag <https://github.com/promag> If implemented correctly, there is no\n> difference. You can present it as an optimization: \"This informs you about\n> the new chain tip, and as courtesy, we already give you the last block\n> immediately so you don't need to fetch it\". But I think the current\n> interface gives the impression that it will relay all validated blocks,\n> which is wrong and leads to incorrect understanding. The documentation even\n> says so literally.\n>\n> \n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139394307>.\n>\n",
      "created_at" : "2015-09-10T22:09:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139396764",
      "id" : 139396764,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T22:09:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139396764",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "I think many people don't grasp the difference between relaying blocks and chain tip updates, and the fact that this pull request was written with documentation that confuses the two is an indication of that. Don't make the simplest way of using it the wrong one.",
      "created_at" : "2015-09-10T22:11:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139397086",
      "id" : 139397086,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T22:11:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139397086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Anyway, it seems my opinion is controversial here. I'm fine with merging if the documentation is fixed, but I would really prefer to not have a mechanism that makes it this easy to misunderstand.",
      "created_at" : "2015-09-10T22:14:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139397609",
      "id" : 139397609,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T22:14:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139397609",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39221461"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39221461"
         }
      },
      "body" : "Yeah, reviewing and updating the doc.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-10T22:16:21Z",
      "diff_hunk" : "@@ -0,0 +1,115 @@\n+# Block and Transaction Broadcasting With ZeroMQ\n+\n+[ZeroMQ](http://zeromq.org/) is a lightweight wrapper around TCP\n+connections, inter-process communications, and shared-memory,\n+providing various message-oriented semantics such as publish/subcribe,\n+request/reply, and push/pull.\n+\n+The Bitcoin Core daemon can be configured to act as a trusted \"border\n+router\", implementing the bitcoin wire protocol and relay, making\n+consensus decisions, maintaining the local blockchain database,\n+broadcasting locally generated transactions into the network, and\n+providing a queryable RPC interface to interact on a polled basis for\n+requesting blockchain related data. However, there exists only a\n+limited service to notify external software of events like the arrival\n+of new blocks or transactions.\n+\n+The ZeroMQ facility implements a notification interface through a\n+set of specific notifiers. Currently there are notifiers that publish\n+blocks and transactions. This read-only facility requires only the\n+connection of a corresponding ZeroMQ subscriber port in receiving \n+software; it is not authenticated nor is there any two-way protocol\n+involvement. Therefore, subscribers should validate the received data\n+since it may be out of date, incomplete or even invalid.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39221461",
      "id" : 39221461,
      "original_commit_id" : "146ef599be55bb85e7d53cac80ecf4f349f779f5",
      "original_position" : 23,
      "path" : "doc/zmq.md",
      "position" : 23,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39221461",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39221579"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39221579"
         }
      },
      "body" : "Thanks!",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-10T22:17:52Z",
      "diff_hunk" : "@@ -0,0 +1,115 @@\n+# Block and Transaction Broadcasting With ZeroMQ\n+\n+[ZeroMQ](http://zeromq.org/) is a lightweight wrapper around TCP\n+connections, inter-process communications, and shared-memory,\n+providing various message-oriented semantics such as publish/subcribe,\n+request/reply, and push/pull.\n+\n+The Bitcoin Core daemon can be configured to act as a trusted \"border\n+router\", implementing the bitcoin wire protocol and relay, making\n+consensus decisions, maintaining the local blockchain database,\n+broadcasting locally generated transactions into the network, and\n+providing a queryable RPC interface to interact on a polled basis for\n+requesting blockchain related data. However, there exists only a\n+limited service to notify external software of events like the arrival\n+of new blocks or transactions.\n+\n+The ZeroMQ facility implements a notification interface through a\n+set of specific notifiers. Currently there are notifiers that publish\n+blocks and transactions. This read-only facility requires only the\n+connection of a corresponding ZeroMQ subscriber port in receiving \n+software; it is not authenticated nor is there any two-way protocol\n+involvement. Therefore, subscribers should validate the received data\n+since it may be out of date, incomplete or even invalid.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39221579",
      "id" : 39221579,
      "original_commit_id" : "146ef599be55bb85e7d53cac80ecf4f349f779f5",
      "original_position" : 23,
      "path" : "doc/zmq.md",
      "position" : 23,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39221579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Also, sorry for hammering on this one detail. I'm very happy with the pull request overall and would like to see it merged soon.",
      "created_at" : "2015-09-10T22:18:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139398271",
      "id" : 139398271,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T22:18:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139398271",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "My point is that even `-blocknotify` leads to that problem, and it should be noted elsewhere that a reorg may not call the script for some blocks.",
      "created_at" : "2015-09-10T22:19:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139398397",
      "id" : 139398397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T22:19:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139398397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "> Anyway, it seems my opinion is controversial here. I'm fine with merging\nif the documentation is fixed, but I would really prefer a mechanism that\ndoesn't make it this easy to misunderstand.\n\nAssuming users read the updated docs, I don't see how offering noth\nonly-hash or full blocks is more confusing than only offering hash-only.\n",
      "created_at" : "2015-09-10T22:20:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139398591",
      "id" : 139398591,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T22:20:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139398591",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@jtimon Assuming users read the updated docs...\r\n\r\n@promag Agree, it could be clearer there too.",
      "created_at" : "2015-09-10T22:21:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139398744",
      "id" : 139398744,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-10T22:21:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139398744",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@jonasschnelli @jgarzik @jtimon please review the documentation change.",
      "created_at" : "2015-09-11T00:39:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139419149",
      "id" : 139419149,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-11T00:39:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139419149",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39244609"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39244609"
         }
      },
      "body" : "nit: still think we we should use `--enable-zmq` with a default `yes`. This would conform with `--enable-wallet`, etc.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-11T06:35:32Z",
      "diff_hunk" : "@@ -137,6 +137,12 @@ AC_ARG_ENABLE([glibc-back-compat],\n   [use_glibc_compat=$enableval],\n   [use_glibc_compat=no])\n \n+AC_ARG_ENABLE([zmq],\n+  [AC_HELP_STRING([--disable-zmq],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39244609",
      "id" : 39244609,
      "original_commit_id" : "75bf9d0ca42cf0a78cbc7f3b2459b44d0b0275fe",
      "original_position" : 5,
      "path" : "configure.ac",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39244609",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39245516"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39245516"
         }
      },
      "body" : "If I'm right and understand @sipa idea correct, `ReadBlockFromDisk()` not requires a `cs_main` lock. Passing a `CBlockIndex*` would make `CBlockIndex* pblockindex = mapBlockIndex[hash];` at L153 no longer required.\r\nThe whole cs_main LOCK could then be removed.\r\n\r\nWe should definitively do this to keep bitcoin-core more responsive and lock free.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-11T06:58:44Z",
      "diff_hunk" : "@@ -0,0 +1,170 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqpublishnotifier.h\"\n+#include \"main.h\"\n+#include \"net.h\"\n+#include \"util.h\"\n+\n+#include <zmq.h>\n+\n+static std::multimap<std::string, CZMQAbstractPublishNotifier*> mapPublishNotifiers;\n+\n+// Internal function to send multipart message\n+static int zmq_send_multipart(void *sock, const void* data, size_t size, ...)\n+{\n+    va_list args;\n+    va_start(args, size);\n+\n+    while (1)\n+    {\n+        zmq_msg_t msg;\n+\n+        int rc = zmq_msg_init_size(&msg, size);\n+        if (rc != 0)\n+        {\n+            zmqError(\"Unable to initialize ZMQ msg\");\n+            return -1;\n+        }\n+\n+        void *buf = zmq_msg_data(&msg);\n+        memcpy(buf, data, size);\n+\n+        data = va_arg(args, const void*);\n+\n+        rc = zmq_msg_send(&msg, sock, data ? ZMQ_SNDMORE : 0);\n+        if (rc == -1)\n+        {\n+            zmqError(\"Unable to send ZMQ msg\");\n+            zmq_msg_close(&msg);\n+            return -1;\n+        }\n+\n+        zmq_msg_close(&msg);\n+\n+        if (!data)\n+            break;\n+\n+        size = va_arg(args, size_t);\n+    }\n+    return 0;\n+}\n+\n+bool CZMQAbstractPublishNotifier::Initialize(void *pcontext)\n+{\n+    assert(!psocket);\n+\n+    // check if address is being used by other publish notifier\n+    std::multimap<std::string, CZMQAbstractPublishNotifier*>::iterator i = mapPublishNotifiers.find(address);\n+\n+    if (i==mapPublishNotifiers.end())\n+    {\n+        psocket = zmq_socket(pcontext, ZMQ_PUB);\n+        if (!psocket)\n+        {\n+            zmqError(\"Failed to create socket\");\n+            return false;\n+        }\n+\n+        int rc = zmq_bind(psocket, address.c_str());\n+        if (rc!=0)\n+        {\n+            zmqError(\"Failed to bind address\");\n+            return false;\n+        }\n+\n+        // register this notifier for the address, so it can be reused for other publish notifier\n+        mapPublishNotifiers.insert(std::make_pair(address, this));\n+        return true;\n+    }\n+    else\n+    {\n+        LogPrint(\"zmq\", \"  Reuse socket for address %s\\n\", address);\n+\n+        psocket = i->second->psocket;\n+        mapPublishNotifiers.insert(std::make_pair(address, this));\n+\n+        return true;\n+    }\n+}\n+\n+void CZMQAbstractPublishNotifier::Shutdown()\n+{\n+    assert(psocket);\n+\n+    int count = mapPublishNotifiers.count(address);\n+\n+    // remove this notifier from the list of publishers using this address\n+    typedef std::multimap<std::string, CZMQAbstractPublishNotifier*>::iterator iterator;\n+    std::pair<iterator, iterator> iterpair = mapPublishNotifiers.equal_range(address);\n+\n+    for (iterator it = iterpair.first; it != iterpair.second; ++it)\n+    {\n+        if (it->second==this)\n+        {\n+            mapPublishNotifiers.erase(it);\n+            break;\n+        }\n+    }\n+\n+    if (count == 1)\n+    {\n+        LogPrint(\"zmq\", \"Close socket at address %s\\n\", address);\n+        int linger = 0;\n+        zmq_setsockopt(psocket, ZMQ_LINGER, &linger, sizeof(linger));\n+        zmq_close(psocket);\n+    }\n+\n+    psocket = 0;\n+}\n+\n+bool CZMQPublishHashBlockNotifier::NotifyBlock(const uint256 &hash)\n+{\n+    LogPrint(\"zmq\", \"Publish hash block %s\\n\", hash.GetHex());\n+    char data[32];\n+    for (unsigned int i = 0; i < 32; i++)\n+        data[31 - i] = hash.begin()[i];\n+    int rc = zmq_send_multipart(psocket, \"hashblock\", 9, data, 32, 0);\n+    return rc == 0;\n+}\n+\n+bool CZMQPublishHashTransactionNotifier::NotifyTransaction(const CTransaction &transaction)\n+{\n+    uint256 hash = transaction.GetHash();\n+    LogPrint(\"zmq\", \"Publish hash transaction %s\\n\", hash.GetHex());\n+    char data[32];\n+    for (unsigned int i = 0; i < 32; i++)\n+        data[31 - i] = hash.begin()[i];\n+    int rc = zmq_send_multipart(psocket, \"hashtx\", 6, data, 32, 0);\n+    return rc == 0;\n+}\n+\n+bool CZMQPublishRawBlockNotifier::NotifyBlock(const uint256 &hash)\n+{\n+    LogPrint(\"zmq\", \"Publish raw block %s\\n\", hash.GetHex());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39245516",
      "id" : 39245516,
      "original_commit_id" : "56607b879eb98bacc749991aea5b06b7c5969a4e",
      "original_position" : 146,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : 142,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39245516",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39245793"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39245793"
         }
      },
      "body" : "nit: remove `L1` AND `s/2009-2014/2015`?",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-11T07:03:54Z",
      "diff_hunk" : "@@ -0,0 +1,176 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39245793",
      "id" : 39245793,
      "original_commit_id" : "65b5df5c88707a878de5d80b0f723b38689c5e4d",
      "original_position" : 2,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39245793",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Just git a build error on debian:\r\n```\r\n./configure --enable-debug --with-gui=no\r\n[...]\r\nchecking whether to build ZMQ support... yes\r\nchecking for ZMQ... yes\r\n[...]\r\nmake -j5\r\n[...]\r\n  CXX      wallet/libbitcoin_wallet_a-walletdb.o\r\nzmq/zmqpublishnotifier.cpp: In function int zmq_send_multipart(void*, const void*, size_t, ...):\r\nzmq/zmqpublishnotifier.cpp:36:61: error: zmq_msg_send was not declared in this scope\r\n         rc = zmq_msg_send(&msg, sock, data ? ZMQ_SNDMORE : 0);\r\n[...]\r\nzmq/zmqnotificationinterface.cpp:118:33: error: zmq_ctx_destroy was not declared in this scope\r\n         zmq_ctx_destroy(pcontext);                                                          ^\r\n```\r\n\r\nThe source of the problem is probably an outdated libzmq. I have installed libzmq1(-dev):\r\n`i A libzmq1                                                 - lightweight messaging kernel (shared library)`\r\n\r\nDuring configure we might ask for `zmq_msg_send` to detect if the library is available (or similar)?",
      "created_at" : "2015-09-11T07:15:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139470309",
      "id" : 139470309,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-11T07:15:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139470309",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Using `libzmq3` solved the problem. But IIRC, Debian 7 (wheezy) does not support libzmq3 out of the standard repository. A tiny check during `./configure` would be nice.",
      "created_at" : "2015-09-11T07:20:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139470828",
      "id" : 139470828,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-11T07:20:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139470828",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39246806"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39246806"
         }
      },
      "body" : "nit: i think this include can be removed. Compiles fine on OSX/Debian without this include.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-11T07:22:38Z",
      "diff_hunk" : "@@ -0,0 +1,156 @@\n+// Copyright (c) 2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqnotificationinterface.h\"\n+#include \"zmqpublishnotifier.h\"\n+\n+#include \"version.h\"\n+#include \"main.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39246806",
      "id" : 39246806,
      "original_commit_id" : "0197327276c6882f37186ed0c7f6776f3e026bf5",
      "original_position" : 12,
      "path" : "src/zmq/zmqnotificationinterface.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39246806",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39246816"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39246816"
         }
      },
      "body" : "nit: I think this include can be removed. Compiles fine on OSX/Debian without this include.",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-11T07:22:51Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqpublishnotifier.h\"\n+#include \"main.h\"\n+#include \"net.h\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39246816",
      "id" : 39246816,
      "original_commit_id" : "0197327276c6882f37186ed0c7f6776f3e026bf5",
      "original_position" : 7,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39246816",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "> Using libzmq3 solved the problem. But IIRC, Debian 7 (wheezy) does not support libzmq3 out of the standard repository. A tiny check during ./configure would be nice.\r\n\r\n@theuni can you take a look?",
      "created_at" : "2015-09-11T09:08:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-139494230",
      "id" : 139494230,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-11T09:08:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/139494230",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39289113"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39289113"
         }
      },
      "body" : "Are you sure this is not because net.h is included in main.h? The same goes for the other removed include [ie netbase.h is included in net.h iirc].",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-11T16:29:17Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqpublishnotifier.h\"\n+#include \"main.h\"\n+#include \"net.h\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39289113",
      "id" : 39289113,
      "original_commit_id" : "0197327276c6882f37186ed0c7f6776f3e026bf5",
      "original_position" : 7,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39289113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39306734"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39306734"
         }
      },
      "body" : "Whenever you use something defined by a header H in X.c, H needs to be\n#included by either X.c or X.h.\n\nYou should not remove #includes because they're already included by one of\nthe dependencies. That leads to unclear dependency graphs, and may cause\nbreakage when dependencies change.\n",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-11T19:16:14Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqpublishnotifier.h\"\n+#include \"main.h\"\n+#include \"net.h\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39306734",
      "id" : 39306734,
      "original_commit_id" : "0197327276c6882f37186ed0c7f6776f3e026bf5",
      "original_position" : 7,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39306734",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39529608"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39529608"
         }
      },
      "body" : "Agree with the nit (though it's not a merge blocker)",
      "commit_id" : "029e278286cb861901c9cb8e1b84855ec1640aac",
      "created_at" : "2015-09-15T16:06:47Z",
      "diff_hunk" : "@@ -137,6 +137,12 @@ AC_ARG_ENABLE([glibc-back-compat],\n   [use_glibc_compat=$enableval],\n   [use_glibc_compat=no])\n \n+AC_ARG_ENABLE([zmq],\n+  [AC_HELP_STRING([--disable-zmq],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r39529608",
      "id" : 39529608,
      "original_commit_id" : "75bf9d0ca42cf0a78cbc7f3b2459b44d0b0275fe",
      "original_position" : 5,
      "path" : "configure.ac",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-09-16T10:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/39529608",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "In general, this appears merge-ready once\r\n* travis is happy\r\n* the @sipa lock comment is addressed.\r\n\r\nWe can iterate further once it's in-tree.\r\n",
      "created_at" : "2015-09-15T16:09:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-140446419",
      "id" : 140446419,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-15T16:09:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/140446419",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Agree with @jgarzik. There are serval proposal for improvements (autodetect libzmq3, avoid locking by passing `CBlockIndex*`, minor cleanups), but shouldn't hold back the merge.\r\nThe only thing that might should be looked at is the travis issue: https://travis-ci.org/bitcoin/bitcoin/jobs/79866093. Maybe its not related to this PR. Maybe a rebase&force-push solves that issue.",
      "created_at" : "2015-09-15T16:16:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-140448404",
      "id" : 140448404,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-15T16:16:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/140448404",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli rebase@force-push solved.\r\n@laanwj @sipa I believe it's all in place to merge.",
      "created_at" : "2015-09-16T10:33:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-140700241",
      "id" : 140700241,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-09-16T10:33:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/140700241",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
