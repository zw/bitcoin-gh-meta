[
   {
      "body" : "ACK. This version is well tested.\r\nThere are some ACKs for this PR in #5496 from before it was changed to a parameterised version.",
      "created_at" : "2015-05-12T17:14:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-101354626",
      "id" : 101354626,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-05-12T17:17:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/101354626",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "As stated, I prefer this one, it is smaller code, has been more tested, save one byte.\r\n\r\nMy aesthetic argument is that we will get nicer human readable script. (< locktime > OP_CLTV and < push > OP_RCLTV, instead of cryptic < locktime > < mode > OP_CLTV )",
      "created_at" : "2015-05-12T17:29:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-101358596",
      "id" : 101358596,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-05-12T17:30:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/101358596",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "Nit: I think CheckLockTime's full implementation would conceptually fit better implemented as part of BaseSignatureChecker (and it would remove a few lines of code), because the purpose of the BaseSignatureChecker/TransactionSignatureChecker split is just to have a checker that skips expensive ECDSA validation. Checking the locktime is fast, and it feels safer to have BaseSignatureChecker do the check.\r\n\r\nIn practice, the above nit doesn't matter, the only place BaseSignatureChecker is used at the moment is checking for non-standard scriptSigs.\r\n\r\nBesides that, code review ACK.\r\n",
      "created_at" : "2015-05-13T16:51:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-101744545",
      "id" : 101744545,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-05-13T16:51:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/101744545",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "BaseSignatureChecker does not know that the data being signed is a\ntransaction.\n",
      "created_at" : "2015-05-13T16:57:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-101746355",
      "id" : 101746355,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-05-13T16:57:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/101746355",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6124#discussion_r30430509"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6124"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30430509"
         }
      },
      "body" : "This is not clear: 5-byte CScriptNum should be good up to 2\\*\\*39-1, *beyond* the limit of the nLockTime field.",
      "commit_id" : "afc4ff920540a9f18e15ee99b80c5dd0f437d058",
      "created_at" : "2015-05-15T17:57:50Z",
      "diff_hunk" : "@@ -335,9 +335,51 @@ bool EvalScript(vector<vector<unsigned char> >& stack, const CScript& script, un\n                 // Control\n                 //\n                 case OP_NOP:\n-                break;\n+                    break;\n+\n+                case OP_CHECKLOCKTIMEVERIFY:\n+                {\n+                    if (!(flags & SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY)) {\n+                        // not enabled; treat as a NOP2\n+                        if (flags & SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS) {\n+                            return set_error(serror, SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS);\n+                        }\n+                        break;\n+                    }\n+\n+                    if (stack.size() < 1)\n+                        return set_error(serror, SCRIPT_ERR_INVALID_STACK_OPERATION);\n+\n+                    // Note that elsewhere numeric opcodes are limited to\n+                    // operands in the range -2**31+1 to 2**31-1, however it is\n+                    // legal for opcodes to produce results exceeding that\n+                    // range. This limitation is implemented by CScriptNum's\n+                    // default 4-byte limit.\n+                    //\n+                    // If we kept to that limit we'd have a year 2038 problem,\n+                    // even though the nLockTime field in transactions\n+                    // themselves is uint32 which only becomes meaningless\n+                    // after the year 2106.\n+                    //\n+                    // Thus as a special case we tell CScriptNum to accept up\n+                    // to 5-byte bignums, which are good until 2**32-1, the\n+                    // same limit as the nLockTime field itself.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#discussion_r30430509",
      "id" : 30430509,
      "original_commit_id" : "0eeab8e367dae0a01c417f25d76e2c40bd182732",
      "original_position" : 33,
      "path" : "src/script/interpreter.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6124",
      "updated_at" : "2015-05-15T18:05:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30430509",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6124#discussion_r30430992"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6124"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30430992"
         }
      },
      "body" : "Fixed.",
      "commit_id" : "afc4ff920540a9f18e15ee99b80c5dd0f437d058",
      "created_at" : "2015-05-15T18:02:59Z",
      "diff_hunk" : "@@ -335,9 +335,51 @@ bool EvalScript(vector<vector<unsigned char> >& stack, const CScript& script, un\n                 // Control\n                 //\n                 case OP_NOP:\n-                break;\n+                    break;\n+\n+                case OP_CHECKLOCKTIMEVERIFY:\n+                {\n+                    if (!(flags & SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY)) {\n+                        // not enabled; treat as a NOP2\n+                        if (flags & SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS) {\n+                            return set_error(serror, SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS);\n+                        }\n+                        break;\n+                    }\n+\n+                    if (stack.size() < 1)\n+                        return set_error(serror, SCRIPT_ERR_INVALID_STACK_OPERATION);\n+\n+                    // Note that elsewhere numeric opcodes are limited to\n+                    // operands in the range -2**31+1 to 2**31-1, however it is\n+                    // legal for opcodes to produce results exceeding that\n+                    // range. This limitation is implemented by CScriptNum's\n+                    // default 4-byte limit.\n+                    //\n+                    // If we kept to that limit we'd have a year 2038 problem,\n+                    // even though the nLockTime field in transactions\n+                    // themselves is uint32 which only becomes meaningless\n+                    // after the year 2106.\n+                    //\n+                    // Thus as a special case we tell CScriptNum to accept up\n+                    // to 5-byte bignums, which are good until 2**32-1, the\n+                    // same limit as the nLockTime field itself.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#discussion_r30430992",
      "id" : 30430992,
      "original_commit_id" : "0eeab8e367dae0a01c417f25d76e2c40bd182732",
      "original_position" : 33,
      "path" : "src/script/interpreter.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6124",
      "updated_at" : "2015-05-15T18:05:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30430992",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Yes, the whole point of BaseSignatureChecker is that EvalScript doesn't need to know anything about transactions.\r\nUntested ACK",
      "created_at" : "2015-05-15T18:38:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-102487938",
      "id" : 102487938,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-05-15T18:38:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/102487938",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "any plan to merge that for 0.11 ? I know I can play with it with viacoin/testnet with mempool rule, but I think there is no point in delaying it anymore since there is no controversial problems anymore with it.",
      "created_at" : "2015-05-26T12:26:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-105507808",
      "id" : 105507808,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-05-26T12:27:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105507808",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "I don't see any reason not to do it either. maaku prefers the other version but I don't think he is opposed to this one, which seems to be preferred by almost everyone else.",
      "created_at" : "2015-05-26T13:54:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-105533402",
      "id" : 105533402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-05-26T13:54:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105533402",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-06-03T08:49:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-108251273",
      "id" : 108251273,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-03T08:49:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/108251273",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649160?v=3",
         "events_url" : "https://api.github.com/users/rubensayshi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rubensayshi/followers",
         "following_url" : "https://api.github.com/users/rubensayshi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rubensayshi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rubensayshi",
         "id" : 649160,
         "login" : "rubensayshi",
         "organizations_url" : "https://api.github.com/users/rubensayshi/orgs",
         "received_events_url" : "https://api.github.com/users/rubensayshi/received_events",
         "repos_url" : "https://api.github.com/users/rubensayshi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rubensayshi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rubensayshi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rubensayshi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6124#discussion_r32880626"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6124"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32880626"
         }
      },
      "body" : "Stupidest little nit... this empty comment line can be removed, no? Or better yet explain the feature like the other comments do.",
      "commit_id" : "afc4ff920540a9f18e15ee99b80c5dd0f437d058",
      "created_at" : "2015-06-20T01:21:46Z",
      "diff_hunk" : "@@ -76,6 +76,10 @@ enum\n     // (softfork safe, BIP62 rule 6)\n     // Note: CLEANSTACK should never be used without P2SH.\n     SCRIPT_VERIFY_CLEANSTACK = (1U << 8),\n+\n+    // Verify CHECKLOCKTIMEVERIFY (BIP65)\n+    //",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#discussion_r32880626",
      "id" : 32880626,
      "original_commit_id" : "afc4ff920540a9f18e15ee99b80c5dd0f437d058",
      "original_position" : 6,
      "path" : "src/script/interpreter.h",
      "position" : 6,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6124",
      "updated_at" : "2015-06-20T01:21:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32880626",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "My objections about the unparametrized version should not be interpreted as release blocking. I prefer the original form for a couple of reasons.\r\n\r\nTested ACK. I thoroughly reviewed and tested this code as part of the Project Elements release.",
      "created_at" : "2015-06-20T01:24:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-113691664",
      "id" : 113691664,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-20T01:26:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113691664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "@maaku's Fixed nit. Also thanks for the review!",
      "created_at" : "2015-06-22T04:01:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-113995852",
      "id" : 113995852,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T04:01:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113995852",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "code review ACK\r\n\r\nAre there any remaining blockers to merging this?\r\n",
      "created_at" : "2015-06-22T04:12:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-113996689",
      "id" : 113996689,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T04:13:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113996689",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik Nothing I can think of.\r\n\r\nIf for some reason we find we totally screwed up plan is to just change the behavior, use a new NOP, and go from there. (as was discussed a few months ago with no objections: https://github.com/bitcoin/bitcoin/pull/5496#issuecomment-68114665)",
      "created_at" : "2015-06-22T04:25:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-113997331",
      "id" : 113997331,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T04:25:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113997331",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "code review ACK.\r\n\r\nWill test and write some example RPC regtests within the next days.",
      "created_at" : "2015-06-22T04:58:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114005791",
      "id" : 114005791,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T04:58:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114005791",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli RPC regtests? What would those regtests actually do?\r\n\r\nI do have very simple demo's of CLTV here: https://github.com/petertodd/checklocktimeverify-demos\r\n",
      "created_at" : "2015-06-22T05:00:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114006349",
      "id" : 114006349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T05:00:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114006349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@petertodd: some simple CLTV real-world examples. Creating some CLTV transactions (needs hex fiddling because the wallet doesn't support it right now), broadcast, mine some blocks, see what's in there.\r\nLike the other scripts in (/qa/rpc-tests).\r\nThis is a way to test a feature while also creating a test script that help to sustain quality.",
      "created_at" : "2015-06-22T05:09:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114007817",
      "id" : 114007817,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T05:09:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114007817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli Hmm, I suspect the actual testing value of doing that is relatively low, at least until the soft-fork code goes in; the actual opcode itself is very well tested in the script tests, and there's no IsStandard() changes associated. (yet) I personally would add that kind of thing to [cltv-demos](https://github.com/petertodd/checklocktimeverify-demos) because I greatly prefer the python library it uses. That said, I certainly have no objection to doing that - and it might come in handy when we do add block tests for the soft-fork code - although I'd ask that we don't wait on it before merging this pull-req.",
      "created_at" : "2015-06-22T05:16:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114008529",
      "id" : 114008529,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T05:16:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114008529",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Sure. I didn't mention the rpc test to hold this PR back.\r\nMerging is totally fine for me.",
      "created_at" : "2015-06-22T05:45:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114012138",
      "id" : 114012138,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T05:45:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114012138",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "What about changing script.cppL144 from\r\n`case OP_NOP2                   : return \"OP_NOP2\";`\r\nto\r\n`case OP_NOP2                   : return \"OP_CHECKLOCKTIMEVERIFY\";`\r\nor\r\n`case OP_CHECKLOCKTIMEVERIFY                   : return \"OP_CHECKLOCKTIMEVERIFY\";`",
      "created_at" : "2015-06-22T08:11:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114035757",
      "id" : 114035757,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T08:11:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114035757",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli Good point.\r\n\r\nAnyone have any idea what doing that will break? :/",
      "created_at" : "2015-06-22T09:32:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114050446",
      "id" : 114050446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T09:32:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114050446",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@petertodd the tests...",
      "created_at" : "2015-06-22T10:06:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114057036",
      "id" : 114057036,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T10:06:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114057036",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "I came up with this because it's exposed in the RPC call `decoderawtransaction` (`scriptPubKey['asm']`).\r\nChanging this would probably only harm users who rely on OP_NOP2 (which is not in use) in this field. If someone uses the `asm` field and parse the content he needs to get bitchslapped anyway.",
      "created_at" : "2015-06-22T10:49:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114064252",
      "id" : 114064252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T10:50:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114064252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Nice work on this @petertodd. It'll be very useful once it's rolled out!\r\n\r\nI ran some CLTV style micropayment channel deposit and refund tests on testnet.\r\n\r\nOverall, the changes look good.\r\n\r\nI'm wondering why you chose to make OP_CHECKLOCKTIMEVERIFY not pop the input argument off the top of the stack in the success case?\r\n\r\nIn the success case, by not popping, the semantic of the original no-op definition of OP_NOP2 is preserved. I assume that maintaining the no-op semantic for old clients, so that they could still validate scripts using the new semantic of the opcode, was your reason.\r\nIf so, did you have any other reason, like you were also trying to save an upgradable nopcode by not using one for a matching non-verify OP_CHECKLOCKTIME (to fit the pattern of OP_CHECKSIG+OP_CHECKSIGVERIFY, OP_EQUAL+OP_EQUALVERIFY, etc...)?\r\n\r\nDuring the transition, I don't think preserving the no-op semantic in this case is desirable for the same reason that it is not desirable to start using CLTV outputs prior to the 95% lock-in during a soft fork -- the refund path in CLTV scripts could be interpreted as no-op's on non-time-locked transactions to claim the refund outputs early.\r\n\r\nIf backwards compatibility for older clients was the only reason, then I think that changing to popping the input stack argument should be considered because:\r\n- Doing so would be consistent with the other \"verify\" opcodes (i.e.- OP_VERIFY, OP_EQUALVERIFY, OP_NUMEQUALVERIFY, OP_CHECKSIGVERIFY, and OP_CHECKMULTISIGVERIFY).\r\n- Doing so is still soft-fork compatible\r\n- During a soft-fork transition, before 95% lock-in, breaking validation of the new scripts in old clients seems preferable, since, for example, we'd like to avoid having premature adopters of CLTV bond refund scripts get early refunds going through (via finalized inputs or earlier than expected transaction nLockTimes). Having new scripts expect that the stack is popped on success would break the new scripts on older validators.\r\n- After the semantic transition is locked-in, it seems that most of the uses of OP_CHECKLOCKTIMEVERIFY would not need the argument left on the stack. Having to repeat the OP_DROP everytime seems kludgy. People that need the argument to remain on the stack could precede the OP_CHECKLOCKTIMEVERIFY with an OP_DUP.\r\n\r\nMake sense?",
      "created_at" : "2015-06-22T13:20:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114099855",
      "id" : 114099855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T13:20:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114099855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "Here's a table of the combinations of test cases that I tried.\r\nThe rows represent the three vintages of clients, and the columns are the two possible intended semantics of the OP_NOP2 opcode within scripts.\r\nThe cells are outcomes with the current implementation of this PR (not popping the top stack item):\r\n\r\n | script expected no-op semantic  | script expected cltv semantic\r\n---|---|---\r\npre-SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS client (NOP2 execution treated as NOP) | script validates                | script validates (seems problematic pre-lock-in)\r\nSCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS client (NOP2 execution fails)              | script fails (NOPx reserved)    | script fails (NOPx reserved)\r\nCLTV aware client (NOP2 execution treated as CLTV)                                        | script usually fails*           | script validates\r\n\r\n*Note: Failures are caused by trying to get a CScriptNum from the top of the stack and by checks within TransactionSignatureChecker::CheckLockTime. Outcomes are script dependent, but for the cases I tried, always failed.",
      "created_at" : "2015-06-22T13:30:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114102077",
      "id" : 114102077,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T13:30:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114102077",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "If you pop the argument off the stack it becomes a hard fork change.\nOn Jun 22, 2015 06:21, \"mruddy\" <notifications@github.com> wrote:\n\n> Nice work on this @petertodd <https://github.com/petertodd>. It'll be\n> very useful once it's rolled out!\n>\n> I ran some CLTV style micropayment channel deposit and refund tests on\n> testnet.\n>\n> Overall, the changes look good.\n>\n> I'm wondering why you chose to make OP_CHECKLOCKTIMEVERIFY not pop the\n> input argument off the top of the stack in the success case?\n>\n> In the success case, by not popping, the semantic of the original no-op\n> definition of OP_NOP2 is preserved. I assume that maintaining the no-op\n> semantic for old clients, so that they could still validate scripts using\n> the new semantic of the opcode, was your reason.\n> If so, did you have any other reason, like you were also trying to save an\n> upgradable nopcode by not using one for a matching non-verify\n> OP_CHECKLOCKTIME (to fit the pattern of OP_CHECKSIG+OP_CHECKSIGVERIFY,\n> OP_EQUAL+OP_EQUALVERIFY, etc...)?\n>\n> During the transition, I don't think preserving the no-op semantic in this\n> case is desirable for the same reason that it is not desirable to start\n> using CLTV outputs prior to the 95% lock-in during a soft fork -- the\n> refund path in CLTV scripts could be interpreted as no-op's on\n> non-time-locked transactions to claim the refund outputs early.\n>\n> If backwards compatibility for older clients was the only reason, then I\n> think that changing to popping the input stack argument should be\n> considered because:\n>\n>    - Doing so would be consistent with the other \"verify\" opcodes (i.e.-\n>    OP_VERIFY, OP_EQUALVERIFY, OP_NUMEQUALVERIFY, OP_CHECKSIGVERIFY, and\n>    OP_CHECKMULTISIGVERIFY).\n>    - Doing so is still soft-fork compatible\n>    - During a soft-fork transition, before 95% lock-in, breaking\n>    validation of the new scripts in old clients seems preferable, since, for\n>    example, we'd like to avoid having premature adopters of CLTV bond refund\n>    scripts get early refunds going through (via finalized inputs or earlier\n>    than expected transaction nLockTimes). Having new scripts expect that the\n>    stack is popped on success would break the new scripts on older validators.\n>    - After the semantic transition is locked-in, it seems that most of\n>    the uses of OP_CHECKLOCKTIMEVERIFY would not need the argument left on the\n>    stack. Having to repeat the OP_DROP everytime seems kludgy. People that\n>    need the argument to remain on the stack could precede the\n>    OP_CHECKLOCKTIMEVERIFY with an OP_DUP.\n>\n> Make sense?\n>\n> \n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114099855>.\n>\n",
      "created_at" : "2015-06-22T15:45:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114158301",
      "id" : 114158301,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T15:45:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114158301",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "@maaku: Doh, after re-thinking, I think you are right about that.\r\n\r\nI think I confused myself by asking the wrong question when I was contemplating whether having it pop would then be a hard vs. soft fork change.\r\n\r\nNow, when I ask myself:\r\n\"Would the change cause a transaction to be seen as invalid by older clients, while simultaneously being seen as valid by newer clients?\"\r\n\r\nThe answer is, yes. I even alluded to that in my previous message, \"Having new scripts expect that the stack is popped on success would break the new scripts on older validators.\"\r\n\r\nDoes that match with what you were thinking? If so, then yes, please forget my suggestion of making the CLTV pop.",
      "created_at" : "2015-06-22T17:31:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114191856",
      "id" : 114191856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T17:31:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114191856",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "Correct.\nOn Jun 22, 2015 10:31 AM, \"mruddy\" <notifications@github.com> wrote:\n\n> @maaku <https://github.com/maaku>: Doh, after re-thinking, I think you\n> are right about that.\n>\n> I think I confused myself by asking the wrong question when I was\n> contemplating whether having it pop would then be a hard vs. soft fork\n> change.\n>\n> Now, when I ask myself:\n> \"Would the change cause a transaction to be seen as invalid by older\n> clients, while simultaneously being seen as valid by newer clients?\"\n>\n> The answer is, yes. I even alluded to that in my previous message, \"Having\n> new scripts expect that the stack is popped on success would break the new\n> scripts on older validators.\"\n>\n> Does that match with what you were thinking? If so, then yes, please\n> forget my suggestion of making the CLTV pop.\n>\n> \n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114191856>.\n>\n",
      "created_at" : "2015-06-22T17:33:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114192629",
      "id" : 114192629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T17:33:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114192629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "@maaku cool, thanks for correcting me on that.\r\n\r\n@jonasschnelli and @petertodd : About the \"asm\" translation update, when we were talking about removing the \"OP_\" prefixes and adding SIGHASH decodes for #5264 and #5392, we did not come up with too much to worry about breaking when changing the \"asm\" results. Back then, it seemed like breaking dependencies on \"asm\", if they existed, was perceived as a potentially desirable outcome anyways. For example, https://github.com/bitcoin/bitcoin/pull/5264#issuecomment-63519743",
      "created_at" : "2015-06-22T17:47:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114196159",
      "id" : 114196159,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T17:47:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114196159",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=3",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "body" : "@mruddy Thanks for reminding me! That's a good argument. :) I'll look into doing that then.",
      "created_at" : "2015-06-22T19:56:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114239054",
      "id" : 114239054,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T19:56:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114239054",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@petertodd @mruddy Isn't that sort of out of scope for this particular PR?",
      "created_at" : "2015-06-22T20:01:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6124#issuecomment-114240092",
      "id" : 114240092,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6124",
      "updated_at" : "2015-06-22T20:01:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114240092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   }
]
