[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782170991"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782170991"
         }
      },
      "author_association" : "MEMBER",
      "body" : "naming suggestion\r\n```suggestion\r\n        bool delete_anchors_file{false};\r\n```",
      "commit_id" : "c24194c1fdbc9522f622862036240c2f617a8f1c",
      "created_at" : "2022-01-11T14:01:35Z",
      "diff_hunk" : "@@ -2023,11 +2023,13 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n \n         int64_t nANow = GetAdjustedTime();\n         int nTries = 0;\n+        bool fDeleteAnchors = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782170991",
      "id" : 782170991,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584unvtv",
      "original_commit_id" : "c9893a675109fe314b542aed12005b095e7a0ebf",
      "original_line" : 2026,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 849213145,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782170991/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T14:04:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782170991",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782172507"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782172507"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe inline this function definition into the declaration, as it is only one line of code (otherwise, missing EOF newline).",
      "commit_id" : "c24194c1fdbc9522f622862036240c2f617a8f1c",
      "created_at" : "2022-01-11T14:03:14Z",
      "diff_hunk" : "@@ -220,6 +220,10 @@ std::vector<CAddress> ReadAnchors(const fs::path& anchors_db_path)\n         anchors.clear();\n     }\n \n-    fs::remove(anchors_db_path);\n     return anchors;\n }\n+\n+void DeleteAnchorsFile(const fs::path& anchors_db_path)\n+{\n+    fs::remove(anchors_db_path);\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782172507",
      "id" : 782172507,
      "line" : 229,
      "node_id" : "PRRC_kwDOABII584unwFb",
      "original_commit_id" : "c9893a675109fe314b542aed12005b095e7a0ebf",
      "original_line" : 229,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/addrdb.cpp",
      "position" : 11,
      "pull_request_review_id" : 849213145,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782172507/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T14:04:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782172507",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Perhaps remove \"refactor\" from the PR title as there seems to be a change of behavior.",
      "created_at" : "2022-01-11T14:06:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1009997146",
      "id" : 1009997146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII5848M1Va",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1009997146/reactions"
      },
      "updated_at" : "2022-01-11T14:06:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1009997146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782179401"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782179401"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It looks like this commit isn't standalone and should be combined so as to maintain the file deletion functionality.",
      "commit_id" : "c24194c1fdbc9522f622862036240c2f617a8f1c",
      "created_at" : "2022-01-11T14:09:17Z",
      "diff_hunk" : "@@ -220,7 +220,6 @@ std::vector<CAddress> ReadAnchors(const fs::path& anchors_db_path)\n         anchors.clear();\n     }\n \n-    fs::remove(anchors_db_path);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782179401",
      "id" : 782179401,
      "line" : 223,
      "node_id" : "PRRC_kwDOABII584unxxJ",
      "original_commit_id" : "3da7f8dd509a15886e6eedde26eff59da77f60a2",
      "original_line" : 223,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/addrdb.cpp",
      "position" : 4,
      "pull_request_review_id" : 849229788,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782179401/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T14:09:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782179401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782182316"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782182316"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I prefer `delete_anchors_file`, didn't do it just to follow the same pattern of other vars in this file.",
      "commit_id" : "c24194c1fdbc9522f622862036240c2f617a8f1c",
      "created_at" : "2022-01-11T14:11:33Z",
      "diff_hunk" : "@@ -2023,11 +2023,13 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n \n         int64_t nANow = GetAdjustedTime();\n         int nTries = 0;\n+        bool fDeleteAnchors = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782182316",
      "id" : 782182316,
      "in_reply_to_id" : 782170991,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584unyes",
      "original_commit_id" : "c9893a675109fe314b542aed12005b095e7a0ebf",
      "original_line" : 2026,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 849232752,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782182316/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T14:11:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782182316",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Perhaps remove \"refactor\" from the PR title as there seems to be a change of behavior.\r\n\r\nDone!",
      "created_at" : "2022-01-11T14:12:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1010002190",
      "id" : 1010002190,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII5848M2kO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1010002190/reactions"
      },
      "updated_at" : "2022-01-11T14:12:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1010002190",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782187395"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782187395"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Same reason of `delete_anchors_file`. I also prefer inline, but there are other functions in this file that is not following this pattern (e.g. `ReadFromStream`).  ",
      "commit_id" : "c24194c1fdbc9522f622862036240c2f617a8f1c",
      "created_at" : "2022-01-11T14:15:33Z",
      "diff_hunk" : "@@ -220,6 +220,10 @@ std::vector<CAddress> ReadAnchors(const fs::path& anchors_db_path)\n         anchors.clear();\n     }\n \n-    fs::remove(anchors_db_path);\n     return anchors;\n }\n+\n+void DeleteAnchorsFile(const fs::path& anchors_db_path)\n+{\n+    fs::remove(anchors_db_path);\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782187395",
      "id" : 782187395,
      "in_reply_to_id" : 782172507,
      "line" : 229,
      "node_id" : "PRRC_kwDOABII584unzuD",
      "original_commit_id" : "c9893a675109fe314b542aed12005b095e7a0ebf",
      "original_line" : 229,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/addrdb.cpp",
      "position" : 11,
      "pull_request_review_id" : 849237907,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782187395/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T14:15:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782187395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782190433"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782190433"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not a blocker but I believe it's preferred to use the current style guidelines for new code.",
      "commit_id" : "c24194c1fdbc9522f622862036240c2f617a8f1c",
      "created_at" : "2022-01-11T14:18:48Z",
      "diff_hunk" : "@@ -2023,11 +2023,13 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n \n         int64_t nANow = GetAdjustedTime();\n         int nTries = 0;\n+        bool fDeleteAnchors = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782190433",
      "id" : 782190433,
      "in_reply_to_id" : 782170991,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584un0dh",
      "original_commit_id" : "c9893a675109fe314b542aed12005b095e7a0ebf",
      "original_line" : 2026,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 849242212,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782190433/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T14:18:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782190433",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782191992"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782191992"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ISTM that this is a per-function (performance and LOC/code organization) decision, not a style one (no need to follow what other functions are doing).",
      "commit_id" : "c24194c1fdbc9522f622862036240c2f617a8f1c",
      "created_at" : "2022-01-11T14:20:28Z",
      "diff_hunk" : "@@ -220,6 +220,10 @@ std::vector<CAddress> ReadAnchors(const fs::path& anchors_db_path)\n         anchors.clear();\n     }\n \n-    fs::remove(anchors_db_path);\n     return anchors;\n }\n+\n+void DeleteAnchorsFile(const fs::path& anchors_db_path)\n+{\n+    fs::remove(anchors_db_path);\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782191992",
      "id" : 782191992,
      "in_reply_to_id" : 782172507,
      "line" : 229,
      "node_id" : "PRRC_kwDOABII584un014",
      "original_commit_id" : "c9893a675109fe314b542aed12005b095e7a0ebf",
      "original_line" : 229,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/addrdb.cpp",
      "position" : 11,
      "pull_request_review_id" : 849244402,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782191992/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T14:21:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782191992",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782193373"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782193373"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done, thank you!",
      "commit_id" : "c24194c1fdbc9522f622862036240c2f617a8f1c",
      "created_at" : "2022-01-11T14:22:00Z",
      "diff_hunk" : "@@ -220,7 +220,6 @@ std::vector<CAddress> ReadAnchors(const fs::path& anchors_db_path)\n         anchors.clear();\n     }\n \n-    fs::remove(anchors_db_path);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782193373",
      "id" : 782193373,
      "in_reply_to_id" : 782179401,
      "line" : 223,
      "node_id" : "PRRC_kwDOABII584un1Ld",
      "original_commit_id" : "3da7f8dd509a15886e6eedde26eff59da77f60a2",
      "original_line" : 223,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/addrdb.cpp",
      "position" : 4,
      "pull_request_review_id" : 849246521,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782193373/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T14:22:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782193373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782205330"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782205330"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Great, going to change it.",
      "commit_id" : "c24194c1fdbc9522f622862036240c2f617a8f1c",
      "created_at" : "2022-01-11T14:34:39Z",
      "diff_hunk" : "@@ -220,6 +220,10 @@ std::vector<CAddress> ReadAnchors(const fs::path& anchors_db_path)\n         anchors.clear();\n     }\n \n-    fs::remove(anchors_db_path);\n     return anchors;\n }\n+\n+void DeleteAnchorsFile(const fs::path& anchors_db_path)\n+{\n+    fs::remove(anchors_db_path);\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782205330",
      "id" : 782205330,
      "in_reply_to_id" : 782172507,
      "line" : 229,
      "node_id" : "PRRC_kwDOABII584un4GS",
      "original_commit_id" : "c9893a675109fe314b542aed12005b095e7a0ebf",
      "original_line" : 229,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/addrdb.cpp",
      "position" : 11,
      "pull_request_review_id" : 849264152,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782205330/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T14:34:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782205330",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782207643"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782207643"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done! Thanks!",
      "commit_id" : "c24194c1fdbc9522f622862036240c2f617a8f1c",
      "created_at" : "2022-01-11T14:36:43Z",
      "diff_hunk" : "@@ -2023,11 +2023,13 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n \n         int64_t nANow = GetAdjustedTime();\n         int nTries = 0;\n+        bool fDeleteAnchors = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782207643",
      "id" : 782207643,
      "in_reply_to_id" : 782170991,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584un4qb",
      "original_commit_id" : "c9893a675109fe314b542aed12005b095e7a0ebf",
      "original_line" : 2026,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 849267512,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782207643/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T14:36:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782207643",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "force-pushed addressing @jonatack's comments",
      "created_at" : "2022-01-11T16:39:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1010150129",
      "id" : 1010150129,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII5848Narx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1010150129/reactions"
      },
      "updated_at" : "2022-01-11T16:39:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1010150129",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782789428"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782789428"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This property is being lost here in the case where the anchor causes a crash between reading it and making a connection successfully.",
      "commit_id" : "fb0c33236ac29845ed7841da8879c5914da5616b",
      "created_at" : "2022-01-12T07:57:31Z",
      "diff_hunk" : "@@ -60,10 +60,15 @@ void DumpAnchors(const fs::path& anchors_db_path, const std::vector<CAddress>& a\n \n /**\n  * Read the anchor IP address database (anchors.dat)\n- *\n- * Deleting anchors.dat is intentional as it avoids renewed peering to anchors after\n- * an unclean shutdown and thus potential exploitation of the anchor peer policy.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782789428",
      "id" : 782789428,
      "line" : 65,
      "node_id" : "PRRC_kwDOABII584uqGs0",
      "original_commit_id" : "fb0c33236ac29845ed7841da8879c5914da5616b",
      "original_line" : 65,
      "original_position" : 6,
      "original_start_line" : 64,
      "path" : "src/addrdb.h",
      "position" : 6,
      "pull_request_review_id" : 850079141,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782789428/reactions"
      },
      "side" : "LEFT",
      "start_line" : 64,
      "start_side" : "LEFT",
      "updated_at" : "2022-01-12T07:57:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782789428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782937188"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782937188"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, make sense.",
      "commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "created_at" : "2022-01-12T10:37:53Z",
      "diff_hunk" : "@@ -60,10 +60,15 @@ void DumpAnchors(const fs::path& anchors_db_path, const std::vector<CAddress>& a\n \n /**\n  * Read the anchor IP address database (anchors.dat)\n- *\n- * Deleting anchors.dat is intentional as it avoids renewed peering to anchors after\n- * an unclean shutdown and thus potential exploitation of the anchor peer policy.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782937188",
      "id" : 782937188,
      "in_reply_to_id" : 782789428,
      "line" : 65,
      "node_id" : "PRRC_kwDOABII584uqqxk",
      "original_commit_id" : "fb0c33236ac29845ed7841da8879c5914da5616b",
      "original_line" : 65,
      "original_position" : 6,
      "original_start_line" : 64,
      "path" : "src/addrdb.h",
      "position" : 8,
      "pull_request_review_id" : 850289039,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782937188/reactions"
      },
      "side" : "LEFT",
      "start_line" : 64,
      "start_side" : "LEFT",
      "updated_at" : "2022-01-12T10:37:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782937188",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "cc: @hebasto ",
      "created_at" : "2022-01-21T19:01:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1018779453",
      "id" : 1018779453,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII5848uVc9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018779453/reactions"
      },
      "updated_at" : "2022-01-21T19:01:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018779453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r789972209"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/789972209"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This PR looks to improve things based on the concept however I could not understand why is the file deleted? Why not just read and write? \r\n\r\n1. Dump block-relay-only peers to anchors.dat on exit\r\n2. Read anchors.dat on start\r\n3. Repeat 1\r\n\r\nThen I read the comment which is removed by the PR:\r\n\r\n_Deleting anchors.dat is intentional as it avoids renewed peering to anchors after an unclean shutdown and thus potential exploitation of the anchor peer policy_\r\n\r\nSo maybe this comment should not be removed or add relevant information.\r\n\r\n```suggestion\r\n/**\r\n* Read the anchor IP address database (anchors.dat)\r\n*\r\n* Deleting anchors.dat after trying to connect to block-relay-only peers is intentional as...\r\n */\r\n ```",
      "commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "created_at" : "2022-01-21T20:24:55Z",
      "diff_hunk" : "@@ -58,12 +58,10 @@ std::optional<bilingual_str> LoadAddrman(const std::vector<bool>& asmap, const A\n  */\n void DumpAnchors(const fs::path& anchors_db_path, const std::vector<CAddress>& anchors);\n \n-/**\n- * Read the anchor IP address database (anchors.dat)\n- *\n- * Deleting anchors.dat is intentional as it avoids renewed peering to anchors after\n- * an unclean shutdown and thus potential exploitation of the anchor peer policy.\n- */\n+/** Read the anchor IP address database (anchors.dat) */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r789972209",
      "id" : 789972209,
      "line" : 61,
      "node_id" : "PRRC_kwDOABII584vFgTx",
      "original_commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "original_line" : 61,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/addrdb.h",
      "position" : 10,
      "pull_request_review_id" : 859994604,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/789972209/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-21T20:24:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/789972209",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r790025376"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790025376"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Just read and write?  Why keep in anchors.dat addresses we could not be able to connect, for example?\r\nSupposing we are on your step 2, what would happen if that peers were offline?",
      "commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "created_at" : "2022-01-21T22:06:19Z",
      "diff_hunk" : "@@ -58,12 +58,10 @@ std::optional<bilingual_str> LoadAddrman(const std::vector<bool>& asmap, const A\n  */\n void DumpAnchors(const fs::path& anchors_db_path, const std::vector<CAddress>& anchors);\n \n-/**\n- * Read the anchor IP address database (anchors.dat)\n- *\n- * Deleting anchors.dat is intentional as it avoids renewed peering to anchors after\n- * an unclean shutdown and thus potential exploitation of the anchor peer policy.\n- */\n+/** Read the anchor IP address database (anchors.dat) */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r790025376",
      "id" : 790025376,
      "in_reply_to_id" : 789972209,
      "line" : 61,
      "node_id" : "PRRC_kwDOABII584vFtSg",
      "original_commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "original_line" : 61,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/addrdb.h",
      "position" : 10,
      "pull_request_review_id" : 860072021,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790025376/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-21T22:06:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790025376",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r790059660"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790059660"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Replace with new peers? I don't have issues with deleting, if we still delete _anchors.dat_ maybe comment can be changed and not completely removed.",
      "commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "created_at" : "2022-01-21T23:36:42Z",
      "diff_hunk" : "@@ -58,12 +58,10 @@ std::optional<bilingual_str> LoadAddrman(const std::vector<bool>& asmap, const A\n  */\n void DumpAnchors(const fs::path& anchors_db_path, const std::vector<CAddress>& anchors);\n \n-/**\n- * Read the anchor IP address database (anchors.dat)\n- *\n- * Deleting anchors.dat is intentional as it avoids renewed peering to anchors after\n- * an unclean shutdown and thus potential exploitation of the anchor peer policy.\n- */\n+/** Read the anchor IP address database (anchors.dat) */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r790059660",
      "id" : 790059660,
      "in_reply_to_id" : 789972209,
      "line" : 61,
      "node_id" : "PRRC_kwDOABII584vF1qM",
      "original_commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "original_line" : 61,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/addrdb.h",
      "position" : 10,
      "pull_request_review_id" : 860118090,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790059660/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-21T23:38:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790059660",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r790079867"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790079867"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I understood the point. I removed it after https://github.com/bitcoin/bitcoin/pull/24034#discussion_r782789428, did you check that? what do you think?",
      "commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "created_at" : "2022-01-22T00:58:55Z",
      "diff_hunk" : "@@ -58,12 +58,10 @@ std::optional<bilingual_str> LoadAddrman(const std::vector<bool>& asmap, const A\n  */\n void DumpAnchors(const fs::path& anchors_db_path, const std::vector<CAddress>& anchors);\n \n-/**\n- * Read the anchor IP address database (anchors.dat)\n- *\n- * Deleting anchors.dat is intentional as it avoids renewed peering to anchors after\n- * an unclean shutdown and thus potential exploitation of the anchor peer policy.\n- */\n+/** Read the anchor IP address database (anchors.dat) */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r790079867",
      "id" : 790079867,
      "in_reply_to_id" : 789972209,
      "line" : 61,
      "node_id" : "PRRC_kwDOABII584vF6l7",
      "original_commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "original_line" : 61,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/addrdb.h",
      "position" : 10,
      "pull_request_review_id" : 860143105,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790079867/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-22T00:58:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790079867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> So, if my node stops before trying to connect to that peers, the `anchors.dat` file will be preserved.\r\n\r\nDo you mean the _normal_ shutdown, i.e., `stop` RPC or `Quit` in the GUI, right?",
      "created_at" : "2022-01-24T18:47:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1020426677",
      "id" : 1020426677,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII58480nm1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020426677/reactions"
      },
      "updated_at" : "2022-01-24T18:47:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020426677",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r791055768"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791055768"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why this change?",
      "commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "created_at" : "2022-01-24T18:50:33Z",
      "diff_hunk" : "@@ -2556,6 +2556,8 @@ bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\n         m_anchors = ReadAnchors(gArgs.GetDataDirNet() / ANCHORS_DATABASE_FILENAME);\n         if (m_anchors.size() > MAX_BLOCK_RELAY_ONLY_ANCHORS) {\n             m_anchors.resize(MAX_BLOCK_RELAY_ONLY_ANCHORS);\n+        } else if (m_anchors.size() == 0) {\n+            DeleteAnchorsFile(gArgs.GetDataDirNet() / ANCHORS_DATABASE_FILENAME);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r791055768",
      "id" : 791055768,
      "line" : 2560,
      "node_id" : "PRRC_kwDOABII584vJo2Y",
      "original_commit_id" : "fc734a4bffbd6085a5c7a241b587bef9b7f5b69e",
      "original_line" : 2560,
      "original_position" : 5,
      "original_start_line" : 2559,
      "path" : "src/net.cpp",
      "position" : 5,
      "pull_request_review_id" : 861385018,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791055768/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 2559,
      "start_side" : "RIGHT",
      "updated_at" : "2022-01-24T18:50:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791055768",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r791060969"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791060969"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Because if there aren't anchors we can delete the file at that point, no need to wait to try connect them.",
      "commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "created_at" : "2022-01-24T18:57:15Z",
      "diff_hunk" : "@@ -2556,6 +2556,8 @@ bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\n         m_anchors = ReadAnchors(gArgs.GetDataDirNet() / ANCHORS_DATABASE_FILENAME);\n         if (m_anchors.size() > MAX_BLOCK_RELAY_ONLY_ANCHORS) {\n             m_anchors.resize(MAX_BLOCK_RELAY_ONLY_ANCHORS);\n+        } else if (m_anchors.size() == 0) {\n+            DeleteAnchorsFile(gArgs.GetDataDirNet() / ANCHORS_DATABASE_FILENAME);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r791060969",
      "id" : 791060969,
      "in_reply_to_id" : 791055768,
      "line" : 2560,
      "node_id" : "PRRC_kwDOABII584vJqHp",
      "original_commit_id" : "fc734a4bffbd6085a5c7a241b587bef9b7f5b69e",
      "original_line" : 2560,
      "original_position" : 5,
      "original_start_line" : 2559,
      "path" : "src/net.cpp",
      "position" : 5,
      "pull_request_review_id" : 861391957,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791060969/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 2559,
      "start_side" : "RIGHT",
      "updated_at" : "2022-01-24T19:16:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791060969",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r791259439"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791259439"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "We talked about it earlier but I just remembered I can't remove it because in https://github.com/bitcoin/bitcoin/pull/24034/files#diff-00021eed586a482abdb09d6cdada1d90115abe988a91421851960e26658bed02R2029 if `m_anchors` is empty the anchors.dat won't be deleted. ",
      "commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "created_at" : "2022-01-25T00:27:40Z",
      "diff_hunk" : "@@ -2556,6 +2556,8 @@ bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\n         m_anchors = ReadAnchors(gArgs.GetDataDirNet() / ANCHORS_DATABASE_FILENAME);\n         if (m_anchors.size() > MAX_BLOCK_RELAY_ONLY_ANCHORS) {\n             m_anchors.resize(MAX_BLOCK_RELAY_ONLY_ANCHORS);\n+        } else if (m_anchors.size() == 0) {\n+            DeleteAnchorsFile(gArgs.GetDataDirNet() / ANCHORS_DATABASE_FILENAME);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r791259439",
      "id" : 791259439,
      "in_reply_to_id" : 791055768,
      "line" : 2560,
      "node_id" : "PRRC_kwDOABII584vKakv",
      "original_commit_id" : "fc734a4bffbd6085a5c7a241b587bef9b7f5b69e",
      "original_line" : 2560,
      "original_position" : 5,
      "original_start_line" : 2559,
      "path" : "src/net.cpp",
      "position" : 5,
      "pull_request_review_id" : 861660267,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791259439/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 2559,
      "start_side" : "RIGHT",
      "updated_at" : "2022-01-25T00:28:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791259439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Do you mean the _normal_ shutdown, i.e., `stop` RPC or `Quit` in the GUI, right?\r\n\r\nYes.",
      "created_at" : "2022-02-01T18:49:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1027173677",
      "id" : 1027173677,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII5849OW0t",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1027173677/reactions"
      },
      "updated_at" : "2022-02-01T18:49:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1027173677",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r806806734"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806806734"
         }
      },
      "author_association" : "NONE",
      "body" : "nit: we use m_anchors.empty() a few lines higher up, would suggest to stay consistent?\r\n```suggestion\r\n                if (m_anchors.empty()) delete_anchors_file = true;\r\n```",
      "commit_id" : "fe350d62d961a21e3dd162ba960a4e7b9e95461b",
      "created_at" : "2022-02-15T13:01:50Z",
      "diff_hunk" : "@@ -2023,11 +2023,13 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n \n         int64_t nANow = GetAdjustedTime();\n         int nTries = 0;\n+        bool delete_anchors_file{false};\n         while (!interruptNet)\n         {\n             if (anchor && !m_anchors.empty()) {\n                 const CAddress addr = m_anchors.back();\n                 m_anchors.pop_back();\n+                if (m_anchors.size() == 0) delete_anchors_file = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r806806734",
      "id" : 806806734,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584wFuTO",
      "original_commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "original_line" : 2032,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 882949308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806806734/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-18T22:02:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806806734",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r806829487"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806829487"
         }
      },
      "author_association" : "NONE",
      "body" : "What do you think about making `anchors_db_path` optional? If you apply the same pattern to `DumpAnchors`, `ReadAnchors` and `DeleteAnchorsFile`, you can move the definition of `ANCHORS_DATABASE_FILENAME` to `addrdb.cpp`. Personally I think it's more logical to define the default path logic within these functions since they're called `DeleteAnchorsFile`, not `DeleteFile`.\r\n```suggestion\r\nvoid DeleteAnchorsFile(std::optional<const fs::path> anchors_db_path)\r\n{\r\n    fs::path path{ anchors_db_path.value_or(gArgs.GetDataDirNet() / ANCHORS_DATABASE_FILENAME) };\r\n    fs::remove(path);\r\n}\r\n```",
      "commit_id" : "fe350d62d961a21e3dd162ba960a4e7b9e95461b",
      "created_at" : "2022-02-15T13:27:50Z",
      "diff_hunk" : "@@ -220,6 +220,7 @@ std::vector<CAddress> ReadAnchors(const fs::path& anchors_db_path)\n         anchors.clear();\n     }\n \n-    fs::remove(anchors_db_path);\n     return anchors;\n }\n+\n+void DeleteAnchorsFile(const fs::path& anchors_db_path) { fs::remove(anchors_db_path); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r806829487",
      "id" : 806829487,
      "line" : 227,
      "node_id" : "PRRC_kwDOABII584wFz2v",
      "original_commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "original_line" : 227,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/addrdb.cpp",
      "position" : 8,
      "pull_request_review_id" : 882949308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806829487/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-18T22:02:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806829487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r811142840"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811142840"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Agreed, done! ",
      "commit_id" : "fe350d62d961a21e3dd162ba960a4e7b9e95461b",
      "created_at" : "2022-02-21T13:44:46Z",
      "diff_hunk" : "@@ -2023,11 +2023,13 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n \n         int64_t nANow = GetAdjustedTime();\n         int nTries = 0;\n+        bool delete_anchors_file{false};\n         while (!interruptNet)\n         {\n             if (anchor && !m_anchors.empty()) {\n                 const CAddress addr = m_anchors.back();\n                 m_anchors.pop_back();\n+                if (m_anchors.size() == 0) delete_anchors_file = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r811142840",
      "id" : 811142840,
      "in_reply_to_id" : 806806734,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584wWQ64",
      "original_commit_id" : "831377b4ec2d060ed08be11d750d6113c28e25cf",
      "original_line" : 2032,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 888703164,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811142840/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-21T13:44:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/811142840",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, @stickies-v. \r\n\r\nAdded a flag to control if a connection with all peers from anchors.dat was tried. So, if the connections with all of them have not been tried yet we don't allow `DumpAnchors`. \r\n\r\nE.g: \r\n1. Starts bitcoind\r\n2. Read anchors.dat\r\n3. 2 block-relay-only anchors will be tried for connections\r\n4. Shutdown node before trying to connect to them\r\n5. Preserve anchors.dat and don't allow call to `DumpAnchors`",
      "created_at" : "2022-02-21T13:56:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1046906942",
      "id" : 1046906942,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII584-Zog-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046906942/reactions"
      },
      "updated_at" : "2022-02-21T13:56:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046906942",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r817692644"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/817692644"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: in order to create minimal diffs (and save reviewers time), I'd suggest to stick to either `.size() == 0` or `.empty()` from the very first commit that introduces it and not change it after.",
      "commit_id" : "fe350d62d961a21e3dd162ba960a4e7b9e95461b",
      "created_at" : "2022-03-02T13:31:49Z",
      "diff_hunk" : "@@ -2053,7 +2053,7 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n             if (anchor && !m_anchors.empty()) {\n                 const CAddress addr = m_anchors.back();\n                 m_anchors.pop_back();\n-                if (m_anchors.size() == 0) delete_anchors_file = true;\n+                if (m_anchors.empty()) delete_anchors_file = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r817692644",
      "id" : 817692644,
      "line" : 2056,
      "node_id" : "PRRC_kwDOABII584wvP_k",
      "original_commit_id" : "fe350d62d961a21e3dd162ba960a4e7b9e95461b",
      "original_line" : 2056,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 5,
      "pull_request_review_id" : 897576991,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/817692644/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-02T13:39:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/817692644",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r818760579"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/818760579"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "If `anchors_to_dump` is empty, there is nothing to dump.\r\n\r\n```suggestion\r\n            if (!anchors_to_dump.empty()) {\r\n```",
      "commit_id" : "fe350d62d961a21e3dd162ba960a4e7b9e95461b",
      "created_at" : "2022-03-03T15:19:02Z",
      "diff_hunk" : "@@ -2713,7 +2723,10 @@ void CConnman::StopNodes()\n             if (anchors_to_dump.size() > MAX_BLOCK_RELAY_ONLY_ANCHORS) {\n                 anchors_to_dump.resize(MAX_BLOCK_RELAY_ONLY_ANCHORS);\n             }\n-            DumpAnchors(gArgs.GetDataDirNet() / ANCHORS_DATABASE_FILENAME, anchors_to_dump);\n+\n+            if (tried_connect_anchors) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r818760579",
      "id" : 818760579,
      "line" : 2727,
      "node_id" : "PRRC_kwDOABII584wzUuD",
      "original_commit_id" : "fe350d62d961a21e3dd162ba960a4e7b9e95461b",
      "original_line" : 2727,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 42,
      "pull_request_review_id" : 899072914,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/818760579/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-03T15:54:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/818760579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/84432093?v=4",
         "events_url" : "https://api.github.com/users/lsilva01/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lsilva01/followers",
         "following_url" : "https://api.github.com/users/lsilva01/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lsilva01/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lsilva01",
         "id" : 84432093,
         "login" : "lsilva01",
         "node_id" : "MDQ6VXNlcjg0NDMyMDkz",
         "organizations_url" : "https://api.github.com/users/lsilva01/orgs",
         "received_events_url" : "https://api.github.com/users/lsilva01/received_events",
         "repos_url" : "https://api.github.com/users/lsilva01/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lsilva01/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lsilva01"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r818794173"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/818794173"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "If this code is added, I think the `delete_anchors_file` variable can be removed and the `DeleteAnchorsFile` in `CConnman::Start` can also be removed.\r\n\r\nEDIT: The suggestion preview is not accurate. The suggested code should be inside `while (!interruptNet)`.\r\n\r\n```suggestion\r\n        if (m_anchors.empty()) DeleteAnchorsFile(gArgs.GetDataDirNet() / ANCHORS_DATABASE_FILENAME);\r\n```",
      "commit_id" : "fe350d62d961a21e3dd162ba960a4e7b9e95461b",
      "created_at" : "2022-03-03T15:51:44Z",
      "diff_hunk" : "@@ -2047,11 +2047,13 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n \n         int64_t nANow = GetAdjustedTime();\n         int nTries = 0;\n+        bool delete_anchors_file{false};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r818794173",
      "id" : 818794173,
      "line" : 2050,
      "node_id" : "PRRC_kwDOABII584wzc69",
      "original_commit_id" : "fe350d62d961a21e3dd162ba960a4e7b9e95461b",
      "original_line" : 2050,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 4,
      "pull_request_review_id" : 899072914,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/818794173/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-03T15:57:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/818794173",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/84432093?v=4",
         "events_url" : "https://api.github.com/users/lsilva01/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lsilva01/followers",
         "following_url" : "https://api.github.com/users/lsilva01/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lsilva01/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lsilva01",
         "id" : 84432093,
         "login" : "lsilva01",
         "node_id" : "MDQ6VXNlcjg0NDMyMDkz",
         "organizations_url" : "https://api.github.com/users/lsilva01/orgs",
         "received_events_url" : "https://api.github.com/users/lsilva01/received_events",
         "repos_url" : "https://api.github.com/users/lsilva01/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lsilva01/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lsilva01"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r824108835"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/824108835"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "What if my node connected to one node from anchors.dat but a connection to the other one has not been tried yet? In this case, `anchors_to_dump` wouldn't be empty.",
      "commit_id" : "fe350d62d961a21e3dd162ba960a4e7b9e95461b",
      "created_at" : "2022-03-10T20:01:57Z",
      "diff_hunk" : "@@ -2713,7 +2723,10 @@ void CConnman::StopNodes()\n             if (anchors_to_dump.size() > MAX_BLOCK_RELAY_ONLY_ANCHORS) {\n                 anchors_to_dump.resize(MAX_BLOCK_RELAY_ONLY_ANCHORS);\n             }\n-            DumpAnchors(gArgs.GetDataDirNet() / ANCHORS_DATABASE_FILENAME, anchors_to_dump);\n+\n+            if (tried_connect_anchors) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r824108835",
      "id" : 824108835,
      "in_reply_to_id" : 818760579,
      "line" : 2727,
      "node_id" : "PRRC_kwDOABII584xHucj",
      "original_commit_id" : "fe350d62d961a21e3dd162ba960a4e7b9e95461b",
      "original_line" : 2727,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 42,
      "pull_request_review_id" : 906390623,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/824108835/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-10T20:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/824108835",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@mzumsande \r\n\r\n> If I understand it correctly, this PR changes behavior in the special case where a clean shutdown is happening in the time window between startup and connecting to the anchors.\r\n\r\nThis PR covers both scenarios (clean and unclean). See the functional test this PR modifies, I just added (last force-pushed) a coverage for un clean shutdown using the same logic as `feature_init`.\r\n\r\n> Is there a realistic scenario for how this could happen? If the shutdown was caused maliciously (by DoS, power shutdown, etc.), I think it would likely not be clean.\r\n\r\n> The only scenario I could think of is that the node operator themselves initiate a clean shutdown (maybe they forgot to specify a startup option, send a SIGINT and try again).\r\n\r\nYes, you're right, I don't think there is a realistic/explicit scenario as an unclean has. It could be caused by a node operator, maybe a social engineering, but there are many more scenarios for unclean shutdown as you mentioned (DoS, power shutdown, etc.). ",
      "created_at" : "2022-03-15T23:37:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1068565590",
      "id" : 1068565590,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII584_sQRW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1068565590/reactions"
      },
      "updated_at" : "2022-03-15T23:37:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1068565590",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [theStack](https://github.com/bitcoin/bitcoin/pull/24034#pullrequestreview-897576991) |\n| Approach ACK | [lsilva01](https://github.com/bitcoin/bitcoin/pull/24034#pullrequestreview-899072914) |\n\nIf your review is incorrectly listed, please react with  to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27071](https://github.com/bitcoin/bitcoin/pull/27071) (Handle CJDNS from LookupSubNet() by vasild)\n* [#25284](https://github.com/bitcoin/bitcoin/pull/25284) (net: Use serialization parameters for CAddress serialization by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-09-23T13:50:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1256243427",
      "id" : 1256243427,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII585K4MDj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1256243427/reactions"
      },
      "updated_at" : "2023-09-04T17:51:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1256243427",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Are you still working on this?",
      "created_at" : "2022-10-12T18:55:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1276601470",
      "id" : 1276601470,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII585MF2R-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276601470/reactions"
      },
      "updated_at" : "2022-10-12T18:55:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276601470",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Are you still working on this?\r\n\r\nYes! Moving it this week.",
      "created_at" : "2022-10-17T17:01:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1281176199",
      "id" : 1281176199,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII585MXTKH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1281176199/reactions"
      },
      "updated_at" : "2022-10-17T17:01:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1281176199",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r997476872"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/997476872"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No, I think we can't do it. Because I just want to delete anchors.dat after trying the connection what's not the scenario in L2050.. That's why it sets `delete_anchors_file=true` and at the end we check it to know if it's time to delete the file.",
      "commit_id" : "41ae2b45b1e7609a1946ea2a3df5b26282540df2",
      "created_at" : "2022-10-17T20:23:05Z",
      "diff_hunk" : "@@ -2047,11 +2047,13 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n \n         int64_t nANow = GetAdjustedTime();\n         int nTries = 0;\n+        bool delete_anchors_file{false};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r997476872",
      "id" : 997476872,
      "in_reply_to_id" : 818794173,
      "line" : 1763,
      "node_id" : "PRRC_kwDOABII5847dEoI",
      "original_commit_id" : "fe350d62d961a21e3dd162ba960a4e7b9e95461b",
      "original_line" : 1763,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 13,
      "pull_request_review_id" : 1144764525,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/997476872/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-17T20:23:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/997476872",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Just discovered another thing this PR may fix. \r\n\r\n1. Start `bitcoind`\r\n2. Wait 2 block-relay-only connections\r\n3. Shutdown it and start `bitcoind` with `-stopafterblockimport`\r\n\r\nSince there is no enough time to establish the 2 connections from `anchors.dat` (because it's gonna stop after block import), maybe there is time for just one, it's gonna clean up that peer from `anchors.dat`.",
      "created_at" : "2022-11-30T14:41:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1332266973",
      "id" : 1332266973,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII585PaMfd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1332266973/reactions"
      },
      "updated_at" : "2022-11-30T14:41:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1332266973",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r1056960136"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056960136"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Right now if we fail to remove the file we crash fairly early on startup, so the user can investigate why they are unable to remove it. With this change we will get pretty far into normal operation before crashing. Should we catch and log any error if we fail to remove, or is it a fatal error if we don't remove?",
      "commit_id" : "658cfb1aa95664b68774f3b4e1b278fb9fa0cba7",
      "created_at" : "2022-12-25T14:18:26Z",
      "diff_hunk" : "@@ -214,22 +217,29 @@ std::optional<bilingual_str> LoadAddrman(const NetGroupManager& netgroupman, con\n     return std::nullopt;\n }\n \n-void DumpAnchors(const fs::path& anchors_db_path, const std::vector<CAddress>& anchors)\n+void DumpAnchors(const std::vector<CAddress>& anchors)\n {\n+    const fs::path path{gArgs.GetDataDirNet() / ANCHORS_DATABASE_FILENAME};\n     LOG_TIME_SECONDS(strprintf(\"Flush %d outbound block-relay-only peer addresses to anchors.dat\", anchors.size()));\n-    SerializeFileDB(\"anchors\", anchors_db_path, anchors, CLIENT_VERSION | ADDRV2_FORMAT);\n+    SerializeFileDB(\"anchors\", path, anchors, CLIENT_VERSION | ADDRV2_FORMAT);\n }\n \n-std::vector<CAddress> ReadAnchors(const fs::path& anchors_db_path)\n+std::vector<CAddress> ReadAnchors()\n {\n     std::vector<CAddress> anchors;\n+    const fs::path path{gArgs.GetDataDirNet() / ANCHORS_DATABASE_FILENAME};\n     try {\n-        DeserializeFileDB(anchors_db_path, anchors, CLIENT_VERSION | ADDRV2_FORMAT);\n-        LogPrintf(\"Loaded %i addresses from %s\\n\", anchors.size(), fs::quoted(fs::PathToString(anchors_db_path.filename())));\n+        DeserializeFileDB(path, anchors, CLIENT_VERSION | ADDRV2_FORMAT);\n+        LogPrintf(\"Loaded %i addresses from %s\\n\", anchors.size(), fs::quoted(fs::PathToString(path.filename())));\n     } catch (const std::exception&) {\n         anchors.clear();\n     }\n \n-    fs::remove(anchors_db_path);\n     return anchors;\n }\n+\n+void DeleteAnchorsFile()\n+{\n+    const fs::path path{gArgs.GetDataDirNet() / ANCHORS_DATABASE_FILENAME};\n+    fs::remove(path);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#discussion_r1056960136",
      "id" : 1056960136,
      "line" : 244,
      "node_id" : "PRRC_kwDOABII584-_-6I",
      "original_commit_id" : "658cfb1aa95664b68774f3b4e1b278fb9fa0cba7",
      "original_line" : 244,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "src/addrdb.cpp",
      "position" : 44,
      "pull_request_review_id" : 1229750648,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24034",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056960136/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-25T14:18:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056960136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--8ac04cdde196e94527acabf64b896448-->\r\nThere hasn't been much activity lately. What is the status here?\r\n\r\n[Finding reviewers](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#finding-reviewers) may take time. However, if the patch is no longer relevant, please close this pull request. If the author lost interest or time to work on this, please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\r\n",
      "created_at" : "2023-09-03T10:20:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1704106670",
      "id" : 1704106670,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII585lkpqu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1704106670/reactions"
      },
      "updated_at" : "2023-09-03T10:20:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1704106670",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\n This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-09-07T11:54:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1710018493",
      "id" : 1710018493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII585l7M-9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1710018493/reactions"
      },
      "updated_at" : "2023-09-07T11:54:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1710018493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--13523179cfe9479db18ec6c5d236f789-->\nThere hasn't been much activity lately and the patch still needs rebase. What is the status here?\n\n* Is it still relevant?  Please solve the conflicts to make it ready for review and to ensure the CI passes.\n* Is it no longer relevant?  Please close.\n* Did the author lose interest or time to work on this?  Please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\n",
      "created_at" : "2023-12-06T01:23:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1841924046",
      "id" : 1841924046,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII585tyYfO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1841924046/reactions"
      },
      "updated_at" : "2023-12-06T01:23:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1841924046",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--13523179cfe9479db18ec6c5d236f789-->\n There hasn't been much activity lately and the patch still needs rebase. What is the status here?\n\n* Is it still relevant?  Please solve the conflicts to make it ready for review and to ensure the CI passes.\n* Is it no longer relevant?  Please close.\n* Did the author lose interest or time to work on this?  Please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\n",
      "created_at" : "2024-03-05T00:18:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1977715827",
      "id" : 1977715827,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII58514Yxz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1977715827/reactions"
      },
      "updated_at" : "2024-03-05T00:18:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1977715827",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--2e250dc3d92b2c9115b66051148d6e47-->\n There hasn't been much activity lately and the CI seems to be failing.\n\nIf no one reviewed the current pull request by commit hash, a [rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes) can be considered. While the CI failure may be a false positive, the CI hasn't been running for some time, so there may be a real issue hiding as well. A rebase triggers the latest CI and makes sure that no silent merge conflicts have snuck in.\n",
      "created_at" : "2024-03-05T00:18:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24034#issuecomment-1977715853",
      "id" : 1977715853,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24034",
      "node_id" : "IC_kwDOABII58514YyN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1977715853/reactions"
      },
      "updated_at" : "2024-03-05T00:18:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1977715853",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
