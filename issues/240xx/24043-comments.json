[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r782616034"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782616034"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In 9966b84894801879cda1d2639ab3da7f29be55e7:\r\n\r\nWe are actually limited by starting witness stack size. So the number of keys should be <= 1000 (excluding control block and script itself). 512 seems like a good choice. But the above comment can be updated",
      "commit_id" : "2f247330f7e93a4d4d29bd8fbe18751d5f47c49f",
      "created_at" : "2022-01-12T00:07:54Z",
      "diff_hunk" : "@@ -23,6 +23,13 @@\n \n namespace {\n \n+/** Current maximum number of accepted public keys in a multi_a descriptor.\n+ *  The theoretical limit of what fits in 100000 vbytes is around 11418,\n+ *  but limit to a significantly smaller number to avoid running into\n+ *  transaction size limits when multiple of these occur in a transaction,\n+ *  and to keep descriptor strings of reasonable length. */\n+static constexpr unsigned int MAX_PUBKEYS_PER_MULTI_A = 512;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r782616034",
      "id" : 782616034,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584upcXi",
      "original_commit_id" : "9966b84894801879cda1d2639ab3da7f29be55e7",
      "original_line" : 31,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 849852341,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782616034/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-12T01:04:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782616034",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6881849?v=4",
         "events_url" : "https://api.github.com/users/sanket1729/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sanket1729/followers",
         "following_url" : "https://api.github.com/users/sanket1729/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sanket1729/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sanket1729",
         "id" : 6881849,
         "login" : "sanket1729",
         "node_id" : "MDQ6VXNlcjY4ODE4NDk=",
         "organizations_url" : "https://api.github.com/users/sanket1729/orgs",
         "received_events_url" : "https://api.github.com/users/sanket1729/received_events",
         "repos_url" : "https://api.github.com/users/sanket1729/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sanket1729/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sanket1729/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sanket1729"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r782622388"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782622388"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In 9966b84:\r\nshould this be `keyspans.size() > MAX_PUBKEYS_PER_MULTI_A`?",
      "commit_id" : "2f247330f7e93a4d4d29bd8fbe18751d5f47c49f",
      "created_at" : "2022-01-12T00:24:32Z",
      "diff_hunk" : "@@ -130,17 +131,53 @@ static bool MatchMultisig(const CScript& script, int& required_sigs, std::vector\n     CScript::const_iterator it = script.begin();\n     if (script.size() < 1 || script.back() != OP_CHECKMULTISIG) return false;\n \n-    if (!script.GetOp(it, opcode, data) || !GetMultisigKeyCount(opcode, data, required_sigs)) return false;\n+    if (!script.GetOp(it, opcode, data)) return false;\n+    if (!GetMultisigKeyCount(opcode, data, required_sigs, MAX_PUBKEYS_PER_MULTISIG)) return false;\n     while (script.GetOp(it, opcode, data) && CPubKey::ValidSize(data)) {\n         pubkeys.emplace_back(std::move(data));\n     }\n-    if (!GetMultisigKeyCount(opcode, data, num_keys)) return false;\n+    if (!GetMultisigKeyCount(opcode, data, num_keys, MAX_PUBKEYS_PER_MULTISIG)) return false;\n \n     if (pubkeys.size() != static_cast<unsigned long>(num_keys) || num_keys < required_sigs) return false;\n \n     return (it + 1 == script.end());\n }\n \n+std::optional<std::pair<int, std::vector<Span<const unsigned char>>>> MatchMultiA(const CScript& script)\n+{\n+    std::vector<Span<const unsigned char>> keyspans;\n+\n+    // Redundant, but very fast and selective test.\n+    if (script.size() == 0 || script[0] != 32 || script.back() != OP_NUMEQUAL) return {};\n+\n+    // Parse keys\n+    auto it = script.begin();\n+    while (script.end() - it >= 34) {\n+        if (*it != 32) return {};\n+        ++it;\n+        keyspans.emplace_back(&*it, 32);\n+        it += 32;\n+        if (*it != (keyspans.size() == 1 ? OP_CHECKSIG : OP_CHECKSIGADD)) return {};\n+        ++it;\n+    }\n+    if (keyspans.size() == 0 || keyspans.size() > (MAX_BLOCK_WEIGHT / 34)) return {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r782622388",
      "id" : 782622388,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584upd60",
      "original_commit_id" : "9966b84894801879cda1d2639ab3da7f29be55e7",
      "original_line" : 163,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 849852341,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782622388/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-12T01:04:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782622388",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6881849?v=4",
         "events_url" : "https://api.github.com/users/sanket1729/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sanket1729/followers",
         "following_url" : "https://api.github.com/users/sanket1729/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sanket1729/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sanket1729",
         "id" : 6881849,
         "login" : "sanket1729",
         "node_id" : "MDQ6VXNlcjY4ODE4NDk=",
         "organizations_url" : "https://api.github.com/users/sanket1729/orgs",
         "received_events_url" : "https://api.github.com/users/sanket1729/received_events",
         "repos_url" : "https://api.github.com/users/sanket1729/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sanket1729/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sanket1729/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sanket1729"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r782626168"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782626168"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In 9966b84:\r\n\r\nnit: It is slightly confusing that the function named `GetMultisigKeyCount` is being used to decode the threshold and check that threshold is within limits. Can't think of a clear better name",
      "commit_id" : "2f247330f7e93a4d4d29bd8fbe18751d5f47c49f",
      "created_at" : "2022-01-12T00:35:07Z",
      "diff_hunk" : "@@ -130,17 +131,53 @@ static bool MatchMultisig(const CScript& script, int& required_sigs, std::vector\n     CScript::const_iterator it = script.begin();\n     if (script.size() < 1 || script.back() != OP_CHECKMULTISIG) return false;\n \n-    if (!script.GetOp(it, opcode, data) || !GetMultisigKeyCount(opcode, data, required_sigs)) return false;\n+    if (!script.GetOp(it, opcode, data)) return false;\n+    if (!GetMultisigKeyCount(opcode, data, required_sigs, MAX_PUBKEYS_PER_MULTISIG)) return false;\n     while (script.GetOp(it, opcode, data) && CPubKey::ValidSize(data)) {\n         pubkeys.emplace_back(std::move(data));\n     }\n-    if (!GetMultisigKeyCount(opcode, data, num_keys)) return false;\n+    if (!GetMultisigKeyCount(opcode, data, num_keys, MAX_PUBKEYS_PER_MULTISIG)) return false;\n \n     if (pubkeys.size() != static_cast<unsigned long>(num_keys) || num_keys < required_sigs) return false;\n \n     return (it + 1 == script.end());\n }\n \n+std::optional<std::pair<int, std::vector<Span<const unsigned char>>>> MatchMultiA(const CScript& script)\n+{\n+    std::vector<Span<const unsigned char>> keyspans;\n+\n+    // Redundant, but very fast and selective test.\n+    if (script.size() == 0 || script[0] != 32 || script.back() != OP_NUMEQUAL) return {};\n+\n+    // Parse keys\n+    auto it = script.begin();\n+    while (script.end() - it >= 34) {\n+        if (*it != 32) return {};\n+        ++it;\n+        keyspans.emplace_back(&*it, 32);\n+        it += 32;\n+        if (*it != (keyspans.size() == 1 ? OP_CHECKSIG : OP_CHECKSIGADD)) return {};\n+        ++it;\n+    }\n+    if (keyspans.size() == 0 || keyspans.size() > (MAX_BLOCK_WEIGHT / 34)) return {};\n+\n+    // Parse threshold.\n+    opcodetype opcode;\n+    std::vector<unsigned char> data;\n+    if (!script.GetOp(it, opcode, data)) return {};\n+    if (it == script.end()) return {};\n+    if (*it != OP_NUMEQUAL) return {};\n+    ++it;\n+    if (it != script.end()) return {};\n+    int threshold;\n+    if (!GetMultisigKeyCount(opcode, data, threshold, (int)keyspans.size())) return {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r782626168",
      "id" : 782626168,
      "line" : 173,
      "node_id" : "PRRC_kwDOABII584upe14",
      "original_commit_id" : "9966b84894801879cda1d2639ab3da7f29be55e7",
      "original_line" : 173,
      "original_position" : 83,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : 75,
      "pull_request_review_id" : 849852341,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782626168/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-12T01:04:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782626168",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6881849?v=4",
         "events_url" : "https://api.github.com/users/sanket1729/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sanket1729/followers",
         "following_url" : "https://api.github.com/users/sanket1729/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sanket1729/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sanket1729",
         "id" : 6881849,
         "login" : "sanket1729",
         "node_id" : "MDQ6VXNlcjY4ODE4NDk=",
         "organizations_url" : "https://api.github.com/users/sanket1729/orgs",
         "received_events_url" : "https://api.github.com/users/sanket1729/received_events",
         "repos_url" : "https://api.github.com/users/sanket1729/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sanket1729/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sanket1729/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sanket1729"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r782627474"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782627474"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In 9966b84:\r\nThis line is redundant because the above `GetMultiSigKeyCount` would check that threshold is less than keyspans.size()",
      "commit_id" : "2f247330f7e93a4d4d29bd8fbe18751d5f47c49f",
      "created_at" : "2022-01-12T00:38:45Z",
      "diff_hunk" : "@@ -130,17 +131,53 @@ static bool MatchMultisig(const CScript& script, int& required_sigs, std::vector\n     CScript::const_iterator it = script.begin();\n     if (script.size() < 1 || script.back() != OP_CHECKMULTISIG) return false;\n \n-    if (!script.GetOp(it, opcode, data) || !GetMultisigKeyCount(opcode, data, required_sigs)) return false;\n+    if (!script.GetOp(it, opcode, data)) return false;\n+    if (!GetMultisigKeyCount(opcode, data, required_sigs, MAX_PUBKEYS_PER_MULTISIG)) return false;\n     while (script.GetOp(it, opcode, data) && CPubKey::ValidSize(data)) {\n         pubkeys.emplace_back(std::move(data));\n     }\n-    if (!GetMultisigKeyCount(opcode, data, num_keys)) return false;\n+    if (!GetMultisigKeyCount(opcode, data, num_keys, MAX_PUBKEYS_PER_MULTISIG)) return false;\n \n     if (pubkeys.size() != static_cast<unsigned long>(num_keys) || num_keys < required_sigs) return false;\n \n     return (it + 1 == script.end());\n }\n \n+std::optional<std::pair<int, std::vector<Span<const unsigned char>>>> MatchMultiA(const CScript& script)\n+{\n+    std::vector<Span<const unsigned char>> keyspans;\n+\n+    // Redundant, but very fast and selective test.\n+    if (script.size() == 0 || script[0] != 32 || script.back() != OP_NUMEQUAL) return {};\n+\n+    // Parse keys\n+    auto it = script.begin();\n+    while (script.end() - it >= 34) {\n+        if (*it != 32) return {};\n+        ++it;\n+        keyspans.emplace_back(&*it, 32);\n+        it += 32;\n+        if (*it != (keyspans.size() == 1 ? OP_CHECKSIG : OP_CHECKSIGADD)) return {};\n+        ++it;\n+    }\n+    if (keyspans.size() == 0 || keyspans.size() > (MAX_BLOCK_WEIGHT / 34)) return {};\n+\n+    // Parse threshold.\n+    opcodetype opcode;\n+    std::vector<unsigned char> data;\n+    if (!script.GetOp(it, opcode, data)) return {};\n+    if (it == script.end()) return {};\n+    if (*it != OP_NUMEQUAL) return {};\n+    ++it;\n+    if (it != script.end()) return {};\n+    int threshold;\n+    if (!GetMultisigKeyCount(opcode, data, threshold, (int)keyspans.size())) return {};\n+    if ((size_t)threshold > keyspans.size()) return {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r782627474",
      "id" : 782627474,
      "line" : 174,
      "node_id" : "PRRC_kwDOABII584upfKS",
      "original_commit_id" : "9966b84894801879cda1d2639ab3da7f29be55e7",
      "original_line" : 174,
      "original_position" : 84,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : 76,
      "pull_request_review_id" : 849852341,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782627474/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-12T01:04:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782627474",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6881849?v=4",
         "events_url" : "https://api.github.com/users/sanket1729/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sanket1729/followers",
         "following_url" : "https://api.github.com/users/sanket1729/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sanket1729/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sanket1729",
         "id" : 6881849,
         "login" : "sanket1729",
         "node_id" : "MDQ6VXNlcjY4ODE4NDk=",
         "organizations_url" : "https://api.github.com/users/sanket1729/orgs",
         "received_events_url" : "https://api.github.com/users/sanket1729/received_events",
         "repos_url" : "https://api.github.com/users/sanket1729/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sanket1729/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sanket1729/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sanket1729"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24149](https://github.com/bitcoin/bitcoin/pull/24149) (Signing support for Miniscript Descriptors by darosior)\n* [#24148](https://github.com/bitcoin/bitcoin/pull/24148) (Miniscript support in Output Descriptors by darosior)\n* [#24147](https://github.com/bitcoin/bitcoin/pull/24147) (Miniscript integration by darosior)\n* [#23578](https://github.com/bitcoin/bitcoin/pull/23578) (Add external signer taproot support by Sjors)\n* [#23502](https://github.com/bitcoin/bitcoin/pull/23502) (wallet: Avoid underpaying transaction fees when signing taproot spends by achow101)\n* [#22838](https://github.com/bitcoin/bitcoin/pull/22838) (descriptors: Be able to specify change and receiving in a single descriptor string by achow101)\n* [#22558](https://github.com/bitcoin/bitcoin/pull/22558) (psbt: Taproot fields for PSBT by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-01-12T03:17:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1010590949",
      "id" : 1010590949,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII5848PGTl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1010590949/reactions"
      },
      "updated_at" : "2022-02-24T16:07:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1010590949",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r782696209"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782696209"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh, good point. That's possibly a reason to set the limit to 999 instead (so that the first pubkey pushed doesn't push it past 1000).",
      "commit_id" : "2f247330f7e93a4d4d29bd8fbe18751d5f47c49f",
      "created_at" : "2022-01-12T04:13:05Z",
      "diff_hunk" : "@@ -23,6 +23,13 @@\n \n namespace {\n \n+/** Current maximum number of accepted public keys in a multi_a descriptor.\n+ *  The theoretical limit of what fits in 100000 vbytes is around 11418,\n+ *  but limit to a significantly smaller number to avoid running into\n+ *  transaction size limits when multiple of these occur in a transaction,\n+ *  and to keep descriptor strings of reasonable length. */\n+static constexpr unsigned int MAX_PUBKEYS_PER_MULTI_A = 512;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r782696209",
      "id" : 782696209,
      "in_reply_to_id" : 782616034,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584upv8R",
      "original_commit_id" : "9966b84894801879cda1d2639ab3da7f29be55e7",
      "original_line" : 31,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 849955226,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782696209/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-12T04:13:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782696209",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r782697309"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782697309"
         }
      },
      "author_association" : "MEMBER",
      "body" : "With your comment above, probably.\n\nBut my thinking here was that the matching code shouldn't be as strict as the descriptors (in that signing should work if you happen to have a script that happens to exceed those policy-informed limits).\n\nBut if we set the limit to just 999, which appears to be the *consensus* limit, that's something the matcher should also use.",
      "commit_id" : "2f247330f7e93a4d4d29bd8fbe18751d5f47c49f",
      "created_at" : "2022-01-12T04:17:13Z",
      "diff_hunk" : "@@ -130,17 +131,53 @@ static bool MatchMultisig(const CScript& script, int& required_sigs, std::vector\n     CScript::const_iterator it = script.begin();\n     if (script.size() < 1 || script.back() != OP_CHECKMULTISIG) return false;\n \n-    if (!script.GetOp(it, opcode, data) || !GetMultisigKeyCount(opcode, data, required_sigs)) return false;\n+    if (!script.GetOp(it, opcode, data)) return false;\n+    if (!GetMultisigKeyCount(opcode, data, required_sigs, MAX_PUBKEYS_PER_MULTISIG)) return false;\n     while (script.GetOp(it, opcode, data) && CPubKey::ValidSize(data)) {\n         pubkeys.emplace_back(std::move(data));\n     }\n-    if (!GetMultisigKeyCount(opcode, data, num_keys)) return false;\n+    if (!GetMultisigKeyCount(opcode, data, num_keys, MAX_PUBKEYS_PER_MULTISIG)) return false;\n \n     if (pubkeys.size() != static_cast<unsigned long>(num_keys) || num_keys < required_sigs) return false;\n \n     return (it + 1 == script.end());\n }\n \n+std::optional<std::pair<int, std::vector<Span<const unsigned char>>>> MatchMultiA(const CScript& script)\n+{\n+    std::vector<Span<const unsigned char>> keyspans;\n+\n+    // Redundant, but very fast and selective test.\n+    if (script.size() == 0 || script[0] != 32 || script.back() != OP_NUMEQUAL) return {};\n+\n+    // Parse keys\n+    auto it = script.begin();\n+    while (script.end() - it >= 34) {\n+        if (*it != 32) return {};\n+        ++it;\n+        keyspans.emplace_back(&*it, 32);\n+        it += 32;\n+        if (*it != (keyspans.size() == 1 ? OP_CHECKSIG : OP_CHECKSIGADD)) return {};\n+        ++it;\n+    }\n+    if (keyspans.size() == 0 || keyspans.size() > (MAX_BLOCK_WEIGHT / 34)) return {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r782697309",
      "id" : 782697309,
      "in_reply_to_id" : 782622388,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584upwNd",
      "original_commit_id" : "9966b84894801879cda1d2639ab3da7f29be55e7",
      "original_line" : 163,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 849956695,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782697309/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-12T04:17:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782697309",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It seems like the distinction between the normal and `_a` variants is likely to cause confusion. Can we not support `multi` being smart enough to pick the right script? Is there a reason not to do that? How bad of a situation can exist if someone uses the wrong one?",
      "created_at" : "2022-01-12T08:02:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1010748114",
      "id" : 1010748114,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII5848PsrS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1010748114/reactions"
      },
      "updated_at" : "2022-01-12T08:02:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1010748114",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r783243411"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783243411"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I've renamed/refactored this function in a new initial commit.",
      "commit_id" : "4828d53eccd52a67631c64cef0ba7df90dff138d",
      "created_at" : "2022-01-12T16:30:49Z",
      "diff_hunk" : "@@ -130,17 +131,53 @@ static bool MatchMultisig(const CScript& script, int& required_sigs, std::vector\n     CScript::const_iterator it = script.begin();\n     if (script.size() < 1 || script.back() != OP_CHECKMULTISIG) return false;\n \n-    if (!script.GetOp(it, opcode, data) || !GetMultisigKeyCount(opcode, data, required_sigs)) return false;\n+    if (!script.GetOp(it, opcode, data)) return false;\n+    if (!GetMultisigKeyCount(opcode, data, required_sigs, MAX_PUBKEYS_PER_MULTISIG)) return false;\n     while (script.GetOp(it, opcode, data) && CPubKey::ValidSize(data)) {\n         pubkeys.emplace_back(std::move(data));\n     }\n-    if (!GetMultisigKeyCount(opcode, data, num_keys)) return false;\n+    if (!GetMultisigKeyCount(opcode, data, num_keys, MAX_PUBKEYS_PER_MULTISIG)) return false;\n \n     if (pubkeys.size() != static_cast<unsigned long>(num_keys) || num_keys < required_sigs) return false;\n \n     return (it + 1 == script.end());\n }\n \n+std::optional<std::pair<int, std::vector<Span<const unsigned char>>>> MatchMultiA(const CScript& script)\n+{\n+    std::vector<Span<const unsigned char>> keyspans;\n+\n+    // Redundant, but very fast and selective test.\n+    if (script.size() == 0 || script[0] != 32 || script.back() != OP_NUMEQUAL) return {};\n+\n+    // Parse keys\n+    auto it = script.begin();\n+    while (script.end() - it >= 34) {\n+        if (*it != 32) return {};\n+        ++it;\n+        keyspans.emplace_back(&*it, 32);\n+        it += 32;\n+        if (*it != (keyspans.size() == 1 ? OP_CHECKSIG : OP_CHECKSIGADD)) return {};\n+        ++it;\n+    }\n+    if (keyspans.size() == 0 || keyspans.size() > (MAX_BLOCK_WEIGHT / 34)) return {};\n+\n+    // Parse threshold.\n+    opcodetype opcode;\n+    std::vector<unsigned char> data;\n+    if (!script.GetOp(it, opcode, data)) return {};\n+    if (it == script.end()) return {};\n+    if (*it != OP_NUMEQUAL) return {};\n+    ++it;\n+    if (it != script.end()) return {};\n+    int threshold;\n+    if (!GetMultisigKeyCount(opcode, data, threshold, (int)keyspans.size())) return {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r783243411",
      "id" : 783243411,
      "in_reply_to_id" : 782626168,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584ur1iT",
      "original_commit_id" : "9966b84894801879cda1d2639ab3da7f29be55e7",
      "original_line" : 173,
      "original_position" : 83,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 850722387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783243411/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-12T16:30:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783243411",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r783243569"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783243569"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "4828d53eccd52a67631c64cef0ba7df90dff138d",
      "created_at" : "2022-01-12T16:30:58Z",
      "diff_hunk" : "@@ -130,17 +131,53 @@ static bool MatchMultisig(const CScript& script, int& required_sigs, std::vector\n     CScript::const_iterator it = script.begin();\n     if (script.size() < 1 || script.back() != OP_CHECKMULTISIG) return false;\n \n-    if (!script.GetOp(it, opcode, data) || !GetMultisigKeyCount(opcode, data, required_sigs)) return false;\n+    if (!script.GetOp(it, opcode, data)) return false;\n+    if (!GetMultisigKeyCount(opcode, data, required_sigs, MAX_PUBKEYS_PER_MULTISIG)) return false;\n     while (script.GetOp(it, opcode, data) && CPubKey::ValidSize(data)) {\n         pubkeys.emplace_back(std::move(data));\n     }\n-    if (!GetMultisigKeyCount(opcode, data, num_keys)) return false;\n+    if (!GetMultisigKeyCount(opcode, data, num_keys, MAX_PUBKEYS_PER_MULTISIG)) return false;\n \n     if (pubkeys.size() != static_cast<unsigned long>(num_keys) || num_keys < required_sigs) return false;\n \n     return (it + 1 == script.end());\n }\n \n+std::optional<std::pair<int, std::vector<Span<const unsigned char>>>> MatchMultiA(const CScript& script)\n+{\n+    std::vector<Span<const unsigned char>> keyspans;\n+\n+    // Redundant, but very fast and selective test.\n+    if (script.size() == 0 || script[0] != 32 || script.back() != OP_NUMEQUAL) return {};\n+\n+    // Parse keys\n+    auto it = script.begin();\n+    while (script.end() - it >= 34) {\n+        if (*it != 32) return {};\n+        ++it;\n+        keyspans.emplace_back(&*it, 32);\n+        it += 32;\n+        if (*it != (keyspans.size() == 1 ? OP_CHECKSIG : OP_CHECKSIGADD)) return {};\n+        ++it;\n+    }\n+    if (keyspans.size() == 0 || keyspans.size() > (MAX_BLOCK_WEIGHT / 34)) return {};\n+\n+    // Parse threshold.\n+    opcodetype opcode;\n+    std::vector<unsigned char> data;\n+    if (!script.GetOp(it, opcode, data)) return {};\n+    if (it == script.end()) return {};\n+    if (*it != OP_NUMEQUAL) return {};\n+    ++it;\n+    if (it != script.end()) return {};\n+    int threshold;\n+    if (!GetMultisigKeyCount(opcode, data, threshold, (int)keyspans.size())) return {};\n+    if ((size_t)threshold > keyspans.size()) return {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r783243569",
      "id" : 783243569,
      "in_reply_to_id" : 782627474,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584ur1kx",
      "original_commit_id" : "9966b84894801879cda1d2639ab3da7f29be55e7",
      "original_line" : 174,
      "original_position" : 84,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 850722609,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783243569/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-12T16:30:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783243569",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r783243772"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783243772"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "4828d53eccd52a67631c64cef0ba7df90dff138d",
      "created_at" : "2022-01-12T16:31:11Z",
      "diff_hunk" : "@@ -130,17 +131,53 @@ static bool MatchMultisig(const CScript& script, int& required_sigs, std::vector\n     CScript::const_iterator it = script.begin();\n     if (script.size() < 1 || script.back() != OP_CHECKMULTISIG) return false;\n \n-    if (!script.GetOp(it, opcode, data) || !GetMultisigKeyCount(opcode, data, required_sigs)) return false;\n+    if (!script.GetOp(it, opcode, data)) return false;\n+    if (!GetMultisigKeyCount(opcode, data, required_sigs, MAX_PUBKEYS_PER_MULTISIG)) return false;\n     while (script.GetOp(it, opcode, data) && CPubKey::ValidSize(data)) {\n         pubkeys.emplace_back(std::move(data));\n     }\n-    if (!GetMultisigKeyCount(opcode, data, num_keys)) return false;\n+    if (!GetMultisigKeyCount(opcode, data, num_keys, MAX_PUBKEYS_PER_MULTISIG)) return false;\n \n     if (pubkeys.size() != static_cast<unsigned long>(num_keys) || num_keys < required_sigs) return false;\n \n     return (it + 1 == script.end());\n }\n \n+std::optional<std::pair<int, std::vector<Span<const unsigned char>>>> MatchMultiA(const CScript& script)\n+{\n+    std::vector<Span<const unsigned char>> keyspans;\n+\n+    // Redundant, but very fast and selective test.\n+    if (script.size() == 0 || script[0] != 32 || script.back() != OP_NUMEQUAL) return {};\n+\n+    // Parse keys\n+    auto it = script.begin();\n+    while (script.end() - it >= 34) {\n+        if (*it != 32) return {};\n+        ++it;\n+        keyspans.emplace_back(&*it, 32);\n+        it += 32;\n+        if (*it != (keyspans.size() == 1 ? OP_CHECKSIG : OP_CHECKSIGADD)) return {};\n+        ++it;\n+    }\n+    if (keyspans.size() == 0 || keyspans.size() > (MAX_BLOCK_WEIGHT / 34)) return {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r783243772",
      "id" : 783243772,
      "in_reply_to_id" : 782622388,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584ur1n8",
      "original_commit_id" : "9966b84894801879cda1d2639ab3da7f29be55e7",
      "original_line" : 163,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 850722900,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783243772/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-12T16:31:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783243772",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr I like to keep the invariant that every \"function\" in descriptors (and later, miniscript) refer to the same opcode construction.\r\n\r\nThe reason is that while for this example it's unambiguous (multi only in toplevel/sh/wsh, multi_a only in tr), that's not going to be the case for all (or in the case of miniscript, even most) functions. So there will inevitably be constructions with variants which cannot be derived from the context, and given that it seems more consistent to keep the contextual smartness out of this.",
      "created_at" : "2022-01-12T16:35:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1011234971",
      "id" : 1011234971,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII5848Rjib",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1011234971/reactions"
      },
      "updated_at" : "2022-01-12T16:44:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1011234971",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "How about erroring if they're used in the wrong context?",
      "created_at" : "2022-01-12T18:06:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1011316120",
      "id" : 1011316120,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII5848R3WY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1011316120/reactions"
      },
      "updated_at" : "2022-01-12T18:06:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1011316120",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr They do (even before this PR).",
      "created_at" : "2022-01-12T18:08:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1011317017",
      "id" : 1011317017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII5848R3kZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1011317017/reactions"
      },
      "updated_at" : "2022-01-12T18:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1011317017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The multi_a script construction is (slightly) suboptimal for n-of-n (where...\r\n\r\nIsn't it also suboptimal for m-of-n where the permutations are sufficiently tractable to go in separate leaves? There may even be a privacy benefit to never revealing N. Neither is an objection to this descriptor though.",
      "created_at" : "2022-01-12T18:35:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1011339595",
      "id" : 1011339595,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII5848R9FL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1011339595/reactions"
      },
      "updated_at" : "2022-01-12T18:35:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1011339595",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r786554161"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786554161"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```cpp\r\nif (script.size() > MAX_PUBKEYS_PER_MULTI_A * 34 + 3 + 1) return {};\r\n```\r\nWould also be a fast test bounding the potential number of iterations below.",
      "commit_id" : "4828d53eccd52a67631c64cef0ba7df90dff138d",
      "created_at" : "2022-01-18T09:21:23Z",
      "diff_hunk" : "@@ -139,6 +139,40 @@ static bool MatchMultisig(const CScript& script, int& required_sigs, std::vector\n     return (it + 1 == script.end());\n }\n \n+std::optional<std::pair<int, std::vector<Span<const unsigned char>>>> MatchMultiA(const CScript& script)\n+{\n+    std::vector<Span<const unsigned char>> keyspans;\n+\n+    // Redundant, but very fast and selective test.\n+    if (script.size() == 0 || script[0] != 32 || script.back() != OP_NUMEQUAL) return {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r786554161",
      "id" : 786554161,
      "line" : 147,
      "node_id" : "PRRC_kwDOABII584u4d0x",
      "original_commit_id" : "79728c4a3d8a74f276daf1e72abbdecdab85a5d8",
      "original_line" : 147,
      "original_position" : 9,
      "original_start_line" : 146,
      "path" : "src/script/standard.cpp",
      "position" : 9,
      "pull_request_review_id" : 855139757,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786554161/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 146,
      "start_side" : "RIGHT",
      "updated_at" : "2022-01-18T10:42:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786554161",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r786562494"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786562494"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: any reason to not combine these two lines?",
      "commit_id" : "4828d53eccd52a67631c64cef0ba7df90dff138d",
      "created_at" : "2022-01-18T09:31:02Z",
      "diff_hunk" : "@@ -139,6 +139,40 @@ static bool MatchMultisig(const CScript& script, int& required_sigs, std::vector\n     return (it + 1 == script.end());\n }\n \n+std::optional<std::pair<int, std::vector<Span<const unsigned char>>>> MatchMultiA(const CScript& script)\n+{\n+    std::vector<Span<const unsigned char>> keyspans;\n+\n+    // Redundant, but very fast and selective test.\n+    if (script.size() == 0 || script[0] != 32 || script.back() != OP_NUMEQUAL) return {};\n+\n+    // Parse keys\n+    auto it = script.begin();\n+    while (script.end() - it >= 34) {\n+        if (*it != 32) return {};\n+        ++it;\n+        keyspans.emplace_back(&*it, 32);\n+        it += 32;\n+        if (*it != (keyspans.size() == 1 ? OP_CHECKSIG : OP_CHECKSIGADD)) return {};\n+        ++it;\n+    }\n+    if (keyspans.size() == 0 || keyspans.size() > MAX_PUBKEYS_PER_MULTI_A) return {};\n+\n+    // Parse threshold.\n+    opcodetype opcode;\n+    std::vector<unsigned char> data;\n+    if (!script.GetOp(it, opcode, data)) return {};\n+    if (it == script.end()) return {};\n+    if (*it != OP_NUMEQUAL) return {};\n+    ++it;\n+    if (it != script.end()) return {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r786562494",
      "id" : 786562494,
      "line" : 168,
      "node_id" : "PRRC_kwDOABII584u4f2-",
      "original_commit_id" : "79728c4a3d8a74f276daf1e72abbdecdab85a5d8",
      "original_line" : 168,
      "original_position" : 30,
      "original_start_line" : 167,
      "path" : "src/script/standard.cpp",
      "position" : 30,
      "pull_request_review_id" : 855139757,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786562494/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 167,
      "start_side" : "RIGHT",
      "updated_at" : "2022-01-18T10:42:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786562494",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r786600888"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786600888"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This cannot happen?",
      "commit_id" : "4828d53eccd52a67631c64cef0ba7df90dff138d",
      "created_at" : "2022-01-18T10:14:43Z",
      "diff_hunk" : "@@ -1287,13 +1287,33 @@ std::unique_ptr<PubkeyProvider> InferXOnlyPubkey(const XOnlyPubKey& xkey, ParseS\n     return key_provider;\n }\n \n+std::unique_ptr<DescriptorImpl> InferMultiA(const CScript& script, ParseScriptContext ctx, const SigningProvider& provider)\n+{\n+    auto match = MatchMultiA(script);\n+    if (!match) return {};\n+    std::vector<std::unique_ptr<PubkeyProvider>> keys;\n+    keys.reserve(match->second.size());\n+    for (const auto keyspan : match->second) {\n+        if (keyspan.size() != 32) return {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r786600888",
      "id" : 786600888,
      "line" : 1297,
      "node_id" : "PRRC_kwDOABII584u4pO4",
      "original_commit_id" : "3eed6fca57d1fa7544f372e6e7de0a9ae1b5715a",
      "original_line" : 1297,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : 11,
      "pull_request_review_id" : 855139757,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786600888/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-18T10:42:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786600888",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r786605027"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786605027"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This should be `999`.",
      "commit_id" : "4828d53eccd52a67631c64cef0ba7df90dff138d",
      "created_at" : "2022-01-18T10:19:40Z",
      "diff_hunk" : "@@ -27,6 +27,7 @@\n from .ripemd160 import ripemd160\n \n MAX_SCRIPT_ELEMENT_SIZE = 520\n+MAX_PUBKEYS_PER_MULTI_A = 512",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r786605027",
      "id" : 786605027,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584u4qPj",
      "original_commit_id" : "eb0667ea96d52db9135514a5e95ab943f6abd8a6",
      "original_line" : 30,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : 4,
      "pull_request_review_id" : 855139757,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786605027/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-18T10:42:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786605027",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r786620345"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786620345"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh, actually it's part of the next commit",
      "commit_id" : "4828d53eccd52a67631c64cef0ba7df90dff138d",
      "created_at" : "2022-01-18T10:37:54Z",
      "diff_hunk" : "@@ -27,6 +27,7 @@\n from .ripemd160 import ripemd160\n \n MAX_SCRIPT_ELEMENT_SIZE = 520\n+MAX_PUBKEYS_PER_MULTI_A = 512",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r786620345",
      "id" : 786620345,
      "in_reply_to_id" : 786605027,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584u4t-5",
      "original_commit_id" : "eb0667ea96d52db9135514a5e95ab943f6abd8a6",
      "original_line" : 30,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : 4,
      "pull_request_review_id" : 855139757,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786620345/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-18T10:42:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/786620345",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, Approach ACK\r\n\r\nI'll attempt to summarize some additional context that was discussed in Friday's [Core wallet meeting](https://gnusha.org/bitcoin-core-dev/2022-01-28.log) that may be helpful for other reviewers too. (It was helpful for me. Apologies if I get any of this wrong and it needs a correction)\r\n\r\n> It seems like the distinction between the normal and _a variants is likely to cause confusion. \r\n\r\nIf you consider descriptors and Miniscript as one thing under a single name (which one day hopefully they will be, we already consider Miniscript as an extension to descriptors) then Miniscript already has suffixes such as `and_b`. The idea would be that the user would specify a Policy of `multi` (Policy doesn't have suffixes) and then the Policy to Miniscript compiler would determine whether it should be `multi_a`, `multi_b` etc depending on what the most efficient Miniscript is. This will most likely to be done outside of Core as the compiler isn't expected to be part of Core.\r\n\r\n> Can we not support multi being smart enough to pick the right script?\r\n\r\nEach descriptor and each Miniscript is one-to-one with a specific script. I think `multi` at the Policy level will be able to pick the most efficient script using the Policy to Miniscript compiler. Still a lot of work to do though as Miniscript doesn't currently support Taproot.\r\n\r\n> Isn't it also suboptimal for m-of-n where the permutations are sufficiently tractable to go in separate leaves? There may even be a privacy benefit to never revealing N. Neither is an objection to this descriptor though.\r\n\r\nAs Sjors says there will be likely be many alternative Miniscripts that a Taproot `multi` Policy could compile down to. A 2-of-3 could be a single script path (a single Tapleaf) or it could be three 2-of-2s (one key path using MuSig2 and two script paths ) and that is before we have threshold key aggregation schemes (FROST etc) that could allow us to put the 2-of-3 directly in the key path. \r\n",
      "created_at" : "2022-01-31T12:27:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1025688959",
      "id" : 1025688959,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII5849IsV_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025688959/reactions"
      },
      "updated_at" : "2022-01-31T13:04:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025688959",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 4828d53eccd52a67631c64cef0ba7df90dff138d",
      "created_at" : "2022-02-15T18:54:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1040656829",
      "id" : 1040656829,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII584-Bym9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1040656829/reactions"
      },
      "updated_at" : "2022-02-15T18:54:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1040656829",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK https://github.com/bitcoin/bitcoin/pull/24043/commits/4828d53eccd52a67631c64cef0ba7df90dff138d",
      "created_at" : "2022-02-21T15:05:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1046972362",
      "id" : 1046972362,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII584-Z4fK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046972362/reactions"
      },
      "updated_at" : "2022-02-21T15:05:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046972362",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/11212268?v=4",
         "events_url" : "https://api.github.com/users/gruve-p/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gruve-p/followers",
         "following_url" : "https://api.github.com/users/gruve-p/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gruve-p/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gruve-p",
         "id" : 11212268,
         "login" : "gruve-p",
         "node_id" : "MDQ6VXNlcjExMjEyMjY4",
         "organizations_url" : "https://api.github.com/users/gruve-p/orgs",
         "received_events_url" : "https://api.github.com/users/gruve-p/received_events",
         "repos_url" : "https://api.github.com/users/gruve-p/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gruve-p/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gruve-p/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gruve-p"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@achow101: FYI there's some unresolved comments from @darosior [above](https://github.com/bitcoin/bitcoin/pull/24043#pullrequestreview-855139757).",
      "created_at" : "2022-03-04T14:52:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1059230758",
      "id" : 1059230758,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII584_IpQm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1059230758/reactions"
      },
      "updated_at" : "2022-03-04T14:52:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1059230758",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "No worries, they are nits that's why i acked. :)\n\n-------- Original Message --------\nOn Mar 4, 2022, 14:53, Michael Folkson wrote:\n\n> ***@***.***(https://github.com/achow101): FYI there's some unresolved comments from ***@***.***(https://github.com/darosior) [above](https://github.com/bitcoin/bitcoin/pull/24043#pullrequestreview-855139757).\n>\n> \n> Reply to this email directly, [view it on GitHub](https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1059230758), or [unsubscribe](https://github.com/notifications/unsubscribe-auth/AFLK3F5CBPVX3DUXOI6WA63U6IPVNANCNFSM5LXDZV4A).\n> Triage notifications on the go with GitHub Mobile for [iOS](https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675) or [Android](https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub).\n> You are receiving this because you were mentioned.Message ID: ***@***.***>",
      "created_at" : "2022-03-04T15:13:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1059248818",
      "id" : 1059248818,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII584_Itqy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1059248818/reactions"
      },
      "updated_at" : "2022-03-04T15:13:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1059248818",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "nits are non-blocking",
      "created_at" : "2022-03-04T15:14:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1059249999",
      "id" : 1059249999,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII584_It9P",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1059249999/reactions"
      },
      "updated_at" : "2022-03-04T15:14:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1059249999",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The `tr(H,multi_a(1,XPUB,XPRV))` test seems to be occasionally failing CI? https://cirrus-ci.com/task/4848707953754112 (through PSBT) https://cirrus-ci.com/task/6303111479296000 (address derivation) [EDIT: I've managed to reproduce this failure once on the master branch locally, but so far it hasn't repeated since I've added debug output]",
      "created_at" : "2022-03-07T04:41:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1060189017",
      "id" : 1060189017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII584_MTNZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060189017/reactions"
      },
      "updated_at" : "2022-03-07T08:36:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060189017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think the problem might be if different calls to `do_test` result in the same key being selected via `keys = self.rand_keys(nkeys * 4)` as in a previous invocation, then `self.addr_gen` will increment the derivation path from whatever was last used and choose `/4` for `addr_g`, while `addr_r` will reuse the `/0` path, and they'll get different results causing an assertion failure.",
      "created_at" : "2022-03-07T10:34:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1060467199",
      "id" : 1060467199,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII584_NXH_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060467199/reactions"
      },
      "updated_at" : "2022-03-07T10:34:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060467199",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I think the problem might be if different calls to `do_test` result in the same key being selected via `keys = self.rand_keys(nkeys * 4)` as in a previous invocation, then `self.addr_gen` will increment the derivation path from whatever was last used and choose `/4` for `addr_g`, while `addr_r` will reuse the `/0` path, and they'll get different results causing an assertion failure.\r\n\r\nI'm seeing it fail with other indexes too. I think it's actually that `multi_a` and `sortedmulti_a` with the same keys will sometimes produce the same addresses for a given index. When the descriptor is imported, it finds that one of the previous addresses was used so it starts at an index other than 0, which is why we get the assertion failure.",
      "created_at" : "2022-03-07T10:53:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1060504033",
      "id" : 1060504033,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII584_NgHh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060504033/reactions"
      },
      "updated_at" : "2022-03-07T10:53:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060504033",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "#24490 should fix the test failure",
      "created_at" : "2022-03-07T11:01:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1060522364",
      "id" : 1060522364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII584_Nkl8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060522364/reactions"
      },
      "updated_at" : "2022-03-07T11:01:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060522364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Makes sense!",
      "created_at" : "2022-03-07T11:07:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#issuecomment-1060532981",
      "id" : 1060532981,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24043",
      "node_id" : "IC_kwDOABII584_NnL1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060532981/reactions"
      },
      "updated_at" : "2022-03-07T11:07:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060532981",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r1008728151"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1008728151"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should this also be included in the [24.0 release notes](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/24.0-Release-Notes-draft#wallet)?\r\n\r\nSomething like \r\n> `tr()` descriptors now support multisig scripts through the `multi_a` (and `sortedmulti_a`) function.",
      "commit_id" : "4828d53eccd52a67631c64cef0ba7df90dff138d",
      "created_at" : "2022-10-29T16:41:58Z",
      "diff_hunk" : "@@ -33,6 +33,7 @@ Output descriptors currently support:\n - Pay-to-taproot outputs (P2TR), through the `tr` function.\n - Multisig scripts, through the `multi` function.\n - Multisig scripts where the public keys are sorted lexicographically, through the `sortedmulti` function.\n+- Multisig scripts inside taproot script trees, through the `multi_a` (and `sortedmulti_a`) function.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24043#discussion_r1008728151",
      "id" : 1008728151,
      "line" : 36,
      "node_id" : "PRRC_kwDOABII5848H_hX",
      "original_commit_id" : "4828d53eccd52a67631c64cef0ba7df90dff138d",
      "original_line" : 36,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/descriptors.md",
      "position" : 4,
      "pull_request_review_id" : 1161014656,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24043",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1008728151/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-29T16:41:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1008728151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18506343?v=4",
         "events_url" : "https://api.github.com/users/kouloumos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kouloumos/followers",
         "following_url" : "https://api.github.com/users/kouloumos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kouloumos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kouloumos",
         "id" : 18506343,
         "login" : "kouloumos",
         "node_id" : "MDQ6VXNlcjE4NTA2MzQz",
         "organizations_url" : "https://api.github.com/users/kouloumos/orgs",
         "received_events_url" : "https://api.github.com/users/kouloumos/received_events",
         "repos_url" : "https://api.github.com/users/kouloumos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kouloumos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kouloumos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kouloumos"
      }
   }
]
