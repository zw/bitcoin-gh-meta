[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [vasild](https://github.com/bitcoin/bitcoin/pull/27411#pullrequestreview-1503590039) |\n| Concept ACK | [dergoegge](https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1495695976), [amitiuttarwar](https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1496088231) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27071](https://github.com/bitcoin/bitcoin/pull/27071) (Handle CJDNS from LookupSubNet() by vasild)\n* [#25390](https://github.com/bitcoin/bitcoin/pull/25390) (sync: introduce a thread-safe generic container and use it to remove a bunch of \"GlobalMutex\"es by vasild)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-04-03T19:56:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1494893327",
      "id" : 1494893327,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27411",
      "node_id" : "IC_kwDOABII585ZGkMP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1494893327/reactions"
      },
      "updated_at" : "2023-06-28T17:00:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1494893327",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nPersonally, I have given up a little bit on fighting fingerprinting (at least I've de-prioritized it) because at this point there are so many fingerprinting techniques that we should probably either give up or figure out a way to avoid them ~entirely by design.\r\n\r\n> we could advertise our onion address to clearnet peers\r\n\r\nBut this is such an obvious fingerprint that we should address it.",
      "created_at" : "2023-04-04T10:06:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1495695976",
      "id" : 1495695976,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27411",
      "node_id" : "IC_kwDOABII585ZJoJo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1495695976/reactions"
      },
      "updated_at" : "2023-04-04T10:06:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1495695976",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Or why not even expand this logic to all networks and delete `CNetAddr::GetReachabilityFrom()`? That is - advertise our X address only to peers from network X (for X being any of IPv4, IPv6, Tor, I2P, CJDNS).",
      "created_at" : "2023-04-04T10:29:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1495725877",
      "id" : 1495725877,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27411",
      "node_id" : "IC_kwDOABII585ZJvc1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1495725877/reactions"
      },
      "updated_at" : "2023-04-04T10:29:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1495725877",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "concept ACK. good catch! ",
      "created_at" : "2023-04-04T14:37:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1496088231",
      "id" : 1496088231,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27411",
      "node_id" : "IC_kwDOABII585ZLH6n",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1496088231/reactions"
      },
      "updated_at" : "2023-04-04T14:37:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1496088231",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Is it not possible to achieve the same with something simpler, like the following? (...)\r\n\r\nWe'd need one more `if` so that we don't stop advertising onion addresses to `127.0.0.1` peers (inbounds from tor).\r\n\r\nBut yes, I will try this alternative out.\r\nAlternatively, I also thought of renaming `GetReachabilityFrom` to something like `GetAdvertisingScore` - since we don't use it anywhere else.\r\n\r\n> Or why not even expand this logic to all networks and delete `CNetAddr::GetReachabilityFrom()`? That is - advertise our X address only to peers from network X (for X being any of IPv4, IPv6, Tor, I2P, CJDNS).\r\n\r\nI think that would be too drastic: I don't see a reason to never advertise IPv4 addresses to IPv6 peers, and vice versa - for clearnet, better propagation seems more important than fingerprinting concerns. What do you think about CJDNS?\r\n",
      "created_at" : "2023-04-04T21:51:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1496649369",
      "id" : 1496649369,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27411",
      "node_id" : "IC_kwDOABII585ZNQ6Z",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1496649369/reactions"
      },
      "updated_at" : "2023-04-04T21:51:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1496649369",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Right, incoming Tor need special handling. That is already what `CNode::ConnectedThroughNetwork()` does. So it would look like:\r\n\r\n```cpp\r\n            // For privacy reasons, don't advertise our privacy-network address\r\n            // to other networks and don't advertise our other-network address\r\n            // to privacy networks.\r\n            const Network our_net{entry.first.GetNetwork()};\r\n            const Network peers_net{node.ConnectedThroughNetwork()};\r\n            if (our_net != peers_net && \r\n                (our_net == NET_ONION || our_net == NET_I2P || \r\n                 peers_net == NET_ONION || peers_net == NET_I2P)) {\r\n                continue;                                                  \r\n            }                              \r\n```\r\n(and pass `CNode&` instead of `CNetAddr*`).\r\n\r\nI am not sure about CJDNS. Normally I would say treat it like Tor and I2P (but I even had the heretic idea to do that with IPv4 and IPv6 too, so maybe I lean a bit to the paranoid side, don't listen to me too much). However there are very few CJDNS addresses right now on mainnet and if we only advertise our CJDNS address to CJDNS peers that could impede its adoption.\r\n\r\nUltimately, the perfect solution would be to broadcast our address exactly like we broadcast foreign addresses. So that a spying peer cannot distinguish which one is it. Right now we are more aggressive in broadcasting our address than broadcasting foreign addresses. To make it the same, either:\r\n* Stop being more aggressive with our address, or\r\n* Broadcast more aggressively also foreign addresses.\r\n\r\neither one would be a serious change and would need some simulation to be justified. Just thinking aloud.",
      "created_at" : "2023-04-05T09:17:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1497176155",
      "id" : 1497176155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27411",
      "node_id" : "IC_kwDOABII585ZPRhb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1497176155/reactions"
      },
      "updated_at" : "2023-04-05T09:17:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1497176155",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I am not sure about CJDNS. Normally I would say treat it like Tor and I2P (but I even had the heretic idea to do that with IPv4 and IPv6 too, so maybe I lean a bit to the paranoid side, don't listen to me too much). However there are very few CJDNS addresses right now on mainnet and if we only advertise our CJDNS address to CJDNS peers that could impede its adoption.\r\n\r\nMakes sense to me - if bitcoin over CJDNS gets more popular we could revisit this later.\r\n \r\n> Ultimately, the perfect solution would be to broadcast our address exactly like we broadcast foreign addresses. (...)\r\n\r\nYes, this would probably require an overhaul of the entire address relay mechanism, and I'm not sure if the benefits would be that great - after all, we don't really want to keep our address private, just not fingerprint ourselves in the most obvious way.\r\n\r\n> Right, incoming Tor need special handling. That is already what `CNode::ConnectedThroughNetwork()` does. So it would look like: (...)\r\n\r\nI think I will switch to this approach, keeping reachability and privacy concerns separate might be good. Will also try to add some unit test coverage for this area of code (there seems to be none so far), and then push an update in the next days.",
      "created_at" : "2023-04-11T20:58:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1504081199",
      "id" : 1504081199,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27411",
      "node_id" : "IC_kwDOABII585ZpnUv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1504081199/reactions"
      },
      "updated_at" : "2023-04-11T20:58:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1504081199",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "- Updated the PR to separate privacy checks from reachability checks.\r\n- Passed a CNode to `GetLocal()` and replaced pointers with references in  `GetLocal()` and  `GetReachabilityFrom()` \r\n- Added a unit test",
      "created_at" : "2023-04-12T18:06:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1505713147",
      "id" : 1505713147,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27411",
      "node_id" : "IC_kwDOABII585Zv1v7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1505713147/reactions"
      },
      "updated_at" : "2023-04-12T18:06:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1505713147",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27411#discussion_r1165045822"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27411"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165045822"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You may expand commit b3261389eadf050c0de590c2d9cd69ad9f62acff `net, refactor: pass reference for peer address in GetReachabilityFrom` to remove `NET_UNKNOWN` since it is unused after that commit.",
      "commit_id" : "6be8b6d8106210c6f44bc9c0124bfd1476d2952e",
      "created_at" : "2023-04-13T06:12:50Z",
      "diff_hunk" : "@@ -725,17 +725,15 @@ std::vector<unsigned char> CNetAddr::GetAddrBytes() const\n // and only used in GetReachabilityFrom\n static const int NET_UNKNOWN = NET_MAX + 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#discussion_r1165045822",
      "id" : 1165045822,
      "line" : 726,
      "node_id" : "PRRC_kwDOABII585FcTA-",
      "original_commit_id" : "6be8b6d8106210c6f44bc9c0124bfd1476d2952e",
      "original_line" : 726,
      "original_position" : 2,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 2,
      "pull_request_review_id" : 1382698478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27411",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165045822/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-13T06:58:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165045822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27411#discussion_r1165066216"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27411"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165066216"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: it is case-insensitive, so no point in using a mixture of lower case and upper case.",
      "commit_id" : "6be8b6d8106210c6f44bc9c0124bfd1476d2952e",
      "created_at" : "2023-04-13T06:34:52Z",
      "diff_hunk" : "@@ -905,4 +905,117 @@ BOOST_AUTO_TEST_CASE(initial_advertise_from_version_message)\n     TestOnlyResetTimeData();\n }\n \n+\n+BOOST_AUTO_TEST_CASE(advertise_local_address)\n+{\n+    auto CreatePeer = [](const CAddress& addr) {\n+        return std::make_unique<CNode>(/*id=*/0,\n+                                       /*sock=*/nullptr,\n+                                       addr,\n+                                       /*nKeyedNetGroupIn=*/0,\n+                                       /*nLocalHostNonceIn=*/0,\n+                                       CAddress{},\n+                                       /*pszDest=*/std::string{},\n+                                       ConnectionType::OUTBOUND_FULL_RELAY,\n+                                       /*inbound_onion=*/false);\n+    };\n+    SetReachable(NET_CJDNS, true);\n+\n+    const CService addr_empty{CNetAddr(), GetListenPort()};\n+    BOOST_REQUIRE(!addr_empty.IsValid());\n+\n+    CAddress addr_ipv4;\n+    BOOST_REQUIRE(LookupHost(\"1.2.3.4\", addr_ipv4, false));\n+    BOOST_REQUIRE(addr_ipv4.IsValid());\n+    BOOST_REQUIRE(addr_ipv4.IsIPv4());\n+\n+    CAddress addr_ipv6;\n+    BOOST_REQUIRE(LookupHost(\"1122:3344:5566:7788:9900:aabb:ccdd:eeff\", addr_ipv6, false));\n+    BOOST_REQUIRE(addr_ipv6.IsValid());\n+    BOOST_REQUIRE(addr_ipv6.IsIPv6());\n+\n+    CAddress addr_ipv6_tunnel;\n+    BOOST_REQUIRE(LookupHost(\"2002:3344:5566:7788:9900:aabb:ccdd:eeff\", addr_ipv6_tunnel, false));\n+    BOOST_REQUIRE(addr_ipv6_tunnel.IsValid());\n+    BOOST_REQUIRE(addr_ipv6_tunnel.IsIPv6());\n+    BOOST_REQUIRE(addr_ipv6_tunnel.IsRFC3964());\n+\n+    CAddress addr_teredo;\n+    BOOST_REQUIRE(LookupHost(\"2001:0000:5566:7788:9900:aabb:ccdd:eeff\", addr_teredo, false));\n+    BOOST_REQUIRE(addr_teredo.IsValid());\n+    BOOST_REQUIRE(addr_teredo.IsIPv6());\n+    BOOST_REQUIRE(addr_teredo.IsRFC4380());\n+\n+    CAddress addr_onion;\n+    BOOST_REQUIRE(addr_onion.SetSpecial(\"pg6mmjiyjmcrsslvykfwnntlaru7p5svn6y2ymmju6nubxndf4pscryd.onion\"));\n+    BOOST_REQUIRE(addr_onion.IsValid());\n+    BOOST_REQUIRE(addr_onion.IsTor());\n+\n+    CAddress addr_i2p;\n+    BOOST_REQUIRE(addr_i2p.SetSpecial(\"UDHDrtrcetjm5sxzskjyr5ztpeszydbh4dpl3pl4utgqqw2v4jna.b32.I2P\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#discussion_r1165066216",
      "id" : 1165066216,
      "line" : 955,
      "node_id" : "PRRC_kwDOABII585FcX_o",
      "original_commit_id" : "6be8b6d8106210c6f44bc9c0124bfd1476d2952e",
      "original_line" : 955,
      "original_position" : 51,
      "original_start_line" : null,
      "path" : "src/test/net_tests.cpp",
      "position" : 51,
      "pull_request_review_id" : 1382698478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27411",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165066216/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-13T06:58:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165066216",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27411#discussion_r1165072581"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27411"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165072581"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: might as well ditch `addr_empty` and use\r\n\r\n```suggestion\r\n    BOOST_CHECK(!GetLocalAddress(*peer_onion).IsValid());\r\n```",
      "commit_id" : "6be8b6d8106210c6f44bc9c0124bfd1476d2952e",
      "created_at" : "2023-04-13T06:42:43Z",
      "diff_hunk" : "@@ -905,4 +905,117 @@ BOOST_AUTO_TEST_CASE(initial_advertise_from_version_message)\n     TestOnlyResetTimeData();\n }\n \n+\n+BOOST_AUTO_TEST_CASE(advertise_local_address)\n+{\n+    auto CreatePeer = [](const CAddress& addr) {\n+        return std::make_unique<CNode>(/*id=*/0,\n+                                       /*sock=*/nullptr,\n+                                       addr,\n+                                       /*nKeyedNetGroupIn=*/0,\n+                                       /*nLocalHostNonceIn=*/0,\n+                                       CAddress{},\n+                                       /*pszDest=*/std::string{},\n+                                       ConnectionType::OUTBOUND_FULL_RELAY,\n+                                       /*inbound_onion=*/false);\n+    };\n+    SetReachable(NET_CJDNS, true);\n+\n+    const CService addr_empty{CNetAddr(), GetListenPort()};\n+    BOOST_REQUIRE(!addr_empty.IsValid());\n+\n+    CAddress addr_ipv4;\n+    BOOST_REQUIRE(LookupHost(\"1.2.3.4\", addr_ipv4, false));\n+    BOOST_REQUIRE(addr_ipv4.IsValid());\n+    BOOST_REQUIRE(addr_ipv4.IsIPv4());\n+\n+    CAddress addr_ipv6;\n+    BOOST_REQUIRE(LookupHost(\"1122:3344:5566:7788:9900:aabb:ccdd:eeff\", addr_ipv6, false));\n+    BOOST_REQUIRE(addr_ipv6.IsValid());\n+    BOOST_REQUIRE(addr_ipv6.IsIPv6());\n+\n+    CAddress addr_ipv6_tunnel;\n+    BOOST_REQUIRE(LookupHost(\"2002:3344:5566:7788:9900:aabb:ccdd:eeff\", addr_ipv6_tunnel, false));\n+    BOOST_REQUIRE(addr_ipv6_tunnel.IsValid());\n+    BOOST_REQUIRE(addr_ipv6_tunnel.IsIPv6());\n+    BOOST_REQUIRE(addr_ipv6_tunnel.IsRFC3964());\n+\n+    CAddress addr_teredo;\n+    BOOST_REQUIRE(LookupHost(\"2001:0000:5566:7788:9900:aabb:ccdd:eeff\", addr_teredo, false));\n+    BOOST_REQUIRE(addr_teredo.IsValid());\n+    BOOST_REQUIRE(addr_teredo.IsIPv6());\n+    BOOST_REQUIRE(addr_teredo.IsRFC4380());\n+\n+    CAddress addr_onion;\n+    BOOST_REQUIRE(addr_onion.SetSpecial(\"pg6mmjiyjmcrsslvykfwnntlaru7p5svn6y2ymmju6nubxndf4pscryd.onion\"));\n+    BOOST_REQUIRE(addr_onion.IsValid());\n+    BOOST_REQUIRE(addr_onion.IsTor());\n+\n+    CAddress addr_i2p;\n+    BOOST_REQUIRE(addr_i2p.SetSpecial(\"UDHDrtrcetjm5sxzskjyr5ztpeszydbh4dpl3pl4utgqqw2v4jna.b32.I2P\"));\n+    BOOST_REQUIRE(addr_i2p.IsValid());\n+    BOOST_REQUIRE(addr_i2p.IsI2P());\n+\n+    CService service_cjdns;\n+    BOOST_REQUIRE(LookupHost(\"fc00:3344:5566:7788:9900:aabb:ccdd:eeff\", service_cjdns, false));\n+    CAddress addr_cjdns{MaybeFlipIPv6toCJDNS(service_cjdns), NODE_NONE};\n+    BOOST_REQUIRE(addr_cjdns.IsValid());\n+    BOOST_REQUIRE(addr_cjdns.IsCJDNS());\n+\n+    const auto peer_ipv4{CreatePeer(addr_ipv4)};\n+    const auto peer_ipv6{CreatePeer(addr_ipv6)};\n+    const auto peer_ipv6_tunnel{CreatePeer(addr_ipv6_tunnel)};\n+    const auto peer_teredo{CreatePeer(addr_teredo)};\n+    const auto peer_onion{CreatePeer(addr_onion)};\n+    const auto peer_i2p{CreatePeer(addr_i2p)};\n+    const auto peer_cjdns{CreatePeer(addr_cjdns)};\n+\n+    // one local clearnet address - advertise to all but privacy peers\n+    AddLocal(addr_ipv4);\n+    BOOST_CHECK(GetLocalAddress(*peer_ipv4) == addr_ipv4);\n+    BOOST_CHECK(GetLocalAddress(*peer_ipv6) == addr_ipv4);\n+    BOOST_CHECK(GetLocalAddress(*peer_ipv6_tunnel) == addr_ipv4);\n+    BOOST_CHECK(GetLocalAddress(*peer_teredo) == addr_ipv4);\n+    BOOST_CHECK(GetLocalAddress(*peer_cjdns) == addr_ipv4);\n+    BOOST_CHECK(GetLocalAddress(*peer_onion) == addr_empty);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#discussion_r1165072581",
      "id" : 1165072581,
      "line" : 980,
      "node_id" : "PRRC_kwDOABII585FcZjF",
      "original_commit_id" : "6be8b6d8106210c6f44bc9c0124bfd1476d2952e",
      "original_line" : 980,
      "original_position" : 76,
      "original_start_line" : null,
      "path" : "src/test/net_tests.cpp",
      "position" : 76,
      "pull_request_review_id" : 1382698478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27411",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165072581/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-13T06:58:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165072581",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27411#discussion_r1165073055"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27411"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165073055"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    // local addresses from all networks\r\n```",
      "commit_id" : "6be8b6d8106210c6f44bc9c0124bfd1476d2952e",
      "created_at" : "2023-04-13T06:43:22Z",
      "diff_hunk" : "@@ -905,4 +905,117 @@ BOOST_AUTO_TEST_CASE(initial_advertise_from_version_message)\n     TestOnlyResetTimeData();\n }\n \n+\n+BOOST_AUTO_TEST_CASE(advertise_local_address)\n+{\n+    auto CreatePeer = [](const CAddress& addr) {\n+        return std::make_unique<CNode>(/*id=*/0,\n+                                       /*sock=*/nullptr,\n+                                       addr,\n+                                       /*nKeyedNetGroupIn=*/0,\n+                                       /*nLocalHostNonceIn=*/0,\n+                                       CAddress{},\n+                                       /*pszDest=*/std::string{},\n+                                       ConnectionType::OUTBOUND_FULL_RELAY,\n+                                       /*inbound_onion=*/false);\n+    };\n+    SetReachable(NET_CJDNS, true);\n+\n+    const CService addr_empty{CNetAddr(), GetListenPort()};\n+    BOOST_REQUIRE(!addr_empty.IsValid());\n+\n+    CAddress addr_ipv4;\n+    BOOST_REQUIRE(LookupHost(\"1.2.3.4\", addr_ipv4, false));\n+    BOOST_REQUIRE(addr_ipv4.IsValid());\n+    BOOST_REQUIRE(addr_ipv4.IsIPv4());\n+\n+    CAddress addr_ipv6;\n+    BOOST_REQUIRE(LookupHost(\"1122:3344:5566:7788:9900:aabb:ccdd:eeff\", addr_ipv6, false));\n+    BOOST_REQUIRE(addr_ipv6.IsValid());\n+    BOOST_REQUIRE(addr_ipv6.IsIPv6());\n+\n+    CAddress addr_ipv6_tunnel;\n+    BOOST_REQUIRE(LookupHost(\"2002:3344:5566:7788:9900:aabb:ccdd:eeff\", addr_ipv6_tunnel, false));\n+    BOOST_REQUIRE(addr_ipv6_tunnel.IsValid());\n+    BOOST_REQUIRE(addr_ipv6_tunnel.IsIPv6());\n+    BOOST_REQUIRE(addr_ipv6_tunnel.IsRFC3964());\n+\n+    CAddress addr_teredo;\n+    BOOST_REQUIRE(LookupHost(\"2001:0000:5566:7788:9900:aabb:ccdd:eeff\", addr_teredo, false));\n+    BOOST_REQUIRE(addr_teredo.IsValid());\n+    BOOST_REQUIRE(addr_teredo.IsIPv6());\n+    BOOST_REQUIRE(addr_teredo.IsRFC4380());\n+\n+    CAddress addr_onion;\n+    BOOST_REQUIRE(addr_onion.SetSpecial(\"pg6mmjiyjmcrsslvykfwnntlaru7p5svn6y2ymmju6nubxndf4pscryd.onion\"));\n+    BOOST_REQUIRE(addr_onion.IsValid());\n+    BOOST_REQUIRE(addr_onion.IsTor());\n+\n+    CAddress addr_i2p;\n+    BOOST_REQUIRE(addr_i2p.SetSpecial(\"UDHDrtrcetjm5sxzskjyr5ztpeszydbh4dpl3pl4utgqqw2v4jna.b32.I2P\"));\n+    BOOST_REQUIRE(addr_i2p.IsValid());\n+    BOOST_REQUIRE(addr_i2p.IsI2P());\n+\n+    CService service_cjdns;\n+    BOOST_REQUIRE(LookupHost(\"fc00:3344:5566:7788:9900:aabb:ccdd:eeff\", service_cjdns, false));\n+    CAddress addr_cjdns{MaybeFlipIPv6toCJDNS(service_cjdns), NODE_NONE};\n+    BOOST_REQUIRE(addr_cjdns.IsValid());\n+    BOOST_REQUIRE(addr_cjdns.IsCJDNS());\n+\n+    const auto peer_ipv4{CreatePeer(addr_ipv4)};\n+    const auto peer_ipv6{CreatePeer(addr_ipv6)};\n+    const auto peer_ipv6_tunnel{CreatePeer(addr_ipv6_tunnel)};\n+    const auto peer_teredo{CreatePeer(addr_teredo)};\n+    const auto peer_onion{CreatePeer(addr_onion)};\n+    const auto peer_i2p{CreatePeer(addr_i2p)};\n+    const auto peer_cjdns{CreatePeer(addr_cjdns)};\n+\n+    // one local clearnet address - advertise to all but privacy peers\n+    AddLocal(addr_ipv4);\n+    BOOST_CHECK(GetLocalAddress(*peer_ipv4) == addr_ipv4);\n+    BOOST_CHECK(GetLocalAddress(*peer_ipv6) == addr_ipv4);\n+    BOOST_CHECK(GetLocalAddress(*peer_ipv6_tunnel) == addr_ipv4);\n+    BOOST_CHECK(GetLocalAddress(*peer_teredo) == addr_ipv4);\n+    BOOST_CHECK(GetLocalAddress(*peer_cjdns) == addr_ipv4);\n+    BOOST_CHECK(GetLocalAddress(*peer_onion) == addr_empty);\n+    BOOST_CHECK(GetLocalAddress(*peer_i2p) == addr_empty);\n+    RemoveLocal(addr_ipv4);\n+\n+    // local privacy addresses - don't advertise to clearnet peers\n+    AddLocal(addr_onion);\n+    AddLocal(addr_i2p);\n+    BOOST_CHECK(GetLocalAddress(*peer_ipv4) == addr_empty);\n+    BOOST_CHECK(GetLocalAddress(*peer_ipv6) == addr_empty);\n+    BOOST_CHECK(GetLocalAddress(*peer_ipv6_tunnel) == addr_empty);\n+    BOOST_CHECK(GetLocalAddress(*peer_teredo) == addr_empty);\n+    BOOST_CHECK(GetLocalAddress(*peer_cjdns) == addr_empty);\n+    BOOST_CHECK(GetLocalAddress(*peer_onion) == addr_onion);\n+    BOOST_CHECK(GetLocalAddress(*peer_i2p) == addr_i2p);\n+    RemoveLocal(addr_onion);\n+    RemoveLocal(addr_i2p);\n+\n+    // local peers from all networks",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#discussion_r1165073055",
      "id" : 1165073055,
      "line" : 997,
      "node_id" : "PRRC_kwDOABII585FcZqf",
      "original_commit_id" : "6be8b6d8106210c6f44bc9c0124bfd1476d2952e",
      "original_line" : 997,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/test/net_tests.cpp",
      "position" : 93,
      "pull_request_review_id" : 1382698478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27411",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165073055/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-13T06:58:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165073055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Needs rebase?\r\n\r\nyes. Rebased due to silent conflict with #26261.",
      "created_at" : "2023-06-05T17:05:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1577161538",
      "id" : 1577161538,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27411",
      "node_id" : "IC_kwDOABII585eAZNC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1577161538/reactions"
      },
      "updated_at" : "2023-06-05T17:05:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1577161538",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">Note that this affects only our own self-advertisements, the rules to forward other people's addrs are not changed.\r\n\r\nWould this make our own addr stand out too? Or could we still forward our own addr by coincidence outside of self-advertising?",
      "created_at" : "2023-06-22T22:28:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1603390903",
      "id" : 1603390903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27411",
      "node_id" : "IC_kwDOABII585fkc23",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1603390903/reactions"
      },
      "updated_at" : "2023-06-22T22:28:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1603390903",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > Note that this affects only our own self-advertisements, the rules to forward other people's addrs are not changed.\r\n> \r\n> Would this make our own addr stand out too? Or could we still forward our own addr by coincidence outside of self-advertising?\r\n\r\nYes, we could still forward it: When we receive a gossipped address we choose 1-2 random peers (that stay the same for 24 hours, see [RelayAddress](https://github.com/bitcoin/bitcoin/blob/7952a5934a1e071ca24a51483d058174e7b6de43/src/net_processing.cpp#L2095)) and forward it to them if we don't think they already know it.\r\nSo if we receive our own address from someone else we could forward it to the chosen peer, even if that peer wasn't eligible for the original self-announcement because it's from another network.",
      "created_at" : "2023-06-28T20:33:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1612067010",
      "id" : 1612067010,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27411",
      "node_id" : "IC_kwDOABII585gFjDC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1612067010/reactions"
      },
      "updated_at" : "2023-06-28T20:33:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1612067010",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   }
]
