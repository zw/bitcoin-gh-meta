[
   {
      "body" : "Ready for some hackery?\r\n\r\nQt installed from the offline installer, to /tmp/Qt5.6.0.\r\n\r\n```\r\n# To save typing\r\nexport QTDIR=\"/tmp/Qt5.6.0/5.6/clang_64/\"\r\n\r\n# Prepare includes - HACK\r\ncd ${QTDIR}/include\r\nfor fwk in `cd ../lib/; ls -1d *framework`; do FWK=`echo $fwk | sed 's#.framework##'`; ln -sf ../lib/$fwk/Versions/Current/Headers $FWK; done\r\ncd -\r\n\r\n# Use moc from Qt5.6.0, not the old one from the system, important!\r\nexport PATH=${QTDIR}/bin/:$PATH\r\n\r\n# HACK - missing pkgconfig files in Qt5.6\r\nQT_CFLAGS=\"-I${QTDIR}/include -I${QTDIR}/include/QtWidgets -I${QTDIR}/include/QtCore -I${QTDIR}/include/QtGui -I${QTDIR}/include/QtNetwork\" QT_LIBS=\"-F${QTDIR}/lib -framework QtCore -framework QtNetwork -framework QtGui -framework QtWidgets\" ./configure --with-gui=qt5\r\n\r\nmake\r\n\r\n# Fix rpath\r\n#\r\n# Without it:\r\n#\r\n#dyld: Library not loaded: @rpath/QtCore.framework/Versions/5/QtCore\r\n#  Referenced from: /private/tmp/bitcoin-master.qt/src/qt/./bitcoin-qt\r\n#  Reason: image not found\r\n# Trace/BPT trap: 5\r\ninstall_name_tool -add_rpath ${QTDIR}/lib src/qt/bitcoin-qt\r\n```\r\n\r\nI'd be happy if someone replicates this.\r\n",
      "created_at" : "2016-03-18T21:47:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7714#issuecomment-198556967",
      "id" : 198556967,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7714",
      "updated_at" : "2016-03-18T21:47:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/198556967",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Compare with #5728...",
      "created_at" : "2016-03-18T21:53:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7714#issuecomment-198559492",
      "id" : 198559492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7714",
      "updated_at" : "2016-03-18T21:53:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/198559492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "See here: https://github.com/Homebrew/homebrew/commit/620baaf10c957875d9d2b958343456f0d35d15fc\r\n\r\nLooks like this might not affect us with Homebrew, and Linux/Win builds aren't affected either. @paveljanik mind testing with an updated Homebrew?",
      "created_at" : "2016-03-18T23:04:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7714#issuecomment-198572986",
      "id" : 198572986,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7714",
      "updated_at" : "2016-03-18T23:04:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/198572986",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "I use Macports. And Qt from the binary installer, so I can't test it myself.\r\n",
      "created_at" : "2016-03-19T05:57:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7714#issuecomment-198641176",
      "id" : 198641176,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7714",
      "updated_at" : "2016-03-19T05:57:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/198641176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "I can confirm that Homebrew is unaffected. Just compiled master + Qt 5.6.0 with no issue.\r\n![qt56](https://cloud.githubusercontent.com/assets/863730/13897067/0edca232-edde-11e5-9a7d-386dd2c5e719.png)\r\n",
      "created_at" : "2016-03-19T06:23:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7714#issuecomment-198647149",
      "id" : 198647149,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7714",
      "updated_at" : "2016-03-19T06:23:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/198647149",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "body" : "@fanquake great! Can you please upload all pkgconfig files somewhere?",
      "created_at" : "2016-03-19T06:33:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7714#issuecomment-198648099",
      "id" : 198648099,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7714",
      "updated_at" : "2016-03-19T06:33:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/198648099",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "@fanquake ping",
      "created_at" : "2016-03-31T16:04:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7714#issuecomment-204001178",
      "id" : 204001178,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7714",
      "updated_at" : "2016-03-31T16:04:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/204001178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "@paveljanik:\r\n\r\nThanks for having a closer look at this.\r\n\r\nYou might want to check:\r\nhttps://github.com/Homebrew/homebrew/blob/master/Library/Formula/qt5.rb#L29\r\nand\r\nhttps://raw.githubusercontent.com/Homebrew/patches/e8fe6567/qt5/restore-pc-files.patch\r\n\r\nI also attached my local Qt5.6 pc files:\r\n[pkgconfig.zip](https://github.com/bitcoin/bitcoin/files/199179/pkgconfig.zip)",
      "created_at" : "2016-04-01T08:00:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7714#issuecomment-204299905",
      "id" : 204299905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7714",
      "updated_at" : "2016-04-01T08:00:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/204299905",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@fanquake No problem, thank you. Files from @jonasschnelli are enough.\r\n\r\nSo the new summary of problems, redone from clean installation of original binary Qt installer:\r\n\r\n1. four `pkgconfig` files are missing: `Qt5Core.pc`, `Qt5Gui.pc`, `Qt5Network.pc` and `Qt5Widgets.pc`. The problem is worked around in `brew` (https://github.com/Homebrew/homebrew/blob/master/Library/Formula/qt5.rb#L29).\r\n\r\n2. '# Prepare includes - HACK' needed. Again, worked around in `brew` already (https://github.com/Homebrew/homebrew/blob/master/Library/Formula/qt5.rb#L112).\r\n\r\n3. rpath problems (https://codereview.qt-project.org/#/c/138349). Original installer installs libraries with @rpath ID:\r\n\r\n```\r\n$ otool -l QtNetwork | grep rpath/QtNetwork\r\n         name @rpath/QtNetwork.framework/Versions/5/QtNetwork (offset 24)\r\n$\r\n```\r\n\r\nThis can be changed by:\r\n\r\n```\r\nlib$ for fwk in *framework; do FWK=`echo $fwk | sed 's#.framework##'`; install_name_tool -id `pwd`/$fwk/$FWK $fwk/$FWK; done\r\n```\r\n\r\nThis can be fixed in the `configure` phase of Qt, with `-no-rpath` as already done in `brew`.\r\n\r\nTo sum up: you can build with the original installer after these three steps...\r\n",
      "created_at" : "2016-04-01T16:50:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7714#issuecomment-204468175",
      "id" : 204468175,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7714",
      "updated_at" : "2016-04-01T16:50:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/204468175",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Two more `.pc` files missing: `Qt5Test.pc` added. But there is no `Qt5DBus.pc` in Jonas' files. This results in this difference in the build log:\r\n\r\n```\r\n-checking for QT_DBUS... yes\r\n+checking for QT_DBUS... no\r\n-checking whether to build GUI with support for D-Bus... yes\r\n+checking whether to build GUI with support for D-Bus... no\r\n```\r\n\r\nStrange.",
      "created_at" : "2016-04-01T17:57:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7714#issuecomment-204491017",
      "id" : 204491017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7714",
      "updated_at" : "2016-04-01T18:02:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/204491017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "We should probably document this somewhere, for example paste @paveljanik 's summary into the OSX build doc, until this is fixed in upstream (and it looks like they broke it on purpose :poop:) I don't think you'll be the only one stumbling on this",
      "created_at" : "2016-04-02T05:35:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7714#issuecomment-204650233",
      "id" : 204650233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7714",
      "updated_at" : "2016-04-02T05:35:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/204650233",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I'll prepare something, probably in the form of `contrib` script to fix the local installation coming from the official installer with some documentation...",
      "created_at" : "2016-04-02T05:43:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7714#issuecomment-204650477",
      "id" : 204650477,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7714",
      "updated_at" : "2016-04-02T05:43:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/204650477",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   }
]
