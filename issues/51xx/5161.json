{
   "assignee" : null,
   "body" : "This is a simplified re-do of closed pull #3088.\r\n\r\nThis patch eliminates the privacy and reliability problematic use\r\nof centralized web services for discovering the node's addresses\r\nfor advertisement.\r\n\r\nThe Bitcoin protocol already allows your peers to tell you what\r\nIP they think you have, but this data isn't trustworthy since\r\nthey could lie. So the challenge is using it without creating a\r\nDOS vector.\r\n\r\nTo accomplish this we adopt an approach similar to the one used\r\nby P2Pool: If we're announcing and don't have a better address\r\ndiscovered (e.g. via UPNP) or configured we just announce to\r\neach peer the address that peer told us. Since peers could\r\nalready replace, forge, or drop our address messages this cannot\r\ncreate a new vulnerability... but if even one of our peers is\r\ngiving us a good address we'll eventually make a useful\r\nadvertisement.\r\n\r\nWe also may randomly use the peer-provided address for the\r\ndaily rebroadcast even if we otherwise have a seemingly routable\r\naddress, just in case we've been misconfigured (e.g. by UPNP).\r\n\r\nTo avoid privacy problems, we only do these things if discovery\r\nis enabled.",
   "closed_at" : "2014-11-12T17:35:58Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 16,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5161/comments",
   "created_at" : "2014-10-28T22:07:20Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5161/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/5161",
   "id" : 47087802,
   "labels" : [
      {
         "color" : "006b75",
         "name" : "P2P",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5161/labels{/name}",
   "locked" : false,
   "milestone" : {
      "closed_at" : null,
      "closed_issues" : 112,
      "created_at" : "2013-12-05T10:34:42Z",
      "creator" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      },
      "description" : "",
      "due_on" : null,
      "id" : 505738,
      "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/14/labels",
      "number" : 14,
      "open_issues" : 2,
      "state" : "open",
      "title" : "0.10.0",
      "updated_at" : "2015-01-23T15:33:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/14"
   },
   "number" : 5161,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/5161.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5161",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/5161.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5161"
   },
   "state" : "closed",
   "title" : "Do not use third party services for IP detection.",
   "updated_at" : "2014-11-12T17:35:58Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5161",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
      "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
      "followers_url" : "https://api.github.com/users/gmaxwell/followers",
      "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/gmaxwell",
      "id" : 858454,
      "login" : "gmaxwell",
      "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
      "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
      "repos_url" : "https://api.github.com/users/gmaxwell/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/gmaxwell"
   }
}
