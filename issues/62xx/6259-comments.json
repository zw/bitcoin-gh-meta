[
   {
      "body" : "Not against this.\r\n\r\nBut a pure disconnect won't prevent from a reconnect of the just kicked node.\r\n\r\nI think the setban rpc command (#6158) would suit better for a node kick (kick and ban for 1h).\r\n\r\nFor this PR two things would be cool:\r\n\r\n* ban disconnected nodes for 1h (or at least 10mins)\r\n* allow removing nodes by IP without port (kick all nodes from the given IP)",
      "created_at" : "2015-06-09T09:20:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6259#issuecomment-110287508",
      "id" : 110287508,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6259",
      "updated_at" : "2015-06-09T09:20:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110287508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6259#discussion_r32005032"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32005032"
         }
      },
      "body" : "F.I.Y.: most one-line-ifs in the source codes are without brackets.",
      "commit_id" : "8e7f85128d6216748bad5091392417033cac8e98",
      "created_at" : "2015-06-09T11:57:05Z",
      "diff_hunk" : "@@ -206,6 +206,13 @@ UniValue addnode(const UniValue& params, bool fHelp)\n     }\n     else if(strCommand == \"remove\")\n     {\n+        CNode* pNode = FindNode(strNode.c_str());\n+\n+        if (pNode != NULL)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6259#discussion_r32005032",
      "id" : 32005032,
      "original_commit_id" : "b5974eb729b8380b39e735e04ab00e1c1a315055",
      "original_position" : 6,
      "path" : "src/rpcnet.cpp",
      "position" : 6,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6259",
      "updated_at" : "2015-06-09T13:39:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32005032",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6259#discussion_r32008587"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32008587"
         }
      },
      "body" : "You're absolutely right, missed some clean up there, my bad.",
      "commit_id" : "8e7f85128d6216748bad5091392417033cac8e98",
      "created_at" : "2015-06-09T12:50:01Z",
      "diff_hunk" : "@@ -206,6 +206,13 @@ UniValue addnode(const UniValue& params, bool fHelp)\n     }\n     else if(strCommand == \"remove\")\n     {\n+        CNode* pNode = FindNode(strNode.c_str());\n+\n+        if (pNode != NULL)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6259#discussion_r32008587",
      "id" : 32008587,
      "original_commit_id" : "b5974eb729b8380b39e735e04ab00e1c1a315055",
      "original_position" : 6,
      "path" : "src/rpcnet.cpp",
      "position" : 6,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6259",
      "updated_at" : "2015-06-09T13:39:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32008587",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2569494?v=3",
         "events_url" : "https://api.github.com/users/Alex-van-der-Peet/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Alex-van-der-Peet/followers",
         "following_url" : "https://api.github.com/users/Alex-van-der-Peet/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Alex-van-der-Peet/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Alex-van-der-Peet",
         "id" : 2569494,
         "login" : "Alex-van-der-Peet",
         "organizations_url" : "https://api.github.com/users/Alex-van-der-Peet/orgs",
         "received_events_url" : "https://api.github.com/users/Alex-van-der-Peet/received_events",
         "repos_url" : "https://api.github.com/users/Alex-van-der-Peet/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Alex-van-der-Peet/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Alex-van-der-Peet/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Alex-van-der-Peet"
      }
   },
   {
      "body" : "I don't think it makes sense to disconnect from a peer merely because you remove it from the \"persistent\" addnode list...",
      "created_at" : "2015-06-09T18:39:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6259#issuecomment-110459158",
      "id" : 110459158,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6259",
      "updated_at" : "2015-06-09T18:39:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110459158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Thanks for taking a stab at implementing this, concept ACK.\r\n\r\n@luke-jr Agreed. This is useful functionality (now available in the GUI but not on RPC), however this is the wrong place. Let's just add a `disconnectnode` RPC.",
      "created_at" : "2015-06-10T08:57:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6259#issuecomment-110660933",
      "id" : 110660933,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6259",
      "updated_at" : "2015-06-10T09:00:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110660933",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "+1 @laanwj RE \"disconnectnode\"\r\n\r\nIt is also odd that an \"addnode\" RPC actually performs the opposite of an \"add\"\r\n",
      "created_at" : "2015-06-10T13:06:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6259#issuecomment-110743760",
      "id" : 110743760,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6259",
      "updated_at" : "2015-06-10T13:06:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110743760",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik Yeh that was my comment on the original issue too, but I thought what the hey, here's an issue I can actually take care of, I'll give it a shot.\r\n\r\nWill take a look at adding disconnectnode later this week, leave it with me.",
      "created_at" : "2015-06-10T13:58:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6259#issuecomment-110764393",
      "id" : 110764393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6259",
      "updated_at" : "2015-06-10T13:58:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110764393",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2569494?v=3",
         "events_url" : "https://api.github.com/users/Alex-van-der-Peet/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Alex-van-der-Peet/followers",
         "following_url" : "https://api.github.com/users/Alex-van-der-Peet/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Alex-van-der-Peet/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Alex-van-der-Peet",
         "id" : 2569494,
         "login" : "Alex-van-der-Peet",
         "organizations_url" : "https://api.github.com/users/Alex-van-der-Peet/orgs",
         "received_events_url" : "https://api.github.com/users/Alex-van-der-Peet/received_events",
         "repos_url" : "https://api.github.com/users/Alex-van-der-Peet/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Alex-van-der-Peet/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Alex-van-der-Peet/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Alex-van-der-Peet"
      }
   },
   {
      "body" : "disconnectnode imho makes more sense to me. Maybe even just a \"node\" call that takes specific commands. IE node ban, node add, node disconnect.",
      "created_at" : "2015-06-10T16:43:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6259#issuecomment-110828020",
      "id" : 110828020,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6259",
      "updated_at" : "2015-06-10T16:43:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110828020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4405561?v=3",
         "events_url" : "https://api.github.com/users/franko-org/events{/privacy}",
         "followers_url" : "https://api.github.com/users/franko-org/followers",
         "following_url" : "https://api.github.com/users/franko-org/following{/other_user}",
         "gists_url" : "https://api.github.com/users/franko-org/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/franko-org",
         "id" : 4405561,
         "login" : "franko-org",
         "organizations_url" : "https://api.github.com/users/franko-org/orgs",
         "received_events_url" : "https://api.github.com/users/franko-org/received_events",
         "repos_url" : "https://api.github.com/users/franko-org/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/franko-org/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/franko-org/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/franko-org"
      }
   },
   {
      "body" : "@franko-org That would be possible, but e.g. with `help` it's handier to see what is available in one glance. I don't see an advantage to be particlularly thrifty with adding RPC calls. This gave us peculiar constructs like `addnode remove` in the first place :)\r\n\r\nIn retrospect, the RPC mechanism would have benefitted from namespacing (node.X, wallet.X etc) but doing that for one call is inconsistent.\r\n",
      "created_at" : "2015-06-11T08:42:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6259#issuecomment-111043601",
      "id" : 111043601,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6259",
      "updated_at" : "2015-06-11T08:42:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111043601",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
