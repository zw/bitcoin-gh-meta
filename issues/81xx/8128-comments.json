[
   {
      "body" : "Concept ACK. I'll review for move and correctness later.",
      "created_at" : "2016-06-01T16:24:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#issuecomment-223047566",
      "id" : 223047566,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8128",
      "updated_at" : "2016-06-01T16:24:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/223047566",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Concept ACK.\r\n\r\nnits: \r\n* [Copyright in new file](https://github.com/bitcoin/bitcoin/pull/8128/files#diff-b64569708508232923e5fe3059396334R2\r\n)\r\n* [Indent](https://github.com/bitcoin/bitcoin/pull/8128/files#diff-4881310bed00446083e365942f29d5ecR206)",
      "created_at" : "2016-06-01T19:01:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#issuecomment-223092039",
      "id" : 223092039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8128",
      "updated_at" : "2016-06-01T19:01:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/223092039",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "concept ACK (utACK only up to 1394611 for now)",
      "created_at" : "2016-06-02T03:08:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#issuecomment-223184252",
      "id" : 223184252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8128",
      "updated_at" : "2016-06-02T03:09:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/223184252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "Rebased",
      "created_at" : "2016-06-25T14:40:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#issuecomment-228546859",
      "id" : 228546859,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8128",
      "updated_at" : "2016-06-25T14:40:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/228546859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r71697679"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71697679"
         }
      },
      "body" : "symtex? syntax?",
      "commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "created_at" : "2016-07-21T12:43:13Z",
      "diff_hunk" : "@@ -1214,63 +1214,85 @@ CSubNet::CSubNet():\n     memset(netmask, 0, sizeof(netmask));\n }\n \n-CSubNet::CSubNet(const std::string &strSubnet)\n+CSubNet::CSubNet(const CNetAddr &addr, int32_t mask)\n {\n-    size_t slash = strSubnet.find_last_of('/');\n-    std::vector<CNetAddr> vIP;\n+    valid = true;\n+    network = addr;\n+    // Default to /32 (IPv4) or /128 (IPv6), i.e. match single address\n+    memset(netmask, 255, sizeof(netmask));\n \n+    // IPv4 addresses start at offset 12, and first 12 bytes must match, so just offset n\n+    const int astartofs = network.IsIPv4() ? 12 : 0;\n+\n+    int32_t n = mask;\n+    if(n >= 0 && n <= (128 - astartofs*8)) // Only valid if in range of bits of address\n+    {\n+        n += astartofs*8;\n+        // Clear bits [n..127]\n+        for (; n < 128; ++n)\n+            netmask[n>>3] &= ~(1<<(7-(n&7)));\n+    } else\n+        valid = false;\n+\n+    // Normalize network according to netmask\n+    for(int x=0; x<16; ++x)\n+        network.ip[x] &= netmask[x];\n+}\n+\n+CSubNet::CSubNet(const CNetAddr &addr, const CNetAddr &mask)\n+{\n     valid = true;\n+    network = addr;\n     // Default to /32 (IPv4) or /128 (IPv6), i.e. match single address\n     memset(netmask, 255, sizeof(netmask));\n \n+    // IPv4 addresses start at offset 12, and first 12 bytes must match, so just offset n\n+    const int astartofs = network.IsIPv4() ? 12 : 0;\n+\n+    for(int x=astartofs; x<16; ++x)\n+        netmask[x] = mask.ip[x];\n+\n+    // Normalize network according to netmask\n+    for(int x=0; x<16; ++x)\n+        network.ip[x] &= netmask[x];\n+}\n+\n+\n+bool LookupSubNet(const char* pszName, CSubNet& ret)\n+{\n+    std::string strSubnet(pszName);\n+    size_t slash = strSubnet.find_last_of('/');\n+    std::vector<CNetAddr> vIP;\n+\n     std::string strAddress = strSubnet.substr(0, slash);\n     if (LookupHost(strAddress.c_str(), vIP, 1, false))\n     {\n-        network = vIP[0];\n+        CNetAddr network = vIP[0];\n         if (slash != strSubnet.npos)\n         {\n             std::string strNetmask = strSubnet.substr(slash + 1);\n             int32_t n;\n             // IPv4 addresses start at offset 12, and first 12 bytes must match, so just offset n\n-            const int astartofs = network.IsIPv4() ? 12 : 0;\n-            if (ParseInt32(strNetmask, &n)) // If valid number, assume /24 symtex\n-            {\n-                if(n >= 0 && n <= (128 - astartofs*8)) // Only valid if in range of bits of address\n-                {\n-                    n += astartofs*8;\n-                    // Clear bits [n..127]\n-                    for (; n < 128; ++n)\n-                        netmask[n>>3] &= ~(1<<(7-(n&7)));\n-                }\n-                else\n-                {\n-                    valid = false;\n-                }\n+            if (ParseInt32(strNetmask, &n)) { // If valid number, assume /24 symtex",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r71697679",
      "id" : 71697679,
      "original_commit_id" : "9b0c8149cbe11343871e5c5281016cbe45a4268f",
      "original_position" : 81,
      "path" : "src/netbase.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128",
      "updated_at" : "2016-07-31T18:01:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71697679",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK 584dcdc2cfac757130b060879aba1b25cff5cedd with a tiny nit.\r\nVerified d374dc01f8e388101a039dcd642d566b9296d5da to be move-only.",
      "created_at" : "2016-07-21T12:53:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#issuecomment-234244286",
      "id" : 234244286,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8128",
      "updated_at" : "2016-07-21T12:53:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/234244286",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Thanks for the review. I added a separate commit for the nit rather than clobbering the verified move-only commit hashes. I'm happy to squash for merge.",
      "created_at" : "2016-07-27T21:11:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#issuecomment-235722274",
      "id" : 235722274,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8128",
      "updated_at" : "2016-07-27T21:11:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/235722274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Needs rebase.",
      "created_at" : "2016-07-30T00:24:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#issuecomment-236324871",
      "id" : 236324871,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8128",
      "updated_at" : "2016-07-30T00:24:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236324871",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@theuni Trivial rebase: https://github.com/sipa/bitcoin/commits/pr8128.",
      "created_at" : "2016-07-30T21:15:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#issuecomment-236390371",
      "id" : 236390371,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8128",
      "updated_at" : "2016-07-30T21:15:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236390371",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Rebased and squashed the nit while I was at it.\r\n\r\n@sipa: I rebased on the same commit as you, so the diff should be null.",
      "created_at" : "2016-07-31T18:02:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#issuecomment-236446257",
      "id" : 236446257,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8128",
      "updated_at" : "2016-07-31T18:02:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236446257",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r72909010"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72909010"
         }
      },
      "body" : "nit: Please move `netaddress.h` one line up to match the alphabet and the `cpp` files order below.",
      "commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "created_at" : "2016-07-31T19:02:33Z",
      "diff_hunk" : "@@ -106,6 +106,7 @@ BITCOIN_CORE_H = \\\n   miner.h \\\n   net.h \\\n   netbase.h \\\n+  netaddress.h \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r72909010",
      "id" : 72909010,
      "original_commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "original_position" : 4,
      "path" : "src/Makefile.am",
      "position" : 4,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128",
      "updated_at" : "2016-07-31T19:02:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72909010",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r72909032"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72909032"
         }
      },
      "body" : "nit: align comments.",
      "commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "created_at" : "2016-07-31T19:04:24Z",
      "diff_hunk" : "@@ -197,12 +197,17 @@ static bool ClientAllowed(const CNetAddr& netaddr)\n static bool InitHTTPAllowList()\n {\n     rpc_allow_subnets.clear();\n-    rpc_allow_subnets.push_back(CSubNet(\"127.0.0.0/8\")); // always allow IPv4 local subnet\n-    rpc_allow_subnets.push_back(CSubNet(\"::1\"));         // always allow IPv6 localhost\n+    CNetAddr localv4;\n+    CNetAddr localv6;\n+    LookupHost(\"127.0.0.1\", localv4, false);\n+    LookupHost(\"::1\", localv6, false);\n+    rpc_allow_subnets.push_back(CSubNet(localv4, 8)); // always allow IPv4 local subnet\n+    rpc_allow_subnets.push_back(CSubNet(localv6));         // always allow IPv6 localhost",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r72909032",
      "id" : 72909032,
      "original_commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "original_position" : 11,
      "path" : "src/httpserver.cpp",
      "position" : 11,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128",
      "updated_at" : "2016-07-31T19:04:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72909032",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r72909070"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72909070"
         }
      },
      "body" : "Hmm. Why `char *` instead of `std::string` in prototypes and c_str() everywhere?\r\n\r\nEdit: probably to keep the old/already used semantics?",
      "commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "created_at" : "2016-07-31T19:07:59Z",
      "diff_hunk" : "@@ -197,12 +197,17 @@ static bool ClientAllowed(const CNetAddr& netaddr)\n static bool InitHTTPAllowList()\n {\n     rpc_allow_subnets.clear();\n-    rpc_allow_subnets.push_back(CSubNet(\"127.0.0.0/8\")); // always allow IPv4 local subnet\n-    rpc_allow_subnets.push_back(CSubNet(\"::1\"));         // always allow IPv6 localhost\n+    CNetAddr localv4;\n+    CNetAddr localv6;\n+    LookupHost(\"127.0.0.1\", localv4, false);\n+    LookupHost(\"::1\", localv6, false);\n+    rpc_allow_subnets.push_back(CSubNet(localv4, 8)); // always allow IPv4 local subnet\n+    rpc_allow_subnets.push_back(CSubNet(localv6));         // always allow IPv6 localhost\n     if (mapMultiArgs.count(\"-rpcallowip\")) {\n         const std::vector<std::string>& vAllow = mapMultiArgs[\"-rpcallowip\"];\n         for (std::string strAllow : vAllow) {\n-            CSubNet subnet(strAllow);\n+            CSubNet subnet;\n+            LookupSubNet(strAllow.c_str(), subnet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r72909070",
      "id" : 72909070,
      "original_commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "original_position" : 17,
      "path" : "src/httpserver.cpp",
      "position" : 17,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128",
      "updated_at" : "2016-07-31T19:14:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72909070",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/8128/commits/21ba407a7369a0229b8a8554dee0da63a64e6639\r\n\r\nThis also helped reducing shadow warnings from the `net*` codes (e.g. for `randomize_credentials`: from 309 occurrences in the build log to 42 only).\r\n",
      "created_at" : "2016-07-31T20:20:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#issuecomment-236454209",
      "id" : 236454209,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8128",
      "updated_at" : "2016-07-31T20:20:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/236454209",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r72931075"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72931075"
         }
      },
      "body" : "You ignore the return value of `Lookup*` almost everywhere. Is this on purpose?\r\nI think the old behavior was to return a service with `!IsValid()` when the lookup fails. But if that is still the case we could just as well have the API be:\r\n```\r\npeer = LookupNumeric(address, port);\r\n```\r\nThen check for IsValid afterward.",
      "commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "created_at" : "2016-08-01T06:58:55Z",
      "diff_hunk" : "@@ -614,7 +619,7 @@ CService HTTPRequest::GetPeer()\n         const char* address = \"\";\n         uint16_t port = 0;\n         evhttp_connection_get_peer(con, (char**)&address, &port);\n-        peer = CService(address, port);\n+        LookupNumeric(address, peer, port);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r72931075",
      "id" : 72931075,
      "original_commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "original_position" : 26,
      "path" : "src/httpserver.cpp",
      "position" : 26,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128",
      "updated_at" : "2016-08-01T07:01:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72931075",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r72931178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72931178"
         }
      },
      "body" : "Don't use side-effects of assertions",
      "commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "created_at" : "2016-08-01T07:00:16Z",
      "diff_hunk" : "@@ -462,7 +462,9 @@ void TorController::auth_cb(TorControlConnection& conn, const TorControlReply& r\n         // Now that we know Tor is running setup the proxy for onion addresses\n         // if -onion isn't set to something else.\n         if (GetArg(\"-onion\", \"\") == \"\") {\n-            proxyType addrOnion = proxyType(CService(\"127.0.0.1\", 9050), true);\n+            CService resolved;\n+            assert(LookupNumeric(\"127.0.0.1\", resolved, 9050));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r72931178",
      "id" : 72931178,
      "original_commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "original_position" : 24,
      "path" : "src/torcontrol.cpp",
      "position" : 24,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128",
      "updated_at" : "2016-08-01T07:00:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/72931178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r73007062"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/73007062"
         }
      },
      "body" : "Yes, this is inconsistent. The return value was intended to be a shortcut to avoid having to check for IsValid afterwards, but most places end up forwarding the result elsewhere even if invalid.\r\n\r\nI'll just remove the return.",
      "commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "created_at" : "2016-08-01T16:18:42Z",
      "diff_hunk" : "@@ -614,7 +619,7 @@ CService HTTPRequest::GetPeer()\n         const char* address = \"\";\n         uint16_t port = 0;\n         evhttp_connection_get_peer(con, (char**)&address, &port);\n-        peer = CService(address, port);\n+        LookupNumeric(address, peer, port);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r73007062",
      "id" : 73007062,
      "original_commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "original_position" : 26,
      "path" : "src/httpserver.cpp",
      "position" : 26,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128",
      "updated_at" : "2016-08-01T16:18:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/73007062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r73007243"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/73007243"
         }
      },
      "body" : "Thanks, will remove. This should just be covered by tests.",
      "commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "created_at" : "2016-08-01T16:19:50Z",
      "diff_hunk" : "@@ -462,7 +462,9 @@ void TorController::auth_cb(TorControlConnection& conn, const TorControlReply& r\n         // Now that we know Tor is running setup the proxy for onion addresses\n         // if -onion isn't set to something else.\n         if (GetArg(\"-onion\", \"\") == \"\") {\n-            proxyType addrOnion = proxyType(CService(\"127.0.0.1\", 9050), true);\n+            CService resolved;\n+            assert(LookupNumeric(\"127.0.0.1\", resolved, 9050));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#discussion_r73007243",
      "id" : 73007243,
      "original_commit_id" : "21ba407a7369a0229b8a8554dee0da63a64e6639",
      "original_position" : 24,
      "path" : "src/torcontrol.cpp",
      "position" : 24,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8128",
      "updated_at" : "2016-08-01T16:19:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/73007243",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "utACK 8945384bca00f74ba85c98a52925c254c49025a5",
      "created_at" : "2016-08-05T19:09:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#issuecomment-237937335",
      "id" : 237937335,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8128",
      "updated_at" : "2016-08-05T19:09:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/237937335",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@theuni Can you address @paveljanik's comments above?",
      "created_at" : "2016-08-10T17:45:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8128#issuecomment-238945750",
      "id" : 238945750,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8128",
      "updated_at" : "2016-08-10T17:45:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/238945750",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
