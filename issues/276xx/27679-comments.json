[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/27679).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/27679#issuecomment-1550363562) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27557](https://github.com/bitcoin/bitcoin/pull/27557) (net: call getaddrinfo() in detachable thread to prevent stalling by pinheadmz)\n* [#27411](https://github.com/bitcoin/bitcoin/pull/27411) (p2p: Restrict self-advertisements with privacy networks to avoid fingerprinting by mzumsande)\n* [#27375](https://github.com/bitcoin/bitcoin/pull/27375) (net: support unix domain sockets for -proxy and -onion by pinheadmz)\n* [#27071](https://github.com/bitcoin/bitcoin/pull/27071) (Handle CJDNS from LookupSubNet() by vasild)\n* [#26261](https://github.com/bitcoin/bitcoin/pull/26261) (p2p: cleanup `LookupIntern`, `Lookup` and `LookupHost` by brunoerg)\n* [#25284](https://github.com/bitcoin/bitcoin/pull/25284) (net: Use serialization parameters for CAddress serialization by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-05-16T20:08:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27679#issuecomment-1550292663",
      "id" : 1550292663,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27679",
      "node_id" : "IC_kwDOABII585cZ5a3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1550292663/reactions"
      },
      "updated_at" : "2023-10-25T13:55:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1550292663",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2023-05-16T21:07:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27679#issuecomment-1550363562",
      "id" : 1550363562,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27679",
      "node_id" : "IC_kwDOABII585caKuq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1550363562/reactions"
      },
      "updated_at" : "2023-05-16T21:07:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1550363562",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-05-30T15:49:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27679#issuecomment-1568675503",
      "id" : 1568675503,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27679",
      "node_id" : "IC_kwDOABII585dgBav",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1568675503/reactions"
      },
      "updated_at" : "2023-05-30T15:49:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1568675503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> ð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\r\n\r\nRelax bot! sheesh. I'm gonna wait until #27375 gets approved",
      "created_at" : "2023-05-30T20:02:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27679#issuecomment-1569013910",
      "id" : 1569013910,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27679",
      "node_id" : "IC_kwDOABII585dhUCW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1569013910/reactions"
      },
      "updated_at" : "2023-05-30T20:02:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1569013910",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27679#discussion_r1276829144"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27679"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1276829144"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Prefer we just allow it for everything and error somewhere else",
      "commit_id" : "a5849690b1bb4d9c810c464170b5ed12178abaa8",
      "created_at" : "2023-07-27T21:14:55Z",
      "diff_hunk" : "@@ -1273,30 +1273,34 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n-    for (const std::string port_option : {\n-        \"-i2psam\",\n-        \"-onion\",\n-        \"-proxy\",\n-        \"-rpcbind\",\n-        \"-torcontrol\",\n-        \"-whitebind\",\n-        \"-zmqpubhashblock\",\n-        \"-zmqpubhashtx\",\n-        \"-zmqpubrawblock\",\n-        \"-zmqpubrawtx\",\n-        \"-zmqpubsequence\",\n+    for (const auto &port_option : std::vector<std::pair<std::string, bool>>{\n+        // arg name            UNIX socket support\n+        {\"-i2psam\",                 false},\n+        {\"-onion\",                  true},\n+        {\"-proxy\",                  true},\n+        {\"-rpcbind\",                false},\n+        {\"-torcontrol\",             false},\n+        {\"-whitebind\",              false},\n+        {\"-zmqpubhashblock\",        true},\n+        {\"-zmqpubhashtx\",           true},\n+        {\"-zmqpubrawblock\",         true},\n+        {\"-zmqpubrawtx\",            true},\n+        {\"-zmqpubsequence\",         true}\n     }) {\n-        for (const std::string& socket_addr : args.GetArgs(port_option)) {\n+        const std::string arg{port_option.first};\n+        const bool unix{port_option.second};\n+        for (const std::string& socket_addr : args.GetArgs(arg)) {\n             std::string host_out;\n             uint16_t port_out{0};\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\n #if HAVE_SOCKADDR_UN\n-                // Allow unix domain sockets for -proxy and -onion e.g. unix:/some/file/path\n-                if ((port_option != \"-proxy\" && port_option != \"-onion\") || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {\n-                    return InitError(InvalidPortErrMsg(port_option, socket_addr));\n+                // Allow unix domain sockets for some options e.g. unix:/some/file/path",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27679#discussion_r1276829144",
      "id" : 1276829144,
      "line" : 1297,
      "node_id" : "PRRC_kwDOABII585MGt3Y",
      "original_commit_id" : "77019cd6ecc74090dc6449ad537daa14cee919ba",
      "original_line" : 1297,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 39,
      "pull_request_review_id" : 1550804361,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27679",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1276829144/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-27T21:14:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1276829144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27679#discussion_r1276830223"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27679"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1276830223"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ipc*",
      "commit_id" : "a5849690b1bb4d9c810c464170b5ed12178abaa8",
      "created_at" : "2023-07-27T21:16:24Z",
      "diff_hunk" : "@@ -33,8 +33,9 @@\n  */\n static constexpr int ADDRV2_FORMAT = 0x20000000;\n \n-/** Prefix for unix domain socket addresses (which are local filesystem paths) */\n-const std::string ADDR_PREFIX_UNIX = \"unix:\";\n+/** Prefixes for unix domain socket addresses (which are local filesystem paths) */\n+const std::string ADDR_PREFIX_UNIX = \"unix:\"; // example unix:/root/path/to/file\n+const std::string ADDR_PREFIX_IPC = \"ipc://\"; // example icp:///root/path/to/file",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27679#discussion_r1276830223",
      "id" : 1276830223,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII585MGuIP",
      "original_commit_id" : "77019cd6ecc74090dc6449ad537daa14cee919ba",
      "original_line" : 38,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : 14,
      "pull_request_review_id" : 1550807345,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27679",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1276830223/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-27T21:16:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1276830223",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--13523179cfe9479db18ec6c5d236f789-->\nThere hasn't been much activity lately and the patch still needs rebase. What is the status here?\n\n* Is it still relevant? â¡ï¸ Please solve the conflicts to make it ready for review and to ensure the CI passes.\n* Is it no longer relevant? â¡ï¸ Please close.\n* Did the author lose interest or time to work on this? â¡ï¸ Please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\n",
      "created_at" : "2023-10-25T00:51:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27679#issuecomment-1778298193",
      "id" : 1778298193,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27679",
      "node_id" : "IC_kwDOABII585p_q1R",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1778298193/reactions"
      },
      "updated_at" : "2023-10-25T00:51:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1778298193",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> There hasn't been much activity lately and the patch still needs rebase. What is the status here?\r\n\r\nWaiting for https://github.com/bitcoin/bitcoin/pull/27375",
      "created_at" : "2023-10-25T13:55:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27679#issuecomment-1779332736",
      "id" : 1779332736,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27679",
      "node_id" : "IC_kwDOABII585qDnaA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1779332736/reactions"
      },
      "updated_at" : "2023-10-25T13:55:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1779332736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--13523179cfe9479db18ec6c5d236f789-->\nâ There hasn't been much activity lately and the patch still needs rebase. What is the status here?\n\n* Is it still relevant? â¡ï¸ Please solve the conflicts to make it ready for review and to ensure the CI passes.\n* Is it no longer relevant? â¡ï¸ Please close.\n* Did the author lose interest or time to work on this? â¡ï¸ Please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\n",
      "created_at" : "2024-01-23T00:00:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27679#issuecomment-1905048158",
      "id" : 1905048158,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27679",
      "node_id" : "IC_kwDOABII585xjLpe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1905048158/reactions"
      },
      "updated_at" : "2024-01-23T00:00:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1905048158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/22614485115</sub>",
      "created_at" : "2024-03-13T16:44:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27679#issuecomment-1994943433",
      "id" : 1994943433,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27679",
      "node_id" : "IC_kwDOABII58526GvJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1994943433/reactions"
      },
      "updated_at" : "2024-03-13T16:44:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1994943433",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27679#discussion_r1523621648"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27679"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1523621648"
         }
      },
      "author_association" : "MEMBER",
      "body" : "unix socket support for i2psam and rpcbind will be implemented in future work, so this little matrix is anticipating that",
      "commit_id" : "7b4c7bdb35eda125781d14535a69dc6b9898069d",
      "created_at" : "2024-03-13T16:57:51Z",
      "diff_hunk" : "@@ -1314,30 +1314,33 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n-    for (const std::string port_option : {\n-        \"-i2psam\",\n-        \"-onion\",\n-        \"-proxy\",\n-        \"-rpcbind\",\n-        \"-torcontrol\",\n-        \"-whitebind\",\n-        \"-zmqpubhashblock\",\n-        \"-zmqpubhashtx\",\n-        \"-zmqpubrawblock\",\n-        \"-zmqpubrawtx\",\n-        \"-zmqpubsequence\",\n+    for (const auto &port_option : std::vector<std::pair<std::string, bool>>{\n+        // arg name            UNIX socket support\n+        {\"-i2psam\",                 false},\n+        {\"-onion\",                  true},\n+        {\"-proxy\",                  true},\n+        {\"-rpcbind\",                false},\n+        {\"-torcontrol\",             false},\n+        {\"-whitebind\",              false},\n+        {\"-zmqpubhashblock\",        true},\n+        {\"-zmqpubhashtx\",           true},\n+        {\"-zmqpubrawblock\",         true},\n+        {\"-zmqpubrawtx\",            true},\n+        {\"-zmqpubsequence\",         true}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27679#discussion_r1523621648",
      "id" : 1523621648,
      "line" : 1329,
      "node_id" : "PRRC_kwDOABII585a0J8Q",
      "original_commit_id" : "7b4c7bdb35eda125781d14535a69dc6b9898069d",
      "original_line" : 1329,
      "original_position" : 28,
      "original_start_line" : 1319,
      "path" : "src/init.cpp",
      "position" : 28,
      "pull_request_review_id" : 1934735018,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27679",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1523621648/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1319,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-03-13T16:57:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1523621648",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27679#discussion_r1525740384"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27679"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1525740384"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "If adjusted to:\r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex a592e7d763..f9bc33d57f 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -1336,7 +1336,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\r\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\r\n #if HAVE_SOCKADDR_UN\r\n                 // Allow unix domain sockets for some options e.g. unix:/some/file/path\r\n-                if (!unix || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {\r\n+                if (!unix || (socket_addr.find(ADDR_PREFIX_UNIX) != 0 && socket_addr.find(ADDR_PREFIX_IPC) != 0)) {\r\n                     return InitError(InvalidPortErrMsg(arg, socket_addr));\r\n                 }\r\n #else\r\n```\r\n\r\nit seems like support for both forms (`unix:` and `ipc://`) might be achievable. \r\n\r\nIf I'm not missing something, \r\nhttps://github.com/bitcoin/bitcoin/blob/7b4c7bdb35eda125781d14535a69dc6b9898069d/src/zmq/zmqnotificationinterface.cpp#L63\r\nwould allow `ipc://` to pass through (while also normalizing `unix:` to `ipc://`).\r\n\r\nWas there a reason/rationale to use only `unix:` rather than both forms?  I would guess that folks familiar with ZMQ would be used to using `ipc://`, so including support for that form may be more straightforward for them.\r\n\r\nI'm ok with either approach (supporting only `unix:` or supporting both `unix:` and `ipc://`).",
      "commit_id" : "7b4c7bdb35eda125781d14535a69dc6b9898069d",
      "created_at" : "2024-03-15T04:19:53Z",
      "diff_hunk" : "@@ -1314,30 +1314,33 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n-    for (const std::string port_option : {\n-        \"-i2psam\",\n-        \"-onion\",\n-        \"-proxy\",\n-        \"-rpcbind\",\n-        \"-torcontrol\",\n-        \"-whitebind\",\n-        \"-zmqpubhashblock\",\n-        \"-zmqpubhashtx\",\n-        \"-zmqpubrawblock\",\n-        \"-zmqpubrawtx\",\n-        \"-zmqpubsequence\",\n+    for (const auto &port_option : std::vector<std::pair<std::string, bool>>{\n+        // arg name            UNIX socket support\n+        {\"-i2psam\",                 false},\n+        {\"-onion\",                  true},\n+        {\"-proxy\",                  true},\n+        {\"-rpcbind\",                false},\n+        {\"-torcontrol\",             false},\n+        {\"-whitebind\",              false},\n+        {\"-zmqpubhashblock\",        true},\n+        {\"-zmqpubhashtx\",           true},\n+        {\"-zmqpubrawblock\",         true},\n+        {\"-zmqpubrawtx\",            true},\n+        {\"-zmqpubsequence\",         true}\n     }) {\n-        for (const std::string& socket_addr : args.GetArgs(port_option)) {\n+        const std::string arg{port_option.first};\n+        const bool unix{port_option.second};\n+        for (const std::string& socket_addr : args.GetArgs(arg)) {\n             std::string host_out;\n             uint16_t port_out{0};\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\n #if HAVE_SOCKADDR_UN\n-                // Allow unix domain sockets for -proxy and -onion e.g. unix:/some/file/path\n-                if ((port_option != \"-proxy\" && port_option != \"-onion\") || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {\n-                    return InitError(InvalidPortErrMsg(port_option, socket_addr));\n+                // Allow unix domain sockets for some options e.g. unix:/some/file/path\n+                if (!unix || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27679#discussion_r1525740384",
      "id" : 1525740384,
      "line" : 1339,
      "node_id" : "PRRC_kwDOABII585a8PNg",
      "original_commit_id" : "7b4c7bdb35eda125781d14535a69dc6b9898069d",
      "original_line" : 1339,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 42,
      "pull_request_review_id" : 1938090332,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27679",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1525740384/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-15T04:35:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1525740384",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/106488469?v=4",
         "events_url" : "https://api.github.com/users/tdb3/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tdb3/followers",
         "following_url" : "https://api.github.com/users/tdb3/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tdb3/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tdb3",
         "id" : 106488469,
         "login" : "tdb3",
         "node_id" : "U_kgDOBljilQ",
         "organizations_url" : "https://api.github.com/users/tdb3/orgs",
         "received_events_url" : "https://api.github.com/users/tdb3/received_events",
         "repos_url" : "https://api.github.com/users/tdb3/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tdb3/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tdb3/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tdb3"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27679#discussion_r1526872365"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27679"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1526872365"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Heh yeah actually the branch used to be exactly like this but after #27375 got revised I simplified it. I'm open to discuss options, we could support any combination of `unix:` `unix://` `ipc:` `ipc://` or use a regex to cover them all. The motivation for keeping it simple isn't super strong but goes like this:\r\n\r\n- Tor and libzmq only support one prefix each, and not even the same one. Meanwhile LND supports another set of prefixes.\r\n- We would also need to update `IsUnixSocketPath()` to be more flexible \r\n- We'd also need a new function `GetUnixPathFromArg()` or something to replace lines like this that only expect one prefix:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/015ac13dcc964a31ef06dfdb565f88f901607f0e/src/netbase.cpp#L649",
      "commit_id" : "7b4c7bdb35eda125781d14535a69dc6b9898069d",
      "created_at" : "2024-03-15T21:34:57Z",
      "diff_hunk" : "@@ -1314,30 +1314,33 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n-    for (const std::string port_option : {\n-        \"-i2psam\",\n-        \"-onion\",\n-        \"-proxy\",\n-        \"-rpcbind\",\n-        \"-torcontrol\",\n-        \"-whitebind\",\n-        \"-zmqpubhashblock\",\n-        \"-zmqpubhashtx\",\n-        \"-zmqpubrawblock\",\n-        \"-zmqpubrawtx\",\n-        \"-zmqpubsequence\",\n+    for (const auto &port_option : std::vector<std::pair<std::string, bool>>{\n+        // arg name            UNIX socket support\n+        {\"-i2psam\",                 false},\n+        {\"-onion\",                  true},\n+        {\"-proxy\",                  true},\n+        {\"-rpcbind\",                false},\n+        {\"-torcontrol\",             false},\n+        {\"-whitebind\",              false},\n+        {\"-zmqpubhashblock\",        true},\n+        {\"-zmqpubhashtx\",           true},\n+        {\"-zmqpubrawblock\",         true},\n+        {\"-zmqpubrawtx\",            true},\n+        {\"-zmqpubsequence\",         true}\n     }) {\n-        for (const std::string& socket_addr : args.GetArgs(port_option)) {\n+        const std::string arg{port_option.first};\n+        const bool unix{port_option.second};\n+        for (const std::string& socket_addr : args.GetArgs(arg)) {\n             std::string host_out;\n             uint16_t port_out{0};\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\n #if HAVE_SOCKADDR_UN\n-                // Allow unix domain sockets for -proxy and -onion e.g. unix:/some/file/path\n-                if ((port_option != \"-proxy\" && port_option != \"-onion\") || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {\n-                    return InitError(InvalidPortErrMsg(port_option, socket_addr));\n+                // Allow unix domain sockets for some options e.g. unix:/some/file/path\n+                if (!unix || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27679#discussion_r1526872365",
      "id" : 1526872365,
      "in_reply_to_id" : 1525740384,
      "line" : 1339,
      "node_id" : "PRRC_kwDOABII585bAjkt",
      "original_commit_id" : "7b4c7bdb35eda125781d14535a69dc6b9898069d",
      "original_line" : 1339,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 42,
      "pull_request_review_id" : 1940684610,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27679",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1526872365/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-15T21:34:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1526872365",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27679#discussion_r1527176396"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27679"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1527176396"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah, thanks for the explanation.  TLDR:  After some thought, my vote is support only the `unix:` prefix.\r\n\r\nSome thoughts for posterity.  Seems like the following are (generally) the case:\r\n- Supporting a straightforward and uniform way to indicate usage of UNIX domain sockets makes sense (and can be less confusing to the user).  Currently Core supports unix domain sockets with `-proxy` and `-onion` (thanks to PR 27375!), and the goal is to add it for more areas, so whatever prefix is chosen should be reasonable for each of the options that can use it.\r\n  - In the long run, support for UNIX domain sockets would be added for ZMQ (this PR), with I2P SAM proxy, on Windows, and in the GUI.  I'm not seeing use of a single prefix `unix:` being an issue for any of these applications (even in Windows, where the socket type is still called `AF_UNIX` AFAIK).\r\n  - Users typically experience confusion when there are many possible ways to accomplish the goal (e.g. \"Wait, which prefix should I use?\")\r\n  - There would be a ripple effect for guides written in the future (e.g. some tutorials/guides would state to use one prefix, and some would state to use another).  This could add confusion for users.\r\n- Some prefixes make more sense for some options than others.  `unix:` seems to be the most straightforward and universally applicable.  `ipc://` could possibly make sense for ZMQ options since ZMQ uses the prefix, but it wouldn't make much sense for `-proxy` with Tor, so may even be a little confusing to support it there.\r\n- Supporting multiple indicators (e.g. `unix:`, `ipc://`, etc.) simultaneously means more code and more complexity to maintain.  The added value for users accustomed to using `ipc://` with non-Bitcoin ZMQ application seems minimal compared to the effort for code maintenance.  These users could simply start using `unix:` for Bitcoin application.\r\n- More code and more complexity typically means more bugs, vulns, more review burden, etc.  If there was a massive value gain it might be worth the effort, but doesn't like that's the case here.",
      "commit_id" : "7b4c7bdb35eda125781d14535a69dc6b9898069d",
      "created_at" : "2024-03-16T13:49:57Z",
      "diff_hunk" : "@@ -1314,30 +1314,33 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n-    for (const std::string port_option : {\n-        \"-i2psam\",\n-        \"-onion\",\n-        \"-proxy\",\n-        \"-rpcbind\",\n-        \"-torcontrol\",\n-        \"-whitebind\",\n-        \"-zmqpubhashblock\",\n-        \"-zmqpubhashtx\",\n-        \"-zmqpubrawblock\",\n-        \"-zmqpubrawtx\",\n-        \"-zmqpubsequence\",\n+    for (const auto &port_option : std::vector<std::pair<std::string, bool>>{\n+        // arg name            UNIX socket support\n+        {\"-i2psam\",                 false},\n+        {\"-onion\",                  true},\n+        {\"-proxy\",                  true},\n+        {\"-rpcbind\",                false},\n+        {\"-torcontrol\",             false},\n+        {\"-whitebind\",              false},\n+        {\"-zmqpubhashblock\",        true},\n+        {\"-zmqpubhashtx\",           true},\n+        {\"-zmqpubrawblock\",         true},\n+        {\"-zmqpubrawtx\",            true},\n+        {\"-zmqpubsequence\",         true}\n     }) {\n-        for (const std::string& socket_addr : args.GetArgs(port_option)) {\n+        const std::string arg{port_option.first};\n+        const bool unix{port_option.second};\n+        for (const std::string& socket_addr : args.GetArgs(arg)) {\n             std::string host_out;\n             uint16_t port_out{0};\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\n #if HAVE_SOCKADDR_UN\n-                // Allow unix domain sockets for -proxy and -onion e.g. unix:/some/file/path\n-                if ((port_option != \"-proxy\" && port_option != \"-onion\") || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {\n-                    return InitError(InvalidPortErrMsg(port_option, socket_addr));\n+                // Allow unix domain sockets for some options e.g. unix:/some/file/path\n+                if (!unix || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27679#discussion_r1527176396",
      "id" : 1527176396,
      "in_reply_to_id" : 1525740384,
      "line" : 1339,
      "node_id" : "PRRC_kwDOABII585bBtzM",
      "original_commit_id" : "7b4c7bdb35eda125781d14535a69dc6b9898069d",
      "original_line" : 1339,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 42,
      "pull_request_review_id" : 1941037130,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27679",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1527176396/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-16T13:49:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1527176396",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/106488469?v=4",
         "events_url" : "https://api.github.com/users/tdb3/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tdb3/followers",
         "following_url" : "https://api.github.com/users/tdb3/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tdb3/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tdb3",
         "id" : 106488469,
         "login" : "tdb3",
         "node_id" : "U_kgDOBljilQ",
         "organizations_url" : "https://api.github.com/users/tdb3/orgs",
         "received_events_url" : "https://api.github.com/users/tdb3/received_events",
         "repos_url" : "https://api.github.com/users/tdb3/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tdb3/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tdb3/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tdb3"
      }
   }
]
