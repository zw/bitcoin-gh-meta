[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/27636#pullrequestreview-1435394620) |\n| Stale ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/27636#pullrequestreview-1433163406), [MarcoFalke](https://github.com/bitcoin/bitcoin/pull/27636#pullrequestreview-1433987014) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27607](https://github.com/bitcoin/bitcoin/pull/27607) (index: improve initialization and pruning violation check by furszy)\n* [#27460](https://github.com/bitcoin/bitcoin/pull/27460) (rpc: Add importmempool RPC by MarcoFalke)\n* [#27331](https://github.com/bitcoin/bitcoin/pull/27331) (refactor: extract CCheckQueue's data handling into a separate container \"Bag\" by martinus)\n* [#26966](https://github.com/bitcoin/bitcoin/pull/26966) (index: blockfilter initial sync speedup, parallelize process by furszy)\n* [#26762](https://github.com/bitcoin/bitcoin/pull/26762) (refactor: Make `CCheckQueue` RAII-styled by hebasto)\n* [#19461](https://github.com/bitcoin/bitcoin/pull/19461) (multiprocess: Add bitcoin-gui -ipcconnect option by ryanofsky)\n* [#19460](https://github.com/bitcoin/bitcoin/pull/19460) (multiprocess: Add bitcoin-wallet -ipcconnect option by ryanofsky)\n* [#10443](https://github.com/bitcoin/bitcoin/pull/10443) (Add fee_est tool for debugging fee estimation code by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-05-12T08:03:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1545342843",
      "id" : 1545342843,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cHA97",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1545342843/reactions"
      },
      "updated_at" : "2023-05-20T11:01:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1545342843",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192264695"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192264695"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It seems like it would be more natural to write this as:\r\n\r\n```c++\r\nclass ChainstateNotifications\r\n{\r\n    virtual void NotifyBlockTip(SynchronizationState state, CBlockIndex* index) {}\r\n    virtual void NotifyHeaderTip(SynchronizationState state, int64_t height, int64_t timestamp, bool presync) {}\r\n    virtual void ShowProgress(const std::string& title, int nProgress, bool resume_possible) {}\r\n    virtual void DoWarning(const bilingual_str& warning) {}\r\n    virtual void InitError(const bilingual_str& user_message) {}\r\n};\r\n```",
      "commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "created_at" : "2023-05-12T11:49:24Z",
      "diff_hunk" : "@@ -15,13 +15,29 @@\n #include <functional>\n #include <optional>\n \n+class CBlockIndex;\n class CChainParams;\n+enum class SynchronizationState;\n \n static constexpr bool DEFAULT_CHECKPOINTS_ENABLED{true};\n static constexpr auto DEFAULT_MAX_TIP_AGE{24h};\n \n namespace kernel {\n \n+/**\n+ * A struct containing callback functions to issue notifications from the\n+ * `ChainstateManager`. More ergonomically referred to as\n+ * `ChainstateManager::NotificationCallbacks` due to the using-declaration in\n+ * `ChainstateManager`.\n+ */\n+struct ChainstateManagerNotificationCallbacks {\n+    const std::function<void(SynchronizationState state, CBlockIndex* index)> notify_block_tip;\n+    const std::function<void(SynchronizationState state, int64_t height, int64_t timestamp, bool presync)> notify_header_tip;\n+    const std::function<void(const std::string& title, int nProgress, bool resume_possible)> show_progress;\n+    const std::function<void(const bilingual_str& warning)> do_warning;\n+    const std::function<void(const bilingual_str& user_message)> init_error;\n+};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192264695",
      "id" : 1192264695,
      "line" : 39,
      "node_id" : "PRRC_kwDOABII585HEIP3",
      "original_commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "original_line" : 39,
      "original_position" : 25,
      "original_start_line" : 33,
      "path" : "src/kernel/chainstatemanager_opts.h",
      "position" : 25,
      "pull_request_review_id" : 1424328154,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192264695/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 33,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-05-12T12:28:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192264695",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192290165"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192290165"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "These new AbortNode calls seem more awkward. And they aren't really future-proof since `AbortNode` calls the global `StartShutdown` function which is specific to the node and will have to be changed for the kernel. Also the name \"abort node\" doesn't make sense in the kernel context if the kernel application isn't a bitcoin node. Would suggest adding a `FatalError` notification to complement `InitError` in `ChainstateNotifications` class suggested previously:\r\n\r\n```c++\r\nclass ChainstateNotifications\r\n{\r\n    ...\r\n    virtual void FatalError(const bilingual_str& error_message, const bilingual_str abort_message={}) {}\r\n};\r\n```\r\n\r\nOther kernel clients could customize `FatalError` but the node implementation would call `SetMiscWarning(error_message)` and `InitError(abort_message or \"A fatal internal error occurred, see debug.log for details\")` and `StartShutdown()` like `AbortNode` function does currently, to keep behavior unchanged.",
      "commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "created_at" : "2023-05-12T12:18:15Z",
      "diff_hunk" : "@@ -527,7 +527,7 @@ void BlockManager::FlushUndoFile(int block_file, bool finalize)\n {\n     FlatFilePos undo_pos_old(block_file, m_blockfile_info[block_file].nUndoSize);\n     if (!UndoFileSeq().Flush(undo_pos_old, finalize)) {\n-        AbortNode(\"Flushing undo file to disk failed. This is likely the result of an I/O error.\");\n+        AbortNode(\"Flushing undo file to disk failed. This is likely the result of an I/O error.\", m_opts.init_error_callback);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192290165",
      "id" : 1192290165,
      "line" : 530,
      "node_id" : "PRRC_kwDOABII585HEOd1",
      "original_commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "original_line" : 530,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : 16,
      "pull_request_review_id" : 1424328154,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192290165/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-12T12:28:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192290165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192295222"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192295222"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think I would tie these notifications to the ChainStateManager class specifically as they really make sense anywhere in validation code. Would suggest changing `chainstatemanager_notifications` to  `chainstate_notifications`, or `validation_notifications` and dropping the \"manager\" in these places",
      "commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "created_at" : "2023-05-12T12:23:32Z",
      "diff_hunk" : "@@ -0,0 +1,14 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_NODE_CHAINSTATEMANAGER_NOTIFICATIONS_H\n+#define BITCOIN_NODE_CHAINSTATEMANAGER_NOTIFICATIONS_H\n+\n+#include <kernel/chainstatemanager_opts.h>\n+\n+namespace node {\n+kernel::ChainstateManagerNotificationCallbacks DefaultChainstateManagerNotifications();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192295222",
      "id" : 1192295222,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII585HEPs2",
      "original_commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/node/chainstatemanager_notifications.h",
      "position" : 11,
      "pull_request_review_id" : 1424328154,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192295222/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-12T12:28:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192295222",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192715879"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192715879"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Would you also prefer passing this `validation_notifications` class to the other users of these notification functions, even if they only use one of the methods?",
      "commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "created_at" : "2023-05-12T19:08:27Z",
      "diff_hunk" : "@@ -0,0 +1,14 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_NODE_CHAINSTATEMANAGER_NOTIFICATIONS_H\n+#define BITCOIN_NODE_CHAINSTATEMANAGER_NOTIFICATIONS_H\n+\n+#include <kernel/chainstatemanager_opts.h>\n+\n+namespace node {\n+kernel::ChainstateManagerNotificationCallbacks DefaultChainstateManagerNotifications();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192715879",
      "id" : 1192715879,
      "in_reply_to_id" : 1192295222,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII585HF2Zn",
      "original_commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/node/chainstatemanager_notifications.h",
      "position" : 11,
      "pull_request_review_id" : 1425030271,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192715879/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-12T19:08:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192715879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192780239"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192780239"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, I think that's preferable. Just pass `const ChainstateNotifications&` everywhere and don't have a lot of different awkward notification types",
      "commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "created_at" : "2023-05-12T20:46:44Z",
      "diff_hunk" : "@@ -0,0 +1,14 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_NODE_CHAINSTATEMANAGER_NOTIFICATIONS_H\n+#define BITCOIN_NODE_CHAINSTATEMANAGER_NOTIFICATIONS_H\n+\n+#include <kernel/chainstatemanager_opts.h>\n+\n+namespace node {\n+kernel::ChainstateManagerNotificationCallbacks DefaultChainstateManagerNotifications();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192780239",
      "id" : 1192780239,
      "in_reply_to_id" : 1192295222,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HGGHP",
      "original_commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/node/chainstatemanager_notifications.h",
      "position" : null,
      "pull_request_review_id" : 1425134568,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192780239/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-12T22:41:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192780239",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the suggestions @ryanofsky! \r\n\r\nUpdated 0b159b9256c214a289135ca7bfaf70e48ab28e20 -> 63e915af5a437d36abdd79a1b90fed2395086589 ([chainstateRmKernelUiInterface_0](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_0) -> [chainstateRmKernelUiInterface_1](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_1), [compare](https://github.com/TheCharlatan/bitcoin/compare/chainstateRmKernelUiInterface_0..chainstateRmKernelUiInterface_1)).\r\n\r\n* Re-worked the commits as suggested by @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192264695) by changing the approach from passing around lambdas to using polymorphisms of a virtual class.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192295222), renaming `chainstatemanager_notifications` to `validation_notifications`.\r\n* Re-worked the last commit as suggested by @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192290165), by moving away from wrapping `InitError` to implementing a `FatalError` method, replacing the `AbortNode` function in `shutdown`. This is also a similar approach to the existing `FatalErrorf` method in `index/base.cpp`\r\n* Added a commit renaming `FatalError` to `FatalErrorf` in `index/base.cpp` to better distinguish it from the new `FatalError` function and not let the format string linter trip up on it.\r\n* Made the `ChainstateManagerOpts` notification member a `shared_ptr` in order to allow the option struct to be safely re-used for multiple `ChainstateManager`s",
      "created_at" : "2023-05-13T17:24:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1546714913",
      "id" : 1546714913,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cMP8h",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546714913/reactions"
      },
      "updated_at" : "2023-05-13T17:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546714913",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2023-05-14T10:53:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1546869753",
      "id" : 1546869753,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cM1v5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546869753/reactions"
      },
      "updated_at" : "2023-05-14T10:53:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546869753",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193133568"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193133568"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Shouldn't this change be moved to the first commit?",
      "commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "created_at" : "2023-05-14T11:58:55Z",
      "diff_hunk" : "@@ -1034,13 +1036,15 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         ChainstateManager::Options chainman_opts_dummy{\n             .chainparams = chainparams,\n             .datadir = args.GetDataDirNet(),\n+            .notifications = std::make_shared<ValidationNotificationsImpl>(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193133568",
      "id" : 1193133568,
      "line" : 1039,
      "node_id" : "PRRC_kwDOABII585HHcYA",
      "original_commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "original_line" : 1039,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 36,
      "pull_request_review_id" : 1425537905,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193133568/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-14T11:58:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193133568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193134480"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193134480"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "We also don't set other params, like `adjusted_time_callback` in the dummy opts, since they are not required to read the args into the struct. The commit where this is changed, adds it because the `BlockManager::Options` requires a reference to the notifications starting at that commit.",
      "commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "created_at" : "2023-05-14T12:04:23Z",
      "diff_hunk" : "@@ -1034,13 +1036,15 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         ChainstateManager::Options chainman_opts_dummy{\n             .chainparams = chainparams,\n             .datadir = args.GetDataDirNet(),\n+            .notifications = std::make_shared<ValidationNotificationsImpl>(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193134480",
      "id" : 1193134480,
      "in_reply_to_id" : 1193133568,
      "line" : 1039,
      "node_id" : "PRRC_kwDOABII585HHcmQ",
      "original_commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "original_line" : 1039,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 36,
      "pull_request_review_id" : 1425538799,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193134480/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-14T12:04:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193134480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193141876"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193141876"
         }
      },
      "author_association" : "MEMBER",
      "body" : "FWIW, gcc emits a warning here.",
      "commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "created_at" : "2023-05-14T12:53:09Z",
      "diff_hunk" : "@@ -1034,13 +1036,15 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         ChainstateManager::Options chainman_opts_dummy{\n             .chainparams = chainparams,\n             .datadir = args.GetDataDirNet(),\n+            .notifications = std::make_shared<ValidationNotificationsImpl>(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193141876",
      "id" : 1193141876,
      "in_reply_to_id" : 1193133568,
      "line" : 1039,
      "node_id" : "PRRC_kwDOABII585HHeZ0",
      "original_commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "original_line" : 1039,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 36,
      "pull_request_review_id" : 1425546113,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193141876/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-14T12:53:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193141876",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193146924"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193146924"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for following up, will patch.",
      "commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "created_at" : "2023-05-14T13:23:13Z",
      "diff_hunk" : "@@ -1034,13 +1036,15 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         ChainstateManager::Options chainman_opts_dummy{\n             .chainparams = chainparams,\n             .datadir = args.GetDataDirNet(),\n+            .notifications = std::make_shared<ValidationNotificationsImpl>(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193146924",
      "id" : 1193146924,
      "in_reply_to_id" : 1193133568,
      "line" : 1039,
      "node_id" : "PRRC_kwDOABII585HHfos",
      "original_commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "original_line" : 1039,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 36,
      "pull_request_review_id" : 1425550586,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193146924/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-14T13:23:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193146924",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Re https://github.com/bitcoin/bitcoin/pull/27636#pullrequestreview-1425535676\r\n\r\n> In commit [7355679](https://github.com/bitcoin/bitcoin/commit/73556797ab9c44038994954b945db996642656d2):\r\n> \r\n> ```diff\r\n> --- a/src/validation.cpp\r\n> +++ b/src/validation.cpp\r\n> @@ -4659,7 +4659,7 @@ void Chainstate::LoadExternalBlockFile(\r\n>                      }\r\n>                  }\r\n>  \r\n> -                NotifyHeaderTip(*this);\r\n> +                ::NotifyHeaderTip(*this);\r\n>  \r\n>                  if (!blocks_with_unknown_parent) continue;\r\n>  \r\n> ``` \r\nI added the global scope resolution where it was required, because of the naming conflict with the `ChainstateManager` method. These here are methods of `Chainstate` and don't have a naming conflict. Is adding them good practice for consistency's sake?",
      "created_at" : "2023-05-14T13:40:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1546903132",
      "id" : 1546903132,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cM95c",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546903132/reactions"
      },
      "updated_at" : "2023-05-14T13:40:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546903132",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193161217"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193161217"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should these methods be non-`const`?",
      "commit_id" : "97b0e28d6f5e86e8c7ee0775d22cd923dabca09d",
      "created_at" : "2023-05-14T14:52:10Z",
      "diff_hunk" : "@@ -0,0 +1,35 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_VALIDATION_NOTIFICATIONS_INTERFACE_H\n+#define BITCOIN_KERNEL_VALIDATION_NOTIFICATIONS_INTERFACE_H\n+\n+#include <util/translation.h>\n+\n+#include <cstdint>\n+#include <string>\n+\n+class CBlockIndex;\n+enum class SynchronizationState;\n+\n+namespace kernel {\n+\n+/**\n+ * A base class defining functions for notifying about certain validation\n+ * events.\n+ */\n+class ValidationNotifications\n+{\n+public:\n+    virtual ~ValidationNotifications(){};\n+\n+    virtual void notifyBlockTip(SynchronizationState state, CBlockIndex* index) = 0;\n+    virtual void notifyHeaderTip(SynchronizationState state, int64_t height, int64_t timestamp, bool presync) = 0;\n+    virtual void showProgress(const std::string& title, int nProgress, bool resume_possible) = 0;\n+    virtual void doWarning(const bilingual_str& warning) = 0;\n+    virtual bool fatalError(const std::string& strMessage, bilingual_str user_message = {}) = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193161217",
      "id" : 1193161217,
      "line" : 31,
      "node_id" : "PRRC_kwDOABII585HHjIB",
      "original_commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "original_line" : 31,
      "original_position" : 31,
      "original_start_line" : 27,
      "path" : "src/kernel/validation_notifications_interface.h",
      "position" : 31,
      "pull_request_review_id" : 1425563317,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193161217/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 27,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-05-14T14:52:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193161217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193161280"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193161280"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: EOL?",
      "commit_id" : "97b0e28d6f5e86e8c7ee0775d22cd923dabca09d",
      "created_at" : "2023-05-14T14:52:33Z",
      "diff_hunk" : "@@ -0,0 +1,35 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_VALIDATION_NOTIFICATIONS_INTERFACE_H\n+#define BITCOIN_KERNEL_VALIDATION_NOTIFICATIONS_INTERFACE_H\n+\n+#include <util/translation.h>\n+\n+#include <cstdint>\n+#include <string>\n+\n+class CBlockIndex;\n+enum class SynchronizationState;\n+\n+namespace kernel {\n+\n+/**\n+ * A base class defining functions for notifying about certain validation\n+ * events.\n+ */\n+class ValidationNotifications\n+{\n+public:\n+    virtual ~ValidationNotifications(){};\n+\n+    virtual void notifyBlockTip(SynchronizationState state, CBlockIndex* index) = 0;\n+    virtual void notifyHeaderTip(SynchronizationState state, int64_t height, int64_t timestamp, bool presync) = 0;\n+    virtual void showProgress(const std::string& title, int nProgress, bool resume_possible) = 0;\n+    virtual void doWarning(const bilingual_str& warning) = 0;\n+    virtual bool fatalError(const std::string& strMessage, bilingual_str user_message = {}) = 0;\n+};\n+} // namespace kernel\n+\n+#endif // BITCOIN_KERNEL_VALIDATION_NOTIFICATIONS_INTERFACE_H",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193161280",
      "id" : 1193161280,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HHjJA",
      "original_commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "original_line" : 35,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/kernel/validation_notifications_interface.h",
      "position" : null,
      "pull_request_review_id" : 1425563317,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193161280/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-14T14:52:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193161280",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193165783"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193165783"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, as far as I am aware, `const` virtual methods are bad practice. See: https://github.com/bitcoin/bitcoin/pull/25337#discussion_r916367659.",
      "commit_id" : "97b0e28d6f5e86e8c7ee0775d22cd923dabca09d",
      "created_at" : "2023-05-14T15:23:24Z",
      "diff_hunk" : "@@ -0,0 +1,35 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_VALIDATION_NOTIFICATIONS_INTERFACE_H\n+#define BITCOIN_KERNEL_VALIDATION_NOTIFICATIONS_INTERFACE_H\n+\n+#include <util/translation.h>\n+\n+#include <cstdint>\n+#include <string>\n+\n+class CBlockIndex;\n+enum class SynchronizationState;\n+\n+namespace kernel {\n+\n+/**\n+ * A base class defining functions for notifying about certain validation\n+ * events.\n+ */\n+class ValidationNotifications\n+{\n+public:\n+    virtual ~ValidationNotifications(){};\n+\n+    virtual void notifyBlockTip(SynchronizationState state, CBlockIndex* index) = 0;\n+    virtual void notifyHeaderTip(SynchronizationState state, int64_t height, int64_t timestamp, bool presync) = 0;\n+    virtual void showProgress(const std::string& title, int nProgress, bool resume_possible) = 0;\n+    virtual void doWarning(const bilingual_str& warning) = 0;\n+    virtual bool fatalError(const std::string& strMessage, bilingual_str user_message = {}) = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193165783",
      "id" : 1193165783,
      "in_reply_to_id" : 1193161217,
      "line" : 31,
      "node_id" : "PRRC_kwDOABII585HHkPX",
      "original_commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "original_line" : 31,
      "original_position" : 31,
      "original_start_line" : 27,
      "path" : "src/kernel/validation_notifications_interface.h",
      "position" : 31,
      "pull_request_review_id" : 1425567541,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193165783/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 27,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-05-14T15:23:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193165783",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the review @hebasto,\r\n\r\nUpdated 63e915af5a437d36abdd79a1b90fed2395086589 -> 97b0e28d6f5e86e8c7ee0775d22cd923dabca09d ([chainstateRmKernelUiInterface_1](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_1) -> [chainstateRmKernelUiInterface_2](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_2), [compare](https://github.com/TheCharlatan/bitcoin/compare/chainstateRmKernelUiInterface_1..chainstateRmKernelUiInterface_2)).\r\n\r\n* Addressed @hebasto [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193161280), adding EOL.\r\n* Addressed @hebasto [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193133568), correcting initialization warning in the first commit.\r\n* Addressed @hebasto [comment](https://github.com/bitcoin/bitcoin/pull/27636#pullrequestreview-1425535676), correcting IWYU in last commit.\r\n* Slightly improved commit messages (s/option/options/).",
      "created_at" : "2023-05-14T15:35:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1546926451",
      "id" : 1546926451,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cNDlz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546926451/reactions"
      },
      "updated_at" : "2023-05-14T15:35:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546926451",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "nit: https://api.cirrus-ci.com/v1/task/4542005133443072/logs/ci.log:\r\n```\r\nnode/validation_notifications.h should add these lines:\r\nenum class SynchronizationState;\r\n```\r\n\r\n```\r\nnode/validation_notifications.cpp should add these lines:\r\nenum class SynchronizationState;\r\n\r\nnode/validation_notifications.cpp should remove these lines:\r\n- #include <kernel/validation_notifications_interface.h>\r\n```\r\n",
      "created_at" : "2023-05-14T16:53:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1546945193",
      "id" : 1546945193,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cNIKp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546945193/reactions"
      },
      "updated_at" : "2023-05-14T16:53:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546945193",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the review @hebasto,\r\n\r\nUpdated 97b0e28d6f5e86e8c7ee0775d22cd923dabca09d -> 2f9c2d245360b3fad6d469a76c2916d75b027b57 ([chainstateRmKernelUiInterface_2](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_2) -> [chainstateRmKernelUiInterface_3](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_3), [compare](https://github.com/TheCharlatan/bitcoin/compare/chainstateRmKernelUiInterface_2..chainstateRmKernelUiInterface_3)).\r\n\r\n* Addressed @hebasto [comment](https://github.com/bitcoin/bitcoin/pull/27636#pullrequestreview-1425576361), changed to scripted diff and fixed commit message.\r\n* Addressed @hebasto [comment](https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1546945193), fixed IWYU (sorry, I had an outdated version installed locally).",
      "created_at" : "2023-05-14T17:59:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1546961637",
      "id" : 1546961637,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cNMLl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546961637/reactions"
      },
      "updated_at" : "2023-05-14T17:59:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546961637",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193811410"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193811410"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In PR version 2f9c2d245360b3fad6d469a76c2916d75b027b57:\r\n\r\nThis is a notifications interface, so I don't think these methods should be `= 0` pure virtual. If you defined them to do nothing by default `{}` that should make the notification interface easier to use because you don't have to implement handlers for notifications you do not care about. Also it can make the interface more future proof because adding new notification types will not break existing code.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-15T13:07:01Z",
      "diff_hunk" : "@@ -0,0 +1,35 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_VALIDATION_NOTIFICATIONS_INTERFACE_H\n+#define BITCOIN_KERNEL_VALIDATION_NOTIFICATIONS_INTERFACE_H\n+\n+#include <util/translation.h>\n+\n+#include <cstdint>\n+#include <string>\n+\n+class CBlockIndex;\n+enum class SynchronizationState;\n+\n+namespace kernel {\n+\n+/**\n+ * A base class defining functions for notifying about certain validation\n+ * events.\n+ */\n+class ValidationNotifications\n+{\n+public:\n+    virtual ~ValidationNotifications(){};\n+\n+    virtual void notifyBlockTip(SynchronizationState state, CBlockIndex* index) = 0;\n+    virtual void notifyHeaderTip(SynchronizationState state, int64_t height, int64_t timestamp, bool presync) = 0;\n+    virtual void showProgress(const std::string& title, int nProgress, bool resume_possible) = 0;\n+    virtual void doWarning(const bilingual_str& warning) = 0;\n+    virtual bool fatalError(const std::string& strMessage, bilingual_str user_message = {}) = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193811410",
      "id" : 1193811410,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HKB3S",
      "original_commit_id" : "2f9c2d245360b3fad6d469a76c2916d75b027b57",
      "original_line" : 31,
      "original_position" : 31,
      "original_start_line" : 27,
      "path" : "src/kernel/validation_notifications_interface.h",
      "position" : null,
      "pull_request_review_id" : 1426519811,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193811410/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-05-15T15:43:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193811410",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193855223"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193855223"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Pass BlockNotify in options to ChainstateManager\" (620faa21ce0210dddca243511b7674c3b8f4e901)\r\n\r\nWould suggest `ValidationNotifications& notifications` or `ValdiataionNotifications* notifcations{nullptr}` here, and adding a `std::unique_ptr<node::ValidationNotificationsImpl>` member to `NodeContext`. I don't think this should be a shared pointer and also don't think it should be const.\r\n\r\nOn const: This is an options struct that is supposed to be filled with options set by external applications. We don't know where those options are coming from. The might be hardcoded or coming from the environment or user configuration. Make struct members const just makes the struct more awkward to fill out and harder for application code to be written in a modular way since it requires the option values to be known in advance of creating the struct. Generally it would be good to avoid const members in options structs where where possible. Having const struct members can also be bad for efficiency because it can make the struct impossible to move from (though it doesn't matter in this case because moving is not much more efficient than copying for this type).\r\n\r\nOn shared_ptr: I think shared_ptr semantics are more complicated than what we want here. The other places that use `shared_ptr` for notifications (in `RegisterSharedValidationInterface` and `interfaces::Chain::handleNotifications`) use it because wallets can be loaded and unloaded at any time, and using shared_ptr lets wallets register for notifications and get unloaded and deleted without having to wait for unregister call (i.e. it lets the unregister function be non-blocking). But there should be no need for that complexity here. Kernel applications should be able to provide a notifications callback that is as long lived as the validation code is and not have complicated lifetimes.\r\n\r\nAdding a `std::unique_ptr<node::ValidationNotificationsImpl>` member to `NodeContext` would also be good for our own code to let us stop relying on the `uiInterface` global to receive notifications in the future.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-15T13:39:51Z",
      "diff_hunk" : "@@ -42,6 +44,7 @@ struct ChainstateManagerOpts {\n     DBOptions block_tree_db{};\n     DBOptions coins_db{};\n     CoinsViewOptions coins_view{};\n+    const std::shared_ptr<ValidationNotifications> notifications;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193855223",
      "id" : 1193855223,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HKMj3",
      "original_commit_id" : "620faa21ce0210dddca243511b7674c3b8f4e901",
      "original_line" : 47,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/chainstatemanager_opts.h",
      "position" : null,
      "pull_request_review_id" : 1426519811,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193855223/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-15T15:43:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193855223",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193883274"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193883274"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Pass BlockNotify in options to ChainstateManager\" (620faa21ce0210dddca243511b7674c3b8f4e901)\r\n\r\nI don't see the point of having one line ChainstateManager wrapper methods for all the notifications. It seems like they just make the call sequence harder to follow, make code hard coder to grep, and create name conflicts with other functions that have to be overcome with `::` specifiers and the `FatalErrorf` renaming.\r\n\r\nThe one benefit of these wrapper methods is that they reduce some verbosity at call sites and avoid the need to type `m_options.notifications` everywhere. But I think think adding a simple accessor `kernel::ValidationNotifications& notifications() const { return *Assert(m_options.notifications); } ` would be a just as good for that purpose.\r\n\r\nEDIT: I see an upcoming commit adds a GetNotifications() method, so I think calls to these wrapper methods could just be replaced by calls to that method, and these wrappers could go away.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-15T13:57:24Z",
      "diff_hunk" : "@@ -3568,6 +3568,11 @@ bool CheckBlock(const CBlock& block, BlockValidationState& state, const Consensu\n     return true;\n }\n \n+void ChainstateManager::NotifyBlockTip(SynchronizationState state, CBlockIndex* index) const\n+{\n+    return m_options.notifications->notifyBlockTip(state, index);\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193883274",
      "id" : 1193883274,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HKTaK",
      "original_commit_id" : "620faa21ce0210dddca243511b7674c3b8f4e901",
      "original_line" : 3547,
      "original_position" : 25,
      "original_start_line" : 3571,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 1426519811,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193883274/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-05-15T15:43:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193883274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193904693"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193904693"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Pass BlockNotify in options to ChainstateManager\" (620faa21ce0210dddca243511b7674c3b8f4e901)\r\n\r\nNote: After this commit, there is only one line of code sending the `uiInterface.NotifyBlockTip` global boost signal, so it should be easier to drop the signal, probably replacing it with a `std::list<NotifyHeaderTipFn>` or similar member. Other boost signals could be eliminated after this in a similar way.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-15T14:12:49Z",
      "diff_hunk" : "@@ -0,0 +1,16 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <node/validation_notifications.h>\n+\n+#include <node/interface_ui.h>\n+\n+namespace node {\n+\n+void ValidationNotificationsImpl::notifyBlockTip(SynchronizationState state, CBlockIndex* index)\n+{\n+    uiInterface.NotifyBlockTip(state, index);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193904693",
      "id" : 1193904693,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HKYo1",
      "original_commit_id" : "620faa21ce0210dddca243511b7674c3b8f4e901",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/validation_notifications.cpp",
      "position" : null,
      "pull_request_review_id" : 1426519811,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193904693/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-15T15:43:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193904693",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193943783"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193943783"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Pass ShowProgress in options to ChainstateManager\" (8fe776b303dddf9b3f1381d263bba6c913591dde)\r\n\r\nWould encourage using modern variable names in new code, especially if adding an API that is supposed to be part of the kernel interface. Specifically would suggest renaming `nProgress` to `progress_percent` or something like that here.\r\n\r\nAlso since this is a kernel API and we don't know what the application UI might be, maybe calling it \"notify progress\" might be better than \"show progress\" and more consistent with other names.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-15T14:40:46Z",
      "diff_hunk" : "@@ -93,6 +94,10 @@ int main(int argc, char* argv[])\n         {\n             std::cout << \"Header tip changed: \" << height << \", \" << timestamp << \", \" << presync << std::endl;\n         }\n+        void showProgress(const std::string& title, int nProgress, bool resume_possible) override",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193943783",
      "id" : 1193943783,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HKiLn",
      "original_commit_id" : "8fe776b303dddf9b3f1381d263bba6c913591dde",
      "original_line" : 97,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 1426519811,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193943783/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-15T15:43:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193943783",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193951680"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193951680"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Pass DoWarning in options to ChainstateManager\" (bcd417ad1847cd4c93bffbc9d8a32255e7f2b156)\r\n\r\nI think \"notify warning\" would be more descriptive than \"do warning\" and more consistent with other methods.\r\n\r\nAlso commit title \"Pass DoWarning in options to ChainstateManager\" maybe should be updated to something like \"Add NotifyWarning kernel notification\"",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-15T14:46:37Z",
      "diff_hunk" : "@@ -98,6 +98,10 @@ int main(int argc, char* argv[])\n         {\n             std::cout << \"Progress: \" << title << \", \" << nProgress << \", \" << resume_possible << std::endl;\n         }\n+        void doWarning(const bilingual_str& warning) override",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193951680",
      "id" : 1193951680,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HKkHA",
      "original_commit_id" : "bcd417ad1847cd4c93bffbc9d8a32255e7f2b156",
      "original_line" : 101,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 1426519811,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193951680/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-15T15:43:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193951680",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193957340"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193957340"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Pass BlockNotify in options to ChainstateManager\" (620faa21ce0210dddca243511b7674c3b8f4e901)\r\n\r\nI'd consider calling this class just `kernel::Notifications` not `kernel::ValidationNotifications`. I think it's not clear how much functionality is going to be available in the kernel, and whether every notification it will ever need to send will be related to validation. If kernel needs to send other notifications that aren't related to validation, I think it would be good if it were possible to send them through the same interface.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-15T14:50:45Z",
      "diff_hunk" : "@@ -0,0 +1,26 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_VALIDATION_NOTIFICATIONS_INTERFACE_H\n+#define BITCOIN_KERNEL_VALIDATION_NOTIFICATIONS_INTERFACE_H\n+\n+class CBlockIndex;\n+enum class SynchronizationState;\n+\n+namespace kernel {\n+\n+/**\n+ * A base class defining functions for notifying about certain validation\n+ * events.\n+ */\n+class ValidationNotifications",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193957340",
      "id" : 1193957340,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HKlfc",
      "original_commit_id" : "620faa21ce0210dddca243511b7674c3b8f4e901",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/kernel/validation_notifications_interface.h",
      "position" : null,
      "pull_request_review_id" : 1426519811,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193957340/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-15T15:43:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193957340",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193969953"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193969953"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Pass DoWarning in options to ChainstateManager\" (bcd417ad1847cd4c93bffbc9d8a32255e7f2b156)\r\n\r\nBehavior isn't changing here, but it seems strange that `fWarned` check is only letting the warning notification to be sent and the GUI progress bar to be updated once over the lifetime of the application. May be something to look into in a followup.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-15T14:59:47Z",
      "diff_hunk" : "@@ -4,7 +4,51 @@\n \n #include <node/validation_notifications.h>\n \n+#if defined(HAVE_CONFIG_H)\n+#include <config/bitcoin-config.h>\n+#endif\n+\n+#include <common/args.h>\n #include <node/interface_ui.h>\n+#include <util/strencodings.h>\n+#include <util/string.h>\n+#include <util/system.h>\n+#include <util/translation.h>\n+#include <warnings.h>\n+\n+#include <cstdint>\n+#include <string>\n+#include <thread>\n+\n+static void AlertNotify(const std::string& strMessage)\n+{\n+    uiInterface.NotifyAlertChanged();\n+#if HAVE_SYSTEM\n+    std::string strCmd = gArgs.GetArg(\"-alertnotify\", \"\");\n+    if (strCmd.empty()) return;\n+\n+    // Alert text should be plain ascii coming from a trusted source, but to\n+    // be safe we first strip anything not in safeChars, then add single quotes around\n+    // the whole string before passing it to the shell:\n+    std::string singleQuote(\"'\");\n+    std::string safeStatus = SanitizeString(strMessage);\n+    safeStatus = singleQuote+safeStatus+singleQuote;\n+    ReplaceAll(strCmd, \"%s\", safeStatus);\n+\n+    std::thread t(runCommand, strCmd);\n+    t.detach(); // thread runs free\n+#endif\n+}\n+\n+static void DoWarning(const bilingual_str& warning)\n+{\n+    static bool fWarned = false;\n+    SetMiscWarning(warning);\n+    if (!fWarned) {\n+        AlertNotify(warning.original);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193969953",
      "id" : 1193969953,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HKokh",
      "original_commit_id" : "bcd417ad1847cd4c93bffbc9d8a32255e7f2b156",
      "original_line" : 48,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/node/validation_notifications.cpp",
      "position" : null,
      "pull_request_review_id" : 1426519811,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193969953/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-15T15:43:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193969953",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193977100"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193977100"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Pass FatalError in options to ChainstateManager\" (2f9c2d245360b3fad6d469a76c2916d75b027b57)\r\n\r\nI think this method should just be printing the messages to cout, letting error handling code below clean up after the failure. The chainstate example program shouldn't need to be logging things and calling StartShutdown.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-15T15:05:08Z",
      "diff_hunk" : "@@ -102,6 +104,18 @@ int main(int argc, char* argv[])\n         {\n             std::cout << \"Warning: \" << warning.original << std::endl;\n         }\n+\n+        bool fatalError(const std::string& strMessage, bilingual_str user_message) override\n+        {\n+            SetMiscWarning(Untranslated(strMessage));\n+            LogPrintf(\"*** %s\\n\", strMessage);\n+            if (user_message.empty()) {\n+                user_message = _(\"A fatal internal error occurred, see debug.log for details\");\n+            }\n+            std::cout << \"Warning: \" << user_message.original << std::endl;\n+            StartShutdown();\n+            return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193977100",
      "id" : 1193977100,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HKqUM",
      "original_commit_id" : "2f9c2d245360b3fad6d469a76c2916d75b027b57",
      "original_line" : 117,
      "original_position" : 27,
      "original_start_line" : 110,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 1426519811,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193977100/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-05-15T15:43:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193977100",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1194002643"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1194002643"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Pass FatalError in options to ChainstateManager\" (2f9c2d245360b3fad6d469a76c2916d75b027b57)\r\n\r\nI think this signature should be cleaned up and not be added to kernel like this. Would suggest:\r\n\r\n- Changing `bool` return type to `void`. The return value is never used and the only value that is ever returned is false. Having the return value makes the interface confusing because it's unclear how the value even could be used.\r\n- Renaming `strMessage` parameter to `debug_message` to modernize the name and distinguish the technical error message which is meant to go to the debug log from the translated user message.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-15T15:25:11Z",
      "diff_hunk" : "@@ -27,6 +28,7 @@ class ValidationNotifications\n     virtual void notifyHeaderTip(SynchronizationState state, int64_t height, int64_t timestamp, bool presync) = 0;\n     virtual void showProgress(const std::string& title, int nProgress, bool resume_possible) = 0;\n     virtual void doWarning(const bilingual_str& warning) = 0;\n+    virtual bool fatalError(const std::string& strMessage, bilingual_str user_message = {}) = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1194002643",
      "id" : 1194002643,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HKwjT",
      "original_commit_id" : "2f9c2d245360b3fad6d469a76c2916d75b027b57",
      "original_line" : 31,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/kernel/validation_notifications_interface.h",
      "position" : null,
      "pull_request_review_id" : 1426519811,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1194002643/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-15T15:43:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1194002643",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1194151828"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1194151828"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the time you took for these detailed comments. Fleshing this out to a more proper kernel interface sounds good to me. How about moving `ValidationNotifications` to the `KernelContext` instead? Or does that conflict with the vision you have for getting rid of `uiInterface` global?",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-15T17:37:31Z",
      "diff_hunk" : "@@ -42,6 +44,7 @@ struct ChainstateManagerOpts {\n     DBOptions block_tree_db{};\n     DBOptions coins_db{};\n     CoinsViewOptions coins_view{};\n+    const std::shared_ptr<ValidationNotifications> notifications;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1194151828",
      "id" : 1194151828,
      "in_reply_to_id" : 1193855223,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HLU-U",
      "original_commit_id" : "620faa21ce0210dddca243511b7674c3b8f4e901",
      "original_line" : 47,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/chainstatemanager_opts.h",
      "position" : null,
      "pull_request_review_id" : 1427047465,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1194151828/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-15T17:37:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1194151828",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1194168060"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1194168060"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Thank you for the time you took for these detailed comments. Fleshing this out to a more proper kernel interface sounds good to me. How about moving `ValidationNotifications` to the `KernelContext` instead? Or does that conflict with the vision you have for getting rid of `uiInterface` global?\r\n\r\nHmm, It doesn't make sense to me that an object which is supposed to receive notifications from the kernel would be owned by the kernel. Outside code that wants to receive notifications should be able to receive them and manage its own memory without transferring ownership.\r\n\r\nAlso yes the NotificationImpl can basically be a replacement for the uiInterface global, so it makes sense to put it in NodeContext or some place similar. It would be weird to put in the kernel and have to `static_cast` it when we can just store it directly in NodeContext.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-15T17:52:11Z",
      "diff_hunk" : "@@ -42,6 +44,7 @@ struct ChainstateManagerOpts {\n     DBOptions block_tree_db{};\n     DBOptions coins_db{};\n     CoinsViewOptions coins_view{};\n+    const std::shared_ptr<ValidationNotifications> notifications;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1194168060",
      "id" : 1194168060,
      "in_reply_to_id" : 1193855223,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HLY78",
      "original_commit_id" : "620faa21ce0210dddca243511b7674c3b8f4e901",
      "original_line" : 47,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/chainstatemanager_opts.h",
      "position" : null,
      "pull_request_review_id" : 1427072171,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1194168060/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-15T17:52:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1194168060",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the detailed comments on your review @ryanofsky! Very happy to see this being fleshed out into a more general and proper kernel notification interface.\r\n\r\nUpdated 2f9c2d245360b3fad6d469a76c2916d75b027b57 -> 2c58fbf816d73395167a3046c4ce957829bf45f9 ([chainstateRmKernelUiInterface_3](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_3) -> [chainstateRmKernelUiInterface_4](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_4), [compare](https://github.com/TheCharlatan/bitcoin/compare/chainstateRmKernelUiInterface_3..chainstateRmKernelUiInterface_4)).\r\n\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193811410), removing pure virtual (`=0`) declaration.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193855223), moving notifications to the node context and declaring them as a `unique_ptr`. The `ChainstateManagerOpts` now takes a reference of `kernel::Notifications`.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193883274), removing wrapper methods from `ChainstateManager` and instead only using a simple getter. This allowed for removal of the extra `::` qualifiers.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193943783), renaming `showProgress` to `notifyProgress` and `progress_percent` instead of `nProgress`.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193951680), renaming `doWarning` to `notifyWarning`.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193951680), improving / correcting the commit messages.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193957340), renaming `ValidationNotifications` to `KernelNotifications`, including file names, variable names and virtual class name.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193977100), removing unneeded `fatalError` handling code in `bitcoin-chainstate.cpp`.\r\n* Addressed @ryanofsky's [cmment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1194002643), changing `fatalError` return type to from `bool` to `void`, renamed `strMessage` to `debug_message`.\r\n* Added a commit removing the `goto epilogue` statement in `bitcoin-chainstate` and replacing it with a lambda function that takes care of program teardown. This function is now called in case of a `fatalError` notification. Before the patches in this pull request, if a call to `AbortNode` was encountered in `bitcoin-chainstate`, it could lead to it it either being ignored, or the process crashing (core dumped).",
      "created_at" : "2023-05-16T12:53:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1549605549",
      "id" : 1549605549,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cXRqt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1549605549/reactions"
      },
      "updated_at" : "2023-05-16T12:53:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1549605549",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1195307708"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1195307708"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Add fatalError to notifications\" (155f8de067db5d7b9ebf6de0b30729143cc9c87f)\r\n\r\nIt seems like this message should be called \"notify fatal\" to be consistent with other notification methods.\r\n\r\nAlternately, it seems like word \"notify\" in all the method names is pretty name is pretty redundant and could be dropped. The methods are always called with `notifications.` or `GetNotifications()` prefixes so there is not really a context where repeating the word \"notify\" clarifies anything",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-16T15:02:06Z",
      "diff_hunk" : "@@ -25,6 +25,8 @@ class KernelNotifications : public kernel::Notifications\n     void notifyProgress(const std::string& title, int progress_percent, bool resume_possible) override;\n \n     void notifyWarning(const bilingual_str& warning) override;\n+\n+    void fatalError(const std::string& debug_message, bilingual_str user_message = {}) override;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1195307708",
      "id" : 1195307708,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HPvK8",
      "original_commit_id" : "155f8de067db5d7b9ebf6de0b30729143cc9c87f",
      "original_line" : 29,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/kernel_notifications.h",
      "position" : null,
      "pull_request_review_id" : 1428804291,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1195307708/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-16T17:08:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1195307708",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Re https://github.com/bitcoin/bitcoin/pull/27636#pullrequestreview-1428804291\r\n> I think the last commit could just be dropped, or I don't understand what problem it is solving.\r\n\r\nThe rationale for the commit was to preserve `bitcoin-chainstate` shutting down when a fatal error is encountered. I thought this through again, and I agree that this does not make a lot of sense. The function where this fatal error was encountered should always be bubbling it up anyway, so this is not needed. Dropping the commit.",
      "created_at" : "2023-05-16T17:46:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1550107951",
      "id" : 1550107951,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cZMUv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1550107951/reactions"
      },
      "updated_at" : "2023-05-16T17:51:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1550107951",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the review,\r\n\r\nUpdated 2c58fbf816d73395167a3046c4ce957829bf45f9 -> b29eab3fc68de28fe2aa67700fd99c6744e37f61 ([chainstateRmKernelUiInterface_4](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_4) -> [chainstateRmKernelUiInterface_5](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_5), [compare](https://github.com/TheCharlatan/bitcoin/compare/chainstateRmKernelUiInterface_4..chainstateRmKernelUiInterface_5)).\r\n\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1195307708), dropping `notify` prefix from `kernel::Notifications` methods\r\n* Dropped the last commit",
      "created_at" : "2023-05-16T19:43:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1550261815",
      "id" : 1550261815,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cZx43",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1550261815/reactions"
      },
      "updated_at" : "2023-05-16T20:20:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1550261815",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-05-17T12:40:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1551321542",
      "id" : 1551321542,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cd0nG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1551321542/reactions"
      },
      "updated_at" : "2023-05-17T12:40:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1551321542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased b29eab3fc68de28fe2aa67700fd99c6744e37f61 -> 0b88c307a8ed81705cf8e6fb6332fdf969eb0e2e ([chainstateRmKernelUiInterface_5](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_5) -> [chainstateRmKernelUiInterface_6](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_6), [compare](https://github.com/TheCharlatan/bitcoin/compare/chainstateRmKernelUiInterface_5..chainstateRmKernelUiInterface_6)).\r\n* Fixed conflict with https://github.com/bitcoin/bitcoin/pull/27571",
      "created_at" : "2023-05-17T13:08:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1551363803",
      "id" : 1551363803,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cd-7b",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1551363803/reactions"
      },
      "updated_at" : "2023-05-17T13:08:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1551363803",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196568945"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196568945"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Add notification interface\" (c6f2fbef2c8ecc0ded3abb9ab2fdd5369e954d52)\r\n\r\nIt would be good to write this accessor as an inline method `kernel::Notifications& GetNotifications() const { return  m_options.notifications; }` for discoverability and consistency with other accessors above. Could also drop \"Get\" prefix since the other accessors don't seem to have it, but whatever you prefer is fine.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-17T13:58:22Z",
      "diff_hunk" : "@@ -956,6 +956,8 @@ class ChainstateManager\n     const arith_uint256& MinimumChainWork() const { return *Assert(m_options.minimum_chain_work); }\n     const uint256& AssumedValidBlock() const { return *Assert(m_options.assumed_valid_block); }\n \n+    kernel::Notifications& GetNotifications() const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196568945",
      "id" : 1196568945,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HUjFx",
      "original_commit_id" : "c6f2fbef2c8ecc0ded3abb9ab2fdd5369e954d52",
      "original_line" : 959,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/validation.h",
      "position" : null,
      "pull_request_review_id" : 1430775316,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196568945/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-17T14:48:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196568945",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196623448"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196623448"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Move system from util to common library\" (0a7b3e5058b58c448bbc473ffb347910d781c3bd)\r\n\r\nI think it makes sense to keep `util::insert` and `util::AnyPtr` functions in `util/`, not `common/` as these are header-only template functions with no dependencies, and there's no particular reason they shouldn't be used by kernel code even if they aren't used right now. In terms of functionality they are also more related to other helper functions like `util/overloaded.h` `util/strings.h` `util/time.h` `util/types.h` and `util/vector.h` than to anything in `common/`\r\n\r\nI think ideally the `util::insert` function might move to `util/insert.h` and the `util::AnyPtr` function might move to `util/any.h`, but you could also just leave them in `util/system.h` if that is easier.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-17T14:35:40Z",
      "diff_hunk" : "@@ -3,8 +3,8 @@\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n-#ifndef BITCOIN_UTIL_SYSTEM_H\n-#define BITCOIN_UTIL_SYSTEM_H\n+#ifndef BITCOIN_COMMON_SYSTEM_H\n+#define BITCOIN_COMMON_SYSTEM_H",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196623448",
      "id" : 1196623448,
      "line" : 7,
      "node_id" : "PRRC_kwDOABII585HUwZY",
      "original_commit_id" : "0a7b3e5058b58c448bbc473ffb347910d781c3bd",
      "original_line" : 7,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/common/system.h",
      "position" : 7,
      "pull_request_review_id" : 1430775316,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196623448/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-17T14:48:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196623448",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196627541"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196627541"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Add fatalError method to notifications\" (0b88c307a8ed81705cf8e6fb6332fdf969eb0e2e)\r\n\r\nWould be good to change `bilingual_str` to `const bilingual_str&`. That should also avoid the need to remove the forward declaration and include `#include <util/translation.h>` above.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-17T14:38:34Z",
      "diff_hunk" : "@@ -27,6 +28,7 @@ class Notifications\n     virtual void headerTip(SynchronizationState state, int64_t height, int64_t timestamp, bool presync) {}\n     virtual void progress(const std::string& title, int progress_percent, bool resume_possible) {}\n     virtual void warning(const bilingual_str& warning) {}\n+    virtual void fatalError(const std::string& debug_message, bilingual_str user_message = {}) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196627541",
      "id" : 1196627541,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HUxZV",
      "original_commit_id" : "0b88c307a8ed81705cf8e6fb6332fdf969eb0e2e",
      "original_line" : 31,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/kernel/notifications_interface.h",
      "position" : null,
      "pull_request_review_id" : 1430775316,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196627541/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-17T14:48:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196627541",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196631303"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196631303"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Add fatalError method to notifications\" (0b88c307a8ed81705cf8e6fb6332fdf969eb0e2e)\r\n\r\nWould maybe make `notifications` the first parameter. It seems awkward for it to placed between the debug message and the user message.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-17T14:41:12Z",
      "diff_hunk" : "@@ -103,7 +103,7 @@ void StopScriptCheckWorkerThreads();\n \n CAmount GetBlockSubsidy(int nHeight, const Consensus::Params& consensusParams);\n \n-bool AbortNode(BlockValidationState& state, const std::string& strMessage, const bilingual_str& userMessage = bilingual_str{});\n+bool FatalError(BlockValidationState& state, const std::string& strMessage, kernel::Notifications& notifications, const bilingual_str& userMessage = {});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196631303",
      "id" : 1196631303,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HUyUH",
      "original_commit_id" : "0b88c307a8ed81705cf8e6fb6332fdf969eb0e2e",
      "original_line" : 106,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/validation.h",
      "position" : null,
      "pull_request_review_id" : 1430775316,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196631303/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-17T14:48:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196631303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196711775"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196711775"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Mmh, I was originally thinking of moving `util::insert` to `wallet/walletutil.h` and `util::AnyPtr` to `rpc/util.h` in a follow up after this pull request. I think your suggestion is better though. Moving around these kind of headers depending on which part of the code needs them seems silly. I'll patch this then and will apply your other suggestions.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-17T15:32:47Z",
      "diff_hunk" : "@@ -3,8 +3,8 @@\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n-#ifndef BITCOIN_UTIL_SYSTEM_H\n-#define BITCOIN_UTIL_SYSTEM_H\n+#ifndef BITCOIN_COMMON_SYSTEM_H\n+#define BITCOIN_COMMON_SYSTEM_H",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196711775",
      "id" : 1196711775,
      "in_reply_to_id" : 1196623448,
      "line" : 7,
      "node_id" : "PRRC_kwDOABII585HVF9f",
      "original_commit_id" : "0a7b3e5058b58c448bbc473ffb347910d781c3bd",
      "original_line" : 7,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/common/system.h",
      "position" : 7,
      "pull_request_review_id" : 1431006399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196711775/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-17T15:32:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196711775",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196781453"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196781453"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Not sure about this one. The include is required for setting the default argument and it is non-const, because we mutate the message.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-17T16:23:55Z",
      "diff_hunk" : "@@ -27,6 +28,7 @@ class Notifications\n     virtual void headerTip(SynchronizationState state, int64_t height, int64_t timestamp, bool presync) {}\n     virtual void progress(const std::string& title, int progress_percent, bool resume_possible) {}\n     virtual void warning(const bilingual_str& warning) {}\n+    virtual void fatalError(const std::string& debug_message, bilingual_str user_message = {}) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196781453",
      "id" : 1196781453,
      "in_reply_to_id" : 1196627541,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HVW-N",
      "original_commit_id" : "0b88c307a8ed81705cf8e6fb6332fdf969eb0e2e",
      "original_line" : 31,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/kernel/notifications_interface.h",
      "position" : null,
      "pull_request_review_id" : 1431118102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196781453/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-17T16:23:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196781453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196834892"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196834892"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Not sure about this one. The include is required for setting the default argument and it is non-const, because we mutate the message.\r\n\r\nThat's a good point about the include. But changing to a `const bilingual_str&` reference and avoiding unnecessary copies would provide a more consistent interface.\r\n\r\nFor one thing, getting of the mutations would actually make current implementations of the interface more legible:\r\n\r\n```c++\r\nInitError(user_message.empty() ? _(\"A fatal internal error occurred, see debug.log for details\") : user_message);\r\n\r\nstd::cerr << (user_message.empty() ? \"A fatal internal error occurred.\" : user_message.original) << std::endl;\r\n```\r\n\r\nBut more importantly kernel code should not care about quirks of particular implementations of the interface. Only 2 out of the 3 of the fatalError implementation currently mutate their arguments, and mutating the argument is always unnecessary. I don't think you would argue it would make sense to change other `const string&` and `const bilingual_str&` parameters in the interface if some future implementation of those interfaces decides it wants to be quirky and mutate arguments. The interface should pass strings by reference or by value in some consistent way.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-17T17:15:24Z",
      "diff_hunk" : "@@ -27,6 +28,7 @@ class Notifications\n     virtual void headerTip(SynchronizationState state, int64_t height, int64_t timestamp, bool presync) {}\n     virtual void progress(const std::string& title, int progress_percent, bool resume_possible) {}\n     virtual void warning(const bilingual_str& warning) {}\n+    virtual void fatalError(const std::string& debug_message, bilingual_str user_message = {}) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196834892",
      "id" : 1196834892,
      "in_reply_to_id" : 1196627541,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HVkBM",
      "original_commit_id" : "0b88c307a8ed81705cf8e6fb6332fdf969eb0e2e",
      "original_line" : 31,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/kernel/notifications_interface.h",
      "position" : null,
      "pull_request_review_id" : 1431200921,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196834892/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-17T17:15:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196834892",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196840346"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196840346"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the follow-up!",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-17T17:19:06Z",
      "diff_hunk" : "@@ -27,6 +28,7 @@ class Notifications\n     virtual void headerTip(SynchronizationState state, int64_t height, int64_t timestamp, bool presync) {}\n     virtual void progress(const std::string& title, int progress_percent, bool resume_possible) {}\n     virtual void warning(const bilingual_str& warning) {}\n+    virtual void fatalError(const std::string& debug_message, bilingual_str user_message = {}) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196840346",
      "id" : 1196840346,
      "in_reply_to_id" : 1196627541,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HVlWa",
      "original_commit_id" : "0b88c307a8ed81705cf8e6fb6332fdf969eb0e2e",
      "original_line" : 31,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/kernel/notifications_interface.h",
      "position" : null,
      "pull_request_review_id" : 1431208905,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196840346/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-17T17:19:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196840346",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 0b88c307a8ed81705cf8e6fb6332fdf969eb0e2e -> a6612baf6aed92f74f96fa4bc04d0ee359f5cc3f ([chainstateRmKernelUiInterface_6](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_6) -> [chainstateRmKernelUiInterface_7](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_7), [compare](https://github.com/TheCharlatan/bitcoin/compare/chainstateRmKernelUiInterface_6..chainstateRmKernelUiInterface_7)).\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196568945) inlining `GetNotifications` method (but decided to keep the name).\r\n* Added two comits for addressing @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196623448), splitting out `util::insert` and `util::AnyPtr` into their own files.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196627541), changed parameter in `fatalError` to `const` reference.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196631303), inserting new `FatalError` argument in first position.\r\n\r\nRebased a6612baf6aed92f74f96fa4bc04d0ee359f5cc3f -> 861582b4087f1602e7115ee4a70ef7a7263eb36b ([chainstateRmKernelUiInterface_7](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_7) -> [chainstateRmKernelUiInterface_8](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_8), [compare](https://github.com/TheCharlatan/bitcoin/compare/chainstateRmKernelUiInterface_7..chainstateRmKernelUiInterface_8)).\r\n* Fixed conflicts with https://github.com/bitcoin/bitcoin/pull/25193",
      "created_at" : "2023-05-17T19:01:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1551909232",
      "id" : 1551909232,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cgEFw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1551909232/reactions"
      },
      "updated_at" : "2023-05-18T17:34:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1551909232",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1197937840"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1197937840"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Split util::insert into its own file\" (d492a2e5c88257cb14c417615dba525ce2cd9cfc)\r\n\r\nDoes this file need to `#include <set>`. Just wondering if IWYU would complain.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-18T15:02:47Z",
      "diff_hunk" : "@@ -0,0 +1,22 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_INSERT_H\n+#define BITCOIN_UTIL_INSERT_H\n+\n+namespace util {\n+\n+//! Simplification of std insertion\n+template <typename Tdst, typename Tsrc>\n+inline void insert(Tdst& dst, const Tsrc& src) {\n+    dst.insert(dst.begin(), src.begin(), src.end());\n+}\n+template <typename TsetT, typename Tsrc>\n+inline void insert(std::set<TsetT>& dst, const Tsrc& src) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1197937840",
      "id" : 1197937840,
      "line" : 18,
      "node_id" : "PRRC_kwDOABII585HZxSw",
      "original_commit_id" : "d492a2e5c88257cb14c417615dba525ce2cd9cfc",
      "original_line" : 18,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/util/insert.h",
      "position" : 18,
      "pull_request_review_id" : 1432884414,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1197937840/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-18T15:49:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1197937840",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1197984670"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1197984670"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Add fatalError method to notifications\" (861582b4087f1602e7115ee4a70ef7a7263eb36b)\r\n\r\nI think it would make sense to get rid of this callback now that there is a notifications object. Following seems to work:\r\n\r\n```diff\r\ndiff --git a/src/node/chainstate.cpp b/src/node/chainstate.cpp\r\nindex 41056272f549..3a055c8e0bc7 100644\r\n--- a/src/node/chainstate.cpp\r\n+++ b/src/node/chainstate.cpp\r\n@@ -200,10 +200,7 @@ ChainstateLoadResult LoadChainstate(ChainstateManager& chainman, const CacheSize\r\n     // snapshot is actually validated? Because this entails unusual\r\n     // filesystem operations to move leveldb data directories around, and that seems\r\n     // too risky to do in the middle of normal runtime.\r\n-    auto snapshot_completion = chainman.MaybeCompleteSnapshotValidation(\r\n-        [&chainman](bilingual_str msg) {\r\n-            chainman.GetNotifications().fatalError(msg.original, msg);\r\n-        });\r\n+    auto snapshot_completion = chainman.MaybeCompleteSnapshotValidation();\r\n \r\n     if (snapshot_completion == SnapshotCompletionResult::SKIPPED) {\r\n         // do nothing; expected case\r\ndiff --git a/src/node/kernel_notifications.cpp b/src/node/kernel_notifications.cpp\r\nindex 5fc116d87097..7f2e55ec6738 100644\r\n--- a/src/node/kernel_notifications.cpp\r\n+++ b/src/node/kernel_notifications.cpp\r\n@@ -79,7 +79,7 @@ void KernelNotifications::fatalError(const std::string& debug_message, const bil\r\n     SetMiscWarning(Untranslated(debug_message));\r\n     LogPrintf(\"*** %s\\n\", debug_message);\r\n     InitError(user_message.empty() ? _(\"A fatal internal error occurred, see debug.log for details\") : user_message);\r\n-    StartShutdown();\r\n+    if (m_do_shutdown) StartShutdown();\r\n }\r\n \r\n } // namespace node\r\ndiff --git a/src/node/kernel_notifications.h b/src/node/kernel_notifications.h\r\nindex 3db4de0a8c14..99cb04325ac9 100644\r\n--- a/src/node/kernel_notifications.h\r\n+++ b/src/node/kernel_notifications.h\r\n@@ -27,6 +27,9 @@ public:\r\n     void warning(const bilingual_str& warning) override;\r\n \r\n     void fatalError(const std::string& debug_message, const bilingual_str& user_message = {}) override;\r\n+\r\n+    //! Useful for tests, can be set to false to avoid shutdown on fatal error.\r\n+    bool m_do_shutdown{true};\r\n };\r\n } // namespace node\r\n \r\ndiff --git a/src/test/validation_chainstatemanager_tests.cpp b/src/test/validation_chainstatemanager_tests.cpp\r\nindex 81a015513a5a..3c52d76a6ba5 100644\r\n--- a/src/test/validation_chainstatemanager_tests.cpp\r\n+++ b/src/test/validation_chainstatemanager_tests.cpp\r\n@@ -564,7 +564,7 @@ BOOST_FIXTURE_TEST_CASE(chainstatemanager_snapshot_completion, SnapshotTestSetup\r\n     auto db_cache_before_complete = active_cs.m_coinsdb_cache_size_bytes;\r\n \r\n     SnapshotCompletionResult res;\r\n-    auto mock_shutdown = [](bilingual_str msg) {};\r\n+    m_node.notifications->m_do_shutdown = false;\r\n \r\n     fs::path snapshot_chainstate_dir = *node::FindSnapshotChainstateDir();\r\n     BOOST_CHECK(fs::exists(snapshot_chainstate_dir));\r\n@@ -574,8 +574,7 @@ BOOST_FIXTURE_TEST_CASE(chainstatemanager_snapshot_completion, SnapshotTestSetup\r\n     const uint256 snapshot_tip_hash = WITH_LOCK(chainman.GetMutex(),\r\n         return chainman.ActiveTip()->GetBlockHash());\r\n \r\n-    res = WITH_LOCK(::cs_main,\r\n-        return chainman.MaybeCompleteSnapshotValidation(mock_shutdown));\r\n+    res = WITH_LOCK(::cs_main, return chainman.MaybeCompleteSnapshotValidation());\r\n     BOOST_CHECK_EQUAL(res, SnapshotCompletionResult::SUCCESS);\r\n \r\n     WITH_LOCK(::cs_main, BOOST_CHECK(chainman.IsSnapshotValidated()));\r\n@@ -591,8 +590,7 @@ BOOST_FIXTURE_TEST_CASE(chainstatemanager_snapshot_completion, SnapshotTestSetup\r\n     BOOST_CHECK_EQUAL(all_chainstates[0], &active_cs);\r\n \r\n     // Trying completion again should return false.\r\n-    res = WITH_LOCK(::cs_main,\r\n-        return chainman.MaybeCompleteSnapshotValidation(mock_shutdown));\r\n+    res = WITH_LOCK(::cs_main, return chainman.MaybeCompleteSnapshotValidation());\r\n     BOOST_CHECK_EQUAL(res, SnapshotCompletionResult::SKIPPED);\r\n \r\n     // The invalid snapshot path should not have been used.\r\n@@ -645,7 +643,7 @@ BOOST_FIXTURE_TEST_CASE(chainstatemanager_snapshot_completion_hash_mismatch, Sna\r\n     Chainstate& validation_chainstate = *std::get<0>(chainstates);\r\n     ChainstateManager& chainman = *Assert(m_node.chainman);\r\n     SnapshotCompletionResult res;\r\n-    auto mock_shutdown = [](bilingual_str msg) {};\r\n+    m_node.notifications->m_do_shutdown = false;\r\n \r\n     // Test tampering with the IBD UTXO set with an extra coin to ensure it causes\r\n     // snapshot completion to fail.\r\n@@ -661,8 +659,7 @@ BOOST_FIXTURE_TEST_CASE(chainstatemanager_snapshot_completion_hash_mismatch, Sna\r\n     fs::path snapshot_chainstate_dir = gArgs.GetDataDirNet() / \"chainstate_snapshot\";\r\n     BOOST_CHECK(fs::exists(snapshot_chainstate_dir));\r\n \r\n-    res = WITH_LOCK(::cs_main,\r\n-        return chainman.MaybeCompleteSnapshotValidation(mock_shutdown));\r\n+    res = WITH_LOCK(::cs_main, return chainman.MaybeCompleteSnapshotValidation());\r\n     BOOST_CHECK_EQUAL(res, SnapshotCompletionResult::HASH_MISMATCH);\r\n \r\n     auto all_chainstates = chainman.GetAll();\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\nindex e753b75c88ae..491376f0e4f0 100644\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -2871,10 +2871,7 @@ bool Chainstate::ConnectTip(BlockValidationState& state, CBlockIndex* pindexNew,\r\n     if (this != &m_chainman.ActiveChainstate()) {\r\n         // This call may set `m_disabled`, which is referenced immediately afterwards in\r\n         // ActivateBestChain, so that we stop connecting blocks past the snapshot base.\r\n-        m_chainman.MaybeCompleteSnapshotValidation(\r\n-            [&notifications = m_chainman.GetNotifications()](bilingual_str msg) {\r\n-                notifications.fatalError(msg.original, msg);\r\n-            });\r\n+        m_chainman.MaybeCompleteSnapshotValidation();\r\n     }\r\n \r\n     connectTrace.BlockConnected(pindexNew, std::move(pthisBlock));\r\n@@ -5385,8 +5382,7 @@ bool ChainstateManager::PopulateAndValidateSnapshot(\r\n //      through IsUsable() checks, or\r\n //\r\n //  (ii) giving each chainstate its own lock instead of using cs_main for everything.\r\n-SnapshotCompletionResult ChainstateManager::MaybeCompleteSnapshotValidation(\r\n-      std::function<void(bilingual_str)> shutdown_fnc)\r\n+SnapshotCompletionResult ChainstateManager::MaybeCompleteSnapshotValidation()\r\n {\r\n     AssertLockHeld(cs_main);\r\n     if (m_ibd_chainstate.get() == &this->ActiveChainstate() ||\r\n@@ -5435,7 +5431,7 @@ SnapshotCompletionResult ChainstateManager::MaybeCompleteSnapshotValidation(\r\n \r\n         m_snapshot_chainstate->InvalidateCoinsDBOnDisk();\r\n \r\n-        shutdown_fnc(user_error);\r\n+        GetNotifications().fatalError(user_error.original, user_error);\r\n     };\r\n \r\n     if (index_new.GetBlockHash() != snapshot_blockhash) {\r\ndiff --git a/src/validation.h b/src/validation.h\r\nindex 136992a9ac15..b03e3d4a5fe4 100644\r\n--- a/src/validation.h\r\n+++ b/src/validation.h\r\n@@ -1044,8 +1044,7 @@ public:\r\n     //! If the coins match (expected), then mark the validation chainstate for\r\n     //! deletion and continue using the snapshot chainstate as active.\r\n     //! Otherwise, revert to using the ibd chainstate and shutdown.\r\n-    SnapshotCompletionResult MaybeCompleteSnapshotValidation(\r\n-        std::function<void(bilingual_str)> shutdown_fnc) EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\r\n+    SnapshotCompletionResult MaybeCompleteSnapshotValidation() EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\r\n \r\n     //! The most-work chain.\r\n     Chainstate& ActiveChainstate() const;\r\n```",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-18T15:45:41Z",
      "diff_hunk" : "@@ -200,14 +200,17 @@ ChainstateLoadResult LoadChainstate(ChainstateManager& chainman, const CacheSize\n     // snapshot is actually validated? Because this entails unusual\n     // filesystem operations to move leveldb data directories around, and that seems\n     // too risky to do in the middle of normal runtime.\n-    auto snapshot_completion = chainman.MaybeCompleteSnapshotValidation();\n+    auto snapshot_completion = chainman.MaybeCompleteSnapshotValidation(\n+        [&chainman](bilingual_str msg) {\n+            chainman.GetNotifications().fatalError(msg.original, msg);\n+        });",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1197984670",
      "id" : 1197984670,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HZ8ue",
      "original_commit_id" : "861582b4087f1602e7115ee4a70ef7a7263eb36b",
      "original_line" : 206,
      "original_position" : 8,
      "original_start_line" : 203,
      "path" : "src/node/chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 1432884414,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1197984670/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-05-18T15:49:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1197984670",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198025552"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198025552"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Seems wrong not to include it, will do so.",
      "commit_id" : "5a01a63ac8267debf152c8757e24f300e18ae379",
      "created_at" : "2023-05-18T16:22:14Z",
      "diff_hunk" : "@@ -0,0 +1,22 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_INSERT_H\n+#define BITCOIN_UTIL_INSERT_H\n+\n+namespace util {\n+\n+//! Simplification of std insertion\n+template <typename Tdst, typename Tsrc>\n+inline void insert(Tdst& dst, const Tsrc& src) {\n+    dst.insert(dst.begin(), src.begin(), src.end());\n+}\n+template <typename TsetT, typename Tsrc>\n+inline void insert(std::set<TsetT>& dst, const Tsrc& src) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198025552",
      "id" : 1198025552,
      "in_reply_to_id" : 1197937840,
      "line" : 18,
      "node_id" : "PRRC_kwDOABII585HaGtQ",
      "original_commit_id" : "d492a2e5c88257cb14c417615dba525ce2cd9cfc",
      "original_line" : 18,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/util/insert.h",
      "position" : 18,
      "pull_request_review_id" : 1433027388,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198025552/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-18T16:22:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198025552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 861582b4087f1602e7115ee4a70ef7a7263eb36b -> 5a01a63ac8267debf152c8757e24f300e18ae379 ([chainstateRmKernelUiInterface_8](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_8) -> [chainstateRmKernelUiInterface_9](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_9), [compare](https://github.com/TheCharlatan/bitcoin/compare/chainstateRmKernelUiInterface_8..chainstateRmKernelUiInterface_9)).\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1197937840), including std::set\r\n* Applied @ryanofsky's [patch](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1197984670)\r\n\r\nRe. the last patch, I thought this through a bit, and played with the idea of instead adding a custom notification class that leaves out the `StartShutdown` call in `fatalError` for this test case. However, that seems to mess with the initial assumptions of the test case, since we'd have to re-instantiate a `ChainstateManager` with the new notifications in its options. Hiding the shutdown switch as an implementation detail of the child class seems preferable to me.\r\n\r\nAlso thought about whether it is safe to override the shutdown behavior for other parts of the validation code in this test case and if this might this mask potential future bugs. I believe this should be safe, since any other occurrences of a fatalError should return something unexpected that will make the tests fail.\r\n\r\nAlso took the liberty to rename `m_do_shutdown` to `m_shutdown_on_fatal_error`.",
      "created_at" : "2023-05-18T17:34:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1553391517",
      "id" : 1553391517,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585clt-d",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1553391517/reactions"
      },
      "updated_at" : "2023-05-18T17:34:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1553391517",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 5a01a63ac8267debf152c8757e24f300e18ae379 -> d96c82a76775b1a41c098e6af60130fbdbba9975 ([chainstateRmKernelUiInterface_9](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_9) -> [chainstateRmKernelUiInterface_10](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_10), [compare](https://github.com/TheCharlatan/bitcoin/compare/chainstateRmKernelUiInterface_9..chainstateRmKernelUiInterface_10)).\r\n* Squashed the last commit",
      "created_at" : "2023-05-18T18:04:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1553426376",
      "id" : 1553426376,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cl2fI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1553426376/reactions"
      },
      "updated_at" : "2023-05-18T18:04:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1553426376",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198680321"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198680321"
         }
      },
      "author_association" : "MEMBER",
      "body" : "974b4293a5f2fe01302c608bf0063e3b52721d0b: Any reason to accept a nullptr for something that can never be null and would lead to UB if it was null? Might be better to use a reference.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T08:16:47Z",
      "diff_hunk" : "@@ -0,0 +1,26 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_NOTIFICATIONS_INTERFACE_H\n+#define BITCOIN_KERNEL_NOTIFICATIONS_INTERFACE_H\n+\n+class CBlockIndex;\n+enum class SynchronizationState;\n+\n+namespace kernel {\n+\n+/**\n+ * A base class defining functions for notifying about certain kernel\n+ * events.\n+ */\n+class Notifications\n+{\n+public:\n+    virtual ~Notifications(){};\n+\n+    virtual void blockTip(SynchronizationState state, CBlockIndex* index) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198680321",
      "id" : 1198680321,
      "line" : 27,
      "node_id" : "PRRC_kwDOABII585HcmkB",
      "original_commit_id" : "974b4293a5f2fe01302c608bf0063e3b52721d0b",
      "original_line" : 22,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/kernel/notifications_interface.h",
      "position" : 27,
      "pull_request_review_id" : 1433987014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198680321/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:06:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198680321",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198713287"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198713287"
         }
      },
      "author_association" : "MEMBER",
      "body" : "1be1c16b70edc5def98eb1903cee08b5d546ba88: Not sure about passing only the translated string here. I think it should be up to the receiving code to decide whether to use `.original` (`bitcoin-chainstate.cpp`) or `.translated` (`node/kernel_notif.cpp`)",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T08:50:35Z",
      "diff_hunk" : "@@ -4145,14 +4147,15 @@ bool Chainstate::LoadChainTip()\n     return true;\n }\n \n-CVerifyDB::CVerifyDB()\n+CVerifyDB::CVerifyDB(Notifications& notifications)\n+    : m_notifications{notifications}\n {\n-    uiInterface.ShowProgress(_(\"Verifying blocksâ¦\").translated, 0, false);\n+    m_notifications.progress(_(\"Verifying blocksâ¦\").translated, 0, false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198713287",
      "id" : 1198713287,
      "line" : 4121,
      "node_id" : "PRRC_kwDOABII585HcunH",
      "original_commit_id" : "1be1c16b70edc5def98eb1903cee08b5d546ba88",
      "original_line" : 4153,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 215,
      "pull_request_review_id" : 1433987014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 2,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198713287/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:06:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198713287",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198753425"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198753425"
         }
      },
      "author_association" : "MEMBER",
      "body" : "c05c15cc7b4fb9052b87bc2f8ea0500cd5218f4e: question for clarity: This commit is not needed and unrelated to kernel? Seems fine to do, just asking.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T09:32:33Z",
      "diff_hunk" : "@@ -11,8 +11,8 @@\n #include <policy/feerate.h>\n #include <primitives/transaction.h>\n #include <random.h>\n-#include <util/system.h>\n #include <util/check.h>\n+#include <util/insert.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198753425",
      "id" : 1198753425,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII585Hc4aR",
      "original_commit_id" : "c05c15cc7b4fb9052b87bc2f8ea0500cd5218f4e",
      "original_line" : 15,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 6,
      "pull_request_review_id" : 1433987014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198753425/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:06:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198753425",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198753949"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198753949"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same for `AnyPtr`?",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T09:33:05Z",
      "diff_hunk" : "@@ -11,8 +11,8 @@\n #include <policy/feerate.h>\n #include <primitives/transaction.h>\n #include <random.h>\n-#include <util/system.h>\n #include <util/check.h>\n+#include <util/insert.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198753949",
      "id" : 1198753949,
      "in_reply_to_id" : 1198753425,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII585Hc4id",
      "original_commit_id" : "c05c15cc7b4fb9052b87bc2f8ea0500cd5218f4e",
      "original_line" : 15,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 6,
      "pull_request_review_id" : 1433987014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198753949/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:06:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198753949",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198757020"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198757020"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit in e850319d5336335a9efbf04307261fb565b7bc68: Would be good to either not touch it or remove the comment?",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T09:36:26Z",
      "diff_hunk" : "@@ -15,11 +15,11 @@\n #include <qt/guiutil.h>\n #include <qt/optionsmodel.h>\n \n+#include <common/system.h>\n #include <interfaces/node.h>\n-#include <validation.h> // for DEFAULT_SCRIPTCHECK_THREADS and MAX_SCRIPTCHECK_THREADS\n #include <netbase.h>\n-#include <txdb.h> // for -dbcache defaults\n-#include <util/system.h>\n+#include <txdb.h>       // for -dbcache defaults\n+#include <validation.h> // for DEFAULT_SCRIPTCHECK_THREADS and MAX_SCRIPTCHECK_THREADS",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198757020",
      "id" : 1198757020,
      "line" : 22,
      "node_id" : "PRRC_kwDOABII585Hc5Sc",
      "original_commit_id" : "e850319d5336335a9efbf04307261fb565b7bc68",
      "original_line" : 22,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/qt/optionsdialog.cpp",
      "position" : 11,
      "pull_request_review_id" : 1433987014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198757020/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:06:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198757020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198758293"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198758293"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit in https://github.com/bitcoin/bitcoin/commit/e850319d5336335a9efbf04307261fb565b7bc68: Wrong section",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T09:37:50Z",
      "diff_hunk" : "@@ -30,13 +30,13 @@\n #include <qt/macdockiconhandler.h>\n #endif\n \n-#include <functional>\n #include <chain.h>\n #include <chainparams.h>\n+#include <common/system.h>\n+#include <functional>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198758293",
      "id" : 1198758293,
      "line" : 36,
      "node_id" : "PRRC_kwDOABII585Hc5mV",
      "original_commit_id" : "e850319d5336335a9efbf04307261fb565b7bc68",
      "original_line" : 36,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/qt/bitcoingui.cpp",
      "position" : 8,
      "pull_request_review_id" : 1433987014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198758293/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:06:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198758293",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198767568"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198767568"
         }
      },
      "author_association" : "MEMBER",
      "body" : "d96c82a76775b1a41c098e6af60130fbdbba9975: I think you forgot the call to `std::abort`, otherwise it seems that the error isn't treated fatal?",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T09:47:48Z",
      "diff_hunk" : "@@ -103,6 +103,11 @@ int main(int argc, char* argv[])\n         {\n             std::cout << \"Warning: \" << warning.original << std::endl;\n         }\n+        void fatalError(const std::string& debug_message, const bilingual_str& user_message) override\n+        {\n+            std::cerr << \"Error: \" << debug_message << std::endl;\n+            std::cerr << (user_message.empty() ? \"A fatal internal error occurred.\" : user_message.original) << std::endl;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198767568",
      "id" : 1198767568,
      "line" : 109,
      "node_id" : "PRRC_kwDOABII585Hc73Q",
      "original_commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "original_line" : 109,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 47,
      "pull_request_review_id" : 1433987014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198767568/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:06:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198767568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198784478"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198784478"
         }
      },
      "author_association" : "MEMBER",
      "body" : "brainstorming nit in d96c82a76775b1a41c098e6af60130fbdbba9975: Not sure about adding test-only code to real code. Would it be a lot more effort to add a test-only derived `MockNotif : node::KernelNotifications` struct that no-ops the fatalError method and use it in the one test?",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T10:06:02Z",
      "diff_hunk" : "@@ -25,6 +25,11 @@ class KernelNotifications : public kernel::Notifications\n     void progress(const std::string& title, int progress_percent, bool resume_possible) override;\n \n     void warning(const bilingual_str& warning) override;\n+\n+    void fatalError(const std::string& debug_message, const bilingual_str& user_message = {}) override;\n+\n+    //! Useful for tests, can be set to false to avoid shutdown on fatal error.\n+    bool m_shutdown_on_fatal_error{true};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198784478",
      "id" : 1198784478,
      "line" : 32,
      "node_id" : "PRRC_kwDOABII585Hc__e",
      "original_commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "original_line" : 32,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/node/kernel_notifications.h",
      "position" : 32,
      "pull_request_review_id" : 1433987014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198784478/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:06:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198784478",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198788990"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198788990"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Just seemed weird to go from `CBlockIndex*` to `CBlockIndex&` back to `CBlockIndex*`",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T10:11:06Z",
      "diff_hunk" : "@@ -0,0 +1,26 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_NOTIFICATIONS_INTERFACE_H\n+#define BITCOIN_KERNEL_NOTIFICATIONS_INTERFACE_H\n+\n+class CBlockIndex;\n+enum class SynchronizationState;\n+\n+namespace kernel {\n+\n+/**\n+ * A base class defining functions for notifying about certain kernel\n+ * events.\n+ */\n+class Notifications\n+{\n+public:\n+    virtual ~Notifications(){};\n+\n+    virtual void blockTip(SynchronizationState state, CBlockIndex* index) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198788990",
      "id" : 1198788990,
      "in_reply_to_id" : 1198680321,
      "line" : 27,
      "node_id" : "PRRC_kwDOABII585HdBF-",
      "original_commit_id" : "974b4293a5f2fe01302c608bf0063e3b52721d0b",
      "original_line" : 22,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/kernel/notifications_interface.h",
      "position" : 27,
      "pull_request_review_id" : 1434153959,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198788990/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:11:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198788990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198790430"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198790430"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Not strictly required, but I decided this makes sense, since these are currently in `namespace util` and are just a small amount of header-only code. See the discussion we had here: https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1196623448.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T10:12:49Z",
      "diff_hunk" : "@@ -11,8 +11,8 @@\n #include <policy/feerate.h>\n #include <primitives/transaction.h>\n #include <random.h>\n-#include <util/system.h>\n #include <util/check.h>\n+#include <util/insert.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198790430",
      "id" : 1198790430,
      "in_reply_to_id" : 1198753425,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII585HdBce",
      "original_commit_id" : "c05c15cc7b4fb9052b87bc2f8ea0500cd5218f4e",
      "original_line" : 15,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 6,
      "pull_request_review_id" : 1434156322,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198790430/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:12:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198790430",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198790811"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198790811"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yea. In general, it's fine for those comments to just be dropped if touching the line.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T10:13:14Z",
      "diff_hunk" : "@@ -15,11 +15,11 @@\n #include <qt/guiutil.h>\n #include <qt/optionsmodel.h>\n \n+#include <common/system.h>\n #include <interfaces/node.h>\n-#include <validation.h> // for DEFAULT_SCRIPTCHECK_THREADS and MAX_SCRIPTCHECK_THREADS\n #include <netbase.h>\n-#include <txdb.h> // for -dbcache defaults\n-#include <util/system.h>\n+#include <txdb.h>       // for -dbcache defaults\n+#include <validation.h> // for DEFAULT_SCRIPTCHECK_THREADS and MAX_SCRIPTCHECK_THREADS",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198790811",
      "id" : 1198790811,
      "in_reply_to_id" : 1198757020,
      "line" : 22,
      "node_id" : "PRRC_kwDOABII585HdBib",
      "original_commit_id" : "e850319d5336335a9efbf04307261fb565b7bc68",
      "original_line" : 22,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/qt/optionsdialog.cpp",
      "position" : 11,
      "pull_request_review_id" : 1434156857,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198790811/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:13:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198790811",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198791887"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198791887"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah, it may be odd in the meantime, but if it is done for all the lines that are touched anyway and if longer term the ui_interface lines are touched, they can also be switched over?",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T10:14:37Z",
      "diff_hunk" : "@@ -0,0 +1,26 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_NOTIFICATIONS_INTERFACE_H\n+#define BITCOIN_KERNEL_NOTIFICATIONS_INTERFACE_H\n+\n+class CBlockIndex;\n+enum class SynchronizationState;\n+\n+namespace kernel {\n+\n+/**\n+ * A base class defining functions for notifying about certain kernel\n+ * events.\n+ */\n+class Notifications\n+{\n+public:\n+    virtual ~Notifications(){};\n+\n+    virtual void blockTip(SynchronizationState state, CBlockIndex* index) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198791887",
      "id" : 1198791887,
      "in_reply_to_id" : 1198680321,
      "line" : 27,
      "node_id" : "PRRC_kwDOABII585HdBzP",
      "original_commit_id" : "974b4293a5f2fe01302c608bf0063e3b52721d0b",
      "original_line" : 22,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/kernel/notifications_interface.h",
      "position" : 27,
      "pull_request_review_id" : 1434158586,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198791887/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:14:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198791887",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198793373"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198793373"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah sure. You didn't want to move them to common, so you moved them to util ahead of the other change.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T10:16:19Z",
      "diff_hunk" : "@@ -11,8 +11,8 @@\n #include <policy/feerate.h>\n #include <primitives/transaction.h>\n #include <random.h>\n-#include <util/system.h>\n #include <util/check.h>\n+#include <util/insert.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198793373",
      "id" : 1198793373,
      "in_reply_to_id" : 1198753425,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII585HdCKd",
      "original_commit_id" : "c05c15cc7b4fb9052b87bc2f8ea0500cd5218f4e",
      "original_line" : 15,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 6,
      "pull_request_review_id" : 1434160944,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198793373/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:16:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198793373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198809696"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198809696"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The changes here and [here](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198758293) are done by `git diff -U0 HEAD~1.. | ./contrib/devtools/clang-format-diff.py -p1 -i -v`. Should I always drop these format changes that just re-order includes? I already drop a bunch of other changes that re-format moved code, or squash code onto a single line, that would be easier to read with its current hand-written multi line formatting.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T10:27:36Z",
      "diff_hunk" : "@@ -15,11 +15,11 @@\n #include <qt/guiutil.h>\n #include <qt/optionsmodel.h>\n \n+#include <common/system.h>\n #include <interfaces/node.h>\n-#include <validation.h> // for DEFAULT_SCRIPTCHECK_THREADS and MAX_SCRIPTCHECK_THREADS\n #include <netbase.h>\n-#include <txdb.h> // for -dbcache defaults\n-#include <util/system.h>\n+#include <txdb.h>       // for -dbcache defaults\n+#include <validation.h> // for DEFAULT_SCRIPTCHECK_THREADS and MAX_SCRIPTCHECK_THREADS",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198809696",
      "id" : 1198809696,
      "in_reply_to_id" : 1198757020,
      "line" : 22,
      "node_id" : "PRRC_kwDOABII585HdGJg",
      "original_commit_id" : "e850319d5336335a9efbf04307261fb565b7bc68",
      "original_line" : 22,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/qt/optionsdialog.cpp",
      "position" : 11,
      "pull_request_review_id" : 1434185942,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198809696/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:27:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198809696",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198812663"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198812663"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Should I always drop these format changes that just re-order includes? \r\n\r\nNo, it is just a style nit. Feel free to ignore. I just think that instead of moving one include in the wrong section to another place in the wrong section is worse than just moving it to the right place in the right section in one go.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T10:31:03Z",
      "diff_hunk" : "@@ -15,11 +15,11 @@\n #include <qt/guiutil.h>\n #include <qt/optionsmodel.h>\n \n+#include <common/system.h>\n #include <interfaces/node.h>\n-#include <validation.h> // for DEFAULT_SCRIPTCHECK_THREADS and MAX_SCRIPTCHECK_THREADS\n #include <netbase.h>\n-#include <txdb.h> // for -dbcache defaults\n-#include <util/system.h>\n+#include <txdb.h>       // for -dbcache defaults\n+#include <validation.h> // for DEFAULT_SCRIPTCHECK_THREADS and MAX_SCRIPTCHECK_THREADS",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198812663",
      "id" : 1198812663,
      "in_reply_to_id" : 1198757020,
      "line" : 22,
      "node_id" : "PRRC_kwDOABII585HdG33",
      "original_commit_id" : "e850319d5336335a9efbf04307261fb565b7bc68",
      "original_line" : 22,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/qt/optionsdialog.cpp",
      "position" : 11,
      "pull_request_review_id" : 1434190472,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198812663/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:31:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198812663",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198815026"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198815026"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "See the discussion in [this](https://github.com/bitcoin/bitcoin/pull/27636#pullrequestreview-1428804291) and [this](https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1550107951) comment. To summarize: Calling `std::abort` or `exit(0)` would skip over destructors and lead to an unclean exit. Functions calling `fatalError` should already be returning values that would lead to `bitcoin-chainstate` shutting down normally.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T10:33:59Z",
      "diff_hunk" : "@@ -103,6 +103,11 @@ int main(int argc, char* argv[])\n         {\n             std::cout << \"Warning: \" << warning.original << std::endl;\n         }\n+        void fatalError(const std::string& debug_message, const bilingual_str& user_message) override\n+        {\n+            std::cerr << \"Error: \" << debug_message << std::endl;\n+            std::cerr << (user_message.empty() ? \"A fatal internal error occurred.\" : user_message.original) << std::endl;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198815026",
      "id" : 1198815026,
      "in_reply_to_id" : 1198767568,
      "line" : 109,
      "node_id" : "PRRC_kwDOABII585HdHcy",
      "original_commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "original_line" : 109,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 47,
      "pull_request_review_id" : 1434194045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198815026/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198815026",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198817207"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198817207"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I ran through the scenario in [this comment](https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1553391517). We also already have a bunch of other test-only or debug-only options, so I don't think we are setting a precedent here.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T10:36:54Z",
      "diff_hunk" : "@@ -25,6 +25,11 @@ class KernelNotifications : public kernel::Notifications\n     void progress(const std::string& title, int progress_percent, bool resume_possible) override;\n \n     void warning(const bilingual_str& warning) override;\n+\n+    void fatalError(const std::string& debug_message, const bilingual_str& user_message = {}) override;\n+\n+    //! Useful for tests, can be set to false to avoid shutdown on fatal error.\n+    bool m_shutdown_on_fatal_error{true};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198817207",
      "id" : 1198817207,
      "in_reply_to_id" : 1198784478,
      "line" : 32,
      "node_id" : "PRRC_kwDOABII585HdH-3",
      "original_commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "original_line" : 32,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/node/kernel_notifications.h",
      "position" : 32,
      "pull_request_review_id" : 1434197535,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198817207/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:36:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198817207",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198831873"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198831873"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Would suggest documenting this in `src/kernel/notifications_interface.h`. Maybe:\r\n\r\n```c++\r\n//! The fatal error notification is sent to notify the user and start\r\n//! shutting down if an error happens in kernel code that can't be recovered\r\n//! from. After this notification is sent, whatever function triggered the\r\n//! error should also return an error code or raise an exception.\r\n```",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T10:55:49Z",
      "diff_hunk" : "@@ -103,6 +103,11 @@ int main(int argc, char* argv[])\n         {\n             std::cout << \"Warning: \" << warning.original << std::endl;\n         }\n+        void fatalError(const std::string& debug_message, const bilingual_str& user_message) override\n+        {\n+            std::cerr << \"Error: \" << debug_message << std::endl;\n+            std::cerr << (user_message.empty() ? \"A fatal internal error occurred.\" : user_message.original) << std::endl;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198831873",
      "id" : 1198831873,
      "in_reply_to_id" : 1198767568,
      "line" : 109,
      "node_id" : "PRRC_kwDOABII585HdLkB",
      "original_commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "original_line" : 109,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 47,
      "pull_request_review_id" : 1434220981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198831873/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T10:55:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198831873",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198840110"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198840110"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I suggested adding the bool as way to clean up the `MaybeCompleteSnapshotValidation` interface which seemed unnecessarily complicated. Could have gone with a mock notifications object instead but adding the bool was simpler.\r\n\r\nMaybe more ideally we could drop the bool by just having the test call `BOOST_CHECK(ShutdownRequested())` and `AbortShutdown()` after it calls `MaybeCompleteSnapshotValidation`. This would make the test more realistic and add better coverage, but I didn't check if that worked.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T11:06:34Z",
      "diff_hunk" : "@@ -25,6 +25,11 @@ class KernelNotifications : public kernel::Notifications\n     void progress(const std::string& title, int progress_percent, bool resume_possible) override;\n \n     void warning(const bilingual_str& warning) override;\n+\n+    void fatalError(const std::string& debug_message, const bilingual_str& user_message = {}) override;\n+\n+    //! Useful for tests, can be set to false to avoid shutdown on fatal error.\n+    bool m_shutdown_on_fatal_error{true};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198840110",
      "id" : 1198840110,
      "in_reply_to_id" : 1198784478,
      "line" : 32,
      "node_id" : "PRRC_kwDOABII585HdNku",
      "original_commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "original_line" : 32,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/node/kernel_notifications.h",
      "position" : 32,
      "pull_request_review_id" : 1434234989,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198840110/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T11:06:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198840110",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199037376"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199037376"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why is it safe to use a reference type here?",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T14:35:36Z",
      "diff_hunk" : "@@ -42,6 +44,7 @@ struct ChainstateManagerOpts {\n     DBOptions block_tree_db{};\n     DBOptions coins_db{};\n     CoinsViewOptions coins_view{};\n+    Notifications& notifications;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199037376",
      "id" : 1199037376,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII585Hd9vA",
      "original_commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "original_line" : 47,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/chainstatemanager_opts.h",
      "position" : 13,
      "pull_request_review_id" : 1434551593,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199037376/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T14:47:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199037376",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199115073"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199115073"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Would suggest `ValidationNotifications& notifications` or `ValdiataionNotifications* notifcations{nullptr}` here,\r\n\r\nI'd prefer the pointer type to do not bother about lifetime of variables that were used for assigning.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T15:48:48Z",
      "diff_hunk" : "@@ -42,6 +44,7 @@ struct ChainstateManagerOpts {\n     DBOptions block_tree_db{};\n     DBOptions coins_db{};\n     CoinsViewOptions coins_view{};\n+    const std::shared_ptr<ValidationNotifications> notifications;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199115073",
      "id" : 1199115073,
      "in_reply_to_id" : 1193855223,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HeQtB",
      "original_commit_id" : "620faa21ce0210dddca243511b7674c3b8f4e901",
      "original_line" : 47,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/chainstatemanager_opts.h",
      "position" : null,
      "pull_request_review_id" : 1434674208,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199115073/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T15:48:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199115073",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199141298"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199141298"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199037376\r\n\r\n> Why is it safe to use a reference type here?\r\n\r\nI wouldn't call it \"safe\", since in general pointers and references in C++ are pretty dangerous, but as long as the notifications object is destroyed after the last notification is sent, there is not a bug. Could add a comment to the `ChainstateManagerOpts` struct to make this explicit, saying the notifications option is mandatory and the object lifetime needs to be at least as long as the `ChainstateManager` object.\r\n\r\nI think other alternatives would not be good. Changing it to a `unique_ptr` would make it not possible for the block manager and chainstate manager to share the same notifications object, or for multiple chainstate managers to share the same notifications object. Changing it to a `shared_ptr` could work (it actually was a shared_ptr in the initial version of this PR), but it would make the object lifetime more complicated and cause harder to debug resource leaks if the notifications object owns other resources, or use-after-free bugs if the notification objects contains other pointers. In general I think it's best to avoid shared_ptrs where possible because it's hard to identify all the places reference counts could go to 0 and do unexpected things. It would also just seem asymmetric if application code is allocating the object and kernel code is deleting it. Better for kernel not to get involved in application memory management if possible.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T16:16:05Z",
      "diff_hunk" : "@@ -42,6 +44,7 @@ struct ChainstateManagerOpts {\n     DBOptions block_tree_db{};\n     DBOptions coins_db{};\n     CoinsViewOptions coins_view{};\n+    Notifications& notifications;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199141298",
      "id" : 1199141298,
      "in_reply_to_id" : 1199037376,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII585HeXGy",
      "original_commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "original_line" : 47,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/chainstatemanager_opts.h",
      "position" : 13,
      "pull_request_review_id" : 1434715761,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199141298/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T16:16:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199141298",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199157134"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199157134"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Could add a comment to the `ChainstateManagerOpts` struct to make this explicit, saying the notifications option is mandatory and the object lifetime needs to be at least as long as the `ChainstateManager` object.\r\n\r\nRight. But that is not the case for the `notifications` variable in: https://github.com/bitcoin/bitcoin/blob/d96c82a76775b1a41c098e6af60130fbdbba9975/src/init.cpp#L1022-L1029",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T16:31:52Z",
      "diff_hunk" : "@@ -42,6 +44,7 @@ struct ChainstateManagerOpts {\n     DBOptions block_tree_db{};\n     DBOptions coins_db{};\n     CoinsViewOptions coins_view{};\n+    Notifications& notifications;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199157134",
      "id" : 1199157134,
      "in_reply_to_id" : 1199037376,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII585Hea-O",
      "original_commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "original_line" : 47,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/chainstatemanager_opts.h",
      "position" : 13,
      "pull_request_review_id" : 1434746480,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199157134/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T16:31:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199157134",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199159229"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199159229"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> I'd prefer the pointer type to do not bother about lifetime of variables that were used for assigning.\r\n\r\nI'd agree with you if we passing a string or some other passive data structure as an option to the kernel. Better to just use copy/move/reference counts to get the options struct to manage the memory rather than worry about lifetime of external variables.\r\n\r\nBut `kernel::Notifications` option is not just a passive set-and-forget option because it actively receives callbacks from the kernel. It will very likely own resources and contain pointers to other state. (Our `KernelNotifications` implementation will need to hold more state to get rid of `uiInterface` and `fWarned` globals.) I think it's important for lifetime of the object to be explicit and not use copies/movies/reference counts so related object lifetimes can also be known and fixed, and we don't make memory management harder to debug in the long term just to avoid thinking about it in the short term.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T16:34:20Z",
      "diff_hunk" : "@@ -42,6 +44,7 @@ struct ChainstateManagerOpts {\n     DBOptions block_tree_db{};\n     DBOptions coins_db{};\n     CoinsViewOptions coins_view{};\n+    const std::shared_ptr<ValidationNotifications> notifications;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199159229",
      "id" : 1199159229,
      "in_reply_to_id" : 1193855223,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Hebe9",
      "original_commit_id" : "620faa21ce0210dddca243511b7674c3b8f4e901",
      "original_line" : 47,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/chainstatemanager_opts.h",
      "position" : null,
      "pull_request_review_id" : 1434749690,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199159229/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T16:34:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199159229",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199164171"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199164171"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Right. But that is not the case for the `notifications` variable in:\r\n\r\nThat code looks safe to me, but is there a bug?\r\n\r\nIt definitely is verbose and duplicative, and probably the repeated parsing could be removed later with a refactoring.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T16:40:03Z",
      "diff_hunk" : "@@ -42,6 +44,7 @@ struct ChainstateManagerOpts {\n     DBOptions block_tree_db{};\n     DBOptions coins_db{};\n     CoinsViewOptions coins_view{};\n+    Notifications& notifications;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199164171",
      "id" : 1199164171,
      "in_reply_to_id" : 1199037376,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII585HecsL",
      "original_commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "original_line" : 47,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/chainstatemanager_opts.h",
      "position" : 13,
      "pull_request_review_id" : 1434757217,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199164171/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T16:40:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199164171",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199336080"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199336080"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Maybe more ideally we could drop the bool by just having the test call BOOST_CHECK(ShutdownRequested()) and AbortShutdown() after it calls MaybeCompleteSnapshotValidation. This would make the test more realistic and add better coverage, but I didn't check if that worked.\r\n\r\nThis doesn't work, because calling `StartShutdown` without calling `InitShutdownState` beforehand triggers an `assert(0)`.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T20:16:50Z",
      "diff_hunk" : "@@ -25,6 +25,11 @@ class KernelNotifications : public kernel::Notifications\n     void progress(const std::string& title, int progress_percent, bool resume_possible) override;\n \n     void warning(const bilingual_str& warning) override;\n+\n+    void fatalError(const std::string& debug_message, const bilingual_str& user_message = {}) override;\n+\n+    //! Useful for tests, can be set to false to avoid shutdown on fatal error.\n+    bool m_shutdown_on_fatal_error{true};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199336080",
      "id" : 1199336080,
      "in_reply_to_id" : 1198784478,
      "line" : 32,
      "node_id" : "PRRC_kwDOABII585HfGqQ",
      "original_commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "original_line" : 32,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/node/kernel_notifications.h",
      "position" : 32,
      "pull_request_review_id" : 1435041479,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199336080/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T20:16:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199336080",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199375548"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199375548"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> This doesn't work, because calling `StartShutdown` without calling `InitShutdownState` beforehand triggers an `assert(0)`.\r\n\r\nI guess then question would be why can't the test framework call `InitShutdownState`? But this suggests that if we remove globals in shutdown code later (I don't know if that's required for the kernel), we should be able to get rid of the `m_shutdown_on_fatal_error` variable pretty easily later too.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-19T20:42:00Z",
      "diff_hunk" : "@@ -25,6 +25,11 @@ class KernelNotifications : public kernel::Notifications\n     void progress(const std::string& title, int progress_percent, bool resume_possible) override;\n \n     void warning(const bilingual_str& warning) override;\n+\n+    void fatalError(const std::string& debug_message, const bilingual_str& user_message = {}) override;\n+\n+    //! Useful for tests, can be set to false to avoid shutdown on fatal error.\n+    bool m_shutdown_on_fatal_error{true};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199375548",
      "id" : 1199375548,
      "in_reply_to_id" : 1198784478,
      "line" : 32,
      "node_id" : "PRRC_kwDOABII585HfQS8",
      "original_commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "original_line" : 32,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/node/kernel_notifications.h",
      "position" : 32,
      "pull_request_review_id" : 1435098253,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199375548/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-19T20:42:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199375548",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199572071"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199572071"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> but is there a bug?\r\n\r\nNo, there is not. I've double-checked the code, it looks OK for me too.",
      "commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "created_at" : "2023-05-20T07:13:34Z",
      "diff_hunk" : "@@ -42,6 +44,7 @@ struct ChainstateManagerOpts {\n     DBOptions block_tree_db{};\n     DBOptions coins_db{};\n     CoinsViewOptions coins_view{};\n+    Notifications& notifications;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1199572071",
      "id" : 1199572071,
      "in_reply_to_id" : 1199037376,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII585HgARn",
      "original_commit_id" : "d96c82a76775b1a41c098e6af60130fbdbba9975",
      "original_line" : 47,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/chainstatemanager_opts.h",
      "position" : 13,
      "pull_request_review_id" : 1435373256,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199572071/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-20T07:13:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199572071",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Reviewing the code:\r\n\r\n- [x] 974b4293a5f2fe01302c608bf0063e3b52721d0b \"kernel: Add notification interface\"\r\n- [x] ec5043d8c120332c0bf916b5b576aff8374af1ed \"kernel: Add headerTip method to notifications\"\r\n- [x] 1be1c16b70edc5def98eb1903cee08b5d546ba88 \"kernel: Add progress method to notifications\"\r\n[+1](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198713287) for changing the type of the parameter `title` from `std::string&` to `bilingual_str&`\r\n- [x] 483fe64956179872e5821483474c52d955949e40 \"kernel: Add warning method to notifications\"\r\n- [x] 3785d38417618e921c5233cf14aa3c802f37387b \"refactor: Move ScheduleBatchPriority to its own file\"\r\n- [x] c05c15cc7b4fb9052b87bc2f8ea0500cd5218f4e \"refactor: Split util::insert into its own file\"\r\n- [x] 465a3d2b90d3a7ad523201214e6bbad9de9ea79e \"refactor: Split util::AnyPtr into its own file\"\r\n- [x] e850319d5336335a9efbf04307261fb565b7bc68 \"refactor: Move system from util to common library\"\r\n- [x] ce4b11d717ca1c6b0950aac82ede448d6689ff74 \"scripted-diff: Rename FatalError to FatalErrorf\"\r\n- [x] d96c82a76775b1a41c098e6af60130fbdbba9975 \"kernel: Add fatalError method to notifications\"\r\nnit: in `ChainstateManager` function member definitions, to call `ChainstateManager::GetNotifications`, `GetNotifications()` is used 2 times, `this->GetNotifications()` is used 2 times as well. Could it be consistent?",
      "created_at" : "2023-05-20T07:26:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1555785546",
      "id" : 1555785546,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cu2dK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555785546/reactions"
      },
      "updated_at" : "2023-05-20T09:29:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555785546",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated d96c82a76775b1a41c098e6af60130fbdbba9975 -> a30cd548f1bc0ed73a4e157c6e81dbcf2542a916 ([chainstateRmKernelUiInterface_10](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_10) -> [chainstateRmKernelUiInterface_11](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_11), [compare](https://github.com/TheCharlatan/bitcoin/compare/chainstateRmKernelUiInterface_10..chainstateRmKernelUiInterface_11)).\r\n* Addressed @hebasto's [comment](https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1555785546), improving consistency when calling `GetNotifications`.\r\n* Addressed @MarcoFalke's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198680321), changed `CBlockIndex*` to `CBlockIndex&`.\r\n* Addressed @MarcoFalke's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198713287), change progress function signature to take a `bilingual_str`.\r\n* Addressed @MarcoFalke's [comment_0](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198753425) and [comment_1](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198758293), cleaning up the includes.\r\n* Added @ryanofsky's [suggestion](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1198831873), a docstring for `fatalError`.\r\n",
      "created_at" : "2023-05-20T09:55:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1555876922",
      "id" : 1555876922,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cvMw6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555876922/reactions"
      },
      "updated_at" : "2023-05-20T09:55:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555876922",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased a30cd548f1bc0ed73a4e157c6e81dbcf2542a916 -> bbfbcd0360e486d47025a412f2c0f4e8535ab255 ([chainstateRmKernelUiInterface_11](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_11) -> [chainstateRmKernelUiInterface_12](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_12), [compare](https://github.com/TheCharlatan/bitcoin/compare/chainstateRmKernelUiInterface_11..chainstateRmKernelUiInterface_12)).\r\n* Fixed broken include introduced by https://github.com/bitcoin/bitcoin/pull/27021\r\n",
      "created_at" : "2023-05-20T10:11:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1555879559",
      "id" : 1555879559,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cvNaH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555879559/reactions"
      },
      "updated_at" : "2023-05-20T10:11:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555879559",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   }
]
