[
   {
      "author_association" : "MEMBER",
      "body" : "Please include exact steps to reproduce. (commit, os, every command line, ...)",
      "created_at" : "2018-08-10T11:19:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/13933#issuecomment-412054039",
      "id" : 412054039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13933",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxMjA1NDAzOQ==",
      "updated_at" : "2018-08-10T11:19:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/412054039",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks @MarcoFalke for the follow-up. Actually the steps to reproduce crash are just not many. There's a core-dump right the --help command. Here below are the setup details, a run session & GDB trace as well. Can you please help figure out what's going wrong?\r\n\r\n[Platform]\r\nI have a couple of old tilegx (now defunct processor) servers & thought of putting it to good use. To begin with it had to be upgraded with toolchain for the dependencies mentioned here: ( https://github.com/bitcoin/bitcoin/blob/master/doc/dependencies.md ). So here's the tools inventory:\r\n  - CPU Tilera tilegex, 64bit, LE.\r\n  - Linux kernel 3.4.61, tilegx GNU/Linux\r\n  - GCC / G++  4..9.2, Binutils 2.21\r\n  - autoconf 2.69, automake 1.41.1, pkg-config 0.28\r\n  - OpenSSL 1.0.1p\r\n  - Python 2.7.10\r\n  - Libevent 2.1.8, bzip2 1.0.6\r\n  **- Libboost 1.64**\r\n\r\n[ bitcoin-core]\r\nThe sources cloned from https://github.com/bitcoin & were checked for almost all tags down to 0.9.0 version. But the same crash is observed for all the versions, including master, v0.16.0 and so on. For example, the sources w/ v0.9.0 tag were build as follows:\r\n\r\n**bitcoin $** git worktree add ../v0.9.0 --no-checkout --detach && cd ../v0.9.0 && git checkout -b v0.9.0 --\r\n**v0.9.0 $** ./autogen\r\n**v0.9.0 $** ./configure --prefix=$HOME/usr CC=gcc CXX=g++ CXXFLAGS=\"-Wno-deprecated\" --with-boost=$HOME/usr LDFLAGS=\"-Wl,-rpath=$HOME/usr/lib\" --enable-hardening --enable-static  --enable-wallet\r\n...\r\nFixing libtool for -rpath problems.\r\n\r\nOptions used to compile and link:\r\n  with wallet   = yes\r\n  with gui / qt = no\r\n  with zmq      = yes\r\n  with test     = yes\r\n  with bench    = yes\r\n  with upnp     = auto\r\n  use asm       = yes\r\n  sanitizers    = \r\n  debug enabled = no\r\n  gprof enabled = no\r\n  werror        = no\r\n\r\n  target os     = linux\r\n  build os      = \r\n\r\n  CC            = gcc\r\n  CFLAGS        = -g -O2\r\n  CPPFLAGS      =   -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=2  -DHAVE_BUILD_INFO -D__STDC_FORMAT_MACROS\r\n  CXX           = g++ -std=c++11\r\n  CXXFLAGS      =   -Wstack-protector -fstack-protector-all     -Wno-deprecated\r\n  LDFLAGS       = -pthread  -Wl,-z,relro -Wl,-z,now -pie  -Wl,-rpath=/home/girish/usr/lib\r\n  ARFLAGS       = cr\r\n..\r\n**v0.9.0 $** make\r\nMaking all in src\r\nmake[1]: Entering directory ...\r\n...\r\n  CXXLD    bitcoind\r\n  CXXLD    bench/bench_bitcoin\r\n  CXXLD    test/test_bitcoin\r\nmake[2]: Leaving directory ...\r\n**v0.9.0 $**\r\n**v0.9.0 $** ldd src/bitcoind\r\n\tlinux-vdso.so.1 =>  (0x000001fff7f10000)\r\n\tlibboost_system.so.1.64.0 => /home/girish/usr/lib/libboost_system.so.1.64.0 (0x000001fff5df0000)\r\n\tlibboost_filesystem.so.1.64.0 => /home/girish/usr/lib/libboost_filesystem.so.1.64.0 (0x000001fff5db0000)\r\n\tlibboost_thread.so.1.64.0 => /home/girish/usr/lib/libboost_thread.so.1.64.0 (0x000001fff5d70000)\r\n\tlibboost_chrono.so.1.64.0 => /home/girish/usr/lib/libboost_chrono.so.1.64.0 (0x000001fff5d50000)\r\n\tlibdb_cxx-4.8.so => /home/girish/usr/lib/libdb_cxx-4.8.so (0x000001fff5aa0000)\r\n\tlibpthread.so.0 => /lib/libpthread.so.0 (0x000001fff5a10000)\r\n\tlibstdc++.so.6 => /home/girish/usr/lib/libstdc++.so.6 (0x000001fff5870000)\r\n\tlibssl.so.1.0.0 => /home/girish/usr/lib/libssl.so.1.0.0 (0x000001fff57d0000)\r\n\tlibcrypto.so.1.0.0 => /home/girish/usr/lib/libcrypto.so.1.0.0 (0x000001fff5500000)\r\n\tlibevent_pthreads-2.1.so.6 => /home/girish/usr/lib/libevent_pthreads-2.1.so.6 (0x000001fff54e0000)\r\n\tlibevent-2.1.so.6 => /home/girish/usr/lib/libevent-2.1.so.6 (0x000001fff5430000)\r\n\tlibrt.so.1 => /lib/librt.so.1 (0x000001fff5400000)\r\n\tlibm.so.6 => /lib/libm.so.6 (0x000001fff52c0000)\r\n\tlibgcc_s.so.1 => /home/girish/usr/lib/libgcc_s.so.1 (0x000001fff5280000)\r\n\tlibc.so.6 => /lib/libc.so.6 (0x000001fff5050000)\r\n\t/lib/ld.so.1 (0x0000015555550000)\r\n\tlibdl.so.2 => /lib/libdl.so.2 (0x000001fff5020000)\r\n\tlibz.so.1 => /home/girish/usr/lib/libz.so.1 (0x000001fff4ff0000)\r\nv0.9.0 $\r\n**v0.9.0 $** src/bitcoind  --help\r\nbitcoind: ./tinyformat.h:515: void tinyformat::detail::FormatArg::format(std::ostream&, const char*, const char*, int) const: Assertion `m_formatImpl' failed.\r\nAborted (core dumped)\r\nv0.9.0 $\r\nv0.9.0 $\r\n**v0.9.0 $** gdb --args src/bitcoind  --help\r\nGNU gdb (GDB) Red Hat Enterprise Linux (7.6.1)\r\n..\r\nGNU gdb (GDB) Red Hat Enterprise Linux (7.6.1)\r\nCopyright (C) 2013 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\r\nand \"show warranty\" for details.\r\nThis GDB was configured as \"tilegx-redhat-linux-gnu\".\r\nFor bug reporting instructions, please see:\r\n<http://www.gnu.org/software/gdb/bugs/>...\r\nReading symbols from /home/girish/work/BITCOIN/v0.9.0/src/bitcoind...done.\r\n(gdb) r\r\nStarting program: /home/girish/work/BITCOIN/v0.9.0/src/bitcoind --help\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/libthread_db.so.1\".\r\nbitcoind: ./tinyformat.h:515: void tinyformat::detail::FormatArg::format(std::ostream&, const char*, const char*, int) const: Assertion `m_formatImpl' failed.\r\n\r\nProgram received signal SIGABRT, Aborted.\r\n0x000001fff71fff80 in raise () from /lib/libc.so.6\r\n(gdb) \r\n**(gdb) bt**\r\n#0  0x000001fff71fff80 in raise () from /lib/libc.so.6\r\n#1  0x000001fff7202e50 in abort () from /lib/libc.so.6\r\n#2  0x000001fff71f4550 in __assert_fail_base () from /lib/libc.so.6\r\n#3  0x000001fff71f4690 in __assert_fail () from /lib/libc.so.6\r\n#4  0x00000155555f7f48 in tinyformat::detail::FormatArg::format(std::ostream&, char const*, char const*, int) const ()\r\n#5  0x00000155555fb400 in tinyformat::detail::formatImpl(std::ostream&, char const*, tinyformat::detail::FormatArg const*, int) ()\r\n#6  0x00000155555fc108 in tinyformat::vformat(std::ostream&, char const*, tinyformat::FormatList const&) ()\r\n#7  0x0000015555669b60 in void tinyformat::format<unsigned int>(std::ostream&, char const*, unsigned int const&) ()\r\n#8  0x0000015555633110 in std::string tinyformat::format<unsigned int>(char const*, unsigned int const&) ()\r\n#9  0x00000155555a8740 in SetupServerArgs() ()\r\n#10 0x000001555559dc28 in AppInit(int, char**) ()\r\n#11 0x000001555559f558 in main ()\r\n(gdb) \r\n----------------------------\r\n\r\nOnce again thanks for your help.\r\nGirish.\r\n(EDIT: Re-formatting highlights)",
      "created_at" : "2018-08-11T02:44:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/13933#issuecomment-412245774",
      "id" : 412245774,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13933",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxMjI0NTc3NA==",
      "updated_at" : "2018-08-11T02:52:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/412245774",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2419372?v=4",
         "events_url" : "https://api.github.com/users/girishvg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/girishvg/followers",
         "following_url" : "https://api.github.com/users/girishvg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/girishvg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/girishvg",
         "id" : 2419372,
         "login" : "girishvg",
         "node_id" : "MDQ6VXNlcjI0MTkzNzI=",
         "organizations_url" : "https://api.github.com/users/girishvg/orgs",
         "received_events_url" : "https://api.github.com/users/girishvg/received_events",
         "repos_url" : "https://api.github.com/users/girishvg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/girishvg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/girishvg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/girishvg"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "can somebody help?\r\nthanks!",
      "created_at" : "2018-08-28T03:35:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/13933#issuecomment-416440226",
      "id" : 416440226,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13933",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxNjQ0MDIyNg==",
      "updated_at" : "2018-08-28T03:35:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/416440226",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2419372?v=4",
         "events_url" : "https://api.github.com/users/girishvg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/girishvg/followers",
         "following_url" : "https://api.github.com/users/girishvg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/girishvg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/girishvg",
         "id" : 2419372,
         "login" : "girishvg",
         "node_id" : "MDQ6VXNlcjI0MTkzNzI=",
         "organizations_url" : "https://api.github.com/users/girishvg/orgs",
         "received_events_url" : "https://api.github.com/users/girishvg/received_events",
         "repos_url" : "https://api.github.com/users/girishvg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/girishvg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/girishvg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/girishvg"
      }
   }
]
