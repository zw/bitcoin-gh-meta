{
   "assignee" : null,
   "body" : "checkBalanceChanged() is quite expensive on larger wallets as we loop mapWallet\r\nseveral times for each balance-type.\r\n\r\nThere already is a periodical function pollBalanceChanged().\r\nSo instead of calling checkBalanceChanged() for each updated transaction, set a flag\r\nfForceCheckBalanceChanged, which forces pollBalanceChanged() to check the balance\r\non the next run.\r\n\r\nFor example\r\nimportaddress mvqaxopu9Uef2qjXSV3fGrp6DcEYnCoYWK\r\nadds like 20000 transactions to the wallet.\r\nThis means after rescan currently we loop mapWallet 120000 times,\r\njust to check the balance, which causes 100% cpu for a while.\r\n\r\nUnrelated change: Move showProgress signal after the QueueProcessing, so that the progressbar is still shown, while the 20000 txs get added to the GUI.",
   "closed_at" : "2014-09-08T10:00:16Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 3,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4712/comments",
   "created_at" : "2014-08-17T01:26:01Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4712/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/4712",
   "id" : 40424564,
   "labels" : [
      {
         "color" : "02d7e1",
         "name" : "Wallet",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4712/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 4712,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/4712.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4712",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/4712.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4712"
   },
   "state" : "closed",
   "title" : "[Qt] Call checkBalanceChanged() periodically instead for every updated tx",
   "updated_at" : "2014-09-08T10:00:16Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4712",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
      "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
      "followers_url" : "https://api.github.com/users/cozz/followers",
      "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
      "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/cozz",
      "id" : 2814559,
      "login" : "cozz",
      "organizations_url" : "https://api.github.com/users/cozz/orgs",
      "received_events_url" : "https://api.github.com/users/cozz/received_events",
      "repos_url" : "https://api.github.com/users/cozz/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/cozz"
   }
}
