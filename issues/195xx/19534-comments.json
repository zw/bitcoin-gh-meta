[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2020-07-16T16:12:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-659515632",
      "id" : 659515632,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1OTUxNTYzMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-22T23:07:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/659515632",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased to wake up Travis",
      "created_at" : "2020-07-16T18:12:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-659583340",
      "id" : 659583340,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1OTU4MzM0MA==",
      "updated_at" : "2020-07-16T18:12:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/659583340",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK eb22eeda5b37afea0649688690e04c00d5a6dbfd\r\n\r\nIf you make any changes, consider running `clang-format`.  No worries if you don't, we can always do it later in the roadmap.  Might be nice to clean up the formatting of some of the other methods here as well, now that we're touching so much of this.",
      "created_at" : "2020-07-17T03:43:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-659824665",
      "id" : 659824665,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1OTgyNDY2NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-17T03:43:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/659824665",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5553787?v=4",
         "events_url" : "https://api.github.com/users/troygiorshev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/troygiorshev/followers",
         "following_url" : "https://api.github.com/users/troygiorshev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/troygiorshev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/troygiorshev",
         "id" : 5553787,
         "login" : "troygiorshev",
         "node_id" : "MDQ6VXNlcjU1NTM3ODc=",
         "organizations_url" : "https://api.github.com/users/troygiorshev/orgs",
         "received_events_url" : "https://api.github.com/users/troygiorshev/received_events",
         "repos_url" : "https://api.github.com/users/troygiorshev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/troygiorshev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/troygiorshev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/troygiorshev"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "So if i read this correct, if this is merged we narrow before even having benefit and v3 , and say an address is not routable if one flag in  CNetAddr m_net say's something else than  m_net == NET_IPV6 and skip that the Bitcoin imperative  'data decides'\r\n\r\nSo you want to change even the old ADDRv1 logic while BIP155 say's don't. hmm...\r\nThe way bitcoin is used in the wild is often strange and has hidden paths, i can only urge you to not touch in any way the old ADDR logic and the way that net works.\r\n\r\nAnd btw if ip is filled with << instead of memcpy and data don't decide, how sophisticated is the checksum plan for bit or byte errors in the new ADDRv1/v2 stream?   \r\n\r\nbtw Since the BIP155  ADDv2 is to send ip2 and v3 just as 32 byte without checksum, i would also recommend to concat least sig byte of hash(m net | 32 byte ) before send, but that;s prob a PR for BIP155.  \r\nedit@saibato: Not that to provide piggy pack support for tor onions in ipv6 packets when ipv6 in #1021 was merged is a holy move, but time passed by and the value of bitcoin is not only the timestamp consensus, but AFAICS also the network itself.   ",
      "created_at" : "2020-07-17T07:08:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-659911102",
      "id" : 659911102,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1OTkxMTEwMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-17T09:56:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/659911102",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, Approach ACK. \r\n\r\nThe [BIP](https://github.com/bitcoin/bips/blob/master/bip-0155.mediawiki#specification) refers to I2P and CJDNS overlay networks and gives them their own network IDs. An I2P address is a Tor v3 address and a CJDNS address is a IPV6 address (or at least they are the same size) right? I'm just trying to understand why they warrant their own reserved network IDs in the BIP but don't seem to be implemented here?\r\n\r\n",
      "created_at" : "2020-07-18T10:49:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-660464773",
      "id" : 660464773,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MDQ2NDc3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-18T10:49:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/660464773",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r456797618"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/456797618"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is this code still needed in `GetNetwork()`?\r\n```cpp\r\n    if (IsInternal())\r\n        return NET_INTERNAL;\r\n```",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-18T14:56:17Z",
      "diff_hunk" : "@@ -322,13 +330,7 @@ enum Network CNetAddr::GetNetwork() const\n     if (!IsRoutable())\n         return NET_UNROUTABLE;\n \n-    if (IsIPv4())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r456797618",
      "id" : 456797618,
      "line" : 325,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc5NzYxOA==",
      "original_commit_id" : "eb22eeda5b37afea0649688690e04c00d5a6dbfd",
      "original_line" : 325,
      "original_position" : 184,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 184,
      "pull_request_review_id" : 451060570,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/456797618",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r456812354"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/456812354"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Suggested change:\r\n``` Code\r\n/// A set of special crafted FC00/7 IPv6 addresses we use to map a string or FQDN to an IPv6 address.\r\n/// We uses these important fake addresses also in CAddrMan to keep track of which DNS seeds were used \r\n/// and how we manage buckets and peers.\r\n```\r\n With that in mind when dev  we can take special care in transit to ADDRv2 to not mess with this address realm,\r\nbecause we need them later to get our new long addresses in and out from peers,dat ?\r\n\r\n",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-18T17:49:58Z",
      "diff_hunk" : "@@ -16,21 +16,47 @@\n #include <string>\n #include <vector>\n \n+/**\n+ * A network type.\n+ * @note An address may belong to more than one network, for example `10.0.0.1`\n+ * belongs to both `NET_UNROUTABLE` and `NET_IPV4`.\n+ * Keep these sequential starting from 0 and `NET_MAX` as the last entry.\n+ * We have loops like `for (int i = 0; i < NET_MAX; i++)` that expect to iterate\n+ * over all enum values and also `GetExtNetwork()` \"extends\" this enum by\n+ * introducing standalone constants starting from `NET_MAX`.\n+ */\n enum Network\n {\n+    /// Addresses from these networks are not publicly routable on the global Internet.\n     NET_UNROUTABLE = 0,\n+\n+    /// IPv4\n     NET_IPV4,\n+\n+    /// IPv6\n     NET_IPV6,\n+\n+    /// TORv2\n     NET_ONION,\n+\n+    /// A set of dummy addresses that map a name to an IPv6 address.\n     NET_INTERNAL,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r456812354",
      "id" : 456812354,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgxMjM1NA==",
      "original_commit_id" : "eb22eeda5b37afea0649688690e04c00d5a6dbfd",
      "original_line" : 46,
      "original_position" : 28,
      "original_start_line" : 41,
      "path" : "src/netaddress.h",
      "position" : null,
      "pull_request_review_id" : 451072183,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/456812354",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r457193721"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457193721"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good question - no. But it was not necessary before this PR either. Some good simplification can be done here even on `master`. I will see whether it is better to add a new commit to this PR or file it as a separate PR.",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-20T08:56:03Z",
      "diff_hunk" : "@@ -322,13 +330,7 @@ enum Network CNetAddr::GetNetwork() const\n     if (!IsRoutable())\n         return NET_UNROUTABLE;\n \n-    if (IsIPv4())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r457193721",
      "id" : 457193721,
      "in_reply_to_id" : 456797618,
      "line" : 325,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzE5MzcyMQ==",
      "original_commit_id" : "eb22eeda5b37afea0649688690e04c00d5a6dbfd",
      "original_line" : 325,
      "original_position" : 184,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 184,
      "pull_request_review_id" : 451418706,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457193721",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> The [BIP](https://github.com/bitcoin/bips/blob/master/bip-0155.mediawiki#specification) refers to I2P and CJDNS overlay networks and gives them their own network IDs. An I2P address is a Tor v3 address and a CJDNS address is a IPV6 address (or at least they are the same size) right? I'm just trying to understand why they warrant their own reserved network IDs in the BIP but don't seem to be implemented here?\r\n\r\n@michaelfolkson, the sizes of I2P and Torv3 addresses are equal (32 bytes) and also IPv6 and CJDNS addresses are both 16 bytes, but their interpretation is different - ie given some chunk of 32 bytes we need to know whether that is an I2P address or Torv3 address. This is why they have a separate network ids. Also there could be an overlap - e.g. some 16 bytes could both be valid IPv6 address and a valid CJDNS address.\r\n\r\nThe code in this PR and its parent PR (https://github.com/bitcoin/bitcoin/pull/19031) aims to implement ADDRv2 address format and signaling with the networks that are currently supported. Once that is done, on top of it, we will implement new networks like Torv3, I2P and others.",
      "created_at" : "2020-07-20T09:46:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-660923972",
      "id" : 660923972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MDkyMzk3Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-20T09:46:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/660923972",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r457406587"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457406587"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Correction - it is needed, otherwise this test would fail:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/476436b/src/test/netbase_tests.cpp#L45\r\n\r\nAnyway, I made some simplifications on top of this PR that remove the \"extending\" of `enum Network` with `NET_UNKNOWN` and `NET_TEREDO` and also removed `GetExtNetwork()`. To avoid distractions, I will not append those commits to this PR but would rather open a new PR against `master`, once this PR gets merged.",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-20T13:54:46Z",
      "diff_hunk" : "@@ -322,13 +330,7 @@ enum Network CNetAddr::GetNetwork() const\n     if (!IsRoutable())\n         return NET_UNROUTABLE;\n \n-    if (IsIPv4())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r457406587",
      "id" : 457406587,
      "in_reply_to_id" : 456797618,
      "line" : 325,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQwNjU4Nw==",
      "original_commit_id" : "eb22eeda5b37afea0649688690e04c00d5a6dbfd",
      "original_line" : 325,
      "original_position" : 184,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 184,
      "pull_request_review_id" : 451628069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457406587",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r457421199"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457421199"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks @vasild, looking forward to reviewing the simplifications.",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-20T14:10:13Z",
      "diff_hunk" : "@@ -322,13 +330,7 @@ enum Network CNetAddr::GetNetwork() const\n     if (!IsRoutable())\n         return NET_UNROUTABLE;\n \n-    if (IsIPv4())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r457421199",
      "id" : 457421199,
      "in_reply_to_id" : 456797618,
      "line" : 325,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQyMTE5OQ==",
      "original_commit_id" : "eb22eeda5b37afea0649688690e04c00d5a6dbfd",
      "original_line" : 325,
      "original_position" : 184,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 184,
      "pull_request_review_id" : 451642444,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457421199",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r457426586"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457426586"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I extended the comment, thanks!\r\n\r\nIn https://github.com/bitcoin/bitcoin/pull/19031 we drop the 6-byte `fd6b:88c0:8724` prefix from these addresses and store them in memory as `m_net=NET_INTERNAL, m_addr=...10 bytes...`. Serializing that to `addrv1` remains unchanged (we add the `fd6b:88c0:8724` prefix) and they are never serialized as `addrv2`.",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-20T14:16:29Z",
      "diff_hunk" : "@@ -16,21 +16,47 @@\n #include <string>\n #include <vector>\n \n+/**\n+ * A network type.\n+ * @note An address may belong to more than one network, for example `10.0.0.1`\n+ * belongs to both `NET_UNROUTABLE` and `NET_IPV4`.\n+ * Keep these sequential starting from 0 and `NET_MAX` as the last entry.\n+ * We have loops like `for (int i = 0; i < NET_MAX; i++)` that expect to iterate\n+ * over all enum values and also `GetExtNetwork()` \"extends\" this enum by\n+ * introducing standalone constants starting from `NET_MAX`.\n+ */\n enum Network\n {\n+    /// Addresses from these networks are not publicly routable on the global Internet.\n     NET_UNROUTABLE = 0,\n+\n+    /// IPv4\n     NET_IPV4,\n+\n+    /// IPv6\n     NET_IPV6,\n+\n+    /// TORv2\n     NET_ONION,\n+\n+    /// A set of dummy addresses that map a name to an IPv6 address.\n     NET_INTERNAL,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r457426586",
      "id" : 457426586,
      "in_reply_to_id" : 456812354,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQyNjU4Ng==",
      "original_commit_id" : "eb22eeda5b37afea0649688690e04c00d5a6dbfd",
      "original_line" : 46,
      "original_position" : 28,
      "original_start_line" : 41,
      "path" : "src/netaddress.h",
      "position" : null,
      "pull_request_review_id" : 451648403,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457426586",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Extended the `NET_INTERNAL` comment as per @Saibato's suggestion.",
      "created_at" : "2020-07-20T14:19:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-661069296",
      "id" : 661069296,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MTA2OTI5Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-20T14:19:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/661069296",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r457443302"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457443302"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In general some of this might be optimized out by the compiler,  \r\nAnd i would prefer for the transition period something like this that we can refactor out when all works fine\r\nto an compiler and bytecode friendly version.\r\n\r\nI would prefer constructions for all those ipv6 overrides in the rest of the code to look like this\r\nsuggested change: \r\n``` Code\r\nif  (memcmp(ip, pchLocal, 16) == 0) && IsIPv6();\r\n```\r\nAnd some logging here and in the other overrides  i.e.  \r\n\r\n``` Code\r\nLogPrint(BCLog::ADDV2, \"old isXXXX() says so, ADDRv2 m_net did override with  value = xxx .....   \r\n```",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-20T14:34:03Z",
      "diff_hunk" : "@@ -235,7 +243,7 @@ bool CNetAddr::IsLocal() const\n \n     // IPv6 loopback (::1/128)\n     static const unsigned char pchLocal[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1};\n-    if (memcmp(ip, pchLocal, 16) == 0)\n+    if (IsIPv6() && memcmp(ip, pchLocal, 16) == 0)\n         return true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r457443302",
      "id" : 457443302,
      "line" : 252,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQ0MzMwMg==",
      "original_commit_id" : "662bb25efa0d164edace0cd2809ba85e5baf19fe",
      "original_line" : 252,
      "original_position" : 153,
      "original_start_line" : 238,
      "path" : "src/netaddress.cpp",
      "position" : 153,
      "pull_request_review_id" : 451665490,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : 238,
      "start_side" : "LEFT",
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457443302",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 662bb25 per `git diff eb22eed 662bb25` only change is improved documentation.",
      "created_at" : "2020-07-20T14:35:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-661078923",
      "id" : 661078923,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MTA3ODkyMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-20T14:35:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/661078923",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r457464165"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457464165"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Not that related here and just to your info, the follow up construction on this run in an assert failure when i made the v3 patch,\r\n\r\nThe structures need also some failure tolerance and flexibility.  \r\nDon;t mind if i am harsh and sometimes sarcastic, but you do here heart surgery and better not look good but beat the drum\r\n\r\nAlso to get in an out of peers and DNS seeds is somewhat unrelated to the data structure on the ADDR net.\r\nWe could easy use intern more data and flags on our address than we use on the wire.\r\nThose two structures need not to be the same. \r\nedit@saiboto what let me tend to ADDRv2 is 2038. tyi. ",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-20T14:56:15Z",
      "diff_hunk" : "@@ -16,21 +16,47 @@\n #include <string>\n #include <vector>\n \n+/**\n+ * A network type.\n+ * @note An address may belong to more than one network, for example `10.0.0.1`\n+ * belongs to both `NET_UNROUTABLE` and `NET_IPV4`.\n+ * Keep these sequential starting from 0 and `NET_MAX` as the last entry.\n+ * We have loops like `for (int i = 0; i < NET_MAX; i++)` that expect to iterate\n+ * over all enum values and also `GetExtNetwork()` \"extends\" this enum by\n+ * introducing standalone constants starting from `NET_MAX`.\n+ */\n enum Network\n {\n+    /// Addresses from these networks are not publicly routable on the global Internet.\n     NET_UNROUTABLE = 0,\n+\n+    /// IPv4\n     NET_IPV4,\n+\n+    /// IPv6\n     NET_IPV6,\n+\n+    /// TORv2\n     NET_ONION,\n+\n+    /// A set of dummy addresses that map a name to an IPv6 address.\n     NET_INTERNAL,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r457464165",
      "id" : 457464165,
      "in_reply_to_id" : 456812354,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQ2NDE2NQ==",
      "original_commit_id" : "eb22eeda5b37afea0649688690e04c00d5a6dbfd",
      "original_line" : 46,
      "original_position" : 28,
      "original_start_line" : 41,
      "path" : "src/netaddress.h",
      "position" : null,
      "pull_request_review_id" : 451686893,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457464165",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "reACK 662bb25\r\n\r\nOnly change is in a comment.",
      "created_at" : "2020-07-20T15:50:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-661123794",
      "id" : 661123794,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MTEyMzc5NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-20T15:50:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/661123794",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5553787?v=4",
         "events_url" : "https://api.github.com/users/troygiorshev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/troygiorshev/followers",
         "following_url" : "https://api.github.com/users/troygiorshev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/troygiorshev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/troygiorshev",
         "id" : 5553787,
         "login" : "troygiorshev",
         "node_id" : "MDQ6VXNlcjU1NTM3ODc=",
         "organizations_url" : "https://api.github.com/users/troygiorshev/orgs",
         "received_events_url" : "https://api.github.com/users/troygiorshev/received_events",
         "repos_url" : "https://api.github.com/users/troygiorshev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/troygiorshev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/troygiorshev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/troygiorshev"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "tyi, I will not ACK or NACK any of ADDRv2 roadmap, Since Tor v2 will be deprecated sooner or later. I will try to start a side project to morph some old legacy tunnel code code to a special general 'bitcoin-peer-address' tor or whatever  proxy wrapper, for all old nodes to have full v3 and after 2038 support, without need to softfork  This will from day one, mitigate any chainsplit or censorship.  ",
      "created_at" : "2020-07-21T08:19:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-661709850",
      "id" : 661709850,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MTcwOTg1MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-21T08:19:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/661709850",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Just to clarify - ADDRv2/BIP155 does not involve a softfork, chainsplit or censorship. Old nodes (e.g. 0.19.1) can't have full support for TORv3 because they don't contain the code for it.",
      "created_at" : "2020-07-21T13:20:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-661857276",
      "id" : 661857276,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MTg1NzI3Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-21T13:20:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/661857276",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I full support ADDRv2 and i will comment and provide review.\r\nAlso imo ADDRv2 its inevitable for master.\r\n\r\nMy approach aims to let old tor nodes not behind and be forced to softfork when tor v2 fades out. \r\n\r\n> can't have full support for TORv3 because they don't contain the code for it\r\n\r\nI love this cant's in software dev, because i can,\r\nThere is a great misconception in how MITM or say jmp esp works when its clear that you don;t have the space,bytes or source code on the wire, that always astound me; why not use a bit hacking voodoo for some useful things,when we could tunnel because we have solid keys\r\n\r\nThat *wrapper* is on track and orthogonal to this here and when ADDRv2 is there, it will be even more easy to support this.\r\n\r\nMaybe it will make its path to contrib to assist all old node software in support of protocols aside from internet protocol.     \r\n\r\nedit@saibato\r\nBtw:It also astound me in many defi or blockchain software projects how they think the real internet or tor works, there are multiple ways to do the wrapper, and one is of such nature. that there is a minor chance that you could hear some jaw bones touch the floor.\r\n\r\n<details><summary>tl;tr </summary>\r\n\r\nThe status quo, so far is that even now every tor v2 proxy capable node, can even now connect over tor v3 9050 socks5 proxy to any node that provides a v3 inbound hidden service over torrc.  What missing is a bit virgin seeding that could be done by a signed script file and banman and conman bitcoin logic and then address gossip about that and to store this, for node reboot, if you don;t want to run every time a long bash cli  addnode  <v3.onion> add .script or a long cmdline. All can be solved without touching the old software. And since we have a great FC00/7 space for grabs in all old nodes, that could i.e. bind tun or taps to them to proxy out to even stranger protocols.\r\nWhat is the misconception, is that we need to know the full 256 address or greater pubkey space of other protocols, when in fact to work for bitcoin we only will ever have a short directory or index list we need to gossip, that fits easy in the enormous 80bit FC00/7 index space, we have in every node even now.\r\nedit@saibato;\r\nWhen this and the followup PR's gain track and we will have ADDRv2 nodes in the wild, users can run anyway stripped down master versions, they connect to local or remote with there old node to advertise there v3 address, if they wish so, but honestly the nature of hidden net, is that its hidden, so to advertise inbound is anyway not so sexy.  I guess, if we would have  a by satoshi keys signed v3/ip2 whatever seeds list, that will be enough to bootstrap and there would be almost none old node, to not use such a list?        \r\n</details>",
      "created_at" : "2020-07-21T13:56:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-661877269",
      "id" : 661877269,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MTg3NzI2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-22T04:54:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/661877269",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Coverage report of modified code: https://people.freebsd.org/~vd/pr19534_662bb25ef_coverage/\r\n(all modified code is covered by tests)",
      "created_at" : "2020-07-21T17:14:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-661991446",
      "id" : 661991446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MTk5MTQ0Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-21T17:14:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/661991446",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Just to clarify - ADDRv2/BIP155 does not involve a softfork, chainsplit or censorship. Old nodes (e.g. 0.19.1) can't have full support for TORv3 because they don't contain the code for it.\r\n\r\nwow, that was really funny took,me a while to figure out the zero. is a morse placeholder. This kind of humor makes really fun and that i like so much when programing senator brains.  I almost tend to blind ACK ",
      "created_at" : "2020-07-22T09:00:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-662334186",
      "id" : 662334186,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MjMzNDE4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-22T09:00:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/662334186",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460407528"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460407528"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks for adding documentation here, it was not immediately clear to me what NET_INTERNAL was.",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-25T13:58:06Z",
      "diff_hunk" : "@@ -16,21 +16,50 @@\n #include <string>\n #include <vector>\n \n+/**\n+ * A network type.\n+ * @note An address may belong to more than one network, for example `10.0.0.1`\n+ * belongs to both `NET_UNROUTABLE` and `NET_IPV4`.\n+ * Keep these sequential starting from 0 and `NET_MAX` as the last entry.\n+ * We have loops like `for (int i = 0; i < NET_MAX; i++)` that expect to iterate\n+ * over all enum values and also `GetExtNetwork()` \"extends\" this enum by\n+ * introducing standalone constants starting from `NET_MAX`.\n+ */\n enum Network\n {\n+    /// Addresses from these networks are not publicly routable on the global Internet.\n     NET_UNROUTABLE = 0,\n+\n+    /// IPv4\n     NET_IPV4,\n+\n+    /// IPv6\n     NET_IPV6,\n+\n+    /// TORv2\n     NET_ONION,\n+\n+    /// A set of dummy addresses that map a name to an IPv6 address. These",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460407528",
      "id" : 460407528,
      "line" : 42,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQwNzUyOA==",
      "original_commit_id" : "662bb25efa0d164edace0cd2809ba85e5baf19fe",
      "original_line" : 42,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : 27,
      "pull_request_review_id" : 455286656,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460407528",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460407616"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460407616"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Please initialize the default here instead of in the constructor\r\n```\r\n    Network m_net{NET_IPV6};\r\n```",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-25T13:59:25Z",
      "diff_hunk" : "@@ -16,21 +16,50 @@\n #include <string>\n #include <vector>\n \n+/**\n+ * A network type.\n+ * @note An address may belong to more than one network, for example `10.0.0.1`\n+ * belongs to both `NET_UNROUTABLE` and `NET_IPV4`.\n+ * Keep these sequential starting from 0 and `NET_MAX` as the last entry.\n+ * We have loops like `for (int i = 0; i < NET_MAX; i++)` that expect to iterate\n+ * over all enum values and also `GetExtNetwork()` \"extends\" this enum by\n+ * introducing standalone constants starting from `NET_MAX`.\n+ */\n enum Network\n {\n+    /// Addresses from these networks are not publicly routable on the global Internet.\n     NET_UNROUTABLE = 0,\n+\n+    /// IPv4\n     NET_IPV4,\n+\n+    /// IPv6\n     NET_IPV6,\n+\n+    /// TORv2\n     NET_ONION,\n+\n+    /// A set of dummy addresses that map a name to an IPv6 address. These\n+    /// addresses belong to RFC4193's fc00::/7 subnet (unique-local addresses).\n+    /// We use them to map a string or FQDN to an IPv6 address in CAddrMan to\n+    /// keep track of which DNS seeds were used.\n     NET_INTERNAL,\n \n+    /// Dummy value to indicate the number of NET_* constants.\n     NET_MAX,\n };\n \n-/** IP address (IPv6, or IPv4 using mapped IPv6 range (::FFFF:0:0/96)) */\n+/**\n+ * Network address.\n+ */\n class CNetAddr\n {\n     protected:\n+        /**\n+         * Network to which this address belongs.\n+         */\n+        Network m_net;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460407616",
      "id" : 460407616,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQwNzYxNg==",
      "original_commit_id" : "662bb25efa0d164edace0cd2809ba85e5baf19fe",
      "original_line" : 61,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : null,
      "pull_request_review_id" : 455286722,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460407616",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460407852"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460407852"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think it would make sense to add this detection out to a separate function, e.g. `SetLegacyIPV6` then call it here and in the deserialization logic, highlighting that it does auto-detection.",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-25T14:01:43Z",
      "diff_hunk" : "@@ -36,10 +37,20 @@ void CNetAddr::SetRaw(Network network, const uint8_t *ip_in)\n     switch(network)\n     {\n         case NET_IPV4:\n+            m_net = NET_IPV4;\n             memcpy(ip, pchIPv4, 12);\n             memcpy(ip+12, ip_in, 4);\n             break;\n         case NET_IPV6:\n+            if (memcmp(ip_in, pchIPv4, sizeof(pchIPv4)) == 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460407852",
      "id" : 460407852,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQwNzg1Mg==",
      "original_commit_id" : "662bb25efa0d164edace0cd2809ba85e5baf19fe",
      "original_line" : 45,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : null,
      "pull_request_review_id" : 455286866,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460407852",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460842357"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460842357"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It was unclear to me too :)\r\n",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-27T12:06:10Z",
      "diff_hunk" : "@@ -16,21 +16,50 @@\n #include <string>\n #include <vector>\n \n+/**\n+ * A network type.\n+ * @note An address may belong to more than one network, for example `10.0.0.1`\n+ * belongs to both `NET_UNROUTABLE` and `NET_IPV4`.\n+ * Keep these sequential starting from 0 and `NET_MAX` as the last entry.\n+ * We have loops like `for (int i = 0; i < NET_MAX; i++)` that expect to iterate\n+ * over all enum values and also `GetExtNetwork()` \"extends\" this enum by\n+ * introducing standalone constants starting from `NET_MAX`.\n+ */\n enum Network\n {\n+    /// Addresses from these networks are not publicly routable on the global Internet.\n     NET_UNROUTABLE = 0,\n+\n+    /// IPv4\n     NET_IPV4,\n+\n+    /// IPv6\n     NET_IPV6,\n+\n+    /// TORv2\n     NET_ONION,\n+\n+    /// A set of dummy addresses that map a name to an IPv6 address. These",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460842357",
      "id" : 460842357,
      "in_reply_to_id" : 460407528,
      "line" : 42,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0MjM1Nw==",
      "original_commit_id" : "662bb25efa0d164edace0cd2809ba85e5baf19fe",
      "original_line" : 42,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : 27,
      "pull_request_review_id" : 455719104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460842357",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Made 2 changes as per review suggestions:\r\n* [Initialize](https://github.com/bitcoin/bitcoin/pull/19534#pullrequestreview-455286722) `CNetAddr::m_net` in its definition instead of in the constructor\r\n* [Move](https://github.com/bitcoin/bitcoin/pull/19534#pullrequestreview-455286866) the code that detects non-IPv6 addresses embedded in IPv6 to a separate method\r\n",
      "created_at" : "2020-07-27T12:42:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-664372275",
      "id" : 664372275,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDM3MjI3NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-27T12:42:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664372275",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460861877"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460861877"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done: https://github.com/bitcoin/bitcoin/compare/662bb25efa0d164edace0cd2809ba85e5baf19fe..64897c5776f024662000528415315995e2a83d3c",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-27T12:43:28Z",
      "diff_hunk" : "@@ -16,21 +16,50 @@\n #include <string>\n #include <vector>\n \n+/**\n+ * A network type.\n+ * @note An address may belong to more than one network, for example `10.0.0.1`\n+ * belongs to both `NET_UNROUTABLE` and `NET_IPV4`.\n+ * Keep these sequential starting from 0 and `NET_MAX` as the last entry.\n+ * We have loops like `for (int i = 0; i < NET_MAX; i++)` that expect to iterate\n+ * over all enum values and also `GetExtNetwork()` \"extends\" this enum by\n+ * introducing standalone constants starting from `NET_MAX`.\n+ */\n enum Network\n {\n+    /// Addresses from these networks are not publicly routable on the global Internet.\n     NET_UNROUTABLE = 0,\n+\n+    /// IPv4\n     NET_IPV4,\n+\n+    /// IPv6\n     NET_IPV6,\n+\n+    /// TORv2\n     NET_ONION,\n+\n+    /// A set of dummy addresses that map a name to an IPv6 address. These\n+    /// addresses belong to RFC4193's fc00::/7 subnet (unique-local addresses).\n+    /// We use them to map a string or FQDN to an IPv6 address in CAddrMan to\n+    /// keep track of which DNS seeds were used.\n     NET_INTERNAL,\n \n+    /// Dummy value to indicate the number of NET_* constants.\n     NET_MAX,\n };\n \n-/** IP address (IPv6, or IPv4 using mapped IPv6 range (::FFFF:0:0/96)) */\n+/**\n+ * Network address.\n+ */\n class CNetAddr\n {\n     protected:\n+        /**\n+         * Network to which this address belongs.\n+         */\n+        Network m_net;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460861877",
      "id" : 460861877,
      "in_reply_to_id" : 460407616,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg2MTg3Nw==",
      "original_commit_id" : "662bb25efa0d164edace0cd2809ba85e5baf19fe",
      "original_line" : 61,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : null,
      "pull_request_review_id" : 455743591,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460861877",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460861970"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460861970"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done: https://github.com/bitcoin/bitcoin/compare/662bb25efa0d164edace0cd2809ba85e5baf19fe..64897c5776f024662000528415315995e2a83d3c",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-27T12:43:40Z",
      "diff_hunk" : "@@ -36,10 +37,20 @@ void CNetAddr::SetRaw(Network network, const uint8_t *ip_in)\n     switch(network)\n     {\n         case NET_IPV4:\n+            m_net = NET_IPV4;\n             memcpy(ip, pchIPv4, 12);\n             memcpy(ip+12, ip_in, 4);\n             break;\n         case NET_IPV6:\n+            if (memcmp(ip_in, pchIPv4, sizeof(pchIPv4)) == 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460861970",
      "id" : 460861970,
      "in_reply_to_id" : 460407852,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg2MTk3MA==",
      "original_commit_id" : "662bb25efa0d164edace0cd2809ba85e5baf19fe",
      "original_line" : 45,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : null,
      "pull_request_review_id" : 455743710,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460861970",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460873884"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460873884"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Comment no longer reflects the code.\r\n```suggestion\r\n            // Use SetLegacyIPv6() so that m_net is set correctly. For example\r\n            // ::FFFF:0102:0304 should be set as m_net=NET_IPV4 (1.2.3.4).\r\n```\r\nOr, maybe reword to avoid writing the name of a method in a comment.",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-27T13:04:07Z",
      "diff_hunk" : "@@ -100,7 +137,27 @@ class CNetAddr\n         friend bool operator!=(const CNetAddr& a, const CNetAddr& b) { return !(a == b); }\n         friend bool operator<(const CNetAddr& a, const CNetAddr& b);\n \n-        SERIALIZE_METHODS(CNetAddr, obj) { READWRITE(obj.ip); }\n+        /**\n+         * Serialize to a stream.\n+         */\n+        template <typename Stream>\n+        void Serialize(Stream& s) const\n+        {\n+            s << ip;\n+        }\n+\n+        /**\n+         * Unserialize from a stream.\n+         */\n+        template <typename Stream>\n+        void Unserialize(Stream& s)\n+        {\n+            unsigned char ip_temp[sizeof(ip)];\n+            s >> ip_temp;\n+            // Use SetRaw() so that m_net is set correctly. For example\n+            // ::FFFF:0102:0304 should be set as m_net=NET_IPV4 (1.2.3.4).",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460873884",
      "id" : 460873884,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg3Mzg4NA==",
      "original_commit_id" : "64897c5776f024662000528415315995e2a83d3c",
      "original_line" : 158,
      "original_position" : 90,
      "original_start_line" : 157,
      "path" : "src/netaddress.h",
      "position" : null,
      "pull_request_review_id" : 455759124,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-07-27T13:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460873884",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5553787?v=4",
         "events_url" : "https://api.github.com/users/troygiorshev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/troygiorshev/followers",
         "following_url" : "https://api.github.com/users/troygiorshev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/troygiorshev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/troygiorshev",
         "id" : 5553787,
         "login" : "troygiorshev",
         "node_id" : "MDQ6VXNlcjU1NTM3ODc=",
         "organizations_url" : "https://api.github.com/users/troygiorshev/orgs",
         "received_events_url" : "https://api.github.com/users/troygiorshev/received_events",
         "repos_url" : "https://api.github.com/users/troygiorshev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/troygiorshev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/troygiorshev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/troygiorshev"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460879998"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460879998"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Right! Updated.",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-27T13:13:54Z",
      "diff_hunk" : "@@ -100,7 +137,27 @@ class CNetAddr\n         friend bool operator!=(const CNetAddr& a, const CNetAddr& b) { return !(a == b); }\n         friend bool operator<(const CNetAddr& a, const CNetAddr& b);\n \n-        SERIALIZE_METHODS(CNetAddr, obj) { READWRITE(obj.ip); }\n+        /**\n+         * Serialize to a stream.\n+         */\n+        template <typename Stream>\n+        void Serialize(Stream& s) const\n+        {\n+            s << ip;\n+        }\n+\n+        /**\n+         * Unserialize from a stream.\n+         */\n+        template <typename Stream>\n+        void Unserialize(Stream& s)\n+        {\n+            unsigned char ip_temp[sizeof(ip)];\n+            s >> ip_temp;\n+            // Use SetRaw() so that m_net is set correctly. For example\n+            // ::FFFF:0102:0304 should be set as m_net=NET_IPV4 (1.2.3.4).",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460879998",
      "id" : 460879998,
      "in_reply_to_id" : 460873884,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg3OTk5OA==",
      "original_commit_id" : "64897c5776f024662000528415315995e2a83d3c",
      "original_line" : 158,
      "original_position" : 90,
      "original_start_line" : 157,
      "path" : "src/netaddress.h",
      "position" : null,
      "pull_request_review_id" : 455767272,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-07-27T13:13:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460879998",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "reACK bcfebb6d5511ad4c156868bc799831ace628a225 via `git range-diff master 64897c5 bcfebb6`",
      "created_at" : "2020-07-27T13:15:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-664389264",
      "id" : 664389264,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDM4OTI2NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-27T13:15:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664389264",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5553787?v=4",
         "events_url" : "https://api.github.com/users/troygiorshev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/troygiorshev/followers",
         "following_url" : "https://api.github.com/users/troygiorshev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/troygiorshev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/troygiorshev",
         "id" : 5553787,
         "login" : "troygiorshev",
         "node_id" : "MDQ6VXNlcjU1NTM3ODc=",
         "organizations_url" : "https://api.github.com/users/troygiorshev/orgs",
         "received_events_url" : "https://api.github.com/users/troygiorshev/received_events",
         "repos_url" : "https://api.github.com/users/troygiorshev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/troygiorshev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/troygiorshev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/troygiorshev"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated a comment to reflect that we now call `SetLegacyIPv6()` instead of `SetRaw()`, as per [suggestion](https://github.com/bitcoin/bitcoin/pull/19534#discussion_r460873884).",
      "created_at" : "2020-07-27T13:16:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-664390090",
      "id" : 664390090,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDM5MDA5MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-27T13:16:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664390090",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK bcfebb6 per `git diff 662bb25 bcfebb6`, code review, debug build/tests clean, ran bitcoind.",
      "created_at" : "2020-07-27T14:37:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-664436109",
      "id" : 664436109,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDQzNjEwOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-27T14:37:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664436109",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2020-07-28T19:44:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-665239856",
      "id" : 665239856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NTIzOTg1Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-28T19:44:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/665239856",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-29T11:31:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-665610663",
      "id" : 665610663,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NTYxMDY2Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-29T11:31:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/665610663",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r462805026"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/462805026"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Any reason to pass around fixed-length data with a raw data pointer (of arbitrary length) when type safe alternatives like span or std::array (probably not applicable in this case) are available?",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-30T07:33:37Z",
      "diff_hunk" : "@@ -28,19 +28,35 @@ CNetAddr::CNetAddr()\n \n void CNetAddr::SetIP(const CNetAddr& ipIn)\n {\n+    m_net = ipIn.m_net;\n     memcpy(ip, ipIn.ip, sizeof(ip));\n }\n \n+void CNetAddr::SetLegacyIPv6(const uint8_t ipv6[16])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r462805026",
      "id" : 462805026,
      "line" : 35,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjgwNTAyNg==",
      "original_commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "original_line" : 35,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 8,
      "pull_request_review_id" : 458152085,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-30T07:33:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/462805026",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r462826455"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/462826455"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The input has to be 16 bytes, in this case. Is there a way to enforce this in the type, for spans?\r\n(sure, the `[16]` doesn't do anything here either except as a signal to the programmer)",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-30T08:13:02Z",
      "diff_hunk" : "@@ -28,19 +28,35 @@ CNetAddr::CNetAddr()\n \n void CNetAddr::SetIP(const CNetAddr& ipIn)\n {\n+    m_net = ipIn.m_net;\n     memcpy(ip, ipIn.ip, sizeof(ip));\n }\n \n+void CNetAddr::SetLegacyIPv6(const uint8_t ipv6[16])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r462826455",
      "id" : 462826455,
      "in_reply_to_id" : 462805026,
      "line" : 35,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjgyNjQ1NQ==",
      "original_commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "original_line" : 35,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 8,
      "pull_request_review_id" : 458179847,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-30T08:14:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/462826455",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r462856369"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/462856369"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not sure, but I presumed spans could be of non-dynamic extent as well. Does this not work?\r\n\r\n```cpp\r\nconst std::span<uint8_t, 16>& ipv6",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-30T09:03:30Z",
      "diff_hunk" : "@@ -28,19 +28,35 @@ CNetAddr::CNetAddr()\n \n void CNetAddr::SetIP(const CNetAddr& ipIn)\n {\n+    m_net = ipIn.m_net;\n     memcpy(ip, ipIn.ip, sizeof(ip));\n }\n \n+void CNetAddr::SetLegacyIPv6(const uint8_t ipv6[16])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r462856369",
      "id" : 462856369,
      "in_reply_to_id" : 462805026,
      "line" : 35,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjg1NjM2OQ==",
      "original_commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "original_line" : 35,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 8,
      "pull_request_review_id" : 458219014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-30T09:03:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/462856369",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r462963789"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/462963789"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, in this case the `[16]` is just a \"signal to the programmer\". In `SetRaw()` we have a bare pointer `const uint8_t*` when calling this function.\r\n\r\nI have removed `SetRaw()` in the subsequent commit and will revisit this code.\r\n\r\nSome experiments:\r\n\r\n```cpp\r\nint f1(const std::span<int, 3>& p)\r\n{\r\n    return p[5]; // no warning\r\n}\r\n\r\nint f2(const int (&p)[3])\r\n{\r\n    return p[5]; // warning: array index 5 is past the end of the array (which contains 3 elements) [-Warray-bounds]\r\n}\r\n\r\nint f3(const std::array<int, 3>& p)\r\n{\r\n    return p[5]; // no warning\r\n}\r\n\r\nint main(int, char**) {\r\n    int a[3];\r\n    int b[2];\r\n\r\n    f1(a);\r\n    f1(b); // error: no known conversion from 'int [2]' to 'const std::span<int, 3>'\r\n\r\n    f2(a);\r\n    f2(b); // error: no known conversion from 'int [2]' to 'const int [3]'\r\n\r\n    f3(std::array<int, 3>{a[0], a[1], a[2]});\r\n\r\n    return 0;\r\n}\r\n```",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-30T12:35:24Z",
      "diff_hunk" : "@@ -28,19 +28,35 @@ CNetAddr::CNetAddr()\n \n void CNetAddr::SetIP(const CNetAddr& ipIn)\n {\n+    m_net = ipIn.m_net;\n     memcpy(ip, ipIn.ip, sizeof(ip));\n }\n \n+void CNetAddr::SetLegacyIPv6(const uint8_t ipv6[16])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r462963789",
      "id" : 462963789,
      "in_reply_to_id" : 462805026,
      "line" : 35,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk2Mzc4OQ==",
      "original_commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "original_line" : 35,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 8,
      "pull_request_review_id" : 458356568,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-30T12:35:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/462963789",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks to everybody involved!\r\n\r\nI opened the next PR at https://github.com/bitcoin/bitcoin/pull/19628. It is the biggest one from the ADDRv2 roadmap (https://github.com/bitcoin/bitcoin/pull/19031) and is mostly (but not entirely) mechanical.\r\n\r\nAfter it follow more \"interesting\" commits :)",
      "created_at" : "2020-07-30T15:47:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-666474936",
      "id" : 666474936,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NjQ3NDkzNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-30T15:47:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/666474936",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r463098182"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/463098182"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "So, in https://github.com/bitcoin/bitcoin/pull/19628 I changed the argument to `const uint8_t (&ipv6)[ADDR_IPv6_SIZE]` mostly to make the interface clean. From 3 callers 2 need an abusive typecasts because they don't have an array (one has bare pointer (the fuzz tests) and the other has `struct in6_addr`).\r\n\r\nFeel free to comment there: https://github.com/bitcoin/bitcoin/pull/19628/files#diff-b64569708508232923e5fe3059396334R28",
      "commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "created_at" : "2020-07-30T15:52:42Z",
      "diff_hunk" : "@@ -28,19 +28,35 @@ CNetAddr::CNetAddr()\n \n void CNetAddr::SetIP(const CNetAddr& ipIn)\n {\n+    m_net = ipIn.m_net;\n     memcpy(ip, ipIn.ip, sizeof(ip));\n }\n \n+void CNetAddr::SetLegacyIPv6(const uint8_t ipv6[16])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r463098182",
      "id" : 463098182,
      "in_reply_to_id" : 462805026,
      "line" : 35,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA5ODE4Mg==",
      "original_commit_id" : "bcfebb6d5511ad4c156868bc799831ace628a225",
      "original_line" : 35,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 8,
      "pull_request_review_id" : 458535975,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-30T15:52:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/463098182",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   }
]
