[
   {
      "body" : "Concept ACK\r\n\r\nAs this is not consensus, we can always increase the limit later.",
      "created_at" : "2016-09-08T18:53:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8685#issuecomment-245701821",
      "id" : 245701821,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8685",
      "updated_at" : "2016-09-08T18:53:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245701821",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8685#discussion_r78074221"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8685"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78074221"
         }
      },
      "body" : "are there really no near/mid-term uses of something larger than 80 bytes?",
      "commit_id" : "194343fceb868902e0a0972f2bc9225a83d7db1b",
      "created_at" : "2016-09-08T19:33:34Z",
      "diff_hunk" : "@@ -1354,6 +1357,16 @@ static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion,\n         return set_success(serror);\n     }\n \n+    // Policy limit for stack size and stack element size\n+    if (flags & SCRIPT_VERIFY_DISCOURAGE_BIG_P2WSH) {\n+        if (stack.size() > 100)\n+            return set_error(serror, SCRIPT_ERR_DISCOURAGE_BIG_P2WSH);\n+        for (unsigned int i = 0; i < stack.size(); i++) {\n+            if (stack.at(i).size() > 80)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8685#discussion_r78074221",
      "id" : 78074221,
      "original_commit_id" : "194343fceb868902e0a0972f2bc9225a83d7db1b",
      "original_position" : 19,
      "path" : "src/script/interpreter.cpp",
      "position" : 19,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8685",
      "updated_at" : "2016-09-08T19:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78074221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8685#discussion_r78075078"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8685"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78075078"
         }
      },
      "body" : "Apart from the hashing operations, there is not even an opcode in the scripting language that can process them.",
      "commit_id" : "194343fceb868902e0a0972f2bc9225a83d7db1b",
      "created_at" : "2016-09-08T19:38:57Z",
      "diff_hunk" : "@@ -1354,6 +1357,16 @@ static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion,\n         return set_success(serror);\n     }\n \n+    // Policy limit for stack size and stack element size\n+    if (flags & SCRIPT_VERIFY_DISCOURAGE_BIG_P2WSH) {\n+        if (stack.size() > 100)\n+            return set_error(serror, SCRIPT_ERR_DISCOURAGE_BIG_P2WSH);\n+        for (unsigned int i = 0; i < stack.size(); i++) {\n+            if (stack.at(i).size() > 80)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8685#discussion_r78075078",
      "id" : 78075078,
      "original_commit_id" : "194343fceb868902e0a0972f2bc9225a83d7db1b",
      "original_position" : 19,
      "path" : "src/script/interpreter.cpp",
      "position" : 19,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8685",
      "updated_at" : "2016-09-08T19:38:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78075078",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8685#discussion_r78076697"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8685"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78076697"
         }
      },
      "body" : "Might make sense to stick this inside the witversion==0 block if we want to tie both behaviors to specific versions or neither if we don't. (in which case let's just do it earlier in processing)",
      "commit_id" : "194343fceb868902e0a0972f2bc9225a83d7db1b",
      "created_at" : "2016-09-08T19:49:16Z",
      "diff_hunk" : "@@ -1354,6 +1357,16 @@ static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion,\n         return set_success(serror);\n     }\n \n+    // Policy limit for stack size and stack element size",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8685#discussion_r78076697",
      "id" : 78076697,
      "original_commit_id" : "194343fceb868902e0a0972f2bc9225a83d7db1b",
      "original_position" : 14,
      "path" : "src/script/interpreter.cpp",
      "position" : 14,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8685",
      "updated_at" : "2016-09-08T19:53:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78076697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "body" : "I don't think this needs to be implemented as a script interpreter option. It can be done long before script execution is attempted.",
      "created_at" : "2016-09-08T19:50:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8685#issuecomment-245718635",
      "id" : 245718635,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8685",
      "updated_at" : "2016-09-08T19:50:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245718635",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "> I don't think this needs to be implemented as a script interpreter option. It can be done long before script execution is attempted.\r\n\r\nThe modularity of the flag is nice though.\r\n~~Has there been any thought on making policies more modular?~~ Not relevant here",
      "created_at" : "2016-09-09T00:16:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8685#issuecomment-245782283",
      "id" : 245782283,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8685",
      "updated_at" : "2016-09-09T04:15:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245782283",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "@sipa @instagibbs @dcousens Another option is make it inside #8499, which creates a smaller diff and won't touch the consensus critical files",
      "created_at" : "2016-09-09T03:52:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8685#issuecomment-245812252",
      "id" : 245812252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8685",
      "updated_at" : "2016-09-09T03:52:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245812252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8403418?v=3",
         "events_url" : "https://api.github.com/users/jl2012/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jl2012/followers",
         "following_url" : "https://api.github.com/users/jl2012/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jl2012/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jl2012",
         "id" : 8403418,
         "login" : "jl2012",
         "organizations_url" : "https://api.github.com/users/jl2012/orgs",
         "received_events_url" : "https://api.github.com/users/jl2012/received_events",
         "repos_url" : "https://api.github.com/users/jl2012/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jl2012/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jl2012"
      }
   },
   {
      "body" : "@jl2012 Yes, I prefer doing it there.\n",
      "created_at" : "2016-09-09T04:28:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8685#issuecomment-245816543",
      "id" : 245816543,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8685",
      "updated_at" : "2016-09-09T04:28:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245816543",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
