{
   "assignee" : null,
   "assignees" : [],
   "body" : "I've been seeing this issue frequently since the end of the July, when running the rpc tests locally using our testrunner: \r\n\r\n```\r\n$ ./rpc-tests.py \r\n..............................................................................\r\nbip68-112-113-p2p.py:\r\n[...omitting rest of output...]\r\nTests successful\r\n[..].\r\nPass: True, Duration: 39 s\r\n...............................................................................................................\r\nwallet.py:\r\nInitializing test directory /tmp/test_qt_32mz/38\r\n[...omitting again...]\r\nTests successful\r\n[...]\r\nPass: True, Duration: 95 s\r\n\r\n.......................................................................................................................................................................................Traceback (most recent call last):\r\n  File \"./rpc-tests.py\", line 343, in <module>\r\n    runtests()\r\n  File \"./rpc-tests.py\", line 212, in runtests\r\n    (name, stdout, stderr, passed, duration) = job_queue.get_next()\r\n  File \"./rpc-tests.py\", line 267, in get_next\r\n    (stdout, stderr) = proc.communicate(timeout=3)\r\n  File \"/usr/lib/python3.4/subprocess.py\", line 960, in communicate\r\n    stdout, stderr = self._communicate(input, endtime, timeout)\r\n  File \"/usr/lib/python3.4/subprocess.py\", line 1618, in _communicate\r\n    self._check_timeout(endtime, orig_timeout)\r\n  File \"/usr/lib/python3.4/subprocess.py\", line 986, in _check_timeout\r\n    raise TimeoutExpired(self.args, orig_timeout)\r\nsubprocess.TimeoutExpired: Command '['/home/sdaftuar/bitcoin/qa/rpc-tests/wallet-dump.py', '--srcdir=/home/sdaftuar/bitcoin/src', '--portseed=36']' timed out after 3 seconds\r\n```\r\n\r\nSo the interesting thing here is that the error is in `rpc-tests.py`, not in the test itself (in this case, `wallet-dump.py`).  I did a little digging and can't figure out why the python code here would fail; it seems we check that the process has terminated before calling `Popen.communicate(timeout=3)`.  I don't really understand why that timeout would be hit if the process has already died; I don't think the test can generate giant amounts of stdout/stderr or anything like that?\r\n\r\nNot really understanding the problem, it's hard for me to postulate the right fix; would it make sense to just eliminate the timeout, or make it much larger or something?  If someone has a recommended approach, I can test locally to see if I can come up with something that works on my hardware, just not sure what kind of fix would make the most sense.\r\n\r\nI only ever seem to see this on my slightly slower machine, but it's the same box that I've been using for continuous testing of the repo for a year or more.\r\n\r\nFYI, initially it always seemed to be `wallet-dump.py` that would trigger this issue in `rpc-tests.py`, but I just noticed at least one instance where I got this same error in communicating with `walletbackup.py`, so I don't think this is unique to that particular test or anything.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 6,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8649/comments",
   "created_at" : "2016-09-02T01:26:25Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8649/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/8649",
   "id" : 174661691,
   "labels" : [
      {
         "color" : "d4c5f9",
         "name" : "Tests",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8649/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 8649,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "[qa] rpc-tests.py fails randomly while trying to get stdout/stderr",
   "updated_at" : "2016-09-17T13:43:14Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8649",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
      "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
      "followers_url" : "https://api.github.com/users/sdaftuar/followers",
      "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/sdaftuar",
      "id" : 7463573,
      "login" : "sdaftuar",
      "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
      "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
      "repos_url" : "https://api.github.com/users/sdaftuar/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/sdaftuar"
   }
}
