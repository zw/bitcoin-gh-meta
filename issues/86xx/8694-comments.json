[
   {
      "body" : "Impressive changeset!\r\nGeneral Concept ACK.\r\n\r\nInstead of the extending the RPC auth, I could imaging using different RPC endpoints would also work.\r\n* Accessing RPC at `/` would result in the default wallet.\r\n* Accessing RPC at `/<walletid>` would result in using the wallet with the id `<walletid>`.\r\n\r\nbitcoin-cli could just support a new argument `-walletid`.\r\nSomething like `bitcoin-cli -walletid=something getbalance` would result in the same RPC call just against the endpoint `/something`.\r\nMaybe this would result in a simple RPC access to the multiple wallets.\r\n\r\nWill review soon.",
      "created_at" : "2016-09-10T06:54:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8694#issuecomment-246095336",
      "id" : 246095336,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8694",
      "updated_at" : "2016-09-10T06:54:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/246095336",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "> Instead of the extending the RPC auth, I could imaging using different RPC endpoints would also work.\r\n\r\nIndeed, although my main purpose in doing this was to isolate JoinMarket, and it's less isolated if it has auth to my real hotwallet. :)\r\n\r\n(Also, endpoints seemed like they'd require more code.)\r\n\r\n> Accessing RPC at `/<walletid>` would result in using the wallet with the id `<walletid>`.\r\n\r\nThis isn't very future-proof. If we go this route, I'd suggest `/?wallet=<walletid>`",
      "created_at" : "2016-09-10T10:22:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8694#issuecomment-246104190",
      "id" : 246104190,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8694",
      "updated_at" : "2016-09-10T10:22:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/246104190",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Nice, Concept ACK. Will test.",
      "created_at" : "2016-09-14T21:21:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8694#issuecomment-247158244",
      "id" : 247158244,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8694",
      "updated_at" : "2016-09-14T21:21:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/247158244",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8694#discussion_r79791358"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8694"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/79791358"
         }
      },
      "body" : "I like the approach by @jonasschnelli better. Let's keep most of the multiwallet logic in `wallet.cpp`.",
      "commit_id" : "996948af12b418562cbc2d29c1d7f9d8b9ca2a46",
      "created_at" : "2016-09-21T09:17:28Z",
      "diff_hunk" : "@@ -196,8 +196,9 @@ void Shutdown()\n     StopRPC();\n     StopHTTPServer();\n #ifdef ENABLE_WALLET\n-    if (pwalletMain)\n-        pwalletMain->Flush(false);\n+    for (CWallet_ptr pwallet : vpwallets) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8694#discussion_r79791358",
      "id" : 79791358,
      "original_commit_id" : "996948af12b418562cbc2d29c1d7f9d8b9ca2a46",
      "original_position" : 6,
      "path" : "src/init.cpp",
      "position" : 6,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8694",
      "updated_at" : "2016-09-21T09:17:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/79791358",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
