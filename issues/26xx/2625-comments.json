[
   {
      "body" : "Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/eb477a63fefdc29db9d152a9189ca790e0cb2519 for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts (please tweak those patches in contrib/test-scripts)\n2. It adds/modifies tests which test network rules (thanks for doing that), which conflicts with a patch applied at test time\n3. It does not build on either Linux i386 or Win32 (via MinGW cross compile)\n4. The test suite fails on either Linux i386 or Win32\n5. The block test-cases failed (lookup the first bNN identifier which failed in https://github.com/TheBlueMatt/test-scripts/blob/master/FullBlockTestGenerator.java)\n\nIf you believe this to be in error, please ping BlueMatt on freenode or TheBlueMatt here.\n\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2013-05-07T15:26:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2625#issuecomment-17549390",
      "id" : 17549390,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2625",
      "updated_at" : "2013-05-07T15:26:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/17549390",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "ACK\r\n",
      "created_at" : "2013-05-07T15:38:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2625#issuecomment-17550080",
      "id" : 17550080,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2625",
      "updated_at" : "2013-05-07T15:38:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/17550080",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/92f2c1fe0fe2905540b0435188988851145f92be for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2013-05-07T16:29:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2625#issuecomment-17553395",
      "id" : 17553395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2625",
      "updated_at" : "2013-05-07T16:29:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/17553395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/2625#discussion_r4120661"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2625"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/4120661"
         }
      },
      "body" : "Maybe add a comment that err will have a nonzero value when the timer was cancelled, I had to look this up as it was unclear to me why a timer handler would get an error passed in.",
      "commit_id" : "92f2c1fe0fe2905540b0435188988851145f92be",
      "created_at" : "2013-05-07T19:14:58Z",
      "diff_hunk" : "@@ -850,6 +852,26 @@ void StopRPCThreads()\n     delete rpc_io_service; rpc_io_service = NULL;\n }\n \n+void RPCRunHandler(const boost::system::error_code& err, boost::function<void(void)> func)\n+{\n+    if (!err)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2625#discussion_r4120661",
      "id" : 4120661,
      "original_commit_id" : "92f2c1fe0fe2905540b0435188988851145f92be",
      "original_position" : 43,
      "path" : "src/bitcoinrpc.cpp",
      "position" : 43,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2625",
      "updated_at" : "2013-05-07T19:14:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/4120661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Still have to test, but code changes are OK, nice cleanup",
      "created_at" : "2013-05-07T19:19:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2625#issuecomment-17563988",
      "id" : 17563988,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2625",
      "updated_at" : "2013-05-07T19:19:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/17563988",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "So one consequence of this is:\r\n\r\n#task 1\r\nwalletpassphrase foo 3600   // I need this for a long time\r\nsleep 3000\r\nsignrawtranaction ..\r\n\r\n#task 2\r\nwalletpassphrase foo 30  //I don't need this for long\r\nsignrawtransaction ..\r\n\r\nNow depending on how these tasks race the second kills the first. This seems bad and I thought avoiding this was previously intentional.\r\n\r\nI think instead it should be doing max(new_unlocked_until, old_unlocked_until),  and if someone wants to lock an unlocked wallet they can explicitly call walletlock.\r\n\r\n\r\n",
      "created_at" : "2013-05-07T20:34:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2625#issuecomment-17568564",
      "id" : 17568564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2625",
      "updated_at" : "2013-05-07T20:34:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/17568564",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell : previously the second task's 'walletpassphrase' would fail with \"error: wallet already unlocked.\"\r\n\r\nIf you REALLY want the max() behavior, then I say have the tasks call getinfo to get unlocked_until and do that calculation yourself.  I'm very much in favor of the RPC having the most obvious implementation, and strongly feel that \"do the last thing I told you to do\" is the most obvious behavior.\r\n",
      "created_at" : "2013-05-07T21:01:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2625#issuecomment-17570373",
      "id" : 17570373,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2625",
      "updated_at" : "2013-05-07T21:01:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/17570373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "@gavinandresen  You can't do that calculation yourself though, because there is a potential race if you have multiple callers calling the RPC at once. E.g. if the shorter unlock calls getinfo first then the longer unlock happens before the shorter unlock the longer unlock's request will get ignored... and we have no way to facilitate exclusive access to the RPC.\r\n\r\n\"Do the last thing\" starts losing its meaning when there is concurrent access.\r\n\r\nIt's not the end of the worldÃ¢ÂÂ don't make concurrent accesses with different unlock lifetimes is also an answer... I'm just generally uneasy about behavior that may expose racy behavior in callers because it's really hard to debug.\r\n\r\n",
      "created_at" : "2013-05-07T22:38:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2625#issuecomment-17575288",
      "id" : 17575288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2625",
      "updated_at" : "2013-05-07T22:38:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/17575288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/2625#discussion_r4131038"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2625"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/4131038"
         }
      },
      "body" : "This used to be the source of quite some lag when calling unlock, not sure if it matters, but thats why it was in a separate thread.",
      "commit_id" : "92f2c1fe0fe2905540b0435188988851145f92be",
      "created_at" : "2013-05-08T09:50:30Z",
      "diff_hunk" : "@@ -1339,9 +1291,12 @@ Value walletpassphrase(const Array& params, bool fHelp)\n             \"walletpassphrase <passphrase> <timeout>\\n\"\n             \"Stores the wallet decryption key in memory for <timeout> seconds.\");\n \n-    NewThread(ThreadTopUpKeyPool, NULL);\n-    int64* pnSleepTime = new int64(params[1].get_int64());\n-    NewThread(ThreadCleanWalletPassphrase, pnSleepTime);\n+    pwalletMain->TopUpKeyPool();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2625#discussion_r4131038",
      "id" : 4131038,
      "original_commit_id" : "92f2c1fe0fe2905540b0435188988851145f92be",
      "original_position" : 87,
      "path" : "src/rpcwallet.cpp",
      "position" : 87,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2625",
      "updated_at" : "2013-05-08T09:50:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/4131038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "re: fixes #1961 were you able to reproduce the original issue to begin with?",
      "created_at" : "2013-05-08T09:54:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2625#issuecomment-17596081",
      "id" : 17596081,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2625",
      "updated_at" : "2013-05-08T09:54:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/17596081",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/2625#discussion_r4133865"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2625"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/4133865"
         }
      },
      "body" : "Topping up the keypool in a separate thread adds indeterminism which scares me. I'd rather the state of the wallet be known when walletpassphrase returns (\"full keypool, unlocked\").\r\n\r\nE.g. if the keypool is completely exhausted, and I do 'walletpassphrase' immediately followed by a 'send', will I always get a fresh 'change' key or not?  Separate thread == maybe, maybe not....\r\n",
      "commit_id" : "92f2c1fe0fe2905540b0435188988851145f92be",
      "created_at" : "2013-05-08T13:41:18Z",
      "diff_hunk" : "@@ -1339,9 +1291,12 @@ Value walletpassphrase(const Array& params, bool fHelp)\n             \"walletpassphrase <passphrase> <timeout>\\n\"\n             \"Stores the wallet decryption key in memory for <timeout> seconds.\");\n \n-    NewThread(ThreadTopUpKeyPool, NULL);\n-    int64* pnSleepTime = new int64(params[1].get_int64());\n-    NewThread(ThreadCleanWalletPassphrase, pnSleepTime);\n+    pwalletMain->TopUpKeyPool();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2625#discussion_r4133865",
      "id" : 4133865,
      "original_commit_id" : "92f2c1fe0fe2905540b0435188988851145f92be",
      "original_position" : 87,
      "path" : "src/rpcwallet.cpp",
      "position" : 87,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2625",
      "updated_at" : "2013-05-08T13:41:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/4133865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/2625#discussion_r4134201"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2625"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/4134201"
         }
      },
      "body" : "I believe using anything from keypool tries to top up keypool before it uses any keys anyway.  Also, the topup keypool thread locks wallet first thing anyway, so unless your machine is under heavy load (or a shitty VPS), it should be pretty constant.  Anyway, if you dont care about the performance, it doesnt matter much.",
      "commit_id" : "92f2c1fe0fe2905540b0435188988851145f92be",
      "created_at" : "2013-05-08T13:55:50Z",
      "diff_hunk" : "@@ -1339,9 +1291,12 @@ Value walletpassphrase(const Array& params, bool fHelp)\n             \"walletpassphrase <passphrase> <timeout>\\n\"\n             \"Stores the wallet decryption key in memory for <timeout> seconds.\");\n \n-    NewThread(ThreadTopUpKeyPool, NULL);\n-    int64* pnSleepTime = new int64(params[1].get_int64());\n-    NewThread(ThreadCleanWalletPassphrase, pnSleepTime);\n+    pwalletMain->TopUpKeyPool();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2625#discussion_r4134201",
      "id" : 4134201,
      "original_commit_id" : "92f2c1fe0fe2905540b0435188988851145f92be",
      "original_position" : 87,
      "path" : "src/rpcwallet.cpp",
      "position" : 87,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2625",
      "updated_at" : "2013-05-08T13:55:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/4134201",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
