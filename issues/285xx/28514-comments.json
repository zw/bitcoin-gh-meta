[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28514).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "created_at" : "2023-09-21T06:52:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#issuecomment-1728958086",
      "id" : 1728958086,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28514",
      "node_id" : "IC_kwDOABII585nDc6G",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1728958086/reactions"
      },
      "updated_at" : "2023-10-17T09:35:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1728958086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Looks like the tests fail?",
      "created_at" : "2023-09-21T11:03:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#issuecomment-1729344080",
      "id" : 1729344080,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28514",
      "node_id" : "IC_kwDOABII585nE7JQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1729344080/reactions"
      },
      "updated_at" : "2023-09-21T11:03:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1729344080",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@MarcoFalke not sure why this test is failing, since it passes locally\r\n![Screenshot from 2023-09-26 13-07-20](https://github.com/bitcoin/bitcoin/assets/15610188/bc49f7a5-917e-4a4c-8423-601cc918ebc3)\r\n",
      "created_at" : "2023-09-26T10:09:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#issuecomment-1735236251",
      "id" : 1735236251,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28514",
      "node_id" : "IC_kwDOABII585nbZqb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1735236251/reactions"
      },
      "updated_at" : "2023-09-26T10:09:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1735236251",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15610188?v=4",
         "events_url" : "https://api.github.com/users/BrandonOdiwuor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BrandonOdiwuor/followers",
         "following_url" : "https://api.github.com/users/BrandonOdiwuor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BrandonOdiwuor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BrandonOdiwuor",
         "id" : 15610188,
         "login" : "BrandonOdiwuor",
         "node_id" : "MDQ6VXNlcjE1NjEwMTg4",
         "organizations_url" : "https://api.github.com/users/BrandonOdiwuor/orgs",
         "received_events_url" : "https://api.github.com/users/BrandonOdiwuor/received_events",
         "repos_url" : "https://api.github.com/users/BrandonOdiwuor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BrandonOdiwuor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BrandonOdiwuor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BrandonOdiwuor"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The CI task that failed is named \"no wallet\". This means, to reproduce the failure, you will have to compile without a wallet and run the test.",
      "created_at" : "2023-09-27T07:43:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#issuecomment-1736874167",
      "id" : 1736874167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28514",
      "node_id" : "IC_kwDOABII585nhpi3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1736874167/reactions"
      },
      "updated_at" : "2023-09-27T07:43:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1736874167",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "cc @ryanofsky @achow101 ",
      "created_at" : "2023-10-02T10:59:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#issuecomment-1742807862",
      "id" : 1742807862,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28514",
      "node_id" : "IC_kwDOABII585n4SM2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1742807862/reactions"
      },
      "updated_at" : "2023-10-02T10:59:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1742807862",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This seems promising, but it isn't exactly implementing what's described in https://github.com/bitcoin/bitcoin/issues/16220#issuecomment-1429962692 or the PR description so it has a different set of advantages and disadvantages. \r\n\r\nThe difference between code and PR description is that code is not implementing: _\"If list is empty wallet should create `<datadir>/wallets` as a directory, otherwise it should create it as a symlink pointing to `.`\"_. Because of this, the PR can't simplify the [`GetWalletDir` ](https://github.com/bitcoin/bitcoin/blob/04265ba9378efbd4c35b33390b1e5cf246d420a9/src/wallet/walletutil.cpp#L11-L31) function so it still needs to check existence `<datadir>/wallets` and can't just return it unconditionally.\r\n\r\nMaybe this is ok, and the PR is still worthwhile, because it at least it simplifies the node code, even if it doesn't simplify the wallet code, and it makes the separation cleaner because node code no longer explicitly needs to create the \"wallets\" directory and can avoid creating it if the wallet is disabled.\r\n\r\nAnother consequence of not creating ` \"wallets\" -> \".\"` symlink is that startup might be a little slower in a data directory that has wallets in the top level, since `ListDatabases().empty()` will be checked every time on startup, instead of just one time when symlink doesn't exist.\r\n\r\nOther notes about the PR:\r\n\r\n- It is suspicious why wallet functional tests need to be changed. This change should be backwards compatible so it is surprising that tests should have to change in order to pass. It would be good to have an explanation for that.\r\n- I'm not sure if we currently have a test explicitly written to cover loading a datadir with no `wallets/` subdirectory and wallets in the top-level directory. If there is not an existing test, probably one should be written to make sure code in this PR doesn't break and wallets can still be loaded there.\r\n- This PR isn't removing qt code that creates the \"wallets\" directory: https://github.com/bitcoin/bitcoin/blob/bf32ae3969833c767b2c88d4c7f609a569c7effe/src/qt/intro.cpp#L245, which should no longer be necessary, after the other changes.\r\n- I think it would be better if this PR did not add a `g_wallet_init_interface.InitWalletDir` function, and instead just changed existing `VerifyWallets` function which is already determining the wallet directory. Getting rid of it would be nicer just to have fewer init functions, but also this code doesn't belong in WalletInit class because with #10102 WalletInit wallet/init.cpp functions are run in the node process, not the wallet process.\r\n\r\n",
      "created_at" : "2023-10-11T10:52:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#issuecomment-1757403038",
      "id" : 1757403038,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28514",
      "node_id" : "IC_kwDOABII585ov9ee",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1757403038/reactions"
      },
      "updated_at" : "2023-10-11T10:52:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1757403038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-10-11T18:17:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#issuecomment-1758240854",
      "id" : 1758240854,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28514",
      "node_id" : "IC_kwDOABII585ozKBW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1758240854/reactions"
      },
      "updated_at" : "2023-10-11T18:17:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1758240854",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Accidentally closed the PR",
      "created_at" : "2023-10-17T06:00:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#issuecomment-1765721901",
      "id" : 1765721901,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28514",
      "node_id" : "IC_kwDOABII585pPsct",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1765721901/reactions"
      },
      "updated_at" : "2023-10-17T06:00:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1765721901",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15610188?v=4",
         "events_url" : "https://api.github.com/users/BrandonOdiwuor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BrandonOdiwuor/followers",
         "following_url" : "https://api.github.com/users/BrandonOdiwuor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BrandonOdiwuor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BrandonOdiwuor",
         "id" : 15610188,
         "login" : "BrandonOdiwuor",
         "node_id" : "MDQ6VXNlcjE1NjEwMTg4",
         "organizations_url" : "https://api.github.com/users/BrandonOdiwuor/orgs",
         "received_events_url" : "https://api.github.com/users/BrandonOdiwuor/received_events",
         "repos_url" : "https://api.github.com/users/BrandonOdiwuor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BrandonOdiwuor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BrandonOdiwuor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BrandonOdiwuor"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ryanofsky \r\n\r\nI have updated the PR and moved the wallet directory initialization code to VerifyWallets()\r\n\r\nI have also added tests for the various init scenarios and removed the remaining TryCreateDirectories from QT\r\n\r\nThe tests changed in this PR are a reflection of the changes in the logic of the wallet dir init code as suggested, such as the `wallet/` dir currently being created even if the data dir is not empty or the mainnet `wallet/` dir only being created when running mainnet\r\n\r\nI removed the symlink code (see screenshot attached) since it makes tests in wallet_multiwallet.py fail\r\n\r\n![Screenshot from 2023-10-18 16-46-18](https://github.com/bitcoin/bitcoin/assets/15610188/86483e01-d2e5-43e5-ae4b-5b70bb68efcc)",
      "created_at" : "2023-10-19T10:25:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#issuecomment-1770522402",
      "id" : 1770522402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28514",
      "node_id" : "IC_kwDOABII585piAci",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1770522402/reactions"
      },
      "updated_at" : "2023-10-19T10:26:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1770522402",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15610188?v=4",
         "events_url" : "https://api.github.com/users/BrandonOdiwuor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BrandonOdiwuor/followers",
         "following_url" : "https://api.github.com/users/BrandonOdiwuor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BrandonOdiwuor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BrandonOdiwuor",
         "id" : 15610188,
         "login" : "BrandonOdiwuor",
         "node_id" : "MDQ6VXNlcjE1NjEwMTg4",
         "organizations_url" : "https://api.github.com/users/BrandonOdiwuor/orgs",
         "received_events_url" : "https://api.github.com/users/BrandonOdiwuor/received_events",
         "repos_url" : "https://api.github.com/users/BrandonOdiwuor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BrandonOdiwuor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BrandonOdiwuor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BrandonOdiwuor"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28514#discussion_r1367132045"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367132045"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Fix wallet directory initialization\" (17b4955e4b1e4f02f00a948b432f18caa9b250a5)\r\n\r\nIs it a mistake to delete this whole block of code? I'd expect only line 245 (`TryCreateDirectories(\"wallets\")`) to be deleted",
      "commit_id" : "17b4955e4b1e4f02f00a948b432f18caa9b250a5",
      "created_at" : "2023-10-20T15:16:12Z",
      "diff_hunk" : "@@ -238,18 +238,6 @@ bool Intro::showIfNeeded(bool& did_show_intro, int64_t& prune_MiB)\n                 /* Cancel clicked */\n                 return false;\n             }\n-            dataDir = intro.getDataDirectory();\n-            try {\n-                if (TryCreateDirectories(GUIUtil::QStringToPath(dataDir))) {\n-                    // If a new data directory has been created, make wallets subdirectory too\n-                    TryCreateDirectories(GUIUtil::QStringToPath(dataDir) / \"wallets\");\n-                }\n-                break;\n-            } catch (const fs::filesystem_error&) {\n-                QMessageBox::critical(nullptr, PACKAGE_NAME,\n-                    tr(\"Error: Specified data directory \\\"%1\\\" cannot be created.\").arg(dataDir));\n-                /* fall through, back to choosing screen */\n-            }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#discussion_r1367132045",
      "id" : 1367132045,
      "line" : 252,
      "node_id" : "PRRC_kwDOABII585RfMeN",
      "original_commit_id" : "17b4955e4b1e4f02f00a948b432f18caa9b250a5",
      "original_line" : 252,
      "original_position" : 15,
      "original_start_line" : 241,
      "path" : "src/qt/intro.cpp",
      "position" : 15,
      "pull_request_review_id" : 1690295251,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28514",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367132045/reactions"
      },
      "side" : "LEFT",
      "start_line" : 241,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2023-10-20T15:19:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367132045",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28514#discussion_r1367134005"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367134005"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Fix wallet directory initialization\" (17b4955e4b1e4f02f00a948b432f18caa9b250a5)\r\n\r\nIs there a reason this test is changing? I'd expect the change to be backwards compatible so existing tests should not need to change",
      "commit_id" : "17b4955e4b1e4f02f00a948b432f18caa9b250a5",
      "created_at" : "2023-10-20T15:17:52Z",
      "diff_hunk" : "@@ -234,8 +234,8 @@ def run_externally_generated_address_test(self):\n         # refill keypool otherwise the second node wouldn't recognize addresses generated on the first nodes\n         self.nodes[0].keypoolrefill(1000)\n         self.stop_nodes()\n-        wallet0 = os.path.join(self.nodes[0].chain_path, self.default_wallet_name, \"wallet.dat\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#discussion_r1367134005",
      "id" : 1367134005,
      "line" : 237,
      "node_id" : "PRRC_kwDOABII585RfM81",
      "original_commit_id" : "17b4955e4b1e4f02f00a948b432f18caa9b250a5",
      "original_line" : 237,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listtransactions.py",
      "position" : 4,
      "pull_request_review_id" : 1690295251,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28514",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367134005/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-20T15:19:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367134005",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28514#discussion_r1367134156"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367134156"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Fix wallet directory initialization\" (17b4955e4b1e4f02f00a948b432f18caa9b250a5)\r\n\r\nIs there a reason this test is changing? I'd expect the change to be backwards compatible so existing tests should not need to change",
      "commit_id" : "17b4955e4b1e4f02f00a948b432f18caa9b250a5",
      "created_at" : "2023-10-20T15:18:00Z",
      "diff_hunk" : "@@ -88,7 +88,7 @@ def run_test(self):\n         # Node0 wallet file is loaded on longest sync'ed node1\n         self.stop_node(1)\n         self.nodes[0].backupwallet(self.nodes[0].datadir_path / 'wallet.bak')\n-        shutil.copyfile(self.nodes[0].datadir_path / 'wallet.bak', self.nodes[1].chain_path / self.default_wallet_name / self.wallet_data_filename)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#discussion_r1367134156",
      "id" : 1367134156,
      "line" : 91,
      "node_id" : "PRRC_kwDOABII585RfM_M",
      "original_commit_id" : "17b4955e4b1e4f02f00a948b432f18caa9b250a5",
      "original_line" : 91,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_reorgsrestore.py",
      "position" : 4,
      "pull_request_review_id" : 1690295251,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28514",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367134156/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-20T15:19:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367134156",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28514#discussion_r1367720931"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367720931"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@ryanofsky This is because of the change in wallet dir init logic. The `wallet/` dir is created when a new node is started and no wallet is detected in data_dir",
      "commit_id" : "dfe62e9acc3ae7a6dc73250c963cb0d15eaeb863",
      "created_at" : "2023-10-21T12:22:08Z",
      "diff_hunk" : "@@ -234,8 +234,8 @@ def run_externally_generated_address_test(self):\n         # refill keypool otherwise the second node wouldn't recognize addresses generated on the first nodes\n         self.nodes[0].keypoolrefill(1000)\n         self.stop_nodes()\n-        wallet0 = os.path.join(self.nodes[0].chain_path, self.default_wallet_name, \"wallet.dat\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#discussion_r1367720931",
      "id" : 1367720931,
      "in_reply_to_id" : 1367134005,
      "line" : 237,
      "node_id" : "PRRC_kwDOABII585RhcPj",
      "original_commit_id" : "17b4955e4b1e4f02f00a948b432f18caa9b250a5",
      "original_line" : 237,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listtransactions.py",
      "position" : 4,
      "pull_request_review_id" : 1691248703,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28514",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367720931/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-21T12:22:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367720931",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15610188?v=4",
         "events_url" : "https://api.github.com/users/BrandonOdiwuor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BrandonOdiwuor/followers",
         "following_url" : "https://api.github.com/users/BrandonOdiwuor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BrandonOdiwuor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BrandonOdiwuor",
         "id" : 15610188,
         "login" : "BrandonOdiwuor",
         "node_id" : "MDQ6VXNlcjE1NjEwMTg4",
         "organizations_url" : "https://api.github.com/users/BrandonOdiwuor/orgs",
         "received_events_url" : "https://api.github.com/users/BrandonOdiwuor/received_events",
         "repos_url" : "https://api.github.com/users/BrandonOdiwuor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BrandonOdiwuor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BrandonOdiwuor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BrandonOdiwuor"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28514#discussion_r1367721059"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367721059"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is also because of the change in the wallet dir init logic. The `wallet/ `dir is created when a new node is started and no wallet is detected in data_dir",
      "commit_id" : "dfe62e9acc3ae7a6dc73250c963cb0d15eaeb863",
      "created_at" : "2023-10-21T12:23:01Z",
      "diff_hunk" : "@@ -88,7 +88,7 @@ def run_test(self):\n         # Node0 wallet file is loaded on longest sync'ed node1\n         self.stop_node(1)\n         self.nodes[0].backupwallet(self.nodes[0].datadir_path / 'wallet.bak')\n-        shutil.copyfile(self.nodes[0].datadir_path / 'wallet.bak', self.nodes[1].chain_path / self.default_wallet_name / self.wallet_data_filename)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#discussion_r1367721059",
      "id" : 1367721059,
      "in_reply_to_id" : 1367134156,
      "line" : 91,
      "node_id" : "PRRC_kwDOABII585RhcRj",
      "original_commit_id" : "17b4955e4b1e4f02f00a948b432f18caa9b250a5",
      "original_line" : 91,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_reorgsrestore.py",
      "position" : 4,
      "pull_request_review_id" : 1691248784,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28514",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367721059/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-21T12:23:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367721059",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15610188?v=4",
         "events_url" : "https://api.github.com/users/BrandonOdiwuor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BrandonOdiwuor/followers",
         "following_url" : "https://api.github.com/users/BrandonOdiwuor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BrandonOdiwuor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BrandonOdiwuor",
         "id" : 15610188,
         "login" : "BrandonOdiwuor",
         "node_id" : "MDQ6VXNlcjE1NjEwMTg4",
         "organizations_url" : "https://api.github.com/users/BrandonOdiwuor/orgs",
         "received_events_url" : "https://api.github.com/users/BrandonOdiwuor/received_events",
         "repos_url" : "https://api.github.com/users/BrandonOdiwuor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BrandonOdiwuor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BrandonOdiwuor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BrandonOdiwuor"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28514#discussion_r1367721116"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28514"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367721116"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed",
      "commit_id" : "dfe62e9acc3ae7a6dc73250c963cb0d15eaeb863",
      "created_at" : "2023-10-21T12:23:42Z",
      "diff_hunk" : "@@ -238,18 +238,6 @@ bool Intro::showIfNeeded(bool& did_show_intro, int64_t& prune_MiB)\n                 /* Cancel clicked */\n                 return false;\n             }\n-            dataDir = intro.getDataDirectory();\n-            try {\n-                if (TryCreateDirectories(GUIUtil::QStringToPath(dataDir))) {\n-                    // If a new data directory has been created, make wallets subdirectory too\n-                    TryCreateDirectories(GUIUtil::QStringToPath(dataDir) / \"wallets\");\n-                }\n-                break;\n-            } catch (const fs::filesystem_error&) {\n-                QMessageBox::critical(nullptr, PACKAGE_NAME,\n-                    tr(\"Error: Specified data directory \\\"%1\\\" cannot be created.\").arg(dataDir));\n-                /* fall through, back to choosing screen */\n-            }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28514#discussion_r1367721116",
      "id" : 1367721116,
      "in_reply_to_id" : 1367132045,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585RhcSc",
      "original_commit_id" : "17b4955e4b1e4f02f00a948b432f18caa9b250a5",
      "original_line" : 252,
      "original_position" : 15,
      "original_start_line" : 241,
      "path" : "src/qt/intro.cpp",
      "position" : null,
      "pull_request_review_id" : 1691248854,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28514",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367721116/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2023-10-21T12:23:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1367721116",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15610188?v=4",
         "events_url" : "https://api.github.com/users/BrandonOdiwuor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BrandonOdiwuor/followers",
         "following_url" : "https://api.github.com/users/BrandonOdiwuor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BrandonOdiwuor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BrandonOdiwuor",
         "id" : 15610188,
         "login" : "BrandonOdiwuor",
         "node_id" : "MDQ6VXNlcjE1NjEwMTg4",
         "organizations_url" : "https://api.github.com/users/BrandonOdiwuor/orgs",
         "received_events_url" : "https://api.github.com/users/BrandonOdiwuor/received_events",
         "repos_url" : "https://api.github.com/users/BrandonOdiwuor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BrandonOdiwuor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BrandonOdiwuor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BrandonOdiwuor"
      }
   }
]
