[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28592).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [naumenkogs](https://github.com/bitcoin/bitcoin/pull/28592#issuecomment-1752529827) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2023-10-05T01:59:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28592#issuecomment-1747922716",
      "id" : 1747922716,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28592",
      "node_id" : "IC_kwDOABII585oLy8c",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747922716/reactions"
      },
      "updated_at" : "2023-10-09T08:11:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747922716",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Reopens #27630 with a reduced rate (14tx/s vs 22tx/s). Here's a graph showing the rise in the tx rate over the past year or so, generated from `getchaintxstats`:\r\n\r\n![image](https://github.com/bitcoin/bitcoin/assets/127186/d6a2690c-1a93-41ec-afca-ee6016832e82)\r\n\r\nSpreadsheet with the detailed numbers (and command line for reproducing) at: https://docs.google.com/spreadsheets/d/1RSWOmT_fWOdDERuI7yM_v_57C6DkCBojebyILT4eVZw/edit?usp=sharing\r\n\r\nNote that these numbers will be an underestimate as it ignores RBFed transactions, and transaction bursts.\r\n\r\n(144 blocks is about 24 hours, 36 blocks is about 6 hours)",
      "created_at" : "2023-10-05T02:02:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28592#issuecomment-1747925207",
      "id" : 1747925207,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28592",
      "node_id" : "IC_kwDOABII585oLzjX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747925207/reactions"
      },
      "updated_at" : "2023-10-05T02:11:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747925207",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Perhaps worth explicitly noting: this is simplified compared to #27630 since #27675 removed `INVENTORY_MAX_RECENT_RELAY` (and `m_recently_announced_invs` for which that constant was needed). If it's backported without that PR, then that constant will also need to be updated, which will increase per-peer memory usage. Backporting shouldn't be necessary though, as #27610 (see also #27613, #27614) should be sufficient.",
      "created_at" : "2023-10-05T02:10:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28592#issuecomment-1747931497",
      "id" : 1747931497,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28592",
      "node_id" : "IC_kwDOABII585oL1Fp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747931497/reactions"
      },
      "updated_at" : "2023-10-05T02:10:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747931497",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Seems reasonable. I'll run with 80489ba6e8430177db5c1d0c9148e83e410bd704 for a while.",
      "created_at" : "2023-10-05T14:38:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28592#issuecomment-1749042660",
      "id" : 1749042660,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28592",
      "node_id" : "IC_kwDOABII585oQEXk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1749042660/reactions"
      },
      "updated_at" : "2023-10-05T14:38:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1749042660",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "If this is same than #27630 at least one benefit for second-layer and Bitcoin applications can be too document tx relay rate, see https://github.com/bitcoin/bitcoin/pull/27630#issuecomment-1548841340",
      "created_at" : "2023-10-05T19:30:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28592#issuecomment-1749522094",
      "id" : 1749522094,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28592",
      "node_id" : "IC_kwDOABII585oR5au",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1749522094/reactions"
      },
      "updated_at" : "2023-10-05T19:30:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1749522094",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 80489ba6e8430177db5c1d0c9148e83e410bd704\r\n\r\nThe justification above makes sense. With this change, going through `m_tx_inventory_to_send` will be more predictable and reactive, making the tx relay smoother.\r\n\r\nI also checked that the `catch up` code introduced in 5b3406094f2679dfb3763de4414257268565b943 still makes sense. (I think the commit message from there better be in the code because the `division by 1000` is not trivial).\r\nI think catching up will become slower in the case when `m_tx_inventory_to_send` is around 1,000,000; but I think it's fine.\r\n\r\n---------\r\n\r\nI also want to note that it's not exactly the relay rate, it's the rate of going through the queue. Because some transactions won't be relayed e.g. due to the fee filter.",
      "created_at" : "2023-10-09T08:11:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28592#issuecomment-1752529827",
      "id" : 1752529827,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28592",
      "node_id" : "IC_kwDOABII585odXuj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1752529827/reactions"
      },
      "updated_at" : "2023-10-09T08:11:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1752529827",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@Sjors did you want to comment on any results re https://github.com/bitcoin/bitcoin/pull/28592#issuecomment-1749042660 ?",
      "created_at" : "2023-11-28T17:28:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28592#issuecomment-1830350478",
      "id" : 1830350478,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28592",
      "node_id" : "IC_kwDOABII585tGO6O",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1830350478/reactions"
      },
      "updated_at" : "2023-11-28T17:28:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1830350478",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ajtowns it did not crash my node. That's about the extend of monitoring I did on it, not sure what to measure.",
      "created_at" : "2023-11-28T18:10:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28592#issuecomment-1830415332",
      "id" : 1830415332,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28592",
      "node_id" : "IC_kwDOABII585tGevk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1830415332/reactions"
      },
      "updated_at" : "2023-11-28T18:10:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1830415332",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : ">     <instagibbs> _aj_ might be helpful to know what the potential downsides are to the PR\r\n>                  (I have not thought about this stuff deeply)\r\n>     <_aj_> instagibbs: ie, why there's a limit at all?\r\n\r\nThe code comment explanation of this is:\r\n\r\n```c++\r\n/** Maximum rate of inventory items to send per second.\r\n *  Limits the impact of low-fee transaction floods. */\r\nstatic constexpr unsigned int INVENTORY_BROADCAST_PER_SECOND = 7;\r\n```\r\n\r\nMy understanding of this limit is that our tx relay works like this:\r\n\r\n * we have perhaps 100 peers, who send `INV` messages to us at whatever rate they like\r\n * our first limit applies if they send us huge bursts of `INV` messages that we/they can't keep up to with `GETDATA/TX`: in that case `AddTxAnnouncement` will hit the `MAX_PEER_TX_ANNOUNCEMENTS` limit (5000, overridden by \"relay\" perm), and drop `INV` messages until we catch up (due to sending a `GETDATA` for the corresponding tx and getting a reply from any node; or a `NOTFOUND` or timeout by this node)\r\n * we then send `GETDATA` for the new txs: the second limit applies here - if we already have more than `MAX_PEER_TX_REQUEST_IN_FLIGHT` `GETDATA` requests outstanding with this peer (100), we'll wait an extra `OVERLOADED_PEER_DELAY` seconds (2) in the hopes we can get the tx from another peer first\r\n * then we get the `TX` response, and add it to our mempool and relay it to everyone else\r\n * but the final rate limit applies here: we limit our outbound `INV` announcemnets to only happen every `INBOUND_INVENTORY_BROADCAST_INTERVAL` (5s; 2s for outbound connections) on average, and aim to only include `INVENTORY_BROADCAST_TARGET` (7*5 = 35) txs in each announcement; which is bumped up by an additional 5 txs for every 1000 txs of backlog we have (see #27610).\r\n\r\nThe first two rate limits have no effect if our peers are high-bandwidth well-behaved peers: they can send us 500 tx/s every second indefinitely, and we'll accept them all into our mempool provided they're valid/obey rbf rules/etc. That's a huge waste of bandwidth though: we can only put txs into blocks at much lower rates, so perhaps 450 or more of those 500 txs are going to either be replaced before being mined or just expire. We can't really stop our peers from wasting bandwidth by sending tx data to us, but we can be kind to our peers, and only relay tx data that's likely to be mined: so we pick the top set of txs (`CompareInvMempoolOrder`) trim the txs that the peer has announced to us, and then limit that to a rate somewhat around what can reasonably be confirmed.\r\n\r\n(Note that the we'll send txs faster to our outbounds by a factor of 2.5x (35tx/2s instead of 35tx/5s), and that we don't announce txs that have been announced to us also has a multiplying effect)\r\n\r\nThe drawback of having this number be too low is thus (a) that txs may not propagate well, and this may affect txs that should go in the next blocks if feerates are rising, and (b) that our internal queues of what to send (`m_tx_inventory_to_send`) may grow large. The drawback of having this number be too high is that we will waste our peers' bandwidth and cpu by giving them more txs than can possibly go into blocks, which they'll then have to validate and may in turn relay onwards.",
      "created_at" : "2023-11-30T15:35:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28592#issuecomment-1834012897",
      "id" : 1834012897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28592",
      "node_id" : "IC_kwDOABII585tUNDh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1834012897/reactions"
      },
      "updated_at" : "2023-11-30T15:35:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1834012897",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @ajtowns it did not crash my node. That's about the extend of monitoring I did on it, not sure what to measure.\r\n\r\nI have a couple of patches at https://github.com/ajtowns/bitcoin/tree/202305-reportnetdata which can be used to track if the `inv_to_send` queues grow large and how quickly they empty out. With those patches, this script can be interesting:\r\n\r\n```\r\nbitcoin-cli getmempoolinfo | jq -j '\"loaded:\", .loaded, \" \", .size, \" txs \", (.bytes/1000000|floor), \"MvB \", (.usage/.maxmempool*1000|floor)/10, \"% used \", (.mempoolminfee*1e6|floor)/10, \"s/vB minfee\\n\"'\r\necho\r\nbitcoin-cli getnetworkinfo | jq -j '(.internal | to_entries | .[] | (.value, \" \", .key, \"\\n\"))' | fmt\r\necho\r\nbitcoin-cli getpeerinfo | jq -j '.[] | (.inv_to_send, \" \", .connection_type, \" \", .id, \" \", .relaytxes, \" \", .synced_blocks, \" \", (.network|sub(\"not_publicly_routable\";\"onion\")), \" inv-rx:\", ((.bytesrecv_per_msg.inv//0)/1024|floor), \"kB inv-tx:\", ((.bytessent_per_msg.inv//0)/1024|floor), \"kB gd-rx:\", ((.bytesrecv_per_msg.getdata//0)/1024|floor), \"kB nf-tx:\", ((.bytessent_per_msg.notfound//0)/1024|floor), \"kB minfee:\", (.minfeefilter*1e6|floor)/10, \"s/vb \", (.subver|gsub(\" |(^$)\"; \"_\")), \" \", .addr, \"\\n\")' | sort -rn | column -t\r\n```",
      "created_at" : "2023-11-30T15:39:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28592#issuecomment-1834020972",
      "id" : 1834020972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28592",
      "node_id" : "IC_kwDOABII585tUPBs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1834020972/reactions"
      },
      "updated_at" : "2023-11-30T15:39:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1834020972",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   }
]
