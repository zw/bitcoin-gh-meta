[
   {
      "body" : "After making travis happy (https://travis-ci.org/bitcoin/bitcoin/builds/93038691 thanks to @theuni ) I force push with some squashes, some suggestions (not all yet) collected from @theuni on IRC and one of the commits nacked and deleted (unifying the crypto and consensus packages).\r\nInterestingly enough, travis thinks that new branch is utterly wrong unless you use mac (see https://travis-ci.org/bitcoin/bitcoin/builds/93061856 ). \r\n\r\nBuilding locally on xubuntu-0.14, it is clear to me that I'm not using the following commands efficiently when touching Makefile.am:\r\n```\r\nmake clean\r\ngit clean -fdx\r\n./autogen.sh\r\n```\r\nAdvice welcomed.",
      "created_at" : "2015-11-25T00:16:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7091#issuecomment-159445646",
      "id" : 159445646,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7091",
      "updated_at" : "2015-11-25T13:26:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159445646",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Sorry for abusing travis but I got really paranoid while trying to find the needles (https://github.com/jtimon/bitcoin/compare/consensus-build...jtimon:consensus-build-full).\r\nI really don't understand why the order of the packages in, for example, bitcoind_LDADD matters at linking time (including the local desperate random over-cleaning mentioned before).\r\n@sipa said on IRC that it shouldn't matter too. If anyone else can bring some light to this, it would be very welcomed. ",
      "created_at" : "2015-11-26T17:54:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7091#issuecomment-159969293",
      "id" : 159969293,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7091",
      "updated_at" : "2015-11-26T17:56:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159969293",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "To clarify: it's my understanding that the problem is that autotools generate both the command-line arguments to the linker, and the emitted rules in the makefile in the same order, based on the order of things in LDADD.\r\n\r\nThe order of arguments to the linker does matter (needs to be in order from dependers to dependencies), but for fast-failure behaviour, @jtimon wants them to be build in order from dependency to depender, which seems reasonable.\r\n\r\n@theuni Any idea about this?",
      "created_at" : "2015-11-28T12:55:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7091#issuecomment-160292030",
      "id" : 160292030,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7091",
      "updated_at" : "2015-11-28T12:55:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/160292030",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Yes, @sipa, that's what I would like: that packages are built in the opposite way they have to be listed for linking (ie lowest level things first). I was going to ask something like that in http://github.com/jtimon/bitcoin/commit/4f5cf2655f150c65748989aef97c3b7f6a78f9d7#commitcomment-14660501 but your explanation is more complete.\r\nIn any case, if that is possible, I think it would probably make sense to do that in a separate PR and leave this one as it is (module review/nits).",
      "created_at" : "2015-11-28T13:16:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7091#issuecomment-160295304",
      "id" : 160295304,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7091",
      "updated_at" : "2015-11-28T13:16:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/160295304",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "By the way, the building order discussion is related to https://github.com/bitcoin/bitcoin/pull/5112",
      "created_at" : "2015-11-28T13:21:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7091#issuecomment-160295773",
      "id" : 160295773,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7091",
      "updated_at" : "2015-11-28T13:21:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/160295773",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Rebased(1).",
      "created_at" : "2015-11-29T23:03:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7091#issuecomment-160479763",
      "id" : 160479763,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7091",
      "updated_at" : "2015-11-29T23:03:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/160479763",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Rebased(2).",
      "created_at" : "2015-12-01T21:38:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7091#issuecomment-161103558",
      "id" : 161103558,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7091",
      "updated_at" : "2015-12-01T21:38:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/161103558",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@theuni and I plan to peer program this to also avoid building the objects in the consensus package twice like it's being done now (once for libconsensus and once for the rest). So this will hopefully be replaced with something better. ",
      "created_at" : "2015-12-03T16:10:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7091#issuecomment-161692942",
      "id" : 161692942,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7091",
      "updated_at" : "2015-12-03T16:10:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/161692942",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Reopened and updated (I had missed the new prevector [which by the way could have been created in the consensus folder directly instead of having to move it later]).\r\n",
      "created_at" : "2015-12-08T06:09:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7091#issuecomment-162781025",
      "id" : 162781025,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7091",
      "updated_at" : "2015-12-08T06:09:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162781025",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "ACK\r\n\r\nLooks good, and I tested linking with a trivial main function.\r\n\r\nShould also separate out the unit tests, but that could be postponed to a follow up PR.  Let me know if you want me to take that on.",
      "created_at" : "2015-12-10T17:53:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7091#issuecomment-163701771",
      "id" : 163701771,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7091",
      "updated_at" : "2015-12-10T17:53:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/163701771",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/107096?v=3",
         "events_url" : "https://api.github.com/users/devrandom/events{/privacy}",
         "followers_url" : "https://api.github.com/users/devrandom/followers",
         "following_url" : "https://api.github.com/users/devrandom/following{/other_user}",
         "gists_url" : "https://api.github.com/users/devrandom/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/devrandom",
         "id" : 107096,
         "login" : "devrandom",
         "organizations_url" : "https://api.github.com/users/devrandom/orgs",
         "received_events_url" : "https://api.github.com/users/devrandom/received_events",
         "repos_url" : "https://api.github.com/users/devrandom/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/devrandom/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/devrandom/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/devrandom"
      }
   },
   {
      "body" : "At some point it would be ideal to separate the tests for the things in the consensus module/package to the consensus directory (just like wallet and qt).\r\nBut I haven't checked whether those tests have undesirable dependencies yet, and I didn't plan to do any of that on the near future. So, yes, if you want to work on that, I'm happy to review.",
      "created_at" : "2015-12-10T19:06:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7091#issuecomment-163719436",
      "id" : 163719436,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7091",
      "updated_at" : "2015-12-10T19:06:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/163719436",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "OK, cool.  I'll wait for this to be merged first.",
      "created_at" : "2015-12-10T19:11:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7091#issuecomment-163721771",
      "id" : 163721771,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7091",
      "updated_at" : "2015-12-10T19:11:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/163721771",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/107096?v=3",
         "events_url" : "https://api.github.com/users/devrandom/events{/privacy}",
         "followers_url" : "https://api.github.com/users/devrandom/followers",
         "following_url" : "https://api.github.com/users/devrandom/following{/other_user}",
         "gists_url" : "https://api.github.com/users/devrandom/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/devrandom",
         "id" : 107096,
         "login" : "devrandom",
         "organizations_url" : "https://api.github.com/users/devrandom/orgs",
         "received_events_url" : "https://api.github.com/users/devrandom/received_events",
         "repos_url" : "https://api.github.com/users/devrandom/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/devrandom/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/devrandom/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/devrandom"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2015-12-10T19:36:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7091#issuecomment-163728182",
      "id" : 163728182,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7091",
      "updated_at" : "2015-12-10T19:36:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/163728182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "ut ACK. Objections withdrawn. Lumping everything together is non-ideal, but it's still an improvement. Makes sense as a step forward.",
      "created_at" : "2015-12-16T06:39:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7091#issuecomment-165014993",
      "id" : 165014993,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7091",
      "updated_at" : "2015-12-16T06:39:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/165014993",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   }
]
