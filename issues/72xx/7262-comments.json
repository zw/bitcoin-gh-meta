[
   {
      "body" : "utACK",
      "created_at" : "2015-12-29T01:35:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7262#issuecomment-167691046",
      "id" : 167691046,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7262",
      "updated_at" : "2015-12-29T01:35:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/167691046",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "NACK accounts are deprecated\r\n\r\nperformance improvements for code which will be removed isn't worth it",
      "created_at" : "2015-12-29T01:43:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7262#issuecomment-167692511",
      "id" : 167692511,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7262",
      "updated_at" : "2015-12-29T01:43:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/167692511",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "@pstratem is there a concrete list of deprecations somewhere?",
      "created_at" : "2015-12-29T01:44:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7262#issuecomment-167692566",
      "id" : 167692566,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7262",
      "updated_at" : "2015-12-29T01:44:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/167692566",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "@dcousens https://github.com/bitcoin/bitcoin/pull/5575",
      "created_at" : "2015-12-29T01:51:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7262#issuecomment-167694170",
      "id" : 167694170,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7262",
      "updated_at" : "2015-12-29T01:51:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/167694170",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "Why do they still exist if they were deprecated prior to `0.11`?\r\nShouldn't they be removed for `0.12`?",
      "created_at" : "2015-12-29T02:35:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7262#issuecomment-167702990",
      "id" : 167702990,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7262",
      "updated_at" : "2015-12-29T02:35:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/167702990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "Luke [wrote](https://github.com/bitcoin/bitcoin/issues/3816#issuecomment-61816826) \"merchants and exchanges [...] shouldn't be using Bitcoin Core's wallet implementation at all right now\" to which sipa [responded](https://github.com/bitcoin/bitcoin/issues/3816#issuecomment-61817110) \"whether they should or not, I'm pretty sure that several do, and we don't want them to stop upgrading their software because we drop a feature\".\r\n\r\nI guess that's the crux of the matter. Dropping a feature that is in use without offering a replacement feature will cause people to either stop upgrading or worse.",
      "created_at" : "2015-12-29T03:25:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7262#issuecomment-167710198",
      "id" : 167710198,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7262",
      "updated_at" : "2015-12-29T03:25:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/167710198",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=3",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "body" : "No problem with using bitcoin core's wallet implementation, but indeed, the accounts mechanism is going to be removed at some point.\r\n",
      "created_at" : "2016-01-04T08:39:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7262#issuecomment-168611865",
      "id" : 168611865,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7262",
      "updated_at" : "2016-01-04T08:39:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/168611865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "In any case that's not a reason for not merging this - this doesn't actually extend the API (which would be problematic) but purports make the current implementation more efficient. If this is code review correct and tested there's no reason not to merge it.\r\n",
      "created_at" : "2016-01-04T08:41:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7262#issuecomment-168612094",
      "id" : 168612094,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7262",
      "updated_at" : "2016-01-04T08:41:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/168612094",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj if anything we should be making these rpc calls slow in the hope that people notice they're deprecated",
      "created_at" : "2016-01-05T19:10:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7262#issuecomment-169100269",
      "id" : 169100269,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7262",
      "updated_at" : "2016-01-05T19:10:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/169100269",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "Note that one reason accounts are not removed yet, is *because* we have no alternative to getaccountaddress yet... and it's likely this code will get reused in implementing whatever replaces it. So concept ACK.",
      "created_at" : "2016-01-15T20:55:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7262#issuecomment-172090356",
      "id" : 172090356,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7262",
      "updated_at" : "2016-01-15T20:55:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/172090356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7262#discussion_r49904396"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7262"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/49904396"
         }
      },
      "body" : "Flattening the wtx variable doesn't actually optimise anything, and makes it slightly harder to follow. I'd prefer to not change this aspect.",
      "commit_id" : "2409865e14dca0704e5618915d6ef902610d91be",
      "created_at" : "2016-01-15T20:59:17Z",
      "diff_hunk" : "@@ -137,26 +137,25 @@ CBitcoinAddress GetAccountAddress(string strAccount, bool bForceNew=false)\n     CAccount account;\n     walletdb.ReadAccount(strAccount, account);\n \n-    bool bKeyUsed = false;\n-\n-    // Check if the current key has been used\n-    if (account.vchPubKey.IsValid())\n-    {\n-        CScript scriptPubKey = GetScriptForDestination(account.vchPubKey.GetID());\n-        for (map<uint256, CWalletTx>::iterator it = pwalletMain->mapWallet.begin();\n-             it != pwalletMain->mapWallet.end() && account.vchPubKey.IsValid();\n-             ++it)\n-        {\n-            const CWalletTx& wtx = (*it).second;\n-            BOOST_FOREACH(const CTxOut& txout, wtx.vout)\n-                if (txout.scriptPubKey == scriptPubKey)\n-                    bKeyUsed = true;\n+    if (!bForceNew) {\n+        if (!account.vchPubKey.IsValid())\n+            bForceNew = true;\n+        else {\n+            // Check if the current key has been used\n+            CScript scriptPubKey = GetScriptForDestination(account.vchPubKey.GetID());\n+            for (map<uint256, CWalletTx>::iterator it = pwalletMain->mapWallet.begin();\n+                 it != pwalletMain->mapWallet.end() && account.vchPubKey.IsValid();\n+                 ++it)\n+                BOOST_FOREACH(const CTxOut& txout, (*it).second.vout)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7262#discussion_r49904396",
      "id" : 49904396,
      "original_commit_id" : "2409865e14dca0704e5618915d6ef902610d91be",
      "original_position" : 27,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 27,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7262",
      "updated_at" : "2016-01-15T20:59:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/49904396",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Also utACK, with mentioned nit.",
      "created_at" : "2016-01-15T20:59:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7262#issuecomment-172091124",
      "id" : 172091124,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7262",
      "updated_at" : "2016-01-15T20:59:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/172091124",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
