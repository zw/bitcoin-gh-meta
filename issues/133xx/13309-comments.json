[
   {
      "author_association" : "MEMBER",
      "body" : "Nice improvement, concept ACK.",
      "created_at" : "2018-05-23T08:57:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#issuecomment-391273351",
      "id" : 391273351,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13309",
      "updated_at" : "2018-05-23T08:57:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/391273351",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r190177627"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190177627"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why drop `explicit` here? I don't see changes to the call sites.",
      "commit_id" : "d4ee6530535753292f73a8096a714b1be80f729f",
      "created_at" : "2018-05-23T09:19:50Z",
      "diff_hunk" : "@@ -124,7 +124,8 @@ struct PrecomputedTransactionData\n     uint256 hashPrevouts, hashSequence, hashOutputs;\n     bool ready = false;\n \n-    explicit PrecomputedTransactionData(const CTransaction& tx);\n+    template<class T>\n+    PrecomputedTransactionData(const T& tx);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r190177627",
      "id" : 190177627,
      "original_commit_id" : "c3e1a21902ebe36b444b4a365783614c5117eb77",
      "original_position" : 6,
      "path" : "src/script/interpreter.h",
      "position" : null,
      "pull_request_review_id" : 122498647,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309",
      "updated_at" : "2018-05-27T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190177627",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2018-05-23T09:25:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#issuecomment-391281933",
      "id" : 391281933,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13309",
      "updated_at" : "2018-05-23T09:25:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/391281933",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r190182210"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190182210"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, drop `Generic` prefix?",
      "commit_id" : "d4ee6530535753292f73a8096a714b1be80f729f",
      "created_at" : "2018-05-23T09:34:23Z",
      "diff_hunk" : "@@ -160,10 +162,11 @@ class BaseSignatureChecker\n     virtual ~BaseSignatureChecker() {}\n };\n \n-class TransactionSignatureChecker : public BaseSignatureChecker\n+template<class T>\n+class GenericTransactionSignatureChecker : public BaseSignatureChecker",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r190182210",
      "id" : 190182210,
      "original_commit_id" : "c3e1a21902ebe36b444b4a365783614c5117eb77",
      "original_position" : 26,
      "path" : "src/script/interpreter.h",
      "position" : null,
      "pull_request_review_id" : 122504131,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309",
      "updated_at" : "2018-05-27T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190182210",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r190193752"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190193752"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I've added it so that the names `TransactionSignatureChecker` and `MutableTransactionSignatureChecker` are still valid as used before",
      "commit_id" : "d4ee6530535753292f73a8096a714b1be80f729f",
      "created_at" : "2018-05-23T10:12:13Z",
      "diff_hunk" : "@@ -160,10 +162,11 @@ class BaseSignatureChecker\n     virtual ~BaseSignatureChecker() {}\n };\n \n-class TransactionSignatureChecker : public BaseSignatureChecker\n+template<class T>\n+class GenericTransactionSignatureChecker : public BaseSignatureChecker",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r190193752",
      "id" : 190193752,
      "in_reply_to_id" : 190182210,
      "original_commit_id" : "c3e1a21902ebe36b444b4a365783614c5117eb77",
      "original_position" : 26,
      "path" : "src/script/interpreter.h",
      "position" : null,
      "pull_request_review_id" : 122518041,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309",
      "updated_at" : "2018-05-27T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190193752",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/14386?v=4",
         "events_url" : "https://api.github.com/users/martinus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martinus/followers",
         "following_url" : "https://api.github.com/users/martinus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martinus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martinus",
         "id" : 14386,
         "login" : "martinus",
         "organizations_url" : "https://api.github.com/users/martinus/orgs",
         "received_events_url" : "https://api.github.com/users/martinus/received_events",
         "repos_url" : "https://api.github.com/users/martinus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martinus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martinus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martinus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r190197054"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190197054"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "you are right, I probably should not drop that.",
      "commit_id" : "d4ee6530535753292f73a8096a714b1be80f729f",
      "created_at" : "2018-05-23T10:26:22Z",
      "diff_hunk" : "@@ -124,7 +124,8 @@ struct PrecomputedTransactionData\n     uint256 hashPrevouts, hashSequence, hashOutputs;\n     bool ready = false;\n \n-    explicit PrecomputedTransactionData(const CTransaction& tx);\n+    template<class T>\n+    PrecomputedTransactionData(const T& tx);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r190197054",
      "id" : 190197054,
      "in_reply_to_id" : 190177627,
      "original_commit_id" : "c3e1a21902ebe36b444b4a365783614c5117eb77",
      "original_position" : 6,
      "path" : "src/script/interpreter.h",
      "position" : null,
      "pull_request_review_id" : 122522458,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309",
      "updated_at" : "2018-05-27T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190197054",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/14386?v=4",
         "events_url" : "https://api.github.com/users/martinus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martinus/followers",
         "following_url" : "https://api.github.com/users/martinus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martinus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martinus",
         "id" : 14386,
         "login" : "martinus",
         "organizations_url" : "https://api.github.com/users/martinus/orgs",
         "received_events_url" : "https://api.github.com/users/martinus/received_events",
         "repos_url" : "https://api.github.com/users/martinus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martinus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martinus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martinus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r190199966"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190199966"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Right.",
      "commit_id" : "d4ee6530535753292f73a8096a714b1be80f729f",
      "created_at" : "2018-05-23T10:38:45Z",
      "diff_hunk" : "@@ -160,10 +162,11 @@ class BaseSignatureChecker\n     virtual ~BaseSignatureChecker() {}\n };\n \n-class TransactionSignatureChecker : public BaseSignatureChecker\n+template<class T>\n+class GenericTransactionSignatureChecker : public BaseSignatureChecker",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r190199966",
      "id" : 190199966,
      "in_reply_to_id" : 190182210,
      "original_commit_id" : "c3e1a21902ebe36b444b4a365783614c5117eb77",
      "original_position" : 26,
      "path" : "src/script/interpreter.h",
      "position" : null,
      "pull_request_review_id" : 122526111,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309",
      "updated_at" : "2018-05-27T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190199966",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK after squash.",
      "created_at" : "2018-05-23T11:32:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#issuecomment-391314461",
      "id" : 391314461,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13309",
      "updated_at" : "2018-05-23T11:32:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/391314461",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Very nice!\r\n\r\nConcept ACK",
      "created_at" : "2018-05-23T14:31:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#issuecomment-391369000",
      "id" : 391369000,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13309",
      "updated_at" : "2018-05-23T14:31:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/391369000",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r190677481"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190677481"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You don't actually need a template here; all existing uses of `TransactionSignatureCreator` become more efficient to rewrite using `MutableTransactionSignatureCreator` (intuitively this makes sense - you can't add a signature to an immutable transaction):\r\n```diff\r\ndiff --git a/src/wallet/wallet.cpp b/src/wallet/wallet.cpp\r\nindex 2a2f8b5b20..c2b1915b11 100644\r\n--- a/src/wallet/wallet.cpp\r\n+++ b/src/wallet/wallet.cpp\r\n@@ -2608,7 +2608,6 @@ bool CWallet::SignTransaction(CMutableTransaction &tx)\r\n     AssertLockHeld(cs_wallet); // mapWallet\r\n \r\n     // sign the new tx\r\n-    CTransaction txNewConst(tx);\r\n     int nIn = 0;\r\n     for (const auto& input : tx.vin) {\r\n         std::map<uint256, CWalletTx>::const_iterator mi = mapWallet.find(input.prevout.hash);\r\n@@ -2618,7 +2617,7 @@ bool CWallet::SignTransaction(CMutableTransaction &tx)\r\n         const CScript& scriptPubKey = mi->second.tx->vout[input.prevout.n].scriptPubKey;\r\n         const CAmount& amount = mi->second.tx->vout[input.prevout.n].nValue;\r\n         SignatureData sigdata;\r\n-        if (!ProduceSignature(*this, TransactionSignatureCreator(&txNewConst, nIn, amount, SIGHASH_ALL), scriptPubKey, sigdata)) {\r\n+        if (!ProduceSignature(*this, MutableTransactionSignatureCreator(&tx, nIn, amount, SIGHASH_ALL), scriptPubKey, sigdata)) {\r\n             return false;\r\n         }\r\n         UpdateTransaction(tx, nIn, sigdata);\r\n@@ -3040,14 +3039,13 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\r\n \r\n         if (sign)\r\n         {\r\n-            CTransaction txNewConst(txNew);\r\n             int nIn = 0;\r\n             for (const auto& coin : selected_coins)\r\n             {\r\n                 const CScript& scriptPubKey = coin.txout.scriptPubKey;\r\n                 SignatureData sigdata;\r\n \r\n-                if (!ProduceSignature(*this, TransactionSignatureCreator(&txNewConst, nIn, coin.txout.nValue, SIGHASH_ALL), scriptPubKey, sigdata))\r\n+                if (!ProduceSignature(*this, MutableTransactionSignatureCreator(&txNew, nIn, coin.txout.nValue, SIGHASH_ALL), scriptPubKey, sigdata))\r\n                 {\r\n                     strFailReason = _(\"Signing transaction failed\");\r\n                     return false;\r\n```",
      "commit_id" : "d4ee6530535753292f73a8096a714b1be80f729f",
      "created_at" : "2018-05-24T17:58:42Z",
      "diff_hunk" : "@@ -36,26 +36,23 @@ class BaseSignatureCreator {\n     virtual bool CreateSig(const SigningProvider& provider, std::vector<unsigned char>& vchSig, const CKeyID& keyid, const CScript& scriptCode, SigVersion sigversion) const =0;\n };\n \n-/** A signature creator for transactions. */\n-class TransactionSignatureCreator : public BaseSignatureCreator {\n-    const CTransaction* txTo;\n+template <class T>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r190677481",
      "id" : 190677481,
      "original_commit_id" : "b4fa297e7e293c125617c5a9f82a031e174da086",
      "original_position" : 7,
      "path" : "src/script/sign.h",
      "position" : null,
      "pull_request_review_id" : 123106313,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309",
      "updated_at" : "2018-05-27T11:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190677481",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "\r\nAs suggested by @sipa I have now removed the template for `MutableTransactionSignatureCreator` and used it directly in wallet.cpp.\r\nAlso I ran the format script and squashed everything.\r\n",
      "created_at" : "2018-05-27T11:16:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#issuecomment-392323146",
      "id" : 392323146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13309",
      "updated_at" : "2018-05-27T11:16:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/392323146",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/14386?v=4",
         "events_url" : "https://api.github.com/users/martinus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martinus/followers",
         "following_url" : "https://api.github.com/users/martinus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martinus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martinus",
         "id" : 14386,
         "login" : "martinus",
         "organizations_url" : "https://api.github.com/users/martinus/orgs",
         "received_events_url" : "https://api.github.com/users/martinus/received_events",
         "repos_url" : "https://api.github.com/users/martinus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martinus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martinus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martinus"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK d4ee6530535753292f73a8096a714b1be80f729f",
      "created_at" : "2018-05-27T19:48:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#issuecomment-392361343",
      "id" : 392361343,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13309",
      "updated_at" : "2018-05-27T19:48:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/392361343",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r191290976"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/191290976"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You can use `MutableTransactionSignatureChecker` here.",
      "commit_id" : "d4ee6530535753292f73a8096a714b1be80f729f",
      "created_at" : "2018-05-29T02:11:51Z",
      "diff_hunk" : "@@ -37,26 +37,20 @@ class BaseSignatureCreator {\n };\n \n /** A signature creator for transactions. */\n-class TransactionSignatureCreator : public BaseSignatureCreator {\n-    const CTransaction* txTo;\n+class MutableTransactionSignatureCreator : public BaseSignatureCreator\n+{\n+    const CMutableTransaction* txTo;\n     unsigned int nIn;\n     int nHashType;\n     CAmount amount;\n-    const TransactionSignatureChecker checker;\n+    const GenericTransactionSignatureChecker<CMutableTransaction> checker;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r191290976",
      "id" : 191290976,
      "original_commit_id" : "d4ee6530535753292f73a8096a714b1be80f729f",
      "original_position" : 13,
      "path" : "src/script/sign.h",
      "position" : 13,
      "pull_request_review_id" : 123832313,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309",
      "updated_at" : "2018-05-29T02:12:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/191290976",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r191507409"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/191507409"
         }
      },
      "author_association" : "MEMBER",
      "body" : "style-nit: you can move the `:` to the next line to avoid excessive white space (which looks confusing in the diff and in editors with limited width.)\r\nsytle-nit: you could keep the empty new line between the constructor and the method to keep the diff minimal.",
      "commit_id" : "d4ee6530535753292f73a8096a714b1be80f729f",
      "created_at" : "2018-05-29T17:24:55Z",
      "diff_hunk" : "@@ -1089,22 +1089,22 @@ namespace {\n  * Wrapper that serializes like CTransaction, but with the modifications\n  *  required for the signature hash done in-place\n  */\n-class CTransactionSignatureSerializer {\n+template <class T>\n+class CTransactionSignatureSerializer\n+{\n private:\n-    const CTransaction& txTo;  //!< reference to the spending transaction (the one being serialized)\n+    const T& txTo;             //!< reference to the spending transaction (the one being serialized)\n     const CScript& scriptCode; //!< output script being consumed\n     const unsigned int nIn;    //!< input index of txTo being signed\n     const bool fAnyoneCanPay;  //!< whether the hashtype has the SIGHASH_ANYONECANPAY flag set\n     const bool fHashSingle;    //!< whether the hashtype is SIGHASH_SINGLE\n     const bool fHashNone;      //!< whether the hashtype is SIGHASH_NONE\n \n public:\n-    CTransactionSignatureSerializer(const CTransaction &txToIn, const CScript &scriptCodeIn, unsigned int nInIn, int nHashTypeIn) :\n-        txTo(txToIn), scriptCode(scriptCodeIn), nIn(nInIn),\n-        fAnyoneCanPay(!!(nHashTypeIn & SIGHASH_ANYONECANPAY)),\n-        fHashSingle((nHashTypeIn & 0x1f) == SIGHASH_SINGLE),\n-        fHashNone((nHashTypeIn & 0x1f) == SIGHASH_NONE) {}\n-\n+    CTransactionSignatureSerializer(const T& txToIn, const CScript& scriptCodeIn, unsigned int nInIn, int nHashTypeIn) : txTo(txToIn), scriptCode(scriptCodeIn), nIn(nInIn),\n+                                                                                                                         fAnyoneCanPay(!!(nHashTypeIn & SIGHASH_ANYONECANPAY)),\n+                                                                                                                         fHashSingle((nHashTypeIn & 0x1f) == SIGHASH_SINGLE),\n+                                                                                                                         fHashNone((nHashTypeIn & 0x1f) == SIGHASH_NONE) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r191507409",
      "id" : 191507409,
      "original_commit_id" : "d4ee6530535753292f73a8096a714b1be80f729f",
      "original_position" : 27,
      "path" : "src/script/interpreter.cpp",
      "position" : 27,
      "pull_request_review_id" : 124092777,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309",
      "updated_at" : "2018-05-29T17:27:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/191507409",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r191507972"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/191507972"
         }
      },
      "author_association" : "MEMBER",
      "body" : "sytle-nit: you could keep the empty new line between the constructor and the method to keep the diff minimal?",
      "commit_id" : "d4ee6530535753292f73a8096a714b1be80f729f",
      "created_at" : "2018-05-29T17:26:38Z",
      "diff_hunk" : "@@ -14,9 +14,8 @@\n \n typedef std::vector<unsigned char> valtype;\n \n-TransactionSignatureCreator::TransactionSignatureCreator(const CTransaction* txToIn, unsigned int nInIn, const CAmount& amountIn, int nHashTypeIn) : txTo(txToIn), nIn(nInIn), nHashType(nHashTypeIn), amount(amountIn), checker(txTo, nIn, amountIn) {}\n-\n-bool TransactionSignatureCreator::CreateSig(const SigningProvider& provider, std::vector<unsigned char>& vchSig, const CKeyID& address, const CScript& scriptCode, SigVersion sigversion) const\n+MutableTransactionSignatureCreator::MutableTransactionSignatureCreator(const CMutableTransaction* txToIn, unsigned int nInIn, const CAmount& amountIn, int nHashTypeIn) : txTo(txToIn), nIn(nInIn), nHashType(nHashTypeIn), amount(amountIn), checker(txTo, nIn, amountIn) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#discussion_r191507972",
      "id" : 191507972,
      "original_commit_id" : "d4ee6530535753292f73a8096a714b1be80f729f",
      "original_position" : 7,
      "path" : "src/script/sign.cpp",
      "position" : 7,
      "pull_request_review_id" : 124092777,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13309",
      "updated_at" : "2018-05-29T17:27:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/191507972",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tagged with \"refactoring\" since the only change should be removing the redundant member `MutableTransactionSignatureCreator::tx`",
      "created_at" : "2018-05-29T17:30:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#issuecomment-392866873",
      "id" : 392866873,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13309",
      "updated_at" : "2018-05-29T17:30:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/392866873",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "In 6b8b63a I've fixed all the nits, tried to keep the diff minimal, and squashed it again",
      "created_at" : "2018-05-30T14:04:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13309#issuecomment-393174492",
      "id" : 393174492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13309",
      "updated_at" : "2018-05-30T14:04:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/393174492",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/14386?v=4",
         "events_url" : "https://api.github.com/users/martinus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martinus/followers",
         "following_url" : "https://api.github.com/users/martinus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martinus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martinus",
         "id" : 14386,
         "login" : "martinus",
         "organizations_url" : "https://api.github.com/users/martinus/orgs",
         "received_events_url" : "https://api.github.com/users/martinus/received_events",
         "repos_url" : "https://api.github.com/users/martinus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martinus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martinus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martinus"
      }
   }
]
