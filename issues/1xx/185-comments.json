[
   {
      "body" : "This is on Debian Squeeze, with libdb4.7 and build with USE_UPNP undefined",
      "created_at" : "2011-04-24T21:21:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/185#issuecomment-1050927",
      "id" : 1050927,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/185",
      "updated_at" : "2011-04-24T21:21:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1050927",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/747896?v=3",
         "events_url" : "https://api.github.com/users/javgh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/javgh/followers",
         "following_url" : "https://api.github.com/users/javgh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/javgh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/javgh",
         "id" : 747896,
         "login" : "javgh",
         "organizations_url" : "https://api.github.com/users/javgh/orgs",
         "received_events_url" : "https://api.github.com/users/javgh/received_events",
         "repos_url" : "https://api.github.com/users/javgh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/javgh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/javgh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/javgh"
      }
   },
   {
      "body" : "ArtForz was able to track this down further:\r\nThe problem is that GetAccountAddress() in rpc.cpp starts an atomic db operation with walletdb.TxnBegin();\r\nIf may then happen, that GetKeyFromKeyPool() is called and when the key pool is not topped up, new keys will be generated and written to the database. This write operation then blocks, presumably waiting for the atomic operation to be completed.\r\n\r\nI'm not sure what a good solution would be. I tried a workaround here: https://github.com/javgh/bitcoin/commit/1049dc625f7b1d695092de72ad0c5bb7d329edfa\r\nThat contains a method to top up the key pool separately and does though before starting the atomic db operation.",
      "created_at" : "2011-04-24T23:57:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/185#issuecomment-1051225",
      "id" : 1051225,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/185",
      "updated_at" : "2011-04-24T23:57:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1051225",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/747896?v=3",
         "events_url" : "https://api.github.com/users/javgh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/javgh/followers",
         "following_url" : "https://api.github.com/users/javgh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/javgh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/javgh",
         "id" : 747896,
         "login" : "javgh",
         "organizations_url" : "https://api.github.com/users/javgh/orgs",
         "received_events_url" : "https://api.github.com/users/javgh/received_events",
         "repos_url" : "https://api.github.com/users/javgh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/javgh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/javgh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/javgh"
      }
   },
   {
      "body" : "Seems to be fixed. I can't reproduce it anymore.",
      "created_at" : "2011-08-28T10:47:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/185#issuecomment-1923391",
      "id" : 1923391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/185",
      "updated_at" : "2011-08-28T10:47:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1923391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/345092?v=3",
         "events_url" : "https://api.github.com/users/tcatm/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tcatm/followers",
         "following_url" : "https://api.github.com/users/tcatm/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tcatm/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tcatm",
         "id" : 345092,
         "login" : "tcatm",
         "organizations_url" : "https://api.github.com/users/tcatm/orgs",
         "received_events_url" : "https://api.github.com/users/tcatm/received_events",
         "repos_url" : "https://api.github.com/users/tcatm/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tcatm/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tcatm/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tcatm"
      }
   }
]
