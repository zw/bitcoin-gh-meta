{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "### Describe the issue\r\nIf I try to connect with bitcoin-cli or any other client I get 401. I use normal username/password and always get 401 (localhost and remote). Authentication over basic auth cookie via bitcoin-cli works.\r\n\r\ndebug.log Msg:\r\n`2017-02-01 06:59:45 ThreadRPCServer incorrect password attempt from 127.0.0.1:41472`\r\nbitcoin-cli Msg:\r\n`error: incorrect rpcuser or rpcpassword (authorization failed)`\r\n\r\n### Can you reliably reproduce the issue?\r\n#### If so, please list the steps to reproduce below:\r\n1. Configure bitcoind (with my config) and start bitcoind\r\n2. bitcoin-cli -rpcuser=REPLACED -rpcpassword=REPLACED  -rpcconnect=127.0.0.1 -rpcport=8332  -datadir=/data/btc getinfo\r\n3. \r\n\r\n### Expected behaviour\r\nSuccessful authentication\r\n\r\n### Actual behaviour\r\nHTTP Code 401\r\n\r\n### What version of bitcoin-core are you using?\r\nList the version number/commit ID, and if it is an official binary, self compiled or a distribution package such as PPA.\r\n\r\n1. Bitcoin Core Daemon version v0.13.2 Arch Linux distribution package\r\n2. Bitcoin Core Daemon version v0.13.99.0-e99f0d7ad self compiled\r\n```\r\n  with wallet   = yes\r\n  with gui / qt = yes\r\n    qt version  = 5\r\n    with qr     = yes\r\n  with zmq      = yes\r\n  with test     = yes\r\n  with bench    = yes\r\n  with upnp     = yes\r\n  debug enabled = no\r\n```\r\n### Machine specs:\r\n- OS: Arch Linux x64\r\n- CPU: Xeon 4 cores 2 threads\r\n- RAM: 16G\r\n- Disk size: 16T RAID5\r\n- Disk Type (HD/SDD): HD\r\n\r\n### Any extra information that might be useful in the debugging process.\r\nThis is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred.\r\n\r\nMy bitcoind config:\r\n```\r\nserver=1\r\nlisten=1\r\nrpcuser=REPLACED\r\nrpcpassword=REPLACED\r\nrpcbind=127.0.0.1:8332\r\nrpcthreads=8\r\nrpcallowip=127.0.0.1\r\n```\r\n\r\nHTTP request/response (from tcpdump):\r\n```\r\nPOST / HTTP/1.1\r\nAuthorization: Basic UkVQTEFDRUQ6UkVQTEFDRUQ=\r\nHost: REPLACED:8332\r\nAccept: */*\r\nContent-type: application/json\r\nContent-Length: 39\r\n\r\n{\"method\":\"getinfo\",\"params\":[],\"id\":1}\r\n```\r\n```\r\nHTTP/1.1 401 Unauthorized\r\nWWW-Authenticate: Basic realm=\"jsonrpc\"\r\nDate: Wed, 01 Feb 2017 07:05:40 GMT\r\nContent-Length: 0\r\nContent-Type: text/html; charset=ISO-8859-1\r\n```",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 15,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9661/comments",
   "created_at" : "2017-02-01T07:15:50Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9661/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/9661",
   "id" : 204512909,
   "labels" : [
      {
         "color" : "0052cc",
         "default" : false,
         "id" : 98279177,
         "name" : "RPC/REST/ZMQ",
         "node_id" : "MDU6TGFiZWw5ODI3OTE3Nw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ"
      },
      {
         "color" : "884400",
         "default" : false,
         "id" : 234877,
         "name" : "Windows",
         "node_id" : "MDU6TGFiZWwyMzQ4Nzc=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Windows"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9661/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUyMDQ1MTI5MDk=",
   "number" : 9661,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Bitcoind ThreadRPCServer authentication problems",
   "updated_at" : "2018-04-26T16:11:39Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9661",
   "user" : {
      "avatar_url" : "https://avatars1.githubusercontent.com/u/8588565?v=4",
      "events_url" : "https://api.github.com/users/gj12/events{/privacy}",
      "followers_url" : "https://api.github.com/users/gj12/followers",
      "following_url" : "https://api.github.com/users/gj12/following{/other_user}",
      "gists_url" : "https://api.github.com/users/gj12/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/gj12",
      "id" : 8588565,
      "login" : "gj12",
      "node_id" : "MDQ6VXNlcjg1ODg1NjU=",
      "organizations_url" : "https://api.github.com/users/gj12/orgs",
      "received_events_url" : "https://api.github.com/users/gj12/received_events",
      "repos_url" : "https://api.github.com/users/gj12/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/gj12/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/gj12/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/gj12"
   }
}
