[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. \n\n(Python linter says to remove unused headers.)",
      "created_at" : "2022-04-15T15:37:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1100182446",
      "id" : 1100182446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585Bk3Ou",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100182446/reactions"
      },
      "updated_at" : "2022-04-15T15:37:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100182446",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2022-04-16T06:38:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1100587144",
      "id" : 1100587144,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585BmaCI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100587144/reactions"
      },
      "updated_at" : "2022-04-19T02:46:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100587144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852039164"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852039164"
         }
      },
      "author_association" : "MEMBER",
      "body" : "btw: This fixes a bug that was exposed by the changes in #24818, where it was possible for a limit to be exceeded because `max_per_asn` differs per network but `asn_count` was not counted per network (in combination with `==`). Making the counting per ipv4/ipv6 avoids this, and makes sense to me conceptually. So after this, a single ASN can have *both* 2 IPv4 seeds and 6 IPv6 seeds.",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-18T10:51:23Z",
      "diff_hunk" : "@@ -179,13 +155,14 @@ def filterbyasn(ips: List[Dict], max_per_asn: Dict, max_per_net: int) -> List[Di\n             # do not add this ip as we already too many\n             # ips from this network\n             continue\n-        asn = lookup_asn(ip['net'], ip['ip'])\n-        if asn is None or asn_count[asn] == max_per_asn[ip['net']]:\n+        asn = asmap.lookup_asn(ip['ip'])\n+        if asn is None or asn_count[ip['net'], asn] == max_per_asn[ip['net']]:\n             # do not add this ip as we already have too many\n             # ips from this ASN on this network\n             continue\n-        asn_count[asn] += 1\n+        asn_count[ip['net'], asn] += 1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852039164",
      "id" : 852039164,
      "line" : 163,
      "node_id" : "PRRC_kwDOABII584yyRX8",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 163,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : 64,
      "pull_request_review_id" : 944292389,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852039164/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T10:51:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852039164",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852042358"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852042358"
         }
      },
      "author_association" : "MEMBER",
      "body" : "BTW I didn't realize before that Python had built-in functionality to parse/manipulate IP addresses (both v4 and v6). Might make sense (but not in this PR) to use this in more places and replace all the ad-hoc hacks.",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-18T10:58:55Z",
      "diff_hunk" : "@@ -0,0 +1,90 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2013-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+import ipaddress",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852042358",
      "id" : 852042358,
      "line" : 5,
      "node_id" : "PRRC_kwDOABII584yySJ2",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 5,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "contrib/seeds/asmap.py",
      "position" : 5,
      "pull_request_review_id" : 944296777,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852042358/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T10:58:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852042358",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852043903"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852043903"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The code from here came from [testmap](https://github.com/sipa/asmap/blob/master/testmap.py) which doesn't come with a license. It looks like @sipa and @jamesob contributed to it, so to include it we would need you to sign off that it's acceptable to include this here under the MIT license.",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-18T11:02:39Z",
      "diff_hunk" : "@@ -0,0 +1,90 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2013-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+import ipaddress\n+\n+# Convert a byte array to a bit array\n+def DecodeBytes(byts):\n+    return [(byt >> i) & 1 for byt in byts for i in range(8)]\n+\n+def DecodeBits(stream, bitpos, minval, bit_sizes):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852043903",
      "id" : 852043903,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII584yySh_",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "contrib/seeds/asmap.py",
      "position" : 11,
      "pull_request_review_id" : 944298847,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852043903/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T11:02:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852043903",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852125961"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852125961"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ACK MIT license from me.\r\n\r\nAlso, I'm currently rewriting the Python asmap code from scratch actually (to have a single class that can do creation of asmap files, decoding, lookup, diffing, have tests, ...), and it's close to being done.",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-18T13:43:57Z",
      "diff_hunk" : "@@ -0,0 +1,90 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2013-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+import ipaddress\n+\n+# Convert a byte array to a bit array\n+def DecodeBytes(byts):\n+    return [(byt >> i) & 1 for byt in byts for i in range(8)]\n+\n+def DecodeBits(stream, bitpos, minval, bit_sizes):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852125961",
      "id" : 852125961,
      "in_reply_to_id" : 852043903,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII584yymkJ",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "contrib/seeds/asmap.py",
      "position" : 11,
      "pull_request_review_id" : 944416614,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852125961/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T13:43:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852125961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852130384"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852130384"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ACK MIT license ",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-18T13:50:21Z",
      "diff_hunk" : "@@ -0,0 +1,90 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2013-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+import ipaddress\n+\n+# Convert a byte array to a bit array\n+def DecodeBytes(byts):\n+    return [(byt >> i) & 1 for byt in byts for i in range(8)]\n+\n+def DecodeBits(stream, bitpos, minval, bit_sizes):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852130384",
      "id" : 852130384,
      "in_reply_to_id" : 852043903,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII584yynpQ",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "contrib/seeds/asmap.py",
      "position" : 11,
      "pull_request_review_id" : 944422589,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852130384/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T13:50:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852130384",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852223502"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852223502"
         }
      },
      "author_association" : "MEMBER",
      "body" : "With this change I only see 12 entries in `nodes_main.txt` though (2 IPv4, 10 IPv6, all AS30765). Haven't reviewed deeply enough yet to see if that's a bug and where.",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-18T16:05:00Z",
      "diff_hunk" : "@@ -179,13 +155,14 @@ def filterbyasn(ips: List[Dict], max_per_asn: Dict, max_per_net: int) -> List[Di\n             # do not add this ip as we already too many\n             # ips from this network\n             continue\n-        asn = lookup_asn(ip['net'], ip['ip'])\n-        if asn is None or asn_count[asn] == max_per_asn[ip['net']]:\n+        asn = asmap.lookup_asn(ip['ip'])\n+        if asn is None or asn_count[ip['net'], asn] == max_per_asn[ip['net']]:\n             # do not add this ip as we already have too many\n             # ips from this ASN on this network\n             continue\n-        asn_count[asn] += 1\n+        asn_count[ip['net'], asn] += 1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852223502",
      "id" : 852223502,
      "in_reply_to_id" : 852039164,
      "line" : 163,
      "node_id" : "PRRC_kwDOABII584yy-YO",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 163,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : 64,
      "pull_request_review_id" : 944555670,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852223502/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T16:23:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852223502",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852224881"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852224881"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thank you!\r\n\r\n> Also, I'm currently rewriting the Python asmap code from scratch actually (to have a single class that can do creation of asmap files, decoding, lookup, diffing, have tests, ...), and it's close to being done.\r\n\r\nOK, we can wait for that, there's no hurry here. It would be nice to have this before 0.24 branch-off. ",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-18T16:07:07Z",
      "diff_hunk" : "@@ -0,0 +1,90 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2013-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+import ipaddress\n+\n+# Convert a byte array to a bit array\n+def DecodeBytes(byts):\n+    return [(byt >> i) & 1 for byt in byts for i in range(8)]\n+\n+def DecodeBits(stream, bitpos, minval, bit_sizes):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852224881",
      "id" : 852224881,
      "in_reply_to_id" : 852043903,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII584yy-tx",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "contrib/seeds/asmap.py",
      "position" : 11,
      "pull_request_review_id" : 944557608,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852224881/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T16:07:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852224881",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested that both `-a` and `--asmap` run, but if `makeseeds` no longer works without the added arg, can it be removed?\r\n\r\n```\r\n$ python3 makeseeds.py < seeds_main.txt > nodes_main.txt\r\nusage: makeseeds.py [-h] -a ASMAP\r\nmakeseeds.py: error: the following arguments are required: -a/--asmap\r\n```\r\n",
      "created_at" : "2022-04-18T16:11:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1101531302",
      "id" : 1101531302,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585BqAim",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1101531302/reactions"
      },
      "updated_at" : "2022-04-18T16:11:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1101531302",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852228953"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852228953"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe update here\r\n```suggestion\r\nThe seeds compiled into the release are created from sipa's DNS seed and AS map data, like this:\r\n```\r\n",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-18T16:13:26Z",
      "diff_hunk" : "@@ -11,18 +11,7 @@ to addrman with).\n The seeds compiled into the release are created from sipa's DNS seed data, like this:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852228953",
      "id" : 852228953,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII584yy_tZ",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 11,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "contrib/seeds/README.md",
      "position" : 1,
      "pull_request_review_id" : 944563386,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852228953/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T16:13:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852228953",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852230081"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852230081"
         }
      },
      "author_association" : "MEMBER",
      "body" : "a few nitty suggestions here\r\n```diff\r\n-    print(f'Loading asmap database {args.asmap}... ', end='', file=sys.stderr, flush=True)\r\n+    print(f'Loading asmap database \"{args.asmap}\"... ', end='', file=sys.stderr, flush=True)\r\n     asmap = ASMap(args.asmap)\r\n-    print(f'Done.', file=sys.stderr)\r\n+    print('done.\\n', file=sys.stderr)\r\n```\r\n",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-18T16:15:12Z",
      "diff_hunk" : "@@ -201,7 +178,18 @@ def ip_stats(ips: List[Dict]) -> str:\n \n     return f\"{hist['ipv4']:6d} {hist['ipv6']:6d} {hist['onion']:6d}\"\n \n+def parse_args():\n+    argparser = argparse.ArgumentParser(description=f'Generates a list of bitcoin node seed ip addresses.')\n+    argparser.add_argument(\"-a\",\"--asmap\", help=f'The location of the asmap asn database file (required)', required=True)\n+    return argparser.parse_args()\n+\n def main():\n+    args = parse_args()\n+\n+    print(f'Loading asmap database {args.asmap}... ', end='', file=sys.stderr, flush=True)\n+    asmap = ASMap(args.asmap)\n+    print(f'Done.', file=sys.stderr)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852230081",
      "id" : 852230081,
      "line" : 191,
      "node_id" : "PRRC_kwDOABII584yy__B",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 191,
      "original_position" : 84,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : 84,
      "pull_request_review_id" : 944565002,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852230081/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T16:15:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852230081",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Tested that both -a and --asmap run, but if makeseeds no longer works without the added arg, can it be removed?\r\n\r\nI considered this, but I have a slight preference for explicit named instead of positional arguments that's why I kept the `-a`/`--asmap`.",
      "created_at" : "2022-04-18T16:20:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1101538996",
      "id" : 1101538996,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585BqCa0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1101538996/reactions"
      },
      "updated_at" : "2022-04-18T16:20:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1101538996",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852243122"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852243122"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nits\r\n```diff\r\n-    argparser = argparse.ArgumentParser(description=f'Generates a list of bitcoin node seed ip addresses.')\r\n-    argparser.add_argument(\"-a\",\"--asmap\", help=f'The location of the asmap asn database file (required)', required=True)\r\n+    argparser = argparse.ArgumentParser(description='Generates a list of bitcoin node seed ip addresses.')\r\n+    argparser.add_argument(\"-a\", \"--asmap\", help='the location of the asmap asn database file (required)', required=True)\r\n```\r\n\r\n```\r\n$  python3 makeseeds.py -h\r\nusage: makeseeds.py [-h] -a ASMAP\r\n\r\nGenerates a list of bitcoin node seed ip addresses.\r\n\r\noptional arguments:\r\n  -h, --help            show this help message and exit\r\n  -a ASMAP, --asmap ASMAP\r\n                        the location of the asmap asn database file (required)\r\n```",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-18T16:35:25Z",
      "diff_hunk" : "@@ -201,7 +178,18 @@ def ip_stats(ips: List[Dict]) -> str:\n \n     return f\"{hist['ipv4']:6d} {hist['ipv6']:6d} {hist['onion']:6d}\"\n \n+def parse_args():\n+    argparser = argparse.ArgumentParser(description=f'Generates a list of bitcoin node seed ip addresses.')\n+    argparser.add_argument(\"-a\",\"--asmap\", help=f'The location of the asmap asn database file (required)', required=True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852243122",
      "id" : 852243122,
      "line" : 183,
      "node_id" : "PRRC_kwDOABII584yzDKy",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 183,
      "original_position" : 76,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : 76,
      "pull_request_review_id" : 944583760,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852243122/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T16:35:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852243122",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r855449599"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855449599"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Which asmap are you using? It seems more likely to me that your asmap is wrong, or something is wrong with parsing, causing all IPs to be assigned to one AS, than that this change is at fault.",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-21T17:57:47Z",
      "diff_hunk" : "@@ -179,13 +155,14 @@ def filterbyasn(ips: List[Dict], max_per_asn: Dict, max_per_net: int) -> List[Di\n             # do not add this ip as we already too many\n             # ips from this network\n             continue\n-        asn = lookup_asn(ip['net'], ip['ip'])\n-        if asn is None or asn_count[asn] == max_per_asn[ip['net']]:\n+        asn = asmap.lookup_asn(ip['ip'])\n+        if asn is None or asn_count[ip['net'], asn] == max_per_asn[ip['net']]:\n             # do not add this ip as we already have too many\n             # ips from this ASN on this network\n             continue\n-        asn_count[asn] += 1\n+        asn_count[ip['net'], asn] += 1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r855449599",
      "id" : 855449599,
      "in_reply_to_id" : 852039164,
      "line" : 163,
      "node_id" : "PRRC_kwDOABII584y_R__",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 163,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : 64,
      "pull_request_review_id" : 949016743,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855449599/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-21T17:57:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855449599",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r855451609"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855451609"
         }
      },
      "author_association" : "MEMBER",
      "body" : "FWIW this is my map file:\r\n```\r\nsha256sum demo.map\r\n94b6142b574d468e73c71ed9fb411683d295c37b756f1f735013f736ee647330  demo.map\r\n```\r\nOutput:\r\n```\r\nLoading asmap database demo.map... Done.\r\n  IPv4   IPv6  Onion Pass\r\n470789  73296      0 Initial\r\n470789  73296      0 Skip entries with invalid address\r\n470789  73296      0 After removing duplicates\r\n  6318   1747      0 Enforce minimal number of blocks\r\n  5456   1504      0 Require service bit 1\r\n  3866    887      0 Require minimum uptime\r\n  3789    864      0 Require a known and recent user agent\r\n  3760    856      0 Filter out hosts with multiple bitcoin ports\r\n   512    301      0 Look up ASNs and limit results per ASN and per net\r\n```",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-21T18:00:24Z",
      "diff_hunk" : "@@ -179,13 +155,14 @@ def filterbyasn(ips: List[Dict], max_per_asn: Dict, max_per_net: int) -> List[Di\n             # do not add this ip as we already too many\n             # ips from this network\n             continue\n-        asn = lookup_asn(ip['net'], ip['ip'])\n-        if asn is None or asn_count[asn] == max_per_asn[ip['net']]:\n+        asn = asmap.lookup_asn(ip['ip'])\n+        if asn is None or asn_count[ip['net'], asn] == max_per_asn[ip['net']]:\n             # do not add this ip as we already have too many\n             # ips from this ASN on this network\n             continue\n-        asn_count[asn] += 1\n+        asn_count[ip['net'], asn] += 1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r855451609",
      "id" : 855451609,
      "in_reply_to_id" : 852039164,
      "line" : 163,
      "node_id" : "PRRC_kwDOABII584y_SfZ",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 163,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : 64,
      "pull_request_review_id" : 949019710,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855451609/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-21T18:00:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855451609",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've put more up-to-date and generic asmap files on https://bitcoin.sipa.be/asmap-unfilled.dat and https://bitcoin.sipa.be/asmap-filled.dat (the latter one has subnets with no actual ASN assigned to nearby ASNs to minimize the file size). The input data was sourced through https://github.com/rrybarczyk/asmap-rs, and compiled to asmap format by new code I'm working on at https://github.com/sipa/asmap/tree/nextgen. I hope that's in a presentable state in the next few days somewhere, but I'm put it online already to experiment with.",
      "created_at" : "2022-04-21T18:10:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1105569767",
      "id" : 1105569767,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585B5afn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 1,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1105569767/reactions"
      },
      "updated_at" : "2022-04-21T18:10:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1105569767",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r856843077"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856843077"
         }
      },
      "author_association" : "NONE",
      "body" : "I currently am having this same bug using the asmap from the readme.md included.\r\n`curl https://github.com/sipa/asmap/raw/master/demo.map > demo.map`\r\n\r\n```\r\nsha256sum demo.map\r\n72034b228f2b91d8c0864d27d5f8cbbad4b34f1b0948fd2bc9f1acf66aaf168c  demo.map\r\n```\r\n```\r\nLoading asmap database demo.map... Done.\r\n  IPv4   IPv6  Onion Pass\r\n470888  73307      0 Initial\r\n470888  73307      0 Skip entries with invalid address\r\n470888  73307      0 After removing duplicates\r\n470887  73307      0 Skip entries from suspicious hosts\r\n  6502   1787      0 Enforce minimal number of blocks\r\n  5610   1523      0 Require service bit 1\r\n  3862    896      0 Require minimum uptime\r\n  3777    869      0 Require a known and recent user agent\r\n  3753    861      0 Filter out hosts with multiple bitcoin ports\r\n     2     10      0 Look up ASNs and limit results per ASN and per net\r\n\r\nreal    0m11.036s\r\nuser    0m10.079s\r\nsys     0m0.907s\r\n```\r\n\r\nThe time to parse is insanely fast but the included file is only 2.5kb which to me seems incredibly small as an uncompressed asmap is nearly 27MB. ",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-23T04:51:29Z",
      "diff_hunk" : "@@ -179,13 +155,14 @@ def filterbyasn(ips: List[Dict], max_per_asn: Dict, max_per_net: int) -> List[Di\n             # do not add this ip as we already too many\n             # ips from this network\n             continue\n-        asn = lookup_asn(ip['net'], ip['ip'])\n-        if asn is None or asn_count[asn] == max_per_asn[ip['net']]:\n+        asn = asmap.lookup_asn(ip['ip'])\n+        if asn is None or asn_count[ip['net'], asn] == max_per_asn[ip['net']]:\n             # do not add this ip as we already have too many\n             # ips from this ASN on this network\n             continue\n-        asn_count[asn] += 1\n+        asn_count[ip['net'], asn] += 1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r856843077",
      "id" : 856843077,
      "in_reply_to_id" : 852039164,
      "line" : 163,
      "node_id" : "PRRC_kwDOABII584zEmNF",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 163,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : 64,
      "pull_request_review_id" : 950921425,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856843077/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-23T04:51:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856843077",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3104223?v=4",
         "events_url" : "https://api.github.com/users/russeree/events{/privacy}",
         "followers_url" : "https://api.github.com/users/russeree/followers",
         "following_url" : "https://api.github.com/users/russeree/following{/other_user}",
         "gists_url" : "https://api.github.com/users/russeree/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/russeree",
         "id" : 3104223,
         "login" : "russeree",
         "node_id" : "MDQ6VXNlcjMxMDQyMjM=",
         "organizations_url" : "https://api.github.com/users/russeree/orgs",
         "received_events_url" : "https://api.github.com/users/russeree/received_events",
         "repos_url" : "https://api.github.com/users/russeree/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/russeree/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/russeree/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/russeree"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r856844492"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856844492"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@russeree If you use curl, it'll just store \"You are being redirected to ...\" in the file.\n\nThat demo.dap file is also very old, and wasn't even intended back then to be complete. Try https://bitcoin.sipa.be/asmap-filled.dat.",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-23T05:09:44Z",
      "diff_hunk" : "@@ -179,13 +155,14 @@ def filterbyasn(ips: List[Dict], max_per_asn: Dict, max_per_net: int) -> List[Di\n             # do not add this ip as we already too many\n             # ips from this network\n             continue\n-        asn = lookup_asn(ip['net'], ip['ip'])\n-        if asn is None or asn_count[asn] == max_per_asn[ip['net']]:\n+        asn = asmap.lookup_asn(ip['ip'])\n+        if asn is None or asn_count[ip['net'], asn] == max_per_asn[ip['net']]:\n             # do not add this ip as we already have too many\n             # ips from this ASN on this network\n             continue\n-        asn_count[asn] += 1\n+        asn_count[ip['net'], asn] += 1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r856844492",
      "id" : 856844492,
      "in_reply_to_id" : 852039164,
      "line" : 163,
      "node_id" : "PRRC_kwDOABII584zEmjM",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 163,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : 64,
      "pull_request_review_id" : 950922605,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856844492/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-23T05:09:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856844492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r856845309"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856845309"
         }
      },
      "author_association" : "NONE",
      "body" : "```\r\ncat demo.map\r\n<html><body>You are being <a href=\"https://raw.githubusercontent.com/sipa/asmap/master/demo.map\">redirected</a>.</body></html>\r\n```\r\n\r\nwell then ... after using the correct file things looked much better.\r\n\r\n```\r\n`Loading asmap database demo.map... Done.\r\n  IPv4   IPv6  Onion Pass\r\n470888  73307      0 Initial\r\n470888  73307      0 Skip entries with invalid address\r\n470888  73307      0 After removing duplicates\r\n470887  73307      0 Skip entries from suspicious hosts\r\n  6502   1787      0 Enforce minimal number of blocks\r\n  5610   1523      0 Require service bit 1\r\n  3862    896      0 Require minimum uptime\r\n  3777    869      0 Require a known and recent user agent\r\n  3753    861      0 Filter out hosts with multiple bitcoin ports\r\n   512    291      0 Look up ASNs and limit results per ASN and per net\r\n\r\nreal    0m15.295s\r\nuser    0m14.423s\r\nsys     0m0.808s`\r\n\r\n```\r\nusing a broken file presents an interesting note to me. When using the broken file the script just used \"You are being redirected to ...\" as the ASN for ipv4 with a limit of 2. Then does ipv6 also use \"You are being redirected to ...\" for the 10 items per ASN? So the max allocated ips per ASN is actually 12 including ipv4 and ipv6? \r\n",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-23T05:20:53Z",
      "diff_hunk" : "@@ -179,13 +155,14 @@ def filterbyasn(ips: List[Dict], max_per_asn: Dict, max_per_net: int) -> List[Di\n             # do not add this ip as we already too many\n             # ips from this network\n             continue\n-        asn = lookup_asn(ip['net'], ip['ip'])\n-        if asn is None or asn_count[asn] == max_per_asn[ip['net']]:\n+        asn = asmap.lookup_asn(ip['ip'])\n+        if asn is None or asn_count[ip['net'], asn] == max_per_asn[ip['net']]:\n             # do not add this ip as we already have too many\n             # ips from this ASN on this network\n             continue\n-        asn_count[asn] += 1\n+        asn_count[ip['net'], asn] += 1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r856845309",
      "id" : 856845309,
      "in_reply_to_id" : 852039164,
      "line" : 163,
      "node_id" : "PRRC_kwDOABII584zEmv9",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 163,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : 64,
      "pull_request_review_id" : 950923239,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856845309/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-23T05:21:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856845309",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3104223?v=4",
         "events_url" : "https://api.github.com/users/russeree/events{/privacy}",
         "followers_url" : "https://api.github.com/users/russeree/followers",
         "following_url" : "https://api.github.com/users/russeree/following{/other_user}",
         "gists_url" : "https://api.github.com/users/russeree/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/russeree",
         "id" : 3104223,
         "login" : "russeree",
         "node_id" : "MDQ6VXNlcjMxMDQyMjM=",
         "organizations_url" : "https://api.github.com/users/russeree/orgs",
         "received_events_url" : "https://api.github.com/users/russeree/received_events",
         "repos_url" : "https://api.github.com/users/russeree/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/russeree/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/russeree/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/russeree"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r856869841"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856869841"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> So the max allocated ips per ASN is actually 12 including ipv4 and ipv6?\r\n\r\nYes. The maximum number of seeds per ASN is 12: 2 IPv4 and 10 IPv6.\r\n\r\nI\"ll update the doc, sorry for providing a curl line that doesn't work. I thought it worked for me!",
      "commit_id" : "4f331939706fddd210d910ed71a9368747a48dae",
      "created_at" : "2022-04-23T08:58:35Z",
      "diff_hunk" : "@@ -179,13 +155,14 @@ def filterbyasn(ips: List[Dict], max_per_asn: Dict, max_per_net: int) -> List[Di\n             # do not add this ip as we already too many\n             # ips from this network\n             continue\n-        asn = lookup_asn(ip['net'], ip['ip'])\n-        if asn is None or asn_count[asn] == max_per_asn[ip['net']]:\n+        asn = asmap.lookup_asn(ip['ip'])\n+        if asn is None or asn_count[ip['net'], asn] == max_per_asn[ip['net']]:\n             # do not add this ip as we already have too many\n             # ips from this ASN on this network\n             continue\n-        asn_count[asn] += 1\n+        asn_count[ip['net'], asn] += 1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r856869841",
      "id" : 856869841,
      "in_reply_to_id" : 852039164,
      "line" : 157,
      "node_id" : "PRRC_kwDOABII584zEsvR",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 157,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : 64,
      "pull_request_review_id" : 950946281,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856869841/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-23T09:00:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856869841",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Re-pushed:\r\n- Addressed @jonatack 's comments\r\n- Changed curl URL to @sipa's new \"asmap-filled.dat\" asmap database (sorry for providing link to a corrupted one)\r\n- Mention @jamesob as co-author",
      "created_at" : "2022-04-23T09:14:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1107439063",
      "id" : 1107439063,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585CAi3X",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1107439063/reactions"
      },
      "updated_at" : "2022-04-23T09:14:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1107439063",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r857511141"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857511141"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Which asmap are you using? It seems more likely to me that your asmap is wrong, or something is wrong with parsing, causing all IPs to be assigned to one AS, than that this change is at fault.\r\n\r\nGood call; fixed in the latest push.",
      "commit_id" : "4f331939706fddd210d910ed71a9368747a48dae",
      "created_at" : "2022-04-25T11:08:04Z",
      "diff_hunk" : "@@ -179,13 +155,14 @@ def filterbyasn(ips: List[Dict], max_per_asn: Dict, max_per_net: int) -> List[Di\n             # do not add this ip as we already too many\n             # ips from this network\n             continue\n-        asn = lookup_asn(ip['net'], ip['ip'])\n-        if asn is None or asn_count[asn] == max_per_asn[ip['net']]:\n+        asn = asmap.lookup_asn(ip['ip'])\n+        if asn is None or asn_count[ip['net'], asn] == max_per_asn[ip['net']]:\n             # do not add this ip as we already have too many\n             # ips from this ASN on this network\n             continue\n-        asn_count[asn] += 1\n+        asn_count[ip['net'], asn] += 1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r857511141",
      "id" : 857511141,
      "in_reply_to_id" : 852039164,
      "line" : 157,
      "node_id" : "PRRC_kwDOABII584zHJTl",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 157,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : 64,
      "pull_request_review_id" : 951694842,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857511141/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T11:08:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857511141",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r857512941"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857512941"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, maybe be explicit regarding the directory to run these commands from\r\n```suggestion\r\ndata. Run the following commands from the `/contrib/seeds` directory:\r\n```",
      "commit_id" : "4f331939706fddd210d910ed71a9368747a48dae",
      "created_at" : "2022-04-25T11:10:35Z",
      "diff_hunk" : "@@ -8,21 +8,11 @@ and remove old versions as necessary (at a minimum when GetDesirableServiceFlags\n changes its default return value, as those are the services which seeds are added\n to addrman with).\n \n-The seeds compiled into the release are created from sipa's DNS seed data, like this:\n+The seeds compiled into the release are created from sipa's DNS seed and AS map\n+data, like this:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r857512941",
      "id" : 857512941,
      "line" : 12,
      "node_id" : "PRRC_kwDOABII584zHJvt",
      "original_commit_id" : "4f331939706fddd210d910ed71a9368747a48dae",
      "original_line" : 12,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "contrib/seeds/README.md",
      "position" : 6,
      "pull_request_review_id" : 951696228,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857512941/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T11:18:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857512941",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r857514428"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857514428"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should this filename be made consistent (one way or the other and .gitignore too) with `DEFAULT_ASMAP_FILENAME`?\r\n```cpp\r\nsrc/init.cpp:129:static const char* DEFAULT_ASMAP_FILENAME=\"ip_asn.map\";\r\n```",
      "commit_id" : "4f331939706fddd210d910ed71a9368747a48dae",
      "created_at" : "2022-04-25T11:12:33Z",
      "diff_hunk" : "@@ -8,21 +8,11 @@ and remove old versions as necessary (at a minimum when GetDesirableServiceFlags\n changes its default return value, as those are the services which seeds are added\n to addrman with).\n \n-The seeds compiled into the release are created from sipa's DNS seed data, like this:\n+The seeds compiled into the release are created from sipa's DNS seed and AS map\n+data, like this:\n \n     curl https://bitcoin.sipa.be/seeds.txt.gz | gzip -dc > seeds_main.txt\n-    python3 makeseeds.py < seeds_main.txt > nodes_main.txt\n+    curl https://bitcoin.sipa.be/asmap-filled.dat > asmap-filled.dat",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r857514428",
      "id" : 857514428,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII584zHKG8",
      "original_commit_id" : "4f331939706fddd210d910ed71a9368747a48dae",
      "original_line" : 15,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "contrib/seeds/README.md",
      "position" : 10,
      "pull_request_review_id" : 951696228,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857514428/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T11:18:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857514428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r857928691"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857928691"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't know, I think that use of asmap is completely unrelated. Using the same name would make sure if we were to use the one from the user's bitcoin directory. But we want to use a specific, deterministic asmap here so everyone gets the same result.",
      "commit_id" : "4f331939706fddd210d910ed71a9368747a48dae",
      "created_at" : "2022-04-25T18:50:01Z",
      "diff_hunk" : "@@ -8,21 +8,11 @@ and remove old versions as necessary (at a minimum when GetDesirableServiceFlags\n changes its default return value, as those are the services which seeds are added\n to addrman with).\n \n-The seeds compiled into the release are created from sipa's DNS seed data, like this:\n+The seeds compiled into the release are created from sipa's DNS seed and AS map\n+data, like this:\n \n     curl https://bitcoin.sipa.be/seeds.txt.gz | gzip -dc > seeds_main.txt\n-    python3 makeseeds.py < seeds_main.txt > nodes_main.txt\n+    curl https://bitcoin.sipa.be/asmap-filled.dat > asmap-filled.dat",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r857928691",
      "id" : 857928691,
      "in_reply_to_id" : 857514428,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII584zIvPz",
      "original_commit_id" : "4f331939706fddd210d910ed71a9368747a48dae",
      "original_line" : 15,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "contrib/seeds/README.md",
      "position" : 10,
      "pull_request_review_id" : 952309801,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857928691/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T18:50:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857928691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r857928860"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857928860"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Makes sense.",
      "commit_id" : "4f331939706fddd210d910ed71a9368747a48dae",
      "created_at" : "2022-04-25T18:50:13Z",
      "diff_hunk" : "@@ -8,21 +8,11 @@ and remove old versions as necessary (at a minimum when GetDesirableServiceFlags\n changes its default return value, as those are the services which seeds are added\n to addrman with).\n \n-The seeds compiled into the release are created from sipa's DNS seed data, like this:\n+The seeds compiled into the release are created from sipa's DNS seed and AS map\n+data, like this:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r857928860",
      "id" : 857928860,
      "in_reply_to_id" : 857512941,
      "line" : 12,
      "node_id" : "PRRC_kwDOABII584zIvSc",
      "original_commit_id" : "4f331939706fddd210d910ed71a9368747a48dae",
      "original_line" : 12,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "contrib/seeds/README.md",
      "position" : 6,
      "pull_request_review_id" : 952310011,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857928860/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T18:50:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857928860",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Cherry-picked a commit from @jonatack with improvements.",
      "created_at" : "2022-04-26T10:55:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1109651105",
      "id" : 1109651105,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585CI-6h",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109651105/reactions"
      },
      "updated_at" : "2022-04-26T10:55:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109651105",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r858596543"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858596543"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point, agree.",
      "commit_id" : "7edacdc6952a4327b01dec34d664450f055a10d0",
      "created_at" : "2022-04-26T11:22:26Z",
      "diff_hunk" : "@@ -8,21 +8,11 @@ and remove old versions as necessary (at a minimum when GetDesirableServiceFlags\n changes its default return value, as those are the services which seeds are added\n to addrman with).\n \n-The seeds compiled into the release are created from sipa's DNS seed data, like this:\n+The seeds compiled into the release are created from sipa's DNS seed and AS map\n+data, like this:\n \n     curl https://bitcoin.sipa.be/seeds.txt.gz | gzip -dc > seeds_main.txt\n-    python3 makeseeds.py < seeds_main.txt > nodes_main.txt\n+    curl https://bitcoin.sipa.be/asmap-filled.dat > asmap-filled.dat",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r858596543",
      "id" : 858596543,
      "in_reply_to_id" : 857514428,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII584zLSS_",
      "original_commit_id" : "4f331939706fddd210d910ed71a9368747a48dae",
      "original_line" : 15,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "contrib/seeds/README.md",
      "position" : 10,
      "pull_request_review_id" : 953210174,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858596543/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-26T11:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858596543",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 3d7f68c11d6fac11892e42d24f8ba06709aa2b9f",
      "created_at" : "2022-04-26T11:23:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1109676017",
      "id" : 1109676017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585CJE_x",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109676017/reactions"
      },
      "updated_at" : "2022-04-26T11:23:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109676017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 7edacdc6952a4327b01dec34d664450f055a10d0",
      "created_at" : "2022-04-26T12:28:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1109735573",
      "id" : 1109735573,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585CJTiV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109735573/reactions"
      },
      "updated_at" : "2022-04-26T12:28:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109735573",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r878911058"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878911058"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Also, I'm currently rewriting the Python asmap code from scratch actually (to have a single class that can do creation of asmap files, decoding, lookup, diffing, have tests, ...), and it's close to being done.\r\n\r\n**/start slightly off-topic:**\r\n\r\nNice! Is the diffing for encoded mappings or just output from `asmap-rs`? Or would this even make `asmap-rs` obsolete? I'm in the process of making some improvements to UX there to show progress on RIPE data dump downloads and finding the ASN bottlenecks. I was also thinking of including a command there to compare non-encoded maps. I was going to use that to run some sort of monthly historical analysis over the past year to get an idea of how much the maps tend to change. Just don't want to duplicate effort.\r\n\r\nJust some of the things to help get asmaps distributed with releases and enabled by default. @sipa, just let me know if you want to continue this chat off GitHub or on some other issue. :)\r\n\r\n**/end slightly off-topic**",
      "commit_id" : "7edacdc6952a4327b01dec34d664450f055a10d0",
      "created_at" : "2022-05-22T18:50:56Z",
      "diff_hunk" : "@@ -0,0 +1,90 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2013-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+import ipaddress\n+\n+# Convert a byte array to a bit array\n+def DecodeBytes(byts):\n+    return [(byt >> i) & 1 for byt in byts for i in range(8)]\n+\n+def DecodeBits(stream, bitpos, minval, bit_sizes):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r878911058",
      "id" : 878911058,
      "in_reply_to_id" : 852043903,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII5840Yx5S",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "contrib/seeds/asmap.py",
      "position" : 11,
      "pull_request_review_id" : 981006350,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878911058/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-22T18:50:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878911058",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3072149?v=4",
         "events_url" : "https://api.github.com/users/dunxen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dunxen/followers",
         "following_url" : "https://api.github.com/users/dunxen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dunxen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dunxen",
         "id" : 3072149,
         "login" : "dunxen",
         "node_id" : "MDQ6VXNlcjMwNzIxNDk=",
         "organizations_url" : "https://api.github.com/users/dunxen/orgs",
         "received_events_url" : "https://api.github.com/users/dunxen/received_events",
         "repos_url" : "https://api.github.com/users/dunxen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dunxen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dunxen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dunxen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm kind of in doubt here, with the testing and review this has got, should we go ahead and merge this and leave updating to `asmap-nextgen` for a follow-up PR?",
      "created_at" : "2022-05-23T10:26:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1134496097",
      "id" : 1134496097,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585Dnwlh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1134496097/reactions"
      },
      "updated_at" : "2022-05-23T10:26:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1134496097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> should we go ahead and merge this and leave updating to `asmap-nextgen` for a follow-up PR?\n\nI think this is fair :)\nDefinitely adds a lot of value already.",
      "created_at" : "2022-05-23T15:32:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1134824547",
      "id" : 1134824547,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585DpAxj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1134824547/reactions"
      },
      "updated_at" : "2022-05-23T15:32:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1134824547",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3072149?v=4",
         "events_url" : "https://api.github.com/users/dunxen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dunxen/followers",
         "following_url" : "https://api.github.com/users/dunxen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dunxen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dunxen",
         "id" : 3072149,
         "login" : "dunxen",
         "node_id" : "MDQ6VXNlcjMwNzIxNDk=",
         "organizations_url" : "https://api.github.com/users/dunxen/orgs",
         "received_events_url" : "https://api.github.com/users/dunxen/received_events",
         "repos_url" : "https://api.github.com/users/dunxen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dunxen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dunxen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dunxen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The current module there in asmap.py has an ASMap class with tests, and a from_binary and lookup method, which should be sufficient for the purposes here. I don't think much is going to change there, and it's already much better at handling error conditions than the current code, so feel free to switch to that.\n\nI'm going to still clean things up more and have some cli tools using it, but the asmap module is pretty much done.",
      "created_at" : "2022-05-23T15:50:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1134846628",
      "id" : 1134846628,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585DpGKk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1134846628/reactions"
      },
      "updated_at" : "2022-05-23T15:50:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1134846628",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I'm going to still clean things up more and have some cli tools using it, but the asmap module is pretty much done.\r\n\r\nI've replaced `asmap.py` with the new one. I didn't find a way to look up an IP address directly so I did need to port over the `decode_ip` function. Please let me know if anything can be done more efficiently.\r\n\r\nResult is the same, but it's a bit slower (I think the bottleneck is in the loading phase):\r\n\r\nBefore:\r\n```\r\n$ time python3 makeseeds.py -a asmap-filled.dat < seeds_main.txt > /dev/null \r\nLoading asmap database \"asmap-filled.dat\"Done.\r\nLoading and parsing DNS seedsDone.\r\n  IPv4   IPv6  Onion Pass                                               \r\n470789  73296      0 Initial\r\n470789  73296      0 Skip entries with invalid address\r\n470789  73296      0 After removing duplicates\r\n  6318   1747      0 Enforce minimal number of blocks\r\n  5456   1504      0 Require service bit 1\r\n  3866    887      0 Require minimum uptime\r\n  3789    864      0 Require a known and recent user agent\r\n  3760    856      0 Filter out hosts with multiple bitcoin ports\r\n   512    295      0 Look up ASNs and limit results per ASN and per net\r\n\r\nreal    0m9.826s\r\nuser    0m9.349s\r\nsys     0m0.468s\r\n```\r\n\r\nAfter:\r\n```\r\nLoading asmap database \"asmap-filled.dat\"Done.\r\nLoading and parsing DNS seedsDone.\r\n  IPv4   IPv6  Onion Pass                                               \r\n470789  73296      0 Initial\r\n470789  73296      0 Skip entries with invalid address\r\n470789  73296      0 After removing duplicates\r\n  6318   1747      0 Enforce minimal number of blocks\r\n  5456   1504      0 Require service bit 1\r\n  3866    887      0 Require minimum uptime\r\n  3789    864      0 Require a known and recent user agent\r\n  3760    856      0 Filter out hosts with multiple bitcoin ports\r\n   512    295      0 Look up ASNs and limit results per ASN and per net\r\n\r\nreal    0m35.717s\r\nuser    0m35.050s\r\nsys     0m0.628s\r\n```",
      "created_at" : "2022-05-25T08:48:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1136970680",
      "id" : 1136970680,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585DxMu4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1136970680/reactions"
      },
      "updated_at" : "2022-05-25T08:48:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1136970680",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj Ah yes, there are only functions for converting between net ranges and prefixes, not addresses. I'll add functions for those too. I don't think that's holding up anything here though; I can PR an update when it's done.\n\nThe slowdown is indeed somewhat expected, as it's converting the whole map to a lookup tree format rather than interpreting the binary data directly, which is faster per lookup but slower to load. Is that a concern? I could add interpretation based logic too.",
      "created_at" : "2022-05-25T12:22:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1137172672",
      "id" : 1137172672,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585Dx-DA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137172672/reactions"
      },
      "updated_at" : "2022-05-25T12:22:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1137172672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Is that a concern? I could add interpretation based logic too.\r\n\r\nNo, not for me at least. It's not a script to be run often and ~30s still a lot better than when it had to DNS query for every address. I also think the error checking implied by parsing instead of interpretation is useful here. And maybe there's scope for optimization of the loading (if anyone does care).\r\n\r\nEdit: our linter did find a few problems, not sure you care about these as our coding style isn't necessarily the asmap one, but here goes:\r\n```\r\ncontrib/seeds/asmap.py:5:1: F407 future feature annotations is not defined\r\ncontrib/seeds/asmap.py:284:9: E306 expected 1 blank line before a nested definition, found 0\r\ncontrib/seeds/asmap.py:349:9: E306 expected 1 blank line before a nested definition, found 0\r\ncontrib/seeds/asmap.py:370:9: E306 expected 1 blank line before a nested definition, found 0\r\ncontrib/seeds/asmap.py:383:17: E125 continuation line with same indent as next logical line\r\ncontrib/seeds/asmap.py:471:13: E306 expected 1 blank line before a nested definition, found 0\r\ncontrib/seeds/asmap.py:532:9: E306 expected 1 blank line before a nested definition, found 0\r\ncontrib/seeds/asmap.py:638:9: E306 expected 1 blank line before a nested definition, found 0\r\n^---- failure generated from lint-python.py\r\n```",
      "created_at" : "2022-05-26T08:23:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1138290503",
      "id" : 1138290503,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585D2O9H",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1138290503/reactions"
      },
      "updated_at" : "2022-05-26T08:48:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1138290503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Between 17 and 20 seconds total `makeseeds.py` time for me, which seems fine. The slower parts are preceded by a \"Loading...\" message, so all good.",
      "created_at" : "2022-05-27T15:48:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1139740268",
      "id" : 1139740268,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585D7w5s",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139740268/reactions"
      },
      "updated_at" : "2022-05-27T15:48:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1139740268",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Re-pushed to fix linter errors (upstream in sipa/asmap#5).\r\n\r\nHowever there's still one left which I don't really know how to get rid of:\r\n```\r\ncontrib/seeds/asmap.py:5:1: F407 future feature annotations is not defined\r\n```\r\nI don't get this locally. It must have to do with Python version differences.\r\n\r\nEdit: trying to simply remove the `from __future__ import annotatinos` line.\r\n\r\nEdit.2: that gives me an error while running\r\n```\r\nTraceback (most recent call last):\r\n  File \"/bitcoin/contrib/seeds/makeseeds.py\", line 16, in <module>\r\n    from asmap import ASMap\r\n  File \"/bitcoin/contrib/seeds/asmap.py\", line 171, in <module>\r\n    class _BinNode:\r\n  File \"/bitcoin/contrib/seeds/asmap.py\", line 179, in _BinNode\r\n    def __init__(self, ins: _Instruction, arg1: _BinNode, arg2: _BinNode): ...\r\nNameError: name '_BinNode' is not defined\r\n```",
      "created_at" : "2022-05-30T16:31:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1141332479",
      "id" : 1141332479,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585EB1n_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1141332479/reactions"
      },
      "updated_at" : "2022-05-30T16:36:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1141332479",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "FWIW the asmap code runs significantly faster inside of `pypy3`.",
      "created_at" : "2022-05-30T16:39:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1141338008",
      "id" : 1141338008,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585EB2-Y",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1141338008/reactions"
      },
      "updated_at" : "2022-05-30T16:39:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1141338008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Was just wondering about this.  I'm not seeing the issue locally either with Python 3.10.4.",
      "created_at" : "2022-05-30T16:40:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1141338512",
      "id" : 1141338512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585EB3GQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1141338512/reactions"
      },
      "updated_at" : "2022-05-30T16:45:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1141338512",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I added a commit that disables the Python linter for `asmap.py`.\r\n```\r\n    test: Exclude asmap.py from Python linter checks\r\n    \r\n    asmap.py, a third-party dependency, is excluded from Python linter checks\r\n    because of `from __future__ import annotations` (PEP 563 postponed annotations)\r\n    this workaround can be removed when the Python version used is upgraded to 3.7+.\r\n```\r\nI decided to do this instead of removing the annotations because I think the postponed annotations are useful and we should use them as well (in the future, when the Python version allows for this).\r\n\r\nThis should hopefully make this pass the CI again.",
      "created_at" : "2022-05-31T10:00:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1141929023",
      "id" : 1141929023,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585EEHQ_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1141929023/reactions"
      },
      "updated_at" : "2022-05-31T12:29:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1141929023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r885682330"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885682330"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You can instead use `asmap.net_to_prefix(ipaddress.ip_network(ip))` for this whole function. Functionally that means the result will also accept netmasks (\"1.2.0.0/16\" e.g.). `asmap.lookup` will then return `None` if not the entire range maps to a single ASN. I don't believe this matters for the use case here.",
      "commit_id" : "1df513aaa93cc4a054f465732b71e553daa68a1a",
      "created_at" : "2022-05-31T14:03:15Z",
      "diff_hunk" : "@@ -123,34 +126,18 @@ def filtermultiport(ips: List[Dict]) -> List[Dict]:\n         hist[ip['sortkey']].append(ip)\n     return [value[0] for (key,value) in list(hist.items()) if len(value)==1]\n \n-def lookup_asn(net: str, ip: str) -> Union[int, None]:\n-    \"\"\" Look up the asn for an `ip` address by querying cymru.com\n-    on network `net` (e.g. ipv4 or ipv6).\n-\n-    Returns in integer ASN or None if it could not be found.\n-    \"\"\"\n-    try:\n-        if net == 'ipv4':\n-            ipaddr = ip\n-            prefix = '.origin'\n-        else:                  # http://www.team-cymru.com/IP-ASN-mapping.html\n-            res = str()                         # 2001:4860:b002:23::68\n-            for nb in ip.split(':')[:4]:  # pick the first 4 nibbles\n-                for c in nb.zfill(4):           # right padded with '0'\n-                    res += c + '.'              # 2001 4860 b002 0023\n-            ipaddr = res.rstrip('.')            # 2.0.0.1.4.8.6.0.b.0.0.2.0.0.2.3\n-            prefix = '.origin6'\n-\n-        asn = int([x.to_text() for x in dns.resolver.resolve('.'.join(\n-                   reversed(ipaddr.split('.'))) + prefix + '.asn.cymru.com',\n-                   'TXT').response.answer][0].split('\\\"')[1].split(' ')[0])\n-        return asn\n-    except Exception as e:\n-        sys.stderr.write(f'ERR: Could not resolve ASN for \"{ip}\": {e}\\n')\n-        return None\n+def decode_ip(ip: str) -> int:\n+    addr = ipaddress.ip_address(ip)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r885682330",
      "id" : 885682330,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840ynCa",
      "original_commit_id" : "10383422a801b44874f9ab451d1c9b7b6e6fe576",
      "original_line" : 130,
      "original_position" : 56,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : null,
      "pull_request_review_id" : 990514967,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885682330/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-31T14:10:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885682330",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r885703400"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885703400"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You may want to add a condition for `asn==0` here (0 is returned in case the IP has *no* corresponding ASN; None is returned if it's ambiguous - which is only possible for ranges, not individual IPs).",
      "commit_id" : "1df513aaa93cc4a054f465732b71e553daa68a1a",
      "created_at" : "2022-05-31T14:20:28Z",
      "diff_hunk" : "@@ -165,21 +152,18 @@ def filterbyasn(ips: List[Dict], max_per_asn: Dict, max_per_net: int) -> List[Di\n     asn_count: Dict[int, int] = collections.defaultdict(int)\n \n     for i, ip in enumerate(ips_ipv46):\n-        if i % 10 == 0:\n-            # give progress update\n-            print(f\"{i:6d}/{len(ips_ipv46)} [{100*i/len(ips_ipv46):04.1f}%]\\r\", file=sys.stderr, end='', flush=True)\n-\n         if net_count[ip['net']] == max_per_net:\n             # do not add this ip as we already too many\n             # ips from this network\n             continue\n-        asn = lookup_asn(ip['net'], ip['ip'])\n-        if asn is None or asn_count[asn] == max_per_asn[ip['net']]:\n+        asn = asmap.lookup(decode_ip(ip['ip']))\n+        if asn is None or asn_count[ip['net'], asn] == max_per_asn[ip['net']]:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r885703400",
      "id" : 885703400,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840ysLo",
      "original_commit_id" : "10383422a801b44874f9ab451d1c9b7b6e6fe576",
      "original_line" : 160,
      "original_position" : 86,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : null,
      "pull_request_review_id" : 990546467,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885703400/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-31T14:20:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885703400",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r885739534"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885739534"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks. I looked at the code briefly but wasn't under the impression `net_to_prefix` would accept individual addresses as well. Will try!",
      "commit_id" : "1df513aaa93cc4a054f465732b71e553daa68a1a",
      "created_at" : "2022-05-31T14:50:58Z",
      "diff_hunk" : "@@ -123,34 +126,18 @@ def filtermultiport(ips: List[Dict]) -> List[Dict]:\n         hist[ip['sortkey']].append(ip)\n     return [value[0] for (key,value) in list(hist.items()) if len(value)==1]\n \n-def lookup_asn(net: str, ip: str) -> Union[int, None]:\n-    \"\"\" Look up the asn for an `ip` address by querying cymru.com\n-    on network `net` (e.g. ipv4 or ipv6).\n-\n-    Returns in integer ASN or None if it could not be found.\n-    \"\"\"\n-    try:\n-        if net == 'ipv4':\n-            ipaddr = ip\n-            prefix = '.origin'\n-        else:                  # http://www.team-cymru.com/IP-ASN-mapping.html\n-            res = str()                         # 2001:4860:b002:23::68\n-            for nb in ip.split(':')[:4]:  # pick the first 4 nibbles\n-                for c in nb.zfill(4):           # right padded with '0'\n-                    res += c + '.'              # 2001 4860 b002 0023\n-            ipaddr = res.rstrip('.')            # 2.0.0.1.4.8.6.0.b.0.0.2.0.0.2.3\n-            prefix = '.origin6'\n-\n-        asn = int([x.to_text() for x in dns.resolver.resolve('.'.join(\n-                   reversed(ipaddr.split('.'))) + prefix + '.asn.cymru.com',\n-                   'TXT').response.answer][0].split('\\\"')[1].split(' ')[0])\n-        return asn\n-    except Exception as e:\n-        sys.stderr.write(f'ERR: Could not resolve ASN for \"{ip}\": {e}\\n')\n-        return None\n+def decode_ip(ip: str) -> int:\n+    addr = ipaddress.ip_address(ip)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r885739534",
      "id" : 885739534,
      "in_reply_to_id" : 885682330,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840y1AO",
      "original_commit_id" : "10383422a801b44874f9ab451d1c9b7b6e6fe576",
      "original_line" : 130,
      "original_position" : 56,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : null,
      "pull_request_review_id" : 990599012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885739534/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-31T14:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885739534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r885740281"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885740281"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Will do!",
      "commit_id" : "1df513aaa93cc4a054f465732b71e553daa68a1a",
      "created_at" : "2022-05-31T14:51:37Z",
      "diff_hunk" : "@@ -165,21 +152,18 @@ def filterbyasn(ips: List[Dict], max_per_asn: Dict, max_per_net: int) -> List[Di\n     asn_count: Dict[int, int] = collections.defaultdict(int)\n \n     for i, ip in enumerate(ips_ipv46):\n-        if i % 10 == 0:\n-            # give progress update\n-            print(f\"{i:6d}/{len(ips_ipv46)} [{100*i/len(ips_ipv46):04.1f}%]\\r\", file=sys.stderr, end='', flush=True)\n-\n         if net_count[ip['net']] == max_per_net:\n             # do not add this ip as we already too many\n             # ips from this network\n             continue\n-        asn = lookup_asn(ip['net'], ip['ip'])\n-        if asn is None or asn_count[asn] == max_per_asn[ip['net']]:\n+        asn = asmap.lookup(decode_ip(ip['ip']))\n+        if asn is None or asn_count[ip['net'], asn] == max_per_asn[ip['net']]:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r885740281",
      "id" : 885740281,
      "in_reply_to_id" : 885703400,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840y1L5",
      "original_commit_id" : "10383422a801b44874f9ab451d1c9b7b6e6fe576",
      "original_line" : 160,
      "original_position" : 86,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : null,
      "pull_request_review_id" : 990600090,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885740281/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-31T14:51:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885740281",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r885782754"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885782754"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@dunxen Yeah, possibly. At this point the new asmap python code can do everything asmap-rs can and more (encode, decode, diff, bottleneck, ...), but there is some more work around making it nicer to use, and of course questions around review and integration into processes.",
      "commit_id" : "1df513aaa93cc4a054f465732b71e553daa68a1a",
      "created_at" : "2022-05-31T15:24:20Z",
      "diff_hunk" : "@@ -0,0 +1,90 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2013-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+import ipaddress\n+\n+# Convert a byte array to a bit array\n+def DecodeBytes(byts):\n+    return [(byt >> i) & 1 for byt in byts for i in range(8)]\n+\n+def DecodeBits(stream, bitpos, minval, bit_sizes):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r885782754",
      "id" : 885782754,
      "in_reply_to_id" : 852043903,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840y_ji",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "contrib/seeds/asmap.py",
      "position" : null,
      "pull_request_review_id" : 990664734,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885782754/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-31T15:24:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885782754",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Re-pushed, updated for @sipa's suggestions.",
      "created_at" : "2022-05-31T15:34:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1142293961",
      "id" : 1142293961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585EFgXJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142293961/reactions"
      },
      "updated_at" : "2022-05-31T15:34:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142293961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, will review soon.",
      "created_at" : "2022-05-31T15:38:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1142298281",
      "id" : 1142298281,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585EFhap",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142298281/reactions"
      },
      "updated_at" : "2022-05-31T15:38:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142298281",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   }
]
