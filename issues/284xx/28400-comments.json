[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28400).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [petertodd](https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1735100808) |\n| Concept ACK | [RandyMcMillan](https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1856492483), [dzyphr](https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1913753758) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28728](https://github.com/bitcoin/bitcoin/pull/28728) (wallet: [bugfix] Mark CNoDestination and PubKeyDestination constructor explicit by maflcko)\n* [#28690](https://github.com/bitcoin/bitcoin/pull/28690) (build: Introduce internal kernel library by TheCharlatan)\n* [#28550](https://github.com/bitcoin/bitcoin/pull/28550) (Covenant tools softfork by jamesob)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-09-04T08:04:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1704801655",
      "id" : 1704801655,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585lnTV3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1704801655/reactions"
      },
      "updated_at" : "2024-01-28T23:16:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1704801655",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Changing the `IsUnspendable` logic in general seems very brittle, as it obviously leads to nodes with diverging UTXO sets. Even if _all_ nodes would run this patch, they'd start to run it at different block heights (if between blocks M and N an UTXO enters the set that classifies for pruning, you'd already diverge), and you'd only end up with the same fully pruned UTXO set if all of them also did a `-reindex` once.\r\n\r\nWhen the pruning of OP_RETURN outputs was implemented over 10 years ago (see https://github.com/bitcoin/bitcoin/pull/2791) this was seemingly less of a problem, but now that many projects depend on a normalized view of the UTXO set (muhash, assumeutxo, utreexo etc.), I think that would lead to much unwanted chaos.\r\n\r\nHappy to hear other inputs how this could be solved, maybe I'm missing something.",
      "created_at" : "2023-09-04T10:46:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1705040932",
      "id" : 1705040932,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585loNwk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705040932/reactions"
      },
      "updated_at" : "2023-09-04T10:46:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705040932",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314856043"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314856043"
         }
      },
      "author_association" : "NONE",
      "body" : "did you find anything interesting when you added this check?",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-04T11:59:53Z",
      "diff_hunk" : "@@ -258,6 +324,44 @@ bool CScript::IsPushOnly() const\n     return this->IsPushOnly(begin());\n }\n \n+\n+bool CScript::IsUnspendable() const\n+{\n+    if (size() > MAX_SCRIPT_SIZE) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314856043",
      "id" : 1314856043,
      "line" : 330,
      "node_id" : "PRRC_kwDOABII585OXxxr",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 330,
      "original_position" : 87,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 87,
      "pull_request_review_id" : 1609404682,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314856043/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-04T11:59:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314856043",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/115941166?v=4",
         "events_url" : "https://api.github.com/users/rot13maxi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rot13maxi/followers",
         "following_url" : "https://api.github.com/users/rot13maxi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rot13maxi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rot13maxi",
         "id" : 115941166,
         "login" : "rot13maxi",
         "node_id" : "U_kgDOBukfLg",
         "organizations_url" : "https://api.github.com/users/rot13maxi/orgs",
         "received_events_url" : "https://api.github.com/users/rot13maxi/received_events",
         "repos_url" : "https://api.github.com/users/rot13maxi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rot13maxi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rot13maxi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rot13maxi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314863864"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314863864"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No as it was previously defined here.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/6f03c45f6bb5a6edaa3051968b6a1ca4f84d2ccb/src/script/script.h#L551-L554\r\n\r\nThe reason I placed it at the top of the if else stack was to avoid doing work on a script that already is invalid due to length. _If the script is too long just mark as unspendable and avoid any extra checking_",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-04T12:08:10Z",
      "diff_hunk" : "@@ -258,6 +324,44 @@ bool CScript::IsPushOnly() const\n     return this->IsPushOnly(begin());\n }\n \n+\n+bool CScript::IsUnspendable() const\n+{\n+    if (size() > MAX_SCRIPT_SIZE) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314863864",
      "id" : 1314863864,
      "in_reply_to_id" : 1314856043,
      "line" : 330,
      "node_id" : "PRRC_kwDOABII585OXzr4",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 330,
      "original_position" : 87,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 87,
      "pull_request_review_id" : 1609417395,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314863864/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-04T12:08:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314863864",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3104223?v=4",
         "events_url" : "https://api.github.com/users/russeree/events{/privacy}",
         "followers_url" : "https://api.github.com/users/russeree/followers",
         "following_url" : "https://api.github.com/users/russeree/following{/other_user}",
         "gists_url" : "https://api.github.com/users/russeree/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/russeree",
         "id" : 3104223,
         "login" : "russeree",
         "node_id" : "MDQ6VXNlcjMxMDQyMjM=",
         "organizations_url" : "https://api.github.com/users/russeree/orgs",
         "received_events_url" : "https://api.github.com/users/russeree/received_events",
         "repos_url" : "https://api.github.com/users/russeree/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/russeree/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/russeree/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/russeree"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Changing the `IsUnspendable` logic in general seems very brittle, as it obviously leads to nodes with diverging UTXO sets. \r\n> \r\n> now that many projects depend on a normalized view of the UTXO set (muhash, assumeutxo, utreexo etc.), I think that would lead to much unwanted chaos.\r\n\r\nI think muhash provides a pretty straightforward way of dealing with this. Namely: rather than only maintaining a single muhash for the utxo set you have, also maintain one for the outputs you've pruned as unspendable (or multiple indexes if you introduce more over time). Then you might have:\r\n\r\n * at block height 810,000\r\n * the spendable utxo set has muhash X\r\n * the OP_RETURN utxos have muhash Y\r\n * the bad pubkey utxos have muhash Z\r\n\r\nif you compare with a node running current master, you then verify that your `X+Z` matches their `X`.\r\n\r\nIt's easy to initialize these values on upgrade: Z=0, then iterate through your utxo set looking for bad pubkeys, adding them to Z as you find them, and removing them from the utxo set. Downgrading breaks things though.\r\n\r\nI don't think you can bootstrap utreexo from just the utxo set at an arbitrary height in the first place, so I don't think its really affected by this. For assumeutxo, if you want to be able to distribute the utxo set snapshots over p2p, then peers that have pruned unspendable utxos won't have them to share with peers that don't realise they're unspendable in the first place, but if you're just producing signed snapshots, then you could probably just publish two versions until the old software goes out of its support window.",
      "created_at" : "2023-09-04T12:29:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1705186294",
      "id" : 1705186294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585loxP2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705186294/reactions"
      },
      "updated_at" : "2023-09-04T12:29:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705186294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314893129"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314893129"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`if (back() != OP_CHECKSIG && back() != OP_CHECKSIGVERIFY)` ?",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-04T12:37:17Z",
      "diff_hunk" : "@@ -201,6 +202,71 @@ unsigned int CScript::GetSigOpCount(const CScript& scriptSig) const\n     return subscript.GetSigOpCount(true);\n }\n \n+bool CScript::IsPayToPublicKey() const\n+{\n+    // Valid sizes for OP_PUSHBYTES based P2PK scripts\n+    const unsigned int size = this->size();\n+    if (size < 2 || size > 77) {\n+        return false;\n+    }\n+\n+    // Last byte is equal to OP_CHECKSIG / OP_CHECKSIGVERIFY\n+    const unsigned char last_byte = *(this->end() - 1);\n+    if (!(last_byte != OP_CHECKSIG ^ last_byte != OP_CHECKSIGVERIFY)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314893129",
      "id" : 1314893129,
      "line" : 215,
      "node_id" : "PRRC_kwDOABII585OX61J",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 215,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 22,
      "pull_request_review_id" : 1609463879,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314893129/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-04T22:59:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314893129",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314897080"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314897080"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You've already checked size is between 2 and 77, so if `first_byte + 2 == size`, `first_byte` is between 0 and 75, so the check for `OP_PUSHDATA1` is redundant (and the check for `OP_0` could be subsumed if you checked `size < 3`).\r\n\r\nAlso, `first_byte == front()`.",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-04T12:41:03Z",
      "diff_hunk" : "@@ -201,6 +202,71 @@ unsigned int CScript::GetSigOpCount(const CScript& scriptSig) const\n     return subscript.GetSigOpCount(true);\n }\n \n+bool CScript::IsPayToPublicKey() const\n+{\n+    // Valid sizes for OP_PUSHBYTES based P2PK scripts\n+    const unsigned int size = this->size();\n+    if (size < 2 || size > 77) {\n+        return false;\n+    }\n+\n+    // Last byte is equal to OP_CHECKSIG / OP_CHECKSIGVERIFY\n+    const unsigned char last_byte = *(this->end() - 1);\n+    if (!(last_byte != OP_CHECKSIG ^ last_byte != OP_CHECKSIGVERIFY)) {\n+        return false;\n+    }\n+\n+    // First byte must be a OP_PUSHBYTES\n+    const unsigned char first_byte = *(this->begin());\n+    if (first_byte == OP_0 || first_byte >= OP_PUSHDATA1) {\n+        return false;\n+    }\n+\n+    // The script contains 2 ops and is equal to the script length\n+    if (first_byte + 2 == size){",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314897080",
      "id" : 1314897080,
      "line" : 226,
      "node_id" : "PRRC_kwDOABII585OX7y4",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 226,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 33,
      "pull_request_review_id" : 1609463879,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314897080/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-04T22:59:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314897080",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314902966"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314902966"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should just be a span",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-04T12:46:48Z",
      "diff_hunk" : "@@ -258,6 +324,44 @@ bool CScript::IsPushOnly() const\n     return this->IsPushOnly(begin());\n }\n \n+\n+bool CScript::IsUnspendable() const\n+{\n+    if (size() > MAX_SCRIPT_SIZE) {\n+        return true;\n+    } else if (this->IsPayToPublicKey()) {\n+        std::vector<unsigned char> pubkey(this->begin() + 1, this->end() - 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314902966",
      "id" : 1314902966,
      "line" : 333,
      "node_id" : "PRRC_kwDOABII585OX9O2",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 333,
      "original_position" : 90,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 90,
      "pull_request_review_id" : 1609463879,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314902966/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-04T22:59:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314902966",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ajtowns: Neat idea with the additional MuHash! I agree this should work, but obviously at the cost of increased complexity (as there is much more to change than only the logic of a single method), and there should be a really good reason for doing it.\r\n\r\n> It's easy to initialize these values on upgrade: Z=0, then iterate through your utxo set looking for bad pubkeys, adding them to Z as you find them, and removing them from the utxo set. Downgrading breaks things though.\r\n\r\nRight, and you'd also need to somehow detect if an upgrade has already happened. In #2791 it was proposed to either scan for a particular output in the UTXO set (https://github.com/bitcoin/bitcoin/pull/2791#issuecomment-21256241) or to introduce a flag in the chainstate database (https://github.com/bitcoin/bitcoin/pull/2791#issuecomment-21292138).\r\n\r\n@russeree: Can you give some additional motivation? While I enjoy very much reasoning about these kind of topics, it's still unclear to me what concrete problem this PR is trying to solve. The description claims that about 20k of outputs could be pruned. As of now (block 806205), that's merely 0.016% of the total UTXO set size, freeing up about 1,24 MB of chainstate space (if we assume an average size of 65 bytes per UTXO). I'd argue that these numbers are way too low (even if you 10x them for the sake of projecting into the future) to justify the increased complexity in different areas that would need to be touched (i.e. differentiating between different `IsUnspendable` reasons and update all call-sites correctly, maintaining an extra MuHash, implementing an UTXO set upgrade mechanism, probably adapting `gettxoutsetinfo` RPC results to include both \"new-pruned-MuHash\" and \"old-unpruned-MuHash\", dealing with different `dumptxoutset`/`loadtxoutset` result/behaviour on old vs new nodes for AssumeUTXO etc. etc.).\r\n\r\nAlso, calling `IsFullyValid` is significantly more expensive than just doing the usual Solver matching and length checks, so one would also need to analyze if this has a noticable negative performance impact on standardness checks.\r\n",
      "created_at" : "2023-09-04T15:27:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1705447458",
      "id" : 1705447458,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585lpxAi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705447458/reactions"
      },
      "updated_at" : "2023-09-04T15:27:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705447458",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315223848"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315223848"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Seems like it would be better to have `this->IsInvalidMultisig()` and move this code all into one place? Something like:\r\n\r\n```c++\r\nif (size() < 3) return false;\r\nif (back() != OP_CHECKMULTISIG && back() != OP_CHECKMULTISIGVERIFY) return false;\r\nint n;\r\nif (!IsOpN(*(end() - 2), n ) return false;\r\nint m;\r\nif (!IsOpN(front(), m) return false;\r\nstd::vector<Span<unsigned char>> keys;\r\nkeys.resize(n);\r\n// parse into keys, finish checking it's well-formed\r\nif (m > n) return true;\r\nint good = 0;\r\nint max_good = n;\r\nfor (k : keys) {\r\n    if (CPubKey(k).IsFullyValid()) {\r\n        ++good;\r\n    } else {\r\n        --max_good;\r\n    }\r\n    if (good >= m) return false;\r\n    if (max_good < m) return true;\r\n}\r\nreturn false; // unreachable\r\n\r\n",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-04T22:58:34Z",
      "diff_hunk" : "@@ -258,6 +324,44 @@ bool CScript::IsPushOnly() const\n     return this->IsPushOnly(begin());\n }\n \n+\n+bool CScript::IsUnspendable() const\n+{\n+    if (size() > MAX_SCRIPT_SIZE) {\n+        return true;\n+    } else if (this->IsPayToPublicKey()) {\n+        std::vector<unsigned char> pubkey(this->begin() + 1, this->end() - 1);\n+        if(!CPubKey(pubkey).IsFullyValid()){\n+            return true;\n+        }\n+    } else if (this->IsPayToMultisig()) {\n+        CScript::const_iterator pc = this->begin() + 1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315223848",
      "id" : 1315223848,
      "line" : 338,
      "node_id" : "PRRC_kwDOABII585OZLko",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 338,
      "original_position" : 95,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 95,
      "pull_request_review_id" : 1609463879,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315223848/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-04T22:59:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315223848",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "https://foundation.blacksintechnology.net/my-account/\r\n\r\nOn Mon, Sep 4, 2023, 4:02 PM Anthony Towns ***@***.***> wrote:\r\n\r\n> ***@***.**** commented on this pull request.\r\n> ------------------------------\r\n>\r\n> In src/script/script.cpp\r\n> <https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314893129>:\r\n>\r\n> > @@ -201,6 +202,71 @@ unsigned int CScript::GetSigOpCount(const CScript& scriptSig) const\r\n>      return subscript.GetSigOpCount(true);\r\n>  }\r\n>\r\n> +bool CScript::IsPayToPublicKey() const\r\n> +{\r\n> +    // Valid sizes for OP_PUSHBYTES based P2PK scripts\r\n> +    const unsigned int size = this->size();\r\n> +    if (size < 2 || size > 77) {\r\n> +        return false;\r\n> +    }\r\n> +\r\n> +    // Last byte is equal to OP_CHECKSIG / OP_CHECKSIGVERIFY\r\n> +    const unsigned char last_byte = *(this->end() - 1);\r\n> +    if (!(last_byte != OP_CHECKSIG ^ last_byte != OP_CHECKSIGVERIFY)) {\r\n>\r\n> if (back() != OP_CHECKSIG && back() != OP_CHECKSIGVERIFY) ?\r\n> ------------------------------\r\n>\r\n> In src/script/script.cpp\r\n> <https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314897080>:\r\n>\r\n> > +    }\r\n> +\r\n> +    // Last byte is equal to OP_CHECKSIG / OP_CHECKSIGVERIFY\r\n> +    const unsigned char last_byte = *(this->end() - 1);\r\n> +    if (!(last_byte != OP_CHECKSIG ^ last_byte != OP_CHECKSIGVERIFY)) {\r\n> +        return false;\r\n> +    }\r\n> +\r\n> +    // First byte must be a OP_PUSHBYTES\r\n> +    const unsigned char first_byte = *(this->begin());\r\n> +    if (first_byte == OP_0 || first_byte >= OP_PUSHDATA1) {\r\n> +        return false;\r\n> +    }\r\n> +\r\n> +    // The script contains 2 ops and is equal to the script length\r\n> +    if (first_byte + 2 == size){\r\n>\r\n> You've already checked size is between 2 and 77, so if first_byte + 2 ==\r\n> size, first_byte is between 0 and 75, so the check for OP_PUSHDATA1 is\r\n> redundant (and the check for OP_0 could be subsumed if you checked size <\r\n> 3).\r\n>\r\n> Also, first_byte == front().\r\n> ------------------------------\r\n>\r\n> In src/script/script.cpp\r\n> <https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314902966>:\r\n>\r\n> > @@ -258,6 +324,44 @@ bool CScript::IsPushOnly() const\r\n>      return this->IsPushOnly(begin());\r\n>  }\r\n>\r\n> +\r\n> +bool CScript::IsUnspendable() const\r\n> +{\r\n> +    if (size() > MAX_SCRIPT_SIZE) {\r\n> +        return true;\r\n> +    } else if (this->IsPayToPublicKey()) {\r\n> +        std::vector<unsigned char> pubkey(this->begin() + 1, this->end() - 1);\r\n>\r\n> Should just be a span\r\n> ------------------------------\r\n>\r\n> In src/script/script.cpp\r\n> <https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315223848>:\r\n>\r\n> > @@ -258,6 +324,44 @@ bool CScript::IsPushOnly() const\r\n>      return this->IsPushOnly(begin());\r\n>  }\r\n>\r\n> +\r\n> +bool CScript::IsUnspendable() const\r\n> +{\r\n> +    if (size() > MAX_SCRIPT_SIZE) {\r\n> +        return true;\r\n> +    } else if (this->IsPayToPublicKey()) {\r\n> +        std::vector<unsigned char> pubkey(this->begin() + 1, this->end() - 1);\r\n> +        if(!CPubKey(pubkey).IsFullyValid()){\r\n> +            return true;\r\n> +        }\r\n> +    } else if (this->IsPayToMultisig()) {\r\n> +        CScript::const_iterator pc = this->begin() + 1;\r\n>\r\n> Seems like it would be better to have this->IsInvalidMultisig() and move\r\n> this code all into one place? Something like:\r\n>\r\n> if (size() < 3) return false;if (back() != OP_CHECKMULTISIG && back() != OP_CHECKMULTISIGVERIFY) return false;int n;if (!IsOpN(*(end() - 2), n ) return false;int m;if (!IsOpN(front(), m) return false;\r\n> std::vector<Span<unsigned char>> keys;\r\n> keys.resize(n);// parse into keys, finish checking it's well-formedif (m > n) return true;int good = 0;int max_good = n;for (k : keys) {\r\n>     if (CPubKey(k).IsFullyValid()) {\r\n>         ++good;\r\n>     } else {\r\n>         --max_good;\r\n>     }\r\n>     if (good >= m) return false;\r\n>     if (max_good < m) return true;\r\n> }return false; // unreachable\r\n>\r\n> â\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/bitcoin/bitcoin/pull/28400#pullrequestreview-1609463879>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AVQO3WBSCHPN2TS6TSVOK7TXYZMZTANCNFSM6AAAAAA4KASCXU>\r\n> .\r\n> You are receiving this because you are subscribed to this thread.Message\r\n> ID: ***@***.***>\r\n>\r\n",
      "created_at" : "2023-09-04T23:03:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1705754509",
      "id" : 1705754509,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585lq7-N",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705754509/reactions"
      },
      "updated_at" : "2023-09-04T23:03:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705754509",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/90238424?v=4",
         "events_url" : "https://api.github.com/users/drcalebpayne/events{/privacy}",
         "followers_url" : "https://api.github.com/users/drcalebpayne/followers",
         "following_url" : "https://api.github.com/users/drcalebpayne/following{/other_user}",
         "gists_url" : "https://api.github.com/users/drcalebpayne/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/drcalebpayne",
         "id" : 90238424,
         "login" : "drcalebpayne",
         "node_id" : "MDQ6VXNlcjkwMjM4NDI0",
         "organizations_url" : "https://api.github.com/users/drcalebpayne/orgs",
         "received_events_url" : "https://api.github.com/users/drcalebpayne/received_events",
         "repos_url" : "https://api.github.com/users/drcalebpayne/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/drcalebpayne/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/drcalebpayne/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/drcalebpayne"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315845318"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315845318"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It might be simpler to follow the style of the existing script template checks like ['IsPayToScriptHash'](https://github.com/bitcoin/bitcoin/blob/5892815cedef828a34e5efb1c9f32e3877eadd8c/src/script/script.cpp#L270). You can also use the [existing constants ](https://github.com/bitcoin/bitcoin/blob/ecab855838fa4de4c6d8c11e69037477d6047790/src/pubkey.h#L39) to check against the compressed and uncompressed sizes",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-05T12:45:38Z",
      "diff_hunk" : "@@ -201,6 +202,71 @@ unsigned int CScript::GetSigOpCount(const CScript& scriptSig) const\n     return subscript.GetSigOpCount(true);\n }\n \n+bool CScript::IsPayToPublicKey() const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315845318",
      "id" : 1315845318,
      "line" : 205,
      "node_id" : "PRRC_kwDOABII585ObjTG",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 205,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 12,
      "pull_request_review_id" : 1610971623,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315845318/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-05T12:45:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315845318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4742100?v=4",
         "events_url" : "https://api.github.com/users/Randy808/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Randy808/followers",
         "following_url" : "https://api.github.com/users/Randy808/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Randy808/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Randy808",
         "id" : 4742100,
         "login" : "Randy808",
         "node_id" : "MDQ6VXNlcjQ3NDIxMDA=",
         "organizations_url" : "https://api.github.com/users/Randy808/orgs",
         "received_events_url" : "https://api.github.com/users/Randy808/received_events",
         "repos_url" : "https://api.github.com/users/Randy808/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Randy808/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Randy808/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Randy808"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315857395"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315857395"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think you meant:\r\n`return op_code == OP_0 || (OP_1 <= op_code && op_code <= OP_16);`",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-05T12:55:23Z",
      "diff_hunk" : "@@ -343,6 +447,40 @@ bool IsOpSuccess(const opcodetype& opcode)\n            (opcode >= 187 && opcode <= 254);\n }\n \n+bool IsOpN(unsigned char op_code){\n+    return OP_0 || (OP_1 <= op_code && op_code <= OP_16);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315857395",
      "id" : 1315857395,
      "line" : 451,
      "node_id" : "PRRC_kwDOABII585ObmPz",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 451,
      "original_position" : 130,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 130,
      "pull_request_review_id" : 1610990715,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315857395/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-05T12:56:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315857395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4742100?v=4",
         "events_url" : "https://api.github.com/users/Randy808/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Randy808/followers",
         "following_url" : "https://api.github.com/users/Randy808/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Randy808/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Randy808",
         "id" : 4742100,
         "login" : "Randy808",
         "node_id" : "MDQ6VXNlcjQ3NDIxMDA=",
         "organizations_url" : "https://api.github.com/users/Randy808/orgs",
         "received_events_url" : "https://api.github.com/users/Randy808/received_events",
         "repos_url" : "https://api.github.com/users/Randy808/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Randy808/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Randy808/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Randy808"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315862135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315862135"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Might be more concise if you used the above function in this one:\r\n\r\n```\r\n bool IsOpN(unsigned char op_code, unsigned char &value) {\r\n   if (IsOpN(op_code)) {\r\n     if (op_code == OP_0) {\r\n       value = 0;\r\n     } else {\r\n       value = op_code - 0x50;\r\n     }\r\n     return true;\r\n   }\r\n   return false;\r\n }\r\n```",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-05T12:59:09Z",
      "diff_hunk" : "@@ -343,6 +447,40 @@ bool IsOpSuccess(const opcodetype& opcode)\n            (opcode >= 187 && opcode <= 254);\n }\n \n+bool IsOpN(unsigned char op_code){\n+    return OP_0 || (OP_1 <= op_code && op_code <= OP_16);\n+}\n+\n+bool IsOpN(unsigned char op_code, unsigned char& value){",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315862135",
      "id" : 1315862135,
      "line" : 454,
      "node_id" : "PRRC_kwDOABII585ObnZ3",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 454,
      "original_position" : 133,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 133,
      "pull_request_review_id" : 1610998445,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315862135/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-05T12:59:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315862135",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4742100?v=4",
         "events_url" : "https://api.github.com/users/Randy808/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Randy808/followers",
         "following_url" : "https://api.github.com/users/Randy808/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Randy808/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Randy808",
         "id" : 4742100,
         "login" : "Randy808",
         "node_id" : "MDQ6VXNlcjQ3NDIxMDA=",
         "organizations_url" : "https://api.github.com/users/Randy808/orgs",
         "received_events_url" : "https://api.github.com/users/Randy808/received_events",
         "repos_url" : "https://api.github.com/users/Randy808/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Randy808/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Randy808/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Randy808"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Sorry for the lack of work on this PR last week, was at TABConf working on #27260 . Work has resumed and I will update this thread with changes over the next few days.",
      "created_at" : "2023-09-11T01:48:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1713037151",
      "id" : 1713037151,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585mGt9f",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1713037151/reactions"
      },
      "updated_at" : "2023-09-11T01:48:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1713037151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3104223?v=4",
         "events_url" : "https://api.github.com/users/russeree/events{/privacy}",
         "followers_url" : "https://api.github.com/users/russeree/followers",
         "following_url" : "https://api.github.com/users/russeree/following{/other_user}",
         "gists_url" : "https://api.github.com/users/russeree/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/russeree",
         "id" : 3104223,
         "login" : "russeree",
         "node_id" : "MDQ6VXNlcjMxMDQyMjM=",
         "organizations_url" : "https://api.github.com/users/russeree/orgs",
         "received_events_url" : "https://api.github.com/users/russeree/received_events",
         "repos_url" : "https://api.github.com/users/russeree/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/russeree/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/russeree/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/russeree"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> This trims nearly 20K outpoints from the UTXO set at height 805618.\r\n\r\nConcept NACK.\r\n\r\nAt the moment the UTXO set has 130 million entries. Reducing it by 0.015% isn't worth the technical risk.\r\n\r\nBy comparison, there have been 53 million OP_Return outputs. Removing those from the UTXO set was a not-so-trivial ~30% reduction.",
      "created_at" : "2023-09-26T08:47:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1735100808",
      "id" : 1735100808,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585na4mI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1735100808/reactions"
      },
      "updated_at" : "2023-09-26T08:47:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1735100808",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "node_id" : "MDQ6VXNlcjcwNDI=",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-10-26T16:42:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1781478078",
      "id" : 1781478078,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585qLzK-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1781478078/reactions"
      },
      "updated_at" : "2023-10-26T16:42:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1781478078",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2023-12-14T19:55:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1856492483",
      "id" : 1856492483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585up9PD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856492483/reactions"
      },
      "updated_at" : "2023-12-14T19:55:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856492483",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/152159?v=4",
         "events_url" : "https://api.github.com/users/RandyMcMillan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/RandyMcMillan/followers",
         "following_url" : "https://api.github.com/users/RandyMcMillan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/RandyMcMillan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/RandyMcMillan",
         "id" : 152159,
         "login" : "RandyMcMillan",
         "node_id" : "MDQ6VXNlcjE1MjE1OQ==",
         "organizations_url" : "https://api.github.com/users/RandyMcMillan/orgs",
         "received_events_url" : "https://api.github.com/users/RandyMcMillan/received_events",
         "repos_url" : "https://api.github.com/users/RandyMcMillan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/RandyMcMillan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/RandyMcMillan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/RandyMcMillan"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I have no business adding comments here but I may humbly add that, despite this only affecting 0.016% of the UTXOs, it is a smart preemptive defense against arbitrary data on chain using a method that is far more damaging than inscriptions. ",
      "created_at" : "2024-01-02T23:32:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1874684848",
      "id" : 1874684848,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585vvWuw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1874684848/reactions"
      },
      "updated_at" : "2024-01-02T23:32:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1874684848",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/150210608?v=4",
         "events_url" : "https://api.github.com/users/BTCMcBoatface/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BTCMcBoatface/followers",
         "following_url" : "https://api.github.com/users/BTCMcBoatface/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BTCMcBoatface/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BTCMcBoatface",
         "id" : 150210608,
         "login" : "BTCMcBoatface",
         "node_id" : "U_kgDOCPQIMA",
         "organizations_url" : "https://api.github.com/users/BTCMcBoatface/orgs",
         "received_events_url" : "https://api.github.com/users/BTCMcBoatface/received_events",
         "repos_url" : "https://api.github.com/users/BTCMcBoatface/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BTCMcBoatface/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BTCMcBoatface/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BTCMcBoatface"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--13523179cfe9479db18ec6c5d236f789-->\r\nThere hasn't been much activity lately and the patch still needs rebase. What is the status here?\r\n\r\n* Is it still relevant? â¡ï¸ Please solve the conflicts to make it ready for review and to ensure the CI passes.\r\n* Is it no longer relevant? â¡ï¸ Please close.\r\n* Did the author lose interest or time to work on this? â¡ï¸ Please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\r\n",
      "created_at" : "2024-01-05T10:42:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1878466376",
      "id" : 1878466376,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585v9x9I",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1878466376/reactions"
      },
      "updated_at" : "2024-01-05T10:42:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1878466376",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "So this would make all current and future STAMPS unspendable? Or just future ones? How would this affect other potential legitimate use cases?\r\n\r\nWhat is the projected growth of node requirements if this situation were to get worse and how does that track with Moore's Law of the increase in computer performance? Or is there a better way to think about this?\r\n\r\nIt's worth noting, making these unspendable may not stop their proliferation. For example, solutions that allow you to trade private keys off-chain, in the event that there is market demand for STAMPS, would still incentivize their creation to the same degree even if they are unspendable.",
      "created_at" : "2024-01-28T19:12:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1913693984",
      "id" : 1913693984,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yEKcg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913693984/reactions"
      },
      "updated_at" : "2024-01-28T19:14:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913693984",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3209417?v=4",
         "events_url" : "https://api.github.com/users/owenstrevor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/owenstrevor/followers",
         "following_url" : "https://api.github.com/users/owenstrevor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/owenstrevor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/owenstrevor",
         "id" : 3209417,
         "login" : "owenstrevor",
         "node_id" : "MDQ6VXNlcjMyMDk0MTc=",
         "organizations_url" : "https://api.github.com/users/owenstrevor/orgs",
         "received_events_url" : "https://api.github.com/users/owenstrevor/received_events",
         "repos_url" : "https://api.github.com/users/owenstrevor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/owenstrevor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/owenstrevor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/owenstrevor"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Concept ACK\r\n\r\nResponses:\r\n\r\n> So this would make all current and future STAMPS unspendable? Or just future ones? How would this affect other potential legitimate use cases?\r\n> \r\n> What is the projected growth of node requirements if this situation were to get worse and how does that track with Moore's Law of the increase in computer performance? Or is there a better way to think about this?\r\n> \r\n> It's worth noting, making these unspendable may not stop their proliferation. For example, solutions that allow you to trade private keys off-chain, in the event that there is market demand for STAMPS, would still incentivize their creation to the same degree even if they are unspendable.\r\n\r\n@owenstrevor it does nothing of the sort. You should read more carefully before asserting a slippery slope economic argument about STAMPS. \r\n\r\n> to remove provably unspendable P2PK and P2MS tx outpoints from the UTXO set.\r\n\r\nThese outputs are already unspendable mathematically, and the person spending to them agreed to that condition upon signing. \r\n\r\n> > This trims nearly 20K outpoints from the UTXO set at height 805618.\r\n> \r\n> Concept NACK.\r\n> \r\n> At the moment the UTXO set has 130 million entries. Reducing it by 0.015% isn't worth the technical risk.\r\n> \r\n> By comparison, there have been 53 million OP_Return outputs. Removing those from the UTXO set was a not-so-trivial ~30% reduction.\r\n\r\nOP_RETURN outputs are not provably unspendable though, they have valid spending paths. So the comparison is irrelevant, the point is why would you incentivize the storage of something that is basically a burned output? Sure right now the storage space is negligible, however you would have to have a completely non-adversarial mindset to suggest that no one would ever exploit this further.\r\n",
      "created_at" : "2024-01-28T23:12:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1913753758",
      "id" : 1913753758,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yEZCe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913753758/reactions"
      },
      "updated_at" : "2024-01-28T23:26:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913753758",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/70079576?v=4",
         "events_url" : "https://api.github.com/users/dzyphr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dzyphr/followers",
         "following_url" : "https://api.github.com/users/dzyphr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dzyphr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dzyphr",
         "id" : 70079576,
         "login" : "dzyphr",
         "node_id" : "MDQ6VXNlcjcwMDc5NTc2",
         "organizations_url" : "https://api.github.com/users/dzyphr/orgs",
         "received_events_url" : "https://api.github.com/users/dzyphr/received_events",
         "repos_url" : "https://api.github.com/users/dzyphr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dzyphr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dzyphr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dzyphr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Fun challenge for everyone: can you link to a specific bare multisig UTXO that has been created within the past year (let's say, since block 769785) where the prunable detection in this PR would hit? Looking at an UTXO snapshot from now (block 827855), from all the 749496 P2MS UTXOs that have been created since the start of the year 2023, I haven't managed to find a _single_ one which is provably unspendable.",
      "created_at" : "2024-01-29T02:51:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1913871919",
      "id" : 1913871919,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yE14v",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913871919/reactions"
      },
      "updated_at" : "2024-01-29T02:51:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913871919",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Fun challenge for everyone: can you link to a specific bare multisig UTXO that has been created within the past year (let's say, since block 769785) where the prunable detection in this PR would hit? Looking at an UTXO snapshot from now (block 827855), from all the 749496 P2MS UTXOs that have been created since the start of the year 2023, I haven't managed to find a _single_ one which is provably unspendable.\r\n\r\nthey have provided a list: https://gist.github.com/russeree/85fb9519e0a1fc166177a6d5e0e15be2",
      "created_at" : "2024-01-29T03:06:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1913883771",
      "id" : 1913883771,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yE4x7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913883771/reactions"
      },
      "updated_at" : "2024-01-29T03:06:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913883771",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/70079576?v=4",
         "events_url" : "https://api.github.com/users/dzyphr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dzyphr/followers",
         "following_url" : "https://api.github.com/users/dzyphr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dzyphr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dzyphr",
         "id" : 70079576,
         "login" : "dzyphr",
         "node_id" : "MDQ6VXNlcjcwMDc5NTc2",
         "organizations_url" : "https://api.github.com/users/dzyphr/orgs",
         "received_events_url" : "https://api.github.com/users/dzyphr/received_events",
         "repos_url" : "https://api.github.com/users/dzyphr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dzyphr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dzyphr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dzyphr"
      }
   }
]
