[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28400).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [petertodd](https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1735100808) |\n| Concept ACK | [RandyMcMillan](https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1856492483), [dzyphr](https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1913753758), [dexX7](https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1914218855), [NicolasDorier](https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1914570114) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28728](https://github.com/bitcoin/bitcoin/pull/28728) (wallet: [bugfix] Mark CNoDestination and PubKeyDestination constructor explicit by maflcko)\n* [#28690](https://github.com/bitcoin/bitcoin/pull/28690) (build: Introduce internal kernel library by TheCharlatan)\n* [#28550](https://github.com/bitcoin/bitcoin/pull/28550) (Covenant tools softfork by jamesob)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-09-04T08:04:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1704801655",
      "id" : 1704801655,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585lnTV3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1704801655/reactions"
      },
      "updated_at" : "2024-01-29T12:13:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1704801655",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Changing the `IsUnspendable` logic in general seems very brittle, as it obviously leads to nodes with diverging UTXO sets. Even if _all_ nodes would run this patch, they'd start to run it at different block heights (if between blocks M and N an UTXO enters the set that classifies for pruning, you'd already diverge), and you'd only end up with the same fully pruned UTXO set if all of them also did a `-reindex` once.\r\n\r\nWhen the pruning of OP_RETURN outputs was implemented over 10 years ago (see https://github.com/bitcoin/bitcoin/pull/2791) this was seemingly less of a problem, but now that many projects depend on a normalized view of the UTXO set (muhash, assumeutxo, utreexo etc.), I think that would lead to much unwanted chaos.\r\n\r\nHappy to hear other inputs how this could be solved, maybe I'm missing something.",
      "created_at" : "2023-09-04T10:46:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1705040932",
      "id" : 1705040932,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585loNwk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705040932/reactions"
      },
      "updated_at" : "2023-09-04T10:46:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705040932",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314856043"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314856043"
         }
      },
      "author_association" : "NONE",
      "body" : "did you find anything interesting when you added this check?",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-04T11:59:53Z",
      "diff_hunk" : "@@ -258,6 +324,44 @@ bool CScript::IsPushOnly() const\n     return this->IsPushOnly(begin());\n }\n \n+\n+bool CScript::IsUnspendable() const\n+{\n+    if (size() > MAX_SCRIPT_SIZE) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314856043",
      "id" : 1314856043,
      "line" : 330,
      "node_id" : "PRRC_kwDOABII585OXxxr",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 330,
      "original_position" : 87,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 87,
      "pull_request_review_id" : 1609404682,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314856043/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-04T11:59:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314856043",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/115941166?v=4",
         "events_url" : "https://api.github.com/users/rot13maxi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rot13maxi/followers",
         "following_url" : "https://api.github.com/users/rot13maxi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rot13maxi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rot13maxi",
         "id" : 115941166,
         "login" : "rot13maxi",
         "node_id" : "U_kgDOBukfLg",
         "organizations_url" : "https://api.github.com/users/rot13maxi/orgs",
         "received_events_url" : "https://api.github.com/users/rot13maxi/received_events",
         "repos_url" : "https://api.github.com/users/rot13maxi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rot13maxi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rot13maxi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rot13maxi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314863864"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314863864"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No as it was previously defined here.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/6f03c45f6bb5a6edaa3051968b6a1ca4f84d2ccb/src/script/script.h#L551-L554\r\n\r\nThe reason I placed it at the top of the if else stack was to avoid doing work on a script that already is invalid due to length. _If the script is too long just mark as unspendable and avoid any extra checking_",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-04T12:08:10Z",
      "diff_hunk" : "@@ -258,6 +324,44 @@ bool CScript::IsPushOnly() const\n     return this->IsPushOnly(begin());\n }\n \n+\n+bool CScript::IsUnspendable() const\n+{\n+    if (size() > MAX_SCRIPT_SIZE) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314863864",
      "id" : 1314863864,
      "in_reply_to_id" : 1314856043,
      "line" : 330,
      "node_id" : "PRRC_kwDOABII585OXzr4",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 330,
      "original_position" : 87,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 87,
      "pull_request_review_id" : 1609417395,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314863864/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-04T12:08:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314863864",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3104223?v=4",
         "events_url" : "https://api.github.com/users/russeree/events{/privacy}",
         "followers_url" : "https://api.github.com/users/russeree/followers",
         "following_url" : "https://api.github.com/users/russeree/following{/other_user}",
         "gists_url" : "https://api.github.com/users/russeree/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/russeree",
         "id" : 3104223,
         "login" : "russeree",
         "node_id" : "MDQ6VXNlcjMxMDQyMjM=",
         "organizations_url" : "https://api.github.com/users/russeree/orgs",
         "received_events_url" : "https://api.github.com/users/russeree/received_events",
         "repos_url" : "https://api.github.com/users/russeree/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/russeree/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/russeree/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/russeree"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Changing the `IsUnspendable` logic in general seems very brittle, as it obviously leads to nodes with diverging UTXO sets. \r\n> \r\n> now that many projects depend on a normalized view of the UTXO set (muhash, assumeutxo, utreexo etc.), I think that would lead to much unwanted chaos.\r\n\r\nI think muhash provides a pretty straightforward way of dealing with this. Namely: rather than only maintaining a single muhash for the utxo set you have, also maintain one for the outputs you've pruned as unspendable (or multiple indexes if you introduce more over time). Then you might have:\r\n\r\n * at block height 810,000\r\n * the spendable utxo set has muhash X\r\n * the OP_RETURN utxos have muhash Y\r\n * the bad pubkey utxos have muhash Z\r\n\r\nif you compare with a node running current master, you then verify that your `X+Z` matches their `X`.\r\n\r\nIt's easy to initialize these values on upgrade: Z=0, then iterate through your utxo set looking for bad pubkeys, adding them to Z as you find them, and removing them from the utxo set. Downgrading breaks things though.\r\n\r\nI don't think you can bootstrap utreexo from just the utxo set at an arbitrary height in the first place, so I don't think its really affected by this. For assumeutxo, if you want to be able to distribute the utxo set snapshots over p2p, then peers that have pruned unspendable utxos won't have them to share with peers that don't realise they're unspendable in the first place, but if you're just producing signed snapshots, then you could probably just publish two versions until the old software goes out of its support window.",
      "created_at" : "2023-09-04T12:29:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1705186294",
      "id" : 1705186294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585loxP2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705186294/reactions"
      },
      "updated_at" : "2023-09-04T12:29:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705186294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314893129"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314893129"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`if (back() != OP_CHECKSIG && back() != OP_CHECKSIGVERIFY)` ?",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-04T12:37:17Z",
      "diff_hunk" : "@@ -201,6 +202,71 @@ unsigned int CScript::GetSigOpCount(const CScript& scriptSig) const\n     return subscript.GetSigOpCount(true);\n }\n \n+bool CScript::IsPayToPublicKey() const\n+{\n+    // Valid sizes for OP_PUSHBYTES based P2PK scripts\n+    const unsigned int size = this->size();\n+    if (size < 2 || size > 77) {\n+        return false;\n+    }\n+\n+    // Last byte is equal to OP_CHECKSIG / OP_CHECKSIGVERIFY\n+    const unsigned char last_byte = *(this->end() - 1);\n+    if (!(last_byte != OP_CHECKSIG ^ last_byte != OP_CHECKSIGVERIFY)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314893129",
      "id" : 1314893129,
      "line" : 215,
      "node_id" : "PRRC_kwDOABII585OX61J",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 215,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 22,
      "pull_request_review_id" : 1609463879,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314893129/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-04T22:59:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314893129",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314897080"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314897080"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You've already checked size is between 2 and 77, so if `first_byte + 2 == size`, `first_byte` is between 0 and 75, so the check for `OP_PUSHDATA1` is redundant (and the check for `OP_0` could be subsumed if you checked `size < 3`).\r\n\r\nAlso, `first_byte == front()`.",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-04T12:41:03Z",
      "diff_hunk" : "@@ -201,6 +202,71 @@ unsigned int CScript::GetSigOpCount(const CScript& scriptSig) const\n     return subscript.GetSigOpCount(true);\n }\n \n+bool CScript::IsPayToPublicKey() const\n+{\n+    // Valid sizes for OP_PUSHBYTES based P2PK scripts\n+    const unsigned int size = this->size();\n+    if (size < 2 || size > 77) {\n+        return false;\n+    }\n+\n+    // Last byte is equal to OP_CHECKSIG / OP_CHECKSIGVERIFY\n+    const unsigned char last_byte = *(this->end() - 1);\n+    if (!(last_byte != OP_CHECKSIG ^ last_byte != OP_CHECKSIGVERIFY)) {\n+        return false;\n+    }\n+\n+    // First byte must be a OP_PUSHBYTES\n+    const unsigned char first_byte = *(this->begin());\n+    if (first_byte == OP_0 || first_byte >= OP_PUSHDATA1) {\n+        return false;\n+    }\n+\n+    // The script contains 2 ops and is equal to the script length\n+    if (first_byte + 2 == size){",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314897080",
      "id" : 1314897080,
      "line" : 226,
      "node_id" : "PRRC_kwDOABII585OX7y4",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 226,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 33,
      "pull_request_review_id" : 1609463879,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314897080/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-04T22:59:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314897080",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314902966"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314902966"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should just be a span",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-04T12:46:48Z",
      "diff_hunk" : "@@ -258,6 +324,44 @@ bool CScript::IsPushOnly() const\n     return this->IsPushOnly(begin());\n }\n \n+\n+bool CScript::IsUnspendable() const\n+{\n+    if (size() > MAX_SCRIPT_SIZE) {\n+        return true;\n+    } else if (this->IsPayToPublicKey()) {\n+        std::vector<unsigned char> pubkey(this->begin() + 1, this->end() - 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314902966",
      "id" : 1314902966,
      "line" : 333,
      "node_id" : "PRRC_kwDOABII585OX9O2",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 333,
      "original_position" : 90,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 90,
      "pull_request_review_id" : 1609463879,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314902966/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-04T22:59:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1314902966",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ajtowns: Neat idea with the additional MuHash! I agree this should work, but obviously at the cost of increased complexity (as there is much more to change than only the logic of a single method), and there should be a really good reason for doing it.\r\n\r\n> It's easy to initialize these values on upgrade: Z=0, then iterate through your utxo set looking for bad pubkeys, adding them to Z as you find them, and removing them from the utxo set. Downgrading breaks things though.\r\n\r\nRight, and you'd also need to somehow detect if an upgrade has already happened. In #2791 it was proposed to either scan for a particular output in the UTXO set (https://github.com/bitcoin/bitcoin/pull/2791#issuecomment-21256241) or to introduce a flag in the chainstate database (https://github.com/bitcoin/bitcoin/pull/2791#issuecomment-21292138).\r\n\r\n@russeree: Can you give some additional motivation? While I enjoy very much reasoning about these kind of topics, it's still unclear to me what concrete problem this PR is trying to solve. The description claims that about 20k of outputs could be pruned. As of now (block 806205), that's merely 0.016% of the total UTXO set size, freeing up about 1,24 MB of chainstate space (if we assume an average size of 65 bytes per UTXO). I'd argue that these numbers are way too low (even if you 10x them for the sake of projecting into the future) to justify the increased complexity in different areas that would need to be touched (i.e. differentiating between different `IsUnspendable` reasons and update all call-sites correctly, maintaining an extra MuHash, implementing an UTXO set upgrade mechanism, probably adapting `gettxoutsetinfo` RPC results to include both \"new-pruned-MuHash\" and \"old-unpruned-MuHash\", dealing with different `dumptxoutset`/`loadtxoutset` result/behaviour on old vs new nodes for AssumeUTXO etc. etc.).\r\n\r\nAlso, calling `IsFullyValid` is significantly more expensive than just doing the usual Solver matching and length checks, so one would also need to analyze if this has a noticable negative performance impact on standardness checks.\r\n",
      "created_at" : "2023-09-04T15:27:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1705447458",
      "id" : 1705447458,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585lpxAi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705447458/reactions"
      },
      "updated_at" : "2023-09-04T15:27:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705447458",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315223848"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315223848"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Seems like it would be better to have `this->IsInvalidMultisig()` and move this code all into one place? Something like:\r\n\r\n```c++\r\nif (size() < 3) return false;\r\nif (back() != OP_CHECKMULTISIG && back() != OP_CHECKMULTISIGVERIFY) return false;\r\nint n;\r\nif (!IsOpN(*(end() - 2), n ) return false;\r\nint m;\r\nif (!IsOpN(front(), m) return false;\r\nstd::vector<Span<unsigned char>> keys;\r\nkeys.resize(n);\r\n// parse into keys, finish checking it's well-formed\r\nif (m > n) return true;\r\nint good = 0;\r\nint max_good = n;\r\nfor (k : keys) {\r\n    if (CPubKey(k).IsFullyValid()) {\r\n        ++good;\r\n    } else {\r\n        --max_good;\r\n    }\r\n    if (good >= m) return false;\r\n    if (max_good < m) return true;\r\n}\r\nreturn false; // unreachable\r\n\r\n",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-04T22:58:34Z",
      "diff_hunk" : "@@ -258,6 +324,44 @@ bool CScript::IsPushOnly() const\n     return this->IsPushOnly(begin());\n }\n \n+\n+bool CScript::IsUnspendable() const\n+{\n+    if (size() > MAX_SCRIPT_SIZE) {\n+        return true;\n+    } else if (this->IsPayToPublicKey()) {\n+        std::vector<unsigned char> pubkey(this->begin() + 1, this->end() - 1);\n+        if(!CPubKey(pubkey).IsFullyValid()){\n+            return true;\n+        }\n+    } else if (this->IsPayToMultisig()) {\n+        CScript::const_iterator pc = this->begin() + 1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315223848",
      "id" : 1315223848,
      "line" : 338,
      "node_id" : "PRRC_kwDOABII585OZLko",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 338,
      "original_position" : 95,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 95,
      "pull_request_review_id" : 1609463879,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315223848/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-04T22:59:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315223848",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "https://foundation.blacksintechnology.net/my-account/\r\n\r\nOn Mon, Sep 4, 2023, 4:02 PM Anthony Towns ***@***.***> wrote:\r\n\r\n> ***@***.**** commented on this pull request.\r\n> ------------------------------\r\n>\r\n> In src/script/script.cpp\r\n> <https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314893129>:\r\n>\r\n> > @@ -201,6 +202,71 @@ unsigned int CScript::GetSigOpCount(const CScript& scriptSig) const\r\n>      return subscript.GetSigOpCount(true);\r\n>  }\r\n>\r\n> +bool CScript::IsPayToPublicKey() const\r\n> +{\r\n> +    // Valid sizes for OP_PUSHBYTES based P2PK scripts\r\n> +    const unsigned int size = this->size();\r\n> +    if (size < 2 || size > 77) {\r\n> +        return false;\r\n> +    }\r\n> +\r\n> +    // Last byte is equal to OP_CHECKSIG / OP_CHECKSIGVERIFY\r\n> +    const unsigned char last_byte = *(this->end() - 1);\r\n> +    if (!(last_byte != OP_CHECKSIG ^ last_byte != OP_CHECKSIGVERIFY)) {\r\n>\r\n> if (back() != OP_CHECKSIG && back() != OP_CHECKSIGVERIFY) ?\r\n> ------------------------------\r\n>\r\n> In src/script/script.cpp\r\n> <https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314897080>:\r\n>\r\n> > +    }\r\n> +\r\n> +    // Last byte is equal to OP_CHECKSIG / OP_CHECKSIGVERIFY\r\n> +    const unsigned char last_byte = *(this->end() - 1);\r\n> +    if (!(last_byte != OP_CHECKSIG ^ last_byte != OP_CHECKSIGVERIFY)) {\r\n> +        return false;\r\n> +    }\r\n> +\r\n> +    // First byte must be a OP_PUSHBYTES\r\n> +    const unsigned char first_byte = *(this->begin());\r\n> +    if (first_byte == OP_0 || first_byte >= OP_PUSHDATA1) {\r\n> +        return false;\r\n> +    }\r\n> +\r\n> +    // The script contains 2 ops and is equal to the script length\r\n> +    if (first_byte + 2 == size){\r\n>\r\n> You've already checked size is between 2 and 77, so if first_byte + 2 ==\r\n> size, first_byte is between 0 and 75, so the check for OP_PUSHDATA1 is\r\n> redundant (and the check for OP_0 could be subsumed if you checked size <\r\n> 3).\r\n>\r\n> Also, first_byte == front().\r\n> ------------------------------\r\n>\r\n> In src/script/script.cpp\r\n> <https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1314902966>:\r\n>\r\n> > @@ -258,6 +324,44 @@ bool CScript::IsPushOnly() const\r\n>      return this->IsPushOnly(begin());\r\n>  }\r\n>\r\n> +\r\n> +bool CScript::IsUnspendable() const\r\n> +{\r\n> +    if (size() > MAX_SCRIPT_SIZE) {\r\n> +        return true;\r\n> +    } else if (this->IsPayToPublicKey()) {\r\n> +        std::vector<unsigned char> pubkey(this->begin() + 1, this->end() - 1);\r\n>\r\n> Should just be a span\r\n> ------------------------------\r\n>\r\n> In src/script/script.cpp\r\n> <https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315223848>:\r\n>\r\n> > @@ -258,6 +324,44 @@ bool CScript::IsPushOnly() const\r\n>      return this->IsPushOnly(begin());\r\n>  }\r\n>\r\n> +\r\n> +bool CScript::IsUnspendable() const\r\n> +{\r\n> +    if (size() > MAX_SCRIPT_SIZE) {\r\n> +        return true;\r\n> +    } else if (this->IsPayToPublicKey()) {\r\n> +        std::vector<unsigned char> pubkey(this->begin() + 1, this->end() - 1);\r\n> +        if(!CPubKey(pubkey).IsFullyValid()){\r\n> +            return true;\r\n> +        }\r\n> +    } else if (this->IsPayToMultisig()) {\r\n> +        CScript::const_iterator pc = this->begin() + 1;\r\n>\r\n> Seems like it would be better to have this->IsInvalidMultisig() and move\r\n> this code all into one place? Something like:\r\n>\r\n> if (size() < 3) return false;if (back() != OP_CHECKMULTISIG && back() != OP_CHECKMULTISIGVERIFY) return false;int n;if (!IsOpN(*(end() - 2), n ) return false;int m;if (!IsOpN(front(), m) return false;\r\n> std::vector<Span<unsigned char>> keys;\r\n> keys.resize(n);// parse into keys, finish checking it's well-formedif (m > n) return true;int good = 0;int max_good = n;for (k : keys) {\r\n>     if (CPubKey(k).IsFullyValid()) {\r\n>         ++good;\r\n>     } else {\r\n>         --max_good;\r\n>     }\r\n>     if (good >= m) return false;\r\n>     if (max_good < m) return true;\r\n> }return false; // unreachable\r\n>\r\n> â\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/bitcoin/bitcoin/pull/28400#pullrequestreview-1609463879>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AVQO3WBSCHPN2TS6TSVOK7TXYZMZTANCNFSM6AAAAAA4KASCXU>\r\n> .\r\n> You are receiving this because you are subscribed to this thread.Message\r\n> ID: ***@***.***>\r\n>\r\n",
      "created_at" : "2023-09-04T23:03:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1705754509",
      "id" : 1705754509,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585lq7-N",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705754509/reactions"
      },
      "updated_at" : "2023-09-04T23:03:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705754509",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/90238424?v=4",
         "events_url" : "https://api.github.com/users/drcalebpayne/events{/privacy}",
         "followers_url" : "https://api.github.com/users/drcalebpayne/followers",
         "following_url" : "https://api.github.com/users/drcalebpayne/following{/other_user}",
         "gists_url" : "https://api.github.com/users/drcalebpayne/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/drcalebpayne",
         "id" : 90238424,
         "login" : "drcalebpayne",
         "node_id" : "MDQ6VXNlcjkwMjM4NDI0",
         "organizations_url" : "https://api.github.com/users/drcalebpayne/orgs",
         "received_events_url" : "https://api.github.com/users/drcalebpayne/received_events",
         "repos_url" : "https://api.github.com/users/drcalebpayne/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/drcalebpayne/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/drcalebpayne/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/drcalebpayne"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315845318"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315845318"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It might be simpler to follow the style of the existing script template checks like ['IsPayToScriptHash'](https://github.com/bitcoin/bitcoin/blob/5892815cedef828a34e5efb1c9f32e3877eadd8c/src/script/script.cpp#L270). You can also use the [existing constants ](https://github.com/bitcoin/bitcoin/blob/ecab855838fa4de4c6d8c11e69037477d6047790/src/pubkey.h#L39) to check against the compressed and uncompressed sizes",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-05T12:45:38Z",
      "diff_hunk" : "@@ -201,6 +202,71 @@ unsigned int CScript::GetSigOpCount(const CScript& scriptSig) const\n     return subscript.GetSigOpCount(true);\n }\n \n+bool CScript::IsPayToPublicKey() const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315845318",
      "id" : 1315845318,
      "line" : 205,
      "node_id" : "PRRC_kwDOABII585ObjTG",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 205,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 12,
      "pull_request_review_id" : 1610971623,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315845318/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-05T12:45:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315845318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4742100?v=4",
         "events_url" : "https://api.github.com/users/Randy808/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Randy808/followers",
         "following_url" : "https://api.github.com/users/Randy808/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Randy808/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Randy808",
         "id" : 4742100,
         "login" : "Randy808",
         "node_id" : "MDQ6VXNlcjQ3NDIxMDA=",
         "organizations_url" : "https://api.github.com/users/Randy808/orgs",
         "received_events_url" : "https://api.github.com/users/Randy808/received_events",
         "repos_url" : "https://api.github.com/users/Randy808/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Randy808/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Randy808/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Randy808"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315857395"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315857395"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think you meant:\r\n`return op_code == OP_0 || (OP_1 <= op_code && op_code <= OP_16);`",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-05T12:55:23Z",
      "diff_hunk" : "@@ -343,6 +447,40 @@ bool IsOpSuccess(const opcodetype& opcode)\n            (opcode >= 187 && opcode <= 254);\n }\n \n+bool IsOpN(unsigned char op_code){\n+    return OP_0 || (OP_1 <= op_code && op_code <= OP_16);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315857395",
      "id" : 1315857395,
      "line" : 451,
      "node_id" : "PRRC_kwDOABII585ObmPz",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 451,
      "original_position" : 130,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 130,
      "pull_request_review_id" : 1610990715,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315857395/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-05T12:56:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315857395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4742100?v=4",
         "events_url" : "https://api.github.com/users/Randy808/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Randy808/followers",
         "following_url" : "https://api.github.com/users/Randy808/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Randy808/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Randy808",
         "id" : 4742100,
         "login" : "Randy808",
         "node_id" : "MDQ6VXNlcjQ3NDIxMDA=",
         "organizations_url" : "https://api.github.com/users/Randy808/orgs",
         "received_events_url" : "https://api.github.com/users/Randy808/received_events",
         "repos_url" : "https://api.github.com/users/Randy808/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Randy808/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Randy808/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Randy808"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315862135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315862135"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Might be more concise if you used the above function in this one:\r\n\r\n```\r\n bool IsOpN(unsigned char op_code, unsigned char &value) {\r\n   if (IsOpN(op_code)) {\r\n     if (op_code == OP_0) {\r\n       value = 0;\r\n     } else {\r\n       value = op_code - 0x50;\r\n     }\r\n     return true;\r\n   }\r\n   return false;\r\n }\r\n```",
      "commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "created_at" : "2023-09-05T12:59:09Z",
      "diff_hunk" : "@@ -343,6 +447,40 @@ bool IsOpSuccess(const opcodetype& opcode)\n            (opcode >= 187 && opcode <= 254);\n }\n \n+bool IsOpN(unsigned char op_code){\n+    return OP_0 || (OP_1 <= op_code && op_code <= OP_16);\n+}\n+\n+bool IsOpN(unsigned char op_code, unsigned char& value){",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#discussion_r1315862135",
      "id" : 1315862135,
      "line" : 454,
      "node_id" : "PRRC_kwDOABII585ObnZ3",
      "original_commit_id" : "5892815cedef828a34e5efb1c9f32e3877eadd8c",
      "original_line" : 454,
      "original_position" : 133,
      "original_start_line" : null,
      "path" : "src/script/script.cpp",
      "position" : 133,
      "pull_request_review_id" : 1610998445,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28400",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315862135/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-05T12:59:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315862135",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4742100?v=4",
         "events_url" : "https://api.github.com/users/Randy808/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Randy808/followers",
         "following_url" : "https://api.github.com/users/Randy808/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Randy808/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Randy808",
         "id" : 4742100,
         "login" : "Randy808",
         "node_id" : "MDQ6VXNlcjQ3NDIxMDA=",
         "organizations_url" : "https://api.github.com/users/Randy808/orgs",
         "received_events_url" : "https://api.github.com/users/Randy808/received_events",
         "repos_url" : "https://api.github.com/users/Randy808/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Randy808/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Randy808/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Randy808"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Sorry for the lack of work on this PR last week, was at TABConf working on #27260 . Work has resumed and I will update this thread with changes over the next few days.",
      "created_at" : "2023-09-11T01:48:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1713037151",
      "id" : 1713037151,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585mGt9f",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1713037151/reactions"
      },
      "updated_at" : "2023-09-11T01:48:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1713037151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3104223?v=4",
         "events_url" : "https://api.github.com/users/russeree/events{/privacy}",
         "followers_url" : "https://api.github.com/users/russeree/followers",
         "following_url" : "https://api.github.com/users/russeree/following{/other_user}",
         "gists_url" : "https://api.github.com/users/russeree/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/russeree",
         "id" : 3104223,
         "login" : "russeree",
         "node_id" : "MDQ6VXNlcjMxMDQyMjM=",
         "organizations_url" : "https://api.github.com/users/russeree/orgs",
         "received_events_url" : "https://api.github.com/users/russeree/received_events",
         "repos_url" : "https://api.github.com/users/russeree/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/russeree/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/russeree/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/russeree"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> This trims nearly 20K outpoints from the UTXO set at height 805618.\r\n\r\nConcept NACK.\r\n\r\nAt the moment the UTXO set has 130 million entries. Reducing it by 0.015% isn't worth the technical risk.\r\n\r\nBy comparison, there have been 53 million OP_Return outputs. Removing those from the UTXO set was a not-so-trivial ~30% reduction.",
      "created_at" : "2023-09-26T08:47:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1735100808",
      "id" : 1735100808,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585na4mI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1735100808/reactions"
      },
      "updated_at" : "2023-09-26T08:47:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1735100808",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "node_id" : "MDQ6VXNlcjcwNDI=",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-10-26T16:42:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1781478078",
      "id" : 1781478078,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585qLzK-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1781478078/reactions"
      },
      "updated_at" : "2023-10-26T16:42:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1781478078",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2023-12-14T19:55:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1856492483",
      "id" : 1856492483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585up9PD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856492483/reactions"
      },
      "updated_at" : "2023-12-14T19:55:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856492483",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/152159?v=4",
         "events_url" : "https://api.github.com/users/RandyMcMillan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/RandyMcMillan/followers",
         "following_url" : "https://api.github.com/users/RandyMcMillan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/RandyMcMillan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/RandyMcMillan",
         "id" : 152159,
         "login" : "RandyMcMillan",
         "node_id" : "MDQ6VXNlcjE1MjE1OQ==",
         "organizations_url" : "https://api.github.com/users/RandyMcMillan/orgs",
         "received_events_url" : "https://api.github.com/users/RandyMcMillan/received_events",
         "repos_url" : "https://api.github.com/users/RandyMcMillan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/RandyMcMillan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/RandyMcMillan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/RandyMcMillan"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I have no business adding comments here but I may humbly add that, despite this only affecting 0.016% of the UTXOs, it is a smart preemptive defense against arbitrary data on chain using a method that is far more damaging than inscriptions. ",
      "created_at" : "2024-01-02T23:32:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1874684848",
      "id" : 1874684848,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585vvWuw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1874684848/reactions"
      },
      "updated_at" : "2024-01-02T23:32:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1874684848",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/150210608?v=4",
         "events_url" : "https://api.github.com/users/BTCMcBoatface/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BTCMcBoatface/followers",
         "following_url" : "https://api.github.com/users/BTCMcBoatface/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BTCMcBoatface/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BTCMcBoatface",
         "id" : 150210608,
         "login" : "BTCMcBoatface",
         "node_id" : "U_kgDOCPQIMA",
         "organizations_url" : "https://api.github.com/users/BTCMcBoatface/orgs",
         "received_events_url" : "https://api.github.com/users/BTCMcBoatface/received_events",
         "repos_url" : "https://api.github.com/users/BTCMcBoatface/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BTCMcBoatface/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BTCMcBoatface/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BTCMcBoatface"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--13523179cfe9479db18ec6c5d236f789-->\r\nThere hasn't been much activity lately and the patch still needs rebase. What is the status here?\r\n\r\n* Is it still relevant? â¡ï¸ Please solve the conflicts to make it ready for review and to ensure the CI passes.\r\n* Is it no longer relevant? â¡ï¸ Please close.\r\n* Did the author lose interest or time to work on this? â¡ï¸ Please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\r\n",
      "created_at" : "2024-01-05T10:42:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1878466376",
      "id" : 1878466376,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585v9x9I",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1878466376/reactions"
      },
      "updated_at" : "2024-01-05T10:42:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1878466376",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "So this would make all current and future STAMPS unspendable? Or just future ones? How would this affect other potential legitimate use cases?\r\n\r\nWhat is the projected growth of node requirements if this situation were to get worse and how does that track with Moore's Law of the increase in computer performance? Or is there a better way to think about this?\r\n\r\nIt's worth noting, making these unspendable may not stop their proliferation. For example, solutions that allow you to trade private keys off-chain, in the event that there is market demand for STAMPS, would still incentivize their creation to the same degree even if they are unspendable.",
      "created_at" : "2024-01-28T19:12:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1913693984",
      "id" : 1913693984,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yEKcg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913693984/reactions"
      },
      "updated_at" : "2024-01-28T19:14:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913693984",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3209417?v=4",
         "events_url" : "https://api.github.com/users/owenstrevor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/owenstrevor/followers",
         "following_url" : "https://api.github.com/users/owenstrevor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/owenstrevor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/owenstrevor",
         "id" : 3209417,
         "login" : "owenstrevor",
         "node_id" : "MDQ6VXNlcjMyMDk0MTc=",
         "organizations_url" : "https://api.github.com/users/owenstrevor/orgs",
         "received_events_url" : "https://api.github.com/users/owenstrevor/received_events",
         "repos_url" : "https://api.github.com/users/owenstrevor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/owenstrevor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/owenstrevor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/owenstrevor"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Concept ACK\r\n\r\nResponses:\r\n\r\n> So this would make all current and future STAMPS unspendable? Or just future ones? How would this affect other potential legitimate use cases?\r\n> \r\n> What is the projected growth of node requirements if this situation were to get worse and how does that track with Moore's Law of the increase in computer performance? Or is there a better way to think about this?\r\n> \r\n> It's worth noting, making these unspendable may not stop their proliferation. For example, solutions that allow you to trade private keys off-chain, in the event that there is market demand for STAMPS, would still incentivize their creation to the same degree even if they are unspendable.\r\n\r\n@owenstrevor it does nothing of the sort. You should read more carefully before asserting a slippery slope economic argument about STAMPS. \r\n\r\n> to remove provably unspendable P2PK and P2MS tx outpoints from the UTXO set.\r\n\r\nThese outputs are already unspendable mathematically, and the person spending to them agreed to that condition upon signing. \r\n\r\n> > This trims nearly 20K outpoints from the UTXO set at height 805618.\r\n> \r\n> Concept NACK.\r\n> \r\n> At the moment the UTXO set has 130 million entries. Reducing it by 0.015% isn't worth the technical risk.\r\n> \r\n> By comparison, there have been 53 million OP_Return outputs. Removing those from the UTXO set was a not-so-trivial ~30% reduction.\r\n\r\nOP_RETURN outputs are not provably unspendable though, they have valid spending paths. So the comparison is irrelevant, the point is why would you incentivize the storage of something that is basically a burned output? Sure right now the storage space is negligible, however you would have to have a completely non-adversarial mindset to suggest that no one would ever exploit this further.\r\n",
      "created_at" : "2024-01-28T23:12:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1913753758",
      "id" : 1913753758,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yEZCe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913753758/reactions"
      },
      "updated_at" : "2024-01-28T23:26:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913753758",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/70079576?v=4",
         "events_url" : "https://api.github.com/users/dzyphr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dzyphr/followers",
         "following_url" : "https://api.github.com/users/dzyphr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dzyphr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dzyphr",
         "id" : 70079576,
         "login" : "dzyphr",
         "node_id" : "MDQ6VXNlcjcwMDc5NTc2",
         "organizations_url" : "https://api.github.com/users/dzyphr/orgs",
         "received_events_url" : "https://api.github.com/users/dzyphr/received_events",
         "repos_url" : "https://api.github.com/users/dzyphr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dzyphr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dzyphr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dzyphr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Fun challenge for everyone: can you link to a specific bare multisig UTXO that has been created within the past year (let's say, since block 769785) where the prunable detection in this PR would hit? Looking at an UTXO snapshot from now (block 827855), from all the 749496 P2MS UTXOs that have been created since the start of the year 2023, I haven't managed to find a _single_ one which is provably unspendable.\r\n// EDIT: nevermind, my script had a bug. ",
      "created_at" : "2024-01-29T02:51:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1913871919",
      "id" : 1913871919,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yE14v",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913871919/reactions"
      },
      "updated_at" : "2024-01-29T12:22:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913871919",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Fun challenge for everyone: can you link to a specific bare multisig UTXO that has been created within the past year (let's say, since block 769785) where the prunable detection in this PR would hit? Looking at an UTXO snapshot from now (block 827855), from all the 749496 P2MS UTXOs that have been created since the start of the year 2023, I haven't managed to find a _single_ one which is provably unspendable.\r\n\r\nthey have provided a list: https://gist.github.com/russeree/85fb9519e0a1fc166177a6d5e0e15be2",
      "created_at" : "2024-01-29T03:06:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1913883771",
      "id" : 1913883771,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yE4x7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913883771/reactions"
      },
      "updated_at" : "2024-01-29T03:06:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913883771",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/70079576?v=4",
         "events_url" : "https://api.github.com/users/dzyphr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dzyphr/followers",
         "following_url" : "https://api.github.com/users/dzyphr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dzyphr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dzyphr",
         "id" : 70079576,
         "login" : "dzyphr",
         "node_id" : "MDQ6VXNlcjcwMDc5NTc2",
         "organizations_url" : "https://api.github.com/users/dzyphr/orgs",
         "received_events_url" : "https://api.github.com/users/dzyphr/received_events",
         "repos_url" : "https://api.github.com/users/dzyphr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dzyphr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dzyphr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dzyphr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > Fun challenge for everyone: can you link to a specific bare multisig UTXO that has been created within the past year (let's say, since block 769785) where the prunable detection in this PR would hit? Looking at an UTXO snapshot from now (block 827855), from all the 749496 P2MS UTXOs that have been created since the start of the year 2023, I haven't managed to find a _single_ one which is provably unspendable.\r\n> \r\n> they have provided a list: https://gist.github.com/russeree/85fb9519e0a1fc166177a6d5e0e15be2\r\n\r\nThe most recently confirmed txs in that list are from block 792783 (June 2023), namely [c18fe6...](https://mempool.space/tx/c18fe6a7e72d75def4dde08982eb217e6d940253c62e8edfd91d027e42ea305e), [74c96e...](https://mempool.space/tx/74c96e6dcd6ceb02b37c82384a199a896acbddc67b26afb575f9ed94ac643a42) and [a6062e...](https://mempool.space/tx/a6062e218659a9b08fd345116aaa0b70e1fdce9c44b394e8a983afb9c858f0a9). All but ~50 of the txs are over 300k blocks ago (ie 6+ years). The ones that aren't are:\r\n\r\n```\r\nc18fe6a7e72d75def4dde08982eb217e6d940253c62e8edfd91d027e42ea305e\r\n74c96e6dcd6ceb02b37c82384a199a896acbddc67b26afb575f9ed94ac643a42\r\na6062e218659a9b08fd345116aaa0b70e1fdce9c44b394e8a983afb9c858f0a9\r\n44500c98c7c50a95490e9b949e29ce0748b6184f63035672fc5901094f6bb56c\r\nd697f7081adecdf9459c336d8c6a5b0ae0397f84d24261d1e818a93157f5b206\r\n81f7dfeb5b9f32fab76bf473dcebe2b386aefbff441f0cd822d2c6b3bed31f2f\r\n3fdd82de9be8a8d85120035819bd8cfac04c455245d59f6966d9a21f2095c734\r\n4ce4431ac29acf2ec0c404d37798b8288a1f0684c34c98bf7d10932c0b0959cd\r\nd53fc95fe481f7268ac9ee64ecbed99f0b4b9b6744af4f1fc8f1fca7940ed26c\r\ncbc47c01f6a7446fba8dda5d644fe5921b706337be64a4375ede3c9db6f3dcff\r\nc4088fada525ec679aaba0411a0da4414eec1fdbc3e13598693ca4d8b92055e2\r\n761ecbdfcbdb03e4a1cd13b3998e8a1dbf9684e23c9a6b0e294e1289ae52b821\r\nc4b7fc50cbc13a6ad0a12773b4b3021d3b8bbeca241fea2085befeb3b5b7c005\r\n761ecbdfcbdb03e4a1cd13b3998e8a1dbf9684e23c9a6b0e294e1289ae52b821\r\n777529f608cb01b2a0345c01f7a0b187ea3abf834c2fe703aa802999d1d90705\r\n143cf351a9ae3d77c5c92a0d36dd4b27729063cecf17012975b870beee0a541f\r\nca9bd642f83e7a5a246cd8bcf736425d52534ef8f17c6b0894d6bd2bf114f077\r\n4f31c92ba2d4d13cada26ca52ad2d09c733cd8dfaeed1c0cfdec2d3d2daa1ac8\r\n1703c0dd5df3db75ccbbff481868eb8a2c2d6eb0a22464902ab6d2019883f19e\r\n5ae101dc357378bd754cf123bf4eb006ddce327cd71147acb6a4a144eb14af36\r\ndc9e884999e5b2adff28b353cdff4e4b466f0f8a540f664a1f746c13ee1bd5f5\r\ndf85a060863bf831d78deac736a15650522ffc8fef024656d8f29f13220df391\r\nd327b9a48e1b83e0ceafc51074218a9ea2dc7f81677c848c04b5b20d6dccde8a\r\n376941a18072a540fd6e8570001f08e17aafdacd4cd6906255d6f0b68483bd17\r\n1f308833366d7afb167b3b447321dd0de1fed1dc05987acd3be34d3c591ad9d9\r\n82c147e6252eda3082c7ccde36294d9526b24e46669032d77bb850e43877a2c0\r\nb9688599cc3df70c5b36e4be40a6e4054341cdb87feb353eedb660d3b751b2e0\r\n1efe7f28c8e760af956636d6124b9c03b80c025ebd2e5b22abf63b303273c713\r\n3ae26c67afde7d09c4c2ae7af36afd66e6e9b622540541ce2b7f2034aaeedd6d\r\n5729f9d6e15c746c722e8bfa8e958aa753292b877520fc138c1a93fc8e5c297b\r\ncb985d853c476c688754ccb646f01357a1e3c3b540e36abe85b009d5e80dae85\r\n901443fe5f30fab741f1a69fae835b12abf873cbe0e468a8790fd4010a9da27e\r\n89e6aa1dbce058aaf0bd233a718bf94ad136d088d1b475b0b6476f50d8764e10\r\n24179e5e52c0229b78d490b4a354adbae7e868f7ad5fb1c2739b3af88c20ede8\r\n7f36c1b1ea1bc49cd8612c89d5e55be71808b13f013753ea27096085806db801\r\na22b9ed9fe1683d0946b49322919ace3373ef7a52064b702880fac2a1a4281df\r\nb80609ab2f01c4c95ac984d627797025ba5b404df8edc0c01e28cbf2a6c021a6\r\n6e45ba2e4f71497291170c40e7161fb47675ff0a7d6c67c1fda485832ed7c923\r\n41a3e9ee1910a2d40dd217bbc9fd3638c40d13c8fdda8a0aa9d49a2b4a199422\r\n3110f49fb6047d62e6fa198a0a4b180d9abf7075d6f29472747990ae286295cb\r\n1ff17021495e4afb27f2f55cc1ef487c48e33bd5a472a4a68c56a84fc38871ec\r\n9cf7c3fcf15ec0427a98623abe1fa752ad10c1615670c0dbe0a11516f277540e\r\n94eea90dc4e8320f4a3d85721644f2d63cb7b12533892bcc1273be47ce4342c1\r\n6f33e189faea182e7f1f2034228fa5e19705cd87ca1b1a7cb61260631096814a\r\n```",
      "created_at" : "2024-01-29T07:22:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1914102082",
      "id" : 1914102082,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yFuFC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1914102082/reactions"
      },
      "updated_at" : "2024-01-29T07:22:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1914102082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> So this would make all current and future STAMPS unspendable? Or just future ones? How would this affect other potential legitimate use cases?\r\n\r\nMost STAMPS txs are spendable and are not affected by this PR. As I understand it, that protocol sets up a 1-of-3 multisig, where of the keys is valid (providing a spendable path) and the other two are used for data, and are thus provably unspendable about 50% of the time as the data doesn't match a valid secp point. The only times those txs become unspendable are when the one valid key is replaced by an invalid key -- eg the txs linked in my previous comment have a pubkey `030303030303030303030303030303030303030303030303030303030303030303` which is neither a valid point nor carries any data.",
      "created_at" : "2024-01-29T07:29:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1914110506",
      "id" : 1914110506,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yFwIq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1914110506/reactions"
      },
      "updated_at" : "2024-01-29T07:29:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1914110506",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK.\r\n\r\nNote, however, that pubkeys can be modified to be valid and still be used to store data, for example by using a byte that is shuffled until the pubkey becomes valid.",
      "created_at" : "2024-01-29T08:44:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1914218855",
      "id" : 1914218855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yGKln",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1914218855/reactions"
      },
      "updated_at" : "2024-01-29T08:44:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1914218855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5836089?v=4",
         "events_url" : "https://api.github.com/users/dexX7/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dexX7/followers",
         "following_url" : "https://api.github.com/users/dexX7/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dexX7/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dexX7",
         "id" : 5836089,
         "login" : "dexX7",
         "node_id" : "MDQ6VXNlcjU4MzYwODk=",
         "organizations_url" : "https://api.github.com/users/dexX7/orgs",
         "received_events_url" : "https://api.github.com/users/dexX7/received_events",
         "repos_url" : "https://api.github.com/users/dexX7/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dexX7/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dexX7"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "~Concept ACK.~\r\n\r\nHowever, note that from the time this PR run on a node, its UTXO Set hash will start to differ from any peer that didn't start using this PR at the same time.\r\n\r\nThis can be solved by cleaning up the UTXO Set when the node starts. Unsure how expensive would it be.\r\n\r\nIt would be nice to know how much space is saved running this PR from genesis.\r\n\r\n~We are facing a problem in BTCPay: A large number of users have only 20GB of space to store the UTXO Set. Now that the UTXO Set is reaching 10GB and increasing, those users might have their node crashing sooner or later. So we are very interested into solutions to drop down the UTXO set size.~\r\n\r\nEDIT: It turns out that our problem wouldn't be solved see https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1915778170",
      "created_at" : "2024-01-29T12:13:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1914570114",
      "id" : 1914570114,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yHgWC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1914570114/reactions"
      },
      "updated_at" : "2024-01-30T00:42:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1914570114",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> and are thus provably unspendable about 50% of the time as the data doesn't match a valid secp point.\r\n\r\nSorry for not understanding this, but why 50%? I thought compressed pubkeys covered almost everything on the X axis because the y is derived? Also many of the pruned outpoints are not compressed pubkeys but instead uncompressed.",
      "created_at" : "2024-01-29T12:47:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1914628448",
      "id" : 1914628448,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yHulg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1914628448/reactions"
      },
      "updated_at" : "2024-01-29T12:48:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1914628448",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3104223?v=4",
         "events_url" : "https://api.github.com/users/russeree/events{/privacy}",
         "followers_url" : "https://api.github.com/users/russeree/followers",
         "following_url" : "https://api.github.com/users/russeree/following{/other_user}",
         "gists_url" : "https://api.github.com/users/russeree/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/russeree",
         "id" : 3104223,
         "login" : "russeree",
         "node_id" : "MDQ6VXNlcjMxMDQyMjM=",
         "organizations_url" : "https://api.github.com/users/russeree/orgs",
         "received_events_url" : "https://api.github.com/users/russeree/received_events",
         "repos_url" : "https://api.github.com/users/russeree/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/russeree/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/russeree/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/russeree"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > and are thus provably unspendable about 50% of the time as the data doesn't match a valid secp point.\r\n> \r\n> Sorry for not understanding this, but why 50%? I thought compressed pubkeys covered almost everything on the X axis because the y is derived? Also many of the pruned outpoints are not compressed pubkeys but instead uncompressed.\r\n\r\nIn my own non-cryptographer words: for about half of all possible field elements x, there exists no field element y such that the secp256k1 equation $y^2 = x^3 + 7$ holds (more precisely, you would get the coordinate y via $y = \\sqrt{x^3 + 7}$, but for those x values, the expression $x^3 + 7$ doesn't have a square root).",
      "created_at" : "2024-01-29T17:11:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1915193167",
      "id" : 1915193167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yJ4dP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915193167/reactions"
      },
      "updated_at" : "2024-01-29T17:11:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915193167",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > and are thus provably unspendable about 50% of the time as the data doesn't match a valid secp point.\r\n> \r\n> Sorry for not understanding this, but why 50%? I thought compressed pubkeys covered almost everything on the X axis because the y is derived? Also many of the pruned outpoints are not compressed pubkeys but instead uncompressed.\r\n\r\nThe formula is `y^2 = x^3 + 7`, so you derive `x^3+7` for any `x`, but only half of those will be valid squares -- every number `0 < i < p/2` squares to the same result as the different number `p-i` does, so you only use up half the possible numbers as squares; presuming `x^3+7` is just randomly choosing a number between 1 and p, then half the time it won't be a square. You get back to having `~2^256` points despite half of the `~2^256` x coords being invalid because each of the valid coords gives you two points (`y` and `p-y`).",
      "created_at" : "2024-01-29T17:12:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1915195487",
      "id" : 1915195487,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yJ5Bf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915195487/reactions"
      },
      "updated_at" : "2024-01-29T17:12:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915195487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> We are facing a problem in BTCPay: A large number of users have only 20GB of space to store the UTXO Set. Now that the UTXO Set is reaching 10GB and increasing, those users might have their node crashing sooner or later. So we are very interested into solutions to drop down the UTXO set size.\r\n\r\nThis pull request won't make any difference. Top 5 output types in UTXO set are P2PKH, P2WPKH, P2TR, P2SH and P2WSH.\r\n\r\nhttps://txstats.com/d/000000054/utxo-set-repartition-by-output-type?orgId=1",
      "created_at" : "2024-01-29T18:25:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1915317702",
      "id" : 1915317702,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yKW3G",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915317702/reactions"
      },
      "updated_at" : "2024-01-29T18:25:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915317702",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/147166694?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 147166694,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOCMWV5g",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@1440000bytes the repartition you are showing is on outputs count, not size. Since ordinal, utxoset size grew from 5GB to 10GB. Even if they are marginal in term of output count, in term of size, it takes around 50% of the UTXO Set at the moment.\r\n\r\nI haven't looked how they put JPEG and JSON files on the chain exactly, I assumed it was with invalid P2PK, but didn't look closely into it.",
      "created_at" : "2024-01-29T23:39:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1915766303",
      "id" : 1915766303,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yMEYf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915766303/reactions"
      },
      "updated_at" : "2024-01-29T23:40:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915766303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I haven't looked how they put JPEG and JSON files on the chain exactly, I assumed it was with invalid P2PK, but didn't look closely into it.\r\n\r\nOrdinal inscriptions don't use P2PK or bare multisig, they use P2TR with tapscripts. In order for an inscription to be in the blockchain, it must create and then spend a UTXO, so inscriptions themselves have no impact on the UTXO set. Ordinals may have an impact as there are people creating small outputs for their \"rare\" sats, but those are all perfectly valid P2TR outputs, so nothing can be done there.\r\n\r\nStamps is using the old Counterparty protocol that uses bare multisigs. These are 1-of-3 multisigs where one key is valid, and the other two are the data. These are also spendable so this PR would not remove them.\r\n\r\n***\r\n\r\n> OP_RETURN outputs are not provably unspendable though, they have valid spending paths\r\n\r\nThe point of OP_RETURN outputs (defined as the ones following the template `OP_RETURN <data>`) is to have a provably unspendable output that can be, and already are, pruned from the UTXO set. Yes, technically there are scripts that can contain OP_RETURN that are valid as long as OP_RETURN is not executed, but that's not what people generally refer to when saying \"OP_RETURN output\".",
      "created_at" : "2024-01-29T23:49:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28400#issuecomment-1915778170",
      "id" : 1915778170,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28400",
      "node_id" : "IC_kwDOABII585yMHR6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915778170/reactions"
      },
      "updated_at" : "2024-01-30T00:02:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915778170",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
