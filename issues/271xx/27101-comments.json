[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/27101).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [ajtowns](https://github.com/bitcoin/bitcoin/pull/27101#pullrequestreview-1299171355), [fanquake](https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1437361943), [sipa](https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1447126690), [stickies-v](https://github.com/bitcoin/bitcoin/pull/27101#pullrequestreview-1321541037), [vincenzopalazzo](https://github.com/bitcoin/bitcoin/pull/27101#pullrequestreview-1627573915) |\n| Stale ACK | [willcl-ark](https://github.com/bitcoin/bitcoin/pull/27101#pullrequestreview-1511661787) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28307](https://github.com/bitcoin/bitcoin/pull/28307) (rpc, wallet: fix incorrect segwit redeem script size limit by furszy)\n* [#28264](https://github.com/bitcoin/bitcoin/pull/28264) (test: refactor: support sending funds with outpoint result by theStack)\n* [#28230](https://github.com/bitcoin/bitcoin/pull/28230) (rpc: Add MaybeArg() and Arg() default helper by MarcoFalke)\n* [#28202](https://github.com/bitcoin/bitcoin/pull/28202) (Silent Payments: receiving by josibake)\n* [#28172](https://github.com/bitcoin/bitcoin/pull/28172) (refactor: use string_view for passing string literals to Parse{Hash,Hex} by jonatack)\n* [#28167](https://github.com/bitcoin/bitcoin/pull/28167) (init: Add option for rpccookie permissions (replace 26088) by willcl-ark)\n* [#27827](https://github.com/bitcoin/bitcoin/pull/27827) (Silent Payments: send and receive by josibake)\n* [#27788](https://github.com/bitcoin/bitcoin/pull/27788) (rpc: Be able to access RPC parameters by name by achow101)\n* [#27231](https://github.com/bitcoin/bitcoin/pull/27231) (Fix logging RPC and -debugexclude with 0/none values, add test coverage, improve docs by jonatack)\n* [#26863](https://github.com/bitcoin/bitcoin/pull/26863) (test: merge banning test from p2p_disconnect_ban to rpc_setban by brunoerg)\n* [#26840](https://github.com/bitcoin/bitcoin/pull/26840) (refactor: importpubkey, importprivkey, importaddress, importmulti, and importdescriptors rpc by KolbyML)\n* [#25722](https://github.com/bitcoin/bitcoin/pull/25722) (refactor: Use util::Result class for wallet loading by ryanofsky)\n* [#25273](https://github.com/bitcoin/bitcoin/pull/25273) (wallet: Pass through transaction locktime and preset input sequences and scripts to CreateTransaction by achow101)\n* [#22838](https://github.com/bitcoin/bitcoin/pull/22838) (descriptors: Be able to specify change and receiving in a single descriptor string by achow101)\n* [#21283](https://github.com/bitcoin/bitcoin/pull/21283) (Implement BIP 370 PSBTv2 by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-02-14T19:13:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1430251726",
      "id" : 1430251726,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585VP-jO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1430251726/reactions"
      },
      "updated_at" : "2023-10-17T19:40:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1430251726",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1106907468"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1106907468"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Rather than `bool is20`, `enum JSONVersion { JSON_1_BTC, JSON_2_0 }` might be clearer?",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-02-15T09:59:41Z",
      "diff_hunk" : "@@ -36,8 +22,23 @@ class JSONRPCRequest\n     std::string authUser;\n     std::string peerAddr;\n     std::any context;\n+    bool m_is20 = false;\n \n     void parse(const UniValue& valRequest);\n };\n \n+UniValue JSONRPCRequestObj(const std::string& strMethod, const UniValue& params, const UniValue& id);\n+UniValue JSONRPCReplyObj(const UniValue& result, const UniValue& error, const UniValue& id, bool is20);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1106907468",
      "id" : 1106907468,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585B-hFM",
      "original_commit_id" : "440d6a2e07810a24bc0951d1d2914a852f8f21c7",
      "original_line" : 31,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "src/rpc/request.h",
      "position" : null,
      "pull_request_review_id" : 1299171355,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1106907468/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-02-16T19:06:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1106907468",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2023-02-20T17:41:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1437361943",
      "id" : 1437361943,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585VrGcX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1437361943/reactions"
      },
      "updated_at" : "2023-02-20T17:41:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1437361943",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. Migrating to strict JSON-RPC 2.0 for `bitcoin-cli` and whatever opts into 2.0 is cool, even if it means keeping support for kinda-sorta-JSON-RPC 1.0 around on the server side.",
      "created_at" : "2023-02-27T21:33:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1447126690",
      "id" : 1447126690,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585WQWai",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1447126690/reactions"
      },
      "updated_at" : "2023-02-27T21:33:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1447126690",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK.\r\n\r\nMight be worth updating a few other things at the same time if you continue to move ahead:\r\n\r\n* This comment: https://github.com/bitcoin/bitcoin/pull/27101/files#diff-188b88992c9e08a108e852e7f69a2c2c6569d4b1212c9d05c46fdfd7fcb778d7R21-R27\r\n* [HelpExampleRPC()](https://github.com/bitcoin/bitcoin/blob/master/src/rpc/util.cpp#L157-L161) to json 2.0\r\n* Could warrant a release note to document new behaviours when using json 2.0",
      "created_at" : "2023-02-28T12:31:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1448101737",
      "id" : 1448101737,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585WUEdp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1448101737/reactions"
      },
      "updated_at" : "2023-02-28T12:31:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1448101737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@willcl-ark thanks, I added comments and release notes.\r\n\r\nI also wrote a tiny testing package using [libjson-rpc-cpp](https://github.com/cinemast/libjson-rpc-cpp) to check against an \"outside\" JSON-RPC 2.0 implementation. The package is https://github.com/pinheadmz/jsonrpc-bitcoin and [seems to like the 2.0 implementation so far.](https://github.com/pinheadmz/jsonrpc-bitcoin#examples)",
      "created_at" : "2023-03-01T19:08:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1450711073",
      "id" : 1450711073,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585WeBgh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1450711073/reactions"
      },
      "updated_at" : "2023-03-01T19:08:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1450711073",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This PR is ready for code review if any of you fine handsome concept-ACKers have the time â¤ï¸",
      "created_at" : "2023-03-20T15:04:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1476400553",
      "id" : 1476400553,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585YABWp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1476400553/reactions"
      },
      "updated_at" : "2023-03-20T15:04:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1476400553",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1142690986"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142690986"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should this not be a `status: 200, error: -32602` under json 2.0?",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-03-20T21:22:53Z",
      "diff_hunk" : "@@ -91,6 +122,17 @@ def test_http_status_codes(self):\n         assert_equal(response['error']['code'], -32700)                 # RPC_PARSE_ERROR\n         assert_equal(status, 500)\n \n+        self.log.info(\"Testing HTTP status codes for JSON-RPC 2.0 requests...\")\n+        AuthServiceProxy.jsonrpc20 = True\n+        # All 200!\n+        expect_http_status(200, -32601, self.nodes[0].invalidmethod)    # RPC_METHOD_NOT_FOUND\n+        expect_http_status(200, -8,     self.nodes[0].getblockhash, 42) # RPC_INVALID_PARAMETER",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1142690986",
      "id" : 1142690986,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585EHBSq",
      "original_commit_id" : "277727714e8eb9ed34749a469c02f0f6f02b80e5",
      "original_line" : 135,
      "original_position" : 83,
      "original_start_line" : null,
      "path" : "test/functional/interface_rpc.py",
      "position" : null,
      "pull_request_review_id" : 1349388347,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142690986/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-21T10:57:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142690986",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1142695923"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142695923"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Were we not using the out-of-spec `\"jsonrpc\": \"1.0\"` here previously?\r\n\r\nedit: It seems it doesn't make any difference as was not being validated? ð¤·ð¼ââï¸ ",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-03-20T21:29:22Z",
      "diff_hunk" : "@@ -50,17 +50,16 @@ def test_getrpcinfo(self):\n         assert_equal(info['logpath'], os.path.join(self.nodes[0].datadir, self.chain, 'debug.log'))\n \n     def test_batch_request(self):\n-        self.log.info(\"Testing basic JSON-RPC batch request...\")\n-\n+        self.log.info(\"Testing basic JSON-RPC 1.1 batch request...\")\n         results = self.nodes[0].batch([\n             # A basic request that will work fine.\n-            {\"method\": \"getblockcount\", \"id\": 1},\n+            {\"version\": \"1.1\", \"method\": \"getblockcount\", \"id\": 1},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1142695923",
      "id" : 1142695923,
      "line" : 56,
      "node_id" : "PRRC_kwDOABII585EHCfz",
      "original_commit_id" : "277727714e8eb9ed34749a469c02f0f6f02b80e5",
      "original_line" : 56,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "test/functional/interface_rpc.py",
      "position" : 32,
      "pull_request_review_id" : 1349388347,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142695923/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-21T10:57:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142695923",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1143113513"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1143113513"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Note that we do actually test json-rpc error code `-32602` in a different test, which might be worth documenting here?\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/1cc1c7210696e3ea758ea5e390eafe824cd06a9e/test/functional/p2p_disconnect_ban.py#L111\r\n\r\nSimilarly `-32603` is tested here:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/1cc1c7210696e3ea758ea5e390eafe824cd06a9e/test/functional/feature_fee_estimation.py#L335",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-03-21T09:46:09Z",
      "diff_hunk" : "@@ -79,9 +78,41 @@ def test_batch_request(self):\n \n         assert_equal(result_by_id[4]['error']['code'], -32600)          # RPC_INVALID_REQUEST\n         assert_equal(result_by_id[4]['error']['message'], \"Missing method\")\n+        assert_equal(result_by_id[2]['result'], None)\n+\n+        self.log.info(\"Testing basic JSON-RPC 2.0 batch request...\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1143113513",
      "id" : 1143113513,
      "line" : 83,
      "node_id" : "PRRC_kwDOABII585EIocp",
      "original_commit_id" : "277727714e8eb9ed34749a469c02f0f6f02b80e5",
      "original_line" : 83,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "test/functional/interface_rpc.py",
      "position" : 61,
      "pull_request_review_id" : 1349388347,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1143113513/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-21T10:57:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1143113513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1143114171"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1143114171"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why do we choose `status: 500, error: -32700` here vs `status: 200, error: -32700`? I feel inclined to argue that we didn't experience an http server error, this is just a parsing error.",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-03-21T09:46:38Z",
      "diff_hunk" : "@@ -91,6 +122,17 @@ def test_http_status_codes(self):\n         assert_equal(response['error']['code'], -32700)                 # RPC_PARSE_ERROR\n         assert_equal(status, 500)\n \n+        self.log.info(\"Testing HTTP status codes for JSON-RPC 2.0 requests...\")\n+        AuthServiceProxy.jsonrpc20 = True\n+        # All 200!\n+        expect_http_status(200, -32601, self.nodes[0].invalidmethod)    # RPC_METHOD_NOT_FOUND\n+        expect_http_status(200, -8,     self.nodes[0].getblockhash, 42) # RPC_INVALID_PARAMETER\n+        expect_http_status(200, None,   self.nodes[0].getblockhash, 0)\n+        # force-send invalidly formatted request\n+        response, status = self.nodes[0]._request('POST', \"/\", b'this is bad')\n+        assert_equal(response['error']['code'], -32700)                 # RPC_PARSE_ERROR\n+        assert_equal(status, 500)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1143114171",
      "id" : 1143114171,
      "line" : 140,
      "node_id" : "PRRC_kwDOABII585EIom7",
      "original_commit_id" : "277727714e8eb9ed34749a469c02f0f6f02b80e5",
      "original_line" : 140,
      "original_position" : 88,
      "original_start_line" : null,
      "path" : "test/functional/interface_rpc.py",
      "position" : 120,
      "pull_request_review_id" : 1349388347,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1143114171/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-21T10:57:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1143114171",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1143119006"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1143119006"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Perhaps in demonstrating best-practice it could be nice to not use a `null` value for `id` in the request, so we can avoid the `null` response. Per json-rpc 2.0 an `id: null` request is _supposed_ to be a \"notification\", which does not get responded to (although I think we should ignore actually parsing them like this interally, and respond to all requests).",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-03-21T09:50:11Z",
      "diff_hunk" : "@@ -0,0 +1,41 @@\n+JSON-RPC\n+--------\n+\n+The JSON-RPC server will behave and respond to JSON-RPC 2.0 requests with\n+strict adherence to the specification (https://www.jsonrpc.org/specification).\n+\n+Examples including HTTP response codes:\n+\n+```sh\n+$ curl u:p@127.0.0.1:18443/ -i --data '{\"method\": \"doesnotexist\"}'\n+HTTP/1.1 404 Not Found\n+Content-Type: application/json\n+Date: Wed, 01 Mar 2023 19:01:16 GMT\n+Content-Length: 79\n+\n+{\"result\":null,\"error\":{\"code\":-32601,\"message\":\"Method not found\"},\"id\":null}\n+\n+$ curl u:p@127.0.0.1:18443/ -i --data '{\"jsonrpc\": \"2.0\", \"method\": \"doesnotexist\"}'\n+HTTP/1.1 200 OK\n+Content-Type: application/json\n+Date: Wed, 01 Mar 2023 19:01:19 GMT\n+Content-Length: 81\n+\n+{\"jsonrpc\":\"2.0\",\"error\":{\"code\":-32601,\"message\":\"Method not found\"},\"id\":null}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1143119006",
      "id" : 1143119006,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585EIpye",
      "original_commit_id" : "2da823199b8d822f8c3350145ee6f21132b4eec0",
      "original_line" : 24,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "doc/release-notes-27101.md",
      "position" : null,
      "pull_request_review_id" : 1349388347,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1143119006/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-21T10:57:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1143119006",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1143200285"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1143200285"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Just a behaviour quirk I noticed in mutating these a little for testing: we can actually service batch requests which consist of a mixture of 1.0 and 2.0 requests. This test itself will fail, as it's asserting that `error` is not present (which if one is changed to 1.0 it is), but the server can handle it. Not that I think it's a particularly realistic or common situation...",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-03-21T10:55:27Z",
      "diff_hunk" : "@@ -68,17 +69,69 @@ def test_batch_request(self):\n         assert_equal(result_by_id[1]['error'], None)\n         assert_equal(result_by_id[1]['result'], 0)\n \n-        assert_equal(result_by_id[2]['error']['code'], -32601)\n+        assert_equal(result_by_id[2]['error']['code'], -32601)          # RPC_METHOD_NOT_FOUND\n+        assert_equal(result_by_id[2]['error']['message'], \"Method not found\")\n         assert_equal(result_by_id[2]['result'], None)\n \n         assert_equal(result_by_id[3]['error'], None)\n         assert result_by_id[3]['result'] is not None\n \n-    def test_http_status_codes(self):\n-        self.log.info(\"Testing HTTP status codes for JSON-RPC requests...\")\n+        assert_equal(result_by_id[4]['error']['code'], -32600)          # RPC_INVALID_REQUEST\n+        assert_equal(result_by_id[4]['error']['message'], \"Missing method\")\n+        assert_equal(result_by_id[2]['result'], None)\n \n-        expect_http_status(404, -32601, self.nodes[0].invalidmethod)\n-        expect_http_status(500, -8, self.nodes[0].getblockhash, 42)\n+        self.log.info(\"Testing basic JSON-RPC 2.0 batch request...\")\n+        results = self.nodes[0].batch([\n+            # A basic request that will work fine.\n+            {\"jsonrpc\": \"2.0\", \"method\": \"getblockcount\", \"id\": 5},\n+            # Request that will fail.  The whole batch request should still work fine.\n+            {\"jsonrpc\": \"2.0\", \"method\": \"invalidmethod\", \"id\": 6},\n+            # Another call that should succeed.\n+            {\"jsonrpc\": \"2.0\", \"method\": \"getblockhash\", \"id\": 7, \"params\": [0]},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1143200285",
      "id" : 1143200285,
      "line" : 90,
      "node_id" : "PRRC_kwDOABII585EI9od",
      "original_commit_id" : "2da823199b8d822f8c3350145ee6f21132b4eec0",
      "original_line" : 90,
      "original_position" : 70,
      "original_start_line" : null,
      "path" : "test/functional/interface_rpc.py",
      "position" : 68,
      "pull_request_review_id" : 1349388347,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1143200285/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-21T10:57:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1143200285",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145223127"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145223127"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Hm yeah good point, a few error codes like this [are specified](https://www.jsonrpc.org/specification#error_object). One problem with this is that our application error `RPC_INVALID_PARAMETER` (`-8`) is coded ~186 times in RPC functions everywhere. I suppose we could re-map those error codes back to the jsonrpc 2.0 spec in `JSONRPCExecOne()`? Only when the request indicates jsonrpc 2.0\r\n\r\n",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-03-22T18:05:49Z",
      "diff_hunk" : "@@ -91,6 +122,17 @@ def test_http_status_codes(self):\n         assert_equal(response['error']['code'], -32700)                 # RPC_PARSE_ERROR\n         assert_equal(status, 500)\n \n+        self.log.info(\"Testing HTTP status codes for JSON-RPC 2.0 requests...\")\n+        AuthServiceProxy.jsonrpc20 = True\n+        # All 200!\n+        expect_http_status(200, -32601, self.nodes[0].invalidmethod)    # RPC_METHOD_NOT_FOUND\n+        expect_http_status(200, -8,     self.nodes[0].getblockhash, 42) # RPC_INVALID_PARAMETER",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145223127",
      "id" : 1145223127,
      "in_reply_to_id" : 1142690986,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585EQrfX",
      "original_commit_id" : "277727714e8eb9ed34749a469c02f0f6f02b80e5",
      "original_line" : 135,
      "original_position" : 83,
      "original_start_line" : null,
      "path" : "test/functional/interface_rpc.py",
      "position" : null,
      "pull_request_review_id" : 1353203147,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145223127/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-22T18:05:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145223127",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145229348"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145229348"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In the tests at least it was originally `version: \"1.1\"` as seen in [authproxy.py](https://github.com/bitcoin/bitcoin/pull/27101/files#diff-6e2d6b181408a11452bcf83c79b299ba195524165e8a46e746b9d712961cc6fb) which is actually [in the 1.1 spec](https://www.jsonrpc.org/historical/json-rpc-1-1-wd.html#ProcedureCall). I'm not sure if `\"jsonrpc\": \"1.0\"` was part of an older spec or if thats a mistake [here](https://github.com/bitcoin/bitcoin/pull/27101/files#diff-fc0f86b6c3bb23b0e983bcf79d7546d1c9eaa15d6e4d8a7b03b5b85955f585abL526)",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-03-22T18:11:39Z",
      "diff_hunk" : "@@ -50,17 +50,16 @@ def test_getrpcinfo(self):\n         assert_equal(info['logpath'], os.path.join(self.nodes[0].datadir, self.chain, 'debug.log'))\n \n     def test_batch_request(self):\n-        self.log.info(\"Testing basic JSON-RPC batch request...\")\n-\n+        self.log.info(\"Testing basic JSON-RPC 1.1 batch request...\")\n         results = self.nodes[0].batch([\n             # A basic request that will work fine.\n-            {\"method\": \"getblockcount\", \"id\": 1},\n+            {\"version\": \"1.1\", \"method\": \"getblockcount\", \"id\": 1},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145229348",
      "id" : 1145229348,
      "in_reply_to_id" : 1142695923,
      "line" : 56,
      "node_id" : "PRRC_kwDOABII585EQtAk",
      "original_commit_id" : "277727714e8eb9ed34749a469c02f0f6f02b80e5",
      "original_line" : 56,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "test/functional/interface_rpc.py",
      "position" : 32,
      "pull_request_review_id" : 1353212247,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145229348/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-22T18:11:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145229348",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145232671"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145232671"
         }
      },
      "author_association" : "MEMBER",
      "body" : "aw geez. Well, ok so it looks like `disconnectnode` is the only RPC that throws the (correct?) error code for invalid params, while the rest throw `RPC_INVALID_PARAMETER` (`-8`). Maybe it does make sense to use a scripted diff to replace all the `-8`s with `-32602`. Nice catch!",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-03-22T18:14:40Z",
      "diff_hunk" : "@@ -79,9 +78,41 @@ def test_batch_request(self):\n \n         assert_equal(result_by_id[4]['error']['code'], -32600)          # RPC_INVALID_REQUEST\n         assert_equal(result_by_id[4]['error']['message'], \"Missing method\")\n+        assert_equal(result_by_id[2]['result'], None)\n+\n+        self.log.info(\"Testing basic JSON-RPC 2.0 batch request...\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145232671",
      "id" : 1145232671,
      "in_reply_to_id" : 1143113513,
      "line" : 83,
      "node_id" : "PRRC_kwDOABII585EQt0f",
      "original_commit_id" : "277727714e8eb9ed34749a469c02f0f6f02b80e5",
      "original_line" : 83,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "test/functional/interface_rpc.py",
      "position" : 61,
      "pull_request_review_id" : 1353216966,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145232671/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-22T18:14:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145232671",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145235420"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145235420"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not sure if `RPC_INTERNAL_ERROR` (`-32603`) is totally correct for estimating fee from a blocksonly node. It's more of a bad request ...",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-03-22T18:17:10Z",
      "diff_hunk" : "@@ -79,9 +78,41 @@ def test_batch_request(self):\n \n         assert_equal(result_by_id[4]['error']['code'], -32600)          # RPC_INVALID_REQUEST\n         assert_equal(result_by_id[4]['error']['message'], \"Missing method\")\n+        assert_equal(result_by_id[2]['result'], None)\n+\n+        self.log.info(\"Testing basic JSON-RPC 2.0 batch request...\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145235420",
      "id" : 1145235420,
      "in_reply_to_id" : 1143113513,
      "line" : 83,
      "node_id" : "PRRC_kwDOABII585EQufc",
      "original_commit_id" : "277727714e8eb9ed34749a469c02f0f6f02b80e5",
      "original_line" : 83,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "test/functional/interface_rpc.py",
      "position" : 61,
      "pull_request_review_id" : 1353220773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145235420/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-22T18:17:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145235420",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145246067"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145246067"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This error is caused by a failure to parse JSON in `ReadBody()` so theoretically we also can't read the `\"jsonrpc\": \"2.0\"` pair either. I agree with you though, the HTTP transport is fine and should be 200, because the error is coming from the json parser. I guess the options are:\r\n1. always send 200 [here](https://github.com/bitcoin/bitcoin/blob/master/src/httprpc.cpp#L77) and kinda break backwards compat\r\n2. attempt to parse the `\"jsonrpc\"` string and only send 200 if we can detect the \"2.0\" value\r\n3. leave as-is, meaning invalid requests will get 500 even if they otherwise intended to be \"2.0\"",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-03-22T18:27:17Z",
      "diff_hunk" : "@@ -91,6 +122,17 @@ def test_http_status_codes(self):\n         assert_equal(response['error']['code'], -32700)                 # RPC_PARSE_ERROR\n         assert_equal(status, 500)\n \n+        self.log.info(\"Testing HTTP status codes for JSON-RPC 2.0 requests...\")\n+        AuthServiceProxy.jsonrpc20 = True\n+        # All 200!\n+        expect_http_status(200, -32601, self.nodes[0].invalidmethod)    # RPC_METHOD_NOT_FOUND\n+        expect_http_status(200, -8,     self.nodes[0].getblockhash, 42) # RPC_INVALID_PARAMETER\n+        expect_http_status(200, None,   self.nodes[0].getblockhash, 0)\n+        # force-send invalidly formatted request\n+        response, status = self.nodes[0]._request('POST', \"/\", b'this is bad')\n+        assert_equal(response['error']['code'], -32700)                 # RPC_PARSE_ERROR\n+        assert_equal(status, 500)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145246067",
      "id" : 1145246067,
      "in_reply_to_id" : 1143114171,
      "line" : 140,
      "node_id" : "PRRC_kwDOABII585EQxFz",
      "original_commit_id" : "277727714e8eb9ed34749a469c02f0f6f02b80e5",
      "original_line" : 140,
      "original_position" : 88,
      "original_start_line" : null,
      "path" : "test/functional/interface_rpc.py",
      "position" : 120,
      "pull_request_review_id" : 1353235877,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145246067/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-22T18:27:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145246067",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145250554"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145250554"
         }
      },
      "author_association" : "MEMBER",
      "body" : "yep thanks, will update",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-03-22T18:31:38Z",
      "diff_hunk" : "@@ -0,0 +1,41 @@\n+JSON-RPC\n+--------\n+\n+The JSON-RPC server will behave and respond to JSON-RPC 2.0 requests with\n+strict adherence to the specification (https://www.jsonrpc.org/specification).\n+\n+Examples including HTTP response codes:\n+\n+```sh\n+$ curl u:p@127.0.0.1:18443/ -i --data '{\"method\": \"doesnotexist\"}'\n+HTTP/1.1 404 Not Found\n+Content-Type: application/json\n+Date: Wed, 01 Mar 2023 19:01:16 GMT\n+Content-Length: 79\n+\n+{\"result\":null,\"error\":{\"code\":-32601,\"message\":\"Method not found\"},\"id\":null}\n+\n+$ curl u:p@127.0.0.1:18443/ -i --data '{\"jsonrpc\": \"2.0\", \"method\": \"doesnotexist\"}'\n+HTTP/1.1 200 OK\n+Content-Type: application/json\n+Date: Wed, 01 Mar 2023 19:01:19 GMT\n+Content-Length: 81\n+\n+{\"jsonrpc\":\"2.0\",\"error\":{\"code\":-32601,\"message\":\"Method not found\"},\"id\":null}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145250554",
      "id" : 1145250554,
      "in_reply_to_id" : 1143119006,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585EQyL6",
      "original_commit_id" : "2da823199b8d822f8c3350145ee6f21132b4eec0",
      "original_line" : 24,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "doc/release-notes-27101.md",
      "position" : null,
      "pull_request_review_id" : 1353242220,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145250554/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-22T18:31:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145250554",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145263307"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145263307"
         }
      },
      "author_association" : "MEMBER",
      "body" : "another good call, thats a bug. I force-pushed with a fix and added a mixed 1.1 + 2.0 in the batch test",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-03-22T18:44:13Z",
      "diff_hunk" : "@@ -68,17 +69,69 @@ def test_batch_request(self):\n         assert_equal(result_by_id[1]['error'], None)\n         assert_equal(result_by_id[1]['result'], 0)\n \n-        assert_equal(result_by_id[2]['error']['code'], -32601)\n+        assert_equal(result_by_id[2]['error']['code'], -32601)          # RPC_METHOD_NOT_FOUND\n+        assert_equal(result_by_id[2]['error']['message'], \"Method not found\")\n         assert_equal(result_by_id[2]['result'], None)\n \n         assert_equal(result_by_id[3]['error'], None)\n         assert result_by_id[3]['result'] is not None\n \n-    def test_http_status_codes(self):\n-        self.log.info(\"Testing HTTP status codes for JSON-RPC requests...\")\n+        assert_equal(result_by_id[4]['error']['code'], -32600)          # RPC_INVALID_REQUEST\n+        assert_equal(result_by_id[4]['error']['message'], \"Missing method\")\n+        assert_equal(result_by_id[2]['result'], None)\n \n-        expect_http_status(404, -32601, self.nodes[0].invalidmethod)\n-        expect_http_status(500, -8, self.nodes[0].getblockhash, 42)\n+        self.log.info(\"Testing basic JSON-RPC 2.0 batch request...\")\n+        results = self.nodes[0].batch([\n+            # A basic request that will work fine.\n+            {\"jsonrpc\": \"2.0\", \"method\": \"getblockcount\", \"id\": 5},\n+            # Request that will fail.  The whole batch request should still work fine.\n+            {\"jsonrpc\": \"2.0\", \"method\": \"invalidmethod\", \"id\": 6},\n+            # Another call that should succeed.\n+            {\"jsonrpc\": \"2.0\", \"method\": \"getblockhash\", \"id\": 7, \"params\": [0]},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145263307",
      "id" : 1145263307,
      "in_reply_to_id" : 1143200285,
      "line" : 90,
      "node_id" : "PRRC_kwDOABII585EQ1TL",
      "original_commit_id" : "2da823199b8d822f8c3350145ee6f21132b4eec0",
      "original_line" : 90,
      "original_position" : 70,
      "original_start_line" : null,
      "path" : "test/functional/interface_rpc.py",
      "position" : 68,
      "pull_request_review_id" : 1353260532,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145263307/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-22T18:44:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145263307",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145426398"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145426398"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think I'd lean here towards option 3, not breaking backwards-compatibility and just let json2.0 users \"suffer\" a `status: 500, error: -32700` :)",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-03-22T21:26:44Z",
      "diff_hunk" : "@@ -91,6 +122,17 @@ def test_http_status_codes(self):\n         assert_equal(response['error']['code'], -32700)                 # RPC_PARSE_ERROR\n         assert_equal(status, 500)\n \n+        self.log.info(\"Testing HTTP status codes for JSON-RPC 2.0 requests...\")\n+        AuthServiceProxy.jsonrpc20 = True\n+        # All 200!\n+        expect_http_status(200, -32601, self.nodes[0].invalidmethod)    # RPC_METHOD_NOT_FOUND\n+        expect_http_status(200, -8,     self.nodes[0].getblockhash, 42) # RPC_INVALID_PARAMETER\n+        expect_http_status(200, None,   self.nodes[0].getblockhash, 0)\n+        # force-send invalidly formatted request\n+        response, status = self.nodes[0]._request('POST', \"/\", b'this is bad')\n+        assert_equal(response['error']['code'], -32700)                 # RPC_PARSE_ERROR\n+        assert_equal(status, 500)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1145426398",
      "id" : 1145426398,
      "in_reply_to_id" : 1143114171,
      "line" : 140,
      "node_id" : "PRRC_kwDOABII585ERdHe",
      "original_commit_id" : "277727714e8eb9ed34749a469c02f0f6f02b80e5",
      "original_line" : 140,
      "original_position" : 88,
      "original_start_line" : null,
      "path" : "test/functional/interface_rpc.py",
      "position" : 120,
      "pull_request_review_id" : 1353502224,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145426398/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-22T21:26:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1145426398",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Added a scripted-diff to completely replace all occurrences of the application-defined `RPC_INVALID_PARAMETER` (-8) with the JSONRPC 2.0 spec-defined `RPC_INVALID_PARAMS` (-32602)",
      "created_at" : "2023-03-28T18:17:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1487397883",
      "id" : 1487397883,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585Yp-P7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1487397883/reactions"
      },
      "updated_at" : "2023-03-28T18:17:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1487397883",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Looks like CI fails? :eyes: ",
      "created_at" : "2023-04-27T10:44:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1525447572",
      "id" : 1525447572,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585a7HuU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 1,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1525447572/reactions"
      },
      "updated_at" : "2023-04-27T10:44:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1525447572",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "reACK af86462\r\n\r\nNow using const reference in `parse()`.",
      "created_at" : "2023-05-12T08:48:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1545399521",
      "id" : 1545399521,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585cHOzh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1545399521/reactions"
      },
      "updated_at" : "2023-05-12T08:48:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1545399521",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-06-01T20:03:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1572698875",
      "id" : 1572698875,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585dvXr7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1572698875/reactions"
      },
      "updated_at" : "2023-06-01T20:03:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1572698875",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> ð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\r\n\r\ndone, very easy with scripted diff!",
      "created_at" : "2023-06-02T15:22:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1573916898",
      "id" : 1573916898,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585d0BDi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1573916898/reactions"
      },
      "updated_at" : "2023-06-02T15:22:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1573916898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-06-29T09:12:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1612682853",
      "id" : 1612682853,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585gH5Zl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1612682853/reactions"
      },
      "updated_at" : "2023-06-29T09:12:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1612682853",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> ð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\r\n\r\nð ",
      "created_at" : "2023-07-03T17:18:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1618910236",
      "id" : 1618910236,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585gfpwc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1618910236/reactions"
      },
      "updated_at" : "2023-07-03T17:18:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1618910236",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1251203825"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1251203825"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Just thinking out loud here; we use a code comment to indicate what the error code represents but in many of the other tests it appears we don't (admittedly here it is the point of the test, and in the other locations it's not). I wonder whether it might be clearer to have these enumerated in a single location, e.g. _util.py_, and then they could be used by name here and elsewhere? (this might be a change someone else will just make in the future otherwise, too).\r\n\r\nI think it's probably better left for a followup though, if at all.",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-07-03T19:04:28Z",
      "diff_hunk" : "@@ -68,17 +69,75 @@ def test_batch_request(self):\n         assert_equal(result_by_id[1]['error'], None)\n         assert_equal(result_by_id[1]['result'], 0)\n \n-        assert_equal(result_by_id[2]['error']['code'], -32601)\n+        assert_equal(result_by_id[2]['error']['code'], -32601)          # RPC_METHOD_NOT_FOUND",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1251203825",
      "id" : 1251203825,
      "line" : 72,
      "node_id" : "PRRC_kwDOABII585Kk9rx",
      "original_commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "original_line" : 72,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "test/functional/interface_rpc.py",
      "position" : 48,
      "pull_request_review_id" : 1511661787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1251203825/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-04T09:28:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1251203825",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Successfully tested against Sparrow Wallet's internal RPC client, Cormorant. By way of context I need this PR to make batch JSON-RPC requests as the Java client I am using requires JSON-RPC 2.0 formatted responses when a batched call is made.",
      "created_at" : "2023-07-05T10:19:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1621466705",
      "id" : 1621466705,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585gpZ5R",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1621466705/reactions"
      },
      "updated_at" : "2023-07-05T10:19:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1621466705",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/862166?v=4",
         "events_url" : "https://api.github.com/users/craigraw/events{/privacy}",
         "followers_url" : "https://api.github.com/users/craigraw/followers",
         "following_url" : "https://api.github.com/users/craigraw/following{/other_user}",
         "gists_url" : "https://api.github.com/users/craigraw/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/craigraw",
         "id" : 862166,
         "login" : "craigraw",
         "node_id" : "MDQ6VXNlcjg2MjE2Ng==",
         "organizations_url" : "https://api.github.com/users/craigraw/orgs",
         "received_events_url" : "https://api.github.com/users/craigraw/received_events",
         "repos_url" : "https://api.github.com/users/craigraw/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/craigraw/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/craigraw/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/craigraw"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1253614618"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1253614618"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In d11fb70b3fea7c1be5f48e32837d2c81dc7cbd10 \"test: cover more HTTP error codes in interface_rpc.py\"\r\n\r\nThis seems unnecessary?",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-07-05T20:30:51Z",
      "diff_hunk" : "@@ -16,7 +16,8 @@ def expect_http_status(expected_http_status, expected_rpc_code,\n                        fcn, *args):\n     try:\n         fcn(*args)\n-        raise AssertionError(f\"Expected RPC error {expected_rpc_code}, got none\")\n+        if expected_rpc_code is not None:\n+            raise AssertionError(f\"Expected RPC error {expected_rpc_code}, got none\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1253614618",
      "id" : 1253614618,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII585KuKQa",
      "original_commit_id" : "d11fb70b3fea7c1be5f48e32837d2c81dc7cbd10",
      "original_line" : 20,
      "original_position" : 6,
      "original_start_line" : 19,
      "path" : "test/functional/interface_rpc.py",
      "position" : 15,
      "pull_request_review_id" : 1515315141,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1253614618/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 19,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-05T20:51:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1253614618",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1256035908"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1256035908"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Reverting this change fails the test because we are divorcing HTTP status from RPC error, so you can have an HTTP OK with RPC error and some test cases now also ensure both are OK.\r\n\r\n```\r\n2023-07-07T15:44:27.147000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/Users/matthewzipkin/Desktop/work/bitcoin/test/functional/test_framework/test_framework.py\", line 131, in main\r\n    self.run_test()\r\n  File \"/Users/matthewzipkin/Desktop/work/bitcoin/test/functional/interface_rpc.py\", line 157, in run_test\r\n    self.test_http_status_codes()\r\n  File \"/Users/matthewzipkin/Desktop/work/bitcoin/test/functional/interface_rpc.py\", line 125, in test_http_status_codes\r\n    expect_http_status(200, None,   self.nodes[0].getblockhash, 0)\r\n  File \"/Users/matthewzipkin/Desktop/work/bitcoin/test/functional/interface_rpc.py\", line 19, in expect_http_status\r\n    raise AssertionError(f\"Expected RPC error {expected_rpc_code}, got none\")\r\nAssertionError: Expected RPC error None, got none\r\n```",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-07-07T15:47:25Z",
      "diff_hunk" : "@@ -16,7 +16,8 @@ def expect_http_status(expected_http_status, expected_rpc_code,\n                        fcn, *args):\n     try:\n         fcn(*args)\n-        raise AssertionError(f\"Expected RPC error {expected_rpc_code}, got none\")\n+        if expected_rpc_code is not None:\n+            raise AssertionError(f\"Expected RPC error {expected_rpc_code}, got none\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1256035908",
      "id" : 1256035908,
      "in_reply_to_id" : 1253614618,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII585K3ZZE",
      "original_commit_id" : "d11fb70b3fea7c1be5f48e32837d2c81dc7cbd10",
      "original_line" : 20,
      "original_position" : 6,
      "original_start_line" : 19,
      "path" : "test/functional/interface_rpc.py",
      "position" : 15,
      "pull_request_review_id" : 1519197674,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1256035908/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 19,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-07T15:47:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1256035908",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1256091925"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1256091925"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Hmm, the tests still seemed to work when I had run it without this change..",
      "commit_id" : "5f9179a339b79f4a3eca6200bab76bef62217ca5",
      "created_at" : "2023-07-07T16:22:21Z",
      "diff_hunk" : "@@ -16,7 +16,8 @@ def expect_http_status(expected_http_status, expected_rpc_code,\n                        fcn, *args):\n     try:\n         fcn(*args)\n-        raise AssertionError(f\"Expected RPC error {expected_rpc_code}, got none\")\n+        if expected_rpc_code is not None:\n+            raise AssertionError(f\"Expected RPC error {expected_rpc_code}, got none\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1256091925",
      "id" : 1256091925,
      "in_reply_to_id" : 1253614618,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII585K3nEV",
      "original_commit_id" : "d11fb70b3fea7c1be5f48e32837d2c81dc7cbd10",
      "original_line" : 20,
      "original_position" : 6,
      "original_start_line" : 19,
      "path" : "test/functional/interface_rpc.py",
      "position" : 15,
      "pull_request_review_id" : 1519260947,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1256091925/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 19,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-07T16:22:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1256091925",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 I added `IsNotification()` and a test. Also rebased the PR with more atomic commits for hopefully easier reviewing. As far as 500, that should only be returned by a \"legacy\" json rpc request. The legacy protocol should be unchanged by this PR. Unfortunately if the request is unparseable we can not read the `jsonrpc:\"2.0\"` identifier so the default is to assume legacy.",
      "created_at" : "2023-07-08T12:25:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1627212544",
      "id" : 1627212544,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585g_UsA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1627212544/reactions"
      },
      "updated_at" : "2023-07-08T12:25:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1627212544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1260253320"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1260253320"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 94d02376c853aa4835de413d3f75b8b06bcb5193 \"rpc: JSON-RPC 2.0 should not respond to \"notifications\"\"\r\n\r\nThis results in 500 and a response body of \"Unhandled request\". I think it should actually be a 200 with no response body.\r\n\r\n```suggestion\r\n            if (jreq.IsNotification()) {\r\n                req->WriteReply(HTTP_OK);\r\n                return true;\r\n            }\r\n```",
      "commit_id" : "797deaed0904a1982ba3163dc5dbe061b5288167",
      "created_at" : "2023-07-11T20:35:50Z",
      "diff_hunk" : "@@ -204,6 +204,7 @@ static bool HTTPReq_JSONRPC(const std::any& context, HTTPRequest* req)\n             }\n \n             jreq.parse(valRequest);\n+            if (jreq.IsNotification()) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1260253320",
      "id" : 1260253320,
      "line" : 207,
      "node_id" : "PRRC_kwDOABII585LHfCI",
      "original_commit_id" : "94d02376c853aa4835de413d3f75b8b06bcb5193",
      "original_line" : 207,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/httprpc.cpp",
      "position" : 40,
      "pull_request_review_id" : 1525118387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1260253320/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-11T20:35:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1260253320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1265886880"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265886880"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm looking into this, the [spec](https://www.jsonrpc.org/specification#notification) repeats no response to notifications but it doesn't indicate whether an HTTP OK is reasonable or whether the request should be completely ignored. I'm having some trouble getting libevent to completely cancel a request without sending anything back (and still letting bitcoind shutdown without hanging!) so maybe a 200 OK is best",
      "commit_id" : "797deaed0904a1982ba3163dc5dbe061b5288167",
      "created_at" : "2023-07-17T20:46:24Z",
      "diff_hunk" : "@@ -204,6 +204,7 @@ static bool HTTPReq_JSONRPC(const std::any& context, HTTPRequest* req)\n             }\n \n             jreq.parse(valRequest);\n+            if (jreq.IsNotification()) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1265886880",
      "id" : 1265886880,
      "in_reply_to_id" : 1260253320,
      "line" : 207,
      "node_id" : "PRRC_kwDOABII585Lc-ag",
      "original_commit_id" : "94d02376c853aa4835de413d3f75b8b06bcb5193",
      "original_line" : 207,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/httprpc.cpp",
      "position" : 40,
      "pull_request_review_id" : 1533673645,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265886880/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-17T20:46:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265886880",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1266207614"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266207614"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "There's https://www.simple-is-better.org/json-rpc/transport_http.html  (linked from the wikipedia page) which says 202 or 204; there's also https://www.simple-is-better.org/json-rpc/extension_transport.html by the same author but dated two months earlier, which suggests 200 or 204.",
      "commit_id" : "797deaed0904a1982ba3163dc5dbe061b5288167",
      "created_at" : "2023-07-18T04:40:02Z",
      "diff_hunk" : "@@ -204,6 +204,7 @@ static bool HTTPReq_JSONRPC(const std::any& context, HTTPRequest* req)\n             }\n \n             jreq.parse(valRequest);\n+            if (jreq.IsNotification()) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1266207614",
      "id" : 1266207614,
      "in_reply_to_id" : 1260253320,
      "line" : 207,
      "node_id" : "PRRC_kwDOABII585LeMt-",
      "original_commit_id" : "94d02376c853aa4835de413d3f75b8b06bcb5193",
      "original_line" : 207,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/httprpc.cpp",
      "position" : 40,
      "pull_request_review_id" : 1534145436,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266207614/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-18T04:40:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266207614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1266817621"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266817621"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ah awesome thank you, I'll go with `204 No Response` ",
      "commit_id" : "35c516c75d4110f7d651f05228512bd3794f643d",
      "created_at" : "2023-07-18T13:57:29Z",
      "diff_hunk" : "@@ -204,6 +204,7 @@ static bool HTTPReq_JSONRPC(const std::any& context, HTTPRequest* req)\n             }\n \n             jreq.parse(valRequest);\n+            if (jreq.IsNotification()) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1266817621",
      "id" : 1266817621,
      "in_reply_to_id" : 1260253320,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585LghpV",
      "original_commit_id" : "94d02376c853aa4835de413d3f75b8b06bcb5193",
      "original_line" : 207,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 1535107355,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266817621/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-18T13:57:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266817621",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1267073906"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267073906"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added in push to 26dcb359acf421dc3f448b49e0b564e714c54792. Also had to tweak `authproxy.py` to accommodate code 204",
      "commit_id" : "35c516c75d4110f7d651f05228512bd3794f643d",
      "created_at" : "2023-07-18T17:02:25Z",
      "diff_hunk" : "@@ -204,6 +204,7 @@ static bool HTTPReq_JSONRPC(const std::any& context, HTTPRequest* req)\n             }\n \n             jreq.parse(valRequest);\n+            if (jreq.IsNotification()) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1267073906",
      "id" : 1267073906,
      "in_reply_to_id" : 1260253320,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585LhgNy",
      "original_commit_id" : "94d02376c853aa4835de413d3f75b8b06bcb5193",
      "original_line" : 207,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 1535533233,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267073906/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-18T17:02:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267073906",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on master to re-apply scripted diff",
      "created_at" : "2023-07-24T16:30:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1648237927",
      "id" : 1648237927,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585iPh1n",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1648237927/reactions"
      },
      "updated_at" : "2023-07-24T16:30:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1648237927",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1276717254"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1276717254"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Shouldn't we still execute the notification? While it's not possible for the client to confirm it worked, it should still execute...",
      "commit_id" : "35c516c75d4110f7d651f05228512bd3794f643d",
      "created_at" : "2023-07-27T19:08:53Z",
      "diff_hunk" : "@@ -199,10 +202,13 @@ static bool HTTPReq_JSONRPC(const std::any& context, HTTPRequest* req)\n                 req->WriteReply(HTTP_FORBIDDEN);\n                 return false;\n             }\n-            UniValue result = tableRPC.execute(jreq);\n \n-            // Send reply\n-            strReply = JSONRPCReply(result, NullUniValue, jreq.id);\n+            jreq.parse(valRequest);\n+            if (jreq.IsNotification()) {\n+                req->WriteReply(HTTP_NO_CONTENT);\n+                return true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1276717254",
      "id" : 1276717254,
      "line" : 209,
      "node_id" : "PRRC_kwDOABII585MGSjG",
      "original_commit_id" : "35c516c75d4110f7d651f05228512bd3794f643d",
      "original_line" : 209,
      "original_position" : 42,
      "original_start_line" : 207,
      "path" : "src/httprpc.cpp",
      "position" : 42,
      "pull_request_review_id" : 1550578763,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1276717254/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 207,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-27T19:11:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1276717254",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1276726382"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1276726382"
         }
      },
      "author_association" : "MEMBER",
      "body" : "My thinking was that since our RPC API does not have any notifications defined yet we could discard them for now. Like, our RPCs and responses are a separate category from notifications.  But you have an interesting point, a user could send a notification with a method like `generatetoaddress` and just not want to wait for a reply. There would be plenty of \"getter\" RPCs that would make no sense in a notification however and just waste time on the server. Maybe this is best suited for a follow-up PR that establishes a notification interface for bitcoind and specifies which commands are allowed there?",
      "commit_id" : "35c516c75d4110f7d651f05228512bd3794f643d",
      "created_at" : "2023-07-27T19:18:18Z",
      "diff_hunk" : "@@ -199,10 +202,13 @@ static bool HTTPReq_JSONRPC(const std::any& context, HTTPRequest* req)\n                 req->WriteReply(HTTP_FORBIDDEN);\n                 return false;\n             }\n-            UniValue result = tableRPC.execute(jreq);\n \n-            // Send reply\n-            strReply = JSONRPCReply(result, NullUniValue, jreq.id);\n+            jreq.parse(valRequest);\n+            if (jreq.IsNotification()) {\n+                req->WriteReply(HTTP_NO_CONTENT);\n+                return true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1276726382",
      "id" : 1276726382,
      "in_reply_to_id" : 1276717254,
      "line" : 209,
      "node_id" : "PRRC_kwDOABII585MGUxu",
      "original_commit_id" : "35c516c75d4110f7d651f05228512bd3794f643d",
      "original_line" : 209,
      "original_position" : 42,
      "original_start_line" : 207,
      "path" : "src/httprpc.cpp",
      "position" : 42,
      "pull_request_review_id" : 1550595764,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1276726382/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 207,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-27T19:18:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1276726382",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1302098516"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302098516"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yep good call after doing some more reading about this in other implementations, I updated this branch to match and tested it. So now notifications are executed but send no response.",
      "commit_id" : "576ec3e2debdb63e142eee2c2fa00af995542f42",
      "created_at" : "2023-08-22T19:26:44Z",
      "diff_hunk" : "@@ -199,10 +202,13 @@ static bool HTTPReq_JSONRPC(const std::any& context, HTTPRequest* req)\n                 req->WriteReply(HTTP_FORBIDDEN);\n                 return false;\n             }\n-            UniValue result = tableRPC.execute(jreq);\n \n-            // Send reply\n-            strReply = JSONRPCReply(result, NullUniValue, jreq.id);\n+            jreq.parse(valRequest);\n+            if (jreq.IsNotification()) {\n+                req->WriteReply(HTTP_NO_CONTENT);\n+                return true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1302098516",
      "id" : 1302098516,
      "in_reply_to_id" : 1276717254,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585NnHJU",
      "original_commit_id" : "35c516c75d4110f7d651f05228512bd3794f643d",
      "original_line" : 211,
      "original_position" : 42,
      "original_start_line" : 207,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 1590176540,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302098516/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-08-22T19:26:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302098516",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "also rebased on master again to apply scripted diff",
      "created_at" : "2023-08-22T19:26:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1688798517",
      "id" : 1688798517,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585kqQU1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1688798517/reactions"
      },
      "updated_at" : "2023-08-22T19:26:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1688798517",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vincenzopalazzo great point thanks, I'll chop off the scripted diff and rebase on master. It has been annoying to keep that scripted diff up to date anyway",
      "created_at" : "2023-10-17T19:40:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#issuecomment-1767053292",
      "id" : 1767053292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27101",
      "node_id" : "IC_kwDOABII585pUxfs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1767053292/reactions"
      },
      "updated_at" : "2023-10-17T19:40:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1767053292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1414516901"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1414516901"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"rpc: refactor single/batch requests\" (125ef7a61885d2ffc0d32b66cdfb3dced2a4417b)\r\n\r\nThis change doesn't seem right because `jreq.parse` was just called above on line 196, and now the request is going to be parsed for a second time inside `JSONRPCExecOne` for no reason. I think this could be fixed by just dropping the `jreq.parse` call inside `JSONRPCExecOne`. It looks like later commit 4f22286c4aa65a113c44153847c857075a4225d6 does this anyway, so would be better to drop it up front and not change semantics multiple times. It would also be good to make the `ExecOne` `jreq` parameter const at that point since it should no longer be modifying the request. I would also rename `ExecOne` and `ExecBatch` functions to avoid giving the misleading impression that they are alternatives to each other, when actually they are operating at different levels and do not do the same things. ExecBatch handles errors, ExecOne does not. ExecBatch parses and executes, ExecOne should only execute requests without parsing them. Actually, I would probably just drop the ExecBatch function entirely since it is short and only called in one place. It would be clearer to just inline it, IMO.",
      "commit_id" : "576ec3e2debdb63e142eee2c2fa00af995542f42",
      "created_at" : "2023-12-04T21:24:23Z",
      "diff_hunk" : "@@ -199,10 +199,8 @@ static bool HTTPReq_JSONRPC(const std::any& context, HTTPRequest* req)\n                 req->WriteReply(HTTP_FORBIDDEN);\n                 return false;\n             }\n-            UniValue result = tableRPC.execute(jreq);\n \n-            // Send reply\n-            strReply = JSONRPCReply(result, NullUniValue, jreq.id);\n+            reply = JSONRPCExecOne(jreq, valRequest);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1414516901",
      "id" : 1414516901,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585UT9Cl",
      "original_commit_id" : "125ef7a61885d2ffc0d32b66cdfb3dced2a4417b",
      "original_line" : 203,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 1763446892,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1414516901/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-04T21:49:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1414516901",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1420979726"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1420979726"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Great review, thank you! I cleaned up the commit history in a rebase. The [diff is minimal](https://github.com/bitcoin/bitcoin/compare/576ec3e2debdb63e142eee2c2fa00af995542f42..5d5e8cbca785db851747c5143dc1d651a1ea11e6) but in the range diff you can see the rebasing removed a commit: \r\n\r\n`git range-diff fbcf1029a7ba47d07a4566cf1f9d2e7b4870304a 576ec3e2debdb63e142eee2c2fa00af995542f42 5d5e8cbca785db851747c5143dc1d651a1ea11e6`\r\n\r\nRegarding naming and in-lining, I could see the two functions being named `JSONRPCParseBatch()` and `JSONRPCExec()`? I still like both of those definitions in server.cpp but if you think the \"parse batch\" logic can live happily ever after in `HTTPReq_JSONRPC()` I won't protest. Either way would these 1 or 2 changes make more sense as a nice easy commit on top? Or should be rebased into the branch.",
      "commit_id" : "5d5e8cbca785db851747c5143dc1d651a1ea11e6",
      "created_at" : "2023-12-08T20:02:29Z",
      "diff_hunk" : "@@ -199,10 +199,8 @@ static bool HTTPReq_JSONRPC(const std::any& context, HTTPRequest* req)\n                 req->WriteReply(HTTP_FORBIDDEN);\n                 return false;\n             }\n-            UniValue result = tableRPC.execute(jreq);\n \n-            // Send reply\n-            strReply = JSONRPCReply(result, NullUniValue, jreq.id);\n+            reply = JSONRPCExecOne(jreq, valRequest);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27101#discussion_r1420979726",
      "id" : 1420979726,
      "in_reply_to_id" : 1414516901,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Usm4O",
      "original_commit_id" : "125ef7a61885d2ffc0d32b66cdfb3dced2a4417b",
      "original_line" : 203,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 1773099799,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27101",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1420979726/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-08T20:02:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1420979726",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   }
]
