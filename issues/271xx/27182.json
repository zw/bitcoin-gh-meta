{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "Raising this issue on behalf of @hebasto who identified the potential problem as well as dug into the docs.\r\n\r\nThe `logging` RPC method, through [`UpdateHTTPServerLogging()`](https://github.com/bitcoin/bitcoin/blob/cb40639bdf04bab31bcdceb3bf941e9bade8317a/src/httpserver.cpp#L410-L416) calls the libevent function `event_enable_debug_logging()`. The libevent documentation [states](https://libevent.org/libevent-book/Ref1_libsetup.html) that \"You must make any changes to these settings before you call any other part of the Libevent library. If you donât, Libevent could wind up in an inconsistent state.\", and the [headers](https://github.com/libevent/libevent/blob/bcefdbc67a4b18c5dce4420dfa3e83b3dfa16f6f/include/event2/event.h#L791-L806) similarly state that \"This is a global setting; if you are going to call it, you must call this before any calls that create an event-base.  You must call it before any multithreaded use of Libevent.\"\r\n\r\nIt was introduced in https://github.com/bitcoin/bitcoin/pull/10150, where [reference is made](https://github.com/bitcoin/bitcoin/pull/10150#discussion_r110255587) to the libevent 2.1 release notes that [state](https://github.com/libevent/libevent/blob/2e52bace9f9998826bd3819af328efc8d18decf9/whatsnew-2.1.txt#L269) that \"You can now turn on debug logs at runtime using a new function, event_enable_debug_logging().\", making this a seemingly safe implementation.\r\n\r\nIt appears that:\r\n1. Bitcoin Core's usage of `event_enable_debug_logging()` violates the current libevent documentation\r\n2. either there is inconsistency between the libevent 2.1 release notes and the documentation, or the behaviour of `event_enable_debug_logging()` has been changed after 2.1 in a backwards-incompatible way\r\n3. this currently does not seem to be causing any real-world issues\r\n\r\nEven though it seems like there are currently no actual problems, it's probably something to be mindful of and ideally resolve, either by disabling toggling libevent debug logging at runtime or verifying that our current usage is indeed safe and will not lead to issues now or in the future.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27182/comments",
   "created_at" : "2023-03-01T10:58:34Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27182/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/27182",
   "id" : 1604739984,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27182/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "I_kwDOABII585fpmOQ",
   "number" : 27182,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27182/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27182/timeline",
   "title" : "libevent: event_enable_debug_logging() not to be used after creating event base",
   "updated_at" : "2023-03-01T10:58:46Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27182",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
      "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
      "followers_url" : "https://api.github.com/users/stickies-v/followers",
      "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
      "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/stickies-v",
      "id" : 69010457,
      "login" : "stickies-v",
      "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
      "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
      "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
      "repos_url" : "https://api.github.com/users/stickies-v/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/stickies-v"
   }
}
