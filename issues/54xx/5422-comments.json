[
   {
      "body" : "#5267 no longer contains the pull-tester update, which is still a part of this.",
      "created_at" : "2014-12-04T21:59:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5422#issuecomment-65711344",
      "id" : 65711344,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5422",
      "updated_at" : "2014-12-04T21:59:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65711344",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I tried out a variation of @dgenr8's [comments](https://github.com/TheBlueMatt/bitcoin/commit/7ef4496c5af01b316c607b49457410f2f3bbcff6#commitcomment-8769102) in regtest by creating 2 coinbases and using them as inputs for a transaction, but then creating a block with a different tx which double spends one of those inputs.  The qt client correctly shows that the original transaction is conflicted, but what it doesn't do is realize that one of the inputs spent by the original transaction is now available again and therefore it shows the wrong balance.   This is a result of MarkDirty() not getting called on the inputs for the previous transaction anymore.",
      "created_at" : "2014-12-04T22:38:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5422#issuecomment-65716738",
      "id" : 65716738,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5422",
      "updated_at" : "2014-12-04T22:38:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65716738",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "The visible status update problem I saw may be an existing wallet problem.  The wallet gui accesses the mempool directly to set the transaction status icon, so it will notice the removed transaction next time it checks for it in the mempool.  But it tries to do this only when it thinks the transaction is actually showing in the gui, and there is also logic that presumes status changes will only happen when a block has been added since the last gui update.\r\n\r\nWhat I want to test is the tx not showing visually when the block arrives, then being exposed later by user action such as switching to the history tab.  I won't be able to do this for several days though.\r\n\r\nThe report of @morcos is consistent, because the isDirty update only happens on explicit SyncWithWallets (it does not directly access the mempool).\r\n",
      "created_at" : "2014-12-05T01:52:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5422#issuecomment-65736268",
      "id" : 65736268,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5422",
      "updated_at" : "2014-12-05T01:52:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65736268",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4284124?v=3",
         "events_url" : "https://api.github.com/users/dgenr8/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgenr8/followers",
         "following_url" : "https://api.github.com/users/dgenr8/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgenr8/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgenr8",
         "id" : 4284124,
         "login" : "dgenr8",
         "organizations_url" : "https://api.github.com/users/dgenr8/orgs",
         "received_events_url" : "https://api.github.com/users/dgenr8/received_events",
         "repos_url" : "https://api.github.com/users/dgenr8/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgenr8/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgenr8/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgenr8"
      }
   },
   {
      "body" : "I think you might be in the middle of changing this around, but here is the little [test](https://gist.github.com/morcos/0ab22140dde800ac70fc) I put together.  I don't know the code well enough to understand what's happening, but not only does the GUI show an incorrect balance in this test, but the rpc getbalance returns the wrong value and fails the assertion.  However, if you change node0 in my test to a bitcoind instead of a bitcoin-qt, then the rpc getbalance works properly.  That seems odd to me.",
      "created_at" : "2014-12-05T20:20:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5422#issuecomment-65848626",
      "id" : 65848626,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5422",
      "updated_at" : "2014-12-05T20:20:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65848626",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "@morcos wow...that makes it sound like the only reason the balances were previously consistent is because of a race condition...(+/- the fact that cs_main is held, so it may be safe still...).\r\nAnyway, thanks for the testing @dgenr8 and @morcos...wanna test again with the latest MarkDirty() additions?",
      "created_at" : "2014-12-05T22:48:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5422#issuecomment-65867242",
      "id" : 65867242,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5422",
      "updated_at" : "2014-12-05T22:48:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65867242",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I'm still working on the test changes, which maybe should just be a separate pull request, but..oh well.",
      "created_at" : "2014-12-05T22:48:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5422#issuecomment-65867271",
      "id" : 65867271,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5422",
      "updated_at" : "2014-12-05T22:48:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65867271",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@morcos Thanks, I'll try to take a look later today and merge that in...might be a bit before I can, though.",
      "created_at" : "2014-12-05T22:50:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5422#issuecomment-65867451",
      "id" : 65867451,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5422",
      "updated_at" : "2014-12-05T22:50:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65867451",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "OK, thanks a ton @dgenr8 and @morcos, that part of the change is now in #5433.",
      "created_at" : "2014-12-06T08:35:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5422#issuecomment-65890048",
      "id" : 65890048,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5422",
      "updated_at" : "2014-12-06T08:35:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65890048",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I apologize this took so long, (see the various fixes commit to see why it took so many travis round-trips...), but this should now be good to go...",
      "created_at" : "2014-12-20T08:34:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5422#issuecomment-67729215",
      "id" : 67729215,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5422",
      "updated_at" : "2014-12-20T08:34:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67729215",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Note that this will delay travis results somewhat, I'd think but hopefully not too much.",
      "created_at" : "2014-12-20T08:34:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5422#issuecomment-67729227",
      "id" : 67729227,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5422",
      "updated_at" : "2014-12-20T08:34:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67729227",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Needs rebase.",
      "created_at" : "2015-01-23T12:25:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5422#issuecomment-71186553",
      "id" : 71186553,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5422",
      "updated_at" : "2015-01-23T12:25:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/71186553",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
