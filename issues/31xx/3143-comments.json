[
   {
      "body" : "I believe the issue and the solution is correct, but this patch seems over-complicated. I'll look at it later today.\r\n\r\nAs we do not have any releases with the pruning code enabled, this is not urgent.",
      "created_at" : "2013-10-24T13:44:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-26993099",
      "id" : 26993099,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3143",
      "updated_at" : "2013-10-24T13:44:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26993099",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I think it's slightly urgent as my analysis was that this issue is fork forming, and people do mine on git code. (The conclusion I reached while investigating this was that it would cause reorgs to fail, though I haven't attempted a test)",
      "created_at" : "2013-10-25T14:19:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27096017",
      "id" : 27096017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3143",
      "updated_at" : "2013-10-25T14:19:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27096017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7224973"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/7224973"
         }
      },
      "body" : "Can you replace this by tx.IsPruned(), and see if things still work?",
      "commit_id" : "cbea442e6d8fb2b447e14fd8a527d670f76b1e68",
      "created_at" : "2013-10-25T18:57:56Z",
      "diff_hunk" : "@@ -1750,25 +1750,29 @@ bool DisconnectBlock(CBlock& block, CValidationState& state, CBlockIndex* pindex\n         const CTransaction &tx = block.vtx[i];\n         uint256 hash = tx.GetHash();\n \n-        // check that all outputs are available\n-        if (!view.HaveCoins(hash)) {\n-            fClean = fClean && error(\"DisconnectBlock() : outputs still spent? database corrupted\");\n-            view.SetCoins(hash, CCoins());\n+        // Remember that if every output of a transaction is unspendable the\n+        // correct state for the UTXO set to be in is always to not have the\n+        // transaction indexed at all.\n+        if (!tx.AllOutputsUnspendable()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7224973",
      "id" : 7224973,
      "original_commit_id" : "74f3320520081086c1118e3bd98fd0fd8effeaef",
      "original_position" : 11,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3143",
      "updated_at" : "2013-10-26T10:23:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/7224973",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7225031"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/7225031"
         }
      },
      "body" : "Ugh, this is a CTransaction, not a CCoins of course. Never mind.",
      "commit_id" : "cbea442e6d8fb2b447e14fd8a527d670f76b1e68",
      "created_at" : "2013-10-25T19:00:10Z",
      "diff_hunk" : "@@ -1750,25 +1750,29 @@ bool DisconnectBlock(CBlock& block, CValidationState& state, CBlockIndex* pindex\n         const CTransaction &tx = block.vtx[i];\n         uint256 hash = tx.GetHash();\n \n-        // check that all outputs are available\n-        if (!view.HaveCoins(hash)) {\n-            fClean = fClean && error(\"DisconnectBlock() : outputs still spent? database corrupted\");\n-            view.SetCoins(hash, CCoins());\n+        // Remember that if every output of a transaction is unspendable the\n+        // correct state for the UTXO set to be in is always to not have the\n+        // transaction indexed at all.\n+        if (!tx.AllOutputsUnspendable()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7225031",
      "id" : 7225031,
      "original_commit_id" : "74f3320520081086c1118e3bd98fd0fd8effeaef",
      "original_position" : 11,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3143",
      "updated_at" : "2013-10-26T10:23:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/7225031",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7225055"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/7225055"
         }
      },
      "body" : "No need to call AllOutputsUnspendable twice, I think? (also, use && instead of &).",
      "commit_id" : "cbea442e6d8fb2b447e14fd8a527d670f76b1e68",
      "created_at" : "2013-10-25T19:00:57Z",
      "diff_hunk" : "@@ -1750,25 +1750,29 @@ bool DisconnectBlock(CBlock& block, CValidationState& state, CBlockIndex* pindex\n         const CTransaction &tx = block.vtx[i];\n         uint256 hash = tx.GetHash();\n \n-        // check that all outputs are available\n-        if (!view.HaveCoins(hash)) {\n-            fClean = fClean && error(\"DisconnectBlock() : outputs still spent? database corrupted\");\n-            view.SetCoins(hash, CCoins());\n+        // Remember that if every output of a transaction is unspendable the\n+        // correct state for the UTXO set to be in is always to not have the\n+        // transaction indexed at all.\n+        if (!tx.AllOutputsUnspendable()) {\n+            if (!view.HaveCoins(hash) & !tx.AllOutputsUnspendable()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7225055",
      "id" : 7225055,
      "original_commit_id" : "74f3320520081086c1118e3bd98fd0fd8effeaef",
      "original_position" : 12,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3143",
      "updated_at" : "2013-10-26T10:23:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/7225055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7225394"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/7225394"
         }
      },
      "body" : "Ooops!\r\n\r\nYeah, that patch was a bit rushed...",
      "commit_id" : "cbea442e6d8fb2b447e14fd8a527d670f76b1e68",
      "created_at" : "2013-10-25T19:12:57Z",
      "diff_hunk" : "@@ -1750,25 +1750,29 @@ bool DisconnectBlock(CBlock& block, CValidationState& state, CBlockIndex* pindex\n         const CTransaction &tx = block.vtx[i];\n         uint256 hash = tx.GetHash();\n \n-        // check that all outputs are available\n-        if (!view.HaveCoins(hash)) {\n-            fClean = fClean && error(\"DisconnectBlock() : outputs still spent? database corrupted\");\n-            view.SetCoins(hash, CCoins());\n+        // Remember that if every output of a transaction is unspendable the\n+        // correct state for the UTXO set to be in is always to not have the\n+        // transaction indexed at all.\n+        if (!tx.AllOutputsUnspendable()) {\n+            if (!view.HaveCoins(hash) & !tx.AllOutputsUnspendable()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7225394",
      "id" : 7225394,
      "original_commit_id" : "74f3320520081086c1118e3bd98fd0fd8effeaef",
      "original_position" : 12,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3143",
      "updated_at" : "2013-10-26T10:23:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/7225394",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7225428"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/7225428"
         }
      },
      "body" : "FWIW I dunno I really need to add that function to CTransaction itself; this seems like the only case where it would ever be used.",
      "commit_id" : "cbea442e6d8fb2b447e14fd8a527d670f76b1e68",
      "created_at" : "2013-10-25T19:14:04Z",
      "diff_hunk" : "@@ -1750,25 +1750,29 @@ bool DisconnectBlock(CBlock& block, CValidationState& state, CBlockIndex* pindex\n         const CTransaction &tx = block.vtx[i];\n         uint256 hash = tx.GetHash();\n \n-        // check that all outputs are available\n-        if (!view.HaveCoins(hash)) {\n-            fClean = fClean && error(\"DisconnectBlock() : outputs still spent? database corrupted\");\n-            view.SetCoins(hash, CCoins());\n+        // Remember that if every output of a transaction is unspendable the\n+        // correct state for the UTXO set to be in is always to not have the\n+        // transaction indexed at all.\n+        if (!tx.AllOutputsUnspendable()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#discussion_r7225428",
      "id" : 7225428,
      "original_commit_id" : "74f3320520081086c1118e3bd98fd0fd8effeaef",
      "original_position" : 11,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3143",
      "updated_at" : "2013-10-26T10:23:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/7225428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Fixed nits from @sipa",
      "created_at" : "2013-10-26T10:25:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27143543",
      "id" : 27143543,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3143",
      "updated_at" : "2013-10-26T10:25:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27143543",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Alternative with less code changes: move outsBlock construction to before the test, and then use outsBlock.IsPruned() instead of the loop to check whether all outputs are unspendable.",
      "created_at" : "2013-10-26T10:33:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27143646",
      "id" : 27143646,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3143",
      "updated_at" : "2013-10-26T10:33:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27143646",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Note though I haven't actually changed much at all - all the lines changed are just due to an indent.",
      "created_at" : "2013-10-26T10:36:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27143675",
      "id" : 27143675,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3143",
      "updated_at" : "2013-10-26T10:36:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27143675",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/cbea442e6d8fb2b447e14fd8a527d670f76b1e68 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2013-10-26T10:39:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27143709",
      "id" : 27143709,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3143",
      "updated_at" : "2013-10-26T10:39:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27143709",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "@petertodd Sure, but it avoids adding the extra loop for detecting the all-prunable case (and the duplicate work that is associated with it)",
      "created_at" : "2013-10-26T11:49:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27144757",
      "id" : 27144757,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3143",
      "updated_at" : "2013-10-26T11:49:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27144757",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Seems this _is_ urgent, I had to reindex now 2 times on my mainnet wallet using current master and 5 times my testnet wallet.",
      "created_at" : "2013-10-26T13:03:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27145837",
      "id" : 27145837,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3143",
      "updated_at" : "2013-10-26T13:03:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27145837",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@petertodd I sent a simpler pullreq (#3163) that should accomplish the same. Care to test it?",
      "created_at" : "2013-10-26T19:32:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27153819",
      "id" : 27153819,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3143",
      "updated_at" : "2013-10-26T19:32:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27153819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@Diapolo A reindex does not fix this (but that will let you temporarily avoid it); using -checklevel=2 is an easier workaround.",
      "created_at" : "2013-10-26T19:37:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27153924",
      "id" : 27153924,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3143",
      "updated_at" : "2013-10-26T19:37:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27153924",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "A checklevel 2 is not really a workaround here, since we still can't disconnect the block if it ends up orphaned.",
      "created_at" : "2013-10-26T20:11:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27154652",
      "id" : 27154652,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3143",
      "updated_at" : "2013-10-26T20:11:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27154652",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell An alternative to reindexing.\r\n\r\nIn case we need to reorganize away from such a block, there is indeed a problem. Though both this and #3163 should fix it.",
      "created_at" : "2013-10-26T20:14:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27154702",
      "id" : 27154702,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3143",
      "updated_at" : "2013-10-26T20:14:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27154702",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "FWIW looks like https://github.com/bitcoin/bitcoin/pull/3163 is the better solution here.\r\n\r\nWill close once that gets merged if nothing else comes up.",
      "created_at" : "2013-10-28T04:34:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3143#issuecomment-27189032",
      "id" : 27189032,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3143",
      "updated_at" : "2013-10-28T04:34:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27189032",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   }
]
