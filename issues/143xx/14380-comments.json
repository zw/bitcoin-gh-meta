[
   {
      "author_association" : "MEMBER",
      "body" : "Opening this to see if people think this is the right solution.",
      "created_at" : "2018-10-03T05:45:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-426518487",
      "id" : 426518487,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNjUxODQ4Nw==",
      "updated_at" : "2018-10-03T05:45:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/426518487",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Very nice find!",
      "created_at" : "2018-10-03T07:57:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-426545512",
      "id" : 426545512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNjU0NTUxMg==",
      "updated_at" : "2018-10-03T07:57:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/426545512",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The code wants to know the change signature size so it can figure out if it would have created change that was worthless to spend (because the spending will take more fees than the output is worth). \r\n\r\nAssuming the size is smallest plausible signature size would be conservative: it'll overvalue the change, at a risk of keeping change it could have eliminated.  I think doing that would be strictly superior to not using BnB at all, since preventing BnB will always keep change it should eliminate. \r\n\r\nSo, e.g. assuming any spend of an unknown type will take at least 32(txid)+4(vout)+4(sequence)+1(len)+64*0.25(signature) = 57 bytes would work. (don't assume my math is right. :) )",
      "created_at" : "2018-10-03T23:45:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-426839366",
      "id" : 426839366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNjgzOTM2Ng==",
      "updated_at" : "2018-10-03T23:57:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/426839366",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Hm yes I suppose you're right. Not running BnB is admitting defeat even if we actually end up being able to discard a larger value. I'll take a look at constructing something that makes a minimal segwit input weight.",
      "created_at" : "2018-10-03T23:52:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-426840639",
      "id" : 426840639,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNjg0MDYzOQ==",
      "updated_at" : "2018-10-03T23:52:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/426840639",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--32850dd3fdea838b4049e64f46995ea2-->\n| Coverage  | Change ([pull 14380](https://drahtbot.github.io/reports/coverage/bitcoin/bitcoin/14380/total.coverage/index.html)) | Reference ([master](https://drahtbot.github.io/reports/coverage/bitcoin/bitcoin/master/total.coverage/index.html))   |\n|-----------|-------------------------|--------------------|\n| Lines     | -0.0083 %            | 87.0471 %        |\n| Functions | +0.0154 %            | 84.1130 %        |\n| Branches  | +0.0057 %            | 51.5403 %        |\n",
      "created_at" : "2018-10-04T05:47:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-426892864",
      "id" : 426892864,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNjg5Mjg2NA==",
      "updated_at" : "2018-10-04T05:47:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/426892864",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r222598779"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/222598779"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`change_spend_size` is `size_t` and thus cannot be `-1` :-)",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-04T09:29:57Z",
      "diff_hunk" : "@@ -2730,6 +2728,10 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n                     nValueIn = 0;\n                     setCoins.clear();\n                     coin_selection_params.change_spend_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    // If the wallet doesn't know how to sign change output, don't rely on it\n+                    if (coin_selection_params.change_spend_size == -1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r222598779",
      "id" : 222598779,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMjU5ODc3OQ==",
      "original_commit_id" : "268f4952d9c56d8056b9ef3a6995509591ef3153",
      "original_position" : 14,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 161521938,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/222598779",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Isn't the problem that `coin_selection_params.change_spend_size` is set to `std::numeric_limits<size_t>::max() ` (`SIZE_MAX`) instead of the intended `-1` since `change_spend_size` is of type `size_t`? \r\n\r\n```\r\n[cling]$ size_t change_spend_size = -1;\r\n[cling]$ change_spend_size\r\n(unsigned long) 18446744073709551615\r\n[cling]$ (size_t)-1\r\n(unsigned long) 18446744073709551615\r\n[cling]$ #include <limits>\r\n[cling]$ std::numeric_limits<size_t>::max()\r\n(unsigned long) 18446744073709551615\r\n```\r\n\r\nThe definition of `change_spend_size`:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b012bbe358311cc4a73300ccca41b64272250277/src/wallet/wallet.h#L573\r\n\r\n`CalculateMaximumSignedInputSize(Ã¢ÂÂ¦)` returns `-1` here:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b012bbe358311cc4a73300ccca41b64272250277/src/wallet/wallet.cpp#L1510-L1520\r\n\r\nThe`change_spend_size` assignment is performed here:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b012bbe358311cc4a73300ccca41b64272250277/src/wallet/wallet.cpp#L2725\r\n\r\nRelated open pull requests in need of review:\r\n* #14252 Ã¢ÂÂ build: Run functional tests and benchmarks under the undefined behaviour sanitizer (UBSan) (includes `-fsanitize=integer` which tackles unsigned integer wraparounds (non-UB!))\r\n* #14226 Ã¢ÂÂ mempool: Fix unintended unsigned integer wraparound in `CTxMemPool::UpdateAncestorsOf(bool add, Ã¢ÂÂ¦)` when `add` is `false`\r\n* #14224 Ã¢ÂÂ Document intentional and unintentional unsigned integer overflows (wraparounds) using annotations\r\n* #11551 Ã¢ÂÂ Fix unsigned integer wrap-around in `GetBlockProofEquivalentTime`\r\n* #11535 Ã¢ÂÂ Avoid unintentional unsigned integer wraparounds\r\n\r\nPlease help reviewing those :-)",
      "created_at" : "2018-10-04T09:42:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-426953724",
      "id" : 426953724,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNjk1MzcyNA==",
      "updated_at" : "2018-10-04T11:33:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/426953724",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift yes that's why the assert is finally hit, but it's faulty logic regardless",
      "created_at" : "2018-10-05T03:40:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-427236948",
      "id" : 427236948,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzIzNjk0OA==",
      "updated_at" : "2018-10-05T03:40:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427236948",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Pushed a fix in line with @gmaxwell suggestions. It's pretty hardcoded, so I'd rather make this more programmatic, perhaps giving a \"hint\" to the dummy signer of what type it should be?",
      "created_at" : "2018-10-05T05:20:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-427249454",
      "id" : 427249454,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzI0OTQ1NA==",
      "updated_at" : "2018-10-05T05:20:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427249454",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r222907749"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/222907749"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Make this `constexpr` :-)\r\n\r\nOpt-in to internal linkage using `static` or use the unnamed namespace.",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-05T06:55:49Z",
      "diff_hunk" : "@@ -1514,13 +1514,19 @@ int64_t CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *wall\n     return GetVirtualTransactionSize(txNew);\n }\n \n+/* Prevout(32*4+4*4) + sequence(4*4) + scriptsig len(1*4) + scriptsig(22*4)\n+* witness signature(1*71) + pubkey(1*33) + witness stack extra bytes(3)\n+* converted to virtual size. This is used when estimating change spend size that\n+* the wallet doesn't own or know how to sign for. */\n+int EstimateP2SHP2WPKHInputSize() {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r222907749",
      "id" : 222907749,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMjkwNzc0OQ==",
      "original_commit_id" : "9bde981dd0a72114b8f3d4232d6bd7ad7c753e9b",
      "original_position" : 8,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 161909188,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/222907749",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r222908040"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/222908040"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Add whitespace to improve readability: `return (128 + 16 + 16 + 4 + 88 + 71 + 33 + 3) / 4;`",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-05T06:57:04Z",
      "diff_hunk" : "@@ -1514,13 +1514,19 @@ int64_t CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *wall\n     return GetVirtualTransactionSize(txNew);\n }\n \n+/* Prevout(32*4+4*4) + sequence(4*4) + scriptsig len(1*4) + scriptsig(22*4)\n+* witness signature(1*71) + pubkey(1*33) + witness stack extra bytes(3)\n+* converted to virtual size. This is used when estimating change spend size that\n+* the wallet doesn't own or know how to sign for. */\n+int EstimateP2SHP2WPKHInputSize() {\n+    return (128+16+16+4+88+71+33+3)/4;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r222908040",
      "id" : 222908040,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMjkwODA0MA==",
      "original_commit_id" : "9bde981dd0a72114b8f3d4232d6bd7ad7c753e9b",
      "original_position" : 9,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 161909466,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/222908040",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r222908122"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/222908122"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Make this implicit conversion explicit :-)",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-05T06:57:28Z",
      "diff_hunk" : "@@ -2729,7 +2735,14 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n                 if (pick_new_inputs) {\n                     nValueIn = 0;\n                     setCoins.clear();\n-                    coin_selection_params.change_spend_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    int change_spend_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    // If the wallet doesn't know how to sign change output, assume p2sh-p2wpkh\n+                    // as lower-bound to allow BnB to do it's thing\n+                    if (change_spend_size == -1) {\n+                        coin_selection_params.change_spend_size = EstimateP2SHP2WPKHInputSize();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r222908122",
      "id" : 222908122,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMjkwODEyMg==",
      "original_commit_id" : "9bde981dd0a72114b8f3d4232d6bd7ad7c753e9b",
      "original_position" : 31,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 161909583,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/222908122",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r222908151"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/222908151"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same here :-)",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-05T06:57:39Z",
      "diff_hunk" : "@@ -2729,7 +2735,14 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n                 if (pick_new_inputs) {\n                     nValueIn = 0;\n                     setCoins.clear();\n-                    coin_selection_params.change_spend_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    int change_spend_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    // If the wallet doesn't know how to sign change output, assume p2sh-p2wpkh\n+                    // as lower-bound to allow BnB to do it's thing\n+                    if (change_spend_size == -1) {\n+                        coin_selection_params.change_spend_size = EstimateP2SHP2WPKHInputSize();\n+                    } else {\n+                        coin_selection_params.change_spend_size = change_spend_size;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r222908151",
      "id" : 222908151,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMjkwODE1MQ==",
      "original_commit_id" : "9bde981dd0a72114b8f3d4232d6bd7ad7c753e9b",
      "original_position" : 33,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 161909626,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/222908151",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#14711](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14711.html) (Remove uses of chainActive and mapBlockIndex in wallet code by ryanofsky)\n* [#10973](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/10973.html) (Refactor: separate wallet from node by ryanofsky)\n* [#10102](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/10102.html) ([experimental] Multiprocess bitcoin by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-10-05T10:47:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-427322704",
      "id" : 427322704,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzMyMjcwNA==",
      "updated_at" : "2018-11-26T23:34:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427322704",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2018-10-05T22:42:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-427517552",
      "id" : 427517552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzUxNzU1Mg==",
      "updated_at" : "2018-10-05T22:42:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427517552",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated the PR to use a function that uses DummySigner flow with an arbitrary valid pubkey as the P2SH-P2WPKH target to estimate the size more programatically.",
      "created_at" : "2018-10-06T05:23:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-427547609",
      "id" : 427547609,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzU0NzYwOQ==",
      "updated_at" : "2018-10-06T08:31:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427547609",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r223206667"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/223206667"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We should handle the case of `-1` here too, or if `CalculateNestedKeyhashInputSize` is guaranteed to never return negative values it should return an unsigned type? :-)",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-07T09:31:50Z",
      "diff_hunk" : "@@ -2729,7 +2762,14 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n                 if (pick_new_inputs) {\n                     nValueIn = 0;\n                     setCoins.clear();\n-                    coin_selection_params.change_spend_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    int change_spend_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    // If the wallet doesn't know how to sign change output, assume p2sh-p2wpkh\n+                    // as lower-bound to allow BnB to do it's thing\n+                    if (change_spend_size == -1) {\n+                        coin_selection_params.change_spend_size = (size_t)CalculateNestedKeyhashInputSize(false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r223206667",
      "id" : 223206667,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzIwNjY2Nw==",
      "original_commit_id" : "5db87a1a141d0a52fa5934367916cbdac62b2ee9",
      "original_position" : 58,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 162283764,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/223206667",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r223233634"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/223233634"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Changed the signature to return `size_t` directly since there's no reason these things need to be signed...",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-07T23:58:39Z",
      "diff_hunk" : "@@ -2729,7 +2762,14 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n                 if (pick_new_inputs) {\n                     nValueIn = 0;\n                     setCoins.clear();\n-                    coin_selection_params.change_spend_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    int change_spend_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    // If the wallet doesn't know how to sign change output, assume p2sh-p2wpkh\n+                    // as lower-bound to allow BnB to do it's thing\n+                    if (change_spend_size == -1) {\n+                        coin_selection_params.change_spend_size = (size_t)CalculateNestedKeyhashInputSize(false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r223233634",
      "id" : 223233634,
      "in_reply_to_id" : 223206667,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzIzMzYzNA==",
      "original_commit_id" : "5db87a1a141d0a52fa5934367916cbdac62b2ee9",
      "original_position" : 58,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 162310728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/223233634",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r223254018"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/223254018"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Then the cast can be removed? :-)",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-08T06:04:21Z",
      "diff_hunk" : "@@ -2729,7 +2762,14 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n                 if (pick_new_inputs) {\n                     nValueIn = 0;\n                     setCoins.clear();\n-                    coin_selection_params.change_spend_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    int change_spend_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    // If the wallet doesn't know how to sign change output, assume p2sh-p2wpkh\n+                    // as lower-bound to allow BnB to do it's thing\n+                    if (change_spend_size == -1) {\n+                        coin_selection_params.change_spend_size = (size_t)CalculateNestedKeyhashInputSize(false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r223254018",
      "id" : 223254018,
      "in_reply_to_id" : 223206667,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzI1NDAxOA==",
      "original_commit_id" : "5db87a1a141d0a52fa5934367916cbdac62b2ee9",
      "original_position" : 58,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 162334779,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/223254018",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r223266060"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/223266060"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-08T07:24:49Z",
      "diff_hunk" : "@@ -2729,7 +2762,14 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n                 if (pick_new_inputs) {\n                     nValueIn = 0;\n                     setCoins.clear();\n-                    coin_selection_params.change_spend_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    int change_spend_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    // If the wallet doesn't know how to sign change output, assume p2sh-p2wpkh\n+                    // as lower-bound to allow BnB to do it's thing\n+                    if (change_spend_size == -1) {\n+                        coin_selection_params.change_spend_size = (size_t)CalculateNestedKeyhashInputSize(false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r223266060",
      "id" : 223266060,
      "in_reply_to_id" : 223206667,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzI2NjA2MA==",
      "original_commit_id" : "5db87a1a141d0a52fa5934367916cbdac62b2ee9",
      "original_position" : 58,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 162349124,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/223266060",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r223284771"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/223284771"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: typo in comment",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-08T08:35:44Z",
      "diff_hunk" : "@@ -168,6 +168,9 @@ def run_test(self):\n             assert tx_in[\"sequence\"] > MAX_BIP125_RBF_SEQUENCE\n         assert_equal(decoded_psbt[\"tx\"][\"locktime\"], 0)\n \n+        # Make sure change address wallet does not have P2SH innerscript access to results in success",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r223284771",
      "id" : 223284771,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzI4NDc3MQ==",
      "original_commit_id" : "198830e06bf4560cfb962e29c73c5b1357d90b37",
      "original_position" : 4,
      "path" : "test/functional/rpc_psbt.py",
      "position" : 4,
      "pull_request_review_id" : 162371290,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/223284771",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 198830e06bf4560cfb962e29c73c5b1357d90b37",
      "created_at" : "2018-10-09T00:49:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-428023776",
      "id" : 428023776,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyODAyMzc3Ng==",
      "updated_at" : "2018-10-09T00:49:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/428023776",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "~How about a higher-level test exhibiting the original failure/assert condition? Absent that we don't have regression coverage or direct failure exhibition.~\r\nNever mind! The `test/functional/rpc_psbt.py` change covers this.",
      "created_at" : "2018-10-09T02:36:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-428040029",
      "id" : 428040029,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyODA0MDAyOQ==",
      "updated_at" : "2018-10-09T02:57:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/428040029",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r223546693"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/223546693"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: If this is exposed here for testing, declaring it `extern` in the test file instead will reduce the internal surface area",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-09T02:41:10Z",
      "diff_hunk" : "@@ -1200,4 +1200,7 @@ class WalletRescanReserver\n // be IsAllFromMe).\n int64_t CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *wallet, bool use_max_sig = false);\n int64_t CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *wallet, const std::vector<CTxOut>& txouts, bool use_max_sig = false);\n+\n+// Calculate the size of a single input of type P2SH-P2WPKH\n+size_t CalculateNestedKeyhashInputSize(bool use_max_sig = false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r223546693",
      "id" : 223546693,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzU0NjY5Mw==",
      "original_commit_id" : "198830e06bf4560cfb962e29c73c5b1357d90b37",
      "original_position" : 6,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 162699638,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/223546693",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The functional test could be better explained: We need it to try BnB coin selection with a change output that is a script that it doesn't have knowledge of.",
      "created_at" : "2018-10-09T02:45:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-428041306",
      "id" : 428041306,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyODA0MTMwNg==",
      "updated_at" : "2018-10-09T02:45:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/428041306",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Does this fix #14401 ?",
      "created_at" : "2018-10-13T07:45:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-429519838",
      "id" : 429519838,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTUxOTgzOA==",
      "updated_at" : "2018-10-13T07:45:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429519838",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MeshCollider yes I believe so",
      "created_at" : "2018-10-15T12:17:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-429829991",
      "id" : 429829991,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyOTgyOTk5MQ==",
      "updated_at" : "2018-10-15T12:17:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429829991",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r225814476"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225814476"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is this function just returning one of two integers that could be precomputed? If so, this seems a bit excessive.\r\n\r\nYou could leave the function as a comment to show it was computed.",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-17T07:52:19Z",
      "diff_hunk" : "@@ -1514,13 +1514,46 @@ int64_t CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *wall\n     return GetVirtualTransactionSize(txNew);\n }\n \n+size_t CalculateNestedKeyhashInputSize(bool use_max_sig)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r225814476",
      "id" : 225814476,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNTgxNDQ3Ng==",
      "original_commit_id" : "198830e06bf4560cfb962e29c73c5b1357d90b37",
      "original_position" : 4,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 165495006,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225814476",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226035958"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226035958"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Longer-term I was hoping to have utility functions for various sorts of standard input types.\r\n\r\n> You could leave the function as a comment to show it was computed.\r\n\r\nSorry I'm not quite parsing what you mean here.",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-17T17:59:33Z",
      "diff_hunk" : "@@ -1514,13 +1514,46 @@ int64_t CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *wall\n     return GetVirtualTransactionSize(txNew);\n }\n \n+size_t CalculateNestedKeyhashInputSize(bool use_max_sig)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226035958",
      "id" : 226035958,
      "in_reply_to_id" : 225814476,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNjAzNTk1OA==",
      "original_commit_id" : "198830e06bf4560cfb962e29c73c5b1357d90b37",
      "original_position" : 4,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 165762590,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226035958",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226155346"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226155346"
         }
      },
      "author_association" : "MEMBER",
      "body" : "A related suggestion: you could directly return the expected literal in this method, then move this implementation code to a test which asserts that the production code returns the same value produced by the current implementation here. Would be good then to reference the test here in a comment to explain the literal result. That way the association between complete implementation and literal optimization is self-enforcing going forward.",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-18T02:58:41Z",
      "diff_hunk" : "@@ -1514,13 +1514,46 @@ int64_t CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *wall\n     return GetVirtualTransactionSize(txNew);\n }\n \n+size_t CalculateNestedKeyhashInputSize(bool use_max_sig)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226155346",
      "id" : 226155346,
      "in_reply_to_id" : 225814476,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNjE1NTM0Ng==",
      "original_commit_id" : "198830e06bf4560cfb962e29c73c5b1357d90b37",
      "original_position" : 4,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 165909140,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226155346",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226450533"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226450533"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That's actually quite reasonable, thank you.",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-18T20:17:52Z",
      "diff_hunk" : "@@ -1514,13 +1514,46 @@ int64_t CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *wall\n     return GetVirtualTransactionSize(txNew);\n }\n \n+size_t CalculateNestedKeyhashInputSize(bool use_max_sig)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226450533",
      "id" : 226450533,
      "in_reply_to_id" : 225814476,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNjQ1MDUzMw==",
      "original_commit_id" : "198830e06bf4560cfb962e29c73c5b1357d90b37",
      "original_position" : 4,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 166277186,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226450533",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "updated with @Empact suggestion to move the explicit calculation to unit tests instead.",
      "created_at" : "2018-10-18T20:50:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-431157870",
      "id" : 431157870,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMTE1Nzg3MA==",
      "updated_at" : "2018-10-18T20:50:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/431157870",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226813237"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226813237"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This constant isn't used anywhere, is that intentional?",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-20T02:10:55Z",
      "diff_hunk" : "@@ -64,6 +64,10 @@ static const bool DEFAULT_WALLET_RBF = false;\n static const bool DEFAULT_WALLETBROADCAST = true;\n static const bool DEFAULT_DISABLE_WALLET = false;\n \n+//! Pre-calculated constants for input size estimation in *virtual size*\n+static constexpr size_t DUMMY_NESTED_P2WPKH_INPUT_SIZE = 91;\n+static constexpr size_t DUMMY_NESTED_P2WPKH_INPUT_SIZE_MAX = 91;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226813237",
      "id" : 226813237,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNjgxMzIzNw==",
      "original_commit_id" : "f038b637c7a2c1144af7b953d029687d82bcf415",
      "original_position" : 6,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 166734614,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226813237",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226813724"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226813724"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could you elaborate on this rounding in the comment? I found the equality surprising, but then IÃ¢ÂÂm not well-versed in the protocol.",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-20T02:32:15Z",
      "diff_hunk" : "@@ -384,4 +385,47 @@ BOOST_FIXTURE_TEST_CASE(wallet_disableprivkeys, TestChain100Setup)\n     BOOST_CHECK(!wallet->GetKeyFromPool(pubkey, false));\n }\n \n+// Explicit calculation which is used to test the wallet constant\n+size_t CalculateNestedKeyhashInputSize(bool use_max_sig)\n+{\n+    // Generate ephemeral valid pubkey\n+    CKey key;\n+    key.MakeNewKey(true);\n+    CPubKey pubkey = key.GetPubKey();\n+\n+    // Generate pubkey hash\n+    uint160 key_hash(Hash160(pubkey.begin(), pubkey.end()));\n+\n+    // Create inner-script to enter into keystore. Key hash can't be 0...\n+    CScript inner_script = CScript() << OP_0 << std::vector<unsigned char>(key_hash.begin(), key_hash.end());\n+\n+    // Create outer P2SH script for the output\n+    uint160 script_id(Hash160(inner_script.begin(), inner_script.end()));\n+    CScript script_pubkey = CScript() << OP_HASH160 << std::vector<unsigned char>(script_id.begin(), script_id.end()) << OP_EQUAL;\n+\n+    // Add inner-script to key store and key to watchonly\n+    CBasicKeyStore keystore;\n+    keystore.AddCScript(inner_script);\n+    keystore.AddKeyPubKey(key, pubkey);\n+\n+    // Fill in dummy signatures for fee calculation.\n+    SignatureData sig_data;\n+\n+    if (!ProduceSignature(keystore, use_max_sig ? DUMMY_MAXIMUM_SIGNATURE_CREATOR : DUMMY_SIGNATURE_CREATOR, script_pubkey, sig_data)) {\n+        // We're hand-feeding it correct arguments; shouldn't happen\n+        assert(false);\n+    }\n+\n+    CTxIn tx_in;\n+    UpdateInput(tx_in, sig_data);\n+    return (size_t)GetVirtualTransactionInputSize(tx_in);\n+}\n+\n+BOOST_FIXTURE_TEST_CASE(dummy_input_size_test, TestChain100Setup)\n+{\n+    BOOST_CHECK_EQUAL(CalculateNestedKeyhashInputSize(false), DUMMY_NESTED_P2WPKH_INPUT_SIZE);\n+    // Same virtual size due to rounding",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226813724",
      "id" : 226813724,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNjgxMzcyNA==",
      "original_commit_id" : "f038b637c7a2c1144af7b953d029687d82bcf415",
      "original_position" : 51,
      "path" : "src/wallet/test/wallet_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 166735180,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226813724",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226813737"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226813737"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The declaration could be a better place to provide the explanation.",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-20T02:33:16Z",
      "diff_hunk" : "@@ -384,4 +385,47 @@ BOOST_FIXTURE_TEST_CASE(wallet_disableprivkeys, TestChain100Setup)\n     BOOST_CHECK(!wallet->GetKeyFromPool(pubkey, false));\n }\n \n+// Explicit calculation which is used to test the wallet constant\n+size_t CalculateNestedKeyhashInputSize(bool use_max_sig)\n+{\n+    // Generate ephemeral valid pubkey\n+    CKey key;\n+    key.MakeNewKey(true);\n+    CPubKey pubkey = key.GetPubKey();\n+\n+    // Generate pubkey hash\n+    uint160 key_hash(Hash160(pubkey.begin(), pubkey.end()));\n+\n+    // Create inner-script to enter into keystore. Key hash can't be 0...\n+    CScript inner_script = CScript() << OP_0 << std::vector<unsigned char>(key_hash.begin(), key_hash.end());\n+\n+    // Create outer P2SH script for the output\n+    uint160 script_id(Hash160(inner_script.begin(), inner_script.end()));\n+    CScript script_pubkey = CScript() << OP_HASH160 << std::vector<unsigned char>(script_id.begin(), script_id.end()) << OP_EQUAL;\n+\n+    // Add inner-script to key store and key to watchonly\n+    CBasicKeyStore keystore;\n+    keystore.AddCScript(inner_script);\n+    keystore.AddKeyPubKey(key, pubkey);\n+\n+    // Fill in dummy signatures for fee calculation.\n+    SignatureData sig_data;\n+\n+    if (!ProduceSignature(keystore, use_max_sig ? DUMMY_MAXIMUM_SIGNATURE_CREATOR : DUMMY_SIGNATURE_CREATOR, script_pubkey, sig_data)) {\n+        // We're hand-feeding it correct arguments; shouldn't happen\n+        assert(false);\n+    }\n+\n+    CTxIn tx_in;\n+    UpdateInput(tx_in, sig_data);\n+    return (size_t)GetVirtualTransactionInputSize(tx_in);\n+}\n+\n+BOOST_FIXTURE_TEST_CASE(dummy_input_size_test, TestChain100Setup)\n+{\n+    BOOST_CHECK_EQUAL(CalculateNestedKeyhashInputSize(false), DUMMY_NESTED_P2WPKH_INPUT_SIZE);\n+    // Same virtual size due to rounding",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226813737",
      "id" : 226813737,
      "in_reply_to_id" : 226813724,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNjgxMzczNw==",
      "original_commit_id" : "f038b637c7a2c1144af7b953d029687d82bcf415",
      "original_position" : 51,
      "path" : "src/wallet/test/wallet_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 166735180,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226813737",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226813816"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226813816"
         }
      },
      "author_association" : "MEMBER",
      "body" : "As of now, it can be removed as the method is now in the wallet_tests file.",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-20T02:37:34Z",
      "diff_hunk" : "@@ -1200,4 +1200,7 @@ class WalletRescanReserver\n // be IsAllFromMe).\n int64_t CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *wallet, bool use_max_sig = false);\n int64_t CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *wallet, const std::vector<CTxOut>& txouts, bool use_max_sig = false);\n+\n+// Calculate the size of a single input of type P2SH-P2WPKH\n+size_t CalculateNestedKeyhashInputSize(bool use_max_sig = false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226813816",
      "id" : 226813816,
      "in_reply_to_id" : 223546693,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNjgxMzgxNg==",
      "original_commit_id" : "198830e06bf4560cfb962e29c73c5b1357d90b37",
      "original_position" : 6,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 166735180,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226813816",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226813832"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226813832"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: could be static",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-20T02:37:51Z",
      "diff_hunk" : "@@ -384,4 +385,47 @@ BOOST_FIXTURE_TEST_CASE(wallet_disableprivkeys, TestChain100Setup)\n     BOOST_CHECK(!wallet->GetKeyFromPool(pubkey, false));\n }\n \n+// Explicit calculation which is used to test the wallet constant\n+size_t CalculateNestedKeyhashInputSize(bool use_max_sig)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226813832",
      "id" : 226813832,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNjgxMzgzMg==",
      "original_commit_id" : "f038b637c7a2c1144af7b953d029687d82bcf415",
      "original_position" : 13,
      "path" : "src/wallet/test/wallet_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 166735180,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226813832",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226814111"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226814111"
         }
      },
      "author_association" : "MEMBER",
      "body" : "As of now Ã¢ÂÂ_MAXÃ¢ÂÂ is used in wallet_tests... could maybe do without it (given equality), with further commenting.",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-10-20T02:44:13Z",
      "diff_hunk" : "@@ -64,6 +64,10 @@ static const bool DEFAULT_WALLET_RBF = false;\n static const bool DEFAULT_WALLETBROADCAST = true;\n static const bool DEFAULT_DISABLE_WALLET = false;\n \n+//! Pre-calculated constants for input size estimation in *virtual size*\n+static constexpr size_t DUMMY_NESTED_P2WPKH_INPUT_SIZE = 91;\n+static constexpr size_t DUMMY_NESTED_P2WPKH_INPUT_SIZE_MAX = 91;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r226814111",
      "id" : 226814111,
      "in_reply_to_id" : 226813237,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNjgxNDExMQ==",
      "original_commit_id" : "f038b637c7a2c1144af7b953d029687d82bcf415",
      "original_position" : 6,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 166735180,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T18:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226814111",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2018-11-10T04:42:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-437557918",
      "id" : 437557918,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNzU1NzkxOA==",
      "updated_at" : "2018-11-10T04:42:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/437557918",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased, just a test conflict",
      "created_at" : "2018-11-12T18:12:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-437978195",
      "id" : 437978195,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNzk3ODE5NQ==",
      "updated_at" : "2018-11-12T18:12:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/437978195",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r232802864"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232802864"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: how about `Estimated nested input size in *virtual size*, see CalculateNestedKeyhashInputSize`",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-11-12T20:34:59Z",
      "diff_hunk" : "@@ -85,6 +85,9 @@ static const bool DEFAULT_WALLET_RBF = false;\n static const bool DEFAULT_WALLETBROADCAST = true;\n static const bool DEFAULT_DISABLE_WALLET = false;\n \n+//! Pre-calculated constants for input size estimation in *virtual size*",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r232802864",
      "id" : 232802864,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjgwMjg2NA==",
      "original_commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "original_position" : 4,
      "path" : "src/wallet/wallet.h",
      "position" : 4,
      "pull_request_review_id" : 174082338,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-12T20:34:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232802864",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 0fb2e69",
      "created_at" : "2018-11-12T20:35:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-438019897",
      "id" : 438019897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzODAxOTg5Nw==",
      "updated_at" : "2018-11-12T20:35:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/438019897",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-11-14T23:07:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-438853192",
      "id" : 438853192,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzODg1MzE5Mg==",
      "updated_at" : "2018-11-14T23:07:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/438853192",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK 0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-11-28T20:27:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#issuecomment-442592758",
      "id" : 442592758,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14380",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MjU5Mjc1OA==",
      "updated_at" : "2018-11-28T20:27:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/442592758",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "node_id" : "MDQ6VXNlcjY0OTI0Ng==",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r237294657"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/237294657"
         }
      },
      "author_association" : "MEMBER",
      "body" : "not fixed. Suggest something like \"Make sure that the wallet can successfully create a funded psbt when it isn't able to sign for the change output\" or similar.",
      "commit_id" : "0fb2e69815bd5146e601a7fd3585f21a1fdd6f5d",
      "created_at" : "2018-11-28T22:56:25Z",
      "diff_hunk" : "@@ -168,6 +168,9 @@ def run_test(self):\n             assert tx_in[\"sequence\"] > MAX_BIP125_RBF_SEQUENCE\n         assert_equal(decoded_psbt[\"tx\"][\"locktime\"], 0)\n \n+        # Make sure change address wallet does not have P2SH innerscript access to results in success",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14380#discussion_r237294657",
      "id" : 237294657,
      "in_reply_to_id" : 223284771,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNzI5NDY1Nw==",
      "original_commit_id" : "198830e06bf4560cfb962e29c73c5b1357d90b37",
      "original_position" : 4,
      "path" : "test/functional/rpc_psbt.py",
      "position" : 4,
      "pull_request_review_id" : 179558406,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14380",
      "updated_at" : "2018-11-28T22:57:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/237294657",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
