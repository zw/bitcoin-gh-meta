[
   {
      "author_association" : "MEMBER",
      "body" : "Please provide a `debug.log` as well as:\r\n> How reliably can you reproduce the issue, what are the steps to do so?\r\n> What type of machine are you observing the error on (OS/CPU and disk type)?",
      "created_at" : "2018-09-28T10:42:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14345#issuecomment-425396980",
      "id" : 425396980,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14345",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNTM5Njk4MA==",
      "updated_at" : "2018-09-28T10:42:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/425396980",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "[debug.log](https://github.com/bitcoin/bitcoin/files/2430328/debug.log)\r\n\r\n> How reliably can you reproduce the issue, what are the steps to do so?\r\n\r\nFrequently. I left the daemon running for a while, later `screen -r` back, I see\r\n![image](https://user-images.githubusercontent.com/5824517/46241683-49676100-c372-11e8-9bb0-7799021b5ed2.png)\r\n\r\n> What type of machine are you observing the error on (OS/CPU and disk type)?\r\n```\r\n[ec2-user@ip-172-31-23-227 ~]$ lscpu\r\nArchitecture:        x86_64\r\nCPU op-mode(s):      32-bit, 64-bit\r\nByte Order:          Little Endian\r\nCPU(s):              1\r\nOn-line CPU(s) list: 0\r\nThread(s) per core:  1\r\nCore(s) per socket:  1\r\nSocket(s):           1\r\nNUMA node(s):        1\r\nVendor ID:           GenuineIntel\r\nCPU family:          6\r\nModel:               63\r\nModel name:          Intel(R) Xeon(R) CPU E5-2676 v3 @ 2.40GHz\r\nStepping:            2\r\nCPU MHz:             2400.261\r\nBogoMIPS:            4800.08\r\nHypervisor vendor:   Xen\r\nVirtualization type: full\r\nL1d cache:           32K\r\nL1i cache:           32K\r\nL2 cache:            256K\r\nL3 cache:            30720K\r\nNUMA node0 CPU(s):   0\r\nFlags:               fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl xtopology cpuid pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm cpuid_fault invpcid_single pti fsgsbase bmi1 avx2 smep bmi2 erms invpcid xsaveopt\r\n```",
      "created_at" : "2018-09-29T06:01:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14345#issuecomment-425619033",
      "id" : 425619033,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14345",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNTYxOTAzMw==",
      "updated_at" : "2018-09-29T06:02:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/425619033",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/5824517?v=4",
         "events_url" : "https://api.github.com/users/lzl124631x/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lzl124631x/followers",
         "following_url" : "https://api.github.com/users/lzl124631x/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lzl124631x/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lzl124631x",
         "id" : 5824517,
         "login" : "lzl124631x",
         "node_id" : "MDQ6VXNlcjU4MjQ1MTc=",
         "organizations_url" : "https://api.github.com/users/lzl124631x/orgs",
         "received_events_url" : "https://api.github.com/users/lzl124631x/received_events",
         "repos_url" : "https://api.github.com/users/lzl124631x/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lzl124631x/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lzl124631x/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lzl124631x"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Oh. I see this issue.\r\n\r\n```\r\n2018-09-29 06:14:47 UpdateTip: new best=0000000000000011281e473dc5da50b772eb972c689741a99c576eaeaac7895d height=261460 version=0x00000002 log2_work=72.423216 tx=24818113 date='2013-10-03 11:25:13' progress=0.067093 cache=565.3MiB(4355665txo)\r\n2018-09-29 06:14:47 UpdateTip: new best=000000000000001a849f50c9ac539d295071deaf6d6e24b6e8d1c7856c4fdb0f height=261461 version=0x00000002 log2_work=72.423361 tx=24818228 date='2013-10-03 11:26:34' progress=0.067093 cache=565.3MiB(4355673txo)\r\n2018-09-29 06:14:47 Error: Out of memory. Terminating.\r\n```\r\nSo `btcd` will increase mem usage as time goes on?\r\n```\r\n[ec2-user@ip-172-31-23-227 ~]$ free -m\r\n              total        used        free      shared  buff/cache   available\r\nMem:            987          46         823           0         117         805\r\nSwap:             0           0           0\r\n\r\n```\r\nAfter I start `bitcoind` for a while\r\n```\r\n[ec2-user@ip-172-31-23-227 ~]$ free -m\r\n              total        used        free      shared  buff/cache   available\r\nMem:            987         375          63           0         548         463\r\nSwap:             0           0           0\r\n```\r\nLater\r\n```\r\n[ec2-user@ip-172-31-23-227 ~]$ free -m\r\n              total        used        free      shared  buff/cache   available\r\nMem:            987         860          60           0          66          16\r\nSwap:             0           0           0\r\n```\r\nShould I simply change to a VM with bigger memory? Is there a cap for the mem usage?",
      "created_at" : "2018-09-29T06:59:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14345#issuecomment-425622161",
      "id" : 425622161,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14345",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNTYyMjE2MQ==",
      "updated_at" : "2018-09-29T07:13:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/425622161",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/5824517?v=4",
         "events_url" : "https://api.github.com/users/lzl124631x/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lzl124631x/followers",
         "following_url" : "https://api.github.com/users/lzl124631x/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lzl124631x/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lzl124631x",
         "id" : 5824517,
         "login" : "lzl124631x",
         "node_id" : "MDQ6VXNlcjU4MjQ1MTc=",
         "organizations_url" : "https://api.github.com/users/lzl124631x/orgs",
         "received_events_url" : "https://api.github.com/users/lzl124631x/received_events",
         "repos_url" : "https://api.github.com/users/lzl124631x/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lzl124631x/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lzl124631x/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lzl124631x"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Oh. I see this issue.\r\n> \r\n> ```\r\n> 2018-09-29 06:14:47 UpdateTip: new best=0000000000000011281e473dc5da50b772eb972c689741a99c576eaeaac7895d height=261460 version=0x00000002 log2_work=72.423216 tx=24818113 date='2013-10-03 11:25:13' progress=0.067093 cache=565.3MiB(4355665txo)\r\n> 2018-09-29 06:14:47 UpdateTip: new best=000000000000001a849f50c9ac539d295071deaf6d6e24b6e8d1c7856c4fdb0f height=261461 version=0x00000002 log2_work=72.423361 tx=24818228 date='2013-10-03 11:26:34' progress=0.067093 cache=565.3MiB(4355673txo)\r\n> 2018-09-29 06:14:47 Error: Out of memory. Terminating.\r\n> ```\r\n\r\nhave you tried reducing the `dbcache` option?  try 128 or 256\r\n\r\n`bitcoind -dbcache=128`\r\n\r\nor add `dbcache=128` into `bitcoin.conf`",
      "created_at" : "2018-09-30T16:37:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14345#issuecomment-425733607",
      "id" : 425733607,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14345",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNTczMzYwNw==",
      "updated_at" : "2018-09-30T16:40:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/425733607",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/19870044?v=4",
         "events_url" : "https://api.github.com/users/hairetikos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hairetikos/followers",
         "following_url" : "https://api.github.com/users/hairetikos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hairetikos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hairetikos",
         "id" : 19870044,
         "login" : "hairetikos",
         "node_id" : "MDQ6VXNlcjE5ODcwMDQ0",
         "organizations_url" : "https://api.github.com/users/hairetikos/orgs",
         "received_events_url" : "https://api.github.com/users/hairetikos/received_events",
         "repos_url" : "https://api.github.com/users/hairetikos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hairetikos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hairetikos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hairetikos"
      }
   }
]
