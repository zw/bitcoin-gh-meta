[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20264839"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20264839"
         }
      },
      "body" : "Won't AcceptToMemoryPool short-circuit since it's already in there? (irrelevant if the short-circuit returns true or false)",
      "commit_id" : "34318d7fad7922ce56ff47908ff70e2c8a42ee56",
      "created_at" : "2014-11-13T00:36:34Z",
      "diff_hunk" : "@@ -1844,10 +1844,10 @@ bool static DisconnectTip(CValidationState &state) {\n         // ignore validation errors in resurrected transactions\n         list<CTransaction> removed;\n         CValidationState stateDummy;\n-        if (!tx.IsCoinBase())\n-            if (!AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n-                mempool.remove(tx, removed, true);\n+        if (tx.IsCoinBase() || !AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n+            mempool.remove(tx, removed, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20264839",
      "id" : 20264839,
      "original_commit_id" : "d0608f623ab6d5d0d5031629e0e78d57c07fe3d2",
      "original_position" : 8,
      "path" : "src/main.cpp",
      "position" : 8,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267",
      "updated_at" : "2014-12-08T22:10:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20264839",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20264899"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20264899"
         }
      },
      "body" : "Why would they be immature? In the rare event of a reorg-to-chain-with-more-work-but-less-height?",
      "commit_id" : "34318d7fad7922ce56ff47908ff70e2c8a42ee56",
      "created_at" : "2014-11-13T00:37:51Z",
      "diff_hunk" : "@@ -445,6 +446,31 @@ void CTxMemPool::remove(const CTransaction &tx, std::list<CTransaction>& removed\n     }\n }\n \n+void CTxMemPool::removeCoinbaseSpends(const CCoinsViewCache *pcoins, unsigned int nMemPoolHeight)\n+{\n+    // Remove transactions spending a coinbase which are now immature",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20264899",
      "id" : 20264899,
      "original_commit_id" : "d0608f623ab6d5d0d5031629e0e78d57c07fe3d2",
      "original_position" : 14,
      "path" : "src/txmempool.cpp",
      "position" : 59,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267",
      "updated_at" : "2014-12-08T22:10:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20264899",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20264996"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20264996"
         }
      },
      "body" : "Yes, and to keep mempool consistent during reorgs.",
      "commit_id" : "34318d7fad7922ce56ff47908ff70e2c8a42ee56",
      "created_at" : "2014-11-13T00:40:28Z",
      "diff_hunk" : "@@ -445,6 +446,31 @@ void CTxMemPool::remove(const CTransaction &tx, std::list<CTransaction>& removed\n     }\n }\n \n+void CTxMemPool::removeCoinbaseSpends(const CCoinsViewCache *pcoins, unsigned int nMemPoolHeight)\n+{\n+    // Remove transactions spending a coinbase which are now immature",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20264996",
      "id" : 20264996,
      "original_commit_id" : "d0608f623ab6d5d0d5031629e0e78d57c07fe3d2",
      "original_position" : 14,
      "path" : "src/txmempool.cpp",
      "position" : 59,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267",
      "updated_at" : "2014-12-08T22:10:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20264996",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20265016"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20265016"
         }
      },
      "body" : "Huh? The AcceptToMemoryPool is returning the tx that is being resurrected.",
      "commit_id" : "34318d7fad7922ce56ff47908ff70e2c8a42ee56",
      "created_at" : "2014-11-13T00:41:02Z",
      "diff_hunk" : "@@ -1844,10 +1844,10 @@ bool static DisconnectTip(CValidationState &state) {\n         // ignore validation errors in resurrected transactions\n         list<CTransaction> removed;\n         CValidationState stateDummy;\n-        if (!tx.IsCoinBase())\n-            if (!AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n-                mempool.remove(tx, removed, true);\n+        if (tx.IsCoinBase() || !AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n+            mempool.remove(tx, removed, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20265016",
      "id" : 20265016,
      "original_commit_id" : "d0608f623ab6d5d0d5031629e0e78d57c07fe3d2",
      "original_position" : 8,
      "path" : "src/main.cpp",
      "position" : 8,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267",
      "updated_at" : "2014-12-08T22:10:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20265016",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20268267"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20268267"
         }
      },
      "body" : "AcceptToMemoryPool isn't returning any tx, it's trying to add the already-set-variable tx to the memory pool.",
      "commit_id" : "34318d7fad7922ce56ff47908ff70e2c8a42ee56",
      "created_at" : "2014-11-13T01:57:39Z",
      "diff_hunk" : "@@ -1844,10 +1844,10 @@ bool static DisconnectTip(CValidationState &state) {\n         // ignore validation errors in resurrected transactions\n         list<CTransaction> removed;\n         CValidationState stateDummy;\n-        if (!tx.IsCoinBase())\n-            if (!AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n-                mempool.remove(tx, removed, true);\n+        if (tx.IsCoinBase() || !AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n+            mempool.remove(tx, removed, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20268267",
      "id" : 20268267,
      "original_commit_id" : "d0608f623ab6d5d0d5031629e0e78d57c07fe3d2",
      "original_position" : 8,
      "path" : "src/main.cpp",
      "position" : 8,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267",
      "updated_at" : "2014-12-08T22:10:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20268267",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20268354"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20268354"
         }
      },
      "body" : "AcceptToMemoryPool is returning the tx to the mempool (ie is doing the resurrecting), sorry that comment was entirely unclear.",
      "commit_id" : "34318d7fad7922ce56ff47908ff70e2c8a42ee56",
      "created_at" : "2014-11-13T02:00:31Z",
      "diff_hunk" : "@@ -1844,10 +1844,10 @@ bool static DisconnectTip(CValidationState &state) {\n         // ignore validation errors in resurrected transactions\n         list<CTransaction> removed;\n         CValidationState stateDummy;\n-        if (!tx.IsCoinBase())\n-            if (!AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n-                mempool.remove(tx, removed, true);\n+        if (tx.IsCoinBase() || !AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n+            mempool.remove(tx, removed, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20268354",
      "id" : 20268354,
      "original_commit_id" : "d0608f623ab6d5d0d5031629e0e78d57c07fe3d2",
      "original_position" : 8,
      "path" : "src/main.cpp",
      "position" : 8,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267",
      "updated_at" : "2014-12-08T22:10:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20268354",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20268555"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20268555"
         }
      },
      "body" : "Got it. The mempool.remove still doesn't make sense, though...",
      "commit_id" : "34318d7fad7922ce56ff47908ff70e2c8a42ee56",
      "created_at" : "2014-11-13T02:07:44Z",
      "diff_hunk" : "@@ -1844,10 +1844,10 @@ bool static DisconnectTip(CValidationState &state) {\n         // ignore validation errors in resurrected transactions\n         list<CTransaction> removed;\n         CValidationState stateDummy;\n-        if (!tx.IsCoinBase())\n-            if (!AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n-                mempool.remove(tx, removed, true);\n+        if (tx.IsCoinBase() || !AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n+            mempool.remove(tx, removed, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20268555",
      "id" : 20268555,
      "original_commit_id" : "d0608f623ab6d5d0d5031629e0e78d57c07fe3d2",
      "original_position" : 8,
      "path" : "src/main.cpp",
      "position" : 8,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267",
      "updated_at" : "2014-12-08T22:10:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20268555",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20268706"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20268706"
         }
      },
      "body" : "I didnt change the mempool.remove??? I just made it remove dependents of a coinbase transaction by changing the conditional...",
      "commit_id" : "34318d7fad7922ce56ff47908ff70e2c8a42ee56",
      "created_at" : "2014-11-13T02:12:57Z",
      "diff_hunk" : "@@ -1844,10 +1844,10 @@ bool static DisconnectTip(CValidationState &state) {\n         // ignore validation errors in resurrected transactions\n         list<CTransaction> removed;\n         CValidationState stateDummy;\n-        if (!tx.IsCoinBase())\n-            if (!AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n-                mempool.remove(tx, removed, true);\n+        if (tx.IsCoinBase() || !AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n+            mempool.remove(tx, removed, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20268706",
      "id" : 20268706,
      "original_commit_id" : "d0608f623ab6d5d0d5031629e0e78d57c07fe3d2",
      "original_position" : 8,
      "path" : "src/main.cpp",
      "position" : 8,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267",
      "updated_at" : "2014-12-08T22:10:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20268706",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20269826"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20269826"
         }
      },
      "body" : "I'm not sure it made sense before the change either. Maybe I'm missing something.",
      "commit_id" : "34318d7fad7922ce56ff47908ff70e2c8a42ee56",
      "created_at" : "2014-11-13T02:51:59Z",
      "diff_hunk" : "@@ -1844,10 +1844,10 @@ bool static DisconnectTip(CValidationState &state) {\n         // ignore validation errors in resurrected transactions\n         list<CTransaction> removed;\n         CValidationState stateDummy;\n-        if (!tx.IsCoinBase())\n-            if (!AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n-                mempool.remove(tx, removed, true);\n+        if (tx.IsCoinBase() || !AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n+            mempool.remove(tx, removed, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20269826",
      "id" : 20269826,
      "original_commit_id" : "d0608f623ab6d5d0d5031629e0e78d57c07fe3d2",
      "original_position" : 8,
      "path" : "src/main.cpp",
      "position" : 8,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267",
      "updated_at" : "2014-12-08T22:10:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20269826",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20269887"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20269887"
         }
      },
      "body" : "Well it certainly makes sense now (ie now, if a coinbase is removed during a reorg, it will remove its dependants from mempool, which it did not use to)",
      "commit_id" : "34318d7fad7922ce56ff47908ff70e2c8a42ee56",
      "created_at" : "2014-11-13T02:53:46Z",
      "diff_hunk" : "@@ -1844,10 +1844,10 @@ bool static DisconnectTip(CValidationState &state) {\n         // ignore validation errors in resurrected transactions\n         list<CTransaction> removed;\n         CValidationState stateDummy;\n-        if (!tx.IsCoinBase())\n-            if (!AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n-                mempool.remove(tx, removed, true);\n+        if (tx.IsCoinBase() || !AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\n+            mempool.remove(tx, removed, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r20269887",
      "id" : 20269887,
      "original_commit_id" : "d0608f623ab6d5d0d5031629e0e78d57c07fe3d2",
      "original_position" : 8,
      "path" : "src/main.cpp",
      "position" : 8,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267",
      "updated_at" : "2014-12-08T22:10:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/20269887",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt Can you get this in a state where the tests pass (perhaps by delaying the enabling of large-reorg)?",
      "created_at" : "2014-11-17T14:47:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-63314571",
      "id" : 63314571,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-17T14:47:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/63314571",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Upon review... it seems to me the first immature-coinbase-in-the-mempool bug is due to this code:\r\n```\r\n   // Resurrect mempool transactions from the disconnected block.\r\n    BOOST_FOREACH(const CTransaction &tx, block.vtx) {\r\n        // ignore validation errors in resurrected transactions\r\n        list<CTransaction> removed;\r\n        CValidationState stateDummy;\r\n        if (!tx.IsCoinBase())\r\n            if (!AcceptToMemoryPool(mempool, stateDummy, tx, false, NULL))\r\n                mempool.remove(tx, removed, true);\r\n    }\r\n    mempool.check(pcoinsTip);\r\n    // Update chainActive and related variables.\r\n    UpdateTip(pindexDelete->pprev);\r\n```\r\n\r\nAcceptToMemoryPool calls CheckInputs(), which does check for coinbase maturity.\r\nSeems to me just moving UpdateTip() to before the resurrect-into-mempool loop would fix that bug.\r\n\r\nCoinbase spends right at the maturity threshold would get dropped from the mempool, but I don't think I care (our wallet code should rebroadcast the spend if it doesn't stay in a block).\r\n\r\n-----------\r\n\r\nThe other bug, a coinbase spend in the mempool that becomes immature when DisconnectTip() happens:  I think I'm ok with the proposed fix, but it feels like there might be a simpler and more robust solution-- maybe the mempool should keep a list of all coinbase-spending transactions inside it (add to that list in addUnchecked()), and remove-then-AcceptToMemoryPool all of them (and any dependents) after a DisconnectTip().\r\n\r\n-------------\r\n\r\nACK on the work queue optimization.\r\n\r\n",
      "created_at" : "2014-11-19T16:24:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-63667210",
      "id" : 63667210,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-19T16:24:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/63667210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "@gavinandresen re: first bug: its not about transactions that are in the block, its about transactions in mempool, so calling AcceptToMemoryPool on anything that is within that loop wont help, afaict.",
      "created_at" : "2014-11-19T19:31:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-63698507",
      "id" : 63698507,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-19T19:31:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/63698507",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "You don't need a large reorganization. Just connect some peers and start mining, then send some of the coinbase to each of the peers and keep mining, you will see it. The problem and solution is clear since this issue has been known since 5 years ago. :+1: ",
      "created_at" : "2014-11-24T05:49:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-64154324",
      "id" : 64154324,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-24T05:56:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/64154324",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9442594?v=3",
         "events_url" : "https://api.github.com/users/john-connor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/john-connor/followers",
         "following_url" : "https://api.github.com/users/john-connor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/john-connor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/john-connor",
         "id" : 9442594,
         "login" : "john-connor",
         "organizations_url" : "https://api.github.com/users/john-connor/orgs",
         "received_events_url" : "https://api.github.com/users/john-connor/received_events",
         "repos_url" : "https://api.github.com/users/john-connor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/john-connor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/john-connor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/john-connor"
      }
   },
   {
      "body" : "@john-connor I'd love to know what issue you're referring to here. There is certainly no way to \"send some of the coinbase to each of the peers\" and, in #2821 you seem to think it is a locking issue, but the proper locks appear to be taken in the block creation code.",
      "created_at" : "2014-11-24T06:10:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-64155126",
      "id" : 64155126,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-24T06:10:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/64155126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "FYI: I'm working on tests for these cases using @sipa's excellent invalidatblock:\r\n   https://github.com/gavinandresen/bitcoin-git/tree/coinbase_in_mempool_tests\r\n",
      "created_at" : "2014-11-24T20:24:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-64257988",
      "id" : 64257988,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-24T20:24:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/64257988",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Fails a test case I wrote:\r\n\r\n1. Spend a coinbase at depth 100+2, only in mempool (not confirmed)\r\n2. Re-org back to depth 99\r\n\r\nEXPECT: mempool empty\r\nRESULT: mempool contains the spend\r\n\r\nSee https://github.com/gavinandresen/bitcoin-git/commit/24eba4feffd29c0bee3e2296f04ed789b0b715f7 for code. (spend_101 is the transaction that is being left in the mempool)",
      "created_at" : "2014-11-25T15:57:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-64421903",
      "id" : 64421903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-25T15:58:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/64421903",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "@TheBlueMatt I never mentioned \"locks\". Setup a testnet of N peers and start mining, let the coinbase mature spend it around to the \"loosely organized\" peers (addresses), when N or more nodes generate a block a reorganization will possibly happen leaving some of the mempool's full of (now) invalid transactions. gavinandresen's latest test results confirm my theory. So, just remove them from the mempool during a reorganization and the assert should never be hit. If do not have the mining thread running you will never hit the assert either which masks the problem. These transactions also seem to make it into the wallet.dat and they should not. I've confirmed this because the problem follows the wallet.dat file.",
      "created_at" : "2014-11-26T09:12:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-64534189",
      "id" : 64534189,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-26T09:13:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/64534189",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9442594?v=3",
         "events_url" : "https://api.github.com/users/john-connor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/john-connor/followers",
         "following_url" : "https://api.github.com/users/john-connor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/john-connor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/john-connor",
         "id" : 9442594,
         "login" : "john-connor",
         "organizations_url" : "https://api.github.com/users/john-connor/orgs",
         "received_events_url" : "https://api.github.com/users/john-connor/received_events",
         "repos_url" : "https://api.github.com/users/john-connor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/john-connor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/john-connor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/john-connor"
      }
   },
   {
      "body" : "@john-connor So...you're referring to the bug that both of these pulls fix in different ways?",
      "created_at" : "2014-11-27T01:29:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-64734500",
      "id" : 64734500,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-27T01:29:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/64734500",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Note that the failures here are only from the test-update. I spent a while trying to get it to not overrun travis' memory, and while I have one I think should work, I miscompiled it and then left and forgot to even push the source...so its gonna be till next week before I can get that updated. In any case, its been passing locally for a while, and I also added gavin's tester from #5368 on a branch with this at https://github.com/TheBlueMatt/bitcoin/commits/mempoolfix3 (which passes as well)",
      "created_at" : "2014-11-27T07:47:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-64755971",
      "id" : 64755971,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-27T07:47:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/64755971",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt These don't fix the entire problem(s) but is a start.The invalid transaction will make it into the mempool long enough to get broadcasted out to the network where it will cause further mempool pollution. So, it's still going to waste global network bandwidth. Luckily the wallet is smart enough to not allow the invalid transaction onto the network during a resend so it stops with the mempool.",
      "created_at" : "2014-11-28T01:47:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-64843717",
      "id" : 64843717,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-28T01:50:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/64843717",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9442594?v=3",
         "events_url" : "https://api.github.com/users/john-connor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/john-connor/followers",
         "following_url" : "https://api.github.com/users/john-connor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/john-connor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/john-connor",
         "id" : 9442594,
         "login" : "john-connor",
         "organizations_url" : "https://api.github.com/users/john-connor/orgs",
         "received_events_url" : "https://api.github.com/users/john-connor/received_events",
         "repos_url" : "https://api.github.com/users/john-connor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/john-connor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/john-connor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/john-connor"
      }
   },
   {
      "body" : "Huh? The transactions are valid, but become invalid during a reorg (not even after)... Each node is responsible for keeping its mempool valid, not its peers. Again, I'm really not sure what bug you're talking about. \n\nOn November 27, 2014 8:47:40 PM EST, John Connor <notifications@github.com> wrote:\n>@TheBlueMatt These don't exactly fix the problem(s). The invalid\n>transaction will make it into the mempool long enough to get\n>broadcasted out to the network where it will cause further mempool\n>pollution. So, it's still going to waste global network bandwidth.\n>\n>---\n>Reply to this email directly or view it on GitHub:\n>https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-64843717",
      "created_at" : "2014-11-28T02:21:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-64845783",
      "id" : 64845783,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-28T02:21:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/64845783",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt then we are talking about two very similar but different bugs. I'll open an issue that shows the full problem.",
      "created_at" : "2014-11-28T19:54:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-64924672",
      "id" : 64924672,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-28T19:54:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/64924672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9442594?v=3",
         "events_url" : "https://api.github.com/users/john-connor/events{/privacy}",
         "followers_url" : "https://api.github.com/users/john-connor/followers",
         "following_url" : "https://api.github.com/users/john-connor/following{/other_user}",
         "gists_url" : "https://api.github.com/users/john-connor/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/john-connor",
         "id" : 9442594,
         "login" : "john-connor",
         "organizations_url" : "https://api.github.com/users/john-connor/orgs",
         "received_events_url" : "https://api.github.com/users/john-connor/received_events",
         "repos_url" : "https://api.github.com/users/john-connor/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/john-connor/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/john-connor/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/john-connor"
      }
   },
   {
      "body" : "@gavinandresen @TheBlueMatt Just to be clear about the off-by-one: a transaction that made it into block N, can be spent at block N+100, which means with 101 confirmations (as the block it's in already counts for 1).",
      "created_at" : "2014-11-29T12:14:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-64949896",
      "id" : 64949896,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-29T12:14:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/64949896",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Hmm? The confusion actually wasn't about which block can spend an output, but about the definition of the memorial mempool's spendability requirement. \n\nOn November 29, 2014 7:14:16 AM EST, Pieter Wuille <notifications@github.com> wrote:\n>@gavinandresen @TheBlueMatt Just to be clear about the off-by-one: a\n>transaction that made it into block N, can be spent at block N+100,\n>which means with 101 confirmations (as the block it's in already counts\n>for 1).\n>\n>---\n>Reply to this email directly or view it on GitHub:\n>https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-64949896",
      "created_at" : "2014-11-29T17:56:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-64959728",
      "id" : 64959728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-11-29T17:56:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/64959728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r21057163"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/21057163"
         }
      },
      "body" : "@TheBlueMatt This declaration can be removed.",
      "commit_id" : "34318d7fad7922ce56ff47908ff70e2c8a42ee56",
      "created_at" : "2014-11-29T23:45:44Z",
      "diff_hunk" : "@@ -453,7 +459,30 @@ void CTxMemPool::remove(const CTransaction &tx, std::list<CTransaction>& removed\n     }\n }\n \n-void CTxMemPool::removeConflicts(const CTransaction &tx, std::list<CTransaction>& removed)\n+void CTxMemPool::removeCoinbaseSpends(const CCoinsViewCache *pcoins, unsigned int nMemPoolHeight)\n+{\n+    // Remove transactions spending a coinbase which are now immature\n+    LOCK(cs);\n+    list<CTransaction> transactionsToRemove;\n+    for (std::map<uint256, CTxMemPoolEntry>::const_iterator it = mapTx.begin(); it != mapTx.end(); it++) {\n+        const CTransaction& tx = it->second.GetTx();\n+        BOOST_FOREACH(const CTxIn& txin, tx.vin) {\n+            std::map<uint256, CTxMemPoolEntry>::const_iterator it2 = mapTx.find(txin.prevout.hash);\n+            if (it2 != mapTx.end())\n+                continue;\n+            const CCoins *coins = pcoins->AccessCoins(txin.prevout.hash);\n+            if (fSanityCheck) assert(coins);\n+            if (!coins || (coins->IsCoinBase() && nMemPoolHeight - coins->nHeight < COINBASE_MATURITY)) {\n+                transactionsToRemove.push_back(tx);\n+                break;\n+            }\n+        }\n+    }\n+    BOOST_FOREACH(const CTransaction& tx, transactionsToRemove)\n+        remove(tx, true);\n+}\n+\n+void CTxMemPool::removeConflicts(const CTransaction &tx)\n {\n     // Remove transactions which depend on inputs of tx, recursively\n     list<CTransaction> result;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r21057163",
      "id" : 21057163,
      "original_commit_id" : "e671008cc8678fc534d9f33202044b6e7641c27c",
      "original_position" : 80,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267",
      "updated_at" : "2014-12-08T22:10:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/21057163",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4284124?v=3",
         "events_url" : "https://api.github.com/users/dgenr8/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgenr8/followers",
         "following_url" : "https://api.github.com/users/dgenr8/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgenr8/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgenr8",
         "id" : 4284124,
         "login" : "dgenr8",
         "organizations_url" : "https://api.github.com/users/dgenr8/orgs",
         "received_events_url" : "https://api.github.com/users/dgenr8/received_events",
         "repos_url" : "https://api.github.com/users/dgenr8/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgenr8/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgenr8/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgenr8"
      }
   },
   {
      "body" : "I rebased on top of master, allowing me to pull in @gavinandresen's test from #5368 without depending on another pull req, fixed the block-tester issues, and removed the commit which got rid of the removed-tx tracking (that @dgenr8 had issues with, though I'm still not able to reproduce...I'll reintroduce that in a separate pull req).",
      "created_at" : "2014-12-04T10:07:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-65603353",
      "id" : 65603353,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-12-04T10:07:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65603353",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt If you can get Travis to succeed here, I'll reconsider, but right now this is just not mergable.",
      "created_at" : "2014-12-04T15:25:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-65647832",
      "id" : 65647832,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-12-04T15:25:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65647832",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa I said the failures are just the test-update, could easily merge without it...anyway, I removed that commit, I'll add it again via another pull.",
      "created_at" : "2014-12-04T20:11:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-65695162",
      "id" : 65695162,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-12-04T20:12:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65695162",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt Sorry, missed that. I knew that the problem was just in the tester, but really - if Travis doesn't pass, I tend to ignore it.",
      "created_at" : "2014-12-04T20:14:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-65695552",
      "id" : 65695552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-12-04T20:14:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65695552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Untested ACK; I prefer this approach over #5368, and it seems to pass the same tests.",
      "created_at" : "2014-12-05T02:00:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-65736943",
      "id" : 65736943,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-12-05T02:00:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65736943",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Untested ACK, I have no preference on which version of this makes it in.\r\n",
      "created_at" : "2014-12-05T02:23:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-65738555",
      "id" : 65738555,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-12-05T02:23:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65738555",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Rebased for dumb merge conflict (new tests in rpc-test.sh).",
      "created_at" : "2014-12-08T22:06:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-66196723",
      "id" : 66196723,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-12-08T22:06:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/66196723",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Oh, and resolved sipa's nit.",
      "created_at" : "2014-12-08T22:10:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-66197302",
      "id" : 66197302,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-12-08T22:10:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/66197302",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Which one?",
      "created_at" : "2014-12-09T14:21:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-66288906",
      "id" : 66288906,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-12-09T14:21:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/66288906",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK commithash 34318d7fad7922ce56ff47908ff70e2c8a42ee56. \r\n\r\nI have no preference which one makes it in either, #5267 or #5368. Which I suppose means that @sipa's preference for this one is the tie-breaker.\r\n([signature](https://dev.visucore.com/bitcoin/acks/5267))\r\n\r\n",
      "created_at" : "2014-12-10T07:28:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-66413868",
      "id" : 66413868,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-12-10T07:28:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/66413868",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@sipa the \"while(!thing.empty())\" vs \"while (thing.size())\" one.",
      "created_at" : "2014-12-10T07:31:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#issuecomment-66414044",
      "id" : 66414044,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5267",
      "updated_at" : "2014-12-10T07:31:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/66414044",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r21673587"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/21673587"
         }
      },
      "body" : "People may wonder about this so this const_cast needs a comment why it doesn't break expectations: the resulting child cache is never flushed so it is effectively const, and we don't have a CConstCoinsViewCache that would make this explicit.\r\n",
      "commit_id" : "34318d7fad7922ce56ff47908ff70e2c8a42ee56",
      "created_at" : "2014-12-11T12:35:29Z",
      "diff_hunk" : "@@ -513,17 +545,22 @@ void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n \n     uint64_t checkTotal = 0;\n \n+    CCoinsViewCache mempoolDuplicate(const_cast<CCoinsViewCache*>(pcoins));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5267#discussion_r21673587",
      "id" : 21673587,
      "original_commit_id" : "34318d7fad7922ce56ff47908ff70e2c8a42ee56",
      "original_position" : 89,
      "path" : "src/txmempool.cpp",
      "position" : 89,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5267",
      "updated_at" : "2014-12-11T12:35:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/21673587",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
