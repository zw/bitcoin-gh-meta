[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nThanks for working on this! Will review and test within the next days.",
      "created_at" : "2021-09-17T20:52:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23020#issuecomment-922074813",
      "id" : 922074813,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23020",
      "node_id" : "IC_kwDOABII58429b69",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-17T20:53:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/922074813",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2021-09-20T20:18:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23020#issuecomment-923264745",
      "id" : 923264745,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23020",
      "node_id" : "IC_kwDOABII5843B-bp",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-20T20:18:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/923264745",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Concept ACK\r\n\r\nThis is great! Thanks",
      "created_at" : "2021-09-21T04:47:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23020#issuecomment-923620548",
      "id" : 923620548,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23020",
      "node_id" : "IC_kwDOABII5843DVTE",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-21T04:47:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/923620548",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24482484?v=4",
         "events_url" : "https://api.github.com/users/Rspigler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Rspigler/followers",
         "following_url" : "https://api.github.com/users/Rspigler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Rspigler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Rspigler",
         "id" : 24482484,
         "login" : "Rspigler",
         "node_id" : "MDQ6VXNlcjI0NDgyNDg0",
         "organizations_url" : "https://api.github.com/users/Rspigler/orgs",
         "received_events_url" : "https://api.github.com/users/Rspigler/received_events",
         "repos_url" : "https://api.github.com/users/Rspigler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Rspigler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Rspigler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Rspigler"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nHave you considered using the gpgme library (like https://github.com/bitcoin-core/bitcoin-maintainer-tools/blob/master/gitian-verify.py#L66 does) instead of parsing gpg command text output? I tried this approach and it became an awful mess, using the library is more robust, though it does introduce another Python dependency.",
      "created_at" : "2021-09-21T10:29:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23020#issuecomment-923848127",
      "id" : 923848127,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23020",
      "node_id" : "IC_kwDOABII5843EM2_",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-21T11:34:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/923848127",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I guess I'm doing something wrong (on macOS 11.6)?\r\n\r\n```\r\n% contrib/verifybinaries/verify.py 22.0  \r\nWARNING: https://bitcoin.org failed to provide signature file. Continuing based solely upon https://bitcoincore.org.\r\nWARNING: https://bitcoin.org failed to provide SHA256SUMS file. Continuing based solely upon https://bitcoincore.org.\r\nTraceback (most recent call last):\r\n  File \"contrib/verifybinaries/verify.py\", line 568, in <module>\r\n    sys.exit(main(sys.argv[1:]))\r\n  File \"contrib/verifybinaries/verify.py\", line 418, in main\r\n    good, unknown, bad = parse_gpg_result(output.splitlines())\r\n  File \"contrib/verifybinaries/verify.py\", line 271, in parse_gpg_result\r\n    f\"failed to evaluate all signatures: found {all_found} \"\r\nRuntimeError: failed to evaluate all signatures: found 13 but expected 10\r\n```\r\n\r\nFor 0.21.1 the SHA256SUMS file is missing, only the signatures are there: https://bitcoincore.org/bin/bitcoin-core-0.21.1/\r\n\r\n```\r\n% contrib/verifybinaries/verify.py 0.21.1\r\nError: couldn't fetch SHA256SUMS file.\r\nwget output:\r\n  --2021-09-21 19:18:24--  https://bitcoincore.org/bin/bitcoin-core-0.21.1/SHA256SUMS\r\n  Herleiden van bitcoincore.org (bitcoincore.org)... 198.251.83.116, 107.191.99.5\r\n  Verbinding maken met bitcoincore.org (bitcoincore.org)|198.251.83.116|:443... verbonden.\r\n  HTTP-verzoek is verzonden; wachten op antwoord... 404 Not Found\r\n  2021-09-21 19:18:25 Fout 404: Not Found.\r\n  ```\r\n\r\nPS it would be nice to check the timestamp as well if opentimestamp is present.\r\n\r\n",
      "created_at" : "2021-09-21T17:21:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23020#issuecomment-924195592",
      "id" : 924195592,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23020",
      "node_id" : "IC_kwDOABII5843FhsI",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-21T17:21:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/924195592",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Have you considered using the gpgme library\r\n\r\n@laanwj this is a good idea, I'll look into it. Initially I didn't want end users to have to futz with `pip` or extra Python package installation since it can get very confusing very fast for semi-technical users (and even just plain technical users), but it might be worth the complexity. I'll give that a shot and post the diff.\r\n\r\n> I guess I'm doing something wrong (on macOS 11.6)?\r\n\r\n@Sjors hm, interesting... I'm not able to reproduce on my Linux machine, but I'm betting there may be some formatting differences on different versions of GPG and/or macOS (which speaks to @laanwj's point about not relying on parsing output). Can you rerun with `--verbose` and send me the GPG output, either here or in DM?\r\n\r\n> For 0.21.1 the SHA256SUMS file is missing, only the signatures are there: https://bitcoincore.org/bin/bitcoin-core-0.21.1/\r\n\r\nOh, that's a really good point. We probably need to retain the legacy behavior for old releases. I'll work on this.",
      "created_at" : "2021-09-21T17:52:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23020#issuecomment-924221652",
      "id" : 924221652,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23020",
      "node_id" : "IC_kwDOABII5843FoDU",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-21T17:52:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/924221652",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> PS it would be nice to check the timestamp as well if opentimestamp is present.\r\n\r\nLove that idea.",
      "created_at" : "2021-09-21T17:56:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23020#issuecomment-924224659",
      "id" : 924224659,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23020",
      "node_id" : "IC_kwDOABII5843FoyT",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-21T17:56:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/924224659",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've pushed a fix for the first issue @Sjors discovered (signature miscounting) as well as a `logging` refactoring. A commit for legacy process support is coming soon, but this can still be tested with 22.0.",
      "created_at" : "2021-09-22T18:27:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23020#issuecomment-925180450",
      "id" : 925180450,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23020",
      "node_id" : "IC_kwDOABII5843JSIi",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-22T18:27:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925180450",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Much better, modulo somewhat scary warnings:\r\n```\r\n% contrib/verifybinaries/verify.py 22.0                                \r\n[WARNING] https://bitcoin.org failed to provide signature file. Continuing based solely upon https://bitcoincore.org.\r\n[WARNING] https://bitcoin.org failed to provide SHA256SUMS file. Continuing based solely upon https://bitcoincore.org.\r\n[WARNING] removing *-unsigned binaries (bitcoin-22.0-osx-unsigned.dmg, bitcoin-22.0-osx-unsigned.tar.gz, bitcoin-22.0-win-unsigned.tar.gz, bitcoin-22.0-win64-setup-unsigned.exe) from verification since https://bitcoincore.org does not host *-unsigned binaries\r\n[WARNING] removing *-debug binaries (bitcoin-22.0-aarch64-linux-gnu-debug.tar.gz, bitcoin-22.0-arm-linux-gnueabihf-debug.tar.gz, bitcoin-22.0-powerpc64-linux-gnu-debug.tar.gz, bitcoin-22.0-powerpc64le-linux-gnu-debug.tar.gz, bitcoin-22.0-riscv64-linux-gnu-debug.tar.gz, bitcoin-22.0-x86_64-linux-gnu-debug.tar.gz, bitcoin-22.0-win64-debug.zip) from verification since https://bitcoincore.org does not host *-debug binaries\r\n[WARNING] removing *-codesignatures binaries (bitcoin-22.0-codesignatures-22.0.tar.gz) from verification since https://bitcoincore.org does not host *-codesignatures binaries\r\nVERIFIED: bitcoin-22.0-aarch64-linux-gnu.tar.gz\r\nVERIFIED: bitcoin-22.0-arm-linux-gnueabihf.tar.gz\r\nVERIFIED: bitcoin-22.0.tar.gz\r\nVERIFIED: bitcoin-22.0-powerpc64-linux-gnu.tar.gz\r\nVERIFIED: bitcoin-22.0-powerpc64le-linux-gnu.tar.gz\r\nVERIFIED: bitcoin-22.0-riscv64-linux-gnu.tar.gz\r\nVERIFIED: bitcoin-22.0-osx-signed.dmg\r\nVERIFIED: bitcoin-22.0-osx64.tar.gz\r\nVERIFIED: bitcoin-22.0-x86_64-linux-gnu.tar.gz\r\nVERIFIED: bitcoin-22.0-win64-setup.exe\r\nVERIFIED: bitcoin-22.0-win64.zip\r\n```",
      "created_at" : "2021-09-22T18:31:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23020#issuecomment-925184375",
      "id" : 925184375,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23020",
      "node_id" : "IC_kwDOABII5843JTF3",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-22T18:31:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925184375",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've pushed an update (thanks to @Sjors' testing) that preserves the ability to verify binaries for releases older than 22.0, but still outputs verification results for everything in a uniform way. \r\n\r\nI've also included a change that associates the sha256 hash values along with the binary filenames in JSON output, which seems potentially useful.\r\n\r\n### 22.0 output\r\n```\r\n% ./contrib/verifybinaries/verify.py 22.0 --json --quiet --noninteractive\r\n[WARNING] https://bitcoin.org failed to provide file (https://bitcoin.org/bin/bitcoin-core-22.0/SHA256SUMS.asc). Continuing based solely upon https://bitcoincore.org.\r\n[WARNING] https://bitcoin.org failed to provide file (https://bitcoin.org/bin/bitcoin-core-22.0/SHA256SUMS). Continuing based solely upon https://bitcoincore.org.\r\n[WARNING] key 152812300785C96444D3334D17565732E08E5E41 for Andrew Chow (Official New Key) <achow101@gmail.com> is expired\r\n[WARNING] UNKNOWN SIGNATURE: SigData('82921A4B88FD454B7EB8CE3C796C4109063D4EAF', '', trusted=False, status='')\r\n{\r\n  \"good_trusted_sigs\": [\r\n    \"SigData('9DEAE0DC7063249FB05474681E4AED62986CD25D', 'Wladimir J. van der Laan <laanwj@visucore.com>', trusted=True, status='unknown')\",\r\n    \"SigData('152812300785C96444D3334D17565732E08E5E41', 'Andrew Chow (Official New Key) <achow101@gmail.com>', trusted=True, status='expired')\",\r\n    \"SigData('637DB1E23370F84AFF88CCE03152347D07DA627C', 'Stephan Oeste (it) <it@oeste.de>', trusted=True, status='unknown')\",\r\n    \"SigData('590B7292695AFFA5B672CBB2E13FC145CD3F4304', 'Antoine Poinsot <darosior@protonmail.com>', trusted=True, status='unknown')\",\r\n    \"SigData('D1DBF2C4B96F2DEBF4C16654410108112E7EA81F', 'Hennadii Stepanov (GitHub key) <32963518+hebasto@users.noreply.github.com>', trusted=True, status='unknown')\",\r\n    \"SigData('0AD83877C1F0CD1EE9BD660AD7CC770B81FD22A8', 'Ben Carman <benthecarman@live.com>', trusted=False, status='unknown')\",\r\n    \"SigData('9D3CC86A72F8494342EA5FD10A41BDC3F4FAFF1C', 'Aaron Clauson (sipsorcery) <aaron@sipsorcery.com>', trusted=False, status='unknown')\"\r\n  ],\r\n  \"good_untrusted_sigs\": [\r\n    \"SigData('0CCBAAFD76A2ECE2CCD3141DE2FFD5B1D88CA97D', '.0xB10C <0xb10c@gmail.com>', trusted=False, status='unknown')\",\r\n    \"SigData('28F5900B1BB5D1A4B6B6D1A9ED357015286A333D', 'Duncan Dean <duncangleeddean@gmail.com>', trusted=False, status='unknown')\",\r\n    \"SigData('CFB16E21C950F67FA95E558F2EEB9F5CC09526C1', 'Michael Ford (bitcoin-otc) <fanquake@gmail.com>', trusted=False, status='unknown')\",\r\n    \"SigData('6E01EEC9656903B0542B8F1003DB6322267C373B', 'Oliver Gugger <gugger@gmail.com>', trusted=False, status='unknown')\",\r\n    \"SigData('74E2DEF5D77260B98BC19438099BAD163C70FBFA', 'Will Clark <will8clark@gmail.com>', trusted=False, status='unknown')\"\r\n  ],\r\n  \"unknown_sigs\": [\r\n    \"SigData('82921A4B88FD454B7EB8CE3C796C4109063D4EAF', '', trusted=False, status='')\"\r\n  ],\r\n  \"bad_sigs\": [],\r\n  \"verified_binaries\": {\r\n    \"bitcoin-22.0-aarch64-linux-gnu.tar.gz\": \"ac718fed08570a81b3587587872ad85a25173afa5f9fbbd0c03ba4d1714cfa3e\",\r\n    \"bitcoin-22.0-arm-linux-gnueabihf.tar.gz\": \"b8713c6c5f03f5258b54e9f436e2ed6d85449aa24c2c9972f91963d413e86311\",\r\n    \"bitcoin-22.0.tar.gz\": \"d0e9d089b57048b1555efa7cd5a63a7ed042482045f6f33402b1df425bf9613b\",\r\n    \"bitcoin-22.0-powerpc64-linux-gnu.tar.gz\": \"2cca5f99007d060aca9d8c7cbd035dfe2f040dd8200b210ce32cdf858479f70d\",\r\n    \"bitcoin-22.0-powerpc64le-linux-gnu.tar.gz\": \"91b1e012975c5a363b5b5fcc81b5b7495e86ff703ec8262d4b9afcfec633c30d\",\r\n    \"bitcoin-22.0-riscv64-linux-gnu.tar.gz\": \"9cc3a62c469fe57e11485fdd32c916f10ce7a2899299855a2e479256ff49ff3c\",\r\n    \"bitcoin-22.0-osx-signed.dmg\": \"3b3e2680f7d9304c13bfebaf6445ada40d72324b4b3e0a07de9db807389a6c5b\",\r\n    \"bitcoin-22.0-osx64.tar.gz\": \"2744d199c3343b2d94faffdfb2c94d75a630ba27301a70e47b0ad30a7e0155e9\",\r\n    \"bitcoin-22.0-x86_64-linux-gnu.tar.gz\": \"59ebd25dd82a51638b7a6bb914586201e67db67b919b2a1ff08925a7936d1b16\",\r\n    \"bitcoin-22.0-win64-setup.exe\": \"9169989d649937c0f9ebccd3ab088501328aa319fe9e91fc7ea8e8cf0fcccede\",\r\n    \"bitcoin-22.0-win64.zip\": \"9485e4b52ed6cebfe474ab4d7d0c1be6d0bb879ba7246a8239326b2230a77eb1\"\r\n  }\r\n}\r\n```\r\n\r\n### 0.21.0 output\r\n\r\nNote that this fails because the `SHA256SUMS.asc` files differ between bitcoincore.org and bitcoin.org. This is the behavior of the script before this changeset (though now we display a unified diff of file contents), but we may want to change things to just ignore bitcoin.org in a case like this.\r\n\r\n```\r\n % ./contrib/verifybinaries/verify.py 0.21.0 --json --quiet --noninteractive\r\n[WARNING] found diff in files (SHA256SUMS.asc, SHA256SUMS.asc.2):\r\n  ---\r\n  +++\r\n  @@ -7,23 +7,23 @@\r\n   6223fd23d07133a6bfa2aa3d2554a09dc1d790d28ce67b0085d3fdcc1c126e05  bitcoin-0.21.0-osx.dmg\r\n   f8b2adfeae021a672effbc7bd40d5c48d6b94e53b2dd660f787340bf1a52e4e9  bitcoin-0.21.0-riscv64-linux-gnu.tar.gz\r\n   1a91202c62ee49fb64d57a52b8d6d01cd392fffcbef257b573800f9289655f37  bitcoin-0.21.0.tar.gz\r\n  -385a67cc4cf45558c05eb85fc500046cf033f816637fe0bff80d30debfca0128  bitcoin-0.21.0-win64-setup-unsigned.exe\r\n  +54050748ef4d4f000ea1ece472491b3e5fd546efc74ed52119354b2893f6624b  bitcoin-0.21.0-win64-setup.exe\r\n   1d0052c4ce80227fb6d0bc1c4e673ba21033e219c1f935d25f130ef7f43360d4  bitcoin-0.21.0-win64.zip\r\n   da7766775e3f9c98d7a9145429f2be8297c2672fe5b118fd3dc2411fb48e0032  bitcoin-0.21.0-x86_64-linux-gnu.tar.gz\r\n   -----BEGIN PGP SIGNATURE-----\r\n   Version: GnuPG v1.4.11 (GNU/Linux)\r\n\r\n  -iQIcBAEBCAAGBQJgXPg5AAoJEJDIAZ42wulkkl4P/jq29Je7Uqn75jkpvT8ilB8M\r\n  -5nM60ORBSsCyJHryS5sJeljLx/i8JTYkL10nUTpGDlFA3DOjM5MXgAHMJdYles7c\r\n  -PFO6TAqjrDWHgpc/HuPUCiF84N47u8xXcyWuoUjcgfLuV0K6l/1unCw6ISXZEdhy\r\n  -WTDZuqy+9lw9nWQA7VyIP+gfgMzgiH9P6x+ru9cYcXmimCv0TUtKp8iwUnW7QmrT\r\n  -aDtQJPs9sNWxjIa4WP5l4FKFlRErAyiHA24apQkOhn8YLSrIEATFE2t89HwvmIoV\r\n  -kv2BmQDrCUceC1OneFzmDP3JXJ0qa8wisw2gbUyO3EoSHfs/dlEG4+4NUQxtIwwX\r\n  -JQmaB7HII6UI86kIVIBWKA19hNiAxljSKgG7blP7+J2EKC+IDqZhuYHjpYCiJg5V\r\n  -2NSB3YE0sgKNyLPJN4OSA0h9nsBbEzHWm+BRgnkpPSsi2HSnczKzZwES31p9EGX1\r\n  -PYi4A1nk/kOFKCZh0uvaBKWR4h3MrLB9ABv3QqmkLeEJamLDfZPDC/35WRs9Z7kQ\r\n  -CUER5yMoJxq7aGjYSdd0jMxDL4akXRwf5DSN++voil3zWAqWS6XaH+9RtGmqFrZr\r\n  -uso8UR3RkAwgC5HQwgtEcyewA9xxz4MHx5UN5D+YzaejJvdDJBEa9oLry21EA34U\r\n  -071d1dTERe21zpnLj1EL\r\n  -=yP9G\r\n  +iQIcBAEBCAAGBQJgADqTAAoJEJDIAZ42wulkjtkQAJwlSTDinKsxZIMky3MeVhwB\r\n  +CmxxYiMLPQA8bwgxyc4RaTxUrqL2oExPOtfcDzcR1WbQe12niG40N/2yrtf66lG9\r\n  +KbSsQD6nKat9B3mCk9/jNkJHWmq5JJbOyfRs2mex75Lj7UHaPPrqh2rMfEewljed\r\n  +kHkDuaqeqYlTAh981WqLD+l5jnpQZqBSrcz3YTTvXWd7xKfFSVzqF/tD4CQFrPX2\r\n  +9b2BLzA/u+29Z3s+zio1l5c7fikNDd404T5U/y+NMOyCmgT4eiDGLQPlEpoGNq3w\r\n  +GYU7FNZUO9xXeatx4PI8qiq5mIK46UwfPUTeruTzNrHsME7YioUa87uSYKM8jqwP\r\n  +FSnbhYoUqCB/wPaKZwEF+2WzG88yj2+PzalVt8cnjRnTQ77COtHJqs8AjLWnVACF\r\n  +LluplM16xyiLn0FWkrEHyi5HlI+X+cqIiTtehojMBXIkHugIYMnT5XB9llh5OWXg\r\n  +Bp1UGupojLXYuMNF5R6cU5Iq+xJjbUiQ/PDm38MBlFlQ9RzRCYyZpMYZE3K9p789\r\n  +jpjdYdMPtzkYlIKD87S89JtE1s6i/SkTPhebyu/328rqkqnNKSCHnuB7Fy2iEKJj\r\n  +5kLs/LjY8yxSMuGeNl6LhWGKVZKy0AS/BztSHr2jgThfhN1BemFRcViSvcXhMeNw\r\n  +ka8Z9KLt/N0ziabBexAw\r\n  +=bi4p\r\n   -----END PGP SIGNATURE-----\r\n\r\n\r\n[ERROR] files not equal: SHA256SUMS.asc and SHA256SUMS.asc.2\r\n```\r\n\r\n### 0.20.0 output\r\n\r\nLegacy binary verifications rely solely on a successful GPG code, as was the behavior before this changeset.\r\n\r\n```\r\n% ./contrib/verifybinaries/verify.py 0.20.0 --json --quiet --noninteractive\r\n{\r\n  \"good_trusted_sigs\": [],\r\n  \"good_untrusted_sigs\": [\r\n    \"SigData('0x90C8019E36C2E964', 'Wladimir J. van der Laan (Bitcoin Core binary release signing key) <laanwj@gmail.com>', trusted=False, status='unknown')\"\r\n  ],\r\n  \"unknown_sigs\": [],\r\n  \"bad_sigs\": [],\r\n  \"verified_binaries\": {\r\n    \"bitcoin-0.20.0-aarch64-linux-gnu.tar.gz\": \"081b30b0f1af95656242c83eef30bbf7216b1a30fa8e8f29b3b160fe520d28f6\",\r\n    \"bitcoin-0.20.0-arm-linux-gnueabihf.tar.gz\": \"05014c7ff00f4496b1f389f0961d807e04505d8721d5c6f69567f2a0ec1985cc\",\r\n    \"bitcoin-0.20.0-osx64.tar.gz\": \"34f377fee2c7adf59981dde7e41215765d47b466f773cf2673137d30495b2675\",\r\n    \"bitcoin-0.20.0-osx.dmg\": \"a6e44b928d9ac04f11d43e920f4971fbdf1e77a8c28f7c14fafdd741ca7bc99f\",\r\n    \"bitcoin-0.20.0-riscv64-linux-gnu.tar.gz\": \"5b9cae3aa4197d1e557ff236754f489bce877ebba2267ce33af79b2ca4a13af6\",\r\n    \"bitcoin-0.20.0.tar.gz\": \"ec5a2358ee868d845115dc4fc3ed631ff063c57d5e0a713562d083c5c45efb28\",\r\n    \"bitcoin-0.20.0-win64-setup.exe\": \"0f1ea61a9aa9aba383a43bcdb5755b072cfff016b9c6bb0afa772a8685bcf7b0\",\r\n    \"bitcoin-0.20.0-win64.zip\": \"3e9ddfa05b7967e43fb502b735b6c4d716ec06f63ab7183df2e006ed4a6a431f\",\r\n    \"bitcoin-0.20.0-x86_64-linux-gnu.tar.gz\": \"35ec10f87b6bc1e44fd9cd1157e5dfa483eaf14d7d9a9c274774539e7824c427\"\r\n  }\r\n}\r\n```",
      "created_at" : "2021-09-22T23:32:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23020#issuecomment-925401609",
      "id" : 925401609,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23020",
      "node_id" : "IC_kwDOABII5843KIIJ",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-22T23:32:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925401609",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK - thanks for working on this.\r\n\r\n",
      "created_at" : "2021-09-23T08:46:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23020#issuecomment-925617977",
      "id" : 925617977,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23020",
      "node_id" : "IC_kwDOABII5843K885",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T08:46:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925617977",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Have you considered using the gpgme library (like https://github.com/bitcoin-core/bitcoin-maintainer-tools/blob/master/gitian-verify.py#L66 does) instead of parsing gpg command text output?\r\n\r\nSo I spent some time thinking about this and looking around at the various libraries that're available for GPG use. While using one of them would definitely save on a little complexity here, I'm somewhat wary of the trade-offs.\r\n\r\nOn top of the added installation complexity (apparently `gpgme` isn't just a `pip install` but requires `libgpgme` development headers to be installed as well), I have broader concerns about relying on Python dependencies for uses that are this sensitive.\r\n\r\nIf we use a third-party Python lib, we're opening up the trust model to encompass not just the Core repo and the Python runtime, but the author of the Python library and the PyPI servers. Obviously we could pin hashes, vendor the library, etc. etc. but I think that will ultimately be more work than the [70 odd lines of code](https://github.com/bitcoin/bitcoin/blob/a7ad989b075a1e4e50aa38e3e39531feeb83ccc3/contrib/verifybinaries/verify.py#L237-L302) that munge GPG output.\r\n\r\nIt strikes me that dealing with possible (and probably explicit) failure of this script on less common platforms because of unexpected GPG formatting is probably preferable to opening ourselves up to vulnerabilities based on third-party dependencies and packaging infrastructure. At least when it comes to something as important as verifying Bitcoin binaries.",
      "created_at" : "2021-09-24T19:31:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23020#issuecomment-926871883",
      "id" : 926871883,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23020",
      "node_id" : "IC_kwDOABII5843PvFL",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T19:33:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926871883",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   }
]
