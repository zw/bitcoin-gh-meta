[
   {
      "body" : "I reviewed the IsCanonicalSignature code with Pieter before he posted the pull request, so ACK on that much.\n\nGenerally, with test cases we should be striving for tests that hit every path through the code where it's reasonably possible to do so. For IsCanonicalSignature this would just require adding must-pass/must-fail cases right along the boundaries of each of the tests. See line 260 of this coverage analysis https://people.xiph.org/~greg/bitcoin_coverage/coverage/home/gmaxwell/src/bcm/bax/src/script.cpp.gcov.html  Testing this way has a two fold benefit: It makes it much more likely that future changes to the code which introduce errors are spotted, and the missing areas in the coverage report become indications of possible bugs.\n\nI believe you already have tests for each of the cases, but otherwise I'll make some if you don't.\n\n",
      "created_at" : "2012-08-28T18:57:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8102942",
      "id" : 8102942,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-08-28T18:57:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8102942",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "As a general comment about why not using the OpenSSL-based IsCanonical that is present in test/canonical_tests.cpp, I prefer to have a very clear set of rules to assess canonicality (is that a word?) with, as that is easier to port to other clients.\n\nOne thing I haven't tested yet, but we probably should: what if R or S is >= the field size? If OpenSSL allows that, we should make sure that it's non-canonical. EDIT: no need, OpenSSL does bounds checks on R and S.",
      "created_at" : "2012-08-28T19:28:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8103968",
      "id" : 8103968,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-08-28T19:41:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8103968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Can (in short term) one of you explain to me, what the term canonical means in that context here?",
      "created_at" : "2012-08-28T20:11:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8105324",
      "id" : 8105324,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-08-28T20:11:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8105324",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Bitcoin uses OpenSSL to encode public keys and signature. For public keys, one of encodings defined in the SEC specification is used, for signatures, DER encoding is used.\n\nThe problem is that in both cases, OpenSSL supports several encodings for the same data. In particular, for public keys it supports the (standard) uncompressed (0x04 as first byte) and compressed (0x02 or 0x03 as first byte) encodings, but also the (non-standard) hybrid formats (0x06 or 0x07 as first byte). For signatures, it accepts every BER encoded value (of which DER is a subset), and even some exceptions that are not permitted by BER. \n\nThere are some potential vulnerabilities with these, as people can change part of a transaction without invalidating it.\n\nCurrently there are some high-profile sites which still create non-standard signatures, so the checks aren't enforced yet.",
      "created_at" : "2012-08-28T20:25:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8105762",
      "id" : 8105762,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-08-28T20:25:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8105762",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@Diapolo    Imagine you were to send a number in the range -127 to 127 inclusive to someone using bits. You decide to send one bit to indicate positive or negative, then 7 more bits to signal 0-127.    In this encoding there are two ways to send zero:  +0 and -0.  This can create problems if some series of calculations could result in +0 and some series of calculations could result in -0 and then you compare them naively.  You can avoid this confusion by declaring +0 as canonical and either converting -0 to +0 whenever it shows up or catching it and treating it as an error.\n\nIn Bitcoin we use OpenSSL to parse our  signatures. A signature consists of a set of flags and some big numbers packed together. The signatures are supposed to be DER encoded, but OpenSSL supports BER (a superset of DER) and even parses some  crazy invalid values as meaningful, like some negative values being treated as positiveÃ¢ÂÂ and you can even create valid signatures this way by depending on the details of OpenSSL's behaviorÃ¢ÂÂ behavior that won't hold true with other implementations or perhaps not in the future.\n\nIn particular, for Bitcoin the validity of non-canonical signatures is problematic because tx ids are hashes over the whole transaction, including the signature.  I can stick garbage at the end of your transaction's signatureÃ¢ÂÂ resulting in a still valid transaction but with a different txid which your software may or may not recognize as being the same transaction.",
      "created_at" : "2012-08-28T20:33:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8106026",
      "id" : 8106026,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-08-28T20:35:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8106026",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Thanks for both explanations, very informative!\nSo this is a new enforced key / signature checking policy in the end ... would that require a new BIP?",
      "created_at" : "2012-08-28T20:49:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8106520",
      "id" : 8106520,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-08-28T20:49:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8106520",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "The plan is to initially just enable it for mempool transactions, which is technically not yet a protocol change. If we'd ever enable it (after some point) for blockchain transactions, it would mean a protocol change, and certainly need a BIP.",
      "created_at" : "2012-08-28T20:51:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8106606",
      "id" : 8106606,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-08-28T20:51:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8106606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "At least for the near term future we'd only enforce this as IsStandard()Ã¢ÂÂ so unmodified clients wouldn't mine or relay them. Miners could, if they modify their code, still insert transactions which are not in the canonical form.\n\nIf we wanted to add a new rule to Bitcoin it would need to be a BIP. It might get swept up with another change. For example, if we'd done this with IsStandard some months ago, it could have been made a part of the HeightInCoinbase change.   New rule events are dangerous: they crease increased risk of forks, so its good to minimize them.  They also can't be undone without breaking clients, so they must be done fairly conservatively.\n",
      "created_at" : "2012-08-28T20:53:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8106688",
      "id" : 8106688,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-08-28T20:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8106688",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/0e8b6b83cb310fce4371daf1a88650ef2275c15c for binaries and test log.",
      "created_at" : "2012-08-29T03:08:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8114134",
      "id" : 8114134,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-08-29T03:08:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8114134",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Added more test cases. All reasons for non-canonicality should occur now.",
      "created_at" : "2012-08-30T00:03:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8145470",
      "id" : 8145470,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-08-30T00:03:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8145470",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/c24e931733c24c0c5e5848b99cfa5c25514f6e78 for binaries and test log.",
      "created_at" : "2012-09-06T03:52:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8321775",
      "id" : 8321775,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-09-06T03:52:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8321775",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1742#discussion_r1562200"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1742"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1562200"
         }
      },
      "body" : "*never mind, I was reading it wrong*",
      "commit_id" : "58bc86e37fda1aec270bccb3df6c20fbd2a6591c",
      "created_at" : "2012-09-09T19:00:09Z",
      "diff_hunk" : "@@ -236,7 +236,68 @@ const char* GetOpName(opcodetype opcode)\n     }\n }\n \n-bool EvalScript(vector<vector<unsigned char> >& stack, const CScript& script, const CTransaction& txTo, unsigned int nIn, int nHashType)\n+bool IsCanonicalPubKey(const valtype &vchPubKey) {\n+    if (vchPubKey.size() < 33)\n+        return error(\"Non-canonical public key: too short\");\n+    if (vchPubKey[0] == 0x04) {\n+        if (vchPubKey.size() != 65)\n+            return error(\"Non-canonical public key: invalid length for uncompressed key\");\n+    } else if (vchPubKey[0] == 0x02 || vchPubKey[0] == 0x03) {\n+        if (vchPubKey.size() != 33)\n+            return error(\"Non-canonical public key: invalid length for compressed key\");\n+    } else {\n+        return error(\"Non-canonical public key: compressed nor uncompressed\");\n+    }\n+    return true;\n+}\n+\n+bool IsCanonicalSignature(const valtype &vchSig) {\n+    // See https://bitcointalk.org/index.php?topic=8392.msg127623#msg127623\n+    // A canonical signature exists of: <30> <total len> <02> <len R> <R> <02> <len S> <S> <hashtype>\n+    // Where R and S are not negative (their first byte has its highest bit not set), and not\n+    // excessively padded (do not start with a 0 byte, unless an otherwise negative number follows,\n+    // in which case a single 0 byte is necessary and even required).\n+    if (vchSig.size() < 9)\n+        return error(\"Non-canonical signature: too short\");\n+    if (vchSig.size() > 73)\n+        return error(\"Non-canonical signature: too long\");\n+    if (vchSig[vchSig.size() - 1] & 0x7C)\n+        return error(\"Non-canonical signature: unknown hashtype byte\");\n+    if (vchSig[0] != 0x30)\n+        return error(\"Non-canonical signature: wrong type\");\n+    if (vchSig[1] != vchSig.size()-3)\n+        return error(\"Non-canonical signature: wrong length marker\");\n+    unsigned int nLenR = vchSig[3];\n+    if (5 + nLenR >= vchSig.size())\n+        return error(\"Non-canonical signature: S length misplaced\");\n+    unsigned int nLenS = vchSig[5+nLenR];\n+    if ((unsigned long)(nLenR+nLenS+7) != vchSig.size())\n+        return error(\"Non-canonical signature: R+S length mismatch\");\n+\n+    const unsigned char *R = &vchSig[4];\n+    if (R[-2] != 0x02)\n+        return error(\"Non-canonical signature: R value type mismatch\");\n+    if (nLenR == 0)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#discussion_r1562200",
      "id" : 1562200,
      "original_commit_id" : "c24e931733c24c0c5e5848b99cfa5c25514f6e78",
      "original_position" : 46,
      "path" : "src/script.cpp",
      "position" : 46,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1742",
      "updated_at" : "2012-09-20T23:25:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1562200",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Rebased, and updated test cases. 100% coverage in the signature tests now.",
      "created_at" : "2012-09-20T23:27:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8749180",
      "id" : 8749180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-09-20T23:27:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8749180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Automatic sanity-testing: FAILED MERGE, see http://jenkins.bluematt.me/pull-tester/04c094401efe0ae267a5888be0911f6331387dc0 for test log.\n\nThis pull does not merge cleanly onto current master",
      "created_at" : "2012-09-21T05:10:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8755293",
      "id" : 8755293,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-09-21T05:10:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8755293",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "     I prefer to have a very clear set of rules to assess \n     canonicality (is that a word?) with, as that is easier to port to other clients.\n\n100% agree. It should be fully possible to write (or specify) a bitcoin client without relying on OpenSSL.\n",
      "created_at" : "2012-09-21T13:44:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8765041",
      "id" : 8765041,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-09-21T13:44:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8765041",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/58bc86e37fda1aec270bccb3df6c20fbd2a6591c for binaries and test log.",
      "created_at" : "2012-09-21T15:07:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8767638",
      "id" : 8767638,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-09-21T15:07:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8767638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "@gavinandresen @jgarzik\nCan I get some ACKs on this? This pull request has no semantic effect, it just brings a test function into scope.\n\nI suppose the question is whether the code here reflects the actual standard for public keys and signatures we want. The test case does have a function to verify consistency with OpenSSL, and has 100% coverage (for signatures), though.",
      "created_at" : "2012-09-28T14:48:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8978659",
      "id" : 8978659,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-09-28T14:48:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8978659",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "As-good-as-you're-gonna-get ACK :)\n\nI cannot claim that I understand the problem enough to verify the correctness of IsCanonical{pubkey,signature}...  however assuming they are correct, the rest of the code appears correct.\n\nAs the earlier discussion indicated, this should not be applied strictly for blocks -- and indeed it is not.\n",
      "created_at" : "2012-09-28T16:03:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8981552",
      "id" : 8981552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-09-28T16:03:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8981552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "This needs checks for flipped values. (Still ACK, though)",
      "created_at" : "2012-10-20T16:16:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-9633016",
      "id" : 9633016,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-10-20T16:16:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9633016",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell I think we need code that enforces creation of strictly-even-s-value-signatures, and have some discussion with authors of other clients before we can even think about code to test for that...",
      "created_at" : "2012-10-20T16:28:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-9633166",
      "id" : 9633166,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-10-20T16:28:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9633166",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "ACK",
      "created_at" : "2012-10-20T17:43:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-9634007",
      "id" : 9634007,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1742",
      "updated_at" : "2012-10-20T17:43:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9634007",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   }
]
