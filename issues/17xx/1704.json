{
   "assignee" : null,
   "body" : "In wallet.cpp, around lines 125, 129 and 237 there are some calculations to find the nDeriveIterations necessary for a given PC.\n\n```C++\npMasterKey.second.nDeriveIterations = pMasterKey.second.nDeriveIterations * (100 / ((double)(GetTimeMillis() - nStartTime)));\n```\n\n```C++\npMasterKey.second.nDeriveIterations = (pMasterKey.second.nDeriveIterations + pMasterKey.second.nDeriveIterations * 100 / ((double)(GetTimeMillis() - nStartTime))) / 2;\n```\n\n```C++\nkMasterKey.nDeriveIterations = (kMasterKey.nDeriveIterations + kMasterKey.nDeriveIterations * 100 / ((double)(GetTimeMillis() - nStartTime))) / 2;\n```\n\nNow, I'm not secure secure of it, but I'll say that the first has a better order of operations. Why?\n\nNow, nDeriveIterations is an uint. The first one multiplies it by a double number (100 / ...). There won't be an overflow at this point. Then the double is downcasted to uint (and here there could be an overflow). The second and third variants first multiply the uint by 100 and then (through the division with a double) convert it to a double. By first multiplying it by 100 you have limited the nDeriveIterations to around 42 million. Yeah, I do know that this isn't important with today computers :-)",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1704/comments",
   "created_at" : "2012-08-23T09:44:39Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1704/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/1704",
   "id" : 6402730,
   "labels" : [
      {
         "color" : "ebd775",
         "name" : "Brainstorming",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1704/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 1704,
   "state" : "open",
   "title" : "Order of operations for very very very very fast computers",
   "updated_at" : "2013-12-02T23:25:36Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1704",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/821344?v=3",
      "events_url" : "https://api.github.com/users/xanatos/events{/privacy}",
      "followers_url" : "https://api.github.com/users/xanatos/followers",
      "following_url" : "https://api.github.com/users/xanatos/following{/other_user}",
      "gists_url" : "https://api.github.com/users/xanatos/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/xanatos",
      "id" : 821344,
      "login" : "xanatos",
      "organizations_url" : "https://api.github.com/users/xanatos/orgs",
      "received_events_url" : "https://api.github.com/users/xanatos/received_events",
      "repos_url" : "https://api.github.com/users/xanatos/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/xanatos/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/xanatos/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/xanatos"
   }
}
