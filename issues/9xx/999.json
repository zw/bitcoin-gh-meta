{
   "assignee" : null,
   "body" : "I'm playing about with rc5 trying to see how quickly I can get it to download the initial blockchain putting the datadir on a ramdisk and connecting only to a machine on the LAN which already has the blockchain.\n\nThe database log files build up continually, even though they're checkpointed every 5000 blocks.  I would expect checkpointing to free up some space, but it doesn't.  Eventually the ram disk holding ~/.bitcoin filled up, and bitcoin-qt crashed, leaving a message popped up in a bubble pointing at the bitcoin systray icon: \"Warning: Disk space is low\".\n\n    (gdb) run\n    Starting program: /home/chris/Bin/bitcoin -server -min -connect=192.168.0.194 -nolisten -noirc\n    [Thread debugging using libthread_db enabled]\n    [New Thread 0xb54c0b70 (LWP 2948)]\n    [New Thread 0xb4cbfb70 (LWP 2949)]\n    [New Thread 0xb12a8b70 (LWP 2952)]\n    [New Thread 0xb0aa7b70 (LWP 2953)]\n    [New Thread 0xb02a6b70 (LWP 2954)]\n    [New Thread 0xafaa5b70 (LWP 2955)]\n    [New Thread 0xaf19ab70 (LWP 2956)]\n    [New Thread 0xae999b70 (LWP 2957)]\n    [New Thread 0xae198b70 (LWP 2959)]\n    [New Thread 0xad997b70 (LWP 2960)]\n    [New Thread 0xad196b70 (LWP 2961)]\n    [New Thread 0xac995b70 (LWP 2962)]\n    [Thread 0xae999b70 (LWP 2957) exited]\n    [Thread 0xad997b70 (LWP 2960) exited]\n    [New Thread 0xae999b70 (LWP 2963)]\n    [Thread 0xb0aa7b70 (LWP 2953) exited]\n    [Thread 0xafaa5b70 (LWP 2955) exited]\n    \"sni-qt/2947\" WARN  23:57:35.064 void StatusNotifierItemFactory::connectToSnw() Invalid interface to SNW_SERVICE \n    [New Thread 0xafaa5b70 (LWP 2964)]\n    [Thread 0xb54c0b70 (LWP 2948) exited]\n    [New Thread 0xb54c0b70 (LWP 2973)]\n    [Thread 0xac995b70 (LWP 2962) exited]\n    [Thread 0xafaa5b70 (LWP 2964) exited]\n    [Thread 0xae198b70 (LWP 2959) exited]\n    [Thread 0xb12a8b70 (LWP 2952) exited]\n    [Thread 0xad196b70 (LWP 2961) exited]\n    [Thread 0xaf19ab70 (LWP 2956) exited]\n    [New Thread 0xaf19ab70 (LWP 2975)]\n    [Thread 0xaf19ab70 (LWP 2975) exited]\n\n    Program received signal SIGSEGV, Segmentation fault.\n    0xb7e6d385 in BN_usub () from /lib/i386-linux-gnu/libcrypto.so.1.0.0\n    (gdb) where\n    #0  0xb7e6d385 in BN_usub () from /lib/i386-linux-gnu/libcrypto.so.1.0.0\n    #1  0xb7e6d58c in BN_add () from /lib/i386-linux-gnu/libcrypto.so.1.0.0\n    #2  0x080ac4ec in operator+ (a=..., b=...) at src/bignum.h:470\n    #3  0x080c45a6 in GetWarnings (strFor=...) at src/main.cpp:2048\n    #4  0x082441ec in ClientModel::getStatusBarWarnings (this=0xbffff4f0) at src/qt/clientmodel.cpp:77\n    #5  0x080735e1 in BitcoinGUI::setNumBlocks (this=0xbffff3fc, count=24188) at src/qt/bitcoingui.cpp:461\n    #6  0x082b81a4 in BitcoinGUI::qt_metacall (this=0xbffff3fc, _c=QMetaObject::InvokeMetaMethod, _id=1, _a=0xbfffec78) at build/moc_bitcoingui.cpp:110\n    #7  0xb6fceb7d in QMetaObject::metacall(QObject*, QMetaObject::Call, int, void**) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #8  0xb6fdda6a in QMetaObject::activate(QObject*, QMetaObject const*, int, void**) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #9  0x082b8fdc in ClientModel::numBlocksChanged (this=0xbffff4f0, _t1=24188) at build/moc_clientmodel.cpp:101\n    #10 0x08244172 in ClientModel::update (this=0xbffff4f0) at src/qt/clientmodel.cpp:54\n    #11 0x082b8f58 in ClientModel::qt_metacall (this=0xbffff4f0, _c=QMetaObject::InvokeMetaMethod, _id=3, _a=0xbfffed64) at build/moc_clientmodel.cpp:82\n    #12 0xb6fceb7d in QMetaObject::metacall(QObject*, QMetaObject::Call, int, void**) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #13 0xb6fdda6a in QMetaObject::activate(QObject*, QMetaObject const*, int, void**) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #14 0xb702c7d5 in QTimer::timeout() () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #15 0xb6fe5286 in QTimer::timerEvent(QTimerEvent*) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #16 0xb6fe0994 in QObject::event(QEvent*) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #17 0xb725ad84 in QApplicationPrivate::notify_helper(QObject*, QEvent*) () from /usr/lib/i386-linux-gnu/libQtGui.so.4\n    #18 0xb7260133 in QApplication::notify(QObject*, QEvent*) () from /usr/lib/i386-linux-gnu/libQtGui.so.4\n    #19 0xb6fc819e in QCoreApplication::notifyInternal(QObject*, QEvent*) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #20 0xb6ff8c10 in ?? () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #21 0xb6ff6155 in ?? () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #22 0xb6a7525f in g_main_context_dispatch () from /lib/i386-linux-gnu/libglib-2.0.so.0\n    #23 0xb6a75990 in ?? () from /lib/i386-linux-gnu/libglib-2.0.so.0\n    #24 0xb6a75c2a in g_main_context_iteration () from /lib/i386-linux-gnu/libglib-2.0.so.0\n    #25 0xb6ff6ada in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #26 0xb7312e7a in ?? () from /usr/lib/i386-linux-gnu/libQtGui.so.4\n    #27 0xb6fc71dd in QEventLoop::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #28 0xb6fc7421 in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #29 0xb6fcc19d in QCoreApplication::exec() () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #30 0xb7258924 in QApplication::exec() () from /usr/lib/i386-linux-gnu/libQtGui.so.4\n    #31 0x08068499 in main (argc=6, argv=0xbffff6e4) at src/qt/bitcoin.cpp:271\n    (gdb) thread apply all bt\n\n    Thread 16 (Thread 0xb54c0b70 (LWP 2973)):\n    #0  0xb7fdf424 in __kernel_vsyscall ()\n    #1  0xb6c76403 in ?? () from /lib/i386-linux-gnu/libc.so.6\n    #2  0xb6c0a495 in ?? () from /lib/i386-linux-gnu/libc.so.6\n    Backtrace stopped: previous frame identical to this frame (corrupt stack?)\n\n    Thread 14 (Thread 0xae999b70 (LWP 2963)):\n    #0  0xb7fdf424 in __kernel_vsyscall ()\n    #1  0xb6e55296 in nanosleep () from /lib/i386-linux-gnu/libpthread.so.0\n    #2  0xb7bd6284 in boost::this_thread::sleep(boost::posix_time::ptime const&) () from /usr/lib/libboost_thread.so.1.46.1\n    #3  0x080cf195 in boost::thread::sleep (xt=...) at /usr/include/boost/thread/detail/thread.hpp:346\n    #4  0x080cf317 in Sleep (n=100000) at src/util.h:92\n    #5  0x08125c4b in ThreadDumpAddress2 (parg=0x0) at src/net.cpp:1215\n    #6  0x08125cef in ThreadDumpAddress (parg=0x0) at src/net.cpp:1226\n    #7  0x08125ce2 in ThreadDumpAddress (parg=0x0) at src/net.cpp:1223\n    #8  0x08125ce2 in ThreadDumpAddress (parg=0x0) at src/net.cpp:1223\n    #9  0x08125ce2 in ThreadDumpAddress (parg=0x0) at src/net.cpp:1223\n    #10 0x08125ce2 in ThreadDumpAddress (parg=0x0) at src/net.cpp:1223\n    #11 0x08125ce2 in ThreadDumpAddress (parg=0x0) at src/net.cpp:1223\n    #12 0x08125ce2 in ThreadDumpAddress (parg=0x0) at src/net.cpp:1223\n    #13 0x08125ce2 in ThreadDumpAddress (parg=0x0) at src/net.cpp:1223\n    #14 0x08125ce2 in ThreadDumpAddress (parg=0x0) at src/net.cpp:1223\n    #15 0x08125ce2 in ThreadDumpAddress (parg=0x0) at src/net.cpp:1223\n    #16 0x08125ce2 in ThreadDumpAddress (parg=0x0) at src/net.cpp:1223\n    #17 0x08125ce2 in ThreadDumpAddress (parg=0x0) at src/net.cpp:1223\n    #18 0x08125ce2 in ThreadDumpAddress (parg=0x0) at src/net.cpp:1223\n    #19 0x08125ce2 in ThreadDumpAddress (parg=0x0) at src/net.cpp:1223\n    #20 0xb6e4dd31 in start_thread () from /lib/i386-linux-gnu/libpthread.so.0\n    #21 0xb6c6846e in clone () from /lib/i386-linux-gnu/libc.so.6\n    Backtrace stopped: Not enough registers or memory available to unwind further\n\n    Thread 6 (Thread 0xb02a6b70 (LWP 2954)):\n    #0  0xb7fdf424 in __kernel_vsyscall ()\n    #1  0xb6e54cb8 in accept () from /lib/i386-linux-gnu/libpthread.so.0\n    #2  0x0829891d in boost::asio::detail::socket_ops::call_accept<unsigned int> (s=30, addr=0xb02a5e50, addrlen=0xb02a56b4)\n        at /usr/include/boost/asio/detail/impl/socket_ops.ipp:75\n    #3  0x082959d0 in boost::asio::detail::socket_ops::accept (s=30, addr=0xb02a5e50, addrlen=0xb02a56b4, ec=...)\n        at /usr/include/boost/asio/detail/impl/socket_ops.ipp:93\n    #4  0x08295a3a in boost::asio::detail::socket_ops::sync_accept (s=30, state=16 '\\020', addr=0xb02a5e50, addrlen=0xb02a56b4, ec=...)\n        at /usr/include/boost/asio/detail/impl/socket_ops.ipp:119\n    #5  0x082a33e2 in boost::asio::detail::reactive_socket_service<boost::asio::ip::tcp>::accept<boost::asio::basic_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > > (this=0x87110a4, impl=..., peer=..., peer_endpoint=0xb02a5e50, ec=...)\n        at /usr/include/boost/asio/detail/reactive_socket_service.hpp:326\n    #6  0x0829f337 in boost::asio::socket_acceptor_service<boost::asio::ip::tcp>::accept<boost::asio::stream_socket_service<boost::asio::ip::tcp> > (\n        this=0x8711090, impl=..., peer=..., peer_endpoint=0xb02a5e50, ec=...) at /usr/include/boost/asio/socket_acceptor_service.hpp:197\n    #7  0x0829b895 in boost::asio::basic_socket_acceptor<boost::asio::ip::tcp, boost::asio::socket_acceptor_service<boost::asio::ip::tcp> >::accept<boost::asio::stream_socket_service<boost::asio::ip::tcp> > (this=0xb02a579c, peer=..., peer_endpoint=...)\n        at /usr/include/boost/asio/basic_socket_acceptor.hpp:747\n    #8  0x0828db66 in ThreadRPCServer2 (parg=0x0) at src/bitcoinrpc.cpp:2438\n    #9  0x0828d2eb in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2347\n    #10 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #11 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #12 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #13 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #14 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #15 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #16 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #17 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #18 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #19 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #20 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #21 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #22 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #23 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #24 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #25 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #26 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #27 0x0828d2c0 in ThreadRPCServer (parg=0x0) at src/bitcoinrpc.cpp:2343\n    #28 0xb6e4dd31 in start_thread () from /lib/i386-linux-gnu/libpthread.so.0\n    #29 0xb6c6846e in clone () from /lib/i386-linux-gnu/libc.so.6\n    Backtrace stopped: Not enough registers or memory available to unwind further\n\n    Thread 3 (Thread 0xb4cbfb70 (LWP 2949)):\n    #0  0xb7fdf424 in __kernel_vsyscall ()\n    #1  0xb6c597ae in poll () from /lib/i386-linux-gnu/libc.so.6\n    #2  0xb6a8434b in g_poll () from /lib/i386-linux-gnu/libglib-2.0.so.0\n    #3  0xb6a75896 in ?? () from /lib/i386-linux-gnu/libglib-2.0.so.0\n    #4  0xb6a75f9b in g_main_loop_run () from /lib/i386-linux-gnu/libglib-2.0.so.0\n    #5  0xb6150cea in ?? () from /usr/lib/i386-linux-gnu/libgio-2.0.so.0\n    #6  0xb6a9c5f4 in ?? () from /lib/i386-linux-gnu/libglib-2.0.so.0\n    #7  0xb6e4dd31 in start_thread () from /lib/i386-linux-gnu/libpthread.so.0\n    #8  0xb6c6846e in clone () from /lib/i386-linux-gnu/libc.so.6\n    Backtrace stopped: Not enough registers or memory available to unwind further\n\n    Thread 1 (Thread 0xb6692710 (LWP 2947)):\n    #0  0xb7e6d385 in BN_usub () from /lib/i386-linux-gnu/libcrypto.so.1.0.0\n    #1  0xb7e6d58c in BN_add () from /lib/i386-linux-gnu/libcrypto.so.1.0.0\n    #2  0x080ac4ec in operator+ (a=..., b=...) at src/bignum.h:470\n    #3  0x080c45a6 in GetWarnings (strFor=...) at src/main.cpp:2048\n    #4  0x082441ec in ClientModel::getStatusBarWarnings (this=0xbffff4f0) at src/qt/clientmodel.cpp:77\n    #5  0x080735e1 in BitcoinGUI::setNumBlocks (this=0xbffff3fc, count=24188) at src/qt/bitcoingui.cpp:461\n    #6  0x082b81a4 in BitcoinGUI::qt_metacall (this=0xbffff3fc, _c=QMetaObject::InvokeMetaMethod, _id=1, _a=0xbfffec78) at build/moc_bitcoingui.cpp:110\n    #7  0xb6fceb7d in QMetaObject::metacall(QObject*, QMetaObject::Call, int, void**) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #8  0xb6fdda6a in QMetaObject::activate(QObject*, QMetaObject const*, int, void**) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #9  0x082b8fdc in ClientModel::numBlocksChanged (this=0xbffff4f0, _t1=24188) at build/moc_clientmodel.cpp:101\n    #10 0x08244172 in ClientModel::update (this=0xbffff4f0) at src/qt/clientmodel.cpp:54\n    #11 0x082b8f58 in ClientModel::qt_metacall (this=0xbffff4f0, _c=QMetaObject::InvokeMetaMethod, _id=3, _a=0xbfffed64) at build/moc_clientmodel.cpp:82\n    #12 0xb6fceb7d in QMetaObject::metacall(QObject*, QMetaObject::Call, int, void**) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #13 0xb6fdda6a in QMetaObject::activate(QObject*, QMetaObject const*, int, void**) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #14 0xb702c7d5 in QTimer::timeout() () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #15 0xb6fe5286 in QTimer::timerEvent(QTimerEvent*) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #16 0xb6fe0994 in QObject::event(QEvent*) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #17 0xb725ad84 in QApplicationPrivate::notify_helper(QObject*, QEvent*) () from /usr/lib/i386-linux-gnu/libQtGui.so.4\n    #18 0xb7260133 in QApplication::notify(QObject*, QEvent*) () from /usr/lib/i386-linux-gnu/libQtGui.so.4\n    #19 0xb6fc819e in QCoreApplication::notifyInternal(QObject*, QEvent*) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #20 0xb6ff8c10 in ?? () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #21 0xb6ff6155 in ?? () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #22 0xb6a7525f in g_main_context_dispatch () from /lib/i386-linux-gnu/libglib-2.0.so.0\n    #23 0xb6a75990 in ?? () from /lib/i386-linux-gnu/libglib-2.0.so.0\n    #24 0xb6a75c2a in g_main_context_iteration () from /lib/i386-linux-gnu/libglib-2.0.so.0\n    #25 0xb6ff6ada in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #26 0xb7312e7a in ?? () from /usr/lib/i386-linux-gnu/libQtGui.so.4\n    #27 0xb6fc71dd in QEventLoop::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #28 0xb6fc7421 in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #29 0xb6fcc19d in QCoreApplication::exec() () from /usr/lib/i386-linux-gnu/libQtCore.so.4\n    #30 0xb7258924 in QApplication::exec() () from /usr/lib/i386-linux-gnu/libQtGui.so.4\n    #31 0x08068499 in main (argc=6, argv=0xbffff6e4) at src/qt/bitcoin.cpp:271\n    (gdb) \n\nEdit @laanwj: clarified that this problem happens when out of diskspace",
   "closed_at" : "2013-05-21T07:08:51Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 5,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/999/comments",
   "created_at" : "2012-03-28T03:37:19Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/999/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/999",
   "id" : 3844389,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/999/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 999,
   "state" : "closed",
   "title" : "v0.6.0rc5 segfault on initial blockchain download when out of diskspace",
   "updated_at" : "2013-05-21T07:08:51Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/999",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=3",
      "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
      "followers_url" : "https://api.github.com/users/dooglus/followers",
      "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
      "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/dooglus",
      "id" : 573356,
      "login" : "dooglus",
      "organizations_url" : "https://api.github.com/users/dooglus/orgs",
      "received_events_url" : "https://api.github.com/users/dooglus/received_events",
      "repos_url" : "https://api.github.com/users/dooglus/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/dooglus"
   }
}
