{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "### Description:\r\nI am trying to sign an input that was sent to a p2sh-p2wsh address, but signrawtransaction RPC method returns an error stating = Witness program was passed an empty witness.\r\nAll the data can be seen through pastebin \r\n\r\n\r\n### Reproduction\r\nReproducible by following these actions (note that wallet does NOT know anything about address/private keys used):\r\nRelated address info (2of2 P2SH-P2WSH address): https://pastebin.com/TE1LrR44\r\n\r\n1) Raw transaction request/response:\r\nhttps://pastebin.com/r6HdMwsy\r\n\r\n2) SignRaw transaction request/response:\r\n1. - https://pastebin.com/2apuckBk\r\n2. - https://pastebin.com/SsszYS2w\r\n\r\n### Expected behavior\r\nI'd expect for it to sign a transaction just as if spendable input was inside wallet. Which I tested works just fine. I imported the address using import priv key->add multisig address->addwitnessaddress\r\nthen created a deposit to it and then spent it, transaction went through without a hitch.\r\n\r\n### Actual behaviour\r\nYou can see the result in step 2.2. \r\n\r\n### Additional info\r\nI talked about it at IRC bitcoin-core-dev channel with meshcollider. He said there might be an issue where I would need to pass in witness program as well to the signrawtransaction method and that it should add witness object if it is required since createrawtransaction method can't possibly know if output is plain p2sh or a segwit wrapper.\r\n\r\n### What version of bitcoin-core are you using?\r\nI am running v0.15.1.0-g7b57bc998f retrieved through Ubuntu PPA.\r\n\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11693/comments",
   "created_at" : "2017-11-15T13:17:08Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11693/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/11693",
   "id" : 274152816,
   "labels" : [
      {
         "color" : "0052cc",
         "default" : false,
         "id" : 98279177,
         "name" : "RPC/REST/ZMQ",
         "node_id" : "MDU6TGFiZWw5ODI3OTE3Nw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11693/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUyNzQxNTI4MTY=",
   "number" : 11693,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Signing raw transaction that has p2sh-p2wsh input",
   "updated_at" : "2017-11-16T11:09:20Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11693",
   "user" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/29866086?v=4",
      "events_url" : "https://api.github.com/users/kgcorps/events{/privacy}",
      "followers_url" : "https://api.github.com/users/kgcorps/followers",
      "following_url" : "https://api.github.com/users/kgcorps/following{/other_user}",
      "gists_url" : "https://api.github.com/users/kgcorps/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/kgcorps",
      "id" : 29866086,
      "login" : "kgcorps",
      "node_id" : "MDQ6VXNlcjI5ODY2MDg2",
      "organizations_url" : "https://api.github.com/users/kgcorps/orgs",
      "received_events_url" : "https://api.github.com/users/kgcorps/received_events",
      "repos_url" : "https://api.github.com/users/kgcorps/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/kgcorps/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/kgcorps/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/kgcorps"
   }
}
