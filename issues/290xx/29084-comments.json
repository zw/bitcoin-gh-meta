[
   {
      "author_association" : "MEMBER",
      "body" : "Probably because our GCC in guix is passing stack protection flags by default?",
      "created_at" : "2023-12-14T20:24:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29084#issuecomment-1856530747",
      "id" : 1856530747,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29084",
      "node_id" : "IC_kwDOABII585uqGk7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856530747/reactions"
      },
      "updated_at" : "2023-12-14T20:24:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856530747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Probably because our GCC in guix is passing stack protection flags by default?\r\n\r\nShouldn't `-fno-stack-protector` override compiler's defaults?",
      "created_at" : "2023-12-14T20:25:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29084#issuecomment-1856532058",
      "id" : 1856532058,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29084",
      "node_id" : "IC_kwDOABII585uqG5a",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856532058/reactions"
      },
      "updated_at" : "2023-12-14T20:25:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856532058",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Probably because our GCC in guix is passing stack protection flags by default?\r\n\r\nWhy does the `test-security-check.py` pass then?",
      "created_at" : "2023-12-14T20:26:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29084#issuecomment-1856533170",
      "id" : 1856533170,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29084",
      "node_id" : "IC_kwDOABII585uqHKy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856533170/reactions"
      },
      "updated_at" : "2023-12-14T20:26:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856533170",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Probably because the toolchain is built hardened, so any test bin still has the stack protection symbol coming from glibc or similar.",
      "created_at" : "2023-12-14T20:30:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29084#issuecomment-1856538009",
      "id" : 1856538009,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29084",
      "node_id" : "IC_kwDOABII585uqIWZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856538009/reactions"
      },
      "updated_at" : "2023-12-14T20:30:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856538009",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "****",
      "created_at" : "2023-12-18T00:45:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29084#issuecomment-1859359011",
      "id" : 1859359011,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29084",
      "node_id" : "IC_kwDOABII585u05Ej",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1859359011/reactions"
      },
      "updated_at" : "2023-12-18T00:45:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1859359011",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/106019725?v=4",
         "events_url" : "https://api.github.com/users/Aminkavoos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Aminkavoos/followers",
         "following_url" : "https://api.github.com/users/Aminkavoos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Aminkavoos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Aminkavoos",
         "id" : 106019725,
         "login" : "Aminkavoos",
         "node_id" : "U_kgDOBlG7jQ",
         "organizations_url" : "https://api.github.com/users/Aminkavoos/orgs",
         "received_events_url" : "https://api.github.com/users/Aminkavoos/received_events",
         "repos_url" : "https://api.github.com/users/Aminkavoos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Aminkavoos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Aminkavoos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Aminkavoos"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The claim here is that if you change `-fstack-protector-all` to `-fno-stack-protector` in our compile flags, then `check_ELF_Canary` in `security-check.py` should fail during a Guix build.\r\n\r\nHowever that wont happen, because the check looks for the presence of `__stack_chk_fail`, and that will still be in the binary, because libs in depends are compiled with the on-by-default stack-protector flags. This can easily be checked after Guix building with the diff above:\r\n```bash\r\n  CXXFLAGS        =    -Wstack-protector -fno-stack-protector -fcf-protection=full -fstack-clash-protection      -fno-extended-identifiers -fstack-reuse=none -fvisibility=hidden -pipe -std=c++20 -O2 -O2 -g -ffile-prefix-map=/gnu/store/dyzpk3myxgx3asavbcd9aspa9gvbyxcr-profile=/usr\r\n....\r\n/bitcoin/guix-build-c5f12669c591/distsrc-c5f12669c591-x86_64-linux-gnu/src# nm -C bitcoind | grep __stack\r\n                 U __stack_chk_fail@GLIBC_2.4\r\n```\r\n\r\nGoing to close this, as there is no false-positive as far as I can see.",
      "created_at" : "2024-01-12T11:51:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29084#issuecomment-1888967871",
      "id" : 1888967871,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29084",
      "node_id" : "IC_kwDOABII585wl1y_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1888967871/reactions"
      },
      "updated_at" : "2024-01-12T11:51:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1888967871",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
