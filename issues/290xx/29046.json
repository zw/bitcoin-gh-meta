{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "I was looking into why my node was frequently opening new block-relay-only connections even though it already had two such nodes connected, and while this appears to be intended behavior to counter eclipse attacks, while searching the codebase for this I encountered a minor contradiction in the docs.\r\n\r\nSpecifically, [doc/reduce-memory.md](https://github.com/bitcoin/bitcoin/blob/3e691258d8789a4a89cce42e7e71b130491594d7/doc/reduce-memory.md?plain=1#L29) says:\r\n\r\n```\r\n- `-maxconnections=<n>` - the maximum number of connections, which defaults to 125. Each active connection takes up some\r\n  memory. This option applies only if inbound connections are enabled; otherwise, the number of connections will not\r\n  be more than 11. Of the 11 outbound peers, there can be 8 full-relay connections, 2 block-relay-only ones,\r\n  and occasionally 1 short-lived feeler or extra outbound block-relay-only connection.\r\n```\r\n\r\nWhile [doc/reduce-traffic.md](https://github.com/bitcoin/bitcoin/blob/3e691258d8789a4a89cce42e7e71b130491594d7/doc/reduce-traffic.md?plain=1#L9) says:\r\n\r\n```\r\nBy default, Bitcoin Core allows up to 125 connections to different peers, 10 of\r\nwhich are outbound. You can therefore, have at most 115 inbound connections.\r\nOf the 10 outbound peers, there can be 8 full-relay connections and 2\r\nblock-relay-only ones.\r\n```\r\n\r\nI'm not sure if the extra feeler/block-relay-only connection takes up one of the maxconnections slots or not, but the latter should probably be updated to reflect this behavior.",
   "closed_at" : "2023-12-12T11:31:16Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
      "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fanquake/followers",
      "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fanquake",
      "id" : 863730,
      "login" : "fanquake",
      "node_id" : "MDQ6VXNlcjg2MzczMA==",
      "organizations_url" : "https://api.github.com/users/fanquake/orgs",
      "received_events_url" : "https://api.github.com/users/fanquake/received_events",
      "repos_url" : "https://api.github.com/users/fanquake/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fanquake"
   },
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29046/comments",
   "created_at" : "2023-12-10T08:44:39Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29046/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/29046",
   "id" : 2034276059,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29046/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "I_kwDOABII5855QJbb",
   "number" : 29046,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29046/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "state_reason" : "completed",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29046/timeline",
   "title" : "Nit: Inconsistency in the docs regarding block-relay-only connections",
   "updated_at" : "2023-12-12T11:31:16Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29046",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/73581993?v=4",
      "events_url" : "https://api.github.com/users/ArmchairCryptologist/events{/privacy}",
      "followers_url" : "https://api.github.com/users/ArmchairCryptologist/followers",
      "following_url" : "https://api.github.com/users/ArmchairCryptologist/following{/other_user}",
      "gists_url" : "https://api.github.com/users/ArmchairCryptologist/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/ArmchairCryptologist",
      "id" : 73581993,
      "login" : "ArmchairCryptologist",
      "node_id" : "MDQ6VXNlcjczNTgxOTkz",
      "organizations_url" : "https://api.github.com/users/ArmchairCryptologist/orgs",
      "received_events_url" : "https://api.github.com/users/ArmchairCryptologist/received_events",
      "repos_url" : "https://api.github.com/users/ArmchairCryptologist/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/ArmchairCryptologist/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/ArmchairCryptologist/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/ArmchairCryptologist"
   }
}
