[
   {
      "body" : "Do you have a benchmark with both PRs together?  \r\n\r\nutACK, aside from the testnet3 coinbase issue",
      "created_at" : "2015-11-03T16:07:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6931#issuecomment-153399830",
      "id" : 153399830,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6931",
      "updated_at" : "2015-11-03T16:07:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/153399830",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "body" : "Concept ACK, but the logic seems more complicated than necessary.  Couldn't you just remove the BIP30 checking code entirely now that BIP34 has activated?  Why do the work in the old chain, when we know the old chain doesn't violate the rules (and have headers-first to prevent somebody from feeding us a low-work bogus chain)?\r\n\r\n\r\n",
      "created_at" : "2015-11-03T17:11:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6931#issuecomment-153420913",
      "id" : 153420913,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6931",
      "updated_at" : "2015-11-03T17:11:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/153420913",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "@gavinandresen Headers-first doesn't actually prevent someone from doing the [attack](https://github.com/bitcoin/bitcoin/pull/6916#issuecomment-152626322) -- for example the single peer a node chooses to download headers from could feed a bogus chain before a node ever learns about the real chain.\r\n\r\nConcept ACK",
      "created_at" : "2015-11-03T17:22:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6931#issuecomment-153423916",
      "id" : 153423916,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6931",
      "updated_at" : "2015-11-03T17:22:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/153423916",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "@instagibbs I'm working on putting together some benchmarks.  There are a set of pulls that I've been working on to speed up ConnectBlock and CreateNewBlock.  I'll post an issue identifying them all and with some benchmarks.  But roughly speaking we're talking about these times on average over some recent data for CreateNewBlock (with 1GB dbcache and 1M sigcachesize)\r\n\r\nCode version | time in ms\r\n---- | ----\r\nMaster | 550\r\nlibsecp256k merged | 340\r\nlibsecp and these 2 pulls* | 160 \r\n\r\n_* I actually didn't do the coinbase lookup required in 6932 for this test, so that can be the difference between 0 and 1 db lookup._\r\n\r\n@gavinandresen I'd be interested if you have any thoughts on how best to benchmark this as well?",
      "created_at" : "2015-11-03T17:42:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6931#issuecomment-153429337",
      "id" : 153429337,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6931",
      "updated_at" : "2015-11-03T18:48:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/153429337",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "utACK (will test)",
      "created_at" : "2015-11-03T19:08:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6931#issuecomment-153456741",
      "id" : 153456741,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6931",
      "updated_at" : "2015-11-03T19:08:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/153456741",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gavinandresen I wanted to do that first too when this brought up, see\n#6916.\n",
      "created_at" : "2015-11-04T06:04:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6931#issuecomment-153588145",
      "id" : 153588145,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6931",
      "updated_at" : "2015-11-04T06:04:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/153588145",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Some random stats (generated using #6965):\r\n\r\n2015-11-06 23:22:03 UpdateTip: new best=00000000000000000e168ce1bbcdab4551cc35e9d5128b75e5d603143cdc970a  height=357552  log2_work=82.822239  tx=69465120  date=2015-05-22 12:42:52 progress=0.799217  cache=1120.9MiB(601684tx)\r\n2015-11-06 23:22:03   - Connect postprocess: 3.40ms [2.65s]\r\n2015-11-06 23:22:03 - Connect block: 328.16ms [230.41s]\r\n2015-11-06 23:22:03   - Load block from disk: 18.28ms [21.80s]\r\n2015-11-06 23:22:03     - Sanity checks: 2.83ms [1.73s]\r\n2015-11-06 23:22:03     - Fork checks: 68.39ms [38.97s]\r\n2015-11-06 23:22:03       - Connect 1501 transactions: 178.28ms (0.119ms/tx, 0.043ms/txin) [92.67s]\r\n2015-11-06 23:22:03     - Verify 4109 txins: 245.83ms (0.060ms/txin) [150.33s]\r\n2015-11-06 23:22:03     - Index writing: 0.04ms [0.06s]\r\n2015-11-06 23:22:03     - Callbacks: 0.03ms [0.03s]\r\n2015-11-06 23:22:03   - Connect total: 318.09ms [191.65s]\r\n2015-11-06 23:22:03   - Flush: 26.23ms [14.01s]\r\n2015-11-06 23:22:03   - Writing chainstate: 2.05ms [0.67s]\r\n\r\n2015-11-06 23:32:37 UpdateTip: new best=00000000000000000e168ce1bbcdab4551cc35e9d5128b75e5d603143cdc970a  height=357552  log2_work=82.822239  tx=69465120  date=2015-05-22 12:42:52 progress=0.799210  cache=1120.9MiB(601684tx)\r\n2015-11-06 23:32:37   - Connect postprocess: 5.06ms [2.85s]\r\n2015-11-06 23:32:37 - Connect block: 198.12ms [160.29s]\r\n2015-11-06 23:32:37   - Load block from disk: 14.21ms [7.67s]\r\n2015-11-06 23:32:37     - Sanity checks: 2.79ms [1.81s]\r\n2015-11-06 23:32:37     - Fork checks: 0.04ms [0.14s]\r\n2015-11-06 23:32:37       - Connect 1501 transactions: 173.07ms (0.115ms/tx, 0.042ms/txin) [96.87s]\r\n2015-11-06 23:32:37     - Verify 4109 txins: 196.50ms (0.048ms/txin) [131.39s]\r\n2015-11-06 23:32:37     - Index writing: 0.08ms [0.07s]\r\n2015-11-06 23:32:37     - Callbacks: 0.07ms [0.03s]\r\n2015-11-06 23:32:37   - Connect total: 200.48ms [134.03s]\r\n2015-11-06 23:32:37   - Flush: 27.12ms [15.16s]\r\n2015-11-06 23:32:37   - Writing chainstate: 2.27ms [0.83s]\r\n",
      "created_at" : "2015-11-06T23:33:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6931#issuecomment-154576903",
      "id" : 154576903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6931",
      "updated_at" : "2015-11-06T23:33:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154576903",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "In other words, of some random set of blocks (~356331-357552), this pull took the ConnectBlock time from 230s to 160s!",
      "created_at" : "2015-11-06T23:34:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6931#issuecomment-154577005",
      "id" : 154577005,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6931",
      "updated_at" : "2015-11-06T23:36:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154577005",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Concept & code review ACK.",
      "created_at" : "2015-11-07T00:32:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6931#issuecomment-154586807",
      "id" : 154586807,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6931",
      "updated_at" : "2015-11-07T00:32:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154586807",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK modulo duplicate testnet coinbases issue.",
      "created_at" : "2015-11-10T21:06:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6931#issuecomment-155565732",
      "id" : 155565732,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6931",
      "updated_at" : "2015-11-10T21:06:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155565732",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Just confirmed that all coinbases from block #0 to block #21112 on testnet3 are unique.\r\n\r\nAlso successfully did a sync from scratch on testnet3.\r\n\r\nACK",
      "created_at" : "2015-11-10T22:35:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6931#issuecomment-155589660",
      "id" : 155589660,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6931",
      "updated_at" : "2015-11-10T22:35:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155589660",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Untested ACK",
      "created_at" : "2015-11-11T07:21:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6931#issuecomment-155690746",
      "id" : 155690746,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6931",
      "updated_at" : "2015-11-11T07:21:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155690746",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
