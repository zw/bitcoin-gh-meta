[
   {
      "body" : "Concept ACK\n\nSent from my iPhone\n\n> On Oct 30, 2015, at 6:20 PM, Pieter Wuille <notifications@github.com> wrote:\n> \n> Changes the -maxsigcachesize argument from entries to megabytes\n> Change the default to 40 MiB (as opposed to ~10 MiB before), corresponding to over 500000 entries on 64-bit systems.\n> Store salted SHA256 hashes in the cache, rather than full entries.\n> Switch implementation from std::set to boost::unordered_set (smaller and faster)\n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/bitcoin/bitcoin/pull/6918\n> \n> Commit Summary\n> \n> Make sigcache faster and more efficient\n> File Changes\n> \n> M src/init.cpp (3)\n> M src/script/sigcache.cpp (80)\n> M src/script/sigcache.h (4)\n> Patch Links:\n> \n> https://github.com/bitcoin/bitcoin/pull/6918.patch\n> https://github.com/bitcoin/bitcoin/pull/6918.diff\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub.\n> \n",
      "created_at" : "2015-10-30T22:25:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#issuecomment-152664401",
      "id" : 152664401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6918",
      "updated_at" : "2015-10-30T22:25:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/152664401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "concept ACK",
      "created_at" : "2015-10-30T22:30:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#issuecomment-152665537",
      "id" : 152665537,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6918",
      "updated_at" : "2015-10-30T22:30:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/152665537",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43563101"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43563101"
         }
      },
      "body" : "OOI, what is the time complexity of `memusage::DynamicUsage`?",
      "commit_id" : "69d373ff6693de204bdf58cbc90f8a26d8f711c8",
      "created_at" : "2015-10-30T23:40:54Z",
      "diff_hunk" : "@@ -23,52 +36,55 @@ namespace {\n class CSignatureCache\n {\n private:\n-     //! sigdata_type is (signature hash, signature, public key):\n-    typedef boost::tuple<uint256, std::vector<unsigned char>, CPubKey> sigdata_type;\n-    std::set< sigdata_type> setValid;\n+     //! Entries are SHA256(nonce || signature hash || public key || signature):\n+    uint256 nonce;\n+    size_t nMaxSize;\n+    typedef boost::unordered_set<uint256, CSignatureCacheHasher> map_type;\n+    map_type setValid;\n     boost::shared_mutex cs_sigcache;\n \n+\n public:\n+    CSignatureCache()\n+    {\n+        GetRandBytes(nonce.begin(), 32);\n+        nMaxSize = GetArg(\"-maxsigcachesize\", DEFAULT_MAX_SIG_CACHE_SIZE) * ((size_t) 1 << 20);\n+    }\n+\n+    void\n+    ComputeEntry(uint256& entry, const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubkey)\n+    {\n+        CSHA256().Write(nonce.begin(), 32).Write(hash.begin(), 32).Write(&pubkey[0], pubkey.size()).Write(&vchSig[0], vchSig.size()).Finalize(entry.begin());\n+    }\n+\n     bool\n-    Get(const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubKey)\n+    Get(const uint256& entry)\n     {\n         boost::shared_lock<boost::shared_mutex> lock(cs_sigcache);\n+        return setValid.count(entry);\n+    }\n \n-        sigdata_type k(hash, vchSig, pubKey);\n-        std::set<sigdata_type>::iterator mi = setValid.find(k);\n-        if (mi != setValid.end())\n-            return true;\n-        return false;\n+    void Erase(const uint256& entry)\n+    {\n+        boost::unique_lock<boost::shared_mutex> lock(cs_sigcache);\n+        setValid.erase(entry);\n     }\n \n-    void Set(const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubKey)\n+    void Set(const uint256& entry)\n     {\n-        // DoS prevention: limit cache size to less than 10MB\n-        // (~200 bytes per cache entry times 50,000 entries)\n-        // Since there are a maximum of 20,000 signature operations per block\n-        // 50,000 is a reasonable default.\n-        int64_t nMaxCacheSize = GetArg(\"-maxsigcachesize\", 50000);\n-        if (nMaxCacheSize <= 0) return;\n+        if (nMaxSize <= 0) return;\n \n         boost::unique_lock<boost::shared_mutex> lock(cs_sigcache);\n-\n-        while (static_cast<int64_t>(setValid.size()) > nMaxCacheSize)\n+        while (memusage::DynamicUsage(setValid) > nMaxSize)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43563101",
      "id" : 43563101,
      "original_commit_id" : "e15b9beb617bc7ecedb267310dd3cdcd5628c433",
      "original_position" : 93,
      "path" : "src/script/sigcache.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918",
      "updated_at" : "2015-11-02T01:01:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43563101",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43563145"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43563145"
         }
      },
      "body" : "nit: technically, this would mean it could briefly be greater than the allowed memory limits.",
      "commit_id" : "69d373ff6693de204bdf58cbc90f8a26d8f711c8",
      "created_at" : "2015-10-30T23:41:50Z",
      "diff_hunk" : "@@ -23,52 +36,55 @@ namespace {\n class CSignatureCache\n {\n private:\n-     //! sigdata_type is (signature hash, signature, public key):\n-    typedef boost::tuple<uint256, std::vector<unsigned char>, CPubKey> sigdata_type;\n-    std::set< sigdata_type> setValid;\n+     //! Entries are SHA256(nonce || signature hash || public key || signature):\n+    uint256 nonce;\n+    size_t nMaxSize;\n+    typedef boost::unordered_set<uint256, CSignatureCacheHasher> map_type;\n+    map_type setValid;\n     boost::shared_mutex cs_sigcache;\n \n+\n public:\n+    CSignatureCache()\n+    {\n+        GetRandBytes(nonce.begin(), 32);\n+        nMaxSize = GetArg(\"-maxsigcachesize\", DEFAULT_MAX_SIG_CACHE_SIZE) * ((size_t) 1 << 20);\n+    }\n+\n+    void\n+    ComputeEntry(uint256& entry, const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubkey)\n+    {\n+        CSHA256().Write(nonce.begin(), 32).Write(hash.begin(), 32).Write(&pubkey[0], pubkey.size()).Write(&vchSig[0], vchSig.size()).Finalize(entry.begin());\n+    }\n+\n     bool\n-    Get(const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubKey)\n+    Get(const uint256& entry)\n     {\n         boost::shared_lock<boost::shared_mutex> lock(cs_sigcache);\n+        return setValid.count(entry);\n+    }\n \n-        sigdata_type k(hash, vchSig, pubKey);\n-        std::set<sigdata_type>::iterator mi = setValid.find(k);\n-        if (mi != setValid.end())\n-            return true;\n-        return false;\n+    void Erase(const uint256& entry)\n+    {\n+        boost::unique_lock<boost::shared_mutex> lock(cs_sigcache);\n+        setValid.erase(entry);\n     }\n \n-    void Set(const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubKey)\n+    void Set(const uint256& entry)\n     {\n-        // DoS prevention: limit cache size to less than 10MB\n-        // (~200 bytes per cache entry times 50,000 entries)\n-        // Since there are a maximum of 20,000 signature operations per block\n-        // 50,000 is a reasonable default.\n-        int64_t nMaxCacheSize = GetArg(\"-maxsigcachesize\", 50000);\n-        if (nMaxCacheSize <= 0) return;\n+        if (nMaxSize <= 0) return;\n \n         boost::unique_lock<boost::shared_mutex> lock(cs_sigcache);\n-\n-        while (static_cast<int64_t>(setValid.size()) > nMaxCacheSize)\n+        while (memusage::DynamicUsage(setValid) > nMaxSize)\n         {\n-            // Evict a random entry. Random because that helps\n-            // foil would-be DoS attackers who might try to pre-generate\n-            // and re-use a set of valid signatures just-slightly-greater\n-            // than our cache size.\n-            uint256 randomHash = GetRandHash();\n-            std::vector<unsigned char> unused;\n-            std::set<sigdata_type>::iterator it =\n-                setValid.lower_bound(sigdata_type(randomHash, unused, unused));\n-            if (it == setValid.end())\n-                it = setValid.begin();\n-            setValid.erase(*it);\n+            map_type::size_type s = GetRand(setValid.bucket_count());\n+            map_type::local_iterator it = setValid.begin(s);\n+            if (it != setValid.end(s)) {\n+                setValid.erase(*it);\n+            }\n         }\n \n-        sigdata_type k(hash, vchSig, pubKey);\n-        setValid.insert(k);\n+        setValid.insert(entry);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43563145",
      "id" : 43563145,
      "original_commit_id" : "e15b9beb617bc7ecedb267310dd3cdcd5628c433",
      "original_position" : 115,
      "path" : "src/script/sigcache.cpp",
      "position" : 113,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918",
      "updated_at" : "2015-11-02T01:01:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43563145",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "concept ACK, utACK :+1: ",
      "created_at" : "2015-10-30T23:42:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#issuecomment-152674483",
      "id" : 152674483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6918",
      "updated_at" : "2015-10-30T23:42:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/152674483",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43563182"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43563182"
         }
      },
      "body" : "`Get` is such a weird name, its really more like `Contains`?",
      "commit_id" : "69d373ff6693de204bdf58cbc90f8a26d8f711c8",
      "created_at" : "2015-10-30T23:42:50Z",
      "diff_hunk" : "@@ -23,52 +36,55 @@ namespace {\n class CSignatureCache\n {\n private:\n-     //! sigdata_type is (signature hash, signature, public key):\n-    typedef boost::tuple<uint256, std::vector<unsigned char>, CPubKey> sigdata_type;\n-    std::set< sigdata_type> setValid;\n+     //! Entries are SHA256(nonce || signature hash || public key || signature):\n+    uint256 nonce;\n+    size_t nMaxSize;\n+    typedef boost::unordered_set<uint256, CSignatureCacheHasher> map_type;\n+    map_type setValid;\n     boost::shared_mutex cs_sigcache;\n \n+\n public:\n+    CSignatureCache()\n+    {\n+        GetRandBytes(nonce.begin(), 32);\n+        nMaxSize = GetArg(\"-maxsigcachesize\", DEFAULT_MAX_SIG_CACHE_SIZE) * ((size_t) 1 << 20);\n+    }\n+\n+    void\n+    ComputeEntry(uint256& entry, const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubkey)\n+    {\n+        CSHA256().Write(nonce.begin(), 32).Write(hash.begin(), 32).Write(&pubkey[0], pubkey.size()).Write(&vchSig[0], vchSig.size()).Finalize(entry.begin());\n+    }\n+\n     bool\n-    Get(const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubKey)\n+    Get(const uint256& entry)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43563182",
      "id" : 43563182,
      "original_commit_id" : "e15b9beb617bc7ecedb267310dd3cdcd5628c433",
      "original_position" : 62,
      "path" : "src/script/sigcache.cpp",
      "position" : 60,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918",
      "updated_at" : "2015-11-02T01:01:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43563182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43563220"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43563220"
         }
      },
      "body" : "`std::static_cast<bool>(count)` or `count > 0`?",
      "commit_id" : "69d373ff6693de204bdf58cbc90f8a26d8f711c8",
      "created_at" : "2015-10-30T23:43:40Z",
      "diff_hunk" : "@@ -23,52 +36,55 @@ namespace {\n class CSignatureCache\n {\n private:\n-     //! sigdata_type is (signature hash, signature, public key):\n-    typedef boost::tuple<uint256, std::vector<unsigned char>, CPubKey> sigdata_type;\n-    std::set< sigdata_type> setValid;\n+     //! Entries are SHA256(nonce || signature hash || public key || signature):\n+    uint256 nonce;\n+    size_t nMaxSize;\n+    typedef boost::unordered_set<uint256, CSignatureCacheHasher> map_type;\n+    map_type setValid;\n     boost::shared_mutex cs_sigcache;\n \n+\n public:\n+    CSignatureCache()\n+    {\n+        GetRandBytes(nonce.begin(), 32);\n+        nMaxSize = GetArg(\"-maxsigcachesize\", DEFAULT_MAX_SIG_CACHE_SIZE) * ((size_t) 1 << 20);\n+    }\n+\n+    void\n+    ComputeEntry(uint256& entry, const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubkey)\n+    {\n+        CSHA256().Write(nonce.begin(), 32).Write(hash.begin(), 32).Write(&pubkey[0], pubkey.size()).Write(&vchSig[0], vchSig.size()).Finalize(entry.begin());\n+    }\n+\n     bool\n-    Get(const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubKey)\n+    Get(const uint256& entry)\n     {\n         boost::shared_lock<boost::shared_mutex> lock(cs_sigcache);\n+        return setValid.count(entry);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43563220",
      "id" : 43563220,
      "original_commit_id" : "e15b9beb617bc7ecedb267310dd3cdcd5628c433",
      "original_position" : 65,
      "path" : "src/script/sigcache.cpp",
      "position" : 63,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918",
      "updated_at" : "2015-11-02T01:01:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43563220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43563232"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43563232"
         }
      },
      "body" : "correct, but we're talking about ~80 bytes...",
      "commit_id" : "69d373ff6693de204bdf58cbc90f8a26d8f711c8",
      "created_at" : "2015-10-30T23:43:52Z",
      "diff_hunk" : "@@ -23,52 +36,55 @@ namespace {\n class CSignatureCache\n {\n private:\n-     //! sigdata_type is (signature hash, signature, public key):\n-    typedef boost::tuple<uint256, std::vector<unsigned char>, CPubKey> sigdata_type;\n-    std::set< sigdata_type> setValid;\n+     //! Entries are SHA256(nonce || signature hash || public key || signature):\n+    uint256 nonce;\n+    size_t nMaxSize;\n+    typedef boost::unordered_set<uint256, CSignatureCacheHasher> map_type;\n+    map_type setValid;\n     boost::shared_mutex cs_sigcache;\n \n+\n public:\n+    CSignatureCache()\n+    {\n+        GetRandBytes(nonce.begin(), 32);\n+        nMaxSize = GetArg(\"-maxsigcachesize\", DEFAULT_MAX_SIG_CACHE_SIZE) * ((size_t) 1 << 20);\n+    }\n+\n+    void\n+    ComputeEntry(uint256& entry, const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubkey)\n+    {\n+        CSHA256().Write(nonce.begin(), 32).Write(hash.begin(), 32).Write(&pubkey[0], pubkey.size()).Write(&vchSig[0], vchSig.size()).Finalize(entry.begin());\n+    }\n+\n     bool\n-    Get(const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubKey)\n+    Get(const uint256& entry)\n     {\n         boost::shared_lock<boost::shared_mutex> lock(cs_sigcache);\n+        return setValid.count(entry);\n+    }\n \n-        sigdata_type k(hash, vchSig, pubKey);\n-        std::set<sigdata_type>::iterator mi = setValid.find(k);\n-        if (mi != setValid.end())\n-            return true;\n-        return false;\n+    void Erase(const uint256& entry)\n+    {\n+        boost::unique_lock<boost::shared_mutex> lock(cs_sigcache);\n+        setValid.erase(entry);\n     }\n \n-    void Set(const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubKey)\n+    void Set(const uint256& entry)\n     {\n-        // DoS prevention: limit cache size to less than 10MB\n-        // (~200 bytes per cache entry times 50,000 entries)\n-        // Since there are a maximum of 20,000 signature operations per block\n-        // 50,000 is a reasonable default.\n-        int64_t nMaxCacheSize = GetArg(\"-maxsigcachesize\", 50000);\n-        if (nMaxCacheSize <= 0) return;\n+        if (nMaxSize <= 0) return;\n \n         boost::unique_lock<boost::shared_mutex> lock(cs_sigcache);\n-\n-        while (static_cast<int64_t>(setValid.size()) > nMaxCacheSize)\n+        while (memusage::DynamicUsage(setValid) > nMaxSize)\n         {\n-            // Evict a random entry. Random because that helps\n-            // foil would-be DoS attackers who might try to pre-generate\n-            // and re-use a set of valid signatures just-slightly-greater\n-            // than our cache size.\n-            uint256 randomHash = GetRandHash();\n-            std::vector<unsigned char> unused;\n-            std::set<sigdata_type>::iterator it =\n-                setValid.lower_bound(sigdata_type(randomHash, unused, unused));\n-            if (it == setValid.end())\n-                it = setValid.begin();\n-            setValid.erase(*it);\n+            map_type::size_type s = GetRand(setValid.bucket_count());\n+            map_type::local_iterator it = setValid.begin(s);\n+            if (it != setValid.end(s)) {\n+                setValid.erase(*it);\n+            }\n         }\n \n-        sigdata_type k(hash, vchSig, pubKey);\n-        setValid.insert(k);\n+        setValid.insert(entry);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43563232",
      "id" : 43563232,
      "original_commit_id" : "e15b9beb617bc7ecedb267310dd3cdcd5628c433",
      "original_position" : 115,
      "path" : "src/script/sigcache.cpp",
      "position" : 113,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918",
      "updated_at" : "2015-11-02T01:01:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43563232",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43563293"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43563293"
         }
      },
      "body" : "O(1).",
      "commit_id" : "69d373ff6693de204bdf58cbc90f8a26d8f711c8",
      "created_at" : "2015-10-30T23:44:40Z",
      "diff_hunk" : "@@ -23,52 +36,55 @@ namespace {\n class CSignatureCache\n {\n private:\n-     //! sigdata_type is (signature hash, signature, public key):\n-    typedef boost::tuple<uint256, std::vector<unsigned char>, CPubKey> sigdata_type;\n-    std::set< sigdata_type> setValid;\n+     //! Entries are SHA256(nonce || signature hash || public key || signature):\n+    uint256 nonce;\n+    size_t nMaxSize;\n+    typedef boost::unordered_set<uint256, CSignatureCacheHasher> map_type;\n+    map_type setValid;\n     boost::shared_mutex cs_sigcache;\n \n+\n public:\n+    CSignatureCache()\n+    {\n+        GetRandBytes(nonce.begin(), 32);\n+        nMaxSize = GetArg(\"-maxsigcachesize\", DEFAULT_MAX_SIG_CACHE_SIZE) * ((size_t) 1 << 20);\n+    }\n+\n+    void\n+    ComputeEntry(uint256& entry, const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubkey)\n+    {\n+        CSHA256().Write(nonce.begin(), 32).Write(hash.begin(), 32).Write(&pubkey[0], pubkey.size()).Write(&vchSig[0], vchSig.size()).Finalize(entry.begin());\n+    }\n+\n     bool\n-    Get(const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubKey)\n+    Get(const uint256& entry)\n     {\n         boost::shared_lock<boost::shared_mutex> lock(cs_sigcache);\n+        return setValid.count(entry);\n+    }\n \n-        sigdata_type k(hash, vchSig, pubKey);\n-        std::set<sigdata_type>::iterator mi = setValid.find(k);\n-        if (mi != setValid.end())\n-            return true;\n-        return false;\n+    void Erase(const uint256& entry)\n+    {\n+        boost::unique_lock<boost::shared_mutex> lock(cs_sigcache);\n+        setValid.erase(entry);\n     }\n \n-    void Set(const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubKey)\n+    void Set(const uint256& entry)\n     {\n-        // DoS prevention: limit cache size to less than 10MB\n-        // (~200 bytes per cache entry times 50,000 entries)\n-        // Since there are a maximum of 20,000 signature operations per block\n-        // 50,000 is a reasonable default.\n-        int64_t nMaxCacheSize = GetArg(\"-maxsigcachesize\", 50000);\n-        if (nMaxCacheSize <= 0) return;\n+        if (nMaxSize <= 0) return;\n \n         boost::unique_lock<boost::shared_mutex> lock(cs_sigcache);\n-\n-        while (static_cast<int64_t>(setValid.size()) > nMaxCacheSize)\n+        while (memusage::DynamicUsage(setValid) > nMaxSize)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43563293",
      "id" : 43563293,
      "original_commit_id" : "e15b9beb617bc7ecedb267310dd3cdcd5628c433",
      "original_position" : 93,
      "path" : "src/script/sigcache.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918",
      "updated_at" : "2015-11-02T01:01:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43563293",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Added a commit that removes cache entries after they've been seen in a block, so the cache remains fresh.",
      "created_at" : "2015-10-31T00:16:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#issuecomment-152677533",
      "id" : 152677533,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6918",
      "updated_at" : "2015-10-31T00:16:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/152677533",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "re-ACK",
      "created_at" : "2015-10-31T00:18:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#issuecomment-152677679",
      "id" : 152677679,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6918",
      "updated_at" : "2015-10-31T00:18:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/152677679",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43569898"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43569898"
         }
      },
      "body" : "Just a qustion to understand the motivation, why is here the opening bracket in the same line and below (line 48) it's on a new line?",
      "commit_id" : "69d373ff6693de204bdf58cbc90f8a26d8f711c8",
      "created_at" : "2015-10-31T09:20:59Z",
      "diff_hunk" : "@@ -5,17 +5,30 @@\n \n #include \"sigcache.h\"\n \n+#include \"memusage.h\"\n #include \"pubkey.h\"\n #include \"random.h\"\n #include \"uint256.h\"\n #include \"util.h\"\n \n #include <boost/thread.hpp>\n-#include <boost/tuple/tuple_comparison.hpp>\n+#include <boost/unordered_set.hpp>\n \n namespace {\n \n /**\n+ * We're hashing a nonce into the entries themselves, so we don't need extra\n+ * blinding in the set hash computation.\n+ */\n+class CSignatureCacheHasher\n+{\n+public:\n+    size_t operator()(const uint256& key) const {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43569898",
      "id" : 43569898,
      "original_commit_id" : "0b9e9dca4e88e41f7dae4fd9cd8e0f93fabafe01",
      "original_position" : 23,
      "path" : "src/script/sigcache.cpp",
      "position" : 23,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918",
      "updated_at" : "2015-11-02T01:01:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43569898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Added a commit to not wipe the cache from TBV.",
      "created_at" : "2015-11-02T01:02:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#issuecomment-152884702",
      "id" : 152884702,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6918",
      "updated_at" : "2015-11-02T01:02:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/152884702",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Currently gathering statistics about the cache size - hitrate relation.",
      "created_at" : "2015-11-02T07:14:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#issuecomment-152939539",
      "id" : 152939539,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6918",
      "updated_at" : "2015-11-02T07:14:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/152939539",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43690703"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43690703"
         }
      },
      "body" : "I think it's going for a getter/setter paradigm(see: Set function below), but I think the names could indeed be improved. It's confusing to have \"Set\" be both the type of data structure and the primary way of updating it, imo. ",
      "commit_id" : "69d373ff6693de204bdf58cbc90f8a26d8f711c8",
      "created_at" : "2015-11-02T22:12:21Z",
      "diff_hunk" : "@@ -23,52 +36,55 @@ namespace {\n class CSignatureCache\n {\n private:\n-     //! sigdata_type is (signature hash, signature, public key):\n-    typedef boost::tuple<uint256, std::vector<unsigned char>, CPubKey> sigdata_type;\n-    std::set< sigdata_type> setValid;\n+     //! Entries are SHA256(nonce || signature hash || public key || signature):\n+    uint256 nonce;\n+    size_t nMaxSize;\n+    typedef boost::unordered_set<uint256, CSignatureCacheHasher> map_type;\n+    map_type setValid;\n     boost::shared_mutex cs_sigcache;\n \n+\n public:\n+    CSignatureCache()\n+    {\n+        GetRandBytes(nonce.begin(), 32);\n+        nMaxSize = GetArg(\"-maxsigcachesize\", DEFAULT_MAX_SIG_CACHE_SIZE) * ((size_t) 1 << 20);\n+    }\n+\n+    void\n+    ComputeEntry(uint256& entry, const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubkey)\n+    {\n+        CSHA256().Write(nonce.begin(), 32).Write(hash.begin(), 32).Write(&pubkey[0], pubkey.size()).Write(&vchSig[0], vchSig.size()).Finalize(entry.begin());\n+    }\n+\n     bool\n-    Get(const uint256 &hash, const std::vector<unsigned char>& vchSig, const CPubKey& pubKey)\n+    Get(const uint256& entry)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#discussion_r43690703",
      "id" : 43690703,
      "original_commit_id" : "e15b9beb617bc7ecedb267310dd3cdcd5628c433",
      "original_position" : 62,
      "path" : "src/script/sigcache.cpp",
      "position" : 60,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6918",
      "updated_at" : "2015-11-02T22:12:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43690703",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-11-02T22:37:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#issuecomment-153180012",
      "id" : 153180012,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6918",
      "updated_at" : "2015-11-02T22:37:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/153180012",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "body" : "Concept ACK.  However in my first attempt at benchmarking I'm not seeing any speedup with this code change (in fact block verification times seem to have gotten very, very slightly slower for some reason).  Will continue to debug and try to see if my benchmarking is broken, or if there's some effect here we're missing.",
      "created_at" : "2015-11-06T13:31:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6918#issuecomment-154410373",
      "id" : 154410373,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6918",
      "updated_at" : "2015-11-06T13:31:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154410373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   }
]
