[
   {
      "body" : "I'm very much in favor of encapsulating the actual logic for many RPC methods to where it belongs. However, that doesn't mean that the conversion to JSON should happen there.\r\n\r\nFor example, if CWallet and CWalletTx had a cleaner interface for requesting information, this could reduce duplication between RPC and GUI. However, that probably means something a thin layer in between of data structure to represent information extracted from and sent to the wallet. The GUI would inspect these structure and convert them to GUI elements, the RPC would inspent them and convert to JSON.",
      "created_at" : "2012-12-04T17:41:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2071#issuecomment-11006931",
      "id" : 11006931,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2071",
      "updated_at" : "2012-12-04T17:41:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11006931",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Yeah, I'm going to back out the JSON stuff. My eventual goal for this is to make CWallet a fully-functional first-class object, hide CWalletDB entirely, and have the RPC methods talking strictly to the wallet object. In addition to the \"standard\" benefits of proper encapsulation, this will eventually allow the client to support, for example, multiple wallets.",
      "created_at" : "2012-12-04T17:45:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2071#issuecomment-11007093",
      "id" : 11007093,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2071",
      "updated_at" : "2012-12-04T17:45:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11007093",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/118625?v=3",
         "events_url" : "https://api.github.com/users/mikegogulski/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikegogulski/followers",
         "following_url" : "https://api.github.com/users/mikegogulski/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikegogulski/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikegogulski",
         "id" : 118625,
         "login" : "mikegogulski",
         "organizations_url" : "https://api.github.com/users/mikegogulski/orgs",
         "received_events_url" : "https://api.github.com/users/mikegogulski/received_events",
         "repos_url" : "https://api.github.com/users/mikegogulski/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikegogulski/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikegogulski/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikegogulski"
      }
   },
   {
      "body" : "@mikegogulski Sounds great, I think that's what we want. Note that there are some plans to move to another database backend for the wallets. Just so you don't waste effort on code that's going to be thrown out anyway.",
      "created_at" : "2012-12-04T17:49:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2071#issuecomment-11007249",
      "id" : 11007249,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2071",
      "updated_at" : "2012-12-04T17:49:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11007249",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/82afcf6b0f6b6f286dca8d5444c43997bb602e1b for binaries and test log.",
      "created_at" : "2012-12-04T17:52:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2071#issuecomment-11007371",
      "id" : 11007371,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2071",
      "updated_at" : "2012-12-04T17:52:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11007371",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Got it. I think it should be no problem, since the model I'm stumbling toward is like:\r\n```\r\nconsumer(e.g. bitcoind, bitcoin-qt, others)->walletRPCinterface->walletobject->...\r\n->...walletdbobject->nativedbobject\r\n->...blockchainRPCinterface->blockchainobject->whatever\r\n```\r\nwhere walletRPCinterface is the one and only interface to the wallet object, nothing but the wallet object talks to the wallet database object, and the wallet interacts with the blockchain strictly via a (new) RPC interface.",
      "created_at" : "2012-12-04T18:20:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2071#issuecomment-11008492",
      "id" : 11008492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2071",
      "updated_at" : "2012-12-04T18:20:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11008492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/118625?v=3",
         "events_url" : "https://api.github.com/users/mikegogulski/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikegogulski/followers",
         "following_url" : "https://api.github.com/users/mikegogulski/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikegogulski/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikegogulski",
         "id" : 118625,
         "login" : "mikegogulski",
         "organizations_url" : "https://api.github.com/users/mikegogulski/orgs",
         "received_events_url" : "https://api.github.com/users/mikegogulski/received_events",
         "repos_url" : "https://api.github.com/users/mikegogulski/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikegogulski/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikegogulski/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikegogulski"
      }
   }
]
