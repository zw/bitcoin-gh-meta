[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I was able to fund a raw transaction using watchonly outputs for which I don't have a local copy of the public keys using this workaround: https://github.com/dooglus/bitcoin/commit/0b29c31da9d711ce87b7d7f0987fc3f57f1b7e91\n\nI have the public keys on an airgapped machine, where I intend to sign the funded raw transaction. I don't want to have to have the public keys on my online machine.\n\nIt's probably not the correct fix, but it demonstrates where the problem is.\n",
      "created_at" : "2016-04-16T05:03:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7879#issuecomment-210736348",
      "id" : 210736348,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7879",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDIxMDczNjM0OA==",
      "updated_at" : "2016-04-16T05:03:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/210736348",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/573356?v=4",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "node_id" : "MDQ6VXNlcjU3MzM1Ng==",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@dooglus Is this still an issue?\r\n\r\nIf so, you might also write a functional test that exercises the logic.",
      "created_at" : "2018-07-16T18:16:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7879#issuecomment-405333437",
      "id" : 405333437,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7879",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNTMzMzQzNw==",
      "updated_at" : "2018-07-16T18:16:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/405333437",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke It is still an issue. It's quite easy to reproduce. I'm starting with two brand new wallets in the following.\r\n\r\nIf I use `importaddress`, I'm unable to use fundrawtransaction:\r\n\r\n    $ bitcoin-cli -rpcwallet=wallet.dat.without-pubkey importaddress 31tWekVaFzyNmnHUpnEyXNxU5LFNLLPY1R '' false\r\n    $ bitcoin-cli -rpcwallet=wallet.dat.without-pubkey importprunedfunds 01000000021dbc1565f9384a9734ca989495f5f6af293fa138f33d7ec07d024ba36f4040d7010000006b483045022100e6621fab2ea54ffcfca7a23f72016726f145c664f13e075321aa5bcdcf0f395d0220149f7cdada8a49fa4c9b98a339f488e07d3ca99aee0fb4645b40662eeb6fff34012103c1d769f2c71f29ee7903958ff0feba19d369ae6962958d3e4c75c0cf574f20b7ffffffff0e732a7bb9bca70ad7419710a6547cfa6141df7b51bbcdabad6f66fc17d56d43010000006a47304402202690fb573848bfadfba74da2d7de14e52fb5e6e256f176ee6d5b40478e7fc1680220619a4267cf43e6b49ad41525e618f010cf304b2da8b0f252cada26b1439e3519012103af3c9a39f55efdcd497595935ffff1f0ff0974a966780d9698d5b60fc6c7e5c0ffffffff0227158c00000000001976a91462fc24c1381521b89da1749f51e5c61124dba0c988ac00e1f5050000000017a914022c8e671bef27b8b6ebea31d40608e0ba8444a78700000000 0000002096711ff59ef599014f92c3969abbef7cbfbabb7b61ad23000000000000000000d5c0b889391aa9f264f300afda71731f3d5ea7965949ff90b07825ca46a5833707a13a5b287a3417a08e64c3050900000ddc84846cdb49891e8fb6f7340cf0f0b4e5cc5a0056fae2fdf45fd7031b00ad2335c710e38a998f33afa3c237620544b7ef2ae1ed11ff1a4148d429afd1a0c4826369a4d2ab7b1bf21ceecc717de9f32311aa52065d51dd9337978070175dcc95867d2c8b7dff2cdc6064886d59a584c62646dfa06df416166cad1239da9d8808465252f1ee50c409aecd247c59b5ccd9c26b54707615a683a445e035f626b3fa6140d95433e014a8a033ba2ef6bfde46f138850c601e4ea4bcb1d88e09fe0b7be1361fa3d96c58be1dabbc0ab551aa9e93b3742c169a442e8aa7e4fe87568ada6e183c892b2ad1af439c013935e8058aae9f60bb0a3b48932f7018194e1705dff0b85157086409d68bfc664eefa1278f330d3d965ff1bc105e8b13f951fa425cef39ec9b6a444cd6de8061245c59ab00c559ea650723f96381a865c0a4d4a2e1dc65e28364622d34b64c0dccbbe46d84ea3a05cf6de09257d97aa268f9e9fbb5be8eb80776ae1d289cf41586e64c6f79f59533bc392b92831897ed66d92c3ccf3726328012cde8c825667d4b94e1ca200ae2603f5b1fb3307551d98717c16fcf04abdd0500\r\n    $ bitcoin-cli -rpcwallet=wallet.dat.without-pubkey listunspent\r\n    [\r\n      {\r\n        \"txid\": \"da8a5687fee4a78a2e449a162c74b3939eaa51b50abcab1dbe586cd9a31f36e1\",\r\n        \"vout\": 1,\r\n        \"address\": \"31tWekVaFzyNmnHUpnEyXNxU5LFNLLPY1R\",\r\n        \"account\": \"\",\r\n        \"scriptPubKey\": \"a914022c8e671bef27b8b6ebea31d40608e0ba8444a787\",\r\n        \"amount\": 1.00000000,\r\n        \"confirmations\": 1967,\r\n        \"spendable\": false,\r\n        \"solvable\": false,\r\n        \"safe\": true\r\n      }\r\n    ]\r\n    $ bitcoin-cli -rpcwallet=wallet.dat.without-pubkey createrawtransaction '[]' '{\"31tWekVaFzyNmnHUpnEyXNxU5LFNLLPY1R\":0.9}'\r\n    020000000001804a5d050000000017a914022c8e671bef27b8b6ebea31d40608e0ba8444a78700000000\r\n    $ bitcoin-cli -rpcwallet=wallet.dat.without-pubkey fundrawtransaction 020000000001804a5d050000000017a914022c8e671bef27b8b6ebea31d40608e0ba8444a78700000000 '{\"includeWatching\":true}'\r\n    error code: -4\r\n    error message:\r\n    Insufficient funds\r\n\r\nBut if I use `importpubkey` instead and do everything else the same, it works:\r\n\r\n    $ bitcoin-cli -rpcwallet=wallet.dat.with-pubkey importpubkey 03297f5884ce5b2afde7f420c8a38ea26c0af44423be5f6919eb47f6b947e7f243 '' false\r\n    $ bitcoin-cli -rpcwallet=wallet.dat.with-pubkey importprunedfunds 01000000021dbc1565f9384a9734ca989495f5f6af293fa138f33d7ec07d024ba36f4040d7010000006b483045022100e6621fab2ea54ffcfca7a23f72016726f145c664f13e075321aa5bcdcf0f395d0220149f7cdada8a49fa4c9b98a339f488e07d3ca99aee0fb4645b40662eeb6fff34012103c1d769f2c71f29ee7903958ff0feba19d369ae6962958d3e4c75c0cf574f20b7ffffffff0e732a7bb9bca70ad7419710a6547cfa6141df7b51bbcdabad6f66fc17d56d43010000006a47304402202690fb573848bfadfba74da2d7de14e52fb5e6e256f176ee6d5b40478e7fc1680220619a4267cf43e6b49ad41525e618f010cf304b2da8b0f252cada26b1439e3519012103af3c9a39f55efdcd497595935ffff1f0ff0974a966780d9698d5b60fc6c7e5c0ffffffff0227158c00000000001976a91462fc24c1381521b89da1749f51e5c61124dba0c988ac00e1f5050000000017a914022c8e671bef27b8b6ebea31d40608e0ba8444a78700000000 0000002096711ff59ef599014f92c3969abbef7cbfbabb7b61ad23000000000000000000d5c0b889391aa9f264f300afda71731f3d5ea7965949ff90b07825ca46a5833707a13a5b287a3417a08e64c3050900000ddc84846cdb49891e8fb6f7340cf0f0b4e5cc5a0056fae2fdf45fd7031b00ad2335c710e38a998f33afa3c237620544b7ef2ae1ed11ff1a4148d429afd1a0c4826369a4d2ab7b1bf21ceecc717de9f32311aa52065d51dd9337978070175dcc95867d2c8b7dff2cdc6064886d59a584c62646dfa06df416166cad1239da9d8808465252f1ee50c409aecd247c59b5ccd9c26b54707615a683a445e035f626b3fa6140d95433e014a8a033ba2ef6bfde46f138850c601e4ea4bcb1d88e09fe0b7be1361fa3d96c58be1dabbc0ab551aa9e93b3742c169a442e8aa7e4fe87568ada6e183c892b2ad1af439c013935e8058aae9f60bb0a3b48932f7018194e1705dff0b85157086409d68bfc664eefa1278f330d3d965ff1bc105e8b13f951fa425cef39ec9b6a444cd6de8061245c59ab00c559ea650723f96381a865c0a4d4a2e1dc65e28364622d34b64c0dccbbe46d84ea3a05cf6de09257d97aa268f9e9fbb5be8eb80776ae1d289cf41586e64c6f79f59533bc392b92831897ed66d92c3ccf3726328012cde8c825667d4b94e1ca200ae2603f5b1fb3307551d98717c16fcf04abdd0500\r\n    $ bitcoin-cli -rpcwallet=wallet.dat.with-pubkey listunspent\r\n    [\r\n      {\r\n        \"txid\": \"da8a5687fee4a78a2e449a162c74b3939eaa51b50abcab1dbe586cd9a31f36e1\",\r\n        \"vout\": 1,\r\n        \"address\": \"31tWekVaFzyNmnHUpnEyXNxU5LFNLLPY1R\",\r\n        \"account\": \"\",\r\n        \"redeemScript\": \"001440e5442f95994d108c9730d2b53a85c6c33141d7\",\r\n        \"scriptPubKey\": \"a914022c8e671bef27b8b6ebea31d40608e0ba8444a787\",\r\n        \"amount\": 1.00000000,\r\n        \"confirmations\": 1967,\r\n        \"spendable\": false,\r\n        \"solvable\": true,\r\n        \"safe\": true\r\n      }\r\n    ]\r\n    $ bitcoin-cli -rpcwallet=wallet.dat.with-pubkey createrawtransaction '[]' '{\"31tWekVaFzyNmnHUpnEyXNxU5LFNLLPY1R\":0.9}'\r\n    020000000001804a5d050000000017a914022c8e671bef27b8b6ebea31d40608e0ba8444a78700000000\r\n    $ bitcoin-cli -rpcwallet=wallet.dat.with-pubkey fundrawtransaction 020000000001804a5d050000000017a914022c8e671bef27b8b6ebea31d40608e0ba8444a78700000000 '{\"includeWatching\":true}'\r\n    {\r\n      \"hex\": \"0200000001e1361fa3d96c58be1dabbc0ab551aa9e93b3742c169a442e8aa7e4fe87568ada0100000000feffffff02759298000000000016001447470cba8d0decaacc5e790afb65f4a48cd2119d804a5d050000000017a914022c8e671bef27b8b6ebea31d40608e0ba8444a78700000000\",\r\n      \"changepos\": 0,\r\n      \"fee\": 0.00001035\r\n    }\r\n\r\nI would like to be able to keep my public keys offline and still be able to use `fundrawtransaction` to create unsigned but funded raw transactions on the online machine.",
      "created_at" : "2018-07-17T02:30:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7879#issuecomment-405439723",
      "id" : 405439723,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7879",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNTQzOTcyMw==",
      "updated_at" : "2018-07-17T02:30:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/405439723",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/573356?v=4",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "node_id" : "MDQ6VXNlcjU3MzM1Ng==",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't really understand why this should work. `importaddress` marks outputs as watchonly but unsolvable. `fundrawtransaction` needs solvable imports (pubkeys/scripts).",
      "created_at" : "2018-07-17T03:03:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7879#issuecomment-405444698",
      "id" : 405444698,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7879",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNTQ0NDY5OA==",
      "updated_at" : "2018-07-17T03:03:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/405444698",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Fair enough. I thought that when I first created this issue I was able to get `fundrawtransaction` to work without knowing the pubkey (using the commit I linked to [here](https://github.com/bitcoin/bitcoin/issues/7879#issuecomment-210736348) - but that was 2 years ago and I was probably using P2PKH addresses back then.",
      "created_at" : "2018-07-17T03:43:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7879#issuecomment-405450313",
      "id" : 405450313,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7879",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNTQ1MDMxMw==",
      "updated_at" : "2018-07-17T03:43:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/405450313",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/573356?v=4",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "node_id" : "MDQ6VXNlcjU3MzM1Ng==",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ah I see; for P2PKH you can't solve without knowing the pubkey, but you can know ahead of time what the size of a scriptSog would be.\n\nI'm not sure we should bother with that.",
      "created_at" : "2018-07-17T03:46:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7879#issuecomment-405450722",
      "id" : 405450722,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7879",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNTQ1MDcyMg==",
      "updated_at" : "2018-07-17T03:46:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/405450722",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
