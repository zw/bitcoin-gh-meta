[
   {
      "body" : "I'm not familiar with the MacPorts portfile parallel building.\r\nBut a simple `./autogen`,  `./configure`,  `make -j5` works for me.\r\n\r\nYou build log looks after a upstream issue.",
      "created_at" : "2016-04-07T18:40:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207043709",
      "id" : 207043709,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7834",
      "updated_at" : "2016-04-07T18:40:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/207043709",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "I can reproduce something similar on master:\r\n```\r\nbitcoin-master$ make clean >/dev/null 2>&1; make -j8 -w all appbundle 2>&1 | grep error\r\n  CXX      script/libbitcoinconsensus_la-script_error.lo\r\n  CXX      script/libbitcoin_consensus_a-script_error.o\r\nlibtool:   error: 'lib/libunivalue_la-univalue_read.lo' is not a valid libtool object\r\nbitcoin-master$ \r\n```\r\n",
      "created_at" : "2016-04-07T18:53:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207048438",
      "id" : 207048438,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7834",
      "updated_at" : "2016-04-07T18:53:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/207048438",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Well, the error for me is rather mysterious and odd.\r\n\r\n```\r\n:error:build Failed to build bitcoin: command execution failed\r\n:debug:build Error code: CHILDSTATUS 24589 2\r\n:debug:build Backtrace: command execution failed\r\n```\r\n\r\nWhat does that even mean?",
      "created_at" : "2016-04-07T18:57:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207049589",
      "id" : 207049589,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7834",
      "updated_at" : "2016-04-07T18:57:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/207049589",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/67036?v=3",
         "events_url" : "https://api.github.com/users/alexreg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/alexreg/followers",
         "following_url" : "https://api.github.com/users/alexreg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/alexreg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/alexreg",
         "id" : 67036,
         "login" : "alexreg",
         "organizations_url" : "https://api.github.com/users/alexreg/orgs",
         "received_events_url" : "https://api.github.com/users/alexreg/received_events",
         "repos_url" : "https://api.github.com/users/alexreg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/alexreg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/alexreg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/alexreg"
      }
   },
   {
      "body" : "I had never seen that before. Very likely something from MacPorts.",
      "created_at" : "2016-04-07T18:59:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207050267",
      "id" : 207050267,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7834",
      "updated_at" : "2016-04-07T18:59:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/207050267",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Two lines before this:\r\n```\r\n:info:build Exit code: 2\r\n:error:build Failed to build bitcoin: command execution failed\r\n```\r\n\r\nIe. make failed with error code 2. This is the same for me now on master now....\r\n\r\n```\r\nbitcoin-master pavel$ make clean >/dev/null 2>&1; make -j8 -w all appbundle >/dev/null 2>&1; echo $?\r\n2\r\nbitcoin-master pavel$ \r\n```\r\n\r\nWithout appbundle, it returns 0 here.",
      "created_at" : "2016-04-07T19:02:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207050974",
      "id" : 207050974,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7834",
      "updated_at" : "2016-04-07T19:02:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/207050974",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Interesting. So it seems the appbundle target is the non-parallelisable bit.\n\n> On 7 Apr 2016, at 20:03, paveljanik <notifications@github.com> wrote:\n> \n> Two lines before this:\n> \n> :info:build Exit code: 2\n> :error:build Failed to build bitcoin: command execution failed\n> Ie. make failed with error code 2. This is the same for me now on master now....\n> \n> bitcoin-master pavel$ make clean >/dev/null 2>&1; make -j8 -w all appbundle >/dev/null 2>&1; echo $?\n> 2\n> bitcoin-master pavel$ \n> Without appbundle, it returns 0 here.\n> \n> Ã¢ÂÂ\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub <https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207050974>\n\n",
      "created_at" : "2016-04-07T19:04:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207051600",
      "id" : 207051600,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7834",
      "updated_at" : "2016-04-07T19:04:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/207051600",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/67036?v=3",
         "events_url" : "https://api.github.com/users/alexreg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/alexreg/followers",
         "following_url" : "https://api.github.com/users/alexreg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/alexreg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/alexreg",
         "id" : 67036,
         "login" : "alexreg",
         "organizations_url" : "https://api.github.com/users/alexreg/orgs",
         "received_events_url" : "https://api.github.com/users/alexreg/received_events",
         "repos_url" : "https://api.github.com/users/alexreg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/alexreg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/alexreg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/alexreg"
      }
   },
   {
      "body" : "The parallel build seems to be non-deterministically succeeding/failing.\n\n> On 7 Apr 2016, at 20:03, paveljanik <notifications@github.com> wrote:\n> \n> Two lines before this:\n> \n> :info:build Exit code: 2\n> :error:build Failed to build bitcoin: command execution failed\n> Ie. make failed with error code 2. This is the same for me now on master now....\n> \n> bitcoin-master pavel$ make clean >/dev/null 2>&1; make -j8 -w all appbundle >/dev/null 2>&1; echo $?\n> 2\n> bitcoin-master pavel$ \n> Without appbundle, it returns 0 here.\n> \n> Ã¢ÂÂ\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub <https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207050974>\n\n",
      "created_at" : "2016-04-07T19:39:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207061032",
      "id" : 207061032,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7834",
      "updated_at" : "2016-04-07T19:39:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/207061032",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/67036?v=3",
         "events_url" : "https://api.github.com/users/alexreg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/alexreg/followers",
         "following_url" : "https://api.github.com/users/alexreg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/alexreg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/alexreg",
         "id" : 67036,
         "login" : "alexreg",
         "organizations_url" : "https://api.github.com/users/alexreg/orgs",
         "received_events_url" : "https://api.github.com/users/alexreg/received_events",
         "repos_url" : "https://api.github.com/users/alexreg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/alexreg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/alexreg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/alexreg"
      }
   },
   {
      "body" : "Looks like `univalue` is not parallel build safe when run from top level makefile with `appbundle` target. But it alone is parallel build safe here...\r\n\r\n@theuni Do you have any idea?",
      "created_at" : "2016-04-08T06:03:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207231053",
      "id" : 207231053,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7834",
      "updated_at" : "2016-04-08T06:03:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/207231053",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Interesting. I'm guessing we have overlapping recursive builds. I don't see anything that would lead to that though.\r\n\r\n@paveljanik: do you see the same problem running ```make -C src qt/bitcoin-qt``` from the top level?",
      "created_at" : "2016-04-08T16:36:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207506187",
      "id" : 207506187,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7834",
      "updated_at" : "2016-04-08T16:36:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/207506187",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "All this said, IÃ¢ÂÂve now gotten parallel builds running fine on OS X 10.11, using my MacPorts Portfile. Not sure exactly what I did though.\n\n> On 8 Apr 2016, at 17:37, Cory Fields <notifications@github.com> wrote:\n> \n> Interesting. I'm guessing we have overlapping recursive builds. I don't see anything that would lead to that though.\n> \n> @paveljanik <https://github.com/paveljanik>: do you see the same problem running make -C src qt/bitcoin-qt from the top level?\n> \n> Ã¢ÂÂ\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub <https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207506187>\n\n",
      "created_at" : "2016-04-08T16:54:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207513644",
      "id" : 207513644,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7834",
      "updated_at" : "2016-04-08T16:54:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/207513644",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/67036?v=3",
         "events_url" : "https://api.github.com/users/alexreg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/alexreg/followers",
         "following_url" : "https://api.github.com/users/alexreg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/alexreg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/alexreg",
         "id" : 67036,
         "login" : "alexreg",
         "organizations_url" : "https://api.github.com/users/alexreg/orgs",
         "received_events_url" : "https://api.github.com/users/alexreg/received_events",
         "repos_url" : "https://api.github.com/users/alexreg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/alexreg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/alexreg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/alexreg"
      }
   },
   {
      "body" : "Ok, I see. I assumed that \"-w all\" was some make option for \"warn all\" that i didn't know. It's not..\r\n\r\n\"-w\" means \"show curdir\", and \"all\" is a target.\r\n\r\nSo you're building with 2 targets: all and appbundle. In that case, yes, the recursive builds clash. There's not an easy fix for the problem because the command itself kinda doesn't make sense.\r\n\r\nTo fix, just drop the \"all\".",
      "created_at" : "2016-04-08T17:29:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207527022",
      "id" : 207527022,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7834",
      "updated_at" : "2016-04-08T17:29:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/207527022",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Ah 8) Thanks for explanation :-)",
      "created_at" : "2016-04-08T17:46:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7834#issuecomment-207534154",
      "id" : 207534154,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7834",
      "updated_at" : "2016-04-08T17:46:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/207534154",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   }
]
