[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r140993847"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140993847"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit *Expose method to find key for a single-key destination*:\r\n\r\nUse `boost::apply_visitor` instead?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T08:52:45Z",
      "diff_hunk" : "@@ -4051,3 +4051,24 @@ bool CWallet::IsSolvable(const CScript& script) const\n     SignatureData sigs;\n     return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n }\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.\n+    if (boost::get<CKeyID>(&dest)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r140993847",
      "id" : 140993847,
      "original_commit_id" : "1ae94623eceb96728b6a791732776d01a455f83f",
      "original_position" : 8,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65141769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140993847",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r140994498"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140994498"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit *Expose method to find key for a single-key destination*:\r\n\r\nRecursive call?\r\n```cpp\r\n            return GetKeyForDestination(inner_dest);\r\n```",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T08:55:24Z",
      "diff_hunk" : "@@ -4051,3 +4051,24 @@ bool CWallet::IsSolvable(const CScript& script) const\n     SignatureData sigs;\n     return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n }\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.\n+    if (boost::get<CKeyID>(&dest)) {\n+        return boost::get<CKeyID>(dest);\n+    }\n+    if (boost::get<WitnessV0KeyHash>(&dest)) {\n+        return CKeyID(boost::get<WitnessV0KeyHash>(dest));\n+    }\n+    if (boost::get<CScriptID>(&dest)) {\n+        CScript script;\n+        CTxDestination inner_dest;\n+        if (GetCScript(boost::get<CScriptID>(dest), script) && ExtractDestination(script, inner_dest)) {\n+            if (boost::get<WitnessV0KeyHash>(&inner_dest)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r140994498",
      "id" : 140994498,
      "original_commit_id" : "1ae94623eceb96728b6a791732776d01a455f83f",
      "original_position" : 18,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65141769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140994498",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r140995719"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140995719"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit *SegWit wallet support*:\r\n\r\nRemove?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T09:00:02Z",
      "diff_hunk" : "@@ -4072,3 +4074,82 @@ CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n     }\n     return CKeyID();\n }\n+\n+static const std::string STYLE_STRING_NONE = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r140995719",
      "id" : 140995719,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 41,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65141769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140995719",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141033697"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141033697"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Add init tests (follow up maybe)?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T11:58:03Z",
      "diff_hunk" : "@@ -168,6 +170,22 @@ bool WalletParameterInteraction()\n     bSpendZeroConfChange = gArgs.GetBoolArg(\"-spendzeroconfchange\", DEFAULT_SPEND_ZEROCONF_CHANGE);\n     fWalletRbf = gArgs.GetBoolArg(\"-walletrbf\", DEFAULT_WALLET_RBF);\n \n+    std::string style = gArgs.GetArg(\"-addressstyle\", \"default\");\n+    OutputStyle parsed_style = ParseStyle(style);\n+    if (parsed_style == STYLE_NONE) {\n+        return InitError(strprintf(_(\"Unknown address style '%s'\"), style));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141033697",
      "id" : 141033697,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 16,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 65141769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141033697",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141034121"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141034121"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Missing default value?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T12:00:16Z",
      "diff_hunk" : "@@ -225,11 +234,13 @@ UniValue getrawchangeaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 0)\n+    if (request.fHelp || request.params.size() > 1)\n         throw std::runtime_error(\n-            \"getrawchangeaddress\\n\"\n+            \"getrawchangeaddress ( \\\"style\\\" )\\n\"\n             \"\\nReturns a new Bitcoin address, for receiving change.\\n\"\n             \"This is for use with raw transactions, NOT normal use.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"style\\\"          (string, optional) The address style to use. Valid options are 'p2pkh', 'p2sh_p2wpkh', and 'p2wpkh'\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141034121",
      "id" : 141034121,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 69,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65141769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141034121",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141034255"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141034255"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fix index `[0]`.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T12:01:02Z",
      "diff_hunk" : "@@ -243,16 +254,24 @@ UniValue getrawchangeaddress(const JSONRPCRequest& request)\n         pwallet->TopUpKeyPool();\n     }\n \n+    OutputStyle style = change_style;\n+    if (!request.params[0].isNull()) {\n+        style = ParseStyle(request.params[1].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141034255",
      "id" : 141034255,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 79,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65141769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141034255",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141034483"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141034483"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Missing test for this error.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T12:02:11Z",
      "diff_hunk" : "@@ -157,6 +158,14 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n     if (!request.params[0].isNull())\n         strAccount = AccountFromValue(request.params[0]);\n \n+    OutputStyle style = address_style;\n+    if (!request.params[1].isNull()) {\n+        style = ParseStyle(request.params[1].get_str());\n+        if (style == STYLE_NONE) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Unknown address style '%s'\", request.params[1].get_str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141034483",
      "id" : 141034483,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 26,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65141769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141034483",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141034548"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141034548"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Default value?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T12:02:28Z",
      "diff_hunk" : "@@ -135,14 +135,15 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 1)\n+    if (request.fHelp || request.params.size() > 2)\n         throw std::runtime_error(\n-            \"getnewaddress ( \\\"account\\\" )\\n\"\n+            \"getnewaddress ( \\\"account\\\" ) ( \\\"style\\\" )\\n\"\n             \"\\nReturns a new Bitcoin address for receiving payments.\\n\"\n             \"If 'account' is specified (DEPRECATED), it is added to the address book \\n\"\n             \"so payments received with the address will be credited to 'account'.\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"account\\\"        (string, optional) DEPRECATED. The account name for the address to be linked to. If not provided, the default account \\\"\\\" is used. It can also be set to the empty string \\\"\\\" to represent the default account. The account does not need to exist, it will be created if there is no account by the given name.\\n\"\n+            \"2. \\\"style\\\"          (string, optional) The address style to use. Valid options are 'p2pkh', 'p2sh_p2wpkh', and 'p2wpkh'\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141034548",
      "id" : 141034548,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 14,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65141769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141034548",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141034833"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141034833"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Add init tests (follow up maybe)?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T12:03:46Z",
      "diff_hunk" : "@@ -168,6 +170,22 @@ bool WalletParameterInteraction()\n     bSpendZeroConfChange = gArgs.GetBoolArg(\"-spendzeroconfchange\", DEFAULT_SPEND_ZEROCONF_CHANGE);\n     fWalletRbf = gArgs.GetBoolArg(\"-walletrbf\", DEFAULT_WALLET_RBF);\n \n+    std::string style = gArgs.GetArg(\"-addressstyle\", \"default\");\n+    OutputStyle parsed_style = ParseStyle(style);\n+    if (parsed_style == STYLE_NONE) {\n+        return InitError(strprintf(_(\"Unknown address style '%s'\"), style));\n+    } else {\n+        address_style = parsed_style;\n+    }\n+\n+    style = gArgs.GetArg(\"-changestyle\", style);\n+    parsed_style = ParseStyle(style);\n+    if (parsed_style == STYLE_NONE) {\n+        return InitError(strprintf(_(\"Unknown change style '%s'\"), style));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141034833",
      "id" : 141034833,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 24,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 65141769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141034833",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141034981"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141034981"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Missing test.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T12:04:26Z",
      "diff_hunk" : "@@ -243,16 +254,24 @@ UniValue getrawchangeaddress(const JSONRPCRequest& request)\n         pwallet->TopUpKeyPool();\n     }\n \n+    OutputStyle style = change_style;\n+    if (!request.params[0].isNull()) {\n+        style = ParseStyle(request.params[1].get_str());\n+        if (style == STYLE_NONE) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Unknown address style '%s'\", request.params[0].get_str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141034981",
      "id" : 141034981,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 81,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65141769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141034981",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141035708"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141035708"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Remove `, True` so that default value is tested.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T12:07:53Z",
      "diff_hunk" : "@@ -133,8 +133,15 @@ def run_test(self):\n             newaddress = self.nodes[i].getnewaddress()\n             self.pubkey.append(self.nodes[i].validateaddress(newaddress)[\"pubkey\"])\n             multiaddress = self.nodes[i].addmultisigaddress(1, [self.pubkey[-1]])\n-            self.nodes[i].addwitnessaddress(newaddress)\n-            self.nodes[i].addwitnessaddress(multiaddress)\n+            multiscript = CScript([OP_1, hex_str_to_bytes(self.pubkey[-1]), OP_1, OP_CHECKMULTISIG])\n+            p2sh_addr = self.nodes[i].addwitnessaddress(newaddress, True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141035708",
      "id" : 141035708,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 63,
      "path" : "test/functional/segwit.py",
      "position" : null,
      "pull_request_review_id" : 65141769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141035708",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141137104"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141137104"
         }
      },
      "author_association" : "OWNER",
      "body" : "I tried that, but the result is much longer and harder to get right (see below). It's also the wrong approach I think. A visitor is used when you want to handle all possible types - here we specifically only want to support a specific subset of cases (P2PKH, P2WPKH, P2SH-P2WPKH).",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T18:06:20Z",
      "diff_hunk" : "@@ -4051,3 +4051,24 @@ bool CWallet::IsSolvable(const CScript& script) const\n     SignatureData sigs;\n     return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n }\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.\n+    if (boost::get<CKeyID>(&dest)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141137104",
      "id" : 141137104,
      "in_reply_to_id" : 140993847,
      "original_commit_id" : "1ae94623eceb96728b6a791732776d01a455f83f",
      "original_position" : 8,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65308272,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141137104",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141137409"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141137409"
         }
      },
      "author_association" : "OWNER",
      "body" : "It's not that easy, as it could match a superset (for example P2SH-P2PKH), or even invalid things (P2SH-P2SH-P2WPKH?).",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T18:07:28Z",
      "diff_hunk" : "@@ -4051,3 +4051,24 @@ bool CWallet::IsSolvable(const CScript& script) const\n     SignatureData sigs;\n     return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n }\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.\n+    if (boost::get<CKeyID>(&dest)) {\n+        return boost::get<CKeyID>(dest);\n+    }\n+    if (boost::get<WitnessV0KeyHash>(&dest)) {\n+        return CKeyID(boost::get<WitnessV0KeyHash>(dest));\n+    }\n+    if (boost::get<CScriptID>(&dest)) {\n+        CScript script;\n+        CTxDestination inner_dest;\n+        if (GetCScript(boost::get<CScriptID>(dest), script) && ExtractDestination(script, inner_dest)) {\n+            if (boost::get<WitnessV0KeyHash>(&inner_dest)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141137409",
      "id" : 141137409,
      "in_reply_to_id" : 140994498,
      "original_commit_id" : "1ae94623eceb96728b6a791732776d01a455f83f",
      "original_position" : 18,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65308623,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141137409",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141172352"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141172352"
         }
      },
      "author_association" : "MEMBER",
      "body" : "These should mention the defaults, which likely means refactoring how the \"default\" string is handled.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T20:21:36Z",
      "diff_hunk" : "@@ -15,6 +15,8 @@\n std::string GetWalletHelpString(bool showDebug)\n {\n     std::string strUsage = HelpMessageGroup(_(\"Wallet options:\"));\n+    strUsage += HelpMessageOpt(\"-addressstyle\", _(\"What style addresses to use (\\\"p2pkh\\\", \\\"p2sh_p2wpkh\\\", \\\"p2wpkh\\\")\"));\n+    strUsage += HelpMessageOpt(\"-changestyle\", _(\"What style change to use (\\\"p2pkh\\\", \\\"p2sh_p2wpkh\\\", \\\"p2wpkh\\\")\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141172352",
      "id" : 141172352,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 5,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 65348501,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141172352",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141172562"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141172562"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Default should probably remain legacy until support for newer styles is complete (eg, `import*` RPC)?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T20:22:30Z",
      "diff_hunk" : "@@ -4021,3 +4042,114 @@ bool CMerkleTx::AcceptToMemoryPool(const CAmount& nAbsurdFee, CValidationState&\n {\n     return ::AcceptToMemoryPool(mempool, state, tx, true, nullptr, nullptr, false, nAbsurdFee);\n }\n+\n+bool CWallet::IsSolvable(const CScript& script) const\n+{\n+    // This check is to make sure that the script we created can actually be solved for and signed by us\n+    // if we were to have the private keys. This is just to make sure that the script is valid and that,\n+    // if found in a transaction, we would still accept and relay that transaction. In particular,\n+    // it will reject witness outputs that require signing with an uncompressed public key.\n+    DummySignatureCreator creator(this);\n+    SignatureData sigs;\n+    return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n+}\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.\n+    if (boost::get<CKeyID>(&dest)) {\n+        return boost::get<CKeyID>(dest);\n+    }\n+    if (boost::get<WitnessV0KeyHash>(&dest)) {\n+        return CKeyID(boost::get<WitnessV0KeyHash>(dest));\n+    }\n+    if (boost::get<CScriptID>(&dest)) {\n+        CScript script;\n+        CTxDestination inner_dest;\n+        if (GetCScript(boost::get<CScriptID>(dest), script) && ExtractDestination(script, inner_dest)) {\n+            if (boost::get<WitnessV0KeyHash>(&inner_dest)) {\n+                return CKeyID(boost::get<WitnessV0KeyHash>(inner_dest));\n+            }\n+        }\n+    }\n+    return CKeyID();\n+}\n+\n+static const std::string STYLE_STRING_NONE = \"\";\n+static const std::string STYLE_STRING_LEGACY = \"legacy\";\n+static const std::string STYLE_STRING_P2SH = \"p2sh\";\n+static const std::string STYLE_STRING_SEGWIT = \"segwit\";\n+\n+OutputStyle ParseStyle(const std::string& style)\n+{\n+    if (style == STYLE_STRING_LEGACY) {\n+        return STYLE_LEGACY;\n+    } else if (style == STYLE_STRING_P2SH || style == \"default\") {\n+        return STYLE_P2SH;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141172562",
      "id" : 141172562,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 111,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65348501,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141172562",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141173466"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141173466"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Seems like it would be better to change the deprecated `\"account\"` into a JSON Object `options`.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-26T20:25:56Z",
      "diff_hunk" : "@@ -135,14 +135,15 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 1)\n+    if (request.fHelp || request.params.size() > 2)\n         throw std::runtime_error(\n-            \"getnewaddress ( \\\"account\\\" )\\n\"\n+            \"getnewaddress ( \\\"account\\\" ) ( \\\"style\\\" )\\n\"\n             \"\\nReturns a new Bitcoin address for receiving payments.\\n\"\n             \"If 'account' is specified (DEPRECATED), it is added to the address book \\n\"\n             \"so payments received with the address will be credited to 'account'.\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"account\\\"        (string, optional) DEPRECATED. The account name for the address to be linked to. If not provided, the default account \\\"\\\" is used. It can also be set to the empty string \\\"\\\" to represent the default account. The account does not need to exist, it will be created if there is no account by the given name.\\n\"\n+            \"2. \\\"style\\\"          (string, optional) The address style to use. Valid options are 'p2pkh', 'p2sh_p2wpkh', and 'p2wpkh'\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141173466",
      "id" : 141173466,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 14,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65348501,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141173466",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141575484"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141575484"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Right.\r\n\r\nIsn't boost::get kind of expensive? Avoid 2nd call?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-28T09:56:46Z",
      "diff_hunk" : "@@ -4051,3 +4051,24 @@ bool CWallet::IsSolvable(const CScript& script) const\n     SignatureData sigs;\n     return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n }\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.\n+    if (boost::get<CKeyID>(&dest)) {\n+        return boost::get<CKeyID>(dest);\n+    }\n+    if (boost::get<WitnessV0KeyHash>(&dest)) {\n+        return CKeyID(boost::get<WitnessV0KeyHash>(dest));\n+    }\n+    if (boost::get<CScriptID>(&dest)) {\n+        CScript script;\n+        CTxDestination inner_dest;\n+        if (GetCScript(boost::get<CScriptID>(dest), script) && ExtractDestination(script, inner_dest)) {\n+            if (boost::get<WitnessV0KeyHash>(&inner_dest)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141575484",
      "id" : 141575484,
      "in_reply_to_id" : 140994498,
      "original_commit_id" : "1ae94623eceb96728b6a791732776d01a455f83f",
      "original_position" : 18,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65808218,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141575484",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141580941"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141580941"
         }
      },
      "author_association" : "OWNER",
      "body" : "I'd rather not. This makes the existing tests far more powerful.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-28T10:23:28Z",
      "diff_hunk" : "@@ -4021,3 +4042,114 @@ bool CMerkleTx::AcceptToMemoryPool(const CAmount& nAbsurdFee, CValidationState&\n {\n     return ::AcceptToMemoryPool(mempool, state, tx, true, nullptr, nullptr, false, nAbsurdFee);\n }\n+\n+bool CWallet::IsSolvable(const CScript& script) const\n+{\n+    // This check is to make sure that the script we created can actually be solved for and signed by us\n+    // if we were to have the private keys. This is just to make sure that the script is valid and that,\n+    // if found in a transaction, we would still accept and relay that transaction. In particular,\n+    // it will reject witness outputs that require signing with an uncompressed public key.\n+    DummySignatureCreator creator(this);\n+    SignatureData sigs;\n+    return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n+}\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.\n+    if (boost::get<CKeyID>(&dest)) {\n+        return boost::get<CKeyID>(dest);\n+    }\n+    if (boost::get<WitnessV0KeyHash>(&dest)) {\n+        return CKeyID(boost::get<WitnessV0KeyHash>(dest));\n+    }\n+    if (boost::get<CScriptID>(&dest)) {\n+        CScript script;\n+        CTxDestination inner_dest;\n+        if (GetCScript(boost::get<CScriptID>(dest), script) && ExtractDestination(script, inner_dest)) {\n+            if (boost::get<WitnessV0KeyHash>(&inner_dest)) {\n+                return CKeyID(boost::get<WitnessV0KeyHash>(inner_dest));\n+            }\n+        }\n+    }\n+    return CKeyID();\n+}\n+\n+static const std::string STYLE_STRING_NONE = \"\";\n+static const std::string STYLE_STRING_LEGACY = \"legacy\";\n+static const std::string STYLE_STRING_P2SH = \"p2sh\";\n+static const std::string STYLE_STRING_SEGWIT = \"segwit\";\n+\n+OutputStyle ParseStyle(const std::string& style)\n+{\n+    if (style == STYLE_STRING_LEGACY) {\n+        return STYLE_LEGACY;\n+    } else if (style == STYLE_STRING_P2SH || style == \"default\") {\n+        return STYLE_P2SH;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141580941",
      "id" : 141580941,
      "in_reply_to_id" : 141172562,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 111,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65814667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141580941",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "A potential problem with supporting `-addressstyle=segwit` w/ Bech32 on day zero is it may confuse people into thinking segwit *needs* the new address format. OTOH, if we don't, it probably makes the P2SH adoption hell more likely.",
      "created_at" : "2017-09-28T19:12:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-332935671",
      "id" : 332935671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-09-28T19:12:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/332935671",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141715642"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141715642"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Tests don't need to (and probably shouldn't) rely on defaults...",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-28T19:36:44Z",
      "diff_hunk" : "@@ -4021,3 +4042,114 @@ bool CMerkleTx::AcceptToMemoryPool(const CAmount& nAbsurdFee, CValidationState&\n {\n     return ::AcceptToMemoryPool(mempool, state, tx, true, nullptr, nullptr, false, nAbsurdFee);\n }\n+\n+bool CWallet::IsSolvable(const CScript& script) const\n+{\n+    // This check is to make sure that the script we created can actually be solved for and signed by us\n+    // if we were to have the private keys. This is just to make sure that the script is valid and that,\n+    // if found in a transaction, we would still accept and relay that transaction. In particular,\n+    // it will reject witness outputs that require signing with an uncompressed public key.\n+    DummySignatureCreator creator(this);\n+    SignatureData sigs;\n+    return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n+}\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.\n+    if (boost::get<CKeyID>(&dest)) {\n+        return boost::get<CKeyID>(dest);\n+    }\n+    if (boost::get<WitnessV0KeyHash>(&dest)) {\n+        return CKeyID(boost::get<WitnessV0KeyHash>(dest));\n+    }\n+    if (boost::get<CScriptID>(&dest)) {\n+        CScript script;\n+        CTxDestination inner_dest;\n+        if (GetCScript(boost::get<CScriptID>(dest), script) && ExtractDestination(script, inner_dest)) {\n+            if (boost::get<WitnessV0KeyHash>(&inner_dest)) {\n+                return CKeyID(boost::get<WitnessV0KeyHash>(inner_dest));\n+            }\n+        }\n+    }\n+    return CKeyID();\n+}\n+\n+static const std::string STYLE_STRING_NONE = \"\";\n+static const std::string STYLE_STRING_LEGACY = \"legacy\";\n+static const std::string STYLE_STRING_P2SH = \"p2sh\";\n+static const std::string STYLE_STRING_SEGWIT = \"segwit\";\n+\n+OutputStyle ParseStyle(const std::string& style)\n+{\n+    if (style == STYLE_STRING_LEGACY) {\n+        return STYLE_LEGACY;\n+    } else if (style == STYLE_STRING_P2SH || style == \"default\") {\n+        return STYLE_P2SH;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141715642",
      "id" : 141715642,
      "in_reply_to_id" : 141172562,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 111,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 65975207,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141715642",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "maybe it should be renamed to `-addressstyle=bech32`? ",
      "created_at" : "2017-09-28T21:08:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-332964633",
      "id" : 332964633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-09-28T21:08:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/332964633",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/425166?v=4",
         "events_url" : "https://api.github.com/users/flack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/flack/followers",
         "following_url" : "https://api.github.com/users/flack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/flack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/flack",
         "id" : 425166,
         "login" : "flack",
         "organizations_url" : "https://api.github.com/users/flack/orgs",
         "received_events_url" : "https://api.github.com/users/flack/received_events",
         "repos_url" : "https://api.github.com/users/flack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/flack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/flack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/flack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase after #11167 merge but that'll make it clearer what's new here to review :+1:",
      "created_at" : "2017-09-29T11:57:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-333107294",
      "id" : 333107294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-09-29T11:57:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333107294",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141910029"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141910029"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This field needs to be added anywhere it's used in help text for RPC calls. ",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-29T16:23:36Z",
      "diff_hunk" : "@@ -64,6 +67,13 @@ class DescribeAddressVisitor : public boost::static_visitor<UniValue>\n             obj.push_back(Pair(\"script\", GetTxnOutputType(whichType)));\n             obj.push_back(Pair(\"hex\", HexStr(subscript.begin(), subscript.end())));\n             UniValue a(UniValue::VARR);\n+            if (whichType == TX_WITNESS_V0_KEYHASH || whichType == TX_WITNESS_V0_SCRIPTHASH) {\n+                UniValue subobj = boost::apply_visitor(*this, addresses[0]);\n+                obj.push_back(Pair(\"embedded\", std::move(subobj)));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141910029",
      "id" : 141910029,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 30,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 66202799,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141910029",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141910356"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141910356"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Remove plurals from description.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-29T16:25:13Z",
      "diff_hunk" : "@@ -1111,6 +1111,9 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n      * have all private keys. This is unrelated to whether we consider this\n      * output to be ours. */\n     bool IsSolvable(const CScript& script) const;\n+\n+    /** Return the hashes of the keys involved in a script. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141910356",
      "id" : 141910356,
      "original_commit_id" : "1ae94623eceb96728b6a791732776d01a455f83f",
      "original_position" : 5,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 66203188,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141910356",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Rebased after #11167 merge.",
      "created_at" : "2017-09-29T18:36:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-333205001",
      "id" : 333205001,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-09-29T18:36:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333205001",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141940333"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141940333"
         }
      },
      "author_association" : "OWNER",
      "body" : "Yes and no.\r\n\r\nI think that many tests, which are primarily testing things unrelated to addresses, should use the default address type. They don't strictly rely on them, but it's better if they work with either type, and it's certainly easier to not need to change all of them.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-29T18:47:45Z",
      "diff_hunk" : "@@ -4021,3 +4042,114 @@ bool CMerkleTx::AcceptToMemoryPool(const CAmount& nAbsurdFee, CValidationState&\n {\n     return ::AcceptToMemoryPool(mempool, state, tx, true, nullptr, nullptr, false, nAbsurdFee);\n }\n+\n+bool CWallet::IsSolvable(const CScript& script) const\n+{\n+    // This check is to make sure that the script we created can actually be solved for and signed by us\n+    // if we were to have the private keys. This is just to make sure that the script is valid and that,\n+    // if found in a transaction, we would still accept and relay that transaction. In particular,\n+    // it will reject witness outputs that require signing with an uncompressed public key.\n+    DummySignatureCreator creator(this);\n+    SignatureData sigs;\n+    return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n+}\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.\n+    if (boost::get<CKeyID>(&dest)) {\n+        return boost::get<CKeyID>(dest);\n+    }\n+    if (boost::get<WitnessV0KeyHash>(&dest)) {\n+        return CKeyID(boost::get<WitnessV0KeyHash>(dest));\n+    }\n+    if (boost::get<CScriptID>(&dest)) {\n+        CScript script;\n+        CTxDestination inner_dest;\n+        if (GetCScript(boost::get<CScriptID>(dest), script) && ExtractDestination(script, inner_dest)) {\n+            if (boost::get<WitnessV0KeyHash>(&inner_dest)) {\n+                return CKeyID(boost::get<WitnessV0KeyHash>(inner_dest));\n+            }\n+        }\n+    }\n+    return CKeyID();\n+}\n+\n+static const std::string STYLE_STRING_NONE = \"\";\n+static const std::string STYLE_STRING_LEGACY = \"legacy\";\n+static const std::string STYLE_STRING_P2SH = \"p2sh\";\n+static const std::string STYLE_STRING_SEGWIT = \"segwit\";\n+\n+OutputStyle ParseStyle(const std::string& style)\n+{\n+    if (style == STYLE_STRING_LEGACY) {\n+        return STYLE_LEGACY;\n+    } else if (style == STYLE_STRING_P2SH || style == \"default\") {\n+        return STYLE_P2SH;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141940333",
      "id" : 141940333,
      "in_reply_to_id" : 141172562,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 111,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 66238860,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141940333",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141960988"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141960988"
         }
      },
      "author_association" : "MEMBER",
      "body" : "pedantic nit, but this only supports v0 of each witness version",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-29T20:28:13Z",
      "diff_hunk" : "@@ -4061,3 +4061,24 @@ bool CWallet::IsSolvable(const CScript& script) const\n     SignatureData sigs;\n     return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n }\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141960988",
      "id" : 141960988,
      "original_commit_id" : "7f88d8ad7796c0f6d1e80d11943c19f0af2cda62",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 66263128,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141960988",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141964928"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141964928"
         }
      },
      "author_association" : "MEMBER",
      "body" : "startup options strings being different than getnewaddress options is a bit odd to me?\r\n\r\n'p2sh_p2wpkh' vs `p2sh` etc",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-29T20:49:11Z",
      "diff_hunk" : "@@ -135,14 +135,15 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 1)\n+    if (request.fHelp || request.params.size() > 2)\n         throw std::runtime_error(\n-            \"getnewaddress ( \\\"account\\\" )\\n\"\n+            \"getnewaddress ( \\\"account\\\" ) ( \\\"style\\\" )\\n\"\n             \"\\nReturns a new Bitcoin address for receiving payments.\\n\"\n             \"If 'account' is specified (DEPRECATED), it is added to the address book \\n\"\n             \"so payments received with the address will be credited to 'account'.\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"account\\\"        (string, optional) DEPRECATED. The account name for the address to be linked to. If not provided, the default account \\\"\\\" is used. It can also be set to the empty string \\\"\\\" to represent the default account. The account does not need to exist, it will be created if there is no account by the given name.\\n\"\n+            \"2. \\\"style\\\"          (string, optional) The address style to use. Valid options are 'p2pkh', 'p2sh_p2wpkh', and 'p2wpkh'\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141964928",
      "id" : 141964928,
      "original_commit_id" : "20da3447269696a3505b061852771d0bb11d6779",
      "original_position" : 14,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 66263128,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141964928",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141965443"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141965443"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No solution off the top of my head, but it makes sense that this would be set per-wallet. If not, could we name it `g_address_style`?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-29T20:51:49Z",
      "diff_hunk" : "@@ -43,6 +43,8 @@ CFeeRate payTxFee(DEFAULT_TRANSACTION_FEE);\n unsigned int nTxConfirmTarget = DEFAULT_TX_CONFIRM_TARGET;\n bool bSpendZeroConfChange = DEFAULT_SPEND_ZEROCONF_CHANGE;\n bool fWalletRbf = DEFAULT_WALLET_RBF;\n+OutputStyle address_style = STYLE_P2SH;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141965443",
      "id" : 141965443,
      "original_commit_id" : "20da3447269696a3505b061852771d0bb11d6779",
      "original_position" : 4,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 66263128,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141965443",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141966093"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141966093"
         }
      },
      "author_association" : "MEMBER",
      "body" : "changestyle needs a test",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-29T20:55:21Z",
      "diff_hunk" : "@@ -168,6 +170,22 @@ bool WalletParameterInteraction()\n     bSpendZeroConfChange = gArgs.GetBoolArg(\"-spendzeroconfchange\", DEFAULT_SPEND_ZEROCONF_CHANGE);\n     fWalletRbf = gArgs.GetBoolArg(\"-walletrbf\", DEFAULT_WALLET_RBF);\n \n+    std::string style = gArgs.GetArg(\"-addressstyle\", \"default\");\n+    OutputStyle parsed_style = ParseStyle(style);\n+    if (parsed_style == STYLE_NONE) {\n+        return InitError(strprintf(_(\"Unknown address style '%s'\"), style));\n+    } else {\n+        address_style = parsed_style;\n+    }\n+\n+    style = gArgs.GetArg(\"-changestyle\", style);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141966093",
      "id" : 141966093,
      "original_commit_id" : "20da3447269696a3505b061852771d0bb11d6779",
      "original_position" : 21,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 66263128,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141966093",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141966363"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141966363"
         }
      },
      "author_association" : "MEMBER",
      "body" : "argument needs a test",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-29T20:56:35Z",
      "diff_hunk" : "@@ -225,11 +234,13 @@ UniValue getrawchangeaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 0)\n+    if (request.fHelp || request.params.size() > 1)\n         throw std::runtime_error(\n-            \"getrawchangeaddress\\n\"\n+            \"getrawchangeaddress ( \\\"style\\\" )\\n\"\n             \"\\nReturns a new Bitcoin address, for receiving change.\\n\"\n             \"This is for use with raw transactions, NOT normal use.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"style\\\"          (string, optional) The address style to use. Valid options are 'p2pkh', 'p2sh_p2wpkh', and 'p2wpkh'\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141966363",
      "id" : 141966363,
      "original_commit_id" : "20da3447269696a3505b061852771d0bb11d6779",
      "original_position" : 69,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 66263128,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141966363",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141967056"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141967056"
         }
      },
      "author_association" : "MEMBER",
      "body" : "change seems way out of place here",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-29T20:59:35Z",
      "diff_hunk" : "@@ -1234,7 +1254,7 @@ UniValue addwitnessaddress(const JSONRPCRequest& request)\n \n     {\n         LOCK(cs_main);\n-        if (!IsWitnessEnabled(chainActive.Tip(), Params().GetConsensus()) && !gArgs.GetBoolArg(\"-walletprematurewitness\", false)) {\n+        if (!IsWitnessEnabled(pindexBestHeader, Params().GetConsensus()) && !gArgs.GetBoolArg(\"-walletprematurewitness\", false)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141967056",
      "id" : 141967056,
      "original_commit_id" : "20da3447269696a3505b061852771d0bb11d6779",
      "original_position" : 121,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 66263128,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141967056",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141967691"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141967691"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same suggestion as address_style",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-09-29T21:02:18Z",
      "diff_hunk" : "@@ -43,6 +43,8 @@ CFeeRate payTxFee(DEFAULT_TRANSACTION_FEE);\n unsigned int nTxConfirmTarget = DEFAULT_TX_CONFIRM_TARGET;\n bool bSpendZeroConfChange = DEFAULT_SPEND_ZEROCONF_CHANGE;\n bool fWalletRbf = DEFAULT_WALLET_RBF;\n+OutputStyle address_style = STYLE_P2SH;\n+OutputStyle change_style = STYLE_P2SH;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r141967691",
      "id" : 141967691,
      "original_commit_id" : "20da3447269696a3505b061852771d0bb11d6779",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 66263128,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141967691",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Regarding petertodd's concern, I think something like flack's suggestion would address it.",
      "created_at" : "2017-10-11T20:02:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-335931037",
      "id" : 335931037,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-10-11T20:02:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335931037",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r144192744"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144192744"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The help for e.g. `getnewaddress` says `\"p2wpkh\"` etc. One or the other needs to be changed.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-10-12T04:38:39Z",
      "diff_hunk" : "@@ -4050,3 +4052,114 @@ bool CMerkleTx::AcceptToMemoryPool(const CAmount& nAbsurdFee, CValidationState&\n     return ::AcceptToMemoryPool(mempool, state, tx, nullptr /* pfMissingInputs */,\n                                 nullptr /* plTxnReplaced */, false /* bypass_limits */, nAbsurdFee);\n }\n+\n+bool CWallet::IsSolvable(const CScript& script) const\n+{\n+    // This check is to make sure that the script we created can actually be solved for and signed by us\n+    // if we were to have the private keys. This is just to make sure that the script is valid and that,\n+    // if found in a transaction, we would still accept and relay that transaction. In particular,\n+    // it will reject witness outputs that require signing with an uncompressed public key.\n+    DummySignatureCreator creator(this);\n+    SignatureData sigs;\n+    return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n+}\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.\n+    if (boost::get<CKeyID>(&dest)) {\n+        return boost::get<CKeyID>(dest);\n+    }\n+    if (boost::get<WitnessV0KeyHash>(&dest)) {\n+        return CKeyID(boost::get<WitnessV0KeyHash>(dest));\n+    }\n+    if (boost::get<CScriptID>(&dest)) {\n+        CScript script;\n+        CTxDestination inner_dest;\n+        if (GetCScript(boost::get<CScriptID>(dest), script) && ExtractDestination(script, inner_dest)) {\n+            if (boost::get<WitnessV0KeyHash>(&inner_dest)) {\n+                return CKeyID(boost::get<WitnessV0KeyHash>(inner_dest));\n+            }\n+        }\n+    }\n+    return CKeyID();\n+}\n+\n+static const std::string STYLE_STRING_NONE = \"\";\n+static const std::string STYLE_STRING_LEGACY = \"legacy\";\n+static const std::string STYLE_STRING_P2SH = \"p2sh\";\n+static const std::string STYLE_STRING_SEGWIT = \"segwit\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r144192744",
      "id" : 144192744,
      "original_commit_id" : "5632374f2f71bca384ceed07ca6842fd87102346",
      "original_position" : 76,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 68814644,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144192744",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r144193626"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144193626"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think you want `\"getnewaddress ( \\\"account\\\" \\\"style\\\" )\\n\"`",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-10-12T04:49:26Z",
      "diff_hunk" : "@@ -135,14 +135,15 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 1)\n+    if (request.fHelp || request.params.size() > 2)\n         throw std::runtime_error(\n-            \"getnewaddress ( \\\"account\\\" )\\n\"\n+            \"getnewaddress ( \\\"account\\\" ) ( \\\"style\\\" )\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r144193626",
      "id" : 144193626,
      "original_commit_id" : "5632374f2f71bca384ceed07ca6842fd87102346",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 68814644,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144193626",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r144199735"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144199735"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This shouldn't just be tacked on the end. Accounts are deprecated. Just replace \"account\" with an options Object.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-10-12T05:56:19Z",
      "diff_hunk" : "@@ -135,14 +135,15 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 1)\n+    if (request.fHelp || request.params.size() > 2)\n         throw std::runtime_error(\n-            \"getnewaddress ( \\\"account\\\" )\\n\"\n+            \"getnewaddress ( \\\"account\\\" ) ( \\\"style\\\" )\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r144199735",
      "id" : 144199735,
      "original_commit_id" : "5632374f2f71bca384ceed07ca6842fd87102346",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 68822415,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144199735",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r144636061"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144636061"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That would be API breaking for a lot of parties which is at odds with rapid deployment.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-10-13T19:13:16Z",
      "diff_hunk" : "@@ -135,14 +135,15 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 1)\n+    if (request.fHelp || request.params.size() > 2)\n         throw std::runtime_error(\n-            \"getnewaddress ( \\\"account\\\" )\\n\"\n+            \"getnewaddress ( \\\"account\\\" ) ( \\\"style\\\" )\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r144636061",
      "id" : 144636061,
      "in_reply_to_id" : 144199735,
      "original_commit_id" : "5632374f2f71bca384ceed07ca6842fd87102346",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 69324709,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144636061",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145239469"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145239469"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You could instead inherit the ctors from uint160/uint256 to shortcut the construction from ```WitnessV0KeyHash(uint160(foo)``` to ```WitnessV0KeyHash(foo)```:\r\n```c++\r\nusing uint160::uint160;\r\n```",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-10-17T20:02:36Z",
      "diff_hunk" : "@@ -73,8 +73,19 @@ class CNoDestination {\n     friend bool operator<(const CNoDestination &a, const CNoDestination &b) { return true; }\n };\n \n-struct WitnessV0ScriptHash : public uint256 {};\n-struct WitnessV0KeyHash : public uint160 {};\n+struct WitnessV0ScriptHash : public uint256\n+{\n+public:\n+    WitnessV0ScriptHash() : uint256() {}\n+    WitnessV0ScriptHash(const uint256& in) : uint256(in) {}\n+};\n+\n+struct WitnessV0KeyHash : public uint160\n+{\n+public:\n+    WitnessV0KeyHash() : uint160() {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145239469",
      "id" : 145239469,
      "original_commit_id" : "fb0361d74a578c626b8876e71ad35775d718aed9",
      "original_position" : 16,
      "path" : "src/script/standard.h",
      "position" : 17,
      "pull_request_review_id" : 70011130,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145239469",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145240904"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145240904"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You might want to _copy_ the field to the help text rather than _move_ it, though :p\r\n\r\n(Use after move here)",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-10-17T20:08:07Z",
      "diff_hunk" : "@@ -64,6 +67,13 @@ class DescribeAddressVisitor : public boost::static_visitor<UniValue>\n             obj.push_back(Pair(\"script\", GetTxnOutputType(whichType)));\n             obj.push_back(Pair(\"hex\", HexStr(subscript.begin(), subscript.end())));\n             UniValue a(UniValue::VARR);\n+            if (whichType == TX_WITNESS_V0_KEYHASH || whichType == TX_WITNESS_V0_SCRIPTHASH) {\n+                UniValue subobj = boost::apply_visitor(*this, addresses[0]);\n+                obj.push_back(Pair(\"embedded\", std::move(subobj)));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145240904",
      "id" : 145240904,
      "in_reply_to_id" : 141910029,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 30,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 70012766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145240904",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145245638"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145245638"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why dupe this? Helps with existing tooling?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-10-17T20:26:40Z",
      "diff_hunk" : "@@ -67,6 +67,13 @@ class DescribeAddressVisitor : public boost::static_visitor<UniValue>\n             obj.push_back(Pair(\"script\", GetTxnOutputType(whichType)));\n             obj.push_back(Pair(\"hex\", HexStr(subscript.begin(), subscript.end())));\n             UniValue a(UniValue::VARR);\n+            if (whichType == TX_WITNESS_V0_KEYHASH || whichType == TX_WITNESS_V0_SCRIPTHASH) {\n+                UniValue subobj = boost::apply_visitor(*this, addresses[0]);\n+                obj.push_back(Pair(\"embedded\", std::move(subobj)));\n+                if (subobj.exists(\"pubkey\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145245638",
      "id" : 145245638,
      "original_commit_id" : "97f4fc173dda51f21cc092b9b29a9ea4b208f8e2",
      "original_position" : 7,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 70018324,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145245638",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145255319"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145255319"
         }
      },
      "author_association" : "MEMBER",
      "body" : "imo, it's clearer (and less redundant) to test the result of the assignment:\r\n```c++\r\n    if (const CKeyID* ret = boost::get<CKeyID>(&dest)) {\r\n        return *ret;\r\n    }\r\n```\r\nEdit: That's also the common paradigm for using [std::weak_ptr::lock()](http://en.cppreference.com/w/cpp/memory/weak_ptr/lock)",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-10-17T21:02:22Z",
      "diff_hunk" : "@@ -4072,3 +4072,24 @@ bool CWallet::IsSolvable(const CScript& script) const\n     SignatureData sigs;\n     return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n }\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.\n+    if (boost::get<CKeyID>(&dest)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145255319",
      "id" : 145255319,
      "original_commit_id" : "8c55a70cebeb4e18c686c93d96dde95deed6dc0e",
      "original_position" : 8,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 70018324,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145255319",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145261446"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145261446"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure about the sequencing rules here. I'd feel safer with a temporary CScriptID.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-10-17T21:28:51Z",
      "diff_hunk" : "@@ -13,6 +13,18 @@ bool CKeyStore::AddKey(const CKey &key) {\n     return AddKeyPubKey(key, key.GetPubKey());\n }\n \n+void CBasicKeyStore::AddRelatedKeyScripts(const CPubKey& pubkey)\n+{\n+    AssertLockHeld(cs_KeyStore);\n+    // This adds the redeemscripts necessary to detect P2WPKH and P2SH-P2WPKH\n+    // outputs.\n+    if (pubkey.IsCompressed()) {\n+        CScript script = CScript() << OP_0 << ToByteVector(pubkey.GetID());\n+        // This does not use AddCScript, as it may be overridden.\n+        mapScripts[CScriptID(script)] = std::move(script);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145261446",
      "id" : 145261446,
      "original_commit_id" : "b7209bdc9007b0f6c22403ab042dd474eb8ef2c5",
      "original_position" : 12,
      "path" : "src/keystore.cpp",
      "position" : null,
      "pull_request_review_id" : 70018324,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145261446",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145270452"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145270452"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can't this pass in nullptr and move out of CWallet? Unless I'm missing something, it's not actually related.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-10-17T22:09:59Z",
      "diff_hunk" : "@@ -4061,3 +4061,14 @@ bool CMerkleTx::AcceptToMemoryPool(const CAmount& nAbsurdFee, CValidationState&\n     return ::AcceptToMemoryPool(mempool, state, tx, nullptr /* pfMissingInputs */,\n                                 nullptr /* plTxnReplaced */, false /* bypass_limits */, nAbsurdFee);\n }\n+\n+bool CWallet::IsSolvable(const CScript& script) const\n+{\n+    // This check is to make sure that the script we created can actually be solved for and signed by us\n+    // if we were to have the private keys. This is just to make sure that the script is valid and that,\n+    // if found in a transaction, we would still accept and relay that transaction. In particular,\n+    // it will reject witness outputs that require signing with an uncompressed public key.\n+    DummySignatureCreator creator(this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145270452",
      "id" : 145270452,
      "original_commit_id" : "4bc304c9fa8657bc5a025fecfa7fa40e30ea7a20",
      "original_position" : 11,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 70018324,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145270452",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145271944"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145271944"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If IsSolvable moves out of CWallet, I believe these can too.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-10-17T22:18:10Z",
      "diff_hunk" : "@@ -4093,3 +4095,82 @@ CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n     }\n     return CKeyID();\n }\n+\n+static const std::string STYLE_STRING_NONE = \"\";\n+static const std::string STYLE_STRING_LEGACY = \"legacy\";\n+static const std::string STYLE_STRING_P2SH = \"p2sh\";\n+static const std::string STYLE_STRING_SEGWIT = \"segwit\";\n+\n+OutputStyle ParseStyle(const std::string& style)\n+{\n+    if (style == STYLE_STRING_LEGACY) {\n+        return STYLE_LEGACY;\n+    } else if (style == STYLE_STRING_P2SH || style == \"default\") {\n+        return STYLE_P2SH;\n+    } else if (style == STYLE_STRING_SEGWIT) {\n+        return STYLE_SEGWIT;\n+    } else {\n+        return STYLE_NONE;\n+    }\n+}\n+\n+\n+const std::string& FormatStyle(OutputStyle style)\n+{\n+    switch (style) {\n+    case STYLE_LEGACY: return STYLE_STRING_LEGACY;\n+    case STYLE_P2SH: return STYLE_STRING_P2SH;\n+    case STYLE_SEGWIT: return STYLE_STRING_SEGWIT;\n+    default: assert(false);\n+    }\n+}\n+\n+std::vector<CTxDestination> CWallet::GetAllDestinationsForKey(const CPubKey& key)\n+{\n+    CKeyID keyid = key.GetID();\n+    if (key.IsCompressed()) {\n+        CTxDestination segwit = WitnessV0KeyHash(keyid);\n+        CTxDestination p2sh = CScriptID(GetScriptForDestination(segwit));\n+        return std::vector<CTxDestination>{std::move(keyid), std::move(p2sh), std::move(segwit)};\n+    } else {\n+        return std::vector<CTxDestination>{std::move(keyid)};\n+    }\n+}\n+\n+CTxDestination CWallet::GetDestinationForKey(const CPubKey& key, OutputStyle style)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145271944",
      "id" : 145271944,
      "original_commit_id" : "f542daeb6986b0cc3ea796f177f20739706eddf2",
      "original_position" : 82,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 70018324,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145271944",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145274394"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145274394"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Seems the caller should be responsible for adding this if it's a WitnessV0ScriptHash? Like the others, this doesn't seem like wallet functionality to me.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-10-17T22:30:54Z",
      "diff_hunk" : "@@ -4093,3 +4095,82 @@ CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n     }\n     return CKeyID();\n }\n+\n+static const std::string STYLE_STRING_NONE = \"\";\n+static const std::string STYLE_STRING_LEGACY = \"legacy\";\n+static const std::string STYLE_STRING_P2SH = \"p2sh\";\n+static const std::string STYLE_STRING_SEGWIT = \"segwit\";\n+\n+OutputStyle ParseStyle(const std::string& style)\n+{\n+    if (style == STYLE_STRING_LEGACY) {\n+        return STYLE_LEGACY;\n+    } else if (style == STYLE_STRING_P2SH || style == \"default\") {\n+        return STYLE_P2SH;\n+    } else if (style == STYLE_STRING_SEGWIT) {\n+        return STYLE_SEGWIT;\n+    } else {\n+        return STYLE_NONE;\n+    }\n+}\n+\n+\n+const std::string& FormatStyle(OutputStyle style)\n+{\n+    switch (style) {\n+    case STYLE_LEGACY: return STYLE_STRING_LEGACY;\n+    case STYLE_P2SH: return STYLE_STRING_P2SH;\n+    case STYLE_SEGWIT: return STYLE_STRING_SEGWIT;\n+    default: assert(false);\n+    }\n+}\n+\n+std::vector<CTxDestination> CWallet::GetAllDestinationsForKey(const CPubKey& key)\n+{\n+    CKeyID keyid = key.GetID();\n+    if (key.IsCompressed()) {\n+        CTxDestination segwit = WitnessV0KeyHash(keyid);\n+        CTxDestination p2sh = CScriptID(GetScriptForDestination(segwit));\n+        return std::vector<CTxDestination>{std::move(keyid), std::move(p2sh), std::move(segwit)};\n+    } else {\n+        return std::vector<CTxDestination>{std::move(keyid)};\n+    }\n+}\n+\n+CTxDestination CWallet::GetDestinationForKey(const CPubKey& key, OutputStyle style)\n+{\n+    switch (style) {\n+    case STYLE_LEGACY: return key.GetID();\n+    case STYLE_P2SH:\n+    case STYLE_SEGWIT: {\n+        CTxDestination witdest = WitnessV0KeyHash(key.GetID());\n+        CScript witprog = GetScriptForDestination(witdest);\n+        // Check if the resulting program is solvable (i.e. doesn't use an uncompressed key)\n+        if (!IsSolvable(witprog)) return key.GetID();\n+        if (style == STYLE_P2SH) {\n+            return CScriptID(witprog);\n+        } else {\n+            return witdest;\n+        }\n+    }\n+    default: assert(false);\n+    }\n+}\n+\n+CTxDestination CWallet::GetDestinationForScript(const CScript& script, OutputStyle style)\n+{\n+    switch (style) {\n+    case STYLE_LEGACY:\n+    case STYLE_P2SH:\n+        return CScriptID(script);\n+    case STYLE_SEGWIT: {\n+        CTxDestination witdest = WitnessV0ScriptHash(Hash(script.begin(), script.end()));\n+        CScript witprog = GetScriptForDestination(witdest);\n+        // Check if the resulting program is solvable (i.e. doesn't use an uncompressed key)\n+        if (!IsSolvable(witprog)) return CScriptID(script);\n+        AddCScript(witprog);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r145274394",
      "id" : 145274394,
      "original_commit_id" : "f542daeb6986b0cc3ea796f177f20739706eddf2",
      "original_position" : 113,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 70018324,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145274394",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The wallet probably needs to be able to generate both `p2sh` and `bech32` addresses, depending on who the user needs to communicate the address to. In fact, the UI might need to display both at the same time. \r\n\r\nFor example, I might send an email requesting payment to a `bech32` address, and telling the recipient to use the `p2sh` address only if their wallet doesn't support the new format. A backwards compatible QR code could contain (admittedly ad hoc): `bitcoin:3ba1...?amount=0.01&bech32=bc1qw5...`.\r\n\r\nSo rather than `-addressstyle`, isn't it better to make address style an argument for calls to `getnewaddress` and `createmultisigaddress`?\r\n\r\nI think this was brought up elsewhere, but If `bech32` is the default, wouldn't that confuse RPC consumers, especially if they do any input validation? `p2sh` seems like a safer default.\r\nAlternatively, perhaps the default can be `bech32`, but with ~a `configure` flag~ _command line option_ to use a different default (and a warning in the release notes). It would be nice if RPC calls were versioned.",
      "created_at" : "2017-10-20T12:28:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-338192534",
      "id" : 338192534,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-10-20T12:41:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/338192534",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@Sjors There is an RPC argument added to address-creating RPCs to override the default.",
      "created_at" : "2017-10-20T12:30:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-338193000",
      "id" : 338193000,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-10-20T12:30:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/338193000",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa I see, perhaps `-addressstyle` should be `-addressstyledefault` instead to make that more clear?",
      "created_at" : "2017-10-20T12:40:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-338195284",
      "id" : 338195284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-10-20T12:40:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/338195284",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebase_me_pls",
      "created_at" : "2017-11-07T22:18:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-342642285",
      "id" : 342642285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-07T22:18:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/342642285",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "rebased_it",
      "created_at" : "2017-11-08T00:19:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-342668198",
      "id" : 342668198,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-08T00:19:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/342668198",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r150243374"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150243374"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm not  native speaker, but \"What style change to use\" seems like broken English to me. Shouldn't it be something like \"Which style of change addresses to use\"?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-10T14:09:25Z",
      "diff_hunk" : "@@ -15,6 +15,8 @@\n std::string GetWalletHelpString(bool showDebug)\n {\n     std::string strUsage = HelpMessageGroup(_(\"Wallet options:\"));\n+    strUsage += HelpMessageOpt(\"-addressstyle\", _(\"What style addresses to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\", default: \\\"p2sh\\\")\"));\n+    strUsage += HelpMessageOpt(\"-changestyle\", _(\"What style change to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\"), default: same as -addressstyle\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r150243374",
      "id" : 150243374,
      "original_commit_id" : "2cd3e3259c5813b4d1a295549e02a2e08ec459d9",
      "original_position" : 5,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 75766547,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150243374",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/425166?v=4",
         "events_url" : "https://api.github.com/users/flack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/flack/followers",
         "following_url" : "https://api.github.com/users/flack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/flack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/flack",
         "id" : 425166,
         "login" : "flack",
         "organizations_url" : "https://api.github.com/users/flack/orgs",
         "received_events_url" : "https://api.github.com/users/flack/received_events",
         "repos_url" : "https://api.github.com/users/flack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/flack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/flack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/flack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r150337564"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150337564"
         }
      },
      "author_association" : "NONE",
      "body" : "Native English speaker here.  Here's how I'd write these two:\r\n\r\n\"Receiving address type (...)\"\r\n\"Change address type (...)\"\r\n\r\nLegacy/p2sh/bech32 feel like types to me, not styles.  Though at that point you'd have to change the command line parameters as well.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-10T21:05:37Z",
      "diff_hunk" : "@@ -15,6 +15,8 @@\n std::string GetWalletHelpString(bool showDebug)\n {\n     std::string strUsage = HelpMessageGroup(_(\"Wallet options:\"));\n+    strUsage += HelpMessageOpt(\"-addressstyle\", _(\"What style addresses to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\", default: \\\"p2sh\\\")\"));\n+    strUsage += HelpMessageOpt(\"-changestyle\", _(\"What style change to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\"), default: same as -addressstyle\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r150337564",
      "id" : 150337564,
      "in_reply_to_id" : 150243374,
      "original_commit_id" : "2cd3e3259c5813b4d1a295549e02a2e08ec459d9",
      "original_position" : 5,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 75880846,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150337564",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1290510?v=4",
         "events_url" : "https://api.github.com/users/CydeWeys/events{/privacy}",
         "followers_url" : "https://api.github.com/users/CydeWeys/followers",
         "following_url" : "https://api.github.com/users/CydeWeys/following{/other_user}",
         "gists_url" : "https://api.github.com/users/CydeWeys/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/CydeWeys",
         "id" : 1290510,
         "login" : "CydeWeys",
         "organizations_url" : "https://api.github.com/users/CydeWeys/orgs",
         "received_events_url" : "https://api.github.com/users/CydeWeys/received_events",
         "repos_url" : "https://api.github.com/users/CydeWeys/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/CydeWeys/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/CydeWeys/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/CydeWeys"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "What is the reasoning for having `addressstyle` and `changestyle` as separate options; that is, what is the envisaged use case for setting these defaults to different things?",
      "created_at" : "2017-11-11T16:19:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-343675953",
      "id" : 343675953,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-11T16:19:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343675953",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/17520?v=4",
         "events_url" : "https://api.github.com/users/invariant/events{/privacy}",
         "followers_url" : "https://api.github.com/users/invariant/followers",
         "following_url" : "https://api.github.com/users/invariant/following{/other_user}",
         "gists_url" : "https://api.github.com/users/invariant/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/invariant",
         "id" : 17520,
         "login" : "invariant",
         "organizations_url" : "https://api.github.com/users/invariant/orgs",
         "received_events_url" : "https://api.github.com/users/invariant/received_events",
         "repos_url" : "https://api.github.com/users/invariant/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/invariant/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/invariant/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/invariant"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Milestone 0.15.2 was removed, does it mean it goes straight to 0.16 only? Thanks.",
      "created_at" : "2017-11-12T15:55:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-343746694",
      "id" : 343746694,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-12T15:55:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343746694",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11314444?v=4",
         "events_url" : "https://api.github.com/users/martin-lizner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martin-lizner/followers",
         "following_url" : "https://api.github.com/users/martin-lizner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martin-lizner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martin-lizner",
         "id" : 11314444,
         "login" : "martin-lizner",
         "organizations_url" : "https://api.github.com/users/martin-lizner/orgs",
         "received_events_url" : "https://api.github.com/users/martin-lizner/received_events",
         "repos_url" : "https://api.github.com/users/martin-lizner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martin-lizner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martin-lizner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martin-lizner"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes\n\nOn Nov 12, 2017 10:55, \"Martin Lzner\" <notifications@github.com> wrote:\n\n> Milestone 0.15.2 was removed, does it mean it goes straight to 0.16 only?\n> Thanks.\n>\n> \n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-343746694>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGGmv7mc0a0e0Y92zjU3aPymx17snBlFks5s1xUIgaJpZM4PjkGp>\n> .\n>\n",
      "created_at" : "2017-11-12T16:42:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-343749957",
      "id" : 343749957,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-12T16:42:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343749957",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Does this mean we will have segwit in GUI and bech32 in around May? If that so, would you pls comment on why 0.15.2 milestone was dropped?",
      "created_at" : "2017-11-12T18:45:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-343757936",
      "id" : 343757936,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-12T18:45:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343757936",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11314444?v=4",
         "events_url" : "https://api.github.com/users/martin-lizner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martin-lizner/followers",
         "following_url" : "https://api.github.com/users/martin-lizner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martin-lizner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martin-lizner",
         "id" : 11314444,
         "login" : "martin-lizner",
         "organizations_url" : "https://api.github.com/users/martin-lizner/orgs",
         "received_events_url" : "https://api.github.com/users/martin-lizner/received_events",
         "repos_url" : "https://api.github.com/users/martin-lizner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martin-lizner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martin-lizner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martin-lizner"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The 0.15.2 milestone would only delay segwit wallet. The current plan is to\nget the segwit wallet out as soon as it is ready with the next major\nrelease.\n\nOn Sun, Nov 12, 2017 at 6:45 PM, Martin Lzner <notifications@github.com>\nwrote:\n\n> Does this mean we will have segwit in GUI and bech32 in around May? If\n> that so, would you pls comment on why 0.15.2 milestone was dropped?\n>\n> \n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-343757936>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGGmv9SEn6dU3nzJU7gZVx9z2cf7jbCTks5s1zzYgaJpZM4PjkGp>\n> .\n>\n",
      "created_at" : "2017-11-13T01:27:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-343786495",
      "id" : 343786495,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-13T01:27:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343786495",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "I've made a writeup about wallet design in the future, and how SegWit support now interacts with it: https://gist.github.com/sipa/125cfa1615946d0c3f3eec2ad7f250a2\r\n\r\nThe PR currently only implements solution (I.1) from the document, but I'm happy to reconsider.",
      "created_at" : "2017-11-16T19:41:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-345039809",
      "id" : 345039809,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-16T19:41:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345039809",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820106"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820106"
         }
      },
      "author_association" : "OWNER",
      "body" : "Will add those later.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T00:41:15Z",
      "diff_hunk" : "@@ -168,6 +170,22 @@ bool WalletParameterInteraction()\n     bSpendZeroConfChange = gArgs.GetBoolArg(\"-spendzeroconfchange\", DEFAULT_SPEND_ZEROCONF_CHANGE);\n     fWalletRbf = gArgs.GetBoolArg(\"-walletrbf\", DEFAULT_WALLET_RBF);\n \n+    std::string style = gArgs.GetArg(\"-addressstyle\", \"default\");\n+    OutputStyle parsed_style = ParseStyle(style);\n+    if (parsed_style == STYLE_NONE) {\n+        return InitError(strprintf(_(\"Unknown address style '%s'\"), style));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820106",
      "id" : 151820106,
      "in_reply_to_id" : 141033697,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 16,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 77597987,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820106",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820127"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820127"
         }
      },
      "author_association" : "OWNER",
      "body" : "Will add those later.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T00:41:25Z",
      "diff_hunk" : "@@ -168,6 +170,22 @@ bool WalletParameterInteraction()\n     bSpendZeroConfChange = gArgs.GetBoolArg(\"-spendzeroconfchange\", DEFAULT_SPEND_ZEROCONF_CHANGE);\n     fWalletRbf = gArgs.GetBoolArg(\"-walletrbf\", DEFAULT_WALLET_RBF);\n \n+    std::string style = gArgs.GetArg(\"-addressstyle\", \"default\");\n+    OutputStyle parsed_style = ParseStyle(style);\n+    if (parsed_style == STYLE_NONE) {\n+        return InitError(strprintf(_(\"Unknown address style '%s'\"), style));\n+    } else {\n+        address_style = parsed_style;\n+    }\n+\n+    style = gArgs.GetArg(\"-changestyle\", style);\n+    parsed_style = ParseStyle(style);\n+    if (parsed_style == STYLE_NONE) {\n+        return InitError(strprintf(_(\"Unknown change style '%s'\"), style));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820127",
      "id" : 151820127,
      "in_reply_to_id" : 141034833,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 24,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 77598012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820127",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820167"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820167"
         }
      },
      "author_association" : "OWNER",
      "body" : "Added.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T00:41:53Z",
      "diff_hunk" : "@@ -135,14 +135,15 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 1)\n+    if (request.fHelp || request.params.size() > 2)\n         throw std::runtime_error(\n-            \"getnewaddress ( \\\"account\\\" )\\n\"\n+            \"getnewaddress ( \\\"account\\\" ) ( \\\"style\\\" )\\n\"\n             \"\\nReturns a new Bitcoin address for receiving payments.\\n\"\n             \"If 'account' is specified (DEPRECATED), it is added to the address book \\n\"\n             \"so payments received with the address will be credited to 'account'.\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"account\\\"        (string, optional) DEPRECATED. The account name for the address to be linked to. If not provided, the default account \\\"\\\" is used. It can also be set to the empty string \\\"\\\" to represent the default account. The account does not need to exist, it will be created if there is no account by the given name.\\n\"\n+            \"2. \\\"style\\\"          (string, optional) The address style to use. Valid options are 'p2pkh', 'p2sh_p2wpkh', and 'p2wpkh'\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820167",
      "id" : 151820167,
      "in_reply_to_id" : 141034548,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 14,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77598056,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820167",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820189"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820189"
         }
      },
      "author_association" : "OWNER",
      "body" : "Will add later.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T00:42:09Z",
      "diff_hunk" : "@@ -157,6 +158,14 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n     if (!request.params[0].isNull())\n         strAccount = AccountFromValue(request.params[0]);\n \n+    OutputStyle style = address_style;\n+    if (!request.params[1].isNull()) {\n+        style = ParseStyle(request.params[1].get_str());\n+        if (style == STYLE_NONE) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Unknown address style '%s'\", request.params[1].get_str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820189",
      "id" : 151820189,
      "in_reply_to_id" : 141034483,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 26,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77598087,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820189",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820217"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820217"
         }
      },
      "author_association" : "OWNER",
      "body" : "Added.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T00:42:34Z",
      "diff_hunk" : "@@ -225,11 +234,13 @@ UniValue getrawchangeaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 0)\n+    if (request.fHelp || request.params.size() > 1)\n         throw std::runtime_error(\n-            \"getrawchangeaddress\\n\"\n+            \"getrawchangeaddress ( \\\"style\\\" )\\n\"\n             \"\\nReturns a new Bitcoin address, for receiving change.\\n\"\n             \"This is for use with raw transactions, NOT normal use.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"style\\\"          (string, optional) The address style to use. Valid options are 'p2pkh', 'p2sh_p2wpkh', and 'p2wpkh'\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820217",
      "id" : 151820217,
      "in_reply_to_id" : 141034121,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 69,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77598122,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820217",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820849"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820849"
         }
      },
      "author_association" : "OWNER",
      "body" : "Fixing.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T00:50:07Z",
      "diff_hunk" : "@@ -243,16 +254,24 @@ UniValue getrawchangeaddress(const JSONRPCRequest& request)\n         pwallet->TopUpKeyPool();\n     }\n \n+    OutputStyle style = change_style;\n+    if (!request.params[0].isNull()) {\n+        style = ParseStyle(request.params[1].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820849",
      "id" : 151820849,
      "in_reply_to_id" : 141034255,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 79,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77598834,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820849",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820865"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820865"
         }
      },
      "author_association" : "OWNER",
      "body" : "Will add.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T00:50:19Z",
      "diff_hunk" : "@@ -243,16 +254,24 @@ UniValue getrawchangeaddress(const JSONRPCRequest& request)\n         pwallet->TopUpKeyPool();\n     }\n \n+    OutputStyle style = change_style;\n+    if (!request.params[0].isNull()) {\n+        style = ParseStyle(request.params[1].get_str());\n+        if (style == STYLE_NONE) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Unknown address style '%s'\", request.params[0].get_str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820865",
      "id" : 151820865,
      "in_reply_to_id" : 141034981,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 81,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77598854,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820865",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820901"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820901"
         }
      },
      "author_association" : "OWNER",
      "body" : "I think it's very cheap - look at the tag, and return the argument with a cast.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T00:50:53Z",
      "diff_hunk" : "@@ -4051,3 +4051,24 @@ bool CWallet::IsSolvable(const CScript& script) const\n     SignatureData sigs;\n     return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n }\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.\n+    if (boost::get<CKeyID>(&dest)) {\n+        return boost::get<CKeyID>(dest);\n+    }\n+    if (boost::get<WitnessV0KeyHash>(&dest)) {\n+        return CKeyID(boost::get<WitnessV0KeyHash>(dest));\n+    }\n+    if (boost::get<CScriptID>(&dest)) {\n+        CScript script;\n+        CTxDestination inner_dest;\n+        if (GetCScript(boost::get<CScriptID>(dest), script) && ExtractDestination(script, inner_dest)) {\n+            if (boost::get<WitnessV0KeyHash>(&inner_dest)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820901",
      "id" : 151820901,
      "in_reply_to_id" : 140994498,
      "original_commit_id" : "1ae94623eceb96728b6a791732776d01a455f83f",
      "original_position" : 18,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77598898,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820901",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820911"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820911"
         }
      },
      "author_association" : "OWNER",
      "body" : "Done.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T00:51:04Z",
      "diff_hunk" : "@@ -4072,3 +4074,82 @@ CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n     }\n     return CKeyID();\n }\n+\n+static const std::string STYLE_STRING_NONE = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820911",
      "id" : 151820911,
      "in_reply_to_id" : 140995719,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 41,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77598908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820911",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820922"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820922"
         }
      },
      "author_association" : "OWNER",
      "body" : "Done.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T00:51:11Z",
      "diff_hunk" : "@@ -133,8 +133,15 @@ def run_test(self):\n             newaddress = self.nodes[i].getnewaddress()\n             self.pubkey.append(self.nodes[i].validateaddress(newaddress)[\"pubkey\"])\n             multiaddress = self.nodes[i].addmultisigaddress(1, [self.pubkey[-1]])\n-            self.nodes[i].addwitnessaddress(newaddress)\n-            self.nodes[i].addwitnessaddress(multiaddress)\n+            multiscript = CScript([OP_1, hex_str_to_bytes(self.pubkey[-1]), OP_1, OP_CHECKMULTISIG])\n+            p2sh_addr = self.nodes[i].addwitnessaddress(newaddress, True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820922",
      "id" : 151820922,
      "in_reply_to_id" : 141035708,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 63,
      "path" : "test/functional/segwit.py",
      "position" : null,
      "pull_request_review_id" : 77598915,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820922",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820936"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820936"
         }
      },
      "author_association" : "OWNER",
      "body" : "Added explanation of defaults.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T00:51:24Z",
      "diff_hunk" : "@@ -15,6 +15,8 @@\n std::string GetWalletHelpString(bool showDebug)\n {\n     std::string strUsage = HelpMessageGroup(_(\"Wallet options:\"));\n+    strUsage += HelpMessageOpt(\"-addressstyle\", _(\"What style addresses to use (\\\"p2pkh\\\", \\\"p2sh_p2wpkh\\\", \\\"p2wpkh\\\")\"));\n+    strUsage += HelpMessageOpt(\"-changestyle\", _(\"What style change to use (\\\"p2pkh\\\", \\\"p2sh_p2wpkh\\\", \\\"p2wpkh\\\")\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820936",
      "id" : 151820936,
      "in_reply_to_id" : 141172352,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 5,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 77598935,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820936",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820954"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820954"
         }
      },
      "author_association" : "OWNER",
      "body" : "I think that should be done separately.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T00:51:35Z",
      "diff_hunk" : "@@ -135,14 +135,15 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 1)\n+    if (request.fHelp || request.params.size() > 2)\n         throw std::runtime_error(\n-            \"getnewaddress ( \\\"account\\\" )\\n\"\n+            \"getnewaddress ( \\\"account\\\" ) ( \\\"style\\\" )\\n\"\n             \"\\nReturns a new Bitcoin address for receiving payments.\\n\"\n             \"If 'account' is specified (DEPRECATED), it is added to the address book \\n\"\n             \"so payments received with the address will be credited to 'account'.\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"account\\\"        (string, optional) DEPRECATED. The account name for the address to be linked to. If not provided, the default account \\\"\\\" is used. It can also be set to the empty string \\\"\\\" to represent the default account. The account does not need to exist, it will be created if there is no account by the given name.\\n\"\n+            \"2. \\\"style\\\"          (string, optional) The address style to use. Valid options are 'p2pkh', 'p2sh_p2wpkh', and 'p2wpkh'\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151820954",
      "id" : 151820954,
      "in_reply_to_id" : 141173466,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 14,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77598954,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151820954",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824376"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824376"
         }
      },
      "author_association" : "OWNER",
      "body" : "Done.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T01:51:05Z",
      "diff_hunk" : "@@ -64,6 +67,13 @@ class DescribeAddressVisitor : public boost::static_visitor<UniValue>\n             obj.push_back(Pair(\"script\", GetTxnOutputType(whichType)));\n             obj.push_back(Pair(\"hex\", HexStr(subscript.begin(), subscript.end())));\n             UniValue a(UniValue::VARR);\n+            if (whichType == TX_WITNESS_V0_KEYHASH || whichType == TX_WITNESS_V0_SCRIPTHASH) {\n+                UniValue subobj = boost::apply_visitor(*this, addresses[0]);\n+                obj.push_back(Pair(\"embedded\", std::move(subobj)));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824376",
      "id" : 151824376,
      "in_reply_to_id" : 141910029,
      "original_commit_id" : "a3a79cdb2193facac697857a472fe90c235f7c82",
      "original_position" : 30,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 77602754,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824376",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824518"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824518"
         }
      },
      "author_association" : "OWNER",
      "body" : "Fixed. Standardized on 'legacy', 'p2sh', and 'bech32'. It's not entirely accurate, as P2SH is a scriptPubKey type and not its address encoding, but meh - they're probably the most recognizable names.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T01:54:36Z",
      "diff_hunk" : "@@ -135,14 +135,15 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 1)\n+    if (request.fHelp || request.params.size() > 2)\n         throw std::runtime_error(\n-            \"getnewaddress ( \\\"account\\\" )\\n\"\n+            \"getnewaddress ( \\\"account\\\" ) ( \\\"style\\\" )\\n\"\n             \"\\nReturns a new Bitcoin address for receiving payments.\\n\"\n             \"If 'account' is specified (DEPRECATED), it is added to the address book \\n\"\n             \"so payments received with the address will be credited to 'account'.\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"account\\\"        (string, optional) DEPRECATED. The account name for the address to be linked to. If not provided, the default account \\\"\\\" is used. It can also be set to the empty string \\\"\\\" to represent the default account. The account does not need to exist, it will be created if there is no account by the given name.\\n\"\n+            \"2. \\\"style\\\"          (string, optional) The address style to use. Valid options are 'p2pkh', 'p2sh_p2wpkh', and 'p2wpkh'\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824518",
      "id" : 151824518,
      "in_reply_to_id" : 141964928,
      "original_commit_id" : "20da3447269696a3505b061852771d0bb11d6779",
      "original_position" : 14,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77602879,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824518",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824578"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824578"
         }
      },
      "author_association" : "OWNER",
      "body" : "Fixed.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T01:56:28Z",
      "diff_hunk" : "@@ -1234,7 +1254,7 @@ UniValue addwitnessaddress(const JSONRPCRequest& request)\n \n     {\n         LOCK(cs_main);\n-        if (!IsWitnessEnabled(chainActive.Tip(), Params().GetConsensus()) && !gArgs.GetBoolArg(\"-walletprematurewitness\", false)) {\n+        if (!IsWitnessEnabled(pindexBestHeader, Params().GetConsensus()) && !gArgs.GetBoolArg(\"-walletprematurewitness\", false)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824578",
      "id" : 151824578,
      "in_reply_to_id" : 141967056,
      "original_commit_id" : "20da3447269696a3505b061852771d0bb11d6779",
      "original_position" : 121,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77602941,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824578",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824607"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824607"
         }
      },
      "author_association" : "OWNER",
      "body" : "Fixed as a global now, as we don't really have a way to configure it per wallet. Can be revised if there ever is.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T01:57:05Z",
      "diff_hunk" : "@@ -43,6 +43,8 @@ CFeeRate payTxFee(DEFAULT_TRANSACTION_FEE);\n unsigned int nTxConfirmTarget = DEFAULT_TX_CONFIRM_TARGET;\n bool bSpendZeroConfChange = DEFAULT_SPEND_ZEROCONF_CHANGE;\n bool fWalletRbf = DEFAULT_WALLET_RBF;\n+OutputStyle address_style = STYLE_P2SH;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824607",
      "id" : 151824607,
      "in_reply_to_id" : 141965443,
      "original_commit_id" : "20da3447269696a3505b061852771d0bb11d6779",
      "original_position" : 4,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77602967,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824607",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824611"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824611"
         }
      },
      "author_association" : "OWNER",
      "body" : "Fixed.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T01:57:17Z",
      "diff_hunk" : "@@ -43,6 +43,8 @@ CFeeRate payTxFee(DEFAULT_TRANSACTION_FEE);\n unsigned int nTxConfirmTarget = DEFAULT_TX_CONFIRM_TARGET;\n bool bSpendZeroConfChange = DEFAULT_SPEND_ZEROCONF_CHANGE;\n bool fWalletRbf = DEFAULT_WALLET_RBF;\n+OutputStyle address_style = STYLE_P2SH;\n+OutputStyle change_style = STYLE_P2SH;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824611",
      "id" : 151824611,
      "in_reply_to_id" : 141967691,
      "original_commit_id" : "20da3447269696a3505b061852771d0bb11d6779",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77602972,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824611",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824643"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824643"
         }
      },
      "author_association" : "OWNER",
      "body" : "I've always considered P2WPKH as specifically referring to v0 20-byte witness programs, and P2WSH as v0 32-byte ones. We'll need to come up with even clumsier names later ;)",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T01:58:07Z",
      "diff_hunk" : "@@ -4061,3 +4061,24 @@ bool CWallet::IsSolvable(const CScript& script) const\n     SignatureData sigs;\n     return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n }\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824643",
      "id" : 151824643,
      "in_reply_to_id" : 141960988,
      "original_commit_id" : "7f88d8ad7796c0f6d1e80d11943c19f0af2cda62",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77603011,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824643",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824692"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824692"
         }
      },
      "author_association" : "OWNER",
      "body" : "Fixed.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T01:59:08Z",
      "diff_hunk" : "@@ -135,14 +135,15 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 1)\n+    if (request.fHelp || request.params.size() > 2)\n         throw std::runtime_error(\n-            \"getnewaddress ( \\\"account\\\" )\\n\"\n+            \"getnewaddress ( \\\"account\\\" ) ( \\\"style\\\" )\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824692",
      "id" : 151824692,
      "in_reply_to_id" : 144193626,
      "original_commit_id" : "5632374f2f71bca384ceed07ca6842fd87102346",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77603066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824692",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824702"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824702"
         }
      },
      "author_association" : "OWNER",
      "body" : "Fixed, I think it's consistent now.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T01:59:25Z",
      "diff_hunk" : "@@ -4050,3 +4052,114 @@ bool CMerkleTx::AcceptToMemoryPool(const CAmount& nAbsurdFee, CValidationState&\n     return ::AcceptToMemoryPool(mempool, state, tx, nullptr /* pfMissingInputs */,\n                                 nullptr /* plTxnReplaced */, false /* bypass_limits */, nAbsurdFee);\n }\n+\n+bool CWallet::IsSolvable(const CScript& script) const\n+{\n+    // This check is to make sure that the script we created can actually be solved for and signed by us\n+    // if we were to have the private keys. This is just to make sure that the script is valid and that,\n+    // if found in a transaction, we would still accept and relay that transaction. In particular,\n+    // it will reject witness outputs that require signing with an uncompressed public key.\n+    DummySignatureCreator creator(this);\n+    SignatureData sigs;\n+    return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n+}\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.\n+    if (boost::get<CKeyID>(&dest)) {\n+        return boost::get<CKeyID>(dest);\n+    }\n+    if (boost::get<WitnessV0KeyHash>(&dest)) {\n+        return CKeyID(boost::get<WitnessV0KeyHash>(dest));\n+    }\n+    if (boost::get<CScriptID>(&dest)) {\n+        CScript script;\n+        CTxDestination inner_dest;\n+        if (GetCScript(boost::get<CScriptID>(dest), script) && ExtractDestination(script, inner_dest)) {\n+            if (boost::get<WitnessV0KeyHash>(&inner_dest)) {\n+                return CKeyID(boost::get<WitnessV0KeyHash>(inner_dest));\n+            }\n+        }\n+    }\n+    return CKeyID();\n+}\n+\n+static const std::string STYLE_STRING_NONE = \"\";\n+static const std::string STYLE_STRING_LEGACY = \"legacy\";\n+static const std::string STYLE_STRING_P2SH = \"p2sh\";\n+static const std::string STYLE_STRING_SEGWIT = \"segwit\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151824702",
      "id" : 151824702,
      "in_reply_to_id" : 144192744,
      "original_commit_id" : "5632374f2f71bca384ceed07ca6842fd87102346",
      "original_position" : 76,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77603079,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151824702",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151825021"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151825021"
         }
      },
      "author_association" : "OWNER",
      "body" : "Cool, done.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T02:08:17Z",
      "diff_hunk" : "@@ -73,8 +73,19 @@ class CNoDestination {\n     friend bool operator<(const CNoDestination &a, const CNoDestination &b) { return true; }\n };\n \n-struct WitnessV0ScriptHash : public uint256 {};\n-struct WitnessV0KeyHash : public uint160 {};\n+struct WitnessV0ScriptHash : public uint256\n+{\n+public:\n+    WitnessV0ScriptHash() : uint256() {}\n+    WitnessV0ScriptHash(const uint256& in) : uint256(in) {}\n+};\n+\n+struct WitnessV0KeyHash : public uint160\n+{\n+public:\n+    WitnessV0KeyHash() : uint160() {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151825021",
      "id" : 151825021,
      "in_reply_to_id" : 145239469,
      "original_commit_id" : "fb0361d74a578c626b8876e71ad35775d718aed9",
      "original_position" : 16,
      "path" : "src/script/standard.h",
      "position" : 17,
      "pull_request_review_id" : 77603455,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151825021",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151825641"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151825641"
         }
      },
      "author_association" : "OWNER",
      "body" : "Ugh, thanks for pointing that out.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T02:27:28Z",
      "diff_hunk" : "@@ -13,6 +13,18 @@ bool CKeyStore::AddKey(const CKey &key) {\n     return AddKeyPubKey(key, key.GetPubKey());\n }\n \n+void CBasicKeyStore::AddRelatedKeyScripts(const CPubKey& pubkey)\n+{\n+    AssertLockHeld(cs_KeyStore);\n+    // This adds the redeemscripts necessary to detect P2WPKH and P2SH-P2WPKH\n+    // outputs.\n+    if (pubkey.IsCompressed()) {\n+        CScript script = CScript() << OP_0 << ToByteVector(pubkey.GetID());\n+        // This does not use AddCScript, as it may be overridden.\n+        mapScripts[CScriptID(script)] = std::move(script);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151825641",
      "id" : 151825641,
      "in_reply_to_id" : 145261446,
      "original_commit_id" : "b7209bdc9007b0f6c22403ab042dd474eb8ef2c5",
      "original_position" : 12,
      "path" : "src/keystore.cpp",
      "position" : null,
      "pull_request_review_id" : 77604118,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151825641",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151825660"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151825660"
         }
      },
      "author_association" : "OWNER",
      "body" : "Yes, tests that expect to see a `pubkey` field when calling `validateaddress` on the output of `getnewaddress`.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T02:28:10Z",
      "diff_hunk" : "@@ -67,6 +67,13 @@ class DescribeAddressVisitor : public boost::static_visitor<UniValue>\n             obj.push_back(Pair(\"script\", GetTxnOutputType(whichType)));\n             obj.push_back(Pair(\"hex\", HexStr(subscript.begin(), subscript.end())));\n             UniValue a(UniValue::VARR);\n+            if (whichType == TX_WITNESS_V0_KEYHASH || whichType == TX_WITNESS_V0_SCRIPTHASH) {\n+                UniValue subobj = boost::apply_visitor(*this, addresses[0]);\n+                obj.push_back(Pair(\"embedded\", std::move(subobj)));\n+                if (subobj.exists(\"pubkey\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151825660",
      "id" : 151825660,
      "in_reply_to_id" : 145245638,
      "original_commit_id" : "97f4fc173dda51f21cc092b9b29a9ea4b208f8e2",
      "original_position" : 7,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 77604147,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151825660",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151827221"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151827221"
         }
      },
      "author_association" : "OWNER",
      "body" : "Fixed.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T03:31:55Z",
      "diff_hunk" : "@@ -4072,3 +4072,24 @@ bool CWallet::IsSolvable(const CScript& script) const\n     SignatureData sigs;\n     return (ProduceSignature(creator, script, sigs) && VerifyScript(sigs.scriptSig, script, &sigs.scriptWitness, MANDATORY_SCRIPT_VERIFY_FLAGS | SCRIPT_VERIFY_WITNESS_PUBKEYTYPE, creator.Checker()));\n }\n+\n+CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.\n+    if (boost::get<CKeyID>(&dest)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151827221",
      "id" : 151827221,
      "in_reply_to_id" : 145255319,
      "original_commit_id" : "8c55a70cebeb4e18c686c93d96dde95deed6dc0e",
      "original_position" : 8,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77605761,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151827221",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151827229"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151827229"
         }
      },
      "author_association" : "OWNER",
      "body" : "Moved to script/signer.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T03:32:16Z",
      "diff_hunk" : "@@ -4061,3 +4061,14 @@ bool CMerkleTx::AcceptToMemoryPool(const CAmount& nAbsurdFee, CValidationState&\n     return ::AcceptToMemoryPool(mempool, state, tx, nullptr /* pfMissingInputs */,\n                                 nullptr /* plTxnReplaced */, false /* bypass_limits */, nAbsurdFee);\n }\n+\n+bool CWallet::IsSolvable(const CScript& script) const\n+{\n+    // This check is to make sure that the script we created can actually be solved for and signed by us\n+    // if we were to have the private keys. This is just to make sure that the script is valid and that,\n+    // if found in a transaction, we would still accept and relay that transaction. In particular,\n+    // it will reject witness outputs that require signing with an uncompressed public key.\n+    DummySignatureCreator creator(this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151827229",
      "id" : 151827229,
      "in_reply_to_id" : 145270452,
      "original_commit_id" : "4bc304c9fa8657bc5a025fecfa7fa40e30ea7a20",
      "original_position" : 11,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77605771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151827229",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151827247"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151827247"
         }
      },
      "author_association" : "OWNER",
      "body" : "Done. IsSolvable is moved to script/sign, GetDestinationForKey is moved to keystore.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T03:33:07Z",
      "diff_hunk" : "@@ -4093,3 +4095,82 @@ CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n     }\n     return CKeyID();\n }\n+\n+static const std::string STYLE_STRING_NONE = \"\";\n+static const std::string STYLE_STRING_LEGACY = \"legacy\";\n+static const std::string STYLE_STRING_P2SH = \"p2sh\";\n+static const std::string STYLE_STRING_SEGWIT = \"segwit\";\n+\n+OutputStyle ParseStyle(const std::string& style)\n+{\n+    if (style == STYLE_STRING_LEGACY) {\n+        return STYLE_LEGACY;\n+    } else if (style == STYLE_STRING_P2SH || style == \"default\") {\n+        return STYLE_P2SH;\n+    } else if (style == STYLE_STRING_SEGWIT) {\n+        return STYLE_SEGWIT;\n+    } else {\n+        return STYLE_NONE;\n+    }\n+}\n+\n+\n+const std::string& FormatStyle(OutputStyle style)\n+{\n+    switch (style) {\n+    case STYLE_LEGACY: return STYLE_STRING_LEGACY;\n+    case STYLE_P2SH: return STYLE_STRING_P2SH;\n+    case STYLE_SEGWIT: return STYLE_STRING_SEGWIT;\n+    default: assert(false);\n+    }\n+}\n+\n+std::vector<CTxDestination> CWallet::GetAllDestinationsForKey(const CPubKey& key)\n+{\n+    CKeyID keyid = key.GetID();\n+    if (key.IsCompressed()) {\n+        CTxDestination segwit = WitnessV0KeyHash(keyid);\n+        CTxDestination p2sh = CScriptID(GetScriptForDestination(segwit));\n+        return std::vector<CTxDestination>{std::move(keyid), std::move(p2sh), std::move(segwit)};\n+    } else {\n+        return std::vector<CTxDestination>{std::move(keyid)};\n+    }\n+}\n+\n+CTxDestination CWallet::GetDestinationForKey(const CPubKey& key, OutputStyle style)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151827247",
      "id" : 151827247,
      "in_reply_to_id" : 145271944,
      "original_commit_id" : "f542daeb6986b0cc3ea796f177f20739706eddf2",
      "original_position" : 82,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77605798,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151827247",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151827322"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151827322"
         }
      },
      "author_association" : "OWNER",
      "body" : "Yes, it's ugly. I don't immediately see a nicer solution though, except for a callback to pass in, or duplicating part of this function just to find the correct program.\r\n\r\nNote that if it weren't for the implicitly-know-about-witness-versions-of-keys logic, an equivalent line would be needed in GetDestinationForKey or its callers.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T03:37:07Z",
      "diff_hunk" : "@@ -4093,3 +4095,82 @@ CKeyID CWallet::GetKeyForDestination(const CTxDestination& dest) const\n     }\n     return CKeyID();\n }\n+\n+static const std::string STYLE_STRING_NONE = \"\";\n+static const std::string STYLE_STRING_LEGACY = \"legacy\";\n+static const std::string STYLE_STRING_P2SH = \"p2sh\";\n+static const std::string STYLE_STRING_SEGWIT = \"segwit\";\n+\n+OutputStyle ParseStyle(const std::string& style)\n+{\n+    if (style == STYLE_STRING_LEGACY) {\n+        return STYLE_LEGACY;\n+    } else if (style == STYLE_STRING_P2SH || style == \"default\") {\n+        return STYLE_P2SH;\n+    } else if (style == STYLE_STRING_SEGWIT) {\n+        return STYLE_SEGWIT;\n+    } else {\n+        return STYLE_NONE;\n+    }\n+}\n+\n+\n+const std::string& FormatStyle(OutputStyle style)\n+{\n+    switch (style) {\n+    case STYLE_LEGACY: return STYLE_STRING_LEGACY;\n+    case STYLE_P2SH: return STYLE_STRING_P2SH;\n+    case STYLE_SEGWIT: return STYLE_STRING_SEGWIT;\n+    default: assert(false);\n+    }\n+}\n+\n+std::vector<CTxDestination> CWallet::GetAllDestinationsForKey(const CPubKey& key)\n+{\n+    CKeyID keyid = key.GetID();\n+    if (key.IsCompressed()) {\n+        CTxDestination segwit = WitnessV0KeyHash(keyid);\n+        CTxDestination p2sh = CScriptID(GetScriptForDestination(segwit));\n+        return std::vector<CTxDestination>{std::move(keyid), std::move(p2sh), std::move(segwit)};\n+    } else {\n+        return std::vector<CTxDestination>{std::move(keyid)};\n+    }\n+}\n+\n+CTxDestination CWallet::GetDestinationForKey(const CPubKey& key, OutputStyle style)\n+{\n+    switch (style) {\n+    case STYLE_LEGACY: return key.GetID();\n+    case STYLE_P2SH:\n+    case STYLE_SEGWIT: {\n+        CTxDestination witdest = WitnessV0KeyHash(key.GetID());\n+        CScript witprog = GetScriptForDestination(witdest);\n+        // Check if the resulting program is solvable (i.e. doesn't use an uncompressed key)\n+        if (!IsSolvable(witprog)) return key.GetID();\n+        if (style == STYLE_P2SH) {\n+            return CScriptID(witprog);\n+        } else {\n+            return witdest;\n+        }\n+    }\n+    default: assert(false);\n+    }\n+}\n+\n+CTxDestination CWallet::GetDestinationForScript(const CScript& script, OutputStyle style)\n+{\n+    switch (style) {\n+    case STYLE_LEGACY:\n+    case STYLE_P2SH:\n+        return CScriptID(script);\n+    case STYLE_SEGWIT: {\n+        CTxDestination witdest = WitnessV0ScriptHash(Hash(script.begin(), script.end()));\n+        CScript witprog = GetScriptForDestination(witdest);\n+        // Check if the resulting program is solvable (i.e. doesn't use an uncompressed key)\n+        if (!IsSolvable(witprog)) return CScriptID(script);\n+        AddCScript(witprog);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151827322",
      "id" : 151827322,
      "in_reply_to_id" : 145274394,
      "original_commit_id" : "f542daeb6986b0cc3ea796f177f20739706eddf2",
      "original_position" : 113,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 77605881,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151827322",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@invariant You may wish to use bech32 as change style as soon as possible (for cost) or once it's used sufficiently on the network (for privacy), even if your recipients don't support bech32 yet.",
      "created_at" : "2017-11-18T03:38:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-345415518",
      "id" : 345415518,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-18T03:38:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345415518",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Rebased and addressed my review comments.",
      "created_at" : "2017-11-18T03:59:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-345416387",
      "id" : 345416387,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-18T03:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345416387",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151830086"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151830086"
         }
      },
      "author_association" : "OWNER",
      "body" : "Changed to address_type and change_type, and edited the comment language.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T06:09:18Z",
      "diff_hunk" : "@@ -15,6 +15,8 @@\n std::string GetWalletHelpString(bool showDebug)\n {\n     std::string strUsage = HelpMessageGroup(_(\"Wallet options:\"));\n+    strUsage += HelpMessageOpt(\"-addressstyle\", _(\"What style addresses to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\", default: \\\"p2sh\\\")\"));\n+    strUsage += HelpMessageOpt(\"-changestyle\", _(\"What style change to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\"), default: same as -addressstyle\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151830086",
      "id" : 151830086,
      "in_reply_to_id" : 150243374,
      "original_commit_id" : "2cd3e3259c5813b4d1a295549e02a2e08ec459d9",
      "original_position" : 5,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 77608524,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151830086",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151837409"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151837409"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Can you add: \"P2WPKH and P2SH-P2WPKH have the same redeem script.\"?\r\n\r\nIt took me a while to realize that.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T13:10:47Z",
      "diff_hunk" : "@@ -13,6 +13,19 @@ bool CKeyStore::AddKey(const CKey &key) {\n     return AddKeyPubKey(key, key.GetPubKey());\n }\n \n+void CBasicKeyStore::AddRelatedKeyScripts(const CPubKey& pubkey)\n+{\n+    AssertLockHeld(cs_KeyStore);\n+    // This adds the redeemscripts necessary to detect P2WPKH and P2SH-P2WPKH",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151837409",
      "id" : 151837409,
      "original_commit_id" : "3c44c27398c8c5e80790f95c747d654cbe716b0c",
      "original_position" : 7,
      "path" : "src/keystore.cpp",
      "position" : 7,
      "pull_request_review_id" : 77615804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151837409",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151838154"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151838154"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe add for redundancy: \"Does not support P2SH and, because multi-sig could result in multiple CKeyID's.\"",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T13:40:27Z",
      "diff_hunk" : "@@ -138,3 +154,24 @@ bool CBasicKeyStore::HaveWatchOnly() const\n     LOCK(cs_KeyStore);\n     return (!setWatchOnly.empty());\n }\n+\n+CKeyID GetKeyForDestination(const CKeyStore& store, const CTxDestination& dest)\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151838154",
      "id" : 151838154,
      "original_commit_id" : "3c44c27398c8c5e80790f95c747d654cbe716b0c",
      "original_position" : 47,
      "path" : "src/keystore.cpp",
      "position" : null,
      "pull_request_review_id" : 77615804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151838154",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151838468"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151838468"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Would it make sense to default `-changetype` to `bech32` if `-addresstype` is not specified? Or should we leave that for QT (since anyone using the RPC probably knows what they're doing)?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T14:03:54Z",
      "diff_hunk" : "@@ -15,6 +15,8 @@\n std::string GetWalletHelpString(bool showDebug)\n {\n     std::string strUsage = HelpMessageGroup(_(\"Wallet options:\"));\n+    strUsage += HelpMessageOpt(\"-addresstype\", _(\"What type of addresses to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\", default: \\\"p2sh\\\")\"));\n+    strUsage += HelpMessageOpt(\"-changetype\", _(\"What type of change outputs to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\"), default: same as -addresstype\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151838468",
      "id" : 151838468,
      "original_commit_id" : "3c44c27398c8c5e80790f95c747d654cbe716b0c",
      "original_position" : 5,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 77615804,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151838468",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151845994"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151845994"
         }
      },
      "author_association" : "OWNER",
      "body" : "That's not technically correct. P2WPKH doesn't have a redeemscript at all. However, our current IsMine logic requires the corresponding P2SH-P2WPKH redeemscript to be present in the wallet in order to accept payment even to P2WPKH outputs.\r\n\r\nFeel free to suggest better language here.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T20:13:01Z",
      "diff_hunk" : "@@ -13,6 +13,19 @@ bool CKeyStore::AddKey(const CKey &key) {\n     return AddKeyPubKey(key, key.GetPubKey());\n }\n \n+void CBasicKeyStore::AddRelatedKeyScripts(const CPubKey& pubkey)\n+{\n+    AssertLockHeld(cs_KeyStore);\n+    // This adds the redeemscripts necessary to detect P2WPKH and P2SH-P2WPKH",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151845994",
      "id" : 151845994,
      "in_reply_to_id" : 151837409,
      "original_commit_id" : "3c44c27398c8c5e80790f95c747d654cbe716b0c",
      "original_position" : 7,
      "path" : "src/keystore.cpp",
      "position" : 7,
      "pull_request_review_id" : 77624503,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151845994",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151846058"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151846058"
         }
      },
      "author_association" : "OWNER",
      "body" : "I think that's not acceptable for privacy reasons until bech32 is common on the network.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T20:13:40Z",
      "diff_hunk" : "@@ -15,6 +15,8 @@\n std::string GetWalletHelpString(bool showDebug)\n {\n     std::string strUsage = HelpMessageGroup(_(\"Wallet options:\"));\n+    strUsage += HelpMessageOpt(\"-addresstype\", _(\"What type of addresses to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\", default: \\\"p2sh\\\")\"));\n+    strUsage += HelpMessageOpt(\"-changetype\", _(\"What type of change outputs to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\"), default: same as -addresstype\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151846058",
      "id" : 151846058,
      "in_reply_to_id" : 151838468,
      "original_commit_id" : "3c44c27398c8c5e80790f95c747d654cbe716b0c",
      "original_position" : 5,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 77624568,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151846058",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "> I assume the goal of this PR isn't to change the GUI, but merely to make sure the QT doesn't break?\r\n\r\nExactly. In particular, we'll want bech32 error detection at some point when entering such addresses, but that's not a priority now.",
      "created_at" : "2017-11-18T20:15:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-345468205",
      "id" : 345468205,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-18T20:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345468205",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151846476"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151846476"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Apologies if this is slightly off-topic, but I can sort of see this comment ending up in an angry reddit post / powerpoint ",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T20:30:49Z",
      "diff_hunk" : "@@ -356,8 +356,10 @@ def run_test(self):\n                 [p2wpkh, p2sh_p2wpkh, p2pk, p2pkh, p2sh_p2pk, p2sh_p2pkh, p2wsh_p2pk, p2wsh_p2pkh, p2sh_p2wsh_p2pk, p2sh_p2wsh_p2pkh] = self.p2pkh_address_to_script(v)\n                 # normal P2PKH and P2PK with compressed keys should always be spendable\n                 spendable_anytime.extend([p2pkh, p2pk])\n-                # P2SH_P2PK, P2SH_P2PKH, and witness with compressed keys are spendable after direct importaddress\n-                spendable_after_importaddress.extend([p2wpkh, p2sh_p2wpkh, p2sh_p2pk, p2sh_p2pkh, p2wsh_p2pk, p2wsh_p2pkh, p2sh_p2wsh_p2pk, p2sh_p2wsh_p2pkh])\n+                # P2SH_P2PK, P2SH_P2PKH with compressed keys are spendable after direct importaddress\n+                spendable_after_importaddress.extend([p2sh_p2pk, p2sh_p2pkh, p2wsh_p2pk, p2wsh_p2pkh, p2sh_p2wsh_p2pk, p2sh_p2wsh_p2pkh])\n+                # P2WPKH and P2SH_P2WPKH are always spendable",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151846476",
      "id" : 151846476,
      "original_commit_id" : "2eda8768388bb32d70fa004b9c307814614c900f",
      "original_position" : 8,
      "path" : "test/functional/segwit.py",
      "position" : null,
      "pull_request_review_id" : 77624980,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151846476",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/425166?v=4",
         "events_url" : "https://api.github.com/users/flack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/flack/followers",
         "following_url" : "https://api.github.com/users/flack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/flack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/flack",
         "id" : 425166,
         "login" : "flack",
         "organizations_url" : "https://api.github.com/users/flack/orgs",
         "received_events_url" : "https://api.github.com/users/flack/received_events",
         "repos_url" : "https://api.github.com/users/flack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/flack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/flack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/flack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151847884"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151847884"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Privacy is a good point. In that case, wouldn't it be better to use whichever address format is used for the recipient (unless the parameter is set)?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T21:13:57Z",
      "diff_hunk" : "@@ -15,6 +15,8 @@\n std::string GetWalletHelpString(bool showDebug)\n {\n     std::string strUsage = HelpMessageGroup(_(\"Wallet options:\"));\n+    strUsage += HelpMessageOpt(\"-addresstype\", _(\"What type of addresses to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\", default: \\\"p2sh\\\")\"));\n+    strUsage += HelpMessageOpt(\"-changetype\", _(\"What type of change outputs to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\"), default: same as -addresstype\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151847884",
      "id" : 151847884,
      "in_reply_to_id" : 151838468,
      "original_commit_id" : "3c44c27398c8c5e80790f95c747d654cbe716b0c",
      "original_position" : 5,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 77626353,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151847884",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151848021"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151848021"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Your comment is probably a good start.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-18T21:14:51Z",
      "diff_hunk" : "@@ -13,6 +13,19 @@ bool CKeyStore::AddKey(const CKey &key) {\n     return AddKeyPubKey(key, key.GetPubKey());\n }\n \n+void CBasicKeyStore::AddRelatedKeyScripts(const CPubKey& pubkey)\n+{\n+    AssertLockHeld(cs_KeyStore);\n+    // This adds the redeemscripts necessary to detect P2WPKH and P2SH-P2WPKH",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151848021",
      "id" : 151848021,
      "in_reply_to_id" : 151837409,
      "original_commit_id" : "3c44c27398c8c5e80790f95c747d654cbe716b0c",
      "original_position" : 7,
      "path" : "src/keystore.cpp",
      "position" : 7,
      "pull_request_review_id" : 77626493,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151848021",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151852032"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151852032"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not related to the change in this PR, but the `\"pubkey\"` should be optional as well because it isn't returned for `Witness*`",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-19T01:21:04Z",
      "diff_hunk" : "@@ -145,6 +152,7 @@ UniValue validateaddress(const JSONRPCRequest& request)\n             \"    ]\\n\"\n             \"  \\\"sigsrequired\\\" : xxxxx        (numeric, optional) Number of signatures required to spend multisig output\\n\"\n             \"  \\\"pubkey\\\" : \\\"publickeyhex\\\",    (string) The hex value of the raw public key\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151852032",
      "id" : 151852032,
      "original_commit_id" : "dd94446cff5bea5ae14e86ff8b9e1e375c2424b5",
      "original_position" : 17,
      "path" : "src/rpc/misc.cpp",
      "position" : 17,
      "pull_request_review_id" : 77630558,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151852032",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151852127"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151852127"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Or \"Only supports destinations which map to single public keys, i.e. P2PKH, P2WPKH, P2SH-P2WPKH.\" for more generality",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-19T01:29:06Z",
      "diff_hunk" : "@@ -138,3 +154,24 @@ bool CBasicKeyStore::HaveWatchOnly() const\n     LOCK(cs_KeyStore);\n     return (!setWatchOnly.empty());\n }\n+\n+CKeyID GetKeyForDestination(const CKeyStore& store, const CTxDestination& dest)\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151852127",
      "id" : 151852127,
      "in_reply_to_id" : 151838154,
      "original_commit_id" : "3c44c27398c8c5e80790f95c747d654cbe716b0c",
      "original_position" : 47,
      "path" : "src/keystore.cpp",
      "position" : null,
      "pull_request_review_id" : 77630558,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151852127",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151852351"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151852351"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Note compressed keys explicitly because all other comments do? Otherwise it could sound like it includes uncompressed keys. Or merge with the p2pkh and p2pk line above in the same way you did below?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-19T01:47:34Z",
      "diff_hunk" : "@@ -356,8 +356,10 @@ def run_test(self):\n                 [p2wpkh, p2sh_p2wpkh, p2pk, p2pkh, p2sh_p2pk, p2sh_p2pkh, p2wsh_p2pk, p2wsh_p2pkh, p2sh_p2wsh_p2pk, p2sh_p2wsh_p2pkh] = self.p2pkh_address_to_script(v)\n                 # normal P2PKH and P2PK with compressed keys should always be spendable\n                 spendable_anytime.extend([p2pkh, p2pk])\n-                # P2SH_P2PK, P2SH_P2PKH, and witness with compressed keys are spendable after direct importaddress\n-                spendable_after_importaddress.extend([p2wpkh, p2sh_p2wpkh, p2sh_p2pk, p2sh_p2pkh, p2wsh_p2pk, p2wsh_p2pkh, p2sh_p2wsh_p2pk, p2sh_p2wsh_p2pkh])\n+                # P2SH_P2PK, P2SH_P2PKH with compressed keys are spendable after direct importaddress\n+                spendable_after_importaddress.extend([p2sh_p2pk, p2sh_p2pkh, p2wsh_p2pk, p2wsh_p2pkh, p2sh_p2wsh_p2pk, p2sh_p2wsh_p2pkh])\n+                # P2WPKH and P2SH_P2WPKH are always spendable",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151852351",
      "id" : 151852351,
      "original_commit_id" : "2eda8768388bb32d70fa004b9c307814614c900f",
      "original_position" : 8,
      "path" : "test/functional/segwit.py",
      "position" : null,
      "pull_request_review_id" : 77630558,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151852351",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151852442"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151852442"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This part of the test doesn't use `spendable_anytime`, only `spendable_after_addwitnessaddress`, so this change (and one below) could just be deleted completely I believe (unless there is a benefit for readability)",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-19T01:55:25Z",
      "diff_hunk" : "@@ -514,9 +516,8 @@ def run_test(self):\n                 premature_witaddress.append(script_to_p2sh(p2wsh))\n             else:\n                 [p2wpkh, p2sh_p2wpkh, p2pk, p2pkh, p2sh_p2pk, p2sh_p2pkh, p2wsh_p2pk, p2wsh_p2pkh, p2sh_p2wsh_p2pk, p2sh_p2wsh_p2pkh] = self.p2pkh_address_to_script(v)\n-                # P2WPKH, P2SH_P2WPKH are spendable after addwitnessaddress\n-                spendable_after_addwitnessaddress.extend([p2wpkh, p2sh_p2wpkh])\n-                premature_witaddress.append(script_to_p2sh(p2wpkh))\n+                # P2WPKH, P2SH_P2WPKH are always spendable\n+                spendable_anytime.extend([p2wpkh, p2sh_p2wpkh])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151852442",
      "id" : 151852442,
      "original_commit_id" : "2eda8768388bb32d70fa004b9c307814614c900f",
      "original_position" : 36,
      "path" : "test/functional/segwit.py",
      "position" : 88,
      "pull_request_review_id" : 77630558,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151852442",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151876395"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151876395"
         }
      },
      "author_association" : "OWNER",
      "body" : "It is returned for P2WPKH and P2SH-P2WPKH, but not for anything that doesn't have a unique pubkey.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-19T20:18:06Z",
      "diff_hunk" : "@@ -145,6 +152,7 @@ UniValue validateaddress(const JSONRPCRequest& request)\n             \"    ]\\n\"\n             \"  \\\"sigsrequired\\\" : xxxxx        (numeric, optional) Number of signatures required to spend multisig output\\n\"\n             \"  \\\"pubkey\\\" : \\\"publickeyhex\\\",    (string) The hex value of the raw public key\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151876395",
      "id" : 151876395,
      "in_reply_to_id" : 151852032,
      "original_commit_id" : "dd94446cff5bea5ae14e86ff8b9e1e375c2424b5",
      "original_position" : 17,
      "path" : "src/rpc/misc.cpp",
      "position" : 17,
      "pull_request_review_id" : 77653775,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151876395",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151877915"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151877915"
         }
      },
      "author_association" : "OWNER",
      "body" : "Then quote the code around it, which uses the language w.r.t. P2PKH and others. It's obviously about outputs we have the private keys for.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-19T21:02:07Z",
      "diff_hunk" : "@@ -356,8 +356,10 @@ def run_test(self):\n                 [p2wpkh, p2sh_p2wpkh, p2pk, p2pkh, p2sh_p2pk, p2sh_p2pkh, p2wsh_p2pk, p2wsh_p2pkh, p2sh_p2wsh_p2pk, p2sh_p2wsh_p2pkh] = self.p2pkh_address_to_script(v)\n                 # normal P2PKH and P2PK with compressed keys should always be spendable\n                 spendable_anytime.extend([p2pkh, p2pk])\n-                # P2SH_P2PK, P2SH_P2PKH, and witness with compressed keys are spendable after direct importaddress\n-                spendable_after_importaddress.extend([p2wpkh, p2sh_p2wpkh, p2sh_p2pk, p2sh_p2pkh, p2wsh_p2pk, p2wsh_p2pkh, p2sh_p2wsh_p2pk, p2sh_p2wsh_p2pkh])\n+                # P2SH_P2PK, P2SH_P2PKH with compressed keys are spendable after direct importaddress\n+                spendable_after_importaddress.extend([p2sh_p2pk, p2sh_p2pkh, p2wsh_p2pk, p2wsh_p2pkh, p2sh_p2wsh_p2pk, p2sh_p2wsh_p2pkh])\n+                # P2WPKH and P2SH_P2WPKH are always spendable",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151877915",
      "id" : 151877915,
      "in_reply_to_id" : 151846476,
      "original_commit_id" : "2eda8768388bb32d70fa004b9c307814614c900f",
      "original_position" : 8,
      "path" : "test/functional/segwit.py",
      "position" : null,
      "pull_request_review_id" : 77655139,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151877915",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151878171"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151878171"
         }
      },
      "author_association" : "OWNER",
      "body" : "Fixed.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-19T21:08:44Z",
      "diff_hunk" : "@@ -138,3 +154,24 @@ bool CBasicKeyStore::HaveWatchOnly() const\n     LOCK(cs_KeyStore);\n     return (!setWatchOnly.empty());\n }\n+\n+CKeyID GetKeyForDestination(const CKeyStore& store, const CTxDestination& dest)\n+{\n+    // Only supports P2PKH, P2WPKH, P2SH-P2WPKH.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151878171",
      "id" : 151878171,
      "in_reply_to_id" : 151838154,
      "original_commit_id" : "3c44c27398c8c5e80790f95c747d654cbe716b0c",
      "original_position" : 47,
      "path" : "src/keystore.cpp",
      "position" : null,
      "pull_request_review_id" : 77655367,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151878171",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151878173"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151878173"
         }
      },
      "author_association" : "OWNER",
      "body" : "Done.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-19T21:08:48Z",
      "diff_hunk" : "@@ -13,6 +13,19 @@ bool CKeyStore::AddKey(const CKey &key) {\n     return AddKeyPubKey(key, key.GetPubKey());\n }\n \n+void CBasicKeyStore::AddRelatedKeyScripts(const CPubKey& pubkey)\n+{\n+    AssertLockHeld(cs_KeyStore);\n+    // This adds the redeemscripts necessary to detect P2WPKH and P2SH-P2WPKH",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151878173",
      "id" : 151878173,
      "in_reply_to_id" : 151837409,
      "original_commit_id" : "3c44c27398c8c5e80790f95c747d654cbe716b0c",
      "original_position" : 7,
      "path" : "src/keystore.cpp",
      "position" : 7,
      "pull_request_review_id" : 77655369,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151878173",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151878183"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151878183"
         }
      },
      "author_association" : "OWNER",
      "body" : "Done.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-19T21:09:05Z",
      "diff_hunk" : "@@ -356,8 +356,10 @@ def run_test(self):\n                 [p2wpkh, p2sh_p2wpkh, p2pk, p2pkh, p2sh_p2pk, p2sh_p2pkh, p2wsh_p2pk, p2wsh_p2pkh, p2sh_p2wsh_p2pk, p2sh_p2wsh_p2pkh] = self.p2pkh_address_to_script(v)\n                 # normal P2PKH and P2PK with compressed keys should always be spendable\n                 spendable_anytime.extend([p2pkh, p2pk])\n-                # P2SH_P2PK, P2SH_P2PKH, and witness with compressed keys are spendable after direct importaddress\n-                spendable_after_importaddress.extend([p2wpkh, p2sh_p2wpkh, p2sh_p2pk, p2sh_p2pkh, p2wsh_p2pk, p2wsh_p2pkh, p2sh_p2wsh_p2pk, p2sh_p2wsh_p2pkh])\n+                # P2SH_P2PK, P2SH_P2PKH with compressed keys are spendable after direct importaddress\n+                spendable_after_importaddress.extend([p2sh_p2pk, p2sh_p2pkh, p2wsh_p2pk, p2wsh_p2pkh, p2sh_p2wsh_p2pk, p2sh_p2wsh_p2pkh])\n+                # P2WPKH and P2SH_P2WPKH are always spendable",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151878183",
      "id" : 151878183,
      "in_reply_to_id" : 151852351,
      "original_commit_id" : "2eda8768388bb32d70fa004b9c307814614c900f",
      "original_position" : 8,
      "path" : "test/functional/segwit.py",
      "position" : null,
      "pull_request_review_id" : 77655378,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151878183",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151878233"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151878233"
         }
      },
      "author_association" : "OWNER",
      "body" : "Better: I've added code for testing spendable_anytime and solvable_anytime in these cases.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-19T21:10:33Z",
      "diff_hunk" : "@@ -514,9 +516,8 @@ def run_test(self):\n                 premature_witaddress.append(script_to_p2sh(p2wsh))\n             else:\n                 [p2wpkh, p2sh_p2wpkh, p2pk, p2pkh, p2sh_p2pk, p2sh_p2pkh, p2wsh_p2pk, p2wsh_p2pkh, p2sh_p2wsh_p2pk, p2sh_p2wsh_p2pkh] = self.p2pkh_address_to_script(v)\n-                # P2WPKH, P2SH_P2WPKH are spendable after addwitnessaddress\n-                spendable_after_addwitnessaddress.extend([p2wpkh, p2sh_p2wpkh])\n-                premature_witaddress.append(script_to_p2sh(p2wpkh))\n+                # P2WPKH, P2SH_P2WPKH are always spendable\n+                spendable_anytime.extend([p2wpkh, p2sh_p2wpkh])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r151878233",
      "id" : 151878233,
      "in_reply_to_id" : 151852442,
      "original_commit_id" : "2eda8768388bb32d70fa004b9c307814614c900f",
      "original_position" : 36,
      "path" : "test/functional/segwit.py",
      "position" : 88,
      "pull_request_review_id" : 77655424,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151878233",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Addressed some comments, and added solution 3a from my writeup.",
      "created_at" : "2017-11-19T21:16:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-345550244",
      "id" : 345550244,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-19T21:16:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345550244",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@MeshCollider The commits are in the right order, it's just GitHub that shows them by author date rather than dependency ordering.",
      "created_at" : "2017-11-19T21:17:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-345550330",
      "id" : 345550330,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-19T21:17:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345550330",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152033827"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152033827"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Remove `.get_str()`?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-20T16:05:12Z",
      "diff_hunk" : "@@ -67,6 +67,13 @@ class DescribeAddressVisitor : public boost::static_visitor<UniValue>\n             obj.push_back(Pair(\"script\", GetTxnOutputType(whichType)));\n             obj.push_back(Pair(\"hex\", HexStr(subscript.begin(), subscript.end())));\n             UniValue a(UniValue::VARR);\n+            if (whichType == TX_WITNESS_V0_KEYHASH || whichType == TX_WITNESS_V0_SCRIPTHASH) {\n+                UniValue subobj = boost::apply_visitor(*this, addresses[0]);\n+                if (subobj.exists(\"pubkey\")) {\n+                    obj.push_back(Pair(\"pubkey\", subobj[\"pubkey\"].get_str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152033827",
      "id" : 152033827,
      "original_commit_id" : "d0c76c351aad0454bea1cf2e4da7a8910f30c714",
      "original_position" : 7,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 77833289,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152033827",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152033877"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152033877"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Missing test.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-20T16:05:22Z",
      "diff_hunk" : "@@ -67,6 +67,13 @@ class DescribeAddressVisitor : public boost::static_visitor<UniValue>\n             obj.push_back(Pair(\"script\", GetTxnOutputType(whichType)));\n             obj.push_back(Pair(\"hex\", HexStr(subscript.begin(), subscript.end())));\n             UniValue a(UniValue::VARR);\n+            if (whichType == TX_WITNESS_V0_KEYHASH || whichType == TX_WITNESS_V0_SCRIPTHASH) {\n+                UniValue subobj = boost::apply_visitor(*this, addresses[0]);\n+                if (subobj.exists(\"pubkey\")) {\n+                    obj.push_back(Pair(\"pubkey\", subobj[\"pubkey\"].get_str()));\n+                }\n+                obj.push_back(Pair(\"embedded\", std::move(subobj)));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152033877",
      "id" : 152033877,
      "original_commit_id" : "d0c76c351aad0454bea1cf2e4da7a8910f30c714",
      "original_position" : 9,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 77833289,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152033877",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152034843"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152034843"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Below you use `auto key = ...`. Keep it consistent?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-20T16:08:34Z",
      "diff_hunk" : "@@ -188,8 +196,11 @@ UniValue validateaddress(const JSONRPCRequest& request)\n         }\n         if (pwallet) {\n             const auto& meta = pwallet->mapKeyMetadata;\n-            const CKeyID *keyID = boost::get<CKeyID>(&dest);\n-            auto it = keyID ? meta.find(*keyID) : meta.end();\n+            CKeyID key = GetKeyForDestination(*pwallet, dest);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152034843",
      "id" : 152034843,
      "original_commit_id" : "d0c76c351aad0454bea1cf2e4da7a8910f30c714",
      "original_position" : 28,
      "path" : "src/rpc/misc.cpp",
      "position" : 28,
      "pull_request_review_id" : 77833289,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152034843",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152035884"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152035884"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Remove else?\r\n```cpp\r\n\r\ng_address_type = ParseOutputType(gArgs.GetArg(\"-addresstype\", \"default\"));\r\nif (g_address_type == OUTPUT_TYPE_NONE) {\r\n    return InitError(strprintf(_(\"Unknown address type '%s'\"), gArgs.GetArg(\"-addresstype\")));\r\n}\r\n```",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-20T16:11:43Z",
      "diff_hunk" : "@@ -173,6 +175,22 @@ bool WalletParameterInteraction()\n     bSpendZeroConfChange = gArgs.GetBoolArg(\"-spendzeroconfchange\", DEFAULT_SPEND_ZEROCONF_CHANGE);\n     fWalletRbf = gArgs.GetBoolArg(\"-walletrbf\", DEFAULT_WALLET_RBF);\n \n+    std::string output_type = gArgs.GetArg(\"-addresstype\", \"default\");\n+    OutputType parsed_output_type = ParseOutputType(output_type);\n+    if (parsed_output_type == OUTPUT_TYPE_NONE) {\n+        return InitError(strprintf(_(\"Unknown address type '%s'\"), output_type));\n+    } else {\n+        g_address_type = parsed_output_type;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152035884",
      "id" : 152035884,
      "original_commit_id" : "d0c76c351aad0454bea1cf2e4da7a8910f30c714",
      "original_position" : 18,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 77833289,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152035884",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152036236"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152036236"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Same as above.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-20T16:12:52Z",
      "diff_hunk" : "@@ -173,6 +175,22 @@ bool WalletParameterInteraction()\n     bSpendZeroConfChange = gArgs.GetBoolArg(\"-spendzeroconfchange\", DEFAULT_SPEND_ZEROCONF_CHANGE);\n     fWalletRbf = gArgs.GetBoolArg(\"-walletrbf\", DEFAULT_WALLET_RBF);\n \n+    std::string output_type = gArgs.GetArg(\"-addresstype\", \"default\");\n+    OutputType parsed_output_type = ParseOutputType(output_type);\n+    if (parsed_output_type == OUTPUT_TYPE_NONE) {\n+        return InitError(strprintf(_(\"Unknown address type '%s'\"), output_type));\n+    } else {\n+        g_address_type = parsed_output_type;\n+    }\n+\n+    output_type = gArgs.GetArg(\"-changetype\", output_type);\n+    parsed_output_type = ParseOutputType(output_type);\n+    if (parsed_output_type == OUTPUT_TYPE_NONE) {\n+        return InitError(strprintf(_(\"Unknown change type '%s'\"), output_type));\n+    } else {\n+        g_change_type = parsed_output_type;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152036236",
      "id" : 152036236,
      "original_commit_id" : "d0c76c351aad0454bea1cf2e4da7a8910f30c714",
      "original_position" : 26,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 77833289,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152036236",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152036916"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152036916"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Mirror argument name:\r\n```cpp\r\nOutputType address_type = g_address_type;\r\n```",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-20T16:15:02Z",
      "diff_hunk" : "@@ -157,6 +158,14 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n     if (!request.params[0].isNull())\n         strAccount = AccountFromValue(request.params[0]);\n \n+    OutputType output_type = g_address_type;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152036916",
      "id" : 152036916,
      "original_commit_id" : "d0c76c351aad0454bea1cf2e4da7a8910f30c714",
      "original_position" : 22,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 22,
      "pull_request_review_id" : 77833289,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152036916",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152037615"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152037615"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Mirror argument name:\r\n```cpp\r\nOutputType address_type = g_change_type;\r\n```",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-20T16:17:07Z",
      "diff_hunk" : "@@ -243,16 +254,24 @@ UniValue getrawchangeaddress(const JSONRPCRequest& request)\n         pwallet->TopUpKeyPool();\n     }\n \n+    OutputType output_type = g_change_type;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152037615",
      "id" : 152037615,
      "original_commit_id" : "d0c76c351aad0454bea1cf2e4da7a8910f30c714",
      "original_position" : 77,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 77,
      "pull_request_review_id" : 77833289,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152037615",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152328510"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152328510"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`default: ` should be inside `()`.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-21T16:27:16Z",
      "diff_hunk" : "@@ -15,6 +15,8 @@\n std::string GetWalletHelpString(bool showDebug)\n {\n     std::string strUsage = HelpMessageGroup(_(\"Wallet options:\"));\n+    strUsage += HelpMessageOpt(\"-addresstype\", _(\"What type of addresses to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\", default: \\\"p2sh\\\")\"));\n+    strUsage += HelpMessageOpt(\"-changetype\", _(\"What type of change outputs to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\"), default: same as -addresstype\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r152328510",
      "id" : 152328510,
      "in_reply_to_id" : 151838468,
      "original_commit_id" : "3c44c27398c8c5e80790f95c747d654cbe716b0c",
      "original_position" : 5,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 78173753,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152328510",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested ACK d0c76c3.",
      "created_at" : "2017-11-23T15:30:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-346646997",
      "id" : 346646997,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-23T15:30:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/346646997",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r153278680"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153278680"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I believe this allows the user to put in \"default\", which then resolves to \"P2SH\" no matter what the actual default g_change_type is set to .",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-27T18:14:58Z",
      "diff_hunk" : "@@ -243,16 +254,24 @@ UniValue getrawchangeaddress(const JSONRPCRequest& request)\n         pwallet->TopUpKeyPool();\n     }\n \n+    OutputType output_type = g_change_type;\n+    if (!request.params[0].isNull()) {\n+        output_type = ParseOutputType(request.params[0].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r153278680",
      "id" : 153278680,
      "original_commit_id" : "d0c76c351aad0454bea1cf2e4da7a8910f30c714",
      "original_position" : 79,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 79261530,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153278680",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r153278747"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153278747"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I believe this allows the user to put in \"default\", which then resolves to \"P2SH\" no matter what the actual default `g_address_type` is set to .",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-27T18:15:11Z",
      "diff_hunk" : "@@ -157,6 +158,14 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n     if (!request.params[0].isNull())\n         strAccount = AccountFromValue(request.params[0]);\n \n+    OutputType output_type = g_address_type;\n+    if (!request.params[1].isNull()) {\n+        output_type = ParseOutputType(request.params[1].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r153278747",
      "id" : 153278747,
      "original_commit_id" : "d0c76c351aad0454bea1cf2e4da7a8910f30c714",
      "original_position" : 24,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 79261530,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153278747",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r153376955"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153376955"
         }
      },
      "author_association" : "MEMBER",
      "body" : "There's no indication as to what \"-addresstype\" currently is. How about something like:\r\n```c++\r\n\"... Default (*g_address_type string*) is set by -addresstype.\\n\"\r\n```",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-11-28T01:59:11Z",
      "diff_hunk" : "@@ -135,14 +135,15 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 1)\n+    if (request.fHelp || request.params.size() > 2)\n         throw std::runtime_error(\n-            \"getnewaddress ( \\\"account\\\" )\\n\"\n+            \"getnewaddress ( \\\"account\\\" \\\"address_type\\\" )\\n\"\n             \"\\nReturns a new Bitcoin address for receiving payments.\\n\"\n             \"If 'account' is specified (DEPRECATED), it is added to the address book \\n\"\n             \"so payments received with the address will be credited to 'account'.\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"account\\\"        (string, optional) DEPRECATED. The account name for the address to be linked to. If not provided, the default account \\\"\\\" is used. It can also be set to the empty string \\\"\\\" to represent the default account. The account does not need to exist, it will be created if there is no account by the given name.\\n\"\n+            \"2. \\\"address_type\\\"   (string, optional) The address type to use. Options are \\\"legacy\\\", \\\"p2sh\\\", and \\\"bech32\\\". Default is set by -addresstype.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r153376955",
      "id" : 153376955,
      "original_commit_id" : "d0c76c351aad0454bea1cf2e4da7a8910f30c714",
      "original_position" : 14,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 14,
      "pull_request_review_id" : 79372207,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153376955",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK after the current comments are addressed. Nice work :)",
      "created_at" : "2017-11-28T02:35:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-347394871",
      "id" : 347394871,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-11-28T02:35:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347394871",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Addressed comments, and made some significant changes to the command line argument handling.\r\n\r\nI also added a commit that explicitly adds the P2SH-P2WPKH script for keypool keys that are seen used on the network. This means that downgrading after restoring a backup that needed recovery is supported.\r\n\r\nI would very much like to hear opinions about testing this. It's nontrivial as the complicated scenarios always involve downgrading/upgrading between versions - something our testing framework can't really deal with.",
      "created_at" : "2017-12-01T00:41:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-348367131",
      "id" : 348367131,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-12-01T00:41:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/348367131",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r154244232"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154244232"
         }
      },
      "author_association" : "OWNER",
      "body" : "Fixed.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-12-01T00:53:14Z",
      "diff_hunk" : "@@ -135,14 +135,15 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 1)\n+    if (request.fHelp || request.params.size() > 2)\n         throw std::runtime_error(\n-            \"getnewaddress ( \\\"account\\\" )\\n\"\n+            \"getnewaddress ( \\\"account\\\" \\\"address_type\\\" )\\n\"\n             \"\\nReturns a new Bitcoin address for receiving payments.\\n\"\n             \"If 'account' is specified (DEPRECATED), it is added to the address book \\n\"\n             \"so payments received with the address will be credited to 'account'.\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"account\\\"        (string, optional) DEPRECATED. The account name for the address to be linked to. If not provided, the default account \\\"\\\" is used. It can also be set to the empty string \\\"\\\" to represent the default account. The account does not need to exist, it will be created if there is no account by the given name.\\n\"\n+            \"2. \\\"address_type\\\"   (string, optional) The address type to use. Options are \\\"legacy\\\", \\\"p2sh\\\", and \\\"bech32\\\". Default is set by -addresstype.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r154244232",
      "id" : 154244232,
      "in_reply_to_id" : 153376955,
      "original_commit_id" : "d0c76c351aad0454bea1cf2e4da7a8910f30c714",
      "original_position" : 14,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 14,
      "pull_request_review_id" : 80379249,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154244232",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r154244448"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154244448"
         }
      },
      "author_association" : "OWNER",
      "body" : "Choosing to use `auto` is a balance between clarity (by being explicit) and brevity/flexibility. I don't think using it here would be an improvement, but I added it on the line below (the iterator type was pretty long...).",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-12-01T00:54:43Z",
      "diff_hunk" : "@@ -188,8 +196,11 @@ UniValue validateaddress(const JSONRPCRequest& request)\n         }\n         if (pwallet) {\n             const auto& meta = pwallet->mapKeyMetadata;\n-            const CKeyID *keyID = boost::get<CKeyID>(&dest);\n-            auto it = keyID ? meta.find(*keyID) : meta.end();\n+            CKeyID key = GetKeyForDestination(*pwallet, dest);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r154244448",
      "id" : 154244448,
      "in_reply_to_id" : 152034843,
      "original_commit_id" : "d0c76c351aad0454bea1cf2e4da7a8910f30c714",
      "original_position" : 28,
      "path" : "src/rpc/misc.cpp",
      "position" : 28,
      "pull_request_review_id" : 80379490,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154244448",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r154244562"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154244562"
         }
      },
      "author_association" : "OWNER",
      "body" : "I'm using 'output type' as the internal name, 'address type' is just used for the global/cmdline.\r\n\r\nPart of the reason for that is that I feel using the term 'address' for change is wrong. Addresses are things intended to be the destination of payments. Change outputs are only created and used internally.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-12-01T00:55:42Z",
      "diff_hunk" : "@@ -243,16 +254,24 @@ UniValue getrawchangeaddress(const JSONRPCRequest& request)\n         pwallet->TopUpKeyPool();\n     }\n \n+    OutputType output_type = g_change_type;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r154244562",
      "id" : 154244562,
      "in_reply_to_id" : 152037615,
      "original_commit_id" : "d0c76c351aad0454bea1cf2e4da7a8910f30c714",
      "original_position" : 77,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 77,
      "pull_request_review_id" : 80379615,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154244562",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r154329194"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154329194"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`-addresstype`, not `-addressstyle`",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-12-01T11:54:43Z",
      "diff_hunk" : "@@ -15,6 +15,8 @@\n std::string GetWalletHelpString(bool showDebug)\n {\n     std::string strUsage = HelpMessageGroup(_(\"Wallet options:\"));\n+    strUsage += HelpMessageOpt(\"-addresstype\", strprintf(_(\"What type of addresses to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\", default: \\\"%s\\\")\"), FormatOutputType(OUTPUT_TYPE_DEFAULT)));\n+    strUsage += HelpMessageOpt(\"-changetype\", strprintf(_(\"What type of change to use (\\\"legacy\\\", \\\"p2sh\\\", \\\"bech32\\\", default is same as -addressstyle: \\\"%s\\\")\"), FormatOutputType(g_address_type)));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r154329194",
      "id" : 154329194,
      "original_commit_id" : "b088ab65407346408ed45fdad637e54c591eb348",
      "original_position" : 5,
      "path" : "src/wallet/init.cpp",
      "position" : 5,
      "pull_request_review_id" : 80476697,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T06:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154329194",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I suggest updating the description of this pull request with a list of all known scenario's that need to be tested. Under each item, note if there any automated tests that cover it.\r\n\r\nIs it a safe assumption that testing on testnet is sufficient? Can anyone think of mainnet specific potential bug related to a change like this?\r\n\r\nCan we also assume no support for pre-release wallets after v0.15.1?\r\n\r\nTo save some permutations, are we worried `changetype` set to something to other than `addresstype`?\r\n\r\nHere's a start.\r\n\r\n## QT\r\nFull UI support is for another PR. Scope is to ensure nothing breaks.\r\n\r\n### New wallet, default settings\r\n\r\n* create payment request, address should start with 2 ([UI test](master/src/qt/test/wallettests.cpp#L207) only checks that button works, not the address type - but see RPC)\r\n* fund from external source\r\n  * tx should appear under Recent transactions\r\n  * popup notification should appear\r\n* send to self\r\n  * pending balance should be 0 (with or without RBF)\r\n  * total balance should be reduced only by the fee of this transaction\r\n* send to external P2SH address\r\n* send to external bech32 address\r\n\r\n### New wallet `-addresstype=bech32`\r\n(there's no bech32 compatible faucet, so just copy-paste a bech32 receive address and relaunch with the normal address type to fund it)\r\n* ...\r\n\r\n### Existing HD wallet\r\n* ...\r\n\r\n### Existing non-HD wallet\r\n* ...\r\n\r\n### Existing wallet that used `getwitnessaddress`\r\n\r\n## RPC\r\n### New wallet, default settings\r\n* create new address, should start with 2 ([link to RPC test])\r\n\r\n### New wallet `-addresstype=bech32`\r\n* ...\r\n\r\n### Existing HD wallet\r\n* ...\r\n\r\n### Existing non-HD wallet\r\n* ...\r\n\r\n## Issues I'm seeing:\r\n\r\n- [ ] (Pending) balance is zero\r\n<img width=\"1020\" alt=\"testnet 0 balance\" src=\"https://user-images.githubusercontent.com/10217/33481408-a01d546c-d694-11e7-97e6-cdc28757ca9a.png\">\r\nNot sure if this is intended / existing behavior. I received coins on a P2SH address, then spent some of it to another P2SH address in the wallet. That transaction is not confirmed yet. I would expect this balance to be pending.\r\n\r\nI then sent more funds from an external source:\r\n<img width=\"1006\" alt=\"testnet balance\" src=\"https://user-images.githubusercontent.com/10217/33482147-f4321760-d697-11e7-9967-1090e6009e9e.png\">\r\nThe new funds show up under pending. Suddenly the total balance is correct again.\r\n\r\nWith bech32 I'm seeing something slightly different:\r\n<img width=\"506\" alt=\"bech32\" src=\"https://user-images.githubusercontent.com/10217/33487995-7e4c193e-d6af-11e7-8900-6009c1124819.png\">\r\n- [ ] This time the total balance is correct, but the pending balance should be 0.1 BTC, since that transaction to myself is still unconfirmed (I didn't use RBF).\r\n\r\n- [x] ~\"unknown new rules activated (version bit 1)\"~ (happens on master as well, so unrelated)\r\n\r\n- [ ] I didn't see a popup when transaction arrived (~maybe I missed it~ I can reproduce this)",
      "created_at" : "2017-12-01T12:27:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-348482391",
      "id" : 348482391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-12-06T15:33:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/348482391",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@Sjors Thanks for the UI testing! I can't really explain what you're seeing, but note that sends-to-self always behave somewhat as an edge-case (as they're both from-self and to-self). Have a look at the `address_type.py` test I added, which acts entirely as expected, with 16 combinations of sends/receives between address/change types.",
      "created_at" : "2017-12-06T06:04:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-349544345",
      "id" : 349544345,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-12-06T06:04:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349544345",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r155266683"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155266683"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Doesn't the test framework already give you plenty of mature coins out of the box? cc @jnewbery ",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-12-06T15:22:17Z",
      "diff_hunk" : "@@ -0,0 +1,41 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that the wallet can send and receive using all combinations of address types.\"\"\"\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+\n+class AddressTypeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 4\n+        self.setup_clean_chain = True\n+        self.extra_args = [[\"-addresstype=legacy\"], [\"-addresstype=p2sh\"], [\"-addresstype=bech32\"], [\"-addresstype=p2sh\", \"-changetype=bech32\"]]\n+\n+    def run_test(self):\n+        self.nodes[0].generate(120)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r155266683",
      "id" : 155266683,
      "original_commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "original_position" : 16,
      "path" : "test/functional/address_types.py",
      "position" : 16,
      "pull_request_review_id" : 81556928,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T15:22:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155266683",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r155269450"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155269450"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should `getunconfirmedbalance` be the same as what QT displays as balance under \"Pending\"? If so, what could explain that the UI shows different numbers despite these tests passing? ",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-12-06T15:31:14Z",
      "diff_hunk" : "@@ -0,0 +1,41 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that the wallet can send and receive using all combinations of address types.\"\"\"\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+\n+class AddressTypeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 4\n+        self.setup_clean_chain = True\n+        self.extra_args = [[\"-addresstype=legacy\"], [\"-addresstype=p2sh\"], [\"-addresstype=bech32\"], [\"-addresstype=p2sh\", \"-changetype=bech32\"]]\n+\n+    def run_test(self):\n+        self.nodes[0].generate(120)\n+        self.sync_all()\n+\n+        for c in range(4):\n+            for n in range(4):\n+                old_balances = [self.nodes[i].getbalance() for i in range(4)]\n+                to_send = (old_balances[n] / 11).quantize(Decimal(\"0.00000001\"))\n+                sends = {}\n+                for k in range(4):\n+                    address = self.nodes[(n + k) % 4].getnewaddress()\n+                    # In each iteration, one node sends 1/11th of its balance to itself, 2/11ths to the next peer,\n+                    # 3/11ths to the one after that, and 4/11ths to the remaining one.\n+                    sends[address] = to_send * (1 + k)\n+                self.nodes[n].sendmany(\"\", sends)\n+                self.sync_all()\n+                unconf_balances = [self.nodes[i].getunconfirmedbalance() for i in range(4)]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r155269450",
      "id" : 155269450,
      "original_commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "original_position" : 31,
      "path" : "test/functional/address_types.py",
      "position" : 31,
      "pull_request_review_id" : 81560255,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T15:31:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155269450",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors \"That transaction is not confirmed yet. I would expect this balance to be pending.\"\r\n\r\nSelf-sent coins(including change) are considered `IsTrusted`, which will account for these as \"Available\" and immediately spendable.\r\n\r\nNot sure why it wasn't showing as Available however. Testing here shows it there.\r\n\r\nWhat type of p2sh address was it? nested-p2wpkh?",
      "created_at" : "2017-12-06T15:45:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-349679353",
      "id" : 349679353,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-12-06T15:45:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349679353",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm getting non-determinstic balance behavior. I have done a couple self-sends of the largest coin, seemed fine.\r\n\r\nIf I stop and restart, sometimes it shows in confirmed balance(-cli) or \"Available\"(qt), sometimes it doesn't. Repeating this process results in it either existing or not.\r\n\r\nI checked my debug.log, the transactions in the mempool are being accepted in either case.\r\n\r\nGenerating a block results in it being permanently accounted for. I'll dig in some more.",
      "created_at" : "2017-12-06T15:53:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-349681967",
      "id" : 349681967,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-12-06T15:53:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349681967",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@instagibbs the p2sh generated if you launch without any arguments, so P2SH-P2WPKH. Where are `IsTrusted` and \"Available\" determined? At the wallet level, or is QT doing (some of) that?",
      "created_at" : "2017-12-06T15:54:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-349682089",
      "id" : 349682089,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-12-06T15:54:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349682089",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "looks like we were chasing our tails, unrelated to this PR https://github.com/bitcoin/bitcoin/pull/11839",
      "created_at" : "2017-12-06T17:06:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#issuecomment-349707242",
      "id" : 349707242,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11403",
      "updated_at" : "2017-12-06T17:06:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349707242",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r155327731"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155327731"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r144199735\r\n\r\n> This shouldn't just be tacked on the end. Accounts are deprecated. Just replace \"account\" with an options Object.\r\n\r\nIn this particular context, account will just be renamed to label, rather than removed entirely. (At least this is what #11536 does.)",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-12-06T18:55:33Z",
      "diff_hunk" : "@@ -135,14 +135,15 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() > 1)\n+    if (request.fHelp || request.params.size() > 2)\n         throw std::runtime_error(\n-            \"getnewaddress ( \\\"account\\\" )\\n\"\n+            \"getnewaddress ( \\\"account\\\" ) ( \\\"style\\\" )\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r155327731",
      "id" : 155327731,
      "in_reply_to_id" : 144199735,
      "original_commit_id" : "5632374f2f71bca384ceed07ca6842fd87102346",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 81629569,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T18:55:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155327731",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r155335251"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155335251"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> I'm not sure about the sequencing rules here. I'd feel safer with a temporary CScriptID.\r\n\r\nFor the record, there should be no issue here. std::move just does an rvalue reference cast to influence template deduction and function overloading. It doesn't actually actually move anything or do anything else at runtime.",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-12-06T19:23:24Z",
      "diff_hunk" : "@@ -13,6 +13,18 @@ bool CKeyStore::AddKey(const CKey &key) {\n     return AddKeyPubKey(key, key.GetPubKey());\n }\n \n+void CBasicKeyStore::AddRelatedKeyScripts(const CPubKey& pubkey)\n+{\n+    AssertLockHeld(cs_KeyStore);\n+    // This adds the redeemscripts necessary to detect P2WPKH and P2SH-P2WPKH\n+    // outputs.\n+    if (pubkey.IsCompressed()) {\n+        CScript script = CScript() << OP_0 << ToByteVector(pubkey.GetID());\n+        // This does not use AddCScript, as it may be overridden.\n+        mapScripts[CScriptID(script)] = std::move(script);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r155335251",
      "id" : 155335251,
      "in_reply_to_id" : 145261446,
      "original_commit_id" : "b7209bdc9007b0f6c22403ab042dd474eb8ef2c5",
      "original_position" : 12,
      "path" : "src/keystore.cpp",
      "position" : null,
      "pull_request_review_id" : 81638284,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T19:23:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155335251",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r155341414"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155341414"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@Sjors setup_clean_chain was set to True in this test https://github.com/bitcoin/bitcoin/pull/11403/files/e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b#diff-e3da38b280555e81d6b794e1117ed0a8R12",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-12-06T19:47:04Z",
      "diff_hunk" : "@@ -0,0 +1,41 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that the wallet can send and receive using all combinations of address types.\"\"\"\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+\n+class AddressTypeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 4\n+        self.setup_clean_chain = True\n+        self.extra_args = [[\"-addresstype=legacy\"], [\"-addresstype=p2sh\"], [\"-addresstype=bech32\"], [\"-addresstype=p2sh\", \"-changetype=bech32\"]]\n+\n+    def run_test(self):\n+        self.nodes[0].generate(120)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r155341414",
      "id" : 155341414,
      "in_reply_to_id" : 155266683,
      "original_commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "original_position" : 16,
      "path" : "test/functional/address_types.py",
      "position" : 16,
      "pull_request_review_id" : 81645651,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T19:47:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155341414",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/5617245?v=4",
         "events_url" : "https://api.github.com/users/afk11/events{/privacy}",
         "followers_url" : "https://api.github.com/users/afk11/followers",
         "following_url" : "https://api.github.com/users/afk11/following{/other_user}",
         "gists_url" : "https://api.github.com/users/afk11/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/afk11",
         "id" : 5617245,
         "login" : "afk11",
         "organizations_url" : "https://api.github.com/users/afk11/orgs",
         "received_events_url" : "https://api.github.com/users/afk11/received_events",
         "repos_url" : "https://api.github.com/users/afk11/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/afk11/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/afk11/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/afk11"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r155358997"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155358997"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I see. But why? Doesn't that slow down the tests?",
      "commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "created_at" : "2017-12-06T20:58:41Z",
      "diff_hunk" : "@@ -0,0 +1,41 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that the wallet can send and receive using all combinations of address types.\"\"\"\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+\n+class AddressTypeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 4\n+        self.setup_clean_chain = True\n+        self.extra_args = [[\"-addresstype=legacy\"], [\"-addresstype=p2sh\"], [\"-addresstype=bech32\"], [\"-addresstype=p2sh\", \"-changetype=bech32\"]]\n+\n+    def run_test(self):\n+        self.nodes[0].generate(120)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11403#discussion_r155358997",
      "id" : 155358997,
      "in_reply_to_id" : 155266683,
      "original_commit_id" : "e2e9ead25fe0ddb364e35f8eabb5a7f937d3973b",
      "original_position" : 16,
      "path" : "test/functional/address_types.py",
      "position" : 16,
      "pull_request_review_id" : 81665662,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11403",
      "updated_at" : "2017-12-06T20:58:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155358997",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
